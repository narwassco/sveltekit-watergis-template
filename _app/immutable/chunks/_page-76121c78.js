var zx=Object.defineProperty;var Nx=(i,e,t)=>e in i?zx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Fm=(i,e,t)=>(Nx(i,typeof e!="symbol"?e+"":e,t),t);import{H as Vn,I as Jf,J as k4,K as jx,S as fr,i as dr,s as hr,B as nr,L as Ni,k as Li,l as Pi,m as Ti,h as Oe,M as Un,b as wt,N as Gn,C as rr,D as or,E as sr,O as cr,P as Zr,f as tt,t as ct,Q as bo,R as On,T as to,o as ws,U as $r,V as D1,W as pn,v as xi,e as hn,w as Ci,x as Ai,X as fo,d as Ar,y as Si,Y as es,Z as Fo,_ as sc,g as Sr,$ as rh,a0 as oh,a1 as r_,A as Co,a2 as Ux,a as $i,c as en,n as hi,G as Vo,a3 as Ea,a4 as To,a5 as Lo,F as Xi,q as gn,r as yn,u as bs,a6 as Sg,p as Ia,a7 as sl,a8 as td,a9 as Vx,aa as C4,ab as _1,ac as Dh,ad as Fd,ae as O1,af as id,ag as U2,ah as ih,z as qx,ai as E4,aj as I4}from"./index-f5d486da.js";import{r as Hx,w as Sl}from"./singletons-a1f2c430.js";import{_ as v1}from"./preload-helper-aa6bc0ce.js";import{p as Gx}from"./stores-a125ee38.js";var V2=function(i,e){return V2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])},V2(i,e)};function Ha(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");V2(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var qo=function(){return qo=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},qo.apply(this,arguments)};function Ec(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ql=function(){function i(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(i,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.destroy=function(){},i}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Wx(i){return i===void 0&&(i=window),Xx(i)?{passive:!0}:!1}function Xx(i){i===void 0&&(i=window);var e=!1;try{var t={get passive(){return e=!0,!1}},n=function(){};i.document.addEventListener("test",n,t),i.document.removeEventListener("test",n,t)}catch{e=!1}return e}const T4=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:Wx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Yx(i,e){if(i.closest)return i.closest(e);for(var t=i;t;){if(L4(t,e))return t;t=t.parentElement}return null}function L4(i,e){var t=i.matches||i.webkitMatchesSelector||i.msMatchesSelector;return t.call(i,e)}function Zx(i){var e=i;if(e.offsetParent!==null)return e.scrollWidth;var t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);var n=t.scrollWidth;return document.documentElement.removeChild(t),n}const sp=Object.freeze(Object.defineProperty({__proto__:null,closest:Yx,matches:L4,estimateScrollWidth:Zx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Kx={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Jx={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},o_={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},zp;function Qx(i,e){e===void 0&&(e=!1);var t=i.CSS,n=zp;if(typeof zp=="boolean"&&!e)return zp;var l=t&&typeof t.supports=="function";if(!l)return!1;var u=t.supports("--css-vars","yes"),p=t.supports("(--css-vars: yes)")&&t.supports("color","#00000000");return n=u||p,e||(zp=n),n}function $x(i,e,t){if(!i)return{x:0,y:0};var n=e.x,l=e.y,u=n+t.left,p=l+t.top,o,c;if(i.type==="touchstart"){var g=i;o=g.changedTouches[0].pageX-u,c=g.changedTouches[0].pageY-p}else{var _=i;o=_.pageX-u,c=_.pageY-p}return{x:o,y:c}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var s_=["touchstart","pointerdown","mousedown","keydown"],a_=["touchend","pointerup","mouseup","contextmenu"],Np=[],e6=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.activationAnimationHasEnded=!1,n.activationTimer=0,n.fgDeactivationRemovalTimer=0,n.fgScale="0",n.frame={width:0,height:0},n.initialSize=0,n.layoutFrame=0,n.maxRadius=0,n.unboundedCoords={left:0,top:0},n.activationState=n.defaultActivationState(),n.activationTimerCallback=function(){n.activationAnimationHasEnded=!0,n.runDeactivationUXLogicIfReady()},n.activateHandler=function(l){n.activateImpl(l)},n.deactivateHandler=function(){n.deactivateImpl()},n.focusHandler=function(){n.handleFocus()},n.blurHandler=function(){n.handleBlur()},n.resizeHandler=function(){n.layout()},n}return Object.defineProperty(e,"cssClasses",{get:function(){return Kx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Jx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return o_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this,n=this.supportsPressRipple();if(this.registerRootHandlers(n),n){var l=e.cssClasses,u=l.ROOT,p=l.UNBOUNDED;requestAnimationFrame(function(){t.adapter.addClass(u),t.adapter.isUnbounded()&&(t.adapter.addClass(p),t.layoutInternal())})}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var n=e.cssClasses,l=n.ROOT,u=n.UNBOUNDED;requestAnimationFrame(function(){t.adapter.removeClass(l),t.adapter.removeClass(u),t.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(t){this.activateImpl(t)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var t=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){t.layoutInternal(),t.layoutFrame=0})},e.prototype.setUnbounded=function(t){var n=e.cssClasses.UNBOUNDED;t?this.adapter.addClass(n):this.adapter.removeClass(n)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame(function(){return t.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame(function(){return t.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(t){var n,l;if(t){try{for(var u=Ec(s_),p=u.next();!p.done;p=u.next()){var o=p.value;this.adapter.registerInteractionHandler(o,this.activateHandler)}}catch(c){n={error:c}}finally{try{p&&!p.done&&(l=u.return)&&l.call(u)}finally{if(n)throw n.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(t){var n,l;if(t.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var u=Ec(a_),p=u.next();!p.done;p=u.next()){var o=p.value;this.adapter.registerDocumentInteractionHandler(o,this.deactivateHandler)}}catch(c){n={error:c}}finally{try{p&&!p.done&&(l=u.return)&&l.call(u)}finally{if(n)throw n.error}}},e.prototype.deregisterRootHandlers=function(){var t,n;try{for(var l=Ec(s_),u=l.next();!u.done;u=l.next()){var p=u.value;this.adapter.deregisterInteractionHandler(p,this.activateHandler)}}catch(o){t={error:o}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var t,n;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var l=Ec(a_),u=l.next();!u.done;u=l.next()){var p=u.value;this.adapter.deregisterDocumentInteractionHandler(p,this.deactivateHandler)}}catch(o){t={error:o}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}},e.prototype.removeCssVars=function(){var t=this,n=e.strings,l=Object.keys(n);l.forEach(function(u){u.indexOf("VAR_")===0&&t.adapter.updateCssVariable(n[u],null)})},e.prototype.activateImpl=function(t){var n=this;if(!this.adapter.isSurfaceDisabled()){var l=this.activationState;if(!l.isActivated){var u=this.previousActivationEvent,p=u&&t!==void 0&&u.type!==t.type;if(!p){l.isActivated=!0,l.isProgrammatic=t===void 0,l.activationEvent=t,l.wasActivatedByPointer=l.isProgrammatic?!1:t!==void 0&&(t.type==="mousedown"||t.type==="touchstart"||t.type==="pointerdown");var o=t!==void 0&&Np.length>0&&Np.some(function(c){return n.adapter.containsEventTarget(c)});if(o){this.resetActivationState();return}t!==void 0&&(Np.push(t.target),this.registerDeactivationHandlers(t)),l.wasElementMadeActive=this.checkElementMadeActive(t),l.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Np=[],!l.wasElementMadeActive&&t!==void 0&&(t.key===" "||t.keyCode===32)&&(l.wasElementMadeActive=n.checkElementMadeActive(t),l.wasElementMadeActive&&n.animateActivation()),l.wasElementMadeActive||(n.activationState=n.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(t){return t!==void 0&&t.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var t=this,n=e.strings,l=n.VAR_FG_TRANSLATE_START,u=n.VAR_FG_TRANSLATE_END,p=e.cssClasses,o=p.FG_DEACTIVATION,c=p.FG_ACTIVATION,g=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var _="",v="";if(!this.adapter.isUnbounded()){var w=this.getFgTranslationCoordinates(),x=w.startPoint,C=w.endPoint;_=x.x+"px, "+x.y+"px",v=C.x+"px, "+C.y+"px"}this.adapter.updateCssVariable(l,_),this.adapter.updateCssVariable(u,v),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(o),this.adapter.computeBoundingRect(),this.adapter.addClass(c),this.activationTimer=setTimeout(function(){t.activationTimerCallback()},g)},e.prototype.getFgTranslationCoordinates=function(){var t=this.activationState,n=t.activationEvent,l=t.wasActivatedByPointer,u;l?u=$x(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):u={x:this.frame.width/2,y:this.frame.height/2},u={x:u.x-this.initialSize/2,y:u.y-this.initialSize/2};var p={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:u,endPoint:p}},e.prototype.runDeactivationUXLogicIfReady=function(){var t=this,n=e.cssClasses.FG_DEACTIVATION,l=this.activationState,u=l.hasDeactivationUXRun,p=l.isActivated,o=u||!p;o&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer=setTimeout(function(){t.adapter.removeClass(n)},o_.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(t),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var t=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return t.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var t=this,n=this.activationState;if(!!n.isActivated){var l=qo({},n);n.isProgrammatic?(requestAnimationFrame(function(){t.animateDeactivation(l)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){t.activationState.hasDeactivationUXRun=!0,t.animateDeactivation(l),t.resetActivationState()}))}},e.prototype.animateDeactivation=function(t){var n=t.wasActivatedByPointer,l=t.wasElementMadeActive;(n||l)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var t=this;this.frame=this.adapter.computeBoundingRect();var n=Math.max(this.frame.height,this.frame.width),l=function(){var p=Math.sqrt(Math.pow(t.frame.width,2)+Math.pow(t.frame.height,2));return p+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?n:l();var u=Math.floor(n*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&u%2!==0?this.initialSize=u-1:this.initialSize=u,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var t=e.strings,n=t.VAR_FG_SIZE,l=t.VAR_LEFT,u=t.VAR_TOP,p=t.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize+"px"),this.adapter.updateCssVariable(p,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(l,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(u,this.unboundedCoords.top+"px"))},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wf={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},r1={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},t6={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var kg=function(i){Ha(e,i);function e(t){return i.call(this,qo(qo({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return t6},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Wf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return r1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.handleTargetScroll=function(){},e.prototype.handleWindowResize=function(){},e.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var jp=0,P4=function(i){Ha(e,i);function e(t){var n=i.call(this,t)||this;return n.wasDocked=!0,n.isDockedShowing=!0,n.currentAppBarOffsetTop=0,n.isCurrentlyBeingResized=!1,n.resizeThrottleId=jp,n.resizeDebounceId=jp,n.lastScrollPosition=n.adapter.getViewportScrollY(),n.topAppBarHeight=n.adapter.getTopAppBarHeight(),n}return e.prototype.destroy=function(){i.prototype.destroy.call(this),this.adapter.setStyle("top","")},e.prototype.handleTargetScroll=function(){var t=Math.max(this.adapter.getViewportScrollY(),0),n=t-this.lastScrollPosition;this.lastScrollPosition=t,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=n,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},e.prototype.handleWindowResize=function(){var t=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){t.resizeThrottleId=jp,t.throttledResizeHandler()},r1.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){t.handleTargetScroll(),t.isCurrentlyBeingResized=!1,t.resizeDebounceId=jp},r1.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},e.prototype.checkForUpdate=function(){var t=-this.topAppBarHeight,n=this.currentAppBarOffsetTop<0,l=this.currentAppBarOffsetTop>t,u=n&&l;if(u)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==l)return this.isDockedShowing=l,!0}else return this.wasDocked=!0,!0;return u},e.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var t=this.currentAppBarOffsetTop;Math.abs(t)>=this.topAppBarHeight&&(t=-r1.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",t+"px")}},e.prototype.throttledResizeHandler=function(){var t=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==t&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-t,this.topAppBarHeight=t),this.handleTargetScroll()},e}(kg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var i6=function(i){Ha(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.wasScrolled=!1,t}return e.prototype.handleTargetScroll=function(){var t=this.adapter.getViewportScrollY();t<=0?this.wasScrolled&&(this.adapter.removeClass(Wf.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(Wf.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},e}(P4);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var n6=function(i){Ha(e,i);function e(t){var n=i.call(this,t)||this;return n.collapsed=!1,n.isAlwaysCollapsed=!1,n}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),e.prototype.init=function(){i.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Wf.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Wf.SHORT_COLLAPSED_CLASS))},e.prototype.setAlwaysCollapsed=function(t){this.isAlwaysCollapsed=!!t,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},e.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},e.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},e.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var t=this.adapter.getViewportScrollY();t<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},e.prototype.uncollapse=function(){this.adapter.removeClass(Wf.SHORT_COLLAPSED_CLASS),this.collapsed=!1},e.prototype.collapse=function(){this.adapter.addClass(Wf.SHORT_COLLAPSED_CLASS),this.collapsed=!0},e}(kg);function Hn(i){return Object.entries(i).filter(([e,t])=>e!==""&&t).map(([e])=>e).join(" ")}function Qr(i,e,t,n={bubbles:!0},l=!1){if(typeof Event<"u"&&i){const u=new CustomEvent(e,Object.assign(Object.assign({},n),{detail:t}));if(i==null||i.dispatchEvent(u),l&&e.startsWith("SMUI")){const p=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},n),{detail:t}));i==null||i.dispatchEvent(p),p.defaultPrevented&&u.preventDefault()}return u}}function ah(i,e){let t=Object.getOwnPropertyNames(i);const n={};for(let l=0;l<t.length;l++){const u=t[l],p=u.indexOf("$");p!==-1&&e.indexOf(u.substring(0,p+1))!==-1||e.indexOf(u)===-1&&(n[u]=i[u])}return n}const l_=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,r6=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function io(i){let e,t=[];i.$on=(l,u)=>{let p=l,o=()=>{};return e?o=e(p,u):t.push([p,u]),p.match(l_)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',p),()=>{o()}};function n(l){Jf(i,l)}return l=>{const u=[],p={};e=(o,c)=>{let g=o,_=c,v=!1;const w=g.match(l_),x=g.match(r6),C=w||x;if(g.match(/^SMUI:\w+:/)){const M=g.split(":");let O="";for(let V=0;V<M.length;V++)O+=V===M.length-1?":"+M[V]:M[V].split("-").map(W=>W.slice(0,1).toUpperCase()+W.slice(1)).join("");console.warn(`The event ${g.split("$")[0]} has been renamed to ${O.split("$")[0]}.`),g=O}if(C){const M=g.split(w?":":"$");g=M[0];const O=Object.fromEntries(M.slice(1).map(V=>[V,!0]));O.passive&&(v=v||{},v.passive=!0),O.nonpassive&&(v=v||{},v.passive=!1),O.capture&&(v=v||{},v.capture=!0),O.once&&(v=v||{},v.once=!0),O.preventDefault&&(_=k4(_)),O.stopPropagation&&(_=jx(_))}const T=Vn(l,g,_,v),k=()=>{T();const M=u.indexOf(k);M>-1&&u.splice(M,1)};return u.push(k),g in p||(p[g]=Vn(l,g,n)),k};for(let o=0;o<t.length;o++)e(t[o][0],t[o][1]);return{destroy:()=>{for(let o=0;o<u.length;o++)u[o]();for(let o of Object.entries(p))o[1]()}}}}function Jr(i,e){let t=Object.getOwnPropertyNames(i);const n={};for(let l=0;l<t.length;l++){const u=t[l];u.substring(0,e.length)===e&&(n[u.substring(e.length)]=i[u])}return n}function go(i,e){let t=[];if(e)for(let n=0;n<e.length;n++){const l=e[n],u=Array.isArray(l)?l[0]:l;Array.isArray(l)&&l.length>1?t.push(u(i,l[1])):t.push(u(i))}return{update(n){if((n&&n.length||0)!=t.length)throw new Error("You must not change the length of an actions array.");if(n)for(let l=0;l<n.length;l++){const u=t[l];if(u&&u.update){const p=n[l];Array.isArray(p)&&p.length>1?u.update(p[1]):u.update()}}},destroy(){for(let n=0;n<t.length;n++){const l=t[n];l&&l.destroy&&l.destroy()}}}}const{window:u_}=D1;function o6(i){let e,t,n,l,u,p,o;const c=i[22].default,g=nr(c,i,i[21],null);let _=[{class:t=Hn({[i[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":i[4]==="short","mdc-top-app-bar--short-collapsed":i[0],"mdc-top-app-bar--fixed":i[4]==="fixed","smui-top-app-bar--static":i[4]==="static","smui-top-app-bar--color-secondary":i[5]==="secondary","mdc-top-app-bar--prominent":i[6],"mdc-top-app-bar--dense":i[7],...i[11]})},{style:n=Object.entries(i[12]).map(c_).concat([i[3]]).join(" ")},i[15]],v={};for(let w=0;w<_.length;w+=1)v=Ni(v,_[w]);return{c(){e=Li("header"),g&&g.c(),this.h()},l(w){e=Pi(w,"HEADER",{class:!0,style:!0});var x=Ti(e);g&&g.l(x),x.forEach(Oe),this.h()},h(){Un(e,v)},m(w,x){wt(w,e,x),g&&g.m(e,null),i[25](e),u=!0,p||(o=[Vn(u_,"resize",i[23]),Vn(u_,"scroll",i[24]),Gn(l=go.call(null,e,i[1])),Gn(i[13].call(null,e)),Vn(e,"SMUITopAppBarIconButton:nav",i[26])],p=!0)},p(w,x){g&&g.p&&(!u||x[0]&2097152)&&rr(g,c,w,w[21],u?sr(c,w[21],x,null):or(w[21]),null),Un(e,v=cr(_,[(!u||x[0]&2293&&t!==(t=Hn({[w[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":w[4]==="short","mdc-top-app-bar--short-collapsed":w[0],"mdc-top-app-bar--fixed":w[4]==="fixed","smui-top-app-bar--static":w[4]==="static","smui-top-app-bar--color-secondary":w[5]==="secondary","mdc-top-app-bar--prominent":w[6],"mdc-top-app-bar--dense":w[7],...w[11]})))&&{class:t},(!u||x[0]&4104&&n!==(n=Object.entries(w[12]).map(c_).concat([w[3]]).join(" ")))&&{style:n},x[0]&32768&&w[15]])),l&&Zr(l.update)&&x[0]&2&&l.update.call(null,w[1])},i(w){u||(tt(g,w),u=!0)},o(w){ct(g,w),u=!1},d(w){w&&Oe(e),g&&g.d(w),i[25](null),p=!1,bo(o)}}}const c_=([i,e])=>`${i}: ${e};`;function s6(i,e,t){const n=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let c=()=>{};function g(de){return de===c}let{use:_=[]}=e,{class:v=""}=e,{style:w=""}=e,{variant:x="standard"}=e,{color:C="primary"}=e,{collapsed:T=c}=e;const k=!g(T)&&!!T;g(T)&&(T=!1);let{prominent:M=!1}=e,{dense:O=!1}=e,{scrollTarget:V=void 0}=e,W,J,Q={},Z={},ie,Se=Hx({variant:x,prominent:M,dense:O},de=>{t(18,ie=de)}),xe,le=x;ws(()=>(t(9,J=Ee()),J.init(),()=>{J.destroy()}));function Ee(){const de={static:kg,short:n6,fixed:i6}[x]||P4;return new de({hasClass:me,addClass:Ae,removeClass:pt,setStyle:rt,getTopAppBarHeight:()=>W.clientHeight,notifyNavigationIconClicked:()=>Qr(W,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>V==null?window.pageYOffset:V.scrollTop,getTotalActionItems:()=>W.querySelectorAll(".mdc-top-app-bar__action-item").length})}function me(de){return de in Q?Q[de]:be().classList.contains(de)}function Ae(de){Q[de]||t(11,Q[de]=!0,Q)}function pt(de){(!(de in Q)||Q[de])&&t(11,Q[de]=!1,Q)}function rt(de,ge){Z[de]!=ge&&(ge===""||ge==null?(delete Z[de],t(12,Z),t(20,le),t(4,x),t(9,J)):t(12,Z[de]=ge,Z))}function Pt(){J&&(J.handleTargetScroll(),x==="short"&&t(0,T="isCollapsed"in J&&J.isCollapsed))}function We(){return Se}function be(){return W}const Le=()=>x!=="short"&&x!=="fixed"&&J&&J.handleWindowResize(),Ue=()=>V==null&&Pt();function ce(de){pn[de?"unshift":"push"](()=>{W=de,t(10,W)})}const Ie=()=>J&&J.handleNavigationClick();return i.$$set=de=>{e=Ni(Ni({},e),$r(de)),t(15,l=On(e,n)),"use"in de&&t(1,_=de.use),"class"in de&&t(2,v=de.class),"style"in de&&t(3,w=de.style),"variant"in de&&t(4,x=de.variant),"color"in de&&t(5,C=de.color),"collapsed"in de&&t(0,T=de.collapsed),"prominent"in de&&t(6,M=de.prominent),"dense"in de&&t(7,O=de.dense),"scrollTarget"in de&&t(8,V=de.scrollTarget),"$$scope"in de&&t(21,p=de.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&262352&&ie&&ie({variant:x,prominent:M,dense:O}),i.$$.dirty[0]&1049104&&le!==x&&J&&(t(20,le=x),J.destroy(),t(11,Q={}),t(12,Z={}),t(9,J=Ee()),J.init()),i.$$.dirty[0]&528&&J&&x==="short"&&"setAlwaysCollapsed"in J&&J.setAlwaysCollapsed(k),i.$$.dirty[0]&524544&&xe!==V&&(xe&&xe.removeEventListener("scroll",Pt),V&&V.addEventListener("scroll",Pt),t(19,xe=V))},[T,_,v,w,x,C,M,O,V,J,W,Q,Z,o,Pt,l,We,be,ie,xe,le,p,u,Le,Ue,ce,Ie]}class a6 extends fr{constructor(e){super(),dr(this,e,s6,o6,hr,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function l6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("div"),o&&o.c(),this.h()},l(_){e=Pi(_,"DIV",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function u6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class M4 extends fr{constructor(e){super(),dr(this,e,u6,l6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function c6(i){let e;const t=i[10].default,n=nr(t,i,i[12],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&4096)&&rr(n,t,l,l[12],e?sr(t,l[12],u,null):or(l[12]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function h6(i){let e,t,n;const l=[{use:[i[7],...i[0]]},{class:Hn({[i[1]]:!0,[i[5]]:!0,...i[4]})},i[6],i[8]];var u=i[2];function p(o){let c={$$slots:{default:[c6]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[11](e)),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,[c]){const g=c&499?cr(l,[c&129&&{use:[o[7],...o[0]]},c&50&&{class:Hn({[o[1]]:!0,[o[5]]:!0,...o[4]})},c&64&&fo(o[6]),c&256&&fo(o[8])]):{};if(c&4096&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[2])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[11](e),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[11](null),o&&Oe(t),e&&Si(e,o)}}}const lf={component:M4,class:"",classMap:{},contexts:{},props:{}};function f6(i,e,t){const n=["use","class","component","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e,{class:c=""}=e,g;const _=lf.class,v={},w=[],x=lf.contexts,C=lf.props;let{component:T=lf.component}=e;Object.entries(lf.classMap).forEach(([V,W])=>{const J=es(W);J&&"subscribe"in J&&w.push(J.subscribe(Q=>{t(4,v[V]=Q,v)}))});const k=io(to());for(let V in x)x.hasOwnProperty(V)&&Fo(V,x[V]);sc(()=>{for(const V of w)V()});function M(){return g.getElement()}function O(V){pn[V?"unshift":"push"](()=>{g=V,t(3,g)})}return i.$$set=V=>{e=Ni(Ni({},e),$r(V)),t(8,l=On(e,n)),"use"in V&&t(0,o=V.use),"class"in V&&t(1,c=V.class),"component"in V&&t(2,T=V.component),"$$scope"in V&&t(12,p=V.$$scope)},[o,c,T,g,v,_,C,k,l,M,u,O,p]}class d6 extends fr{constructor(e){super(),dr(this,e,f6,h6,hr,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const h_=Object.assign({},lf);function da(i){return new Proxy(d6,{construct:function(e,t){return Object.assign(lf,h_,i),new e(...t)},get:function(e,t){return Object.assign(lf,h_,i),e[t]}})}function p6(i){let e,t,n,l,u;const p=i[7].default,o=nr(p,i,i[6],null);let c=[{href:i[1]},i[4]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("a"),o&&o.c(),this.h()},l(_){e=Pi(_,"A",{href:!0});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[8](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[3].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&64)&&rr(o,p,_,_[6],n?sr(p,_[6],v,null):or(_[6]),null),Un(e,g=cr(c,[(!n||v&2)&&{href:_[1]},v&16&&_[4]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[8](null),l=!1,bo(u)}}}function m6(i,e,t){const n=["use","href","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e,{href:c="javascript:void(0);"}=e;const g=io(to());let _;function v(){return _}function w(x){pn[x?"unshift":"push"](()=>{_=x,t(2,_)})}return i.$$set=x=>{e=Ni(Ni({},e),$r(x)),t(4,l=On(e,n)),"use"in x&&t(0,o=x.use),"href"in x&&t(1,c=x.href),"$$scope"in x&&t(6,p=x.$$scope)},[o,c,_,g,l,v,p,u,w]}class g6 extends fr{constructor(e){super(),dr(this,e,m6,p6,hr,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function y6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("button"),o&&o.c(),this.h()},l(_){e=Pi(_,"BUTTON",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),e.autofocus&&e.focus(),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function _6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class v6 extends fr{constructor(e){super(),dr(this,e,_6,y6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function b6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("h2"),o&&o.c(),this.h()},l(_){e=Pi(_,"H2",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function w6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class x6 extends fr{constructor(e){super(),dr(this,e,w6,b6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function A6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("h3"),o&&o.c(),this.h()},l(_){e=Pi(_,"H3",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function S6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class k6 extends fr{constructor(e){super(),dr(this,e,S6,A6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function C6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("h5"),o&&o.c(),this.h()},l(_){e=Pi(_,"H5",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function E6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class I6 extends fr{constructor(e){super(),dr(this,e,E6,C6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function T6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("h6"),o&&o.c(),this.h()},l(_){e=Pi(_,"H6",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function L6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class P6 extends fr{constructor(e){super(),dr(this,e,L6,T6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function M6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("i"),o&&o.c(),this.h()},l(_){e=Pi(_,"I",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function D6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class O6 extends fr{constructor(e){super(),dr(this,e,D6,M6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function F6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("li"),o&&o.c(),this.h()},l(_){e=Pi(_,"LI",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function R6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class B6 extends fr{constructor(e){super(),dr(this,e,R6,F6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function z6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("main"),o&&o.c(),this.h()},l(_){e=Pi(_,"MAIN",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function N6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class j6 extends fr{constructor(e){super(),dr(this,e,N6,z6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function U6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("nav"),o&&o.c(),this.h()},l(_){e=Pi(_,"NAV",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function V6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class q6 extends fr{constructor(e){super(),dr(this,e,V6,U6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function H6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("span"),o&&o.c(),this.h()},l(_){e=Pi(_,"SPAN",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function G6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class D4 extends fr{constructor(e){super(),dr(this,e,G6,H6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function W6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=rh("svg"),o&&o.c(),this.h()},l(_){e=oh(_,"svg",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){r_(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),r_(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function X6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class f_ extends fr{constructor(e){super(),dr(this,e,X6,W6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Y6(i){let e,t,n,l,u;const p=i[6].default,o=nr(p,i,i[5],null);let c=[i[3]],g={};for(let _=0;_<c.length;_+=1)g=Ni(g,c[_]);return{c(){e=Li("ul"),o&&o.c(),this.h()},l(_){e=Pi(_,"UL",{});var v=Ti(e);o&&o.l(v),v.forEach(Oe),this.h()},h(){Un(e,g)},m(_,v){wt(_,e,v),o&&o.m(e,null),i[7](e),n=!0,l||(u=[Gn(t=go.call(null,e,i[0])),Gn(i[2].call(null,e))],l=!0)},p(_,[v]){o&&o.p&&(!n||v&32)&&rr(o,p,_,_[5],n?sr(p,_[5],v,null):or(_[5]),null),Un(e,g=cr(c,[v&8&&_[3]])),t&&Zr(t.update)&&v&1&&t.update.call(null,_[0])},i(_){n||(tt(o,_),n=!0)},o(_){ct(o,_),n=!1},d(_){_&&Oe(e),o&&o.d(_),i[7](null),l=!1,bo(u)}}}function Z6(i,e,t){const n=["use","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e,{use:o=[]}=e;const c=io(to());let g;function _(){return g}function v(w){pn[w?"unshift":"push"](()=>{g=w,t(1,g)})}return i.$$set=w=>{e=Ni(Ni({},e),$r(w)),t(3,l=On(e,n)),"use"in w&&t(0,o=w.use),"$$scope"in w&&t(5,p=w.$$scope)},[o,g,c,l,_,p,u,v]}class K6 extends fr{constructor(e){super(),dr(this,e,Z6,Y6,hr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const Cg=g6,O4=v6,vf=M4,J6=x6,Q6=k6,$6=I6,e8=P6,t8=B6,i8=j6,n8=q6,bf=D4,r8=K6,o8=da({class:"mdc-top-app-bar__row",component:vf});function s8(i){let e,t,n,l,u,p;const o=i[9].default,c=nr(o,i,i[8],null);let g=[{class:t=Hn({[i[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":i[2]==="start","mdc-top-app-bar__section--align-end":i[2]==="end"})},i[3]?{role:"toolbar"}:{},i[6]],_={};for(let v=0;v<g.length;v+=1)_=Ni(_,g[v]);return{c(){e=Li("section"),c&&c.c(),this.h()},l(v){e=Pi(v,"SECTION",{class:!0});var w=Ti(e);c&&c.l(w),w.forEach(Oe),this.h()},h(){Un(e,_)},m(v,w){wt(v,e,w),c&&c.m(e,null),i[10](e),l=!0,u||(p=[Gn(n=go.call(null,e,i[0])),Gn(i[5].call(null,e))],u=!0)},p(v,[w]){c&&c.p&&(!l||w&256)&&rr(c,o,v,v[8],l?sr(o,v[8],w,null):or(v[8]),null),Un(e,_=cr(g,[(!l||w&6&&t!==(t=Hn({[v[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":v[2]==="start","mdc-top-app-bar__section--align-end":v[2]==="end"})))&&{class:t},w&8&&(v[3]?{role:"toolbar"}:{}),w&64&&v[6]])),n&&Zr(n.update)&&w&1&&n.update.call(null,v[0])},i(v){l||(tt(c,v),l=!0)},o(v){ct(c,v),l=!1},d(v){v&&Oe(e),c&&c.d(v),i[10](null),u=!1,bo(p)}}}function a8(i,e,t){const n=["use","class","align","toolbar","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{align:_="start"}=e,{toolbar:v=!1}=e,w;Fo("SMUI:icon-button:context",v?"top-app-bar:action":"top-app-bar:navigation"),Fo("SMUI:button:context",v?"top-app-bar:action":"top-app-bar:navigation");function x(){return w}function C(T){pn[T?"unshift":"push"](()=>{w=T,t(4,w)})}return i.$$set=T=>{e=Ni(Ni({},e),$r(T)),t(6,l=On(e,n)),"use"in T&&t(0,c=T.use),"class"in T&&t(1,g=T.class),"align"in T&&t(2,_=T.align),"toolbar"in T&&t(3,v=T.toolbar),"$$scope"in T&&t(8,p=T.$$scope)},[c,g,_,v,w,o,l,x,p,u,C]}class l8 extends fr{constructor(e){super(),dr(this,e,a8,s8,hr,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}const u8=da({class:"mdc-top-app-bar__title",component:bf});function c8(i){let e;const t=i[11].default,n=nr(t,i,i[13],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&8192)&&rr(n,t,l,l[13],e?sr(t,l[13],u,null):or(l[13]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function h8(i){let e,t,n;const l=[{use:[i[6],...i[0]]},{class:Hn({[i[1]]:!0,[i[5]]:!0})},i[7]];var u=i[2];function p(o){let c={$$slots:{default:[c8]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[12](e)),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,[c]){const g=c&227?cr(l,[c&65&&{use:[o[6],...o[0]]},c&34&&{class:Hn({[o[1]]:!0,[o[5]]:!0})},c&128&&fo(o[7])]):{};if(c&8192&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[2])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[12](e),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[12](null),o&&Oe(t),e&&Si(e,o)}}}function f8(i,e,t){let n,l;const u=["use","class","topAppBar","component","getElement"];let p=On(e,u),o,c=Co,g=()=>(c(),c=Ux(n,W=>t(10,o=W)),n);i.$$.on_destroy.push(()=>c());let{$$slots:_={},$$scope:v}=e;const w=io(to());let{use:x=[]}=e,{class:C=""}=e,{topAppBar:T}=e,k,{component:M=i8}=e;function O(){return k.getElement()}function V(W){pn[W?"unshift":"push"](()=>{k=W,t(4,k)})}return i.$$set=W=>{e=Ni(Ni({},e),$r(W)),t(7,p=On(e,u)),"use"in W&&t(0,x=W.use),"class"in W&&t(1,C=W.class),"topAppBar"in W&&t(8,T=W.topAppBar),"component"in W&&t(2,M=W.component),"$$scope"in W&&t(13,v=W.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&g(t(3,n=T&&T.getPropStore())),i.$$.dirty&1032&&t(5,l=(()=>!n||o.variant==="static"?"":o.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":o.prominent&&o.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":o.prominent?"mdc-top-app-bar--prominent-fixed-adjust":o.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[x,C,M,n,k,l,w,p,T,O,o,_,V,v]}class d8 extends fr{constructor(e){super(),dr(this,e,f8,h8,hr,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const d_=l8,p8=d8;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Up={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},Ch={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var m8=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.hasToggledAriaLabel=!1,n}return Object.defineProperty(e,"cssClasses",{get:function(){return Up},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Ch},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this.adapter.getAttr(Ch.DATA_ARIA_LABEL_ON),n=this.adapter.getAttr(Ch.DATA_ARIA_LABEL_OFF);if(t&&n){if(this.adapter.getAttr(Ch.ARIA_PRESSED)!==null)throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(Ch.ARIA_PRESSED,String(this.isOn()))},e.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},e.prototype.isOn=function(){return this.adapter.hasClass(Up.ICON_BUTTON_ON)},e.prototype.toggle=function(t){if(t===void 0&&(t=!this.isOn()),t?this.adapter.addClass(Up.ICON_BUTTON_ON):this.adapter.removeClass(Up.ICON_BUTTON_ON),this.hasToggledAriaLabel){var n=t?this.adapter.getAttr(Ch.DATA_ARIA_LABEL_ON):this.adapter.getAttr(Ch.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(Ch.ARIA_LABEL,n||"")}else this.adapter.setAttr(Ch.ARIA_PRESSED,""+t)},e}(ql);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Rm="mdc-dom-focus-sentinel",g8=function(){function i(e,t){t===void 0&&(t={}),this.root=e,this.options=t,this.elFocusedBeforeTrapFocus=null}return i.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(e.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},i.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Rm)).forEach(function(e){e.parentElement.removeChild(e)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},i.prototype.wrapTabFocus=function(e){var t=this,n=this.createSentinel(),l=this.createSentinel();n.addEventListener("focus",function(){var u=t.getFocusableElements(e);u.length>0&&u[u.length-1].focus()}),l.addEventListener("focus",function(){var u=t.getFocusableElements(e);u.length>0&&u[0].focus()}),e.insertBefore(n,e.children[0]),e.appendChild(l)},i.prototype.focusInitialElement=function(e,t){var n=0;t&&(n=Math.max(e.indexOf(t),0)),e[n].focus()},i.prototype.getFocusableElements=function(e){var t=[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return t.filter(function(n){var l=n.getAttribute("aria-disabled")==="true"||n.getAttribute("disabled")!=null||n.getAttribute("hidden")!=null||n.getAttribute("aria-hidden")==="true",u=n.tabIndex>=0&&n.getBoundingClientRect().width>0&&!n.classList.contains(Rm)&&!l,p=!1;if(u){var o=getComputedStyle(n);p=o.display==="none"||o.visibility==="hidden"}return u&&!p})},i.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(Rm),e},i}();const y8=Object.freeze(Object.defineProperty({__proto__:null,FocusTrap:g8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var uo={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Hl=new Set;Hl.add(uo.BACKSPACE);Hl.add(uo.ENTER);Hl.add(uo.SPACEBAR);Hl.add(uo.PAGE_UP);Hl.add(uo.PAGE_DOWN);Hl.add(uo.END);Hl.add(uo.HOME);Hl.add(uo.ARROW_LEFT);Hl.add(uo.ARROW_UP);Hl.add(uo.ARROW_RIGHT);Hl.add(uo.ARROW_DOWN);Hl.add(uo.DELETE);Hl.add(uo.ESCAPE);Hl.add(uo.TAB);var uu={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Gl=new Map;Gl.set(uu.BACKSPACE,uo.BACKSPACE);Gl.set(uu.ENTER,uo.ENTER);Gl.set(uu.SPACEBAR,uo.SPACEBAR);Gl.set(uu.PAGE_UP,uo.PAGE_UP);Gl.set(uu.PAGE_DOWN,uo.PAGE_DOWN);Gl.set(uu.END,uo.END);Gl.set(uu.HOME,uo.HOME);Gl.set(uu.ARROW_LEFT,uo.ARROW_LEFT);Gl.set(uu.ARROW_UP,uo.ARROW_UP);Gl.set(uu.ARROW_RIGHT,uo.ARROW_RIGHT);Gl.set(uu.ARROW_DOWN,uo.ARROW_DOWN);Gl.set(uu.DELETE,uo.DELETE);Gl.set(uu.ESCAPE,uo.ESCAPE);Gl.set(uu.TAB,uo.TAB);var wf=new Set;wf.add(uo.PAGE_UP);wf.add(uo.PAGE_DOWN);wf.add(uo.END);wf.add(uo.HOME);wf.add(uo.ARROW_LEFT);wf.add(uo.ARROW_UP);wf.add(uo.ARROW_RIGHT);wf.add(uo.ARROW_DOWN);function fa(i){var e=i.key;if(Hl.has(e))return e;var t=Gl.get(i.keyCode);return t||uo.UNKNOWN}const{applyPassive:Vp}=T4,{matches:_8}=sp;function lh(i,{ripple:e=!0,surface:t=!1,unbounded:n=!1,disabled:l=!1,color:u,active:p,rippleElement:o,eventTarget:c,activeTarget:g,addClass:_=C=>i.classList.add(C),removeClass:v=C=>i.classList.remove(C),addStyle:w=(C,T)=>i.style.setProperty(C,T),initPromise:x=Promise.resolve()}={}){let C,T=es("SMUI:addLayoutListener"),k,M=p,O=c,V=g;function W(){t?(_("mdc-ripple-surface"),u==="primary"?(_("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")):u==="secondary"?(v("smui-ripple-surface--primary"),_("smui-ripple-surface--secondary")):(v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary"))):(v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),C&&M!==p&&(M=p,p?C.activate():p===!1&&C.deactivate()),e&&!C?(C=new e6({addClass:_,browserSupportsCssVars:()=>Qx(window),computeBoundingRect:()=>(o||i).getBoundingClientRect(),containsEventTarget:Q=>i.contains(Q),deregisterDocumentInteractionHandler:(Q,Z)=>document.documentElement.removeEventListener(Q,Z,Vp()),deregisterInteractionHandler:(Q,Z)=>(c||i).removeEventListener(Q,Z,Vp()),deregisterResizeHandler:Q=>window.removeEventListener("resize",Q),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>p==null?_8(g||i,":active"):p,isSurfaceDisabled:()=>!!l,isUnbounded:()=>!!n,registerDocumentInteractionHandler:(Q,Z)=>document.documentElement.addEventListener(Q,Z,Vp()),registerInteractionHandler:(Q,Z)=>(c||i).addEventListener(Q,Z,Vp()),registerResizeHandler:Q=>window.addEventListener("resize",Q),removeClass:v,updateCssVariable:w}),x.then(()=>{C&&(C.init(),C.setUnbounded(n))})):C&&!e&&x.then(()=>{C&&(C.destroy(),C=void 0)}),C&&(O!==c||V!==g)&&(O=c,V=g,C.destroy(),requestAnimationFrame(()=>{C&&(C.init(),C.setUnbounded(n))})),!e&&n&&_("mdc-ripple-upgraded--unbounded")}W(),T&&(k=T(J));function J(){C&&C.layout()}return{update(Q){({ripple:e,surface:t,unbounded:n,disabled:l,color:u,active:p,rippleElement:o,eventTarget:c,activeTarget:g,addClass:_,removeClass:v,addStyle:w,initPromise:x}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:Z=>i.classList.add(Z),removeClass:Z=>i.classList.remove(Z),addStyle:(Z,ie)=>i.style.setProperty(Z,ie),initPromise:Promise.resolve()},Q)),W()},destroy(){C&&(C.destroy(),C=void 0,v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),k&&k()}}}function p_(i){let e;return{c(){e=Li("div"),this.h()},l(t){e=Pi(t,"DIV",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","mdc-icon-button__touch")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function v8(i){let e,t,n,l;const u=i[32].default,p=nr(u,i,i[36],null);let o=i[8]&&p_();return{c(){e=Li("div"),t=$i(),p&&p.c(),o&&o.c(),n=hn(),this.h()},l(c){e=Pi(c,"DIV",{class:!0}),Ti(e).forEach(Oe),t=en(c),p&&p.l(c),o&&o.l(c),n=hn(),this.h()},h(){hi(e,"class","mdc-icon-button__ripple")},m(c,g){wt(c,e,g),wt(c,t,g),p&&p.m(c,g),o&&o.m(c,g),wt(c,n,g),l=!0},p(c,g){p&&p.p&&(!l||g[1]&32)&&rr(p,u,c,c[36],l?sr(u,c[36],g,null):or(c[36]),null),c[8]?o||(o=p_(),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(c){l||(tt(p,c),l=!0)},o(c){ct(p,c),l=!1},d(c){c&&Oe(e),c&&Oe(t),p&&p.d(c),o&&o.d(c),c&&Oe(n)}}}function b8(i){let e,t,n;const l=[{use:[[lh,{ripple:i[4],unbounded:!0,color:i[5],disabled:!!i[28].disabled,addClass:i[25],removeClass:i[26],addStyle:i[27]}],i[21],...i[1]]},{class:Hn({[i[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!i[22](i[0])&&i[0],"mdc-icon-button--touch":i[8],"mdc-icon-button--display-flex":i[9],"smui-icon-button--size-button":i[10]==="button","mdc-icon-button--reduced-size":i[10]==="mini"||i[10]==="button","mdc-card__action":i[23]==="card:action","mdc-card__action--icon":i[23]==="card:action","mdc-top-app-bar__navigation-icon":i[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":i[23]==="top-app-bar:action","mdc-snackbar__dismiss":i[23]==="snackbar:actions","mdc-data-table__pagination-button":i[23]==="data-table:pagination","mdc-data-table__sort-icon-button":i[23]==="data-table:sortable-header-cell","mdc-dialog__close":i[23]==="dialog:header"&&i[12]==="close",...i[17]})},{style:Object.entries(i[18]).map(m_).concat([i[3]]).join(" ")},{"aria-pressed":i[22](i[0])?null:i[0]?"true":"false"},{"aria-label":i[0]?i[6]:i[7]},{"data-aria-label-on":i[6]},{"data-aria-label-off":i[7]},{"aria-describedby":i[24]},{href:i[11]},i[20],i[19],i[28]];var u=i[13];function p(o){let c={$$slots:{default:[v8]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[33](e),e.$on("click",i[34]),e.$on("click",i[35])),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,c){const g=c[0]&536748031?cr(l,[c[0]&505413682&&{use:[[lh,{ripple:o[4],unbounded:!0,color:o[5],disabled:!!o[28].disabled,addClass:o[25],removeClass:o[26],addStyle:o[27]}],o[21],...o[1]]},c[0]&12719877&&{class:Hn({[o[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!o[22](o[0])&&o[0],"mdc-icon-button--touch":o[8],"mdc-icon-button--display-flex":o[9],"smui-icon-button--size-button":o[10]==="button","mdc-icon-button--reduced-size":o[10]==="mini"||o[10]==="button","mdc-card__action":o[23]==="card:action","mdc-card__action--icon":o[23]==="card:action","mdc-top-app-bar__navigation-icon":o[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[23]==="top-app-bar:action","mdc-snackbar__dismiss":o[23]==="snackbar:actions","mdc-data-table__pagination-button":o[23]==="data-table:pagination","mdc-data-table__sort-icon-button":o[23]==="data-table:sortable-header-cell","mdc-dialog__close":o[23]==="dialog:header"&&o[12]==="close",...o[17]})},c[0]&262152&&{style:Object.entries(o[18]).map(m_).concat([o[3]]).join(" ")},c[0]&4194305&&{"aria-pressed":o[22](o[0])?null:o[0]?"true":"false"},c[0]&193&&{"aria-label":o[0]?o[6]:o[7]},c[0]&64&&{"data-aria-label-on":o[6]},c[0]&128&&{"data-aria-label-off":o[7]},c[0]&16777216&&{"aria-describedby":o[24]},c[0]&2048&&{href:o[11]},c[0]&1048576&&fo(o[20]),c[0]&524288&&fo(o[19]),c[0]&268435456&&fo(o[28])]):{};if(c[0]&256|c[1]&32&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[13])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[33](e),e.$on("click",o[34]),e.$on("click",o[35]),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[33](null),o&&Oe(t),e&&Si(e,o)}}}const m_=([i,e])=>`${i}: ${e};`;function w8(i,e,t){let n;const l=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","touch","displayFlex","size","href","action","component","getElement"];let u=On(e,l),{$$slots:p={},$$scope:o}=e;const c=io(to());let g=()=>{};function _($e){return $e===g}let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{ripple:C=!0}=e,{color:T=void 0}=e,{toggle:k=!1}=e,{pressed:M=g}=e,{ariaLabelOn:O=void 0}=e,{ariaLabelOff:V=void 0}=e,{touch:W=!1}=e,{displayFlex:J=!0}=e,{size:Q="normal"}=e,{href:Z=void 0}=e,{action:ie=void 0}=e,Se,xe,le={},Ee={},me={},Ae=es("SMUI:icon-button:context"),pt=es("SMUI:icon-button:aria-describedby"),{component:rt=Z==null?O4:Cg}=e,Pt=u.disabled;Fo("SMUI:icon:context","icon-button");let We=null;sc(()=>{xe&&xe.destroy()});function be($e){return $e in le?le[$e]:Re().classList.contains($e)}function Le($e){le[$e]||t(17,le[$e]=!0,le)}function Ue($e){(!($e in le)||le[$e])&&t(17,le[$e]=!1,le)}function ce($e,Dt){Ee[$e]!=Dt&&(Dt===""||Dt==null?(delete Ee[$e],t(18,Ee)):t(18,Ee[$e]=Dt,Ee))}function Ie($e){var Dt;return $e in me?(Dt=me[$e])!==null&&Dt!==void 0?Dt:null:Re().getAttribute($e)}function de($e,Dt){me[$e]!==Dt&&t(19,me[$e]=Dt,me)}function ge($e){t(0,M=$e.isOn)}function Re(){return Se.getElement()}function Ze($e){pn[$e?"unshift":"push"](()=>{Se=$e,t(15,Se)})}const ut=()=>xe&&xe.handleClick(),Xe=()=>Ae==="top-app-bar:navigation"&&Qr(Re(),"SMUITopAppBarIconButton:nav");return i.$$set=$e=>{e=Ni(Ni({},e),$r($e)),t(28,u=On(e,l)),"use"in $e&&t(1,v=$e.use),"class"in $e&&t(2,w=$e.class),"style"in $e&&t(3,x=$e.style),"ripple"in $e&&t(4,C=$e.ripple),"color"in $e&&t(5,T=$e.color),"toggle"in $e&&t(29,k=$e.toggle),"pressed"in $e&&t(0,M=$e.pressed),"ariaLabelOn"in $e&&t(6,O=$e.ariaLabelOn),"ariaLabelOff"in $e&&t(7,V=$e.ariaLabelOff),"touch"in $e&&t(8,W=$e.touch),"displayFlex"in $e&&t(9,J=$e.displayFlex),"size"in $e&&t(10,Q=$e.size),"href"in $e&&t(11,Z=$e.href),"action"in $e&&t(12,ie=$e.action),"component"in $e&&t(13,rt=$e.component),"$$scope"in $e&&t(36,o=$e.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4096&&t(20,n=(()=>{if(Ae==="data-table:pagination")switch(ie){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}else return Ae==="dialog:header"?{"data-mdc-dialog-action":ie}:{action:ie}})()),Pt!==u.disabled){const $e=Re();"blur"in $e&&$e.blur(),t(30,Pt=u.disabled)}i.$$.dirty[0]&536969216|i.$$.dirty[1]&1&&Se&&Re()&&k!==We&&(k&&!xe?(t(16,xe=new m8({addClass:Le,hasClass:be,notifyChange:$e=>{ge($e),Qr(Re(),"SMUIIconButtonToggle:change",$e,void 0,!0)},removeClass:Ue,getAttr:Ie,setAttr:de})),xe.init()):!k&&xe&&(xe.destroy(),t(16,xe=void 0),t(17,le={}),t(19,me={})),t(31,We=k)),i.$$.dirty[0]&65537&&xe&&!_(M)&&xe.isOn()!==M&&xe.toggle(M)},[M,v,w,x,C,T,O,V,W,J,Q,Z,ie,rt,Re,Se,xe,le,Ee,me,n,c,_,Ae,pt,Le,Ue,ce,u,k,Pt,We,p,Ze,ut,Xe,o]}class Rh extends fr{constructor(e){super(),dr(this,e,w8,b8,hr,{use:1,class:2,style:3,ripple:4,color:5,toggle:29,pressed:0,ariaLabelOn:6,ariaLabelOff:7,touch:8,displayFlex:9,size:10,href:11,action:12,component:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}function x8(i){let e;const t=i[9].default,n=nr(t,i,i[11],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&2048)&&rr(n,t,l,l[11],e?sr(t,l[11],u,null):or(l[11]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function A8(i){let e,t,n;const l=[{use:[i[4],...i[0]]},{class:Hn({[i[1]]:!0,"mdc-button__label":i[5]==="button","mdc-fab__label":i[5]==="fab","mdc-tab__text-label":i[5]==="tab","mdc-image-list__label":i[5]==="image-list","mdc-snackbar__label":i[5]==="snackbar","mdc-banner__text":i[5]==="banner","mdc-segmented-button__label":i[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":i[5]==="data-table:pagination","mdc-data-table__header-cell-label":i[5]==="data-table:sortable-header-cell"})},i[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:i[6]},i[7]];var u=i[2];function p(o){let c={$$slots:{default:[x8]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[10](e)),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,[c]){const g=c&243?cr(l,[c&17&&{use:[o[4],...o[0]]},c&34&&{class:Hn({[o[1]]:!0,"mdc-button__label":o[5]==="button","mdc-fab__label":o[5]==="fab","mdc-tab__text-label":o[5]==="tab","mdc-image-list__label":o[5]==="image-list","mdc-snackbar__label":o[5]==="snackbar","mdc-banner__text":o[5]==="banner","mdc-segmented-button__label":o[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":o[5]==="data-table:pagination","mdc-data-table__header-cell-label":o[5]==="data-table:sortable-header-cell"})},c&32&&fo(o[5]==="snackbar"?{"aria-atomic":"false"}:{}),c&64&&{tabindex:o[6]},c&128&&fo(o[7])]):{};if(c&2048&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[2])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[10](e),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[10](null),o&&Oe(t),e&&Si(e,o)}}}function S8(i,e,t){const n=["use","class","component","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,_,{component:v=D4}=e;const w=es("SMUI:label:context"),x=es("SMUI:label:tabindex");function C(){return _.getElement()}function T(k){pn[k?"unshift":"push"](()=>{_=k,t(3,_)})}return i.$$set=k=>{e=Ni(Ni({},e),$r(k)),t(7,l=On(e,n)),"use"in k&&t(0,c=k.use),"class"in k&&t(1,g=k.class),"component"in k&&t(2,v=k.component),"$$scope"in k&&t(11,p=k.$$scope)},[c,g,v,_,o,w,x,l,C,u,T,p]}class k8 extends fr{constructor(e){super(),dr(this,e,S8,A8,hr,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function C8(i){let e;const t=i[9].default,n=nr(t,i,i[11],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&2048)&&rr(n,t,l,l[11],e?sr(t,l[11],u,null):or(l[11]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function E8(i){let e,t,n;const l=[{use:[i[5],...i[0]]},{class:Hn({[i[1]]:!0,"mdc-button__icon":i[6]==="button","mdc-fab__icon":i[6]==="fab","mdc-icon-button__icon":i[6]==="icon-button","mdc-icon-button__icon--on":i[6]==="icon-button"&&i[2],"mdc-tab__icon":i[6]==="tab","mdc-banner__icon":i[6]==="banner","mdc-segmented-button__icon":i[6]==="segmented-button"})},{"aria-hidden":"true"},i[3]===f_?{focusable:"false",tabindex:"-1"}:{},i[7]];var u=i[3];function p(o){let c={$$slots:{default:[C8]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[10](e)),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,[c]){const g=c&239?cr(l,[c&33&&{use:[o[5],...o[0]]},c&70&&{class:Hn({[o[1]]:!0,"mdc-button__icon":o[6]==="button","mdc-fab__icon":o[6]==="fab","mdc-icon-button__icon":o[6]==="icon-button","mdc-icon-button__icon--on":o[6]==="icon-button"&&o[2],"mdc-tab__icon":o[6]==="tab","mdc-banner__icon":o[6]==="banner","mdc-segmented-button__icon":o[6]==="segmented-button"})},l[2],c&8&&fo(o[3]===f_?{focusable:"false",tabindex:"-1"}:{}),c&128&&fo(o[7])]):{};if(c&2048&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[3])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[10](e),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[10](null),o&&Oe(t),e&&Si(e,o)}}}function I8(i,e,t){const n=["use","class","on","component","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{on:_=!1}=e,v,{component:w=O6}=e;const x=es("SMUI:icon:context");function C(){return v.getElement()}function T(k){pn[k?"unshift":"push"](()=>{v=k,t(4,v)})}return i.$$set=k=>{e=Ni(Ni({},e),$r(k)),t(7,l=On(e,n)),"use"in k&&t(0,c=k.use),"class"in k&&t(1,g=k.class),"on"in k&&t(2,_=k.on),"component"in k&&t(3,w=k.component),"$$scope"in k&&t(11,p=k.$$scope)},[c,g,_,w,v,o,x,l,C,u,T,p]}class T8 extends fr{constructor(e){super(),dr(this,e,I8,E8,hr,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}function L8(i){let e;const t=i[4].default,n=nr(t,i,i[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,[u]){n&&n.p&&(!e||u&8)&&rr(n,t,l,l[3],e?sr(t,l[3],u,null):or(l[3]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function P8(i,e,t){let n,{$$slots:l={},$$scope:u}=e,{key:p}=e,{value:o}=e;const c=Sl(o);return Vo(i,c,g=>t(5,n=g)),Fo(p,c),sc(()=>{c.set(void 0)}),i.$$set=g=>{"key"in g&&t(1,p=g.key),"value"in g&&t(2,o=g.value),"$$scope"in g&&t(3,u=g.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&Ea(c,n=o,n)},[c,p,o,u,l]}class b1 extends fr{constructor(e){super(),dr(this,e,P8,L8,hr,{key:1,value:2})}}const cu=k8,oa=T8,kr={title:"Water & Sewerage Map in Narok",url:"https://narwassco.co.ke",logo:"https://raw.githubusercontent.com/narwassco/logo/main/logo.png",basePath:"",attribution:"\xA9NARWASSCO",styles:[{title:"UNVT Water (OSM)",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style.json"},{title:"UNVT Water (Building)",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style-buildings.json"},{title:"Satellite Water",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style-aerial.json"},{title:"UNVT Sewer",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style-sewer.json"},{title:"Satellite Sewer",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style-aerial-sewer.json"}],center:{lng:35.87063,lat:-1.08551},zoom:13,search:{url:"https://narwassco.github.io/vt/meter.geojson",target:["connno","serialno","village"],format:i=>{const e=[];return["connno","serialno","village"].forEach(n=>{i[n]&&e.push(i[n])}),e.length>0?e.join(", "):""},place_type:["meter"],placeholder:"Search CONN NO or S/N",zoom:17},popup:{target:["meter","flow meter","valve","washout","firehydrant","tank","pipeline","pg-building","sewer-connection","sewer_commercial","sewer_institution","sewer_public_toilet","sewer_pipeline","sewer_treatment_plant","manhole","sewer_zone"]},areaSwitcher:{areas:[{title:"Narok",latlng:[35.87063,-1.08551],zoom:14},{title:"Ololulung'a",latlng:[35.65072,-1.0085],zoom:13},{title:"Kilgoris",latlng:[34.87533,-1.00278],zoom:14},{title:"Suswa",latlng:[36.33078,-1.05307],zoom:13}]},legend:{targets:{pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",meter:"Water Meter","flow meter":"Flow Meter",valve:"Valve",firehydrant:"Fire Hydrant",washout:"Washout",tank:"Tank",tank_annotation:"Tank Label",wtp:"WTP",wtp_annotation:"WTP Label",intake:"Intake",intake_annotation:"Intake Label",parcels:"Parcels",parcels_annotation:"Parcels Label",village:"Village",village_annotation:"Village Label",dma:"DMA","dma-annotation":"DMA Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade",sewer_connection:"Households (Sewer)",sewer_commercial:"Commecial (Sewer)",sewer_institution:"Institution (Sewer)",sewer_public_toilet:"Public Toilet (Sewer)",manhole:"Manhole",sewer_pipeline:"Sewer pipeline",sewer_treatment_plant:"Wastewater treatment plant",sewer_zone:"Sewer zone",sewer_zone_annotation:"Sewer zone label"}},elevation:{url:"https://narwassco.github.io/narok-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],routing:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}}}};function g_(i){let e;return{c(){e=Li("div"),this.h()},l(t){e=Pi(t,"DIV",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","mdc-button__touch")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function M8(i){let e,t,n,l;const u=i[27].default,p=nr(u,i,i[29],null);let o=i[6]&&g_();return{c(){e=Li("div"),t=$i(),p&&p.c(),o&&o.c(),n=hn(),this.h()},l(c){e=Pi(c,"DIV",{class:!0}),Ti(e).forEach(Oe),t=en(c),p&&p.l(c),o&&o.l(c),n=hn(),this.h()},h(){hi(e,"class","mdc-button__ripple")},m(c,g){wt(c,e,g),wt(c,t,g),p&&p.m(c,g),o&&o.m(c,g),wt(c,n,g),l=!0},p(c,g){p&&p.p&&(!l||g&536870912)&&rr(p,u,c,c[29],l?sr(u,c[29],g,null):or(c[29]),null),c[6]?o||(o=g_(),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(c){l||(tt(p,c),l=!0)},o(c){ct(p,c),l=!1},d(c){c&&Oe(e),c&&Oe(t),p&&p.d(c),o&&o.d(c),c&&Oe(n)}}}function D8(i){let e,t,n;const l=[{use:[[lh,{ripple:i[3],unbounded:!1,color:i[4],disabled:!!i[22].disabled,addClass:i[18],removeClass:i[19],addStyle:i[20]}],i[16],...i[0]]},{class:Hn({[i[1]]:!0,"mdc-button":!0,"mdc-button--raised":i[5]==="raised","mdc-button--unelevated":i[5]==="unelevated","mdc-button--outlined":i[5]==="outlined","smui-button--color-secondary":i[4]==="secondary","mdc-button--touch":i[6],"mdc-card__action":i[17]==="card:action","mdc-card__action--button":i[17]==="card:action","mdc-dialog__button":i[17]==="dialog:action","mdc-top-app-bar__navigation-icon":i[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":i[17]==="top-app-bar:action","mdc-snackbar__action":i[17]==="snackbar:actions","mdc-banner__secondary-action":i[17]==="banner"&&i[8],"mdc-banner__primary-action":i[17]==="banner"&&!i[8],"mdc-tooltip__action":i[17]==="tooltip:rich-actions",...i[11]})},{style:Object.entries(i[12]).map(y_).concat([i[2]]).join(" ")},i[15],i[14],i[13],{href:i[7]},i[22]];var u=i[9];function p(o){let c={$$slots:{default:[M8]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[28](e),e.$on("click",i[21])),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,[c]){const g=c&6289919?cr(l,[c&6094873&&{use:[[lh,{ripple:o[3],unbounded:!1,color:o[4],disabled:!!o[22].disabled,addClass:o[18],removeClass:o[19],addStyle:o[20]}],o[16],...o[0]]},c&133490&&{class:Hn({[o[1]]:!0,"mdc-button":!0,"mdc-button--raised":o[5]==="raised","mdc-button--unelevated":o[5]==="unelevated","mdc-button--outlined":o[5]==="outlined","smui-button--color-secondary":o[4]==="secondary","mdc-button--touch":o[6],"mdc-card__action":o[17]==="card:action","mdc-card__action--button":o[17]==="card:action","mdc-dialog__button":o[17]==="dialog:action","mdc-top-app-bar__navigation-icon":o[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[17]==="top-app-bar:action","mdc-snackbar__action":o[17]==="snackbar:actions","mdc-banner__secondary-action":o[17]==="banner"&&o[8],"mdc-banner__primary-action":o[17]==="banner"&&!o[8],"mdc-tooltip__action":o[17]==="tooltip:rich-actions",...o[11]})},c&4100&&{style:Object.entries(o[12]).map(y_).concat([o[2]]).join(" ")},c&32768&&fo(o[15]),c&16384&&fo(o[14]),c&8192&&fo(o[13]),c&128&&{href:o[7]},c&4194304&&fo(o[22])]):{};if(c&536870976&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[9])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[28](e),e.$on("click",o[21]),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[28](null),o&&Oe(t),e&&Si(e,o)}}}const y_=([i,e])=>`${i}: ${e};`;function O8(i,e,t){let n,l,u;const p=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let o=On(e,p),{$$slots:c={},$$scope:g}=e;const _=io(to());let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{ripple:C=!0}=e,{color:T="primary"}=e,{variant:k="text"}=e,{touch:M=!1}=e,{href:O=void 0}=e,{action:V="close"}=e,{defaultAction:W=!1}=e,{secondary:J=!1}=e,Q,Z={},ie={},Se=es("SMUI:button:context"),{component:xe=O==null?O4:Cg}=e,le=o.disabled;Fo("SMUI:label:context","button"),Fo("SMUI:icon:context","button");function Ee(We){Z[We]||t(11,Z[We]=!0,Z)}function me(We){(!(We in Z)||Z[We])&&t(11,Z[We]=!1,Z)}function Ae(We,be){ie[We]!=be&&(be===""||be==null?(delete ie[We],t(12,ie)):t(12,ie[We]=be,ie))}function pt(){Se==="banner"&&Qr(rt(),J?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function rt(){return Q.getElement()}function Pt(We){pn[We?"unshift":"push"](()=>{Q=We,t(10,Q)})}return i.$$set=We=>{t(30,e=Ni(Ni({},e),$r(We))),t(22,o=On(e,p)),"use"in We&&t(0,v=We.use),"class"in We&&t(1,w=We.class),"style"in We&&t(2,x=We.style),"ripple"in We&&t(3,C=We.ripple),"color"in We&&t(4,T=We.color),"variant"in We&&t(5,k=We.variant),"touch"in We&&t(6,M=We.touch),"href"in We&&t(7,O=We.href),"action"in We&&t(23,V=We.action),"defaultAction"in We&&t(24,W=We.defaultAction),"secondary"in We&&t(8,J=We.secondary),"component"in We&&t(9,xe=We.component),"$$scope"in We&&t(29,g=We.$$scope)},i.$$.update=()=>{t(15,n=Se==="dialog:action"&&V!=null?{"data-mdc-dialog-action":V}:{action:e.action}),t(14,l=Se==="dialog:action"&&W?{"data-mdc-dialog-button-default":""}:{default:e.default}),t(13,u=Se==="banner"?{}:{secondary:e.secondary}),le!==o.disabled&&(rt().blur(),t(26,le=o.disabled))},e=$r(e),[v,w,x,C,T,k,M,O,J,xe,Q,Z,ie,u,l,n,_,Se,Ee,me,Ae,pt,o,V,W,rt,le,c,Pt,g]}class Ru extends fr{constructor(e){super(),dr(this,e,O8,D8,hr,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var F8={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var R8=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.shakeAnimationEndHandler=function(){n.handleShakeAnimationEnd()},n}return Object.defineProperty(e,"cssClasses",{get:function(){return F8},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(t){var n=e.cssClasses.LABEL_SHAKE;t?this.adapter.addClass(n):this.adapter.removeClass(n)},e.prototype.float=function(t){var n=e.cssClasses,l=n.LABEL_FLOAT_ABOVE,u=n.LABEL_SHAKE;t?this.adapter.addClass(l):(this.adapter.removeClass(l),this.adapter.removeClass(u))},e.prototype.setRequired=function(t){var n=e.cssClasses.LABEL_REQUIRED;t?this.adapter.addClass(n):this.adapter.removeClass(n)},e.prototype.handleShakeAnimationEnd=function(){var t=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(t)},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bf={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var B8=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.transitionEndHandler=function(l){n.handleTransitionEnd(l)},n}return Object.defineProperty(e,"cssClasses",{get:function(){return Bf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(Bf.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Bf.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(t){this.adapter.setStyle("transform-origin",t+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(Bf.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(t){var n=this.adapter.hasClass(Bf.LINE_RIPPLE_DEACTIVATING);t.propertyName==="opacity"&&n&&(this.adapter.removeClass(Bf.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Bf.LINE_RIPPLE_DEACTIVATING))},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var z8={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},N8={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},kd={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},ea;(function(i){i[i.BOTTOM=1]="BOTTOM",i[i.CENTER=2]="CENTER",i[i.RIGHT=4]="RIGHT",i[i.FLIP_RTL=8]="FLIP_RTL"})(ea||(ea={}));var Zf;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=4]="TOP_RIGHT",i[i.BOTTOM_LEFT=1]="BOTTOM_LEFT",i[i.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",i[i.TOP_START=8]="TOP_START",i[i.TOP_END=12]="TOP_END",i[i.BOTTOM_START=9]="BOTTOM_START",i[i.BOTTOM_END=13]="BOTTOM_END"})(Zf||(Zf={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ef,Eh,lo={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};ef={},ef[""+lo.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",ef[""+lo.LIST_ITEM_CLASS]="mdc-list-item",ef[""+lo.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",ef[""+lo.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",ef[""+lo.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",ef[""+lo.ROOT]="mdc-list";var x0=(Eh={},Eh[""+lo.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Eh[""+lo.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Eh[""+lo.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Eh[""+lo.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Eh[""+lo.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Eh[""+lo.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Eh[""+lo.ROOT]="mdc-deprecated-list",Eh),tf={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+lo.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` a,
    .`+x0[lo.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+x0[lo.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+lo.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` a,
    .`+lo.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+x0[lo.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+x0[lo.LIST_ITEM_CLASS]+` a,
    .`+x0[lo.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+x0[lo.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},ka={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var j8=["input","button","textarea","select"],Hf=function(i){var e=i.target;if(!!e){var t=(""+e.tagName).toLowerCase();j8.indexOf(t)===-1&&i.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function U8(){var i={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return i}function V8(i,e){for(var t=new Map,n=0;n<i;n++){var l=e(n).trim();if(!!l){var u=l[0].toLowerCase();t.has(u)||t.set(u,[]),t.get(u).push({text:l.toLowerCase(),index:n})}}return t.forEach(function(p){p.sort(function(o,c){return o.index-c.index})}),t}function q2(i,e){var t=i.nextChar,n=i.focusItemAtIndex,l=i.sortedIndexByFirstChar,u=i.focusedItemIndex,p=i.skipFocus,o=i.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){R4(e)},ka.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+t;var c;return e.typeaheadBuffer.length===1?c=q8(l,u,o,e):c=H8(l,o,e),c!==-1&&!p&&n(c),c}function q8(i,e,t,n){var l=n.typeaheadBuffer[0],u=i.get(l);if(!u)return-1;if(l===n.currentFirstChar&&u[n.sortedIndexCursor].index===e){n.sortedIndexCursor=(n.sortedIndexCursor+1)%u.length;var p=u[n.sortedIndexCursor].index;if(!t(p))return p}n.currentFirstChar=l;var o=-1,c;for(c=0;c<u.length;c++)if(!t(u[c].index)){o=c;break}for(;c<u.length;c++)if(u[c].index>e&&!t(u[c].index)){o=c;break}return o!==-1?(n.sortedIndexCursor=o,u[n.sortedIndexCursor].index):-1}function H8(i,e,t){var n=t.typeaheadBuffer[0],l=i.get(n);if(!l)return-1;var u=l[t.sortedIndexCursor];if(u.text.lastIndexOf(t.typeaheadBuffer,0)===0&&!e(u.index))return u.index;for(var p=(t.sortedIndexCursor+1)%l.length,o=-1;p!==t.sortedIndexCursor;){var c=l[p],g=c.text.lastIndexOf(t.typeaheadBuffer,0)===0,_=!e(c.index);if(g&&_){o=p;break}p=(p+1)%l.length}return o!==-1?(t.sortedIndexCursor=o,l[t.sortedIndexCursor].index):-1}function F4(i){return i.typeaheadBuffer.length>0}function R4(i){i.typeaheadBuffer=""}function __(i,e){var t=i.event,n=i.isTargetListItem,l=i.focusedItemIndex,u=i.focusItemAtIndex,p=i.sortedIndexByFirstChar,o=i.isItemAtIndexDisabled,c=fa(t)==="ArrowLeft",g=fa(t)==="ArrowUp",_=fa(t)==="ArrowRight",v=fa(t)==="ArrowDown",w=fa(t)==="Home",x=fa(t)==="End",C=fa(t)==="Enter",T=fa(t)==="Spacebar";if(t.ctrlKey||t.metaKey||c||g||_||v||w||x||C)return-1;var k=!T&&t.key.length===1;if(k){Hf(t);var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:t.key.toLowerCase(),sortedIndexByFirstChar:p,skipFocus:!1,isItemAtIndexDisabled:o};return q2(M,e)}if(!T)return-1;n&&Hf(t);var O=n&&F4(e);if(O){var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:" ",sortedIndexByFirstChar:p,skipFocus:!1,isItemAtIndexDisabled:o};return q2(M,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function G8(i){return i instanceof Array}var W8=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.wrapFocus=!1,n.isVertical=!0,n.isSingleSelectionList=!1,n.selectedIndex=ka.UNSET_INDEX,n.focusedItemIndex=ka.UNSET_INDEX,n.useActivatedClass=!1,n.useSelectedAttr=!1,n.ariaCurrentAttrValue=null,n.isCheckboxList=!1,n.isRadioList=!1,n.hasTypeahead=!1,n.typeaheadState=U8(),n.sortedIndexByFirstChar=new Map,n}return Object.defineProperty(e,"strings",{get:function(){return tf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return lo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ka},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(t){this.wrapFocus=t},e.prototype.setVerticalOrientation=function(t){this.isVertical=t},e.prototype.setSingleSelection=function(t){this.isSingleSelectionList=t,t&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var t=this.getSelectedIndexFromDOM();if(t!==ka.UNSET_INDEX){var n=this.adapter.listItemAtIndexHasClass(t,lo.LIST_ITEM_ACTIVATED_CLASS);n&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=t}},e.prototype.getSelectedIndexFromDOM=function(){for(var t=ka.UNSET_INDEX,n=this.adapter.getListItemCount(),l=0;l<n;l++){var u=this.adapter.listItemAtIndexHasClass(l,lo.LIST_ITEM_SELECTED_CLASS),p=this.adapter.listItemAtIndexHasClass(l,lo.LIST_ITEM_ACTIVATED_CLASS);if(!!(u||p)){t=l;break}}return t},e.prototype.setHasTypeahead=function(t){this.hasTypeahead=t,t&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&F4(this.typeaheadState)},e.prototype.setUseActivatedClass=function(t){this.useActivatedClass=t},e.prototype.setUseSelectedAttribute=function(t){this.useSelectedAttr=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t,n){var l=n===void 0?{}:n,u=l.forceUpdate;!this.isIndexValid(t)||(this.isCheckboxList?this.setCheckboxAtIndex(t):this.isRadioList?this.setRadioAtIndex(t):this.setSingleSelectionAtIndex(t,{forceUpdate:u}))},e.prototype.handleFocusIn=function(t){t>=0&&(this.focusedItemIndex=t,this.adapter.setAttributeForElementIndex(t,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(t,"0"))},e.prototype.handleFocusOut=function(t){var n=this;t>=0&&(this.adapter.setAttributeForElementIndex(t,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(t,"-1")),setTimeout(function(){n.adapter.isFocusInsideList()||n.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(t,n,l){var u=this,p=fa(t)==="ArrowLeft",o=fa(t)==="ArrowUp",c=fa(t)==="ArrowRight",g=fa(t)==="ArrowDown",_=fa(t)==="Home",v=fa(t)==="End",w=fa(t)==="Enter",x=fa(t)==="Spacebar",C=t.key==="A"||t.key==="a";if(this.adapter.isRootFocused()){if(o||v?(t.preventDefault(),this.focusLastElement()):(g||_)&&(t.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var T={event:t,focusItemAtIndex:function(O){u.focusItemAtIndex(O)},focusedItemIndex:-1,isTargetListItem:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(O){return u.adapter.listItemAtIndexHasClass(O,lo.LIST_ITEM_DISABLED_CLASS)}};__(T,this.typeaheadState)}return}var k=this.adapter.getFocusedElementIndex();if(!(k===-1&&(k=l,k<0))){if(this.isVertical&&g||!this.isVertical&&c)Hf(t),this.focusNextElement(k);else if(this.isVertical&&o||!this.isVertical&&p)Hf(t),this.focusPrevElement(k);else if(_)Hf(t),this.focusFirstElement();else if(v)Hf(t),this.focusLastElement();else if(C&&t.ctrlKey&&this.isCheckboxList)t.preventDefault(),this.toggleAll(this.selectedIndex===ka.UNSET_INDEX?[]:this.selectedIndex);else if((w||x)&&n){var M=t.target;if(M&&M.tagName==="A"&&w||(Hf(t),this.adapter.listItemAtIndexHasClass(k,lo.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(k),this.adapter.notifyAction(k))}if(this.hasTypeahead){var T={event:t,focusItemAtIndex:function(V){u.focusItemAtIndex(V)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(V){return u.adapter.listItemAtIndexHasClass(V,lo.LIST_ITEM_DISABLED_CLASS)}};__(T,this.typeaheadState)}}},e.prototype.handleClick=function(t,n){t!==ka.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(t,lo.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(t,n),this.adapter.notifyAction(t)))},e.prototype.focusNextElement=function(t){var n=this.adapter.getListItemCount(),l=t+1;if(l>=n)if(this.wrapFocus)l=0;else return t;return this.focusItemAtIndex(l),l},e.prototype.focusPrevElement=function(t){var n=t-1;if(n<0)if(this.wrapFocus)n=this.adapter.getListItemCount()-1;else return t;return this.focusItemAtIndex(n),n},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var t=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(t),t},e.prototype.focusInitialElement=function(){var t=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(t),t},e.prototype.setEnabled=function(t,n){!this.isIndexValid(t)||(n?(this.adapter.removeClassForElementIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,tf.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,tf.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(t,n){var l=n===void 0?{}:n,u=l.forceUpdate;if(!(this.selectedIndex===t&&!u)){var p=lo.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(p=lo.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==ka.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,p),this.setAriaForSingleSelectionAtIndex(t),this.setTabindexAtIndex(t),t!==ka.UNSET_INDEX&&this.adapter.addClassForElementIndex(t,p),this.selectedIndex=t}},e.prototype.setAriaForSingleSelectionAtIndex=function(t){this.selectedIndex===ka.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(t,tf.ARIA_CURRENT));var n=this.ariaCurrentAttrValue!==null,l=n?tf.ARIA_CURRENT:tf.ARIA_SELECTED;if(this.selectedIndex!==ka.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,l,"false"),t!==ka.UNSET_INDEX){var u=n?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(t,l,u)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?tf.ARIA_SELECTED:tf.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(t){var n=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(t,!0),this.selectedIndex!==ka.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,n,"false"),this.adapter.setAttributeForElementIndex(t,n,"true"),this.selectedIndex=t},e.prototype.setCheckboxAtIndex=function(t){for(var n=this.getSelectionAttribute(),l=0;l<this.adapter.getListItemCount();l++){var u=!1;t.indexOf(l)>=0&&(u=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(l,u),this.adapter.setAttributeForElementIndex(l,n,u?"true":"false")}this.selectedIndex=t},e.prototype.setTabindexAtIndex=function(t){this.focusedItemIndex===ka.UNSET_INDEX&&t!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==t&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==t&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),t!==ka.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(t,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var t=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(t)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==ka.UNSET_INDEX?this.selectedIndex:G8(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(t,n){return Math.min(t,n)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(t){var n=this;if(t instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return t.length===0?!0:t.some(function(l){return n.isIndexInRange(l)})}else if(typeof t=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return this.isIndexInRange(t)||this.isSingleSelectionList&&t===ka.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(t){var n=this.adapter.getListItemCount();return t>=0&&t<n},e.prototype.setSelectedIndexOnAction=function(t,n){n===void 0&&(n=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(t,n):this.setSelectedIndex(t)},e.prototype.toggleCheckboxAtIndex=function(t,n){var l=this.getSelectionAttribute(),u=this.adapter.isCheckboxCheckedAtIndex(t);n&&(u=!u,this.adapter.setCheckedCheckboxOrRadioAtIndex(t,u)),this.adapter.setAttributeForElementIndex(t,l,u?"true":"false");var p=this.selectedIndex===ka.UNSET_INDEX?[]:this.selectedIndex.slice();u?p.push(t):p=p.filter(function(o){return o!==t}),this.selectedIndex=p},e.prototype.focusItemAtIndex=function(t){this.adapter.focusItemAtIndex(t),this.focusedItemIndex=t},e.prototype.toggleAll=function(t){var n=this.adapter.getListItemCount();if(t.length===n)this.setCheckboxAtIndex([]);else{for(var l=[],u=0;u<n;u++)(!this.adapter.listItemAtIndexHasClass(u,lo.LIST_ITEM_DISABLED_CLASS)||t.indexOf(u)>-1)&&l.push(u);this.setCheckboxAtIndex(l)}},e.prototype.typeaheadMatchItem=function(t,n,l){var u=this;l===void 0&&(l=!1);var p={focusItemAtIndex:function(o){u.focusItemAtIndex(o)},focusedItemIndex:n||this.focusedItemIndex,nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:l,isItemAtIndexDisabled:function(o){return u.adapter.listItemAtIndexHasClass(o,lo.LIST_ITEM_DISABLED_CLASS)}};return q2(p,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return V8(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){R4(this.typeaheadState)},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var B4=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.isSurfaceOpen=!1,n.isQuickOpen=!1,n.isHoistedElement=!1,n.isFixedPosition=!1,n.isHorizontallyCenteredOnViewport=!1,n.maxHeight=0,n.openAnimationEndTimerId=0,n.closeAnimationEndTimerId=0,n.animationRequestId=0,n.anchorCorner=Zf.TOP_START,n.originCorner=Zf.TOP_START,n.anchorMargin={top:0,right:0,bottom:0,left:0},n.position={x:0,y:0},n}return Object.defineProperty(e,"cssClasses",{get:function(){return z8},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return N8},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return kd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Zf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=e.cssClasses,n=t.ROOT,l=t.OPEN;if(!this.adapter.hasClass(n))throw new Error(n+" class required in root element.");this.adapter.hasClass(l)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(t){this.anchorCorner=t},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^ea.RIGHT},e.prototype.setAnchorMargin=function(t){this.anchorMargin.top=t.top||0,this.anchorMargin.right=t.right||0,this.anchorMargin.bottom=t.bottom||0,this.anchorMargin.left=t.left||0},e.prototype.setIsHoisted=function(t){this.isHoistedElement=t},e.prototype.setFixedPosition=function(t){this.isFixedPosition=t},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(t,n){this.position.x=this.isFinite(t)?t:0,this.position.y=this.isFinite(n)?n:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(t){this.isHorizontallyCenteredOnViewport=t},e.prototype.setQuickOpen=function(t){this.isQuickOpen=t},e.prototype.setMaxHeight=function(t){this.maxHeight=t},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var t=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){t.dimensions=t.adapter.getInnerDimensions(),t.autoposition(),t.adapter.addClass(e.cssClasses.OPEN),t.openAnimationEndTimerId=setTimeout(function(){t.openAnimationEndTimerId=0,t.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),t.adapter.notifyOpen()},kd.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(t){var n=this;if(t===void 0&&(t=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,t||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){n.adapter.removeClass(e.cssClasses.OPEN),n.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),n.closeAnimationEndTimerId=setTimeout(function(){n.closeAnimationEndTimerId=0,n.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),n.adapter.notifyClose()},kd.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,t||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(t){var n=t.target;this.adapter.isElementInContainer(n)||this.close()},e.prototype.handleKeydown=function(t){var n=t.keyCode,l=t.key,u=l==="Escape"||n===27;u&&this.close()},e.prototype.autoposition=function(){var t;this.measurements=this.getAutoLayoutmeasurements();var n=this.getoriginCorner(),l=this.getMenuSurfaceMaxHeight(n),u=this.hasBit(n,ea.BOTTOM)?"bottom":"top",p=this.hasBit(n,ea.RIGHT)?"right":"left",o=this.getHorizontalOriginOffset(n),c=this.getVerticalOriginOffset(n),g=this.measurements,_=g.anchorSize,v=g.surfaceSize,w=(t={},t[p]=o,t[u]=c,t);_.width/v.width>kd.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(p="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(w),this.adapter.setTransformOrigin(p+" "+u),this.adapter.setPosition(w),this.adapter.setMaxHeight(l?l+"px":""),this.hasBit(n,ea.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var t=this.adapter.getAnchorDimensions(),n=this.adapter.getBodyDimensions(),l=this.adapter.getWindowDimensions(),u=this.adapter.getWindowScroll();return t||(t={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:t,bodySize:n,surfaceSize:this.dimensions,viewportDistance:{top:t.top,right:l.width-t.right,bottom:l.height-t.bottom,left:t.left},viewportSize:l,windowScroll:u}},e.prototype.getoriginCorner=function(){var t=this.originCorner,n=this.measurements,l=n.viewportDistance,u=n.anchorSize,p=n.surfaceSize,o=e.numbers.MARGIN_TO_EDGE,c=this.hasBit(this.anchorCorner,ea.BOTTOM),g,_;c?(g=l.top-o+this.anchorMargin.bottom,_=l.bottom-o-this.anchorMargin.bottom):(g=l.top-o+this.anchorMargin.top,_=l.bottom-o+u.height-this.anchorMargin.top);var v=_-p.height>0;!v&&g>_&&(t=this.setBit(t,ea.BOTTOM));var w=this.adapter.isRtl(),x=this.hasBit(this.anchorCorner,ea.FLIP_RTL),C=this.hasBit(this.anchorCorner,ea.RIGHT)||this.hasBit(t,ea.RIGHT),T=!1;w&&x?T=!C:T=C;var k,M;T?(k=l.left+u.width+this.anchorMargin.right,M=l.right-this.anchorMargin.right):(k=l.left+this.anchorMargin.left,M=l.right+u.width-this.anchorMargin.left);var O=k-p.width>0,V=M-p.width>0,W=this.hasBit(t,ea.FLIP_RTL)&&this.hasBit(t,ea.RIGHT);return V&&W&&w||!O&&W?t=this.unsetBit(t,ea.RIGHT):(O&&T&&w||O&&!T&&C||!V&&k>=M)&&(t=this.setBit(t,ea.RIGHT)),t},e.prototype.getMenuSurfaceMaxHeight=function(t){if(this.maxHeight>0)return this.maxHeight;var n=this.measurements.viewportDistance,l=0,u=this.hasBit(t,ea.BOTTOM),p=this.hasBit(this.anchorCorner,ea.BOTTOM),o=e.numbers.MARGIN_TO_EDGE;return u?(l=n.top+this.anchorMargin.top-o,p||(l+=this.measurements.anchorSize.height)):(l=n.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-o,p&&(l-=this.measurements.anchorSize.height)),l},e.prototype.getHorizontalOriginOffset=function(t){var n=this.measurements.anchorSize,l=this.hasBit(t,ea.RIGHT),u=this.hasBit(this.anchorCorner,ea.RIGHT);if(l){var p=u?n.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?p-(this.measurements.viewportSize.width-this.measurements.bodySize.width):p}return u?n.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(t){var n=this.measurements.anchorSize,l=this.hasBit(t,ea.BOTTOM),u=this.hasBit(this.anchorCorner,ea.BOTTOM),p=0;return l?p=u?n.height-this.anchorMargin.top:-this.anchorMargin.bottom:p=u?n.height+this.anchorMargin.bottom:this.anchorMargin.top,p},e.prototype.adjustPositionForHoistedElement=function(t){var n,l,u=this.measurements,p=u.windowScroll,o=u.viewportDistance,c=u.surfaceSize,g=u.viewportSize,_=Object.keys(t);try{for(var v=Ec(_),w=v.next();!w.done;w=v.next()){var x=w.value,C=t[x]||0;if(this.isHorizontallyCenteredOnViewport&&(x==="left"||x==="right")){t[x]=(g.width-c.width)/2;continue}C+=o[x],this.isFixedPosition||(x==="top"?C+=p.y:x==="bottom"?C-=p.y:x==="left"?C+=p.x:C-=p.x),t[x]=C}}catch(T){n={error:T}}finally{try{w&&!w.done&&(l=v.return)&&l.call(v)}finally{if(n)throw n.error}}},e.prototype.maybeRestoreFocus=function(){var t=this,n=this.adapter.isFocused(),l=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(n||l)&&setTimeout(function(){t.adapter.restoreFocus()},kd.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(t,n){return Boolean(t&n)},e.prototype.setBit=function(t,n){return t|n},e.prototype.unsetBit=function(t,n){return t^n},e.prototype.isFinite=function(t){return typeof t=="number"&&isFinite(t)},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var q0={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},A0={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},X8={FOCUS_ROOT_INDEX:-1},B0;(function(i){i[i.NONE=0]="NONE",i[i.LIST_ROOT=1]="LIST_ROOT",i[i.FIRST_ITEM=2]="FIRST_ITEM",i[i.LAST_ITEM=3]="LAST_ITEM"})(B0||(B0={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Y8=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.closeAnimationEndTimerId=0,n.defaultFocusState=B0.LIST_ROOT,n.selectedIndex=-1,n}return Object.defineProperty(e,"cssClasses",{get:function(){return q0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return A0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return X8},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(t){var n=t.key,l=t.keyCode,u=n==="Tab"||l===9;u&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(t){var n=this,l=this.adapter.getElementIndex(t);if(!(l<0)){this.adapter.notifySelected({index:l});var u=this.adapter.getAttributeFromElementAtIndex(l,A0.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(u),this.closeAnimationEndTimerId=setTimeout(function(){var p=n.adapter.getElementIndex(t);p>=0&&n.adapter.isSelectableItemAtIndex(p)&&n.setSelectedIndex(p)},B4.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case B0.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case B0.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case B0.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(t){this.defaultFocusState=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t){if(this.validatedIndex(t),!this.adapter.isSelectableItemAtIndex(t))throw new Error("MDCMenuFoundation: No selection group at specified index.");var n=this.adapter.getSelectedSiblingOfItemAtIndex(t);n>=0&&(this.adapter.removeAttributeFromElementAtIndex(n,A0.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(n,q0.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(t,q0.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(t,A0.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=t},e.prototype.setEnabled=function(t,n){this.validatedIndex(t),n?(this.adapter.removeClassFromElementAtIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,A0.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,A0.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(t){var n=this.adapter.getMenuItemCount(),l=t>=0&&t<n;if(!l)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Z8={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},v_={NOTCH_ELEMENT_PADDING:8},K8={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var J8=function(i){Ha(e,i);function e(t){return i.call(this,qo(qo({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return Z8},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return K8},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return v_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(t){var n=e.cssClasses.OUTLINE_NOTCHED;t>0&&(t+=v_.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(t),this.adapter.addClass(n)},e.prototype.closeNotch=function(){var t=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(t),this.adapter.removeNotchWidthProperty()},e}(ql);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vs={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},Bm={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},zf={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Q8=function(i){Ha(e,i);function e(t,n){n===void 0&&(n={});var l=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return l.disabled=!1,l.isMenuOpen=!1,l.useDefaultValidation=!0,l.customValidity=!0,l.lastSelectedIndex=zf.UNSET_INDEX,l.clickDebounceTimeout=0,l.recentlyClicked=!1,l.leadingIcon=n.leadingIcon,l.helperText=n.helperText,l}return Object.defineProperty(e,"cssClasses",{get:function(){return Vs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return zf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Bm},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(t,n,l){n===void 0&&(n=!1),l===void 0&&(l=!1),!(t>=this.adapter.getMenuItemCount())&&(t===zf.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(t).trim()),this.adapter.setSelectedIndex(t),n&&this.adapter.closeMenu(),!l&&this.lastSelectedIndex!==t&&this.handleChange(),this.lastSelectedIndex=t)},e.prototype.setValue=function(t,n){n===void 0&&(n=!1);var l=this.adapter.getMenuItemValues().indexOf(t);this.setSelectedIndex(l,!1,n)},e.prototype.getValue=function(){var t=this.adapter.getSelectedIndex(),n=this.adapter.getMenuItemValues();return t!==zf.UNSET_INDEX?n[t]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(t){this.disabled=t,this.disabled?(this.adapter.addClass(Vs.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(Vs.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass(Vs.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var t=this.getValue().length>0,n=this.adapter.hasClass(Vs.FOCUSED),l=t||n,u=this.adapter.hasClass(Vs.REQUIRED);this.notchOutline(l),this.adapter.floatLabel(l),this.adapter.setLabelRequired(u)}},e.prototype.layoutOptions=function(){var t=this.adapter.getMenuItemValues(),n=t.indexOf(this.getValue());this.setSelectedIndex(n,!1,!0)},e.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var t=this.getSelectedIndex(),n=t>=0?t:0;this.adapter.focusMenuItemAtIndex(n)}},e.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},e.prototype.handleMenuClosed=function(){this.adapter.removeClass(Vs.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var t=this.adapter.hasClass(Vs.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(t){this.setSelectedIndex(t,!0)},e.prototype.handleFocus=function(){this.adapter.addClass(Vs.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(t){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(t),this.openMenu()}},e.prototype.handleKeydown=function(t){if(!(this.isMenuOpen||!this.adapter.hasClass(Vs.FOCUSED))){var n=fa(t)===uo.ENTER,l=fa(t)===uo.SPACEBAR,u=fa(t)===uo.ARROW_UP,p=fa(t)===uo.ARROW_DOWN,o=t.ctrlKey||t.metaKey;if(!o&&(!l&&t.key&&t.key.length===1||l&&this.adapter.isTypeaheadInProgress())){var c=l?" ":t.key,g=this.adapter.typeaheadMatchItem(c,this.getSelectedIndex());g>=0&&this.setSelectedIndex(g),t.preventDefault();return}!n&&!l&&!u&&!p||(u&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):p&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),t.preventDefault())}},e.prototype.notchOutline=function(t){if(!!this.adapter.hasOutline()){var n=this.adapter.hasClass(Vs.FOCUSED);if(t){var l=zf.LABEL_SCALE,u=this.adapter.getLabelWidth()*l;this.adapter.notchOutline(u)}else n||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},e.prototype.setUseDefaultValidation=function(t){this.useDefaultValidation=t},e.prototype.setValid=function(t){this.useDefaultValidation||(this.customValidity=t),this.adapter.setSelectAnchorAttr("aria-invalid",(!t).toString()),t?(this.adapter.removeClass(Vs.INVALID),this.adapter.removeMenuClass(Vs.MENU_INVALID)):(this.adapter.addClass(Vs.INVALID),this.adapter.addMenuClass(Vs.MENU_INVALID)),this.syncHelperTextValidity(t)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(Vs.REQUIRED)&&!this.adapter.hasClass(Vs.DISABLED)?this.getSelectedIndex()!==zf.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(t){t?this.adapter.addClass(Vs.REQUIRED):this.adapter.removeClass(Vs.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",t.toString()),this.adapter.setLabelRequired(t)},e.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},e.prototype.init=function(){var t=this.adapter.getAnchorElement();t&&(this.adapter.setMenuAnchorElement(t),this.adapter.setMenuAnchorCorner(Zf.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(Vs.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(Vs.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass(Vs.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var t=this.adapter.hasClass(Vs.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(t){if(!!this.helperText){this.helperText.setValidity(t);var n=this.helperText.isVisible(),l=this.helperText.getId();n&&l?this.adapter.setSelectAnchorAttr(Bm.ARIA_DESCRIBEDBY,l):this.adapter.removeSelectAnchorAttr(Bm.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var t=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){t.recentlyClicked=!1},zf.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Nf={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},jf={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $8=function(i){Ha(e,i);function e(t){return i.call(this,qo(qo({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return jf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Nf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(Nf.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(t){this.adapter.setContent(t)},e.prototype.setValidation=function(t){t?this.adapter.addClass(jf.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(jf.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidationMsgPersistent=function(t){t?this.adapter.addClass(jf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(jf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},e.prototype.setValidity=function(t){var n=this.adapter.hasClass(jf.HELPER_TEXT_VALIDATION_MSG);if(!!n){var l=this.adapter.hasClass(jf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),u=!t||l;if(u){this.showToScreenReader(),t?this.adapter.removeAttr(Nf.ROLE):this.adapter.setAttr(Nf.ROLE,"alert");return}this.adapter.removeAttr(Nf.ROLE),this.hide()}},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(Nf.ARIA_HIDDEN)},e.prototype.hide=function(){this.adapter.setAttr(Nf.ARIA_HIDDEN,"true")},e}(ql);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var b_={ICON_EVENT:"MDCSelect:icon",ICON_ROLE:"button"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var w_=["click","keydown"],eA=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.savedTabIndex=null,n.interactionHandler=function(l){n.handleInteraction(l)},n}return Object.defineProperty(e,"strings",{get:function(){return b_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t,n;this.savedTabIndex=this.adapter.getAttr("tabindex");try{for(var l=Ec(w_),u=l.next();!u.done;u=l.next()){var p=u.value;this.adapter.registerInteractionHandler(p,this.interactionHandler)}}catch(o){t={error:o}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}},e.prototype.destroy=function(){var t,n;try{for(var l=Ec(w_),u=l.next();!u.done;u=l.next()){var p=u.value;this.adapter.deregisterInteractionHandler(p,this.interactionHandler)}}catch(o){t={error:o}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}},e.prototype.setDisabled=function(t){!this.savedTabIndex||(t?(this.adapter.setAttr("tabindex","-1"),this.adapter.removeAttr("role")):(this.adapter.setAttr("tabindex",this.savedTabIndex),this.adapter.setAttr("role",b_.ICON_ROLE)))},e.prototype.setAriaLabel=function(t){this.adapter.setAttr("aria-label",t)},e.prototype.setContent=function(t){this.adapter.setContent(t)},e.prototype.handleInteraction=function(t){var n=t.key==="Enter"||t.keyCode===13;(t.type==="click"||n)&&this.adapter.notifyIconAction()},e}(ql);const{document:tA}=D1;function iA(i){let e,t,n,l,u,p,o,c;const g=i[31].default,_=nr(g,i,i[30],null);let v=[{class:n=Hn({[i[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":i[5],"mdc-menu-surface--open":i[4],"smui-menu-surface--static":i[4],"mdc-menu-surface--fullwidth":i[7],...i[10]})},{style:l=Object.entries(i[11]).map(x_).concat([i[3]]).join(" ")},i[13]],w={};for(let x=0;x<v.length;x+=1)w=Ni(w,v[x]);return{c(){e=$i(),t=Li("div"),_&&_.c(),this.h()},l(x){e=en(x),t=Pi(x,"DIV",{class:!0,style:!0});var C=Ti(t);_&&_.l(C),C.forEach(Oe),this.h()},h(){Un(t,w)},m(x,C){wt(x,e,C),wt(x,t,C),_&&_.m(t,null),i[33](t),p=!0,o||(c=[Vn(tA.body,"click",i[32],!0),Gn(u=go.call(null,t,i[1])),Gn(i[12].call(null,t)),Vn(t,"keydown",i[34])],o=!0)},p(x,C){_&&_.p&&(!p||C[0]&1073741824)&&rr(_,g,x,x[30],p?sr(g,x[30],C,null):or(x[30]),null),Un(t,w=cr(v,[(!p||C[0]&1204&&n!==(n=Hn({[x[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":x[5],"mdc-menu-surface--open":x[4],"smui-menu-surface--static":x[4],"mdc-menu-surface--fullwidth":x[7],...x[10]})))&&{class:n},(!p||C[0]&2056&&l!==(l=Object.entries(x[11]).map(x_).concat([x[3]]).join(" ")))&&{style:l},C[0]&8192&&x[13]])),u&&Zr(u.update)&&C[0]&2&&u.update.call(null,x[1])},i(x){p||(tt(_,x),p=!0)},o(x){ct(_,x),p=!1},d(x){x&&Oe(e),x&&Oe(t),_&&_.d(x),i[33](null),o=!1,bo(c)}}}const x_=([i,e])=>`${i}: ${e};`;function nA(i,e,t){const n=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;var o,c,g;const _=io(to());let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{static:C=!1}=e,{anchor:T=!0}=e,{fixed:k=!1}=e,{open:M=C}=e,{managed:O=!1}=e,{fullWidth:V=!1}=e,{quickOpen:W=!1}=e,{anchorElement:J=void 0}=e,{anchorCorner:Q=void 0}=e,{anchorMargin:Z={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:ie=0}=e,{horizontallyCenteredOnViewport:Se=!1}=e,xe,le,Ee={},me={},Ae;Fo("SMUI:list:role","menu"),Fo("SMUI:list:item:role","menuitem");const pt=Zf;ws(()=>(t(9,le=new B4({addClass:Pt,removeClass:We,hasClass:rt,hasAnchor:()=>!!J,notifyClose:()=>{O||t(0,M=C),M||Qr(xe,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{O||t(0,M=C),M||Qr(xe,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{O||t(0,M=!0),M&&Qr(xe,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:$e=>xe.contains($e),isRtl:()=>getComputedStyle(xe).getPropertyValue("direction")==="rtl",setTransformOrigin:$e=>{t(11,me["transform-origin"]=$e,me)},isFocused:()=>document.activeElement===xe,saveFocus:()=>{var $e;Ae=($e=document.activeElement)!==null&&$e!==void 0?$e:void 0},restoreFocus:()=>{(!xe||xe.contains(document.activeElement))&&Ae&&document.contains(Ae)&&"focus"in Ae&&Ae.focus()},getInnerDimensions:()=>({width:xe.offsetWidth,height:xe.offsetHeight}),getAnchorDimensions:()=>J?J.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:$e=>{t(11,me.left="left"in $e?`${$e.left}px`:"",me),t(11,me.right="right"in $e?`${$e.right}px`:"",me),t(11,me.top="top"in $e?`${$e.top}px`:"",me),t(11,me.bottom="bottom"in $e?`${$e.bottom}px`:"",me)},setMaxHeight:$e=>{t(11,me["max-height"]=$e,me)}})),Qr(xe,"SMUIMenuSurface:mount",{get open(){return M},set open($e){t(0,M=$e)},closeProgrammatic:be}),le.init(),()=>{var $e;const Dt=le.isHoistedElement;le.destroy(),Dt&&(($e=xe.parentNode)===null||$e===void 0||$e.removeChild(xe))})),sc(()=>{var Xe;T&&xe&&((Xe=xe.parentElement)===null||Xe===void 0||Xe.classList.remove("mdc-menu-surface--anchor"))});function rt(Xe){return Xe in Ee?Ee[Xe]:ge().classList.contains(Xe)}function Pt(Xe){Ee[Xe]||t(10,Ee[Xe]=!0,Ee)}function We(Xe){(!(Xe in Ee)||Ee[Xe])&&t(10,Ee[Xe]=!1,Ee)}function be(Xe){le.close(Xe),t(0,M=!1)}function Le(){return M}function Ue(Xe){t(0,M=Xe)}function ce(Xe,$e){return le.setAbsolutePosition(Xe,$e)}function Ie(Xe){return le.setIsHoisted(Xe)}function de(){return le.isFixed()}function ge(){return xe}const Re=Xe=>le&&M&&!O&&le.handleBodyClick(Xe);function Ze(Xe){pn[Xe?"unshift":"push"](()=>{xe=Xe,t(8,xe)})}const ut=Xe=>le&&le.handleKeydown(Xe);return i.$$set=Xe=>{e=Ni(Ni({},e),$r(Xe)),t(13,l=On(e,n)),"use"in Xe&&t(1,v=Xe.use),"class"in Xe&&t(2,w=Xe.class),"style"in Xe&&t(3,x=Xe.style),"static"in Xe&&t(4,C=Xe.static),"anchor"in Xe&&t(15,T=Xe.anchor),"fixed"in Xe&&t(5,k=Xe.fixed),"open"in Xe&&t(0,M=Xe.open),"managed"in Xe&&t(6,O=Xe.managed),"fullWidth"in Xe&&t(7,V=Xe.fullWidth),"quickOpen"in Xe&&t(16,W=Xe.quickOpen),"anchorElement"in Xe&&t(14,J=Xe.anchorElement),"anchorCorner"in Xe&&t(17,Q=Xe.anchorCorner),"anchorMargin"in Xe&&t(18,Z=Xe.anchorMargin),"maxHeight"in Xe&&t(19,ie=Xe.maxHeight),"horizontallyCenteredOnViewport"in Xe&&t(20,Se=Xe.horizontallyCenteredOnViewport),"$$scope"in Xe&&t(30,p=Xe.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&939557120&&xe&&T&&!(!(t(27,o=xe.parentElement)===null||o===void 0)&&o.classList.contains("mdc-menu-surface--anchor"))&&(t(28,c=xe.parentElement)===null||c===void 0||c.classList.add("mdc-menu-surface--anchor"),t(14,J=t(29,g=xe.parentElement)!==null&&g!==void 0?g:void 0)),i.$$.dirty[0]&513&&le&&le.isOpen()!==M&&(M?le.open():le.close()),i.$$.dirty[0]&66048&&le&&le.setQuickOpen(W),i.$$.dirty[0]&544&&le&&le.setFixedPosition(k),i.$$.dirty[0]&524800&&le&&le.setMaxHeight(ie),i.$$.dirty[0]&1049088&&le&&le.setIsHorizontallyCenteredOnViewport(Se),i.$$.dirty[0]&131584&&le&&Q!=null&&(typeof Q=="string"?le.setAnchorCorner(pt[Q]):le.setAnchorCorner(Q)),i.$$.dirty[0]&262656&&le&&le.setAnchorMargin(Z)},[M,v,w,x,C,k,O,V,xe,le,Ee,me,_,l,J,T,W,Q,Z,ie,Se,Le,Ue,ce,Ie,de,ge,o,c,g,p,u,Re,Ze,ut]}class rA extends fr{constructor(e){super(),dr(this,e,nA,iA,hr,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function oA(i,{addClass:e=n=>i.classList.add(n),removeClass:t=n=>i.classList.remove(n)}={}){return e("mdc-menu-surface--anchor"),{destroy(){t("mdc-menu-surface--anchor")}}}function sA(i){let e;const t=i[16].default,n=nr(t,i,i[21],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&2097152)&&rr(n,t,l,l[21],e?sr(t,l[21],u,null):or(l[21]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function aA(i){let e,t,n;const l=[{use:i[5]},{class:Hn({[i[1]]:!0,"mdc-menu":!0})},i[9]];function u(o){i[18](o)}let p={$$slots:{default:[sA]},$$scope:{ctx:i}};for(let o=0;o<l.length;o+=1)p=Ni(p,l[o]);return i[0]!==void 0&&(p.open=i[0]),e=new rA({props:p}),i[17](e),pn.push(()=>To(e,"open",u)),e.$on("SMUIMenuSurface:mount",i[7]),e.$on("SMUIList:mount",i[8]),e.$on("SMUIMenuSurface:opened",i[19]),e.$on("keydown",i[6]),e.$on("SMUIList:action",i[20]),{c(){xi(e.$$.fragment)},l(o){Ci(e.$$.fragment,o)},m(o,c){Ai(e,o,c),n=!0},p(o,[c]){const g=c&546?cr(l,[c&32&&{use:o[5]},c&2&&{class:Hn({[o[1]]:!0,"mdc-menu":!0})},c&512&&fo(o[9])]):{};c&2097152&&(g.$$scope={dirty:c,ctx:o}),!t&&c&1&&(t=!0,g.open=o[0],Lo(()=>t=!1)),e.$set(g)},i(o){n||(tt(e.$$.fragment,o),n=!0)},o(o){ct(e.$$.fragment,o),n=!1},d(o){i[17](null),Si(e,o)}}}function lA(i,e,t){let n;const l=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getElement"];let u=On(e,l),{$$slots:p={},$$scope:o}=e;const{closest:c}=sp,g=io(to());let{use:_=[]}=e,{class:v=""}=e,{open:w=!1}=e,x,C,T,k;ws(()=>(t(3,C=new Y8({addClassToElementAtIndex:(me,Ae)=>{k.addClassForElementIndex(me,Ae)},removeClassFromElementAtIndex:(me,Ae)=>{k.removeClassForElementIndex(me,Ae)},addAttributeToElementAtIndex:(me,Ae,pt)=>{k.setAttributeForElementIndex(me,Ae,pt)},removeAttributeFromElementAtIndex:(me,Ae)=>{k.removeAttributeForElementIndex(me,Ae)},getAttributeFromElementAtIndex:(me,Ae)=>k.getAttributeFromElementIndex(me,Ae),elementContainsClass:(me,Ae)=>me.classList.contains(Ae),closeSurface:me=>T.closeProgrammatic(me),getElementIndex:me=>k.getOrderedList().map(Ae=>Ae.element).indexOf(me),notifySelected:me=>Qr(ie(),"SMUIMenu:selected",{index:me.index,item:k.getOrderedList()[me.index].element},void 0,!0),getMenuItemCount:()=>k.items.length,focusItemAtIndex:me=>k.focusItemAtIndex(me),focusListRoot:()=>"focus"in k.element&&k.element.focus(),isSelectableItemAtIndex:me=>!!c(k.getOrderedList()[me].element,`.${q0.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:me=>{const Ae=k.getOrderedList(),pt=c(Ae[me].element,`.${q0.MENU_SELECTION_GROUP}`),rt=pt==null?void 0:pt.querySelector(`.${q0.MENU_SELECTED_LIST_ITEM}`);return rt?Ae.map(Pt=>Pt.element).indexOf(rt):-1}})),Qr(ie(),"SMUIMenu:mount",C),C.init(),()=>{C.destroy()}));function M(me){C&&C.handleKeydown(me)}function O(me){T||(T=me.detail)}function V(me){k||t(4,k=me.detail)}function W(){return w}function J(me){t(0,w=me)}function Q(me){C.setDefaultFocusState(me)}function Z(){return C.getSelectedIndex()}function ie(){return x.getElement()}function Se(me){pn[me?"unshift":"push"](()=>{x=me,t(2,x)})}function xe(me){w=me,t(0,w)}const le=()=>C&&C.handleMenuSurfaceOpened(),Ee=me=>C&&C.handleItemAction(k.getOrderedList()[me.detail.index].element);return i.$$set=me=>{e=Ni(Ni({},e),$r(me)),t(9,u=On(e,l)),"use"in me&&t(10,_=me.use),"class"in me&&t(1,v=me.class),"open"in me&&t(0,w=me.open),"$$scope"in me&&t(21,o=me.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(5,n=[g,..._])},[w,v,x,C,k,n,M,O,V,u,_,W,J,Q,Z,ie,p,Se,xe,le,Ee,o]}class uA extends fr{constructor(e){super(),dr(this,e,lA,aA,hr,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getElement:15})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getElement(){return this.$$.ctx[15]}}function cA(i){let e;const t=i[37].default,n=nr(t,i,i[43],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[1]&4096)&&rr(n,t,l,l[43],e?sr(t,l[43],u,null):or(l[43]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function hA(i){let e,t,n;const l=[{use:[i[17],...i[0]]},{class:Hn({[i[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":i[2],"mdc-deprecated-list--dense":i[3],"mdc-deprecated-list--textual-list":i[4],"mdc-deprecated-list--avatar-list":i[5]||i[18],"mdc-deprecated-list--icon-list":i[6],"mdc-deprecated-list--image-list":i[7],"mdc-deprecated-list--thumbnail-list":i[8],"mdc-deprecated-list--video-list":i[9],"mdc-deprecated-list--two-line":i[10],"smui-list--three-line":i[11]&&!i[10]})},{role:i[15]},i[23]];var u=i[12];function p(o){let c={$$slots:{default:[cA]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[38](e),e.$on("keydown",i[39]),e.$on("focusin",i[40]),e.$on("focusout",i[41]),e.$on("click",i[42]),e.$on("SMUIListItem:mount",i[19]),e.$on("SMUIListItem:unmount",i[20]),e.$on("SMUI:action",i[21])),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,c){const g=c[0]&8818687?cr(l,[c[0]&131073&&{use:[o[17],...o[0]]},c[0]&266238&&{class:Hn({[o[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":o[2],"mdc-deprecated-list--dense":o[3],"mdc-deprecated-list--textual-list":o[4],"mdc-deprecated-list--avatar-list":o[5]||o[18],"mdc-deprecated-list--icon-list":o[6],"mdc-deprecated-list--image-list":o[7],"mdc-deprecated-list--thumbnail-list":o[8],"mdc-deprecated-list--video-list":o[9],"mdc-deprecated-list--two-line":o[10],"smui-list--three-line":o[11]&&!o[10]})},c[0]&32768&&{role:o[15]},c[0]&8388608&&fo(o[23])]):{};if(c[1]&4096&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[12])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[38](e),e.$on("keydown",o[39]),e.$on("focusin",o[40]),e.$on("focusout",o[41]),e.$on("click",o[42]),e.$on("SMUIListItem:mount",o[19]),e.$on("SMUIListItem:unmount",o[20]),e.$on("SMUI:action",o[21]),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[38](null),o&&Oe(t),e&&Si(e,o)}}}function fA(i,e,t){const n=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;var o;const{closest:c,matches:g}=sp,_=io(to());let{use:v=[]}=e,{class:w=""}=e,{nonInteractive:x=!1}=e,{dense:C=!1}=e,{textualList:T=!1}=e,{avatarList:k=!1}=e,{iconList:M=!1}=e,{imageList:O=!1}=e,{thumbnailList:V=!1}=e,{videoList:W=!1}=e,{twoLine:J=!1}=e,{threeLine:Q=!1}=e,{vertical:Z=!0}=e,{wrapFocus:ie=(o=es("SMUI:list:wrapFocus"))!==null&&o!==void 0?o:!1}=e,{singleSelection:Se=!1}=e,{selectedIndex:xe=-1}=e,{radioList:le=!1}=e,{checkList:Ee=!1}=e,{hasTypeahead:me=!1}=e,Ae,pt,rt=[],Pt=es("SMUI:list:role"),We=es("SMUI:list:nav");const be=new WeakMap;let Le=es("SMUI:dialog:selection"),Ue=es("SMUI:addLayoutListener"),ce,{component:Ie=We?n8:r8}=e;Fo("SMUI:list:nonInteractive",x),Fo("SMUI:separator:context","list"),Pt||(Se?(Pt="listbox",Fo("SMUI:list:item:role","option")):le?(Pt="radiogroup",Fo("SMUI:list:item:role","radio")):Ee?(Pt="group",Fo("SMUI:list:item:role","checkbox")):(Pt="list",Fo("SMUI:list:item:role",void 0))),Ue&&(ce=Ue(Yt)),ws(()=>{t(13,pt=new W8({addClassForElementIndex:$e,focusItemAtIndex:ut,getAttributeForElementIndex:(ae,et)=>{var bt,Xt;return(Xt=(bt=Ze()[ae])===null||bt===void 0?void 0:bt.getAttr(et))!==null&&Xt!==void 0?Xt:null},getFocusedElementIndex:()=>document.activeElement?Ze().map(ae=>ae.element).indexOf(document.activeElement):-1,getListItemCount:()=>rt.length,getPrimaryTextAtIndex:xt,hasCheckboxAtIndex:ae=>{var et,bt;return(bt=(et=Ze()[ae])===null||et===void 0?void 0:et.hasCheckbox)!==null&&bt!==void 0?bt:!1},hasRadioAtIndex:ae=>{var et,bt;return(bt=(et=Ze()[ae])===null||et===void 0?void 0:et.hasRadio)!==null&&bt!==void 0?bt:!1},isCheckboxCheckedAtIndex:ae=>{var et;const bt=Ze()[ae];return(et=(bt==null?void 0:bt.hasCheckbox)&&bt.checked)!==null&&et!==void 0?et:!1},isFocusInsideList:()=>Ae!=null&&Ot()!==document.activeElement&&Ot().contains(document.activeElement),isRootFocused:()=>Ae!=null&&document.activeElement===Ot(),listItemAtIndexHasClass:Xe,notifyAction:ae=>{t(24,xe=ae),Ae!=null&&Qr(Ot(),"SMUIList:action",{index:ae},void 0,!0)},removeClassForElementIndex:Dt,setAttributeForElementIndex:ni,setCheckedCheckboxOrRadioAtIndex:(ae,et)=>{Ze()[ae].checked=et},setTabIndexForListItemChildren:(ae,et)=>{const bt=Ze()[ae],Xt="button:not(:disabled), a";Array.prototype.forEach.call(bt.element.querySelectorAll(Xt),fi=>{fi.setAttribute("tabindex",et)})}}));const ee={get element(){return Ot()},get items(){return rt},get typeaheadInProgress(){return pt.isTypeaheadInProgress()},typeaheadMatchItem(ae,et){return pt.typeaheadMatchItem(ae,et,!0)},getOrderedList:Ze,focusItemAtIndex:ut,addClassForElementIndex:$e,removeClassForElementIndex:Dt,setAttributeForElementIndex:ni,removeAttributeForElementIndex:mt,getAttributeFromElementIndex:At,getPrimaryTextAtIndex:xt};return Qr(Ot(),"SMUIList:mount",ee),pt.init(),()=>{pt.destroy()}}),sc(()=>{ce&&ce()});function de(ee){rt.push(ee.detail),be.set(ee.detail.element,ee.detail),Se&&ee.detail.selected&&t(24,xe=Qe(ee.detail.element)),ee.stopPropagation()}function ge(ee){var ae;const et=(ae=ee.detail&&rt.indexOf(ee.detail))!==null&&ae!==void 0?ae:-1;et!==-1&&(rt.splice(et,1),rt=rt,be.delete(ee.detail.element)),ee.stopPropagation()}function Re(ee){if(le||Ee){const ae=Qe(ee.target);if(ae!==-1){const et=Ze()[ae];et&&(le&&!et.checked||Ee)&&(et.checked=!et.checked,et.activateRipple(),window.requestAnimationFrame(()=>{et.deactivateRipple()}))}}}function Ze(){return Ae==null?[]:[...Ot().children].map(ee=>be.get(ee)).filter(ee=>ee&&ee._smui_list_item_accessor)}function ut(ee){const ae=Ze()[ee];ae&&"focus"in ae.element&&ae.element.focus()}function Xe(ee,ae){var et;const bt=Ze()[ee];return(et=bt&&bt.hasClass(ae))!==null&&et!==void 0?et:!1}function $e(ee,ae){const et=Ze()[ee];et&&et.addClass(ae)}function Dt(ee,ae){const et=Ze()[ee];et&&et.removeClass(ae)}function ni(ee,ae,et){const bt=Ze()[ee];bt&&bt.addAttr(ae,et)}function mt(ee,ae){const et=Ze()[ee];et&&et.removeAttr(ae)}function At(ee,ae){const et=Ze()[ee];return et?et.getAttr(ae):null}function xt(ee){var ae;const et=Ze()[ee];return(ae=et&&et.getPrimaryText())!==null&&ae!==void 0?ae:""}function Qe(ee){const ae=c(ee,".mdc-deprecated-list-item, .mdc-deprecated-list");return ae&&g(ae,".mdc-deprecated-list-item")?Ze().map(et=>et==null?void 0:et.element).indexOf(ae):-1}function Yt(){return pt.layout()}function si(ee,ae){return pt.setEnabled(ee,ae)}function Zt(){return pt.isTypeaheadInProgress()}function Ei(){return pt.getSelectedIndex()}function Qt(){return pt.getFocusedItemIndex()}function Ot(){return Ae.getElement()}function ai(ee){pn[ee?"unshift":"push"](()=>{Ae=ee,t(14,Ae)})}const Ji=ee=>pt&&pt.handleKeydown(ee,ee.target.classList.contains("mdc-deprecated-list-item"),Qe(ee.target)),Ii=ee=>pt&&pt.handleFocusIn(Qe(ee.target)),$t=ee=>pt&&pt.handleFocusOut(Qe(ee.target)),Me=ee=>pt&&pt.handleClick(Qe(ee.target),!g(ee.target,'input[type="checkbox"], input[type="radio"]'));return i.$$set=ee=>{e=Ni(Ni({},e),$r(ee)),t(23,l=On(e,n)),"use"in ee&&t(0,v=ee.use),"class"in ee&&t(1,w=ee.class),"nonInteractive"in ee&&t(2,x=ee.nonInteractive),"dense"in ee&&t(3,C=ee.dense),"textualList"in ee&&t(4,T=ee.textualList),"avatarList"in ee&&t(5,k=ee.avatarList),"iconList"in ee&&t(6,M=ee.iconList),"imageList"in ee&&t(7,O=ee.imageList),"thumbnailList"in ee&&t(8,V=ee.thumbnailList),"videoList"in ee&&t(9,W=ee.videoList),"twoLine"in ee&&t(10,J=ee.twoLine),"threeLine"in ee&&t(11,Q=ee.threeLine),"vertical"in ee&&t(25,Z=ee.vertical),"wrapFocus"in ee&&t(26,ie=ee.wrapFocus),"singleSelection"in ee&&t(27,Se=ee.singleSelection),"selectedIndex"in ee&&t(24,xe=ee.selectedIndex),"radioList"in ee&&t(28,le=ee.radioList),"checkList"in ee&&t(29,Ee=ee.checkList),"hasTypeahead"in ee&&t(30,me=ee.hasTypeahead),"component"in ee&&t(12,Ie=ee.component),"$$scope"in ee&&t(43,p=ee.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33562624&&pt&&pt.setVerticalOrientation(Z),i.$$.dirty[0]&67117056&&pt&&pt.setWrapFocus(ie),i.$$.dirty[0]&1073750016&&pt&&pt.setHasTypeahead(me),i.$$.dirty[0]&134225920&&pt&&pt.setSingleSelection(Se),i.$$.dirty[0]&151003136&&pt&&Se&&Ei()!==xe&&pt.setSelectedIndex(xe)},[v,w,x,C,T,k,M,O,V,W,J,Q,Ie,pt,Ae,Pt,g,_,Le,de,ge,Re,Qe,l,xe,Z,ie,Se,le,Ee,me,Yt,si,Zt,Ei,Qt,Ot,u,ai,Ji,Ii,$t,Me,p]}class dA extends fr{constructor(e){super(),dr(this,e,fA,hA,hr,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function A_(i){let e;return{c(){e=Li("span"),this.h()},l(t){e=Pi(t,"SPAN",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","mdc-deprecated-list-item__ripple")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function pA(i){let e,t,n=i[7]&&A_();const l=i[32].default,u=nr(l,i,i[35],null);return{c(){n&&n.c(),e=hn(),u&&u.c()},l(p){n&&n.l(p),e=hn(),u&&u.l(p)},m(p,o){n&&n.m(p,o),wt(p,e,o),u&&u.m(p,o),t=!0},p(p,o){p[7]?n||(n=A_(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u&&u.p&&(!t||o[1]&16)&&rr(u,l,p,p[35],t?sr(l,p[35],o,null):or(p[35]),null)},i(p){t||(tt(u,p),t=!0)},o(p){ct(u,p),t=!1},d(p){n&&n.d(p),p&&Oe(e),u&&u.d(p)}}}function mA(i){let e,t,n;const l=[{use:[...i[6]?[]:[[lh,{ripple:!i[14],unbounded:!1,color:(i[1]||i[0])&&i[5]==null?"primary":i[5],disabled:i[9],addClass:i[22],removeClass:i[23],addStyle:i[24]}]],i[20],...i[2]]},{class:Hn({[i[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":i[1],"mdc-deprecated-list-item--selected":i[0],"mdc-deprecated-list-item--disabled":i[9],"mdc-menu-item--selected":!i[21]&&i[8]==="menuitem"&&i[0],"smui-menu-item--non-interactive":i[6],...i[16]})},{style:Object.entries(i[17]).map(S_).concat([i[4]]).join(" ")},i[21]&&i[1]?{"aria-current":"page"}:{},i[21]?{}:{role:i[8]},!i[21]&&i[8]==="option"?{"aria-selected":i[0]?"true":"false"}:{},!i[21]&&(i[8]==="radio"||i[8]==="checkbox")?{"aria-checked":i[14]&&i[14].checked?"true":"false"}:{},i[21]?{}:{"aria-disabled":i[9]?"true":"false"},{"data-menu-item-skip-restore-focus":i[10]||void 0},{tabindex:i[19]},{href:i[11]},i[18],i[27]];var u=i[12];function p(o){let c={$$slots:{default:[pA]},$$scope:{ctx:o}};for(let g=0;g<l.length;g+=1)c=Ni(c,l[g]);return{props:c}}return u&&(e=new u(p(i)),i[33](e),e.$on("click",i[13]),e.$on("keydown",i[25]),e.$on("SMUIGenericInput:mount",i[26]),e.$on("SMUIGenericInput:unmount",i[34])),{c(){e&&xi(e.$$.fragment),t=hn()},l(o){e&&Ci(e.$$.fragment,o),t=hn()},m(o,c){e&&Ai(e,o,c),wt(o,t,c),n=!0},p(o,c){const g=c[0]&167726975?cr(l,[c[0]&30425703&&{use:[...o[6]?[]:[[lh,{ripple:!o[14],unbounded:!1,color:(o[1]||o[0])&&o[5]==null?"primary":o[5],disabled:o[9],addClass:o[22],removeClass:o[23],addStyle:o[24]}]],o[20],...o[2]]},c[0]&2163531&&{class:Hn({[o[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":o[1],"mdc-deprecated-list-item--selected":o[0],"mdc-deprecated-list-item--disabled":o[9],"mdc-menu-item--selected":!o[21]&&o[8]==="menuitem"&&o[0],"smui-menu-item--non-interactive":o[6],...o[16]})},c[0]&131088&&{style:Object.entries(o[17]).map(S_).concat([o[4]]).join(" ")},c[0]&2097154&&fo(o[21]&&o[1]?{"aria-current":"page"}:{}),c[0]&2097408&&fo(o[21]?{}:{role:o[8]}),c[0]&2097409&&fo(!o[21]&&o[8]==="option"?{"aria-selected":o[0]?"true":"false"}:{}),c[0]&2113792&&fo(!o[21]&&(o[8]==="radio"||o[8]==="checkbox")?{"aria-checked":o[14]&&o[14].checked?"true":"false"}:{}),c[0]&2097664&&fo(o[21]?{}:{"aria-disabled":o[9]?"true":"false"}),c[0]&1024&&{"data-menu-item-skip-restore-focus":o[10]||void 0},c[0]&524288&&{tabindex:o[19]},c[0]&2048&&{href:o[11]},c[0]&262144&&fo(o[18]),c[0]&134217728&&fo(o[27])]):{};if(c[0]&128|c[1]&16&&(g.$$scope={dirty:c,ctx:o}),u!==(u=o[12])){if(e){Sr();const _=e;ct(_.$$.fragment,1,0,()=>{Si(_,1)}),Ar()}u?(e=new u(p(o)),o[33](e),e.$on("click",o[13]),e.$on("keydown",o[25]),e.$on("SMUIGenericInput:mount",o[26]),e.$on("SMUIGenericInput:unmount",o[34]),xi(e.$$.fragment),tt(e.$$.fragment,1),Ai(e,t.parentNode,t)):e=null}else u&&e.$set(g)},i(o){n||(e&&tt(e.$$.fragment,o),n=!0)},o(o){e&&ct(e.$$.fragment,o),n=!1},d(o){i[33](null),o&&Oe(t),e&&Si(e,o)}}}let gA=0;const S_=([i,e])=>`${i}: ${e};`;function yA(i,e,t){let n;const l=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let u=On(e,l),{$$slots:p={},$$scope:o}=e;var c;const g=io(to());let _=()=>{};function v(mt){return mt===_}let{use:w=[]}=e,{class:x=""}=e,{style:C=""}=e,{color:T=void 0}=e,{nonInteractive:k=(c=es("SMUI:list:nonInteractive"))!==null&&c!==void 0?c:!1}=e;Fo("SMUI:list:nonInteractive",void 0);let{ripple:M=!k}=e,{activated:O=!1}=e,{role:V=es("SMUI:list:item:role")}=e;Fo("SMUI:list:item:role",void 0);let{selected:W=!1}=e,{disabled:J=!1}=e,{skipRestoreFocus:Q=!1}=e,{tabindex:Z=_}=e,{inputId:ie="SMUI-form-field-list-"+gA++}=e,{href:Se=void 0}=e,xe,le={},Ee={},me={},Ae,pt,rt=es("SMUI:list:item:nav"),{component:Pt=rt?Se?Cg:bf:t8}=e;Fo("SMUI:generic:input:props",{id:ie}),Fo("SMUI:separator:context",void 0),ws(()=>{if(!W&&!k){let At=!0,xt=xe;for(;xt.previousSibling;)if(xt=xt.previousSibling,xt.nodeType===1&&xt.classList.contains("mdc-deprecated-list-item")&&!xt.classList.contains("mdc-deprecated-list-item--disabled")){At=!1;break}At&&(pt=window.requestAnimationFrame(ge))}const mt={_smui_list_item_accessor:!0,get element(){return $e()},get selected(){return W},set selected(At){t(0,W=At)},hasClass:We,addClass:be,removeClass:Le,getAttr:ce,addAttr:Ie,removeAttr:de,getPrimaryText:Xe,get checked(){var At;return(At=Ae&&Ae.checked)!==null&&At!==void 0?At:!1},set checked(At){Ae&&t(14,Ae.checked=!!At,Ae)},get hasCheckbox(){return!!(Ae&&"_smui_checkbox_accessor"in Ae)},get hasRadio(){return!!(Ae&&"_smui_radio_accessor"in Ae)},activateRipple(){Ae&&Ae.activateRipple()},deactivateRipple(){Ae&&Ae.deactivateRipple()},getValue(){return u.value},action:ut,get tabindex(){return n},set tabindex(At){t(28,Z=At)},get disabled(){return J},get activated(){return O},set activated(At){t(1,O=At)}};return Qr($e(),"SMUIListItem:mount",mt),()=>{Qr($e(),"SMUIListItem:unmount",mt)}}),sc(()=>{pt&&window.cancelAnimationFrame(pt)});function We(mt){return mt in le?le[mt]:$e().classList.contains(mt)}function be(mt){le[mt]||t(16,le[mt]=!0,le)}function Le(mt){(!(mt in le)||le[mt])&&t(16,le[mt]=!1,le)}function Ue(mt,At){Ee[mt]!=At&&(At===""||At==null?(delete Ee[mt],t(17,Ee)):t(17,Ee[mt]=At,Ee))}function ce(mt){var At;return mt in me?(At=me[mt])!==null&&At!==void 0?At:null:$e().getAttribute(mt)}function Ie(mt,At){me[mt]!==At&&t(18,me[mt]=At,me)}function de(mt){(!(mt in me)||me[mt]!=null)&&t(18,me[mt]=void 0,me)}function ge(){let mt=!0,At=xe.getElement();for(;At.nextElementSibling;)if(At=At.nextElementSibling,At.nodeType===1&&At.classList.contains("mdc-deprecated-list-item")){const xt=At.attributes.getNamedItem("tabindex");if(xt&&xt.value==="0"){mt=!1;break}}mt&&t(19,n=0)}function Re(mt){const At=mt.key==="Enter",xt=mt.key==="Space";(At||xt)&&ut(mt)}function Ze(mt){("_smui_checkbox_accessor"in mt.detail||"_smui_radio_accessor"in mt.detail)&&t(14,Ae=mt.detail)}function ut(mt){J||Qr($e(),"SMUI:action",mt)}function Xe(){var mt,At,xt;const Qe=$e(),Yt=Qe.querySelector(".mdc-deprecated-list-item__primary-text");if(Yt)return(mt=Yt.textContent)!==null&&mt!==void 0?mt:"";const si=Qe.querySelector(".mdc-deprecated-list-item__text");return si?(At=si.textContent)!==null&&At!==void 0?At:"":(xt=Qe.textContent)!==null&&xt!==void 0?xt:""}function $e(){return xe.getElement()}function Dt(mt){pn[mt?"unshift":"push"](()=>{xe=mt,t(15,xe)})}const ni=()=>t(14,Ae=void 0);return i.$$set=mt=>{e=Ni(Ni({},e),$r(mt)),t(27,u=On(e,l)),"use"in mt&&t(2,w=mt.use),"class"in mt&&t(3,x=mt.class),"style"in mt&&t(4,C=mt.style),"color"in mt&&t(5,T=mt.color),"nonInteractive"in mt&&t(6,k=mt.nonInteractive),"ripple"in mt&&t(7,M=mt.ripple),"activated"in mt&&t(1,O=mt.activated),"role"in mt&&t(8,V=mt.role),"selected"in mt&&t(0,W=mt.selected),"disabled"in mt&&t(9,J=mt.disabled),"skipRestoreFocus"in mt&&t(10,Q=mt.skipRestoreFocus),"tabindex"in mt&&t(28,Z=mt.tabindex),"inputId"in mt&&t(29,ie=mt.inputId),"href"in mt&&t(11,Se=mt.href),"component"in mt&&t(12,Pt=mt.component),"$$scope"in mt&&t(35,o=mt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&268452417&&t(19,n=v(Z)?!k&&!J&&(W||Ae&&Ae.checked)?0:-1:Z)},[W,O,w,x,C,T,k,M,V,J,Q,Se,Pt,ut,Ae,xe,le,Ee,me,n,g,rt,be,Le,Ue,Re,Ze,u,Z,ie,Xe,$e,p,Dt,ni,o]}class _A extends fr{constructor(e){super(),dr(this,e,yA,mA,hr,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}da({class:"mdc-deprecated-list-item__text",component:bf});da({class:"mdc-deprecated-list-item__primary-text",component:bf});da({class:"mdc-deprecated-list-item__secondary-text",component:bf});function vA(i){let e,t,n,l,u,p;const o=i[8].default,c=nr(o,i,i[7],null);let g=[{class:t=Hn({[i[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":i[4]})},i[5]],_={};for(let v=0;v<g.length;v+=1)_=Ni(_,g[v]);return{c(){e=Li("span"),c&&c.c(),this.h()},l(v){e=Pi(v,"SPAN",{class:!0});var w=Ti(e);c&&c.l(w),w.forEach(Oe),this.h()},h(){Un(e,_)},m(v,w){wt(v,e,w),c&&c.m(e,null),i[9](e),l=!0,u||(p=[Gn(n=go.call(null,e,i[0])),Gn(i[3].call(null,e))],u=!0)},p(v,[w]){c&&c.p&&(!l||w&128)&&rr(c,o,v,v[7],l?sr(o,v[7],w,null):or(v[7]),null),Un(e,_=cr(g,[(!l||w&2&&t!==(t=Hn({[v[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":v[4]})))&&{class:t},w&32&&v[5]])),n&&Zr(n.update)&&w&1&&n.update.call(null,v[0])},i(v){l||(tt(c,v),l=!0)},o(v){ct(c,v),l=!1},d(v){v&&Oe(e),c&&c.d(v),i[9](null),u=!1,bo(p)}}}function bA(i,e,t){const n=["use","class","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,_,v=es("SMUI:list:graphic:menu-selection-group");function w(){return _}function x(C){pn[C?"unshift":"push"](()=>{_=C,t(2,_)})}return i.$$set=C=>{e=Ni(Ni({},e),$r(C)),t(5,l=On(e,n)),"use"in C&&t(0,c=C.use),"class"in C&&t(1,g=C.class),"$$scope"in C&&t(7,p=C.$$scope)},[c,g,_,o,v,l,w,p,u,x]}class wA extends fr{constructor(e){super(),dr(this,e,bA,vA,hr,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}da({class:"mdc-deprecated-list-item__meta",component:bf});da({class:"mdc-deprecated-list-group",component:vf});da({class:"mdc-deprecated-list-group__subheader",component:Q6});const xA=_A,AA=wA;da({class:"mdc-menu__selection-group-icon",component:AA});function SA(i){let e,t,n,l,u,p,o,c;const g=i[22].default,_=nr(g,i,i[21],null);let v=[{class:t=Hn({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:n=Object.entries(i[9]).map(C_).concat([i[4]]).join(" ")},{for:l=i[5]||(i[11]?i[11].id:void 0)},i[12]],w={};for(let x=0;x<v.length;x+=1)w=Ni(w,v[x]);return{c(){e=Li("label"),_&&_.c(),this.h()},l(x){e=Pi(x,"LABEL",{class:!0,style:!0,for:!0});var C=Ti(e);_&&_.l(C),C.forEach(Oe),this.h()},h(){Un(e,w)},m(x,C){wt(x,e,C),_&&_.m(e,null),i[24](e),p=!0,o||(c=[Gn(u=go.call(null,e,i[2])),Gn(i[10].call(null,e))],o=!0)},p(x,C){_&&_.p&&(!p||C&2097152)&&rr(_,g,x,x[21],p?sr(g,x[21],C,null):or(x[21]),null),Un(e,w=cr(v,[(!p||C&267&&t!==(t=Hn({[x[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":x[0],"mdc-floating-label--required":x[1],...x[8]})))&&{class:t},(!p||C&528&&n!==(n=Object.entries(x[9]).map(C_).concat([x[4]]).join(" ")))&&{style:n},(!p||C&32&&l!==(l=x[5]||(x[11]?x[11].id:void 0)))&&{for:l},C&4096&&x[12]])),u&&Zr(u.update)&&C&4&&u.update.call(null,x[2])},i(x){p||(tt(_,x),p=!0)},o(x){ct(_,x),p=!1},d(x){x&&Oe(e),_&&_.d(x),i[24](null),o=!1,bo(c)}}}function kA(i){let e,t,n,l,u,p,o;const c=i[22].default,g=nr(c,i,i[21],null);let _=[{class:t=Hn({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:n=Object.entries(i[9]).map(k_).concat([i[4]]).join(" ")},i[12]],v={};for(let w=0;w<_.length;w+=1)v=Ni(v,_[w]);return{c(){e=Li("span"),g&&g.c(),this.h()},l(w){e=Pi(w,"SPAN",{class:!0,style:!0});var x=Ti(e);g&&g.l(x),x.forEach(Oe),this.h()},h(){Un(e,v)},m(w,x){wt(w,e,x),g&&g.m(e,null),i[23](e),u=!0,p||(o=[Gn(l=go.call(null,e,i[2])),Gn(i[10].call(null,e))],p=!0)},p(w,x){g&&g.p&&(!u||x&2097152)&&rr(g,c,w,w[21],u?sr(c,w[21],x,null):or(w[21]),null),Un(e,v=cr(_,[(!u||x&267&&t!==(t=Hn({[w[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":w[0],"mdc-floating-label--required":w[1],...w[8]})))&&{class:t},(!u||x&528&&n!==(n=Object.entries(w[9]).map(k_).concat([w[4]]).join(" ")))&&{style:n},x&4096&&w[12]])),l&&Zr(l.update)&&x&4&&l.update.call(null,w[2])},i(w){u||(tt(g,w),u=!0)},o(w){ct(g,w),u=!1},d(w){w&&Oe(e),g&&g.d(w),i[23](null),p=!1,bo(o)}}}function CA(i){let e,t,n,l;const u=[kA,SA],p=[];function o(c,g){return c[6]?0:1}return e=o(i),t=p[e]=u[e](i),{c(){t.c(),n=hn()},l(c){t.l(c),n=hn()},m(c,g){p[e].m(c,g),wt(c,n,g),l=!0},p(c,[g]){let _=e;e=o(c),e===_?p[e].p(c,g):(Sr(),ct(p[_],1,1,()=>{p[_]=null}),Ar(),t=p[e],t?t.p(c,g):(t=p[e]=u[e](c),t.c()),tt(t,1),t.m(n.parentNode,n))},i(c){l||(tt(t),l=!0)},o(c){ct(t),l=!1},d(c){p[e].d(c),c&&Oe(n)}}}const k_=([i,e])=>`${i}: ${e};`,C_=([i,e])=>`${i}: ${e};`;function EA(i,e,t){const n=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;var o;const c=io(to());let{use:g=[]}=e,{class:_=""}=e,{style:v=""}=e,{for:w=void 0}=e,{floatAbove:x=!1}=e,{required:C=!1}=e,{wrapped:T=!1}=e,k,M,O={},V={},W=(o=es("SMUI:generic:input:props"))!==null&&o!==void 0?o:{},J=x,Q=C;ws(()=>{t(18,M=new R8({addClass:Z,removeClass:ie,getWidth:()=>{var be,Le;const Ue=pt(),ce=Ue.cloneNode(!0);(be=Ue.parentNode)===null||be===void 0||be.appendChild(ce),ce.classList.add("smui-floating-label--remove-transition"),ce.classList.add("smui-floating-label--force-size"),ce.classList.remove("mdc-floating-label--float-above");const Ie=ce.scrollWidth;return(Le=Ue.parentNode)===null||Le===void 0||Le.removeChild(ce),Ie},registerInteractionHandler:(be,Le)=>pt().addEventListener(be,Le),deregisterInteractionHandler:(be,Le)=>pt().removeEventListener(be,Le)}));const We={get element(){return pt()},addStyle:Se,removeStyle:xe};return Qr(k,"SMUIFloatingLabel:mount",We),M.init(),()=>{Qr(k,"SMUIFloatingLabel:unmount",We),M.destroy()}});function Z(We){O[We]||t(8,O[We]=!0,O)}function ie(We){(!(We in O)||O[We])&&t(8,O[We]=!1,O)}function Se(We,be){V[We]!=be&&(be===""||be==null?(delete V[We],t(9,V)):t(9,V[We]=be,V))}function xe(We){We in V&&(delete V[We],t(9,V))}function le(We){M.shake(We)}function Ee(We){t(0,x=We)}function me(We){t(1,C=We)}function Ae(){return M.getWidth()}function pt(){return k}function rt(We){pn[We?"unshift":"push"](()=>{k=We,t(7,k)})}function Pt(We){pn[We?"unshift":"push"](()=>{k=We,t(7,k)})}return i.$$set=We=>{e=Ni(Ni({},e),$r(We)),t(12,l=On(e,n)),"use"in We&&t(2,g=We.use),"class"in We&&t(3,_=We.class),"style"in We&&t(4,v=We.style),"for"in We&&t(5,w=We.for),"floatAbove"in We&&t(0,x=We.floatAbove),"required"in We&&t(1,C=We.required),"wrapped"in We&&t(6,T=We.wrapped),"$$scope"in We&&t(21,p=We.$$scope)},i.$$.update=()=>{i.$$.dirty&786433&&M&&J!==x&&(t(19,J=x),M.float(x)),i.$$.dirty&1310722&&M&&Q!==C&&(t(20,Q=C),M.setRequired(C))},[x,C,g,_,v,w,T,k,O,V,c,W,l,le,Ee,me,Ae,pt,M,J,Q,p,u,rt,Pt]}class F1 extends fr{constructor(e){super(),dr(this,e,EA,CA,hr,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function IA(i){let e,t,n,l,u,p,o=[{class:t=Hn({[i[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":i[3],...i[5]})},{style:n=Object.entries(i[6]).map(E_).concat([i[2]]).join(" ")},i[8]],c={};for(let g=0;g<o.length;g+=1)c=Ni(c,o[g]);return{c(){e=Li("div"),this.h()},l(g){e=Pi(g,"DIV",{class:!0,style:!0}),Ti(e).forEach(Oe),this.h()},h(){Un(e,c)},m(g,_){wt(g,e,_),i[13](e),u||(p=[Gn(l=go.call(null,e,i[0])),Gn(i[7].call(null,e))],u=!0)},p(g,[_]){Un(e,c=cr(o,[_&42&&t!==(t=Hn({[g[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":g[3],...g[5]}))&&{class:t},_&68&&n!==(n=Object.entries(g[6]).map(E_).concat([g[2]]).join(" "))&&{style:n},_&256&&g[8]])),l&&Zr(l.update)&&_&1&&l.update.call(null,g[0])},i:Co,o:Co,d(g){g&&Oe(e),i[13](null),u=!1,bo(p)}}}const E_=([i,e])=>`${i}: ${e};`;function TA(i,e,t){const n=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let l=On(e,n);const u=io(to());let{use:p=[]}=e,{class:o=""}=e,{style:c=""}=e,{active:g=!1}=e,_,v,w={},x={};ws(()=>(v=new B8({addClass:T,removeClass:k,hasClass:C,setStyle:M,registerEventHandler:(Z,ie)=>J().addEventListener(Z,ie),deregisterEventHandler:(Z,ie)=>J().removeEventListener(Z,ie)}),v.init(),()=>{v.destroy()}));function C(Z){return Z in w?w[Z]:J().classList.contains(Z)}function T(Z){w[Z]||t(5,w[Z]=!0,w)}function k(Z){(!(Z in w)||w[Z])&&t(5,w[Z]=!1,w)}function M(Z,ie){x[Z]!=ie&&(ie===""||ie==null?(delete x[Z],t(6,x)):t(6,x[Z]=ie,x))}function O(){v.activate()}function V(){v.deactivate()}function W(Z){v.setRippleCenter(Z)}function J(){return _}function Q(Z){pn[Z?"unshift":"push"](()=>{_=Z,t(4,_)})}return i.$$set=Z=>{e=Ni(Ni({},e),$r(Z)),t(8,l=On(e,n)),"use"in Z&&t(0,p=Z.use),"class"in Z&&t(1,o=Z.class),"style"in Z&&t(2,c=Z.style),"active"in Z&&t(3,g=Z.active)},[p,o,c,g,_,w,x,u,l,O,V,W,J,Q]}class z4 extends fr{constructor(e){super(),dr(this,e,TA,IA,hr,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function I_(i){let e,t,n;const l=i[14].default,u=nr(l,i,i[13],null);return{c(){e=Li("div"),u&&u.c(),this.h()},l(p){e=Pi(p,"DIV",{class:!0,style:!0});var o=Ti(e);u&&u.l(o),o.forEach(Oe),this.h()},h(){hi(e,"class","mdc-notched-outline__notch"),hi(e,"style",t=Object.entries(i[7]).map(T_).join(" "))},m(p,o){wt(p,e,o),u&&u.m(e,null),n=!0},p(p,o){u&&u.p&&(!n||o&8192)&&rr(u,l,p,p[13],n?sr(l,p[13],o,null):or(p[13]),null),(!n||o&128&&t!==(t=Object.entries(p[7]).map(T_).join(" ")))&&hi(e,"style",t)},i(p){n||(tt(u,p),n=!0)},o(p){ct(u,p),n=!1},d(p){p&&Oe(e),u&&u.d(p)}}}function LA(i){let e,t,n,l,u,p,o,c,g,_,v=!i[3]&&I_(i),w=[{class:p=Hn({[i[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":i[2],"mdc-notched-outline--no-label":i[3],...i[6]})},i[9]],x={};for(let C=0;C<w.length;C+=1)x=Ni(x,w[C]);return{c(){e=Li("div"),t=Li("div"),n=$i(),v&&v.c(),l=$i(),u=Li("div"),this.h()},l(C){e=Pi(C,"DIV",{class:!0});var T=Ti(e);t=Pi(T,"DIV",{class:!0}),Ti(t).forEach(Oe),n=en(T),v&&v.l(T),l=en(T),u=Pi(T,"DIV",{class:!0}),Ti(u).forEach(Oe),T.forEach(Oe),this.h()},h(){hi(t,"class","mdc-notched-outline__leading"),hi(u,"class","mdc-notched-outline__trailing"),Un(e,x)},m(C,T){wt(C,e,T),Xi(e,t),Xi(e,n),v&&v.m(e,null),Xi(e,l),Xi(e,u),i[15](e),c=!0,g||(_=[Gn(o=go.call(null,e,i[0])),Gn(i[8].call(null,e)),Vn(e,"SMUIFloatingLabel:mount",i[16]),Vn(e,"SMUIFloatingLabel:unmount",i[17])],g=!0)},p(C,[T]){C[3]?v&&(Sr(),ct(v,1,1,()=>{v=null}),Ar()):v?(v.p(C,T),T&8&&tt(v,1)):(v=I_(C),v.c(),tt(v,1),v.m(e,l)),Un(e,x=cr(w,[(!c||T&78&&p!==(p=Hn({[C[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":C[2],"mdc-notched-outline--no-label":C[3],...C[6]})))&&{class:p},T&512&&C[9]])),o&&Zr(o.update)&&T&1&&o.update.call(null,C[0])},i(C){c||(tt(v),c=!0)},o(C){ct(v),c=!1},d(C){C&&Oe(e),v&&v.d(),i[15](null),g=!1,bo(_)}}}const T_=([i,e])=>`${i}: ${e};`;function PA(i,e,t){const n=["use","class","notched","noLabel","notch","closeNotch","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{notched:_=!1}=e,{noLabel:v=!1}=e,w,x,C,T={},k={};ws(()=>(x=new J8({addClass:M,removeClass:O,setNotchWidthProperty:le=>V("width",le+"px"),removeNotchWidthProperty:()=>W("width")}),x.init(),()=>{x.destroy()}));function M(le){T[le]||t(6,T[le]=!0,T)}function O(le){(!(le in T)||T[le])&&t(6,T[le]=!1,T)}function V(le,Ee){k[le]!=Ee&&(Ee===""||Ee==null?(delete k[le],t(7,k)):t(7,k[le]=Ee,k))}function W(le){le in k&&(delete k[le],t(7,k))}function J(le){x.notch(le)}function Q(){x.closeNotch()}function Z(){return w}function ie(le){pn[le?"unshift":"push"](()=>{w=le,t(5,w)})}const Se=le=>t(4,C=le.detail),xe=()=>t(4,C=void 0);return i.$$set=le=>{e=Ni(Ni({},e),$r(le)),t(9,l=On(e,n)),"use"in le&&t(0,c=le.use),"class"in le&&t(1,g=le.class),"notched"in le&&t(2,_=le.notched),"noLabel"in le&&t(3,v=le.noLabel),"$$scope"in le&&t(13,p=le.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&(C?(C.addStyle("transition-duration","0s"),M("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{C&&C.removeStyle("transition-duration")})):O("mdc-notched-outline--upgraded"))},[c,g,_,v,C,w,T,k,o,l,J,Q,Z,p,u,ie,Se,xe]}class N4 extends fr{constructor(e){super(),dr(this,e,PA,LA,hr,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function MA(i){let e;return{c(){e=gn(i[8])},l(t){e=yn(t,i[8])},m(t,n){wt(t,e,n)},p(t,n){n&256&&bs(e,t[8])},i:Co,o:Co,d(t){t&&Oe(e)}}}function DA(i){let e;const t=i[13].default,n=nr(t,i,i[12],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&4096)&&rr(n,t,l,l[12],e?sr(t,l[12],u,null):or(l[12]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function OA(i){let e,t,n,l,u,p,o,c,g;const _=[DA,MA],v=[];function w(T,k){return T[8]==null?0:1}t=w(i),n=v[t]=_[t](i);let x=[{class:l=Hn({[i[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":i[4],"mdc-select-helper-text--validation-msg-persistent":i[3],...i[6]})},{"aria-hidden":u=i[3]?void 0:"true"},{id:i[2]},i[7],i[10]],C={};for(let T=0;T<x.length;T+=1)C=Ni(C,x[T]);return{c(){e=Li("div"),n.c(),this.h()},l(T){e=Pi(T,"DIV",{class:!0,"aria-hidden":!0,id:!0});var k=Ti(e);n.l(k),k.forEach(Oe),this.h()},h(){Un(e,C)},m(T,k){wt(T,e,k),v[t].m(e,null),i[14](e),o=!0,c||(g=[Gn(p=go.call(null,e,i[0])),Gn(i[9].call(null,e))],c=!0)},p(T,[k]){let M=t;t=w(T),t===M?v[t].p(T,k):(Sr(),ct(v[M],1,1,()=>{v[M]=null}),Ar(),n=v[t],n?n.p(T,k):(n=v[t]=_[t](T),n.c()),tt(n,1),n.m(e,null)),Un(e,C=cr(x,[(!o||k&90&&l!==(l=Hn({[T[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":T[4],"mdc-select-helper-text--validation-msg-persistent":T[3],...T[6]})))&&{class:l},(!o||k&8&&u!==(u=T[3]?void 0:"true"))&&{"aria-hidden":u},(!o||k&4)&&{id:T[2]},k&128&&T[7],k&1024&&T[10]])),p&&Zr(p.update)&&k&1&&p.update.call(null,T[0])},i(T){o||(tt(n),o=!0)},o(T){ct(n),o=!1},d(T){T&&Oe(e),v[t].d(),i[14](null),c=!1,bo(g)}}}let FA=0;function RA(i,e,t){const n=["use","class","id","persistent","validationMsg","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{id:_="SMUI-select-helper-text-"+FA++}=e,{persistent:v=!1}=e,{validationMsg:w=!1}=e,x,C,T={},k={},M;ws(()=>(C=new $8({addClass:V,removeClass:W,hasClass:O,getAttr:J,setAttr:Q,removeAttr:Z,setContent:xe=>{t(8,M=xe)}}),_.startsWith("SMUI-select-helper-text-")&&Qr(ie(),"SMUISelectHelperText:id",_),Qr(ie(),"SMUISelectHelperText:mount",C),C.init(),()=>{Qr(ie(),"SMUISelectHelperText:unmount",C),C.destroy()}));function O(xe){return xe in T?T[xe]:ie().classList.contains(xe)}function V(xe){T[xe]||t(6,T[xe]=!0,T)}function W(xe){(!(xe in T)||T[xe])&&t(6,T[xe]=!1,T)}function J(xe){var le;return xe in k?(le=k[xe])!==null&&le!==void 0?le:null:ie().getAttribute(xe)}function Q(xe,le){k[xe]!==le&&t(7,k[xe]=le,k)}function Z(xe){(!(xe in k)||k[xe]!=null)&&t(7,k[xe]=void 0,k)}function ie(){return x}function Se(xe){pn[xe?"unshift":"push"](()=>{x=xe,t(5,x)})}return i.$$set=xe=>{e=Ni(Ni({},e),$r(xe)),t(10,l=On(e,n)),"use"in xe&&t(0,c=xe.use),"class"in xe&&t(1,g=xe.class),"id"in xe&&t(2,_=xe.id),"persistent"in xe&&t(3,v=xe.persistent),"validationMsg"in xe&&t(4,w=xe.validationMsg),"$$scope"in xe&&t(12,p=xe.$$scope)},[c,g,_,v,w,x,T,k,M,o,l,ie,p,u,Se]}class BA extends fr{constructor(e){super(),dr(this,e,RA,OA,hr,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const zA=i=>({}),L_=i=>({}),NA=i=>({}),P_=i=>({}),jA=i=>({}),M_=i=>({}),UA=i=>({}),D_=i=>({});function O_(i){let e,t=[{type:"hidden"},{required:i[10]},{disabled:i[6]},{value:i[0]},Jr(i[53],"input$")],n={};for(let l=0;l<t.length;l+=1)n=Ni(n,t[l]);return{c(){e=Li("input"),this.h()},l(l){e=Pi(l,"INPUT",{type:!0}),this.h()},h(){Un(e,n)},m(l,u){wt(l,e,u),e.autofocus&&e.focus()},p(l,u){Un(e,n=cr(t,[{type:"hidden"},u[0]&1024&&{required:l[10]},u[0]&64&&{disabled:l[6]},u[0]&1&&{value:l[0]},u[1]&4194304&&Jr(l[53],"input$")]))},d(l){l&&Oe(e)}}}function F_(i){let e;return{c(){e=Li("span"),this.h()},l(t){e=Pi(t,"SPAN",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","mdc-select__ripple")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function R_(i){let e,t;const n=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},Jr(i[53],"label$")];let l={$$slots:{default:[VA]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new F1({props:l}),i[66](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[0]&3072|p[1]&4198400?cr(n,[p[0]&2048&&{id:u[11]+"-smui-label"},p[1]&4096&&{floatAbove:u[43]!==""},p[0]&1024&&{required:u[10]},p[1]&4194304&&fo(Jr(u[53],"label$"))]):{};p[0]&512|p[2]&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[66](null),Si(e,u)}}}function VA(i){let e=(i[9]==null?"":i[9])+"",t,n;const l=i[63].label,u=nr(l,i,i[89],D_);return{c(){t=gn(e),u&&u.c()},l(p){t=yn(p,e),u&&u.l(p)},m(p,o){wt(p,t,o),u&&u.m(p,o),n=!0},p(p,o){(!n||o[0]&512)&&e!==(e=(p[9]==null?"":p[9])+"")&&bs(t,e),u&&u.p&&(!n||o[2]&134217728)&&rr(u,l,p,p[89],n?sr(l,p[89],o,UA):or(p[89]),D_)},i(p){n||(tt(u,p),n=!0)},o(p){ct(u,p),n=!1},d(p){p&&Oe(t),u&&u.d(p)}}}function B_(i){let e,t;const n=[{noLabel:i[8]||i[9]==null&&!i[52].label},Jr(i[53],"outline$")];let l={$$slots:{default:[HA]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new N4({props:l}),i[68](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[0]&768|p[1]&6291456?cr(n,[p[0]&768|p[1]&2097152&&{noLabel:u[8]||u[9]==null&&!u[52].label},p[1]&4194304&&fo(Jr(u[53],"outline$"))]):{};p[0]&3840|p[1]&6296064|p[2]&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[68](null),Si(e,u)}}}function z_(i){let e,t;const n=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},Jr(i[53],"label$")];let l={$$slots:{default:[qA]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new F1({props:l}),i[67](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[0]&3072|p[1]&4198400?cr(n,[p[0]&2048&&{id:u[11]+"-smui-label"},p[1]&4096&&{floatAbove:u[43]!==""},p[0]&1024&&{required:u[10]},p[1]&4194304&&fo(Jr(u[53],"label$"))]):{};p[0]&512|p[2]&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[67](null),Si(e,u)}}}function qA(i){let e=(i[9]==null?"":i[9])+"",t,n;const l=i[63].label,u=nr(l,i,i[89],M_);return{c(){t=gn(e),u&&u.c()},l(p){t=yn(p,e),u&&u.l(p)},m(p,o){wt(p,t,o),u&&u.m(p,o),n=!0},p(p,o){(!n||o[0]&512)&&e!==(e=(p[9]==null?"":p[9])+"")&&bs(t,e),u&&u.p&&(!n||o[2]&134217728)&&rr(u,l,p,p[89],n?sr(l,p[89],o,jA):or(p[89]),M_)},i(p){n||(tt(u,p),n=!0)},o(p){ct(u,p),n=!1},d(p){p&&Oe(t),u&&u.d(p)}}}function HA(i){let e,t,n=!i[8]&&(i[9]!=null||i[52].label)&&z_(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,u){!l[8]&&(l[9]!=null||l[52].label)?n?(n.p(l,u),u[0]&768|u[1]&2097152&&tt(n,1)):(n=z_(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function N_(i){let e,t;const n=[Jr(i[53],"ripple$")];let l={};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new z4({props:l}),i[70](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[1]&4194304?cr(n,[fo(Jr(u[53],"ripple$"))]):{};e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[70](null),Si(e,u)}}}function GA(i){let e;const t=i[63].default,n=nr(t,i,i[89],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&134217728)&&rr(n,t,l,l[89],e?sr(t,l[89],u,null):or(l[89]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function WA(i){let e,t,n;const l=[{role:"listbox"},{wrapFocus:i[36]},Jr(i[53],"list$")];function u(o){i[76](o)}let p={$$slots:{default:[GA]},$$scope:{ctx:i}};for(let o=0;o<l.length;o+=1)p=Ni(p,l[o]);return i[24]!==void 0&&(p.selectedIndex=i[24]),e=new dA({props:p}),pn.push(()=>To(e,"selectedIndex",u)),e.$on("SMUIList:mount",i[77]),{c(){xi(e.$$.fragment)},l(o){Ci(e.$$.fragment,o)},m(o,c){Ai(e,o,c),n=!0},p(o,c){const g=c[1]&4194336?cr(l,[l[0],c[1]&32&&{wrapFocus:o[36]},c[1]&4194304&&fo(Jr(o[53],"list$"))]):{};c[2]&134217728&&(g.$$scope={dirty:c,ctx:o}),!t&&c[0]&16777216&&(t=!0,g.selectedIndex=o[24],Lo(()=>t=!1)),e.$set(g)},i(o){n||(tt(e.$$.fragment,o),n=!0)},o(o){ct(e.$$.fragment,o),n=!1},d(o){Si(e,o)}}}function j_(i){let e,t;const n=[Jr(i[53],"helperText$")];let l={$$slots:{default:[XA]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new BA({props:l}),e.$on("SMUISelectHelperText:id",i[86]),e.$on("SMUISelectHelperText:mount",i[87]),e.$on("SMUISelectHelperText:unmount",i[88]),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[1]&4194304?cr(n,[fo(Jr(u[53],"helperText$"))]):{};p[2]&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){Si(e,u)}}}function XA(i){let e;const t=i[63].helperText,n=nr(t,i,i[89],L_);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&134217728)&&rr(n,t,l,l[89],e?sr(t,l[89],u,zA):or(l[89]),L_)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function YA(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C,T,k,M,O,V,W,J,Q,Z,ie,Se,xe,le,Ee,me,Ae,pt,rt,Pt,We,be,Le,Ue,ce,Ie,de,ge=i[12]&&O_(i),Re=i[7]==="filled"&&F_(),Ze=i[7]!=="outlined"&&!i[8]&&(i[9]!=null||i[52].label)&&R_(i),ut=i[7]==="outlined"&&B_(i);const Xe=i[63].leadingIcon,$e=nr(Xe,i,i[89],P_);let Dt=[{id:v=i[11]+"-smui-selected-text"},{class:w=Hn({[i[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":x=i[11]+"-smui-label"},Jr(i[53],"selectedText$")],ni={};for(let $t=0;$t<Dt.length;$t+=1)ni=Ni(ni,Dt[$t]);let mt=[{class:T=Hn({[i[17]]:!0,"mdc-select__selected-text-container":!0})},Jr(i[53],"selectedTextContainer$")],At={};for(let $t=0;$t<mt.length;$t+=1)At=Ni(At,mt[$t]);let xt=[{class:Q=Hn({[i[21]]:!0,"mdc-select__dropdown-icon":!0})},Jr(i[53],"dropdownIcon$")],Qe={};for(let $t=0;$t<xt.length;$t+=1)Qe=Ni(Qe,xt[$t]);let Yt=i[7]!=="outlined"&&i[5]&&N_(i),si=[{class:Se=Hn({[i[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":xe=i[10]?"true":void 0},{"aria-disabled":le=i[6]?"true":void 0},{"aria-controls":i[31]},{"aria-describedby":i[31]},i[29],Jr(i[53],"anchor$")],Zt={};for(let $t=0;$t<si.length;$t+=1)Zt=Ni(Zt,si[$t]);const Ei=[{class:Hn({[i[22]]:!0,"mdc-select__menu":!0,...i[33]})},{fullWidth:!0},{anchor:!1},{anchorElement:i[34]},{anchorCorner:i[35]},Jr(i[53],"menu$")];function Qt($t){i[78]($t)}let Ot={$$slots:{default:[WA]},$$scope:{ctx:i}};for(let $t=0;$t<Ei.length;$t+=1)Ot=Ni(Ot,Ei[$t]);i[32]!==void 0&&(Ot.open=i[32]),Ae=new uA({props:Ot}),pn.push(()=>To(Ae,"open",Qt)),Ae.$on("SMUIMenu:selected",i[79]),Ae.$on("SMUIMenuSurface:closing",i[80]),Ae.$on("SMUIMenuSurface:closed",i[81]),Ae.$on("SMUIMenuSurface:opened",i[82]);let ai=[{class:rt=Hn({[i[3]]:!0,"mdc-select":!0,"mdc-select--required":i[10],"mdc-select--disabled":i[6],"mdc-select--filled":i[7]==="filled","mdc-select--outlined":i[7]==="outlined","smui-select--standard":i[7]==="standard","mdc-select--with-leading-icon":i[45](i[13])?i[52].leadingIcon:i[13],"mdc-select--no-label":i[8]||i[9]==null&&!i[52].label,"mdc-select--invalid":i[1],"mdc-select--activated":i[32],"mdc-data-table__pagination-rows-per-page-select":i[46]==="data-table:pagination",...i[26]})},{style:Pt=Object.entries(i[27]).map(U_).concat([i[4]]).join(" ")},ah(i[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Ji={};for(let $t=0;$t<ai.length;$t+=1)Ji=Ni(Ji,ai[$t]);let Ii=i[52].helperText&&j_(i);return{c(){e=Li("div"),ge&&ge.c(),t=$i(),n=Li("div"),Re&&Re.c(),l=$i(),Ze&&Ze.c(),u=$i(),ut&&ut.c(),p=$i(),$e&&$e.c(),o=$i(),c=Li("span"),g=Li("span"),_=gn(i[43]),M=$i(),O=Li("span"),V=rh("svg"),W=rh("polygon"),J=rh("polygon"),ie=$i(),Yt&&Yt.c(),me=$i(),xi(Ae.$$.fragment),Le=$i(),Ii&&Ii.c(),Ue=hn(),this.h()},l($t){e=Pi($t,"DIV",{class:!0,style:!0});var Me=Ti(e);ge&&ge.l(Me),t=en(Me),n=Pi(Me,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-describedby":!0});var ee=Ti(n);Re&&Re.l(ee),l=en(ee),Ze&&Ze.l(ee),u=en(ee),ut&&ut.l(ee),p=en(ee),$e&&$e.l(ee),o=en(ee),c=Pi(ee,"SPAN",{class:!0});var ae=Ti(c);g=Pi(ae,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var et=Ti(g);_=yn(et,i[43]),et.forEach(Oe),ae.forEach(Oe),M=en(ee),O=Pi(ee,"SPAN",{class:!0});var bt=Ti(O);V=oh(bt,"svg",{class:!0,viewBox:!0,focusable:!0});var Xt=Ti(V);W=oh(Xt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),Ti(W).forEach(Oe),J=oh(Xt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),Ti(J).forEach(Oe),Xt.forEach(Oe),bt.forEach(Oe),ie=en(ee),Yt&&Yt.l(ee),ee.forEach(Oe),me=en(Me),Ci(Ae.$$.fragment,Me),Me.forEach(Oe),Le=en($t),Ii&&Ii.l($t),Ue=hn(),this.h()},h(){Un(g,ni),Un(c,At),hi(W,"class","mdc-select__dropdown-icon-inactive"),hi(W,"stroke","none"),hi(W,"fill-rule","evenodd"),hi(W,"points","7 10 12 15 17 10"),hi(J,"class","mdc-select__dropdown-icon-active"),hi(J,"stroke","none"),hi(J,"fill-rule","evenodd"),hi(J,"points","7 15 12 10 17 15"),hi(V,"class","mdc-select__dropdown-icon-graphic"),hi(V,"viewBox","7 10 10 5"),hi(V,"focusable","false"),Un(O,Qe),Un(n,Zt),Un(e,Ji)},m($t,Me){wt($t,e,Me),ge&&ge.m(e,null),Xi(e,t),Xi(e,n),Re&&Re.m(n,null),Xi(n,l),Ze&&Ze.m(n,null),Xi(n,u),ut&&ut.m(n,null),Xi(n,p),$e&&$e.m(n,null),Xi(n,o),Xi(n,c),Xi(c,g),Xi(g,_),i[69](g),Xi(n,M),Xi(n,O),Xi(O,V),Xi(V,W),Xi(V,J),Xi(n,ie),Yt&&Yt.m(n,null),i[71](n),Xi(e,me),Ai(Ae,e,null),i[83](e),wt($t,Le,Me),Ii&&Ii.m($t,Me),wt($t,Ue,Me),ce=!0,Ie||(de=[Gn(C=go.call(null,g,i[18])),Gn(k=go.call(null,c,i[16])),Gn(Z=go.call(null,O,i[20])),Gn(Ee=go.call(null,n,i[14])),Vn(n,"focus",i[72]),Vn(n,"blur",i[73]),Vn(n,"click",i[74]),Vn(n,"keydown",i[75]),Vn(n,"focus",i[64]),Vn(n,"blur",i[65]),Gn(We=lh.call(null,e,{ripple:i[7]==="filled",unbounded:!1,addClass:i[49],removeClass:i[50],addStyle:i[51]})),Gn(oA.call(null,e,{addClass:i[49],removeClass:i[50]})),Gn(be=go.call(null,e,i[2])),Gn(i[44].call(null,e)),Vn(e,"SMUISelectLeadingIcon:mount",i[84]),Vn(e,"SMUISelectLeadingIcon:unmount",i[85])],Ie=!0)},p($t,Me){$t[12]?ge?ge.p($t,Me):(ge=O_($t),ge.c(),ge.m(e,t)):ge&&(ge.d(1),ge=null),$t[7]==="filled"?Re||(Re=F_(),Re.c(),Re.m(n,l)):Re&&(Re.d(1),Re=null),$t[7]!=="outlined"&&!$t[8]&&($t[9]!=null||$t[52].label)?Ze?(Ze.p($t,Me),Me[0]&896|Me[1]&2097152&&tt(Ze,1)):(Ze=R_($t),Ze.c(),tt(Ze,1),Ze.m(n,u)):Ze&&(Sr(),ct(Ze,1,1,()=>{Ze=null}),Ar()),$t[7]==="outlined"?ut?(ut.p($t,Me),Me[0]&128&&tt(ut,1)):(ut=B_($t),ut.c(),tt(ut,1),ut.m(n,p)):ut&&(Sr(),ct(ut,1,1,()=>{ut=null}),Ar()),$e&&$e.p&&(!ce||Me[2]&134217728)&&rr($e,Xe,$t,$t[89],ce?sr(Xe,$t[89],Me,NA):or($t[89]),P_),(!ce||Me[1]&4096)&&bs(_,$t[43]),Un(g,ni=cr(Dt,[(!ce||Me[0]&2048&&v!==(v=$t[11]+"-smui-selected-text"))&&{id:v},(!ce||Me[0]&524288&&w!==(w=Hn({[$t[19]]:!0,"mdc-select__selected-text":!0})))&&{class:w},{role:"button"},{"aria-haspopup":"listbox"},(!ce||Me[0]&2048&&x!==(x=$t[11]+"-smui-label"))&&{"aria-labelledby":x},Me[1]&4194304&&Jr($t[53],"selectedText$")])),C&&Zr(C.update)&&Me[0]&262144&&C.update.call(null,$t[18]),Un(c,At=cr(mt,[(!ce||Me[0]&131072&&T!==(T=Hn({[$t[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:T},Me[1]&4194304&&Jr($t[53],"selectedTextContainer$")])),k&&Zr(k.update)&&Me[0]&65536&&k.update.call(null,$t[16]),Un(O,Qe=cr(xt,[(!ce||Me[0]&2097152&&Q!==(Q=Hn({[$t[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:Q},Me[1]&4194304&&Jr($t[53],"dropdownIcon$")])),Z&&Zr(Z.update)&&Me[0]&1048576&&Z.update.call(null,$t[20]),$t[7]!=="outlined"&&$t[5]?Yt?(Yt.p($t,Me),Me[0]&160&&tt(Yt,1)):(Yt=N_($t),Yt.c(),tt(Yt,1),Yt.m(n,null)):Yt&&(Sr(),ct(Yt,1,1,()=>{Yt=null}),Ar()),Un(n,Zt=cr(si,[(!ce||Me[0]&32768&&Se!==(Se=Hn({[$t[15]]:!0,"mdc-select__anchor":!0})))&&{class:Se},(!ce||Me[0]&1024&&xe!==(xe=$t[10]?"true":void 0))&&{"aria-required":xe},(!ce||Me[0]&64&&le!==(le=$t[6]?"true":void 0))&&{"aria-disabled":le},(!ce||Me[1]&1)&&{"aria-controls":$t[31]},(!ce||Me[1]&1)&&{"aria-describedby":$t[31]},Me[0]&536870912&&$t[29],Me[1]&4194304&&Jr($t[53],"anchor$")])),Ee&&Zr(Ee.update)&&Me[0]&16384&&Ee.update.call(null,$t[14]);const ee=Me[0]&4194304|Me[1]&4194332?cr(Ei,[Me[0]&4194304|Me[1]&4&&{class:Hn({[$t[22]]:!0,"mdc-select__menu":!0,...$t[33]})},Ei[1],Ei[2],Me[1]&8&&{anchorElement:$t[34]},Me[1]&16&&{anchorCorner:$t[35]},Me[1]&4194304&&fo(Jr($t[53],"menu$"))]):{};Me[0]&16777216|Me[1]&4194400|Me[2]&134217728&&(ee.$$scope={dirty:Me,ctx:$t}),!pt&&Me[1]&2&&(pt=!0,ee.open=$t[32],Lo(()=>pt=!1)),Ae.$set(ee),Un(e,Ji=cr(ai,[(!ce||Me[0]&67119050|Me[1]&2097154&&rt!==(rt=Hn({[$t[3]]:!0,"mdc-select":!0,"mdc-select--required":$t[10],"mdc-select--disabled":$t[6],"mdc-select--filled":$t[7]==="filled","mdc-select--outlined":$t[7]==="outlined","smui-select--standard":$t[7]==="standard","mdc-select--with-leading-icon":$t[45]($t[13])?$t[52].leadingIcon:$t[13],"mdc-select--no-label":$t[8]||$t[9]==null&&!$t[52].label,"mdc-select--invalid":$t[1],"mdc-select--activated":$t[32],"mdc-data-table__pagination-rows-per-page-select":$t[46]==="data-table:pagination",...$t[26]})))&&{class:rt},(!ce||Me[0]&134217744&&Pt!==(Pt=Object.entries($t[27]).map(U_).concat([$t[4]]).join(" ")))&&{style:Pt},Me[1]&4194304&&ah($t[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),We&&Zr(We.update)&&Me[0]&128&&We.update.call(null,{ripple:$t[7]==="filled",unbounded:!1,addClass:$t[49],removeClass:$t[50],addStyle:$t[51]}),be&&Zr(be.update)&&Me[0]&4&&be.update.call(null,$t[2]),$t[52].helperText?Ii?(Ii.p($t,Me),Me[1]&2097152&&tt(Ii,1)):(Ii=j_($t),Ii.c(),tt(Ii,1),Ii.m(Ue.parentNode,Ue)):Ii&&(Sr(),ct(Ii,1,1,()=>{Ii=null}),Ar())},i($t){ce||(tt(Ze),tt(ut),tt($e,$t),tt(Yt),tt(Ae.$$.fragment,$t),tt(Ii),ce=!0)},o($t){ct(Ze),ct(ut),ct($e,$t),ct(Yt),ct(Ae.$$.fragment,$t),ct(Ii),ce=!1},d($t){$t&&Oe(e),ge&&ge.d(),Re&&Re.d(),Ze&&Ze.d(),ut&&ut.d(),$e&&$e.d($t),i[69](null),Yt&&Yt.d(),i[71](null),Si(Ae),i[83](null),$t&&Oe(Le),Ii&&Ii.d($t),$t&&Oe(Ue),Ie=!1,bo(de)}}}let ZA=0;function KA(i){const e=i.currentTarget.getBoundingClientRect();return(JA(i)?i.touches[0].clientX:i.clientX)-e.left}function JA(i){return"touches"in i}const U_=([i,e])=>`${i}: ${e};`;function QA(i,e,t){const n=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let l=On(e,n),u,p,{$$slots:o={},$$scope:c}=e;const g=Sg(o),_=io(to());let v=()=>{};function w(St){return St===v}let{use:x=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:k=!0}=e,{disabled:M=!1}=e,{variant:O="standard"}=e,{noLabel:V=!1}=e,{label:W=void 0}=e,{value:J=""}=e,{key:Q=St=>St}=e,{dirty:Z=!1}=e,{invalid:ie=v}=e,{updateInvalid:Se=w(ie)}=e;const xe=w(ie);w(ie)&&(ie=!1);let{required:le=!1}=e,{inputId:Ee="SMUI-select-"+ZA++}=e,{hiddenInput:me=!1}=e,{withLeadingIcon:Ae=v}=e,{anchor$use:pt=[]}=e,{anchor$class:rt=""}=e,{selectedTextContainer$use:Pt=[]}=e,{selectedTextContainer$class:We=""}=e,{selectedText$use:be=[]}=e,{selectedText$class:Le=""}=e,{dropdownIcon$use:Ue=[]}=e,{dropdownIcon$class:ce=""}=e,{menu$class:Ie=""}=e,de,ge,Re={},Ze={},ut,Xe={},$e,Dt=-1,ni,mt=es("SMUI:addLayoutListener"),At,xt=!1,Qe={},Yt,si,Zt=!1,Ei,Qt=es("SMUI:select:context"),Ot,ai,Ji,Ii,$t;Fo("SMUI:list:role",""),Fo("SMUI:list:nav",!1);const Me=Sl("");Vo(i,Me,St=>t(43,u=St)),Fo("SMUI:select:selectedText",Me);const ee=Sl(J);Vo(i,ee,St=>t(91,p=St)),Fo("SMUI:select:value",ee);let ae=Dt;mt&&(At=mt(Hr)),ws(()=>(t(23,ge=new Q8({setSelectedText:St=>{Ea(Me,u=St,u)},isSelectAnchorFocused:()=>document.activeElement===ut,getSelectAnchorAttr:bn,setSelectAnchorAttr:Gi,removeSelectAnchorAttr:an,addMenuClass:xn,removeMenuClass:qn,openMenu:()=>{t(32,xt=!0)},closeMenu:()=>{t(32,xt=!1)},getAnchorElement:()=>ut,setMenuAnchorElement:St=>{t(34,Yt=St)},setMenuAnchorCorner:St=>{t(35,si=St)},setMenuWrapFocus:St=>{t(36,Zt=St)},getSelectedIndex:()=>Dt,setSelectedIndex:St=>{t(62,ae=St),t(24,Dt=St),t(0,J=Kn()[Dt])},focusMenuItemAtIndex:St=>{Ei.focusItemAtIndex(St)},getMenuItemCount:()=>Ei.items.length,getMenuItemValues:()=>Kn().map(Q),getMenuItemTextAtIndex:St=>Ei.getPrimaryTextAtIndex(St),isTypeaheadInProgress:()=>Ei.typeaheadInProgress,typeaheadMatchItem:(St,Bn)=>Ei.typeaheadMatchItem(St,Bn),addClass:bt,removeClass:Xt,hasClass:et,setRippleCenter:St=>Ii&&Ii.setRippleCenter(St),activateBottomLine:()=>Ii&&Ii.activate(),deactivateBottomLine:()=>Ii&&Ii.deactivate(),notifyChange:St=>{t(54,Z=!0),Se&&t(1,ie=!ge.isValid()),Qr(Yn(),"SMUISelect:change",{value:J,index:Dt},void 0,!0)},hasOutline:()=>!!$t,notchOutline:St=>$t&&$t.notch(St),closeOutline:()=>$t&&$t.closeNotch(),hasLabel:()=>!!Ji,floatLabel:St=>Ji&&Ji.float(St),getLabelWidth:()=>Ji?Ji.getWidth():0,setLabelRequired:St=>Ji&&Ji.setRequired(St)},{get helperText(){return ai},get leadingIcon(){return Ot}})),t(24,Dt=Kn().indexOf(J)),ge.init(),yo(xe),()=>{ge.destroy()})),sc(()=>{At&&At()});function et(St){return St in Re?Re[St]:Yn().classList.contains(St)}function bt(St){Re[St]||t(26,Re[St]=!0,Re)}function Xt(St){(!(St in Re)||Re[St])&&t(26,Re[St]=!1,Re)}function fi(St,Bn){Ze[St]!=Bn&&(Bn===""||Bn==null?(delete Ze[St],t(27,Ze)):t(27,Ze[St]=Bn,Ze))}function xn(St){Qe[St]||t(33,Qe[St]=!0,Qe)}function qn(St){(!(St in Qe)||Qe[St])&&t(33,Qe[St]=!1,Qe)}function bn(St){var Bn;return St in Xe?(Bn=Xe[St])!==null&&Bn!==void 0?Bn:null:Yn().getAttribute(St)}function Gi(St,Bn){Xe[St]!==Bn&&t(29,Xe[St]=Bn,Xe)}function an(St){(!(St in Xe)||Xe[St]!=null)&&t(29,Xe[St]=void 0,Xe)}function Kn(){return Ei.getOrderedList().map(St=>St.getValue())}function mr(){return ge.getUseDefaultValidation()}function yo(St){ge.setUseDefaultValidation(St)}function ar(){ut.focus()}function Hr(){ge.layout()}function Yn(){return de}function Ur(St){Jf.call(this,i,St)}function co(St){Jf.call(this,i,St)}function Jn(St){pn[St?"unshift":"push"](()=>{Ji=St,t(40,Ji)})}function br(St){pn[St?"unshift":"push"](()=>{Ji=St,t(40,Ji)})}function Eo(St){pn[St?"unshift":"push"](()=>{$t=St,t(42,$t)})}function un(St){pn[St?"unshift":"push"](()=>{$e=St,t(30,$e)})}function He(St){pn[St?"unshift":"push"](()=>{Ii=St,t(41,Ii)})}function Ho(St){pn[St?"unshift":"push"](()=>{ut=St,t(28,ut)})}const Do=()=>ge&&ge.handleFocus(),wo=()=>ge&&ge.handleBlur(),Pe=St=>{ut.focus(),ge&&ge.handleClick(KA(St))},Te=St=>ge&&ge.handleKeydown(St);function qe(St){Dt=St,t(24,Dt)}const ft=St=>t(37,Ei=St.detail);function _t(St){xt=St,t(32,xt)}const Ut=St=>ge&&ge.handleMenuItemAction(St.detail.index),Ge=()=>ge&&ge.handleMenuClosing(),Ht=()=>ge&&ge.handleMenuClosed(),zt=()=>ge&&ge.handleMenuOpened();function ti(St){pn[St?"unshift":"push"](()=>{de=St,t(25,de)})}const vt=St=>t(38,Ot=St.detail),ji=()=>t(38,Ot=void 0),Di=St=>t(31,ni=St.detail),In=St=>t(39,ai=St.detail),kn=()=>{t(31,ni=void 0),t(39,ai=void 0)};return i.$$set=St=>{e=Ni(Ni({},e),$r(St)),t(53,l=On(e,n)),"use"in St&&t(2,x=St.use),"class"in St&&t(3,C=St.class),"style"in St&&t(4,T=St.style),"ripple"in St&&t(5,k=St.ripple),"disabled"in St&&t(6,M=St.disabled),"variant"in St&&t(7,O=St.variant),"noLabel"in St&&t(8,V=St.noLabel),"label"in St&&t(9,W=St.label),"value"in St&&t(0,J=St.value),"key"in St&&t(55,Q=St.key),"dirty"in St&&t(54,Z=St.dirty),"invalid"in St&&t(1,ie=St.invalid),"updateInvalid"in St&&t(56,Se=St.updateInvalid),"required"in St&&t(10,le=St.required),"inputId"in St&&t(11,Ee=St.inputId),"hiddenInput"in St&&t(12,me=St.hiddenInput),"withLeadingIcon"in St&&t(13,Ae=St.withLeadingIcon),"anchor$use"in St&&t(14,pt=St.anchor$use),"anchor$class"in St&&t(15,rt=St.anchor$class),"selectedTextContainer$use"in St&&t(16,Pt=St.selectedTextContainer$use),"selectedTextContainer$class"in St&&t(17,We=St.selectedTextContainer$class),"selectedText$use"in St&&t(18,be=St.selectedText$use),"selectedText$class"in St&&t(19,Le=St.selectedText$class),"dropdownIcon$use"in St&&t(20,Ue=St.dropdownIcon$use),"dropdownIcon$class"in St&&t(21,ce=St.dropdownIcon$class),"menu$class"in St&&t(22,Ie=St.menu$class),"$$scope"in St&&t(89,c=St.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&25165825|i.$$.dirty[2]&1&&ae!==Dt)if(t(62,ae=Dt),ge)ge.setSelectedIndex(Dt,!1,!0);else{const St=Kn();J!==St[Dt]&&t(0,J=St[Dt])}i.$$.dirty[0]&1&&Ea(ee,p=J,p),i.$$.dirty[0]&8388609|i.$$.dirty[1]&16777216&&ge&&ge.getValue()!==Q(J)&&ge.setValue(Q(J)),i.$$.dirty[0]&8388672&&ge&&ge.getDisabled()!==M&&ge.setDisabled(M),i.$$.dirty[0]&8388610|i.$$.dirty[1]&41943040&&ge&&Z&&ge.isValid()!==!ie&&(Se?t(1,ie=!ge.isValid()):ge.setValid(!ie)),i.$$.dirty[0]&8389632&&ge&&ge.getRequired()!==le&&ge.setRequired(le)},[J,ie,x,C,T,k,M,O,V,W,le,Ee,me,Ae,pt,rt,Pt,We,be,Le,Ue,ce,Ie,ge,Dt,de,Re,Ze,ut,Xe,$e,ni,xt,Qe,Yt,si,Zt,Ei,Ot,ai,Ji,Ii,$t,u,_,w,Qt,Me,ee,bt,Xt,fi,g,l,Z,Q,Se,mr,yo,ar,Hr,Yn,ae,o,Ur,co,Jn,br,Eo,un,He,Ho,Do,wo,Pe,Te,qe,ft,_t,Ut,Ge,Ht,zt,ti,vt,ji,Di,In,kn,c]}class z0 extends fr{constructor(e){super(),dr(this,e,QA,YA,hr,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function $A(i){let e;const t=i[11].default,n=nr(t,i,i[13],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&8192)&&rr(n,t,l,l[13],e?sr(t,l[13],u,null):or(l[13]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function eS(i){let e,t;const n=[{use:i[3]},{"data-value":i[0]},{value:i[0]},{selected:i[2]},i[6]];let l={$$slots:{default:[$A]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new xA({props:l}),i[12](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,[p]){const o=p&77?cr(n,[p&8&&{use:u[3]},p&1&&{"data-value":u[0]},p&1&&{value:u[0]},p&4&&{selected:u[2]},p&64&&fo(u[6])]):{};p&8192&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[12](null),Si(e,u)}}}function tS(i,e,t){let n,l;const u=["use","class","value","getElement"];let p=On(e,u),o,c,{$$slots:g={},$$scope:_}=e;const v=io(to());let{use:w=[]}=e;const x="";let{value:C=""}=e,T;const k=es("SMUI:select:selectedText");Vo(i,k,J=>t(14,o=J));const M=es("SMUI:select:value");Vo(i,M,J=>t(10,c=J)),Fo("SMUI:list:item:role","option"),ws(O),sc(O);function O(){l&&T&&Ea(k,o=T.getPrimaryText(),o)}function V(){return T.getElement()}function W(J){pn[J?"unshift":"push"](()=>{T=J,t(1,T)})}return i.$$set=J=>{e=Ni(Ni({},e),$r(J)),t(6,p=On(e,u)),"use"in J&&t(7,w=J.use),"value"in J&&t(0,C=J.value),"$$scope"in J&&t(13,_=J.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&t(3,n=[v,...w]),i.$$.dirty&1025&&t(2,l=C!=null&&C!==""&&c===C)},[C,T,l,n,k,M,p,w,x,V,c,g,W,_]}class iS extends fr{constructor(e){super(),dr(this,e,tS,eS,hr,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const sd=iS;function nS(i){let e;return{c(){e=gn(i[7])},l(t){e=yn(t,i[7])},m(t,n){wt(t,e,n)},p(t,n){n&128&&bs(e,t[7])},i:Co,o:Co,d(t){t&&Oe(e)}}}function rS(i){let e;const t=i[12].default,n=nr(t,i,i[11],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&2048)&&rr(n,t,l,l[11],e?sr(t,l[11],u,null):or(l[11]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function oS(i){let e,t,n,l,u,p,o,c,g,_;const v=[rS,nS],w=[];function x(k,M){return k[7]==null?0:1}t=x(i),n=w[t]=v[t](i);let C=[{class:l=Hn({[i[1]]:!0,"mdc-select__icon":!0})},{tabindex:i[3]},{"aria-hidden":u=i[3]===-1?"true":"false"},{"aria-disabled":p=i[2]==="button"?i[4]?"true":"false":void 0},{role:i[2]},i[6],i[9]],T={};for(let k=0;k<C.length;k+=1)T=Ni(T,C[k]);return{c(){e=Li("i"),n.c(),this.h()},l(k){e=Pi(k,"I",{class:!0,tabindex:!0,"aria-hidden":!0,"aria-disabled":!0,role:!0});var M=Ti(e);n.l(M),M.forEach(Oe),this.h()},h(){Un(e,T)},m(k,M){wt(k,e,M),w[t].m(e,null),i[13](e),c=!0,g||(_=[Gn(o=go.call(null,e,i[0])),Gn(i[8].call(null,e))],g=!0)},p(k,[M]){let O=t;t=x(k),t===O?w[t].p(k,M):(Sr(),ct(w[O],1,1,()=>{w[O]=null}),Ar(),n=w[t],n?n.p(k,M):(n=w[t]=v[t](k),n.c()),tt(n,1),n.m(e,null)),Un(e,T=cr(C,[(!c||M&2&&l!==(l=Hn({[k[1]]:!0,"mdc-select__icon":!0})))&&{class:l},(!c||M&8)&&{tabindex:k[3]},(!c||M&8&&u!==(u=k[3]===-1?"true":"false"))&&{"aria-hidden":u},(!c||M&20&&p!==(p=k[2]==="button"?k[4]?"true":"false":void 0))&&{"aria-disabled":p},(!c||M&4)&&{role:k[2]},M&64&&k[6],M&512&&k[9]])),o&&Zr(o.update)&&M&1&&o.update.call(null,k[0])},i(k){c||(tt(n),c=!0)},o(k){ct(n),c=!1},d(k){k&&Oe(e),w[t].d(),i[13](null),g=!1,bo(_)}}}function sS(i,e,t){const n=["use","class","role","tabindex","disabled","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{role:_=void 0}=e,{tabindex:v=_==="button"?0:-1}=e,{disabled:w=!1}=e,x,C,T={},k;ws(()=>(C=new eA({getAttr:M,setAttr:O,removeAttr:V,setContent:Q=>{t(7,k=Q)},registerInteractionHandler:(Q,Z)=>W().addEventListener(Q,Z),deregisterInteractionHandler:(Q,Z)=>W().removeEventListener(Q,Z),notifyIconAction:()=>Qr(W(),"SMUISelect:icon",void 0,void 0,!0)}),Qr(W(),"SMUISelectLeadingIcon:mount",C),C.init(),()=>{Qr(W(),"SMUISelectLeadingIcon:unmount",C),C.destroy()}));function M(Q){var Z;return Q in T?(Z=T[Q])!==null&&Z!==void 0?Z:null:W().getAttribute(Q)}function O(Q,Z){T[Q]!==Z&&t(6,T[Q]=Z,T)}function V(Q){(!(Q in T)||T[Q]!=null)&&t(6,T[Q]=void 0,T)}function W(){return x}function J(Q){pn[Q?"unshift":"push"](()=>{x=Q,t(5,x)})}return i.$$set=Q=>{e=Ni(Ni({},e),$r(Q)),t(9,l=On(e,n)),"use"in Q&&t(0,c=Q.use),"class"in Q&&t(1,g=Q.class),"role"in Q&&t(2,_=Q.role),"tabindex"in Q&&t(3,v=Q.tabindex),"disabled"in Q&&t(4,w=Q.disabled),"$$scope"in Q&&t(11,p=Q.$$scope)},[c,g,_,v,w,x,T,k,o,l,W,p,u,J]}class R1 extends fr{constructor(e){super(),dr(this,e,sS,oS,hr,{use:0,class:1,role:2,tabindex:3,disabled:4,getElement:10})}get getElement(){return this.$$.ctx[10]}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function aS(i){return i?i.scrollHeight>i.offsetHeight:!1}function lS(i){return i?i.scrollTop===0:!1}function uS(i){return i?Math.ceil(i.scrollHeight-i.scrollTop)===i.clientHeight:!1}function cS(i){var e=new Set;return[].forEach.call(i,function(t){return e.add(t.offsetTop)}),e.size>1}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var hS=function(){function i(){this.rafIDs=new Map}return i.prototype.request=function(e,t){var n=this;this.cancel(e);var l=requestAnimationFrame(function(u){n.rafIDs.delete(e),t(u)});this.rafIDs.set(e,l)},i.prototype.cancel=function(e){var t=this.rafIDs.get(e);t&&(cancelAnimationFrame(t),this.rafIDs.delete(e))},i.prototype.cancelAll=function(){var e=this;this.rafIDs.forEach(function(t,n){e.cancel(n)})},i.prototype.getQueue=function(){var e=[];return this.rafIDs.forEach(function(t,n){e.push(n)}),e},i}();/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cs={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked",FULLSCREEN:"mdc-dialog--fullscreen",SCROLL_DIVIDER_HEADER:"mdc-dialog-scroll-divider-header",SCROLL_DIVIDER_FOOTER:"mdc-dialog-scroll-divider-footer",SURFACE_SCRIM_SHOWN:"mdc-dialog__surface-scrim--shown",SURFACE_SCRIM_SHOWING:"mdc-dialog__surface-scrim--showing",SURFACE_SCRIM_HIDING:"mdc-dialog__surface-scrim--hiding",SCRIM_HIDDEN:"mdc-dialog__scrim--hidden"},Cd={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},zm={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var w1;(function(i){i.POLL_SCROLL_POS="poll_scroll_position",i.POLL_LAYOUT_CHANGE="poll_layout_change"})(w1||(w1={}));var fS=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.dialogOpen=!1,n.isFullscreen=!1,n.animationFrame=0,n.animationTimer=0,n.escapeKeyAction=Cd.CLOSE_ACTION,n.scrimClickAction=Cd.CLOSE_ACTION,n.autoStackButtons=!0,n.areButtonsStacked=!1,n.suppressDefaultPressSelector=Cd.SUPPRESS_DEFAULT_PRESS_SELECTOR,n.animFrame=new hS,n.contentScrollHandler=function(){n.handleScrollEvent()},n.windowResizeHandler=function(){n.layout()},n.windowOrientationChangeHandler=function(){n.layout()},n}return Object.defineProperty(e,"cssClasses",{get:function(){return cs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Cd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return zm},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){},registerContentEventHandler:function(){},deregisterContentEventHandler:function(){},isScrollableContentAtTop:function(){return!1},isScrollableContentAtBottom:function(){return!1},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.hasClass(cs.STACKED)&&this.setAutoStackButtons(!1),this.isFullscreen=this.adapter.hasClass(cs.FULLSCREEN)},e.prototype.destroy=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.handleAnimationTimerEnd()),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.animFrame.cancelAll(),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler)},e.prototype.open=function(t){var n=this;this.dialogOpen=!0,this.adapter.notifyOpening(),this.adapter.addClass(cs.OPENING),this.isFullscreen&&this.adapter.registerContentEventHandler("scroll",this.contentScrollHandler),t&&t.isAboveFullscreenDialog&&this.adapter.addClass(cs.SCRIM_HIDDEN),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler),this.adapter.registerWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),this.runNextAnimationFrame(function(){n.adapter.addClass(cs.OPEN),n.adapter.addBodyClass(cs.SCROLL_LOCK),n.layout(),n.animationTimer=setTimeout(function(){n.handleAnimationTimerEnd(),n.adapter.trapFocus(n.adapter.getInitialFocusEl()),n.adapter.notifyOpened()},zm.DIALOG_ANIMATION_OPEN_TIME_MS)})},e.prototype.close=function(t){var n=this;t===void 0&&(t=""),this.dialogOpen&&(this.dialogOpen=!1,this.adapter.notifyClosing(t),this.adapter.addClass(cs.CLOSING),this.adapter.removeClass(cs.OPEN),this.adapter.removeBodyClass(cs.SCROLL_LOCK),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){n.adapter.releaseFocus(),n.handleAnimationTimerEnd(),n.adapter.notifyClosed(t)},zm.DIALOG_ANIMATION_CLOSE_TIME_MS))},e.prototype.showSurfaceScrim=function(){var t=this;this.adapter.addClass(cs.SURFACE_SCRIM_SHOWING),this.runNextAnimationFrame(function(){t.adapter.addClass(cs.SURFACE_SCRIM_SHOWN)})},e.prototype.hideSurfaceScrim=function(){this.adapter.removeClass(cs.SURFACE_SCRIM_SHOWN),this.adapter.addClass(cs.SURFACE_SCRIM_HIDING)},e.prototype.handleSurfaceScrimTransitionEnd=function(){this.adapter.removeClass(cs.SURFACE_SCRIM_HIDING),this.adapter.removeClass(cs.SURFACE_SCRIM_SHOWING)},e.prototype.isOpen=function(){return this.dialogOpen},e.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction},e.prototype.setEscapeKeyAction=function(t){this.escapeKeyAction=t},e.prototype.getScrimClickAction=function(){return this.scrimClickAction},e.prototype.setScrimClickAction=function(t){this.scrimClickAction=t},e.prototype.getAutoStackButtons=function(){return this.autoStackButtons},e.prototype.setAutoStackButtons=function(t){this.autoStackButtons=t},e.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},e.prototype.setSuppressDefaultPressSelector=function(t){this.suppressDefaultPressSelector=t},e.prototype.layout=function(){var t=this;this.animFrame.request(w1.POLL_LAYOUT_CHANGE,function(){t.layoutInternal()})},e.prototype.handleClick=function(t){var n=this.adapter.eventTargetMatches(t.target,Cd.SCRIM_SELECTOR);if(n&&this.scrimClickAction!=="")this.close(this.scrimClickAction);else{var l=this.adapter.getActionFromEvent(t);l&&this.close(l)}},e.prototype.handleKeydown=function(t){var n=t.key==="Enter"||t.keyCode===13;if(!!n){var l=this.adapter.getActionFromEvent(t);if(!l){var u=t.composedPath?t.composedPath()[0]:t.target,p=this.suppressDefaultPressSelector?!this.adapter.eventTargetMatches(u,this.suppressDefaultPressSelector):!0;n&&p&&this.adapter.clickDefaultButton()}}},e.prototype.handleDocumentKeydown=function(t){var n=t.key==="Escape"||t.keyCode===27;n&&this.escapeKeyAction!==""&&this.close(this.escapeKeyAction)},e.prototype.handleScrollEvent=function(){var t=this;this.animFrame.request(w1.POLL_SCROLL_POS,function(){t.toggleScrollDividerHeader(),t.toggleScrollDividerFooter()})},e.prototype.layoutInternal=function(){this.autoStackButtons&&this.detectStackedButtons(),this.toggleScrollableClasses()},e.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(cs.OPENING),this.adapter.removeClass(cs.CLOSING)},e.prototype.runNextAnimationFrame=function(t){var n=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){n.animationFrame=0,clearTimeout(n.animationTimer),n.animationTimer=setTimeout(t,0)})},e.prototype.detectStackedButtons=function(){this.adapter.removeClass(cs.STACKED);var t=this.adapter.areButtonsStacked();t&&this.adapter.addClass(cs.STACKED),t!==this.areButtonsStacked&&(this.adapter.reverseButtons(),this.areButtonsStacked=t)},e.prototype.toggleScrollableClasses=function(){this.adapter.removeClass(cs.SCROLLABLE),this.adapter.isContentScrollable()&&(this.adapter.addClass(cs.SCROLLABLE),this.isFullscreen&&(this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()))},e.prototype.toggleScrollDividerHeader=function(){this.adapter.isScrollableContentAtTop()?this.adapter.hasClass(cs.SCROLL_DIVIDER_HEADER)&&this.adapter.removeClass(cs.SCROLL_DIVIDER_HEADER):this.adapter.addClass(cs.SCROLL_DIVIDER_HEADER)},e.prototype.toggleScrollDividerFooter=function(){this.adapter.isScrollableContentAtBottom()?this.adapter.hasClass(cs.SCROLL_DIVIDER_FOOTER)&&this.adapter.removeClass(cs.SCROLL_DIVIDER_FOOTER):this.adapter.addClass(cs.SCROLL_DIVIDER_FOOTER)},e}(ql);const{document:dS,window:V_}=D1,pS=i=>({}),q_=i=>({});function H_(i){let e,t,n;return{c(){e=Li("div"),this.h()},l(l){e=Pi(l,"DIV",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","mdc-dialog__surface-scrim")},m(l,u){wt(l,e,u),t||(n=Vn(e,"transitionend",i[31]),t=!0)},p:Co,d(l){l&&Oe(e),t=!1,n()}}}function mS(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C,T;const k=i[27].default,M=nr(k,i,i[26],null);let O=i[5]&&H_(i),V=[{class:p=Hn({[i[7]]:!0,"mdc-dialog__surface":!0})},{role:"alertdialog"},{"aria-modal":"true"},Jr(i[17],"surface$")],W={};for(let le=0;le<V.length;le+=1)W=Ni(W,V[le]);let J=[{class:o=Hn({[i[6]]:!0,"mdc-dialog__container":!0})},Jr(i[17],"container$")],Q={};for(let le=0;le<J.length;le+=1)Q=Ni(Q,J[le]);let Z=[{class:_=Hn({[i[2]]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!i[4],"mdc-dialog--fullscreen":i[5],"smui-dialog--selection":i[3],...i[10]})},{role:"alertdialog"},{"aria-modal":"true"},ah(i[17],["container$","surface$"])],ie={};for(let le=0;le<Z.length;le+=1)ie=Ni(ie,Z[le]);const Se=i[27].over,xe=nr(Se,i,i[26],q_);return{c(){e=$i(),t=Li("div"),n=Li("div"),l=Li("div"),M&&M.c(),u=$i(),O&&O.c(),c=$i(),g=Li("div"),w=$i(),xe&&xe.c(),this.h()},l(le){e=en(le),t=Pi(le,"DIV",{class:!0,role:!0,"aria-modal":!0});var Ee=Ti(t);n=Pi(Ee,"DIV",{class:!0});var me=Ti(n);l=Pi(me,"DIV",{class:!0,role:!0,"aria-modal":!0});var Ae=Ti(l);M&&M.l(Ae),u=en(Ae),O&&O.l(Ae),Ae.forEach(Oe),me.forEach(Oe),c=en(Ee),g=Pi(Ee,"DIV",{class:!0}),Ti(g).forEach(Oe),Ee.forEach(Oe),w=en(le),xe&&xe.l(le),this.h()},h(){Un(l,W),Un(n,Q),hi(g,"class","mdc-dialog__scrim"),Un(t,ie)},m(le,Ee){wt(le,e,Ee),wt(le,t,Ee),Xi(t,n),Xi(n,l),M&&M.m(l,null),Xi(l,u),O&&O.m(l,null),Xi(t,c),Xi(t,g),i[32](t),wt(le,w,Ee),xe&&xe.m(le,Ee),x=!0,C||(T=[Vn(V_,"resize",i[28]),Vn(V_,"orientationchange",i[29]),Vn(dS.body,"keydown",i[30]),Gn(v=go.call(null,t,i[1])),Gn(i[11].call(null,t)),Vn(t,"SMUIDialog:opening",i[14]),Vn(t,"SMUIDialog:opened",i[15]),Vn(t,"SMUIDialog:closed",i[16]),Vn(t,"click",i[33]),Vn(t,"keydown",i[34])],C=!0)},p(le,Ee){M&&M.p&&(!x||Ee[0]&67108864)&&rr(M,k,le,le[26],x?sr(k,le[26],Ee,null):or(le[26]),null),le[5]?O?O.p(le,Ee):(O=H_(le),O.c(),O.m(l,null)):O&&(O.d(1),O=null),Un(l,W=cr(V,[(!x||Ee[0]&128&&p!==(p=Hn({[le[7]]:!0,"mdc-dialog__surface":!0})))&&{class:p},{role:"alertdialog"},{"aria-modal":"true"},Ee[0]&131072&&Jr(le[17],"surface$")])),Un(n,Q=cr(J,[(!x||Ee[0]&64&&o!==(o=Hn({[le[6]]:!0,"mdc-dialog__container":!0})))&&{class:o},Ee[0]&131072&&Jr(le[17],"container$")])),Un(t,ie=cr(Z,[(!x||Ee[0]&1084&&_!==(_=Hn({[le[2]]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!le[4],"mdc-dialog--fullscreen":le[5],"smui-dialog--selection":le[3],...le[10]})))&&{class:_},{role:"alertdialog"},{"aria-modal":"true"},Ee[0]&131072&&ah(le[17],["container$","surface$"])])),v&&Zr(v.update)&&Ee[0]&2&&v.update.call(null,le[1]),xe&&xe.p&&(!x||Ee[0]&67108864)&&rr(xe,Se,le,le[26],x?sr(Se,le[26],Ee,pS):or(le[26]),q_)},i(le){x||(tt(M,le),tt(xe,le),x=!0)},o(le){ct(M,le),ct(xe,le),x=!1},d(le){le&&Oe(e),le&&Oe(t),M&&M.d(le),O&&O.d(),i[32](null),le&&Oe(w),xe&&xe.d(le),C=!1,bo(T)}}}function gS(i,e,t){const n=["use","class","open","selection","escapeKeyAction","scrimClickAction","autoStackButtons","fullscreen","container$class","surface$class","isOpen","setOpen","layout","getElement"];let l=On(e,n),u,p,{$$slots:o={},$$scope:c}=e;var g;const{FocusTrap:_}=y8,{closest:v,matches:w}=sp,x=io(to());let{use:C=[]}=e,{class:T=""}=e,{open:k=!1}=e,{selection:M=!1}=e,{escapeKeyAction:O="close"}=e,{scrimClickAction:V="close"}=e,{autoStackButtons:W=!0}=e,{fullscreen:J=!1}=e,{container$class:Q=""}=e,{surface$class:Z=""}=e,ie,Se,xe={},le,Ee=Sl(!1);Vo(i,Ee,Qt=>t(38,p=Qt));let me=es("SMUI:dialog:aboveFullscreen"),Ae=(g=es("SMUI:dialog:aboveFullscreenShown"))!==null&&g!==void 0?g:Sl(!1);Vo(i,Ae,Qt=>t(25,u=Qt));let pt=es("SMUI:addLayoutListener"),rt,Pt=[],We=Qt=>(Pt.push(Qt),()=>{const Ot=Pt.indexOf(Qt);Ot>=0&&Pt.splice(Ot,1)});Fo("SMUI:dialog:actions:reversed",Ee),Fo("SMUI:addLayoutListener",We),Fo("SMUI:dialog:selection",M),Fo("SMUI:dialog:aboveFullscreen",me||J),Fo("SMUI:dialog:aboveFullscreenShown",Ae),pt&&(rt=pt(ni));let be=u;ws(()=>{var Qt;return le=new _(ie,{initialFocusEl:(Qt=Re())!==null&&Qt!==void 0?Qt:void 0}),t(8,Se=new fS({addBodyClass:Ot=>document.body.classList.add(Ot),addClass:Ue,areButtonsStacked:()=>cS(Ie()),clickDefaultButton:()=>{const Ot=de();Ot&&Ot.click()},eventTargetMatches:(Ot,ai)=>Ot?w(Ot,ai):!1,getActionFromEvent:Ot=>{if(!Ot.target)return"";const ai=v(Ot.target,"[data-mdc-dialog-action]");return ai&&ai.getAttribute("data-mdc-dialog-action")},getInitialFocusEl:Re,hasClass:Le,isContentScrollable:()=>aS(ge()),notifyClosed:Ot=>{t(0,k=!1),Qr(mt(),"SMUIDialog:closed",Ot?{action:Ot}:{},void 0,!0)},notifyClosing:Ot=>Qr(mt(),"SMUIDialog:closing",Ot?{action:Ot}:{},void 0,!0),notifyOpened:()=>Qr(mt(),"SMUIDialog:opened",{},void 0,!0),notifyOpening:()=>Qr(mt(),"SMUIDialog:opening",{},void 0,!0),releaseFocus:()=>le.releaseFocus(),removeBodyClass:Ot=>document.body.classList.remove(Ot),removeClass:ce,reverseButtons:()=>{Ea(Ee,p=!0,p)},trapFocus:()=>le.trapFocus(),registerContentEventHandler:(Ot,ai)=>{const Ji=ge();Ji instanceof HTMLElement&&Ji.addEventListener(Ot,ai)},deregisterContentEventHandler:(Ot,ai)=>{const Ji=ge();Ji instanceof HTMLElement&&Ji.removeEventListener(Ot,ai)},isScrollableContentAtTop:()=>lS(ge()),isScrollableContentAtBottom:()=>uS(ge()),registerWindowEventHandler:(Ot,ai)=>{window.addEventListener(Ot,ai)},deregisterWindowEventHandler:(Ot,ai)=>{window.removeEventListener(Ot,ai)}})),Se.init(),()=>{Se.destroy()}}),sc(()=>{rt&&rt()});function Le(Qt){return Qt in xe?xe[Qt]:mt().classList.contains(Qt)}function Ue(Qt){xe[Qt]||t(10,xe[Qt]=!0,xe)}function ce(Qt){(!(Qt in xe)||xe[Qt])&&t(10,xe[Qt]=!1,xe)}function Ie(){return[].slice.call(ie.querySelectorAll(".mdc-dialog__button"))}function de(){return ie.querySelector("[data-mdc-dialog-button-default")}function ge(){return ie.querySelector(".mdc-dialog__content")}function Re(){return ie.querySelector("[data-mdc-dialog-initial-focus]")}function Ze(){me&&Ea(Ae,u=!0,u),requestAnimationFrame(()=>{Pt.forEach(Qt=>Qt())})}function ut(){Pt.forEach(Qt=>Qt())}function Xe(){me&&Ea(Ae,u=!1,u)}function $e(){return k}function Dt(Qt){t(0,k=Qt)}function ni(){return Se.layout()}function mt(){return ie}const At=()=>k&&Se&&Se.layout(),xt=()=>k&&Se&&Se.layout(),Qe=Qt=>k&&Se&&Se.handleDocumentKeydown(Qt),Yt=()=>Se&&Se.handleSurfaceScrimTransitionEnd();function si(Qt){pn[Qt?"unshift":"push"](()=>{ie=Qt,t(9,ie)})}const Zt=Qt=>Se&&Se.handleClick(Qt),Ei=Qt=>Se&&Se.handleKeydown(Qt);return i.$$set=Qt=>{e=Ni(Ni({},e),$r(Qt)),t(17,l=On(e,n)),"use"in Qt&&t(1,C=Qt.use),"class"in Qt&&t(2,T=Qt.class),"open"in Qt&&t(0,k=Qt.open),"selection"in Qt&&t(3,M=Qt.selection),"escapeKeyAction"in Qt&&t(18,O=Qt.escapeKeyAction),"scrimClickAction"in Qt&&t(19,V=Qt.scrimClickAction),"autoStackButtons"in Qt&&t(4,W=Qt.autoStackButtons),"fullscreen"in Qt&&t(5,J=Qt.fullscreen),"container$class"in Qt&&t(6,Q=Qt.container$class),"surface$class"in Qt&&t(7,Z=Qt.surface$class),"$$scope"in Qt&&t(26,c=Qt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&262400&&Se&&Se.getEscapeKeyAction()!==O&&Se.setEscapeKeyAction(O),i.$$.dirty[0]&524544&&Se&&Se.getScrimClickAction()!==V&&Se.setScrimClickAction(V),i.$$.dirty[0]&272&&Se&&Se.getAutoStackButtons()!==W&&Se.setAutoStackButtons(W),i.$$.dirty[0]&16&&(W||Ea(Ee,p=!0,p)),i.$$.dirty[0]&257&&Se&&Se.isOpen()!==k&&(k?Se.open({isAboveFullscreenDialog:!!me}):Se.close()),i.$$.dirty[0]&50331936&&J&&Se&&be!==u&&(t(24,be=u),u?Se.showSurfaceScrim():Se.hideSurfaceScrim())},[k,C,T,M,W,J,Q,Z,Se,ie,xe,x,Ee,Ae,Ze,ut,Xe,l,O,V,$e,Dt,ni,mt,be,u,c,o,At,xt,Qe,Yt,si,Zt,Ei]}class j4 extends fr{constructor(e){super(),dr(this,e,gS,mS,hr,{use:1,class:2,open:0,selection:3,escapeKeyAction:18,scrimClickAction:19,autoStackButtons:4,fullscreen:5,container$class:6,surface$class:7,isOpen:20,setOpen:21,layout:22,getElement:23},null,[-1,-1])}get isOpen(){return this.$$.ctx[20]}get setOpen(){return this.$$.ctx[21]}get layout(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}da({class:"mdc-dialog__header",component:vf,contexts:{"SMUI:icon-button:context":"dialog:header"}});const U4=da({class:"mdc-dialog__title",component:J6}),V4=da({class:"mdc-dialog__content",component:vf}),H2=da({class:"mdc-dialog__actions",component:vf,classMap:{"smui-dialog__actions--reversed":"SMUI:dialog:actions:reversed"},contexts:{"SMUI:button:context":"dialog:action"}});function ns(i){return ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ns(i)}var Ul=Uint8Array,Vl=Uint16Array,Yd=Uint32Array,B1=new Ul([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),z1=new Ul([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),G2=new Ul([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q4=function(i,e){for(var t=new Vl(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var l=new Yd(t[30]),n=1;n<30;++n)for(var u=t[n];u<t[n+1];++u)l[u]=u-t[n]<<5|n;return[t,l]},H4=q4(B1,2),G4=H4[0],W2=H4[1];G4[28]=258,W2[258]=28;var W4=q4(z1,0),yS=W4[0],G_=W4[1],X2=new Vl(32768);for(var Cs=0;Cs<32768;++Cs){var nf=(Cs&43690)>>>1|(Cs&21845)<<1;nf=(nf&52428)>>>2|(nf&13107)<<2,nf=(nf&61680)>>>4|(nf&3855)<<4,X2[Cs]=((nf&65280)>>>8|(nf&255)<<8)>>>1}var sh=function(i,e,t){for(var n=i.length,l=0,u=new Vl(e);l<n;++l)++u[i[l]-1];var p=new Vl(e);for(l=0;l<e;++l)p[l]=p[l-1]+u[l-1]<<1;var o;if(t){o=new Vl(1<<e);var c=15-e;for(l=0;l<n;++l)if(i[l])for(var g=l<<4|i[l],_=e-i[l],v=p[i[l]-1]++<<_,w=v|(1<<_)-1;v<=w;++v)o[X2[v]>>>c]=g}else for(o=new Vl(n),l=0;l<n;++l)o[l]=X2[p[i[l]-1]++]>>>15-i[l];return o},gf=new Ul(288);for(var Cs=0;Cs<144;++Cs)gf[Cs]=8;for(var Cs=144;Cs<256;++Cs)gf[Cs]=9;for(var Cs=256;Cs<280;++Cs)gf[Cs]=7;for(var Cs=280;Cs<288;++Cs)gf[Cs]=8;var Zd=new Ul(32);for(var Cs=0;Cs<32;++Cs)Zd[Cs]=5;var _S=sh(gf,9,0),vS=sh(gf,9,1),bS=sh(Zd,5,0),wS=sh(Zd,5,1),Nm=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},kc=function(i,e,t){var n=e/8>>0;return(i[n]|i[n+1]<<8)>>>(e&7)&t},jm=function(i,e){var t=e/8>>0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>>(e&7)},Eg=function(i){return(i/8>>0)+(i&7&&1)},X4=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof Vl?Vl:i instanceof Yd?Yd:Ul)(t-e);return n.set(i.subarray(e,t)),n},xS=function(i,e,t){var n=i.length,l=!e||t,u=!t||t.i;t||(t={}),e||(e=new Ul(n*3));var p=function(Re){var Ze=e.length;if(Re>Ze){var ut=new Ul(Math.max(Ze*2,Re));ut.set(e),e=ut}},o=t.f||0,c=t.p||0,g=t.b||0,_=t.l,v=t.d,w=t.m,x=t.n,C=n*8;do{if(!_){t.f=o=kc(i,c,1);var T=kc(i,c+1,3);if(c+=3,T)if(T==1)_=vS,v=wS,w=9,x=5;else if(T==2){var V=kc(i,c,31)+257,W=kc(i,c+10,15)+4,J=V+kc(i,c+5,31)+1;c+=14;for(var Q=new Ul(J),Z=new Ul(19),ie=0;ie<W;++ie)Z[G2[ie]]=kc(i,c+ie*3,7);c+=W*3;var Se=Nm(Z),xe=(1<<Se)-1;if(!u&&c+J*(Se+7)>C)break;for(var le=sh(Z,Se,1),ie=0;ie<J;){var Ee=le[kc(i,c,xe)];c+=Ee&15;var k=Ee>>>4;if(k<16)Q[ie++]=k;else{var me=0,Ae=0;for(k==16?(Ae=3+kc(i,c,3),c+=2,me=Q[ie-1]):k==17?(Ae=3+kc(i,c,7),c+=3):k==18&&(Ae=11+kc(i,c,127),c+=7);Ae--;)Q[ie++]=me}}var pt=Q.subarray(0,V),rt=Q.subarray(V);w=Nm(pt),x=Nm(rt),_=sh(pt,w,1),v=sh(rt,x,1)}else throw"invalid block type";else{var k=Eg(c)+4,M=i[k-4]|i[k-3]<<8,O=k+M;if(O>n){if(u)throw"unexpected EOF";break}l&&p(g+M),e.set(i.subarray(k,O),g),t.b=g+=M,t.p=c=O*8;continue}if(c>C)throw"unexpected EOF"}l&&p(g+131072);for(var Pt=(1<<w)-1,We=(1<<x)-1,be=w+x+18;u||c+be<C;){var me=_[jm(i,c)&Pt],Le=me>>>4;if(c+=me&15,c>C)throw"unexpected EOF";if(!me)throw"invalid length/literal";if(Le<256)e[g++]=Le;else if(Le==256){_=null;break}else{var Ue=Le-254;if(Le>264){var ie=Le-257,ce=B1[ie];Ue=kc(i,c,(1<<ce)-1)+G4[ie],c+=ce}var Ie=v[jm(i,c)&We],de=Ie>>>4;if(!Ie)throw"invalid distance";c+=Ie&15;var rt=yS[de];if(de>3){var ce=z1[de];rt+=jm(i,c)&(1<<ce)-1,c+=ce}if(c>C)throw"unexpected EOF";l&&p(g+131072);for(var ge=g+Ue;g<ge;g+=4)e[g]=e[g-rt],e[g+1]=e[g+1-rt],e[g+2]=e[g+2-rt],e[g+3]=e[g+3-rt];g=ge}}t.l=_,t.p=c,t.b=g,_&&(o=1,t.m=w,t.d=v,t.n=x)}while(!o);return g==e.length?e:X4(e,0,g)},Ih=function(i,e,t){t<<=e&7;var n=e/8>>0;i[n]|=t,i[n+1]|=t>>>8},Ed=function(i,e,t){t<<=e&7;var n=e/8>>0;i[n]|=t,i[n+1]|=t>>>8,i[n+2]|=t>>>16},Um=function(i,e){for(var t=[],n=0;n<i.length;++n)i[n]&&t.push({s:n,f:i[n]});var l=t.length,u=t.slice();if(!l)return[new Ul(0),0];if(l==1){var p=new Ul(t[0].s+1);return p[t[0].s]=1,[p,1]}t.sort(function(J,Q){return J.f-Q.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],g=0,_=1,v=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};_!=l-1;)o=t[t[g].f<t[v].f?g++:v++],c=t[g!=_&&t[g].f<t[v].f?g++:v++],t[_++]={s:-1,f:o.f+c.f,l:o,r:c};for(var w=u[0].s,n=1;n<l;++n)u[n].s>w&&(w=u[n].s);var x=new Vl(w+1),C=Y2(t[_-1],x,0);if(C>e){var n=0,T=0,k=C-e,M=1<<k;for(u.sort(function(Q,Z){return x[Z.s]-x[Q.s]||Q.f-Z.f});n<l;++n){var O=u[n].s;if(x[O]>e)T+=M-(1<<C-x[O]),x[O]=e;else break}for(T>>>=k;T>0;){var V=u[n].s;x[V]<e?T-=1<<e-x[V]++-1:++n}for(;n>=0&&T;--n){var W=u[n].s;x[W]==e&&(--x[W],++T)}C=e}return[new Ul(x),C]},Y2=function(i,e,t){return i.s==-1?Math.max(Y2(i.l,e,t+1),Y2(i.r,e,t+1)):e[i.s]=t},W_=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new Vl(++e),n=0,l=i[0],u=1,p=function(c){t[n++]=c},o=1;o<=e;++o)if(i[o]==l&&o!=e)++u;else{if(!l&&u>2){for(;u>138;u-=138)p(32754);u>2&&(p(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(p(l),--u;u>6;u-=6)p(8304);u>2&&(p(u-3<<5|8208),u=0)}for(;u--;)p(l);u=1,l=i[o]}return[t.subarray(0,n),e]},Id=function(i,e){for(var t=0,n=0;n<e.length;++n)t+=i[n]*e[n];return t},o1=function(i,e,t){var n=t.length,l=Eg(e+2);i[l]=n&255,i[l+1]=n>>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var u=0;u<n;++u)i[l+u+4]=t[u];return(l+4+n)*8},X_=function(i,e,t,n,l,u,p,o,c,g,_){Ih(e,_++,t),++l[256];for(var v=Um(l,15),w=v[0],x=v[1],C=Um(u,15),T=C[0],k=C[1],M=W_(w),O=M[0],V=M[1],W=W_(T),J=W[0],Q=W[1],Z=new Vl(19),ie=0;ie<O.length;++ie)Z[O[ie]&31]++;for(var ie=0;ie<J.length;++ie)Z[J[ie]&31]++;for(var Se=Um(Z,7),xe=Se[0],le=Se[1],Ee=19;Ee>4&&!xe[G2[Ee-1]];--Ee);var me=g+5<<3,Ae=Id(l,gf)+Id(u,Zd)+p,pt=Id(l,w)+Id(u,T)+p+14+3*Ee+Id(Z,xe)+(2*Z[16]+3*Z[17]+7*Z[18]);if(me<=Ae&&me<=pt)return o1(e,_,i.subarray(c,c+g));var rt,Pt,We,be;if(Ih(e,_,1+(pt<Ae)),_+=2,pt<Ae){rt=sh(w,x,0),Pt=w,We=sh(T,k,0),be=T;var Le=sh(xe,le,0);Ih(e,_,V-257),Ih(e,_+5,Q-1),Ih(e,_+10,Ee-4),_+=14;for(var ie=0;ie<Ee;++ie)Ih(e,_+3*ie,xe[G2[ie]]);_+=3*Ee;for(var Ue=[O,J],ce=0;ce<2;++ce)for(var Ie=Ue[ce],ie=0;ie<Ie.length;++ie){var de=Ie[ie]&31;Ih(e,_,Le[de]),_+=xe[de],de>15&&(Ih(e,_,Ie[ie]>>>5&127),_+=Ie[ie]>>>12)}}else rt=_S,Pt=gf,We=bS,be=Zd;for(var ie=0;ie<o;++ie)if(n[ie]>255){var de=n[ie]>>>18&31;Ed(e,_,rt[de+257]),_+=Pt[de+257],de>7&&(Ih(e,_,n[ie]>>>23&31),_+=B1[de]);var ge=n[ie]&31;Ed(e,_,We[ge]),_+=be[ge],ge>3&&(Ed(e,_,n[ie]>>>5&8191),_+=z1[ge])}else Ed(e,_,rt[n[ie]]),_+=Pt[n[ie]];return Ed(e,_,rt[256]),_+Pt[256]},AS=new Yd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),SS=new Ul(0),kS=function(i,e,t,n,l,u){var p=i.length,o=new Ul(n+p+5*(1+Math.floor(p/7e3))+l),c=o.subarray(n,o.length-l),g=0;if(!e||p<8)for(var _=0;_<=p;_+=65535){var v=_+65535;v<p?g=o1(c,g,i.subarray(_,v)):(c[_]=u,g=o1(c,g,i.subarray(_,p)))}else{for(var w=AS[e-1],x=w>>>13,C=w&8191,T=(1<<t)-1,k=new Vl(32768),M=new Vl(T+1),O=Math.ceil(t/3),V=2*O,W=function(At){return(i[At]^i[At+1]<<O^i[At+2]<<V)&T},J=new Yd(25e3),Q=new Vl(288),Z=new Vl(32),ie=0,Se=0,_=0,xe=0,le=0,Ee=0;_<p;++_){var me=W(_),Ae=_&32767,pt=M[me];if(k[Ae]=pt,M[me]=Ae,le<=_){var rt=p-_;if((ie>7e3||xe>24576)&&rt>423){g=X_(i,c,0,J,Q,Z,Se,xe,Ee,_-Ee,g),xe=ie=Se=0,Ee=_;for(var Pt=0;Pt<286;++Pt)Q[Pt]=0;for(var Pt=0;Pt<30;++Pt)Z[Pt]=0}var We=2,be=0,Le=C,Ue=Ae-pt&32767;if(rt>2&&me==W(_-Ue))for(var ce=Math.min(x,rt)-1,Ie=Math.min(32767,_),de=Math.min(258,rt);Ue<=Ie&&--Le&&Ae!=pt;){if(i[_+We]==i[_+We-Ue]){for(var ge=0;ge<de&&i[_+ge]==i[_+ge-Ue];++ge);if(ge>We){if(We=ge,be=Ue,ge>ce)break;for(var Re=Math.min(Ue,ge-2),Ze=0,Pt=0;Pt<Re;++Pt){var ut=_-Ue+Pt+32768&32767,Xe=k[ut],$e=ut-Xe+32768&32767;$e>Ze&&(Ze=$e,pt=ut)}}}Ae=pt,pt=k[Ae],Ue+=Ae-pt+32768&32767}if(be){J[xe++]=268435456|W2[We]<<18|G_[be];var Dt=W2[We]&31,ni=G_[be]&31;Se+=B1[Dt]+z1[ni],++Q[257+Dt],++Z[ni],le=_+We,++ie}else J[xe++]=i[_],++Q[i[_]]}}g=X_(i,c,u,J,Q,Z,Se,xe,Ee,_-Ee,g),u||(g=o1(c,g,SS))}return X4(o,0,n+Eg(g)+l)},CS=function(){var i=1,e=0;return{p:function(t){for(var n=i,l=e,u=t.length,p=0;p!=u;){for(var o=Math.min(p+5552,u);p<o;++p)n+=t[p],l+=n;n%=65521,l%=65521}i=n,e=l},d:function(){return(i>>>8<<16|(e&255)<<8|e>>>8)+((i&255)<<23)*2}}},ES=function(i,e,t,n,l){return kS(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,n,!l)},IS=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},TS=function(i,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=n<<6|(n?32-2*n:1)},LS=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Z2(i,e){e===void 0&&(e={});var t=CS();t.p(i);var n=ES(i,e,2,4);return TS(n,e),IS(n,n.length-4,t.d()),n}function PS(i,e){return xS((LS(i),i.subarray(2,-4)),e)}var Nr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Vm(){Nr.console&&typeof Nr.console.log=="function"&&Nr.console.log.apply(Nr.console,arguments)}var ps={log:Vm,warn:function(i){Nr.console&&(typeof Nr.console.warn=="function"?Nr.console.warn.apply(Nr.console,arguments):Vm.call(null,arguments))},error:function(i){Nr.console&&(typeof Nr.console.error=="function"?Nr.console.error.apply(Nr.console,arguments):Vm(i))}};function qm(i,e,t){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){qf(n.response,e,t)},n.onerror=function(){ps.error("could not download file")},n.send()}function Y_(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function qp(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var jd,K2,qf=Nr.saveAs||((typeof window>"u"?"undefined":ns(window))!=="object"||window!==Nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var n=Nr.URL||Nr.webkitURL,l=document.createElement("a");e=e||i.name||"download",l.download=e,l.rel="noopener",typeof i=="string"?(l.href=i,l.origin!==location.origin?Y_(l.href)?qm(i,e,t):qp(l,l.target="_blank"):qp(l)):(l.href=n.createObjectURL(i),setTimeout(function(){n.revokeObjectURL(l.href)},4e4),setTimeout(function(){qp(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(Y_(i))qm(i,e,t);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout(function(){qp(n)})}else navigator.msSaveOrOpenBlob(function(l,u){return u===void 0?u={autoBom:!1}:ns(u)!=="object"&&(ps.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(i,t),e)}:function(i,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return qm(i,e,t);var l=i.type==="application/octet-stream",u=/constructor/i.test(Nr.HTMLElement)||Nr.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||l&&u)&&(typeof FileReader>"u"?"undefined":ns(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var _=o.result;_=p?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=_:location=_,n=null},o.readAsDataURL(i)}else{var c=Nr.URL||Nr.webkitURL,g=c.createObjectURL(i);n?n.location=g:location.href=g,n=null,setTimeout(function(){c.revokeObjectURL(g)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Y4(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var l=t[n].re,u=t[n].process,p=l.exec(i);p&&(e=u(p),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),g=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),g.length==1&&(g="0"+g),"#"+o+c+g}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Hm(i,e){var t=i[0],n=i[1],l=i[2],u=i[3];t=vl(t,n,l,u,e[0],7,-680876936),u=vl(u,t,n,l,e[1],12,-389564586),l=vl(l,u,t,n,e[2],17,606105819),n=vl(n,l,u,t,e[3],22,-1044525330),t=vl(t,n,l,u,e[4],7,-176418897),u=vl(u,t,n,l,e[5],12,1200080426),l=vl(l,u,t,n,e[6],17,-1473231341),n=vl(n,l,u,t,e[7],22,-45705983),t=vl(t,n,l,u,e[8],7,1770035416),u=vl(u,t,n,l,e[9],12,-1958414417),l=vl(l,u,t,n,e[10],17,-42063),n=vl(n,l,u,t,e[11],22,-1990404162),t=vl(t,n,l,u,e[12],7,1804603682),u=vl(u,t,n,l,e[13],12,-40341101),l=vl(l,u,t,n,e[14],17,-1502002290),t=bl(t,n=vl(n,l,u,t,e[15],22,1236535329),l,u,e[1],5,-165796510),u=bl(u,t,n,l,e[6],9,-1069501632),l=bl(l,u,t,n,e[11],14,643717713),n=bl(n,l,u,t,e[0],20,-373897302),t=bl(t,n,l,u,e[5],5,-701558691),u=bl(u,t,n,l,e[10],9,38016083),l=bl(l,u,t,n,e[15],14,-660478335),n=bl(n,l,u,t,e[4],20,-405537848),t=bl(t,n,l,u,e[9],5,568446438),u=bl(u,t,n,l,e[14],9,-1019803690),l=bl(l,u,t,n,e[3],14,-187363961),n=bl(n,l,u,t,e[8],20,1163531501),t=bl(t,n,l,u,e[13],5,-1444681467),u=bl(u,t,n,l,e[2],9,-51403784),l=bl(l,u,t,n,e[7],14,1735328473),t=wl(t,n=bl(n,l,u,t,e[12],20,-1926607734),l,u,e[5],4,-378558),u=wl(u,t,n,l,e[8],11,-2022574463),l=wl(l,u,t,n,e[11],16,1839030562),n=wl(n,l,u,t,e[14],23,-35309556),t=wl(t,n,l,u,e[1],4,-1530992060),u=wl(u,t,n,l,e[4],11,1272893353),l=wl(l,u,t,n,e[7],16,-155497632),n=wl(n,l,u,t,e[10],23,-1094730640),t=wl(t,n,l,u,e[13],4,681279174),u=wl(u,t,n,l,e[0],11,-358537222),l=wl(l,u,t,n,e[3],16,-722521979),n=wl(n,l,u,t,e[6],23,76029189),t=wl(t,n,l,u,e[9],4,-640364487),u=wl(u,t,n,l,e[12],11,-421815835),l=wl(l,u,t,n,e[15],16,530742520),t=xl(t,n=wl(n,l,u,t,e[2],23,-995338651),l,u,e[0],6,-198630844),u=xl(u,t,n,l,e[7],10,1126891415),l=xl(l,u,t,n,e[14],15,-1416354905),n=xl(n,l,u,t,e[5],21,-57434055),t=xl(t,n,l,u,e[12],6,1700485571),u=xl(u,t,n,l,e[3],10,-1894986606),l=xl(l,u,t,n,e[10],15,-1051523),n=xl(n,l,u,t,e[1],21,-2054922799),t=xl(t,n,l,u,e[8],6,1873313359),u=xl(u,t,n,l,e[15],10,-30611744),l=xl(l,u,t,n,e[6],15,-1560198380),n=xl(n,l,u,t,e[13],21,1309151649),t=xl(t,n,l,u,e[4],6,-145523070),u=xl(u,t,n,l,e[11],10,-1120210379),l=xl(l,u,t,n,e[2],15,718787259),n=xl(n,l,u,t,e[9],21,-343485551),i[0]=cf(t,i[0]),i[1]=cf(n,i[1]),i[2]=cf(l,i[2]),i[3]=cf(u,i[3])}function N1(i,e,t,n,l,u){return e=cf(cf(e,i),cf(n,u)),cf(e<<l|e>>>32-l,t)}function vl(i,e,t,n,l,u,p){return N1(e&t|~e&n,i,e,l,u,p)}function bl(i,e,t,n,l,u,p){return N1(e&n|t&~n,i,e,l,u,p)}function wl(i,e,t,n,l,u,p){return N1(e^t^n,i,e,l,u,p)}function xl(i,e,t,n,l,u,p){return N1(t^(e|~n),i,e,l,u,p)}function Z4(i){var e,t=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)Hm(n,MS(i.substring(e-64,e)));i=i.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)l[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Hm(n,l),e=0;e<16;e++)l[e]=0;return l[14]=8*t,Hm(n,l),n}function MS(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}jd=Nr.atob.bind(Nr),K2=Nr.btoa.bind(Nr);var Z_="0123456789abcdef".split("");function DS(i){for(var e="",t=0;t<4;t++)e+=Z_[i>>8*t+4&15]+Z_[i>>8*t&15];return e}function OS(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function J2(i){return Z4(i).map(OS).join("")}var FS=function(i){for(var e=0;e<i.length;e++)i[e]=DS(i[e]);return i.join("")}(Z4("hello"))!="5d41402abc4b2a76b9719d911017c592";function cf(i,e){if(FS){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Q2(i,e){var t,n,l,u;if(i!==t){for(var p=(l=i,u=1+(256/i.length>>0),new Array(u+1).join(l)),o=[],c=0;c<256;c++)o[c]=c;var g=0;for(c=0;c<256;c++){var _=o[c];g=(g+_+p.charCodeAt(c))%256,o[c]=o[g],o[g]=_}t=i,n=o}else o=n;var v=e.length,w=0,x=0,C="";for(c=0;c<v;c++)x=(x+(_=o[w=(w+1)%256]))%256,o[w]=o[x],o[x]=_,p=o[(o[w]+o[x])%256],C+=String.fromCharCode(e.charCodeAt(c)^p);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var K_={print:4,modify:8,copy:16,"annot-forms":32};function D0(i,e,t,n){this.v=1,this.r=2;var l=192;i.forEach(function(o){if(K_.perm!==void 0)throw new Error("Invalid permission: "+o);l+=K_[o]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var u=(e+this.padding).substr(0,32),p=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,p),this.P=-(1+(255^l)),this.encryptionKey=J2(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Q2(this.encryptionKey,this.padding)}function O0(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,n=0;n<t;n++){var l=i.charCodeAt(n);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=i[n]}return e}function J_(i){if(ns(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,l){if(l=l||!1,typeof t!="string"||typeof n!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var u=Math.random().toString(35);return e[t][u]=[n,!!l],u},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),l=[];for(var u in e[t]){var p=e[t][u];try{p[0].apply(i,n)}catch(o){Nr.console&&ps.error("jsPDF PubSub Error",o.message,o)}p[1]&&l.push(u)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function x1(i){if(!(this instanceof x1))return new x1(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function K4(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function Gf(i,e,t,n,l){if(!(this instanceof Gf))return new Gf(i,e,t,n,l);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,K4.call(this,n,l)}function N0(i,e,t,n,l){if(!(this instanceof N0))return new N0(i,e,t,n,l);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,K4.call(this,n,l)}function Br(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],l=arguments[2],u=arguments[3],p=[],o=1,c=16,g="S",_=null;ns(i=i||{})==="object"&&(t=i.orientation,n=i.unit||n,l=i.format||l,u=i.compress||i.compressPdf||u,(_=i.encryption||null)!==null&&(_.userPassword=_.userPassword||"",_.ownerPassword=_.ownerPassword||"",_.userPermissions=_.userPermissions||[]),o=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(c=i.floatPrecision),g=i.defaultPathOperation||"S"),p=i.filters||(u===!0?["FlateEncode"]:p),n=n||"mm",t=(""+(t||"P")).toLowerCase();var v=i.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=J_;var C="1.3",T=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(se){C=se};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return k};var M=x.__private__.getPageFormat=function(se){return k[se]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},V=O.COMPAT;function W(){this.saveGraphicsState(),Qe(new un(bt,0,0,-bt,0,_a()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),g="n",V=O.ADVANCED}function J(){this.restoreGraphicsState(),g="S",V=O.COMPAT}var Q=x.__private__.combineFontStyleAndFontWeight=function(se,je){if(se=="bold"&&je=="normal"||se=="bold"&&je==400||se=="normal"&&je=="italic"||se=="bold"&&je=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return je&&(se=je==400||je==="normal"?se==="italic"?"italic":"normal":je!=700&&je!=="bold"||se!=="normal"?(je==700?"bold":je)+""+se:"bold"),se};x.advancedAPI=function(se){var je=V===O.COMPAT;return je&&W.call(this),typeof se!="function"||(se(this),je&&J.call(this)),this},x.compatAPI=function(se){var je=V===O.ADVANCED;return je&&J.call(this),typeof se!="function"||(se(this),je&&W.call(this)),this},x.isAdvancedAPI=function(){return V===O.ADVANCED};var Z,ie=function(se){if(V!==O.ADVANCED)throw new Error(se+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Se=x.roundToPrecision=x.__private__.roundToPrecision=function(se,je){var kt=e||je;if(isNaN(se)||isNaN(kt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return se.toFixed(kt).replace(/0+$/,"")};Z=x.hpf=x.__private__.hpf=typeof c=="number"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(se,c)}:c==="smart"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(se,se>-1&&se<1?16:5)}:function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(se,16)};var xe=x.f2=x.__private__.f2=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f2");return Se(se,2)},le=x.__private__.f3=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f3");return Se(se,3)},Ee=x.scale=x.__private__.scale=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.scale");return V===O.COMPAT?se*bt:V===O.ADVANCED?se:void 0},me=function(se){return V===O.COMPAT?_a()-se:V===O.ADVANCED?se:void 0},Ae=function(se){return Ee(me(se))};x.__private__.setPrecision=x.setPrecision=function(se){typeof parseInt(se,10)=="number"&&(e=parseInt(se,10))};var pt,rt="00000000000000000000000000000000",Pt=x.__private__.getFileId=function(){return rt},We=x.__private__.setFileId=function(se){return rt=se!==void 0&&/^[a-fA-F0-9]{32}$/.test(se)?se.toUpperCase():rt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),_!==null&&(U=new D0(_.userPermissions,_.userPassword,_.ownerPassword,rt)),rt};x.setFileId=function(se){return We(se),this},x.getFileId=function(){return Pt()};var be=x.__private__.convertDateToPDFDate=function(se){var je=se.getTimezoneOffset(),kt=je<0?"+":"-",Wt=Math.floor(Math.abs(je/60)),li=Math.abs(je%60),Yi=[kt,de(Wt),"'",de(li),"'"].join("");return["D:",se.getFullYear(),de(se.getMonth()+1),de(se.getDate()),de(se.getHours()),de(se.getMinutes()),de(se.getSeconds()),Yi].join("")},Le=x.__private__.convertPDFDateToDate=function(se){var je=parseInt(se.substr(2,4),10),kt=parseInt(se.substr(6,2),10)-1,Wt=parseInt(se.substr(8,2),10),li=parseInt(se.substr(10,2),10),Yi=parseInt(se.substr(12,2),10),cn=parseInt(se.substr(14,2),10);return new Date(je,kt,Wt,li,Yi,cn,0)},Ue=x.__private__.setCreationDate=function(se){var je;if(se===void 0&&(se=new Date),se instanceof Date)je=be(se);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(se))throw new Error("Invalid argument passed to jsPDF.setCreationDate");je=se}return pt=je},ce=x.__private__.getCreationDate=function(se){var je=pt;return se==="jsDate"&&(je=Le(pt)),je};x.setCreationDate=function(se){return Ue(se),this},x.getCreationDate=function(se){return ce(se)};var Ie,de=x.__private__.padd2=function(se){return("0"+parseInt(se)).slice(-2)},ge=x.__private__.padd2Hex=function(se){return("00"+(se=se.toString())).substr(se.length)},Re=0,Ze=[],ut=[],Xe=0,$e=[],Dt=[],ni=!1,mt=ut,At=function(){Re=0,Xe=0,ut=[],Ze=[],$e=[],ft=Pe(),_t=Pe()};x.__private__.setCustomOutputDestination=function(se){ni=!0,mt=se};var xt=function(se){ni||(mt=se)};x.__private__.resetCustomOutputDestination=function(){ni=!1,mt=ut};var Qe=x.__private__.out=function(se){return se=se.toString(),Xe+=se.length+1,mt.push(se),mt},Yt=x.__private__.write=function(se){return Qe(arguments.length===1?se.toString():Array.prototype.join.call(arguments," "))},si=x.__private__.getArrayBuffer=function(se){for(var je=se.length,kt=new ArrayBuffer(je),Wt=new Uint8Array(kt);je--;)Wt[je]=se.charCodeAt(je);return kt},Zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Zt};var Ei=i.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(se){return Ei=V===O.ADVANCED?se/bt:se,this};var Qt,Ot=x.__private__.getFontSize=x.getFontSize=function(){return V===O.COMPAT?Ei:Ei*bt},ai=i.R2L||!1;x.__private__.setR2L=x.setR2L=function(se){return ai=se,this},x.__private__.getR2L=x.getR2L=function(){return ai};var Ji,Ii=x.__private__.setZoomMode=function(se){var je=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(se))Qt=se;else if(isNaN(se)){if(je.indexOf(se)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+se+'" is not recognized.');Qt=se}else Qt=parseInt(se,10)};x.__private__.getZoomMode=function(){return Qt};var $t,Me=x.__private__.setPageMode=function(se){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(se)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+se+'" is not recognized.');Ji=se};x.__private__.getPageMode=function(){return Ji};var ee=x.__private__.setLayoutMode=function(se){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(se)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+se+'" is not recognized.');$t=se};x.__private__.getLayoutMode=function(){return $t},x.__private__.setDisplayMode=x.setDisplayMode=function(se,je,kt){return Ii(se),ee(je),Me(kt),this};var ae={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(se){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ae[se]},x.__private__.getDocumentProperties=function(){return ae},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(se){for(var je in ae)ae.hasOwnProperty(je)&&se[je]&&(ae[je]=se[je]);return this},x.__private__.setDocumentProperty=function(se,je){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ae[se]=je};var et,bt,Xt,fi,xn,qn={},bn={},Gi=[],an={},Kn={},mr={},yo={},ar=null,Hr=0,Yn=[],Ur=new J_(x),co=i.hotfixes||[],Jn={},br={},Eo=[],un=function se(je,kt,Wt,li,Yi,cn){if(!(this instanceof se))return new se(je,kt,Wt,li,Yi,cn);isNaN(je)&&(je=1),isNaN(kt)&&(kt=0),isNaN(Wt)&&(Wt=0),isNaN(li)&&(li=1),isNaN(Yi)&&(Yi=0),isNaN(cn)&&(cn=0),this._matrix=[je,kt,Wt,li,Yi,cn]};Object.defineProperty(un.prototype,"sx",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(un.prototype,"shy",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(un.prototype,"shx",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(un.prototype,"sy",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(un.prototype,"tx",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(un.prototype,"ty",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(un.prototype,"a",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(un.prototype,"b",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(un.prototype,"c",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(un.prototype,"d",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(un.prototype,"e",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(un.prototype,"f",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(un.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(un.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(un.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(un.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),un.prototype.join=function(se){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Z).join(se)},un.prototype.multiply=function(se){var je=se.sx*this.sx+se.shy*this.shx,kt=se.sx*this.shy+se.shy*this.sy,Wt=se.shx*this.sx+se.sy*this.shx,li=se.shx*this.shy+se.sy*this.sy,Yi=se.tx*this.sx+se.ty*this.shx+this.tx,cn=se.tx*this.shy+se.ty*this.sy+this.ty;return new un(je,kt,Wt,li,Yi,cn)},un.prototype.decompose=function(){var se=this.sx,je=this.shy,kt=this.shx,Wt=this.sy,li=this.tx,Yi=this.ty,cn=Math.sqrt(se*se+je*je),Xn=(se/=cn)*kt+(je/=cn)*Wt;kt-=se*Xn,Wt-=je*Xn;var wr=Math.sqrt(kt*kt+Wt*Wt);return Xn/=wr,se*(Wt/=wr)<je*(kt/=wr)&&(se=-se,je=-je,Xn=-Xn,cn=-cn),{scale:new un(cn,0,0,wr,0,0),translate:new un(1,0,0,1,li,Yi),rotate:new un(se,je,-je,se,0,0),skew:new un(1,0,Xn,1,0,0)}},un.prototype.toString=function(se){return this.join(" ")},un.prototype.inversed=function(){var se=this.sx,je=this.shy,kt=this.shx,Wt=this.sy,li=this.tx,Yi=this.ty,cn=1/(se*Wt-je*kt),Xn=Wt*cn,wr=-je*cn,Fr=-kt*cn,Gr=se*cn;return new un(Xn,wr,Fr,Gr,-Xn*li-Fr*Yi,-wr*li-Gr*Yi)},un.prototype.applyToPoint=function(se){var je=se.x*this.sx+se.y*this.shx+this.tx,kt=se.x*this.shy+se.y*this.sy+this.ty;return new Wl(je,kt)},un.prototype.applyToRectangle=function(se){var je=this.applyToPoint(se),kt=this.applyToPoint(new Wl(se.x+se.w,se.y+se.h));return new _u(je.x,je.y,kt.x-je.x,kt.y-je.y)},un.prototype.clone=function(){var se=this.sx,je=this.shy,kt=this.shx,Wt=this.sy,li=this.tx,Yi=this.ty;return new un(se,je,kt,Wt,li,Yi)},x.Matrix=un;var He=x.matrixMult=function(se,je){return je.multiply(se)},Ho=new un(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Ho;var Do=function(se,je){if(!Kn[se]){var kt=(je instanceof Gf?"Sh":"P")+(Object.keys(an).length+1).toString(10);je.id=kt,Kn[se]=kt,an[kt]=je,Ur.publish("addPattern",je)}};x.ShadingPattern=Gf,x.TilingPattern=N0,x.addShadingPattern=function(se,je){return ie("addShadingPattern()"),Do(se,je),this},x.beginTilingPattern=function(se){ie("beginTilingPattern()"),Pn(se.boundingBox[0],se.boundingBox[1],se.boundingBox[2]-se.boundingBox[0],se.boundingBox[3]-se.boundingBox[1],se.matrix)},x.endTilingPattern=function(se,je){ie("endTilingPattern()"),je.stream=Dt[Ie].join(`
`),Do(se,je),Ur.publish("endTilingPattern",je),Eo.pop().restore()};var wo=x.__private__.newObject=function(){var se=Pe();return Te(se,!0),se},Pe=x.__private__.newObjectDeferred=function(){return Re++,Ze[Re]=function(){return Xe},Re},Te=function(se,je){return je=typeof je=="boolean"&&je,Ze[se]=Xe,je&&Qe(se+" 0 obj"),se},qe=x.__private__.newAdditionalObject=function(){var se={objId:Pe(),content:""};return $e.push(se),se},ft=Pe(),_t=Pe(),Ut=x.__private__.decodeColorString=function(se){var je=se.split(" ");if(je.length!==2||je[1]!=="g"&&je[1]!=="G")je.length===5&&(je[4]==="k"||je[4]==="K")&&(je=[(1-je[0])*(1-je[3]),(1-je[1])*(1-je[3]),(1-je[2])*(1-je[3]),"r"]);else{var kt=parseFloat(je[0]);je=[kt,kt,kt,"r"]}for(var Wt="#",li=0;li<3;li++)Wt+=("0"+Math.floor(255*parseFloat(je[li])).toString(16)).slice(-2);return Wt},Ge=x.__private__.encodeColorString=function(se){var je;typeof se=="string"&&(se={ch1:se});var kt=se.ch1,Wt=se.ch2,li=se.ch3,Yi=se.ch4,cn=se.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof kt=="string"&&kt.charAt(0)!=="#"){var Xn=new Y4(kt);if(Xn.ok)kt=Xn.toHex();else if(!/^\d*\.?\d*$/.test(kt))throw new Error('Invalid color "'+kt+'" passed to jsPDF.encodeColorString.')}if(typeof kt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(kt)&&(kt="#"+kt[1]+kt[1]+kt[2]+kt[2]+kt[3]+kt[3]),typeof kt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(kt)){var wr=parseInt(kt.substr(1),16);kt=wr>>16&255,Wt=wr>>8&255,li=255&wr}if(Wt===void 0||Yi===void 0&&kt===Wt&&Wt===li)if(typeof kt=="string")je=kt+" "+cn[0];else switch(se.precision){case 2:je=xe(kt/255)+" "+cn[0];break;case 3:default:je=le(kt/255)+" "+cn[0]}else if(Yi===void 0||ns(Yi)==="object"){if(Yi&&!isNaN(Yi.a)&&Yi.a===0)return je=["1.","1.","1.",cn[1]].join(" ");if(typeof kt=="string")je=[kt,Wt,li,cn[1]].join(" ");else switch(se.precision){case 2:je=[xe(kt/255),xe(Wt/255),xe(li/255),cn[1]].join(" ");break;default:case 3:je=[le(kt/255),le(Wt/255),le(li/255),cn[1]].join(" ")}}else if(typeof kt=="string")je=[kt,Wt,li,Yi,cn[2]].join(" ");else switch(se.precision){case 2:je=[xe(kt),xe(Wt),xe(li),xe(Yi),cn[2]].join(" ");break;case 3:default:je=[le(kt),le(Wt),le(li),le(Yi),cn[2]].join(" ")}return je},Ht=x.__private__.getFilters=function(){return p},zt=x.__private__.putStream=function(se){var je=(se=se||{}).data||"",kt=se.filters||Ht(),Wt=se.alreadyAppliedFilters||[],li=se.addLength1||!1,Yi=je.length,cn=se.objectId,Xn=function(Is){return Is};if(_!==null&&cn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");_!==null&&(Xn=U.encryptor(cn,0));var wr={};kt===!0&&(kt=["FlateEncode"]);var Fr=se.additionalKeyValues||[],Gr=(wr=Br.API.processDataByFilters!==void 0?Br.API.processDataByFilters(je,kt):{data:je,reverseChain:[]}).reverseChain+(Array.isArray(Wt)?Wt.join(" "):Wt.toString());if(wr.data.length!==0&&(Fr.push({key:"Length",value:wr.data.length}),li===!0&&Fr.push({key:"Length1",value:Yi})),Gr.length!=0)if(Gr.split("/").length-1==1)Fr.push({key:"Filter",value:Gr});else{Fr.push({key:"Filter",value:"["+Gr+"]"});for(var eo=0;eo<Fr.length;eo+=1)if(Fr[eo].key==="DecodeParms"){for(var zo=[],Go=0;Go<wr.reverseChain.split("/").length-1;Go+=1)zo.push("null");zo.push(Fr[eo].value),Fr[eo].value="["+zo.join(" ")+"]"}}Qe("<<");for(var Yo=0;Yo<Fr.length;Yo++)Qe("/"+Fr[Yo].key+" "+Fr[Yo].value);Qe(">>"),wr.data.length!==0&&(Qe("stream"),Qe(Xn(wr.data)),Qe("endstream"))},ti=x.__private__.putPage=function(se){var je=se.number,kt=se.data,Wt=se.objId,li=se.contentsObjId;Te(Wt,!0),Qe("<</Type /Page"),Qe("/Parent "+se.rootDictionaryObjId+" 0 R"),Qe("/Resources "+se.resourceDictionaryObjId+" 0 R"),Qe("/MediaBox ["+parseFloat(Z(se.mediaBox.bottomLeftX))+" "+parseFloat(Z(se.mediaBox.bottomLeftY))+" "+Z(se.mediaBox.topRightX)+" "+Z(se.mediaBox.topRightY)+"]"),se.cropBox!==null&&Qe("/CropBox ["+Z(se.cropBox.bottomLeftX)+" "+Z(se.cropBox.bottomLeftY)+" "+Z(se.cropBox.topRightX)+" "+Z(se.cropBox.topRightY)+"]"),se.bleedBox!==null&&Qe("/BleedBox ["+Z(se.bleedBox.bottomLeftX)+" "+Z(se.bleedBox.bottomLeftY)+" "+Z(se.bleedBox.topRightX)+" "+Z(se.bleedBox.topRightY)+"]"),se.trimBox!==null&&Qe("/TrimBox ["+Z(se.trimBox.bottomLeftX)+" "+Z(se.trimBox.bottomLeftY)+" "+Z(se.trimBox.topRightX)+" "+Z(se.trimBox.topRightY)+"]"),se.artBox!==null&&Qe("/ArtBox ["+Z(se.artBox.bottomLeftX)+" "+Z(se.artBox.bottomLeftY)+" "+Z(se.artBox.topRightX)+" "+Z(se.artBox.topRightY)+"]"),typeof se.userUnit=="number"&&se.userUnit!==1&&Qe("/UserUnit "+se.userUnit),Ur.publish("putPage",{objId:Wt,pageContext:Yn[je],pageNumber:je,page:kt}),Qe("/Contents "+li+" 0 R"),Qe(">>"),Qe("endobj");var Yi=kt.join(`
`);return V===O.ADVANCED&&(Yi+=`
Q`),Te(li,!0),zt({data:Yi,filters:Ht(),objectId:li}),Qe("endobj"),Wt},vt=x.__private__.putPages=function(){var se,je,kt=[];for(se=1;se<=Hr;se++)Yn[se].objId=Pe(),Yn[se].contentsObjId=Pe();for(se=1;se<=Hr;se++)kt.push(ti({number:se,data:Dt[se],objId:Yn[se].objId,contentsObjId:Yn[se].contentsObjId,mediaBox:Yn[se].mediaBox,cropBox:Yn[se].cropBox,bleedBox:Yn[se].bleedBox,trimBox:Yn[se].trimBox,artBox:Yn[se].artBox,userUnit:Yn[se].userUnit,rootDictionaryObjId:ft,resourceDictionaryObjId:_t}));Te(ft,!0),Qe("<</Type /Pages");var Wt="/Kids [";for(je=0;je<Hr;je++)Wt+=kt[je]+" 0 R ";Qe(Wt+"]"),Qe("/Count "+Hr),Qe(">>"),Qe("endobj"),Ur.publish("postPutPages")},ji=function(se){Ur.publish("putFont",{font:se,out:Qe,newObject:wo,putStream:zt}),se.isAlreadyPutted!==!0&&(se.objectNumber=wo(),Qe("<<"),Qe("/Type /Font"),Qe("/BaseFont /"+O0(se.postScriptName)),Qe("/Subtype /Type1"),typeof se.encoding=="string"&&Qe("/Encoding /"+se.encoding),Qe("/FirstChar 32"),Qe("/LastChar 255"),Qe(">>"),Qe("endobj"))},Di=function(){for(var se in qn)qn.hasOwnProperty(se)&&(v===!1||v===!0&&w.hasOwnProperty(se))&&ji(qn[se])},In=function(se){se.objectNumber=wo();var je=[];je.push({key:"Type",value:"/XObject"}),je.push({key:"Subtype",value:"/Form"}),je.push({key:"BBox",value:"["+[Z(se.x),Z(se.y),Z(se.x+se.width),Z(se.y+se.height)].join(" ")+"]"}),je.push({key:"Matrix",value:"["+se.matrix.toString()+"]"});var kt=se.pages[1].join(`
`);zt({data:kt,additionalKeyValues:je,objectId:se.objectNumber}),Qe("endobj")},kn=function(){for(var se in Jn)Jn.hasOwnProperty(se)&&In(Jn[se])},St=function(se,je){var kt,Wt=[],li=1/(je-1);for(kt=0;kt<1;kt+=li)Wt.push(kt);if(Wt.push(1),se[0].offset!=0){var Yi={offset:0,color:se[0].color};se.unshift(Yi)}if(se[se.length-1].offset!=1){var cn={offset:1,color:se[se.length-1].color};se.push(cn)}for(var Xn="",wr=0,Fr=0;Fr<Wt.length;Fr++){for(kt=Wt[Fr];kt>se[wr+1].offset;)wr++;var Gr=se[wr].offset,eo=(kt-Gr)/(se[wr+1].offset-Gr),zo=se[wr].color,Go=se[wr+1].color;Xn+=ge(Math.round((1-eo)*zo[0]+eo*Go[0]).toString(16))+ge(Math.round((1-eo)*zo[1]+eo*Go[1]).toString(16))+ge(Math.round((1-eo)*zo[2]+eo*Go[2]).toString(16))}return Xn.trim()},Bn=function(se,je){je||(je=21);var kt=wo(),Wt=St(se.colors,je),li=[];li.push({key:"FunctionType",value:"0"}),li.push({key:"Domain",value:"[0.0 1.0]"}),li.push({key:"Size",value:"["+je+"]"}),li.push({key:"BitsPerSample",value:"8"}),li.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),li.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zt({data:Wt,additionalKeyValues:li,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:kt}),Qe("endobj"),se.objectNumber=wo(),Qe("<< /ShadingType "+se.type),Qe("/ColorSpace /DeviceRGB");var Yi="/Coords ["+Z(parseFloat(se.coords[0]))+" "+Z(parseFloat(se.coords[1]))+" ";se.type===2?Yi+=Z(parseFloat(se.coords[2]))+" "+Z(parseFloat(se.coords[3])):Yi+=Z(parseFloat(se.coords[2]))+" "+Z(parseFloat(se.coords[3]))+" "+Z(parseFloat(se.coords[4]))+" "+Z(parseFloat(se.coords[5])),Qe(Yi+="]"),se.matrix&&Qe("/Matrix ["+se.matrix.toString()+"]"),Qe("/Function "+kt+" 0 R"),Qe("/Extend [true true]"),Qe(">>"),Qe("endobj")},er=function(se,je){var kt=Pe(),Wt=wo();je.push({resourcesOid:kt,objectOid:Wt}),se.objectNumber=Wt;var li=[];li.push({key:"Type",value:"/Pattern"}),li.push({key:"PatternType",value:"1"}),li.push({key:"PaintType",value:"1"}),li.push({key:"TilingType",value:"1"}),li.push({key:"BBox",value:"["+se.boundingBox.map(Z).join(" ")+"]"}),li.push({key:"XStep",value:Z(se.xStep)}),li.push({key:"YStep",value:Z(se.yStep)}),li.push({key:"Resources",value:kt+" 0 R"}),se.matrix&&li.push({key:"Matrix",value:"["+se.matrix.toString()+"]"}),zt({data:se.stream,additionalKeyValues:li,objectId:se.objectNumber}),Qe("endobj")},Dr=function(se){var je;for(je in an)an.hasOwnProperty(je)&&(an[je]instanceof Gf?Bn(an[je]):an[je]instanceof N0&&er(an[je],se))},vr=function(se){for(var je in se.objectNumber=wo(),Qe("<<"),se)switch(je){case"opacity":Qe("/ca "+xe(se[je]));break;case"stroke-opacity":Qe("/CA "+xe(se[je]))}Qe(">>"),Qe("endobj")},Tr=function(){var se;for(se in mr)mr.hasOwnProperty(se)&&vr(mr[se])},zr=function(){for(var se in Qe("/XObject <<"),Jn)Jn.hasOwnProperty(se)&&Jn[se].objectNumber>=0&&Qe("/"+se+" "+Jn[se].objectNumber+" 0 R");Ur.publish("putXobjectDict"),Qe(">>")},po=function(){U.oid=wo(),Qe("<<"),Qe("/Filter /Standard"),Qe("/V "+U.v),Qe("/R "+U.r),Qe("/U <"+U.toHexString(U.U)+">"),Qe("/O <"+U.toHexString(U.O)+">"),Qe("/P "+U.P),Qe(">>"),Qe("endobj")},ts=function(){for(var se in Qe("/Font <<"),qn)qn.hasOwnProperty(se)&&(v===!1||v===!0&&w.hasOwnProperty(se))&&Qe("/"+se+" "+qn[se].objectNumber+" 0 R");Qe(">>")},_o=function(){if(Object.keys(an).length>0){for(var se in Qe("/Shading <<"),an)an.hasOwnProperty(se)&&an[se]instanceof Gf&&an[se].objectNumber>=0&&Qe("/"+se+" "+an[se].objectNumber+" 0 R");Ur.publish("putShadingPatternDict"),Qe(">>")}},is=function(se){if(Object.keys(an).length>0){for(var je in Qe("/Pattern <<"),an)an.hasOwnProperty(je)&&an[je]instanceof x.TilingPattern&&an[je].objectNumber>=0&&an[je].objectNumber<se&&Qe("/"+je+" "+an[je].objectNumber+" 0 R");Ur.publish("putTilingPatternDict"),Qe(">>")}},al=function(){if(Object.keys(mr).length>0){var se;for(se in Qe("/ExtGState <<"),mr)mr.hasOwnProperty(se)&&mr[se].objectNumber>=0&&Qe("/"+se+" "+mr[se].objectNumber+" 0 R");Ur.publish("putGStateDict"),Qe(">>")}},Ro=function(se){Te(se.resourcesOid,!0),Qe("<<"),Qe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ts(),_o(),is(se.objectOid),al(),zr(),Qe(">>"),Qe("endobj")},Ft=function(){var se=[];Di(),Tr(),kn(),Dr(se),Ur.publish("putResources"),se.forEach(Ro),Ro({resourcesOid:_t,objectOid:Number.MAX_SAFE_INTEGER}),Ur.publish("postPutResources")},tr=function(){Ur.publish("putAdditionalObjects");for(var se=0;se<$e.length;se++){var je=$e[se];Te(je.objId,!0),Qe(je.content),Qe("endobj")}Ur.publish("postPutAdditionalObjects")},ur=function(se){bn[se.fontName]=bn[se.fontName]||{},bn[se.fontName][se.fontStyle]=se.id},Or=function(se,je,kt,Wt,li){var Yi={id:"F"+(Object.keys(qn).length+1).toString(10),postScriptName:se,fontName:je,fontStyle:kt,encoding:Wt,isStandardFont:li||!1,metadata:{}};return Ur.publish("addFont",{font:Yi,instance:this}),qn[Yi.id]=Yi,ur(Yi),Yi.id},Ko=function(se){for(var je=0,kt=Zt.length;je<kt;je++){var Wt=Or.call(this,se[je][0],se[je][1],se[je][2],Zt[je][3],!0);v===!1&&(w[Wt]=!0);var li=se[je][0].split("-");ur({id:Wt,fontName:li[0],fontStyle:li[1]||""})}Ur.publish("addFonts",{fonts:qn,dictionary:bn})},Bo=function(se){return se.foo=function(){try{return se.apply(this,arguments)}catch(Wt){var je=Wt.stack||"";~je.indexOf(" at ")&&(je=je.split(" at ")[1]);var kt="Error in function "+je.split(`
`)[0].split("<")[0]+": "+Wt.message;if(!Nr.console)throw new Error(kt);Nr.console.error(kt,Wt),Nr.alert&&alert(kt)}},se.foo.bar=se,se.foo},La=function(se,je){var kt,Wt,li,Yi,cn,Xn,wr,Fr,Gr;if(li=(je=je||{}).sourceEncoding||"Unicode",cn=je.outputEncoding,(je.autoencode||cn)&&qn[et].metadata&&qn[et].metadata[li]&&qn[et].metadata[li].encoding&&(Yi=qn[et].metadata[li].encoding,!cn&&qn[et].encoding&&(cn=qn[et].encoding),!cn&&Yi.codePages&&(cn=Yi.codePages[0]),typeof cn=="string"&&(cn=Yi[cn]),cn)){for(wr=!1,Xn=[],kt=0,Wt=se.length;kt<Wt;kt++)(Fr=cn[se.charCodeAt(kt)])?Xn.push(String.fromCharCode(Fr)):Xn.push(se[kt]),Xn[kt].charCodeAt(0)>>8&&(wr=!0);se=Xn.join("")}for(kt=se.length;wr===void 0&&kt!==0;)se.charCodeAt(kt-1)>>8&&(wr=!0),kt--;if(!wr)return se;for(Xn=je.noBOM?[]:[254,255],kt=0,Wt=se.length;kt<Wt;kt++){if((Gr=(Fr=se.charCodeAt(kt))>>8)>>8)throw new Error("Character at position "+kt+" of string '"+se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xn.push(Gr),Xn.push(Fr-(Gr<<8))}return String.fromCharCode.apply(void 0,Xn)},rs=x.__private__.pdfEscape=x.pdfEscape=function(se,je){return La(se,je).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qs=x.__private__.beginPage=function(se){Dt[++Hr]=[],Yn[Hr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(se[0]),topRightY:Number(se[1])}},Es(Hr),xt(Dt[Ie])},xs=function(se,je){var kt,Wt,li;switch(t=je||t,typeof se=="string"&&(kt=M(se.toLowerCase()),Array.isArray(kt)&&(Wt=kt[0],li=kt[1])),Array.isArray(se)&&(Wt=se[0]*bt,li=se[1]*bt),isNaN(Wt)&&(Wt=l[0],li=l[1]),(Wt>14400||li>14400)&&(ps.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Wt=Math.min(14400,Wt),li=Math.min(14400,li)),l=[Wt,li],t.substr(0,1)){case"l":li>Wt&&(l=[li,Wt]);break;case"p":Wt>li&&(l=[li,Wt])}qs(l),Zn(F),Qe(Gs),zu!==0&&Qe(zu+" J"),gu!==0&&Qe(gu+" j"),Ur.publish("addPage",{pageNumber:Hr})},Pa=function(se){se>0&&se<=Hr&&(Dt.splice(se,1),Yn.splice(se,1),Hr--,Ie>Hr&&(Ie=Hr),this.setPage(Ie))},Es=function(se){se>0&&se<=Hr&&(Ie=se)},Ks=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Dt.length-1},Hs=function(se,je,kt){var Wt,li=void 0;return kt=kt||{},se=se!==void 0?se:qn[et].fontName,je=je!==void 0?je:qn[et].fontStyle,Wt=se.toLowerCase(),bn[Wt]!==void 0&&bn[Wt][je]!==void 0?li=bn[Wt][je]:bn[se]!==void 0&&bn[se][je]!==void 0?li=bn[se][je]:kt.disableWarning===!1&&ps.warn("Unable to look up font label for font '"+se+"', '"+je+"'. Refer to getFontList() for available fonts."),li||kt.noFallback||(li=bn.times[je])==null&&(li=bn.times.normal),li},Ma=x.__private__.putInfo=function(){var se=wo(),je=function(Wt){return Wt};for(var kt in _!==null&&(je=U.encryptor(se,0)),Qe("<<"),Qe("/Producer ("+rs(je("jsPDF "+Br.version))+")"),ae)ae.hasOwnProperty(kt)&&ae[kt]&&Qe("/"+kt.substr(0,1).toUpperCase()+kt.substr(1)+" ("+rs(je(ae[kt]))+")");Qe("/CreationDate ("+rs(je(pt))+")"),Qe(">>"),Qe("endobj")},kl=x.__private__.putCatalog=function(se){var je=(se=se||{}).rootDictionaryObjId||ft;switch(wo(),Qe("<<"),Qe("/Type /Catalog"),Qe("/Pages "+je+" 0 R"),Qt||(Qt="fullwidth"),Qt){case"fullwidth":Qe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Qe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Qe("/OpenAction [3 0 R /Fit]");break;case"original":Qe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var kt=""+Qt;kt.substr(kt.length-1)==="%"&&(Qt=parseInt(Qt)/100),typeof Qt=="number"&&Qe("/OpenAction [3 0 R /XYZ null null "+xe(Qt)+"]")}switch($t||($t="continuous"),$t){case"continuous":Qe("/PageLayout /OneColumn");break;case"single":Qe("/PageLayout /SinglePage");break;case"two":case"twoleft":Qe("/PageLayout /TwoColumnLeft");break;case"tworight":Qe("/PageLayout /TwoColumnRight")}Ji&&Qe("/PageMode /"+Ji),Ur.publish("putCatalog"),Qe(">>"),Qe("endobj")},fu=x.__private__.putTrailer=function(){Qe("trailer"),Qe("<<"),Qe("/Size "+(Re+1)),Qe("/Root "+Re+" 0 R"),Qe("/Info "+(Re-1)+" 0 R"),_!==null&&Qe("/Encrypt "+U.oid+" 0 R"),Qe("/ID [ <"+rt+"> <"+rt+"> ]"),Qe(">>")},Cl=x.__private__.putHeader=function(){Qe("%PDF-"+C),Qe("%\xBA\xDF\xAC\xE0")},du=x.__private__.putXRef=function(){var se="0000000000";Qe("xref"),Qe("0 "+(Re+1)),Qe("0000000000 65535 f ");for(var je=1;je<=Re;je++)typeof Ze[je]=="function"?Qe((se+Ze[je]()).slice(-10)+" 00000 n "):Ze[je]!==void 0?Qe((se+Ze[je]).slice(-10)+" 00000 n "):Qe("0000000000 00000 n ")},pa=x.__private__.buildDocument=function(){At(),xt(ut),Ur.publish("buildDocument"),Cl(),vt(),tr(),Ft(),_!==null&&po(),Ma(),kl();var se=Xe;return du(),fu(),Qe("startxref"),Qe(""+se),Qe("%%EOF"),xt(Dt[Ie]),ut.join(`
`)},ma=x.__private__.getBlob=function(se){return new Blob([si(se)],{type:"application/pdf"})},Io=x.output=x.__private__.output=Bo(function(se,je){switch(typeof(je=je||{})=="string"?je={filename:je}:je.filename=je.filename||"generated.pdf",se){case void 0:return pa();case"save":x.save(je.filename);break;case"arraybuffer":return si(pa());case"blob":return ma(pa());case"bloburi":case"bloburl":if(Nr.URL!==void 0&&typeof Nr.URL.createObjectURL=="function")return Nr.URL&&Nr.URL.createObjectURL(ma(pa()))||void 0;ps.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var kt="",Wt=pa();try{kt=K2(Wt)}catch{kt=K2(unescape(encodeURIComponent(Wt)))}return"data:application/pdf;filename="+je.filename+";base64,"+kt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var li="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Yi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';je.pdfObjectUrl&&(li=je.pdfObjectUrl,Yi="");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+li+'"'+Yi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(je)+");<\/script></body></html>",Xn=Nr.open();return Xn!==null&&Xn.document.write(cn),Xn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(je.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+je.filename+'" width="500px" height="400px" /></body></html>',Fr=Nr.open();if(Fr!==null){Fr.document.write(wr);var Gr=this;Fr.document.documentElement.querySelector("#pdfViewer").onload=function(){Fr.document.title=je.filename,Fr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Gr.output("bloburl"))}}return Fr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var eo='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",je)+'"></iframe></body></html>',zo=Nr.open();if(zo!==null&&(zo.document.write(eo),zo.document.title=je.filename),zo||typeof safari>"u")return zo;break;case"datauri":case"dataurl":return Nr.document.location.href=this.output("datauristring",je);default:return null}}),ll=function(se){return Array.isArray(co)===!0&&co.indexOf(se)>-1};switch(n){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=ll("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);bt=n}var U=null;Ue(),We();var $=function(se){return _!==null?U.encryptor(se,0):function(je){return je}},ye=x.__private__.getPageInfo=x.getPageInfo=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yn[se].objId,pageNumber:se,pageContext:Yn[se]}},De=x.__private__.getPageInfoByObjId=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var je in Yn)if(Yn[je].objId===se)break;return ye(je)},ot=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Yn[Ie].objId,pageNumber:Ie,pageContext:Yn[Ie]}};x.addPage=function(){return xs.apply(this,arguments),this},x.setPage=function(){return Es.apply(this,arguments),xt.call(this,Dt[Ie]),this},x.insertPage=function(se){return this.addPage(),this.movePage(Ie,se),this},x.movePage=function(se,je){var kt,Wt;if(se>je){kt=Dt[se],Wt=Yn[se];for(var li=se;li>je;li--)Dt[li]=Dt[li-1],Yn[li]=Yn[li-1];Dt[je]=kt,Yn[je]=Wt,this.setPage(je)}else if(se<je){kt=Dt[se],Wt=Yn[se];for(var Yi=se;Yi<je;Yi++)Dt[Yi]=Dt[Yi+1],Yn[Yi]=Yn[Yi+1];Dt[je]=kt,Yn[je]=Wt,this.setPage(je)}return this},x.deletePage=function(){return Pa.apply(this,arguments),this},x.__private__.text=x.text=function(se,je,kt,Wt,li){var Yi,cn,Xn,wr,Fr,Gr,eo,zo,Go,Yo=(Wt=Wt||{}).scope||this;if(typeof se=="number"&&typeof je=="number"&&(typeof kt=="string"||Array.isArray(kt))){var Is=kt;kt=je,je=se,se=Is}if(arguments[3]instanceof un?(ie("The transform parameter of text() with a Matrix value"),Go=li):(Xn=arguments[4],wr=arguments[5],ns(eo=arguments[3])==="object"&&eo!==null||(typeof Xn=="string"&&(wr=Xn,Xn=null),typeof eo=="string"&&(wr=eo,eo=null),typeof eo=="number"&&(Xn=eo,eo=null),Wt={flags:eo,angle:Xn,align:wr})),isNaN(je)||isNaN(kt)||se==null)throw new Error("Invalid arguments passed to jsPDF.text");if(se.length===0)return Yo;var ms="",Rr=!1,Ts=typeof Wt.lineHeightFactor=="number"?Wt.lineHeightFactor:h,As=Yo.internal.scaleFactor;function Yl(No){return No=No.split("	").join(Array(Wt.TabLen||9).join(" ")),rs(No,eo)}function Il(No){for(var Vr,Po=No.concat(),os=[],mn=Po.length;mn--;)typeof(Vr=Po.shift())=="string"?os.push(Vr):Array.isArray(No)&&(Vr.length===1||Vr[1]===void 0&&Vr[2]===void 0)?os.push(Vr[0]):os.push([Vr[0],Vr[1],Vr[2]]);return os}function ju(No,Vr){var Po;if(typeof No=="string")Po=Vr(No)[0];else if(Array.isArray(No)){for(var os,mn,za=No.concat(),Hu=[],Gu=za.length;Gu--;)typeof(os=za.shift())=="string"?Hu.push(Vr(os)[0]):Array.isArray(os)&&typeof os[0]=="string"&&(mn=Vr(os[0],os[1],os[2]),Hu.push([mn[0],mn[1],mn[2]]));Po=Hu}return Po}var Da=!1,Tl=!0;if(typeof se=="string")Da=!0;else if(Array.isArray(se)){var ul=se.concat();cn=[];for(var Uu,Rs=ul.length;Rs--;)(typeof(Uu=ul.shift())!="string"||Array.isArray(Uu)&&typeof Uu[0]!="string")&&(Tl=!1);Da=Tl}if(Da===!1)throw new Error('Type of text must be string or Array. "'+se+'" is not recognized.');typeof se=="string"&&(se=se.match(/[\r?\n]/)?se.split(/\r\n|\r|\n/g):[se]);var vu=Ei/Yo.internal.scaleFactor,Zl=vu*(Ts-1);switch(Wt.baseline){case"bottom":kt-=Zl;break;case"top":kt+=vu-Zl;break;case"hanging":kt+=vu-2*Zl;break;case"middle":kt+=vu/2-Zl}if((Gr=Wt.maxWidth||0)>0&&(typeof se=="string"?se=Yo.splitTextToSize(se,Gr):Object.prototype.toString.call(se)==="[object Array]"&&(se=se.reduce(function(No,Vr){return No.concat(Yo.splitTextToSize(Vr,Gr))},[]))),Yi={text:se,x:je,y:kt,options:Wt,mutex:{pdfEscape:rs,activeFontKey:et,fonts:qn,activeFontSize:Ei}},Ur.publish("preProcessText",Yi),se=Yi.text,Xn=(Wt=Yi.options).angle,!(Go instanceof un)&&Xn&&typeof Xn=="number"){Xn*=Math.PI/180,Wt.rotationDirection===0&&(Xn=-Xn),V===O.ADVANCED&&(Xn=-Xn);var Xa=Math.cos(Xn),bu=Math.sin(Xn);Go=new un(Xa,bu,-bu,Xa,0,0)}else Xn&&Xn instanceof un&&(Go=Xn);V!==O.ADVANCED||Go||(Go=Ho),(Fr=Wt.charSpace||mu)!==void 0&&(ms+=Z(Ee(Fr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(zo=Wt.horizontalScale)!==void 0&&(ms+=Z(100*zo)+` Tz
`),Wt.lang;var Bs=-1,wu=Wt.renderingMode!==void 0?Wt.renderingMode:Wt.stroke,cl=Yo.internal.getCurrentPageInfo().pageContext;switch(wu){case 0:case!1:case"fill":Bs=0;break;case 1:case!0:case"stroke":Bs=1;break;case 2:case"fillThenStroke":Bs=2;break;case 3:case"invisible":Bs=3;break;case 4:case"fillAndAddForClipping":Bs=4;break;case 5:case"strokeAndAddPathForClipping":Bs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bs=6;break;case 7:case"addToPathForClipping":Bs=7}var Kl=cl.usedRenderingMode!==void 0?cl.usedRenderingMode:-1;Bs!==-1?ms+=Bs+` Tr
`:Kl!==-1&&(ms+=`0 Tr
`),Bs!==-1&&(cl.usedRenderingMode=Bs),wr=Wt.align||"left";var Oa,Ll=Ei*Ts,Fc=Yo.internal.pageSize.getWidth(),Rc=qn[et];Fr=Wt.charSpace||mu,Gr=Wt.maxWidth||0,eo=Object.assign({autoencode:!0,noBOM:!0},Wt.flags);var Pl=[];if(Object.prototype.toString.call(se)==="[object Array]"){var zs;cn=Il(se),wr!=="left"&&(Oa=cn.map(function(No){return Yo.getStringUnitWidth(No,{font:Rc,charSpace:Fr,fontSize:Ei,doKerning:!1})*Ei/As}));var Fa,Ra=0;if(wr==="right"){je-=Oa[0],se=[],Rs=cn.length;for(var sa=0;sa<Rs;sa++)sa===0?(Fa=ga(je),zs=Ga(kt)):(Fa=Ee(Ra-Oa[sa]),zs=-Ll),se.push([cn[sa],Fa,zs]),Ra=Oa[sa]}else if(wr==="center"){je-=Oa[0]/2,se=[],Rs=cn.length;for(var hs=0;hs<Rs;hs++)hs===0?(Fa=ga(je),zs=Ga(kt)):(Fa=Ee((Ra-Oa[hs])/2),zs=-Ll),se.push([cn[hs],Fa,zs]),Ra=Oa[hs]}else if(wr==="left"){se=[],Rs=cn.length;for(var hl=0;hl<Rs;hl++)se.push(cn[hl])}else{if(wr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');se=[],Rs=cn.length,Gr=Gr!==0?Gr:Fc;for(var Jo=0;Jo<Rs;Jo++)zs=Jo===0?Ga(kt):-Ll,Fa=Jo===0?ga(je):0,Jo<Rs-1?Pl.push(Z(Ee((Gr-Oa[Jo])/(cn[Jo].split(" ").length-1)))):Pl.push(0),se.push([cn[Jo],Fa,zs])}}var Vu=typeof Wt.R2L=="boolean"?Wt.R2L:ai;Vu===!0&&(se=ju(se,function(No,Vr,Po){return[No.split("").reverse().join(""),Vr,Po]})),Yi={text:se,x:je,y:kt,options:Wt,mutex:{pdfEscape:rs,activeFontKey:et,fonts:qn,activeFontSize:Ei}},Ur.publish("postProcessText",Yi),se=Yi.text,Rr=Yi.mutex.isHex||!1;var Ba=qn[et].encoding;Ba!=="WinAnsiEncoding"&&Ba!=="StandardEncoding"||(se=ju(se,function(No,Vr,Po){return[Yl(No),Vr,Po]})),cn=Il(se),se=[];for(var aa,Wr,va,Ml=0,qu=1,xu=Array.isArray(cn[0])?qu:Ml,Ws="",Dl=function(No,Vr,Po){var os="";return Po instanceof un?(Po=typeof Wt.angle=="number"?He(Po,new un(1,0,0,1,No,Vr)):He(new un(1,0,0,1,No,Vr),Po),V===O.ADVANCED&&(Po=He(new un(1,0,0,-1,0,0),Po)),os=Po.join(" ")+` Tm
`):os=Z(No)+" "+Z(Vr)+` Td
`,os},gs=0;gs<cn.length;gs++){switch(Ws="",xu){case qu:va=(Rr?"<":"(")+cn[gs][0]+(Rr?">":")"),aa=parseFloat(cn[gs][1]),Wr=parseFloat(cn[gs][2]);break;case Ml:va=(Rr?"<":"(")+cn[gs]+(Rr?">":")"),aa=ga(je),Wr=Ga(kt)}Pl!==void 0&&Pl[gs]!==void 0&&(Ws=Pl[gs]+` Tw
`),gs===0?se.push(Ws+Dl(aa,Wr,Go)+va):xu===Ml?se.push(Ws+va):xu===qu&&se.push(Ws+Dl(aa,Wr,Go)+va)}se=xu===Ml?se.join(` Tj
T* `):se.join(` Tj
`),se+=` Tj
`;var Cn=`BT
/`;return Cn+=et+" "+Ei+` Tf
`,Cn+=Z(Ei*Ts)+` TL
`,Cn+=pu+`
`,Cn+=ms,Cn+=se,Qe(Cn+="ET"),w[et]=!0,Yo};var It=x.__private__.clip=x.clip=function(se){return Qe(se==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return It("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Qe("n"),this};var Nt=x.__private__.isValidStyle=function(se){var je=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(se)!==-1&&(je=!0),je};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(se){return Nt(se)&&(g=se),this};var Bt=x.__private__.getStyle=x.getStyle=function(se){var je=g;switch(se){case"D":case"S":je="S";break;case"F":je="f";break;case"FD":case"DF":je="B";break;case"f":case"f*":case"B":case"B*":je=se}return je},yi=x.close=function(){return Qe("h"),this};x.stroke=function(){return Qe("S"),this},x.fill=function(se){return pi("f",se),this},x.fillEvenOdd=function(se){return pi("f*",se),this},x.fillStroke=function(se){return pi("B",se),this},x.fillStrokeEvenOdd=function(se){return pi("B*",se),this};var pi=function(se,je){ns(je)==="object"?qi(je,se):Qe(se)},mi=function(se){se===null||V===O.ADVANCED&&se===void 0||(se=Bt(se),Qe(se))};function ri(se,je,kt,Wt,li){var Yi=new N0(je||this.boundingBox,kt||this.xStep,Wt||this.yStep,this.gState,li||this.matrix);Yi.stream=this.stream;var cn=se+"$$"+this.cloneIndex+++"$$";return Do(cn,Yi),Yi}var qi=function(se,je){var kt=Kn[se.key],Wt=an[kt];if(Wt instanceof Gf)Qe("q"),Qe(sn(je)),Wt.gState&&x.setGState(Wt.gState),Qe(se.matrix.toString()+" cm"),Qe("/"+kt+" sh"),Qe("Q");else if(Wt instanceof N0){var li=new un(1,0,0,-1,0,_a());se.matrix&&(li=li.multiply(se.matrix||Ho),kt=ri.call(Wt,se.key,se.boundingBox,se.xStep,se.yStep,li).id),Qe("q"),Qe("/Pattern cs"),Qe("/"+kt+" scn"),Wt.gState&&x.setGState(Wt.gState),Qe(je),Qe("Q")}},sn=function(se){switch(se){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Sn=x.moveTo=function(se,je){return Qe(Z(Ee(se))+" "+Z(Ae(je))+" m"),this},dt=x.lineTo=function(se,je){return Qe(Z(Ee(se))+" "+Z(Ae(je))+" l"),this},m=x.curveTo=function(se,je,kt,Wt,li,Yi){return Qe([Z(Ee(se)),Z(Ae(je)),Z(Ee(kt)),Z(Ae(Wt)),Z(Ee(li)),Z(Ae(Yi)),"c"].join(" ")),this};x.__private__.line=x.line=function(se,je,kt,Wt,li){if(isNaN(se)||isNaN(je)||isNaN(kt)||isNaN(Wt)||!Nt(li))throw new Error("Invalid arguments passed to jsPDF.line");return V===O.COMPAT?this.lines([[kt-se,Wt-je]],se,je,[1,1],li||"S"):this.lines([[kt-se,Wt-je]],se,je,[1,1]).stroke()},x.__private__.lines=x.lines=function(se,je,kt,Wt,li,Yi){var cn,Xn,wr,Fr,Gr,eo,zo,Go,Yo,Is,ms,Rr;if(typeof se=="number"&&(Rr=kt,kt=je,je=se,se=Rr),Wt=Wt||[1,1],Yi=Yi||!1,isNaN(je)||isNaN(kt)||!Array.isArray(se)||!Array.isArray(Wt)||!Nt(li)||typeof Yi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sn(je,kt),cn=Wt[0],Xn=Wt[1],Fr=se.length,Is=je,ms=kt,wr=0;wr<Fr;wr++)(Gr=se[wr]).length===2?(Is=Gr[0]*cn+Is,ms=Gr[1]*Xn+ms,dt(Is,ms)):(eo=Gr[0]*cn+Is,zo=Gr[1]*Xn+ms,Go=Gr[2]*cn+Is,Yo=Gr[3]*Xn+ms,Is=Gr[4]*cn+Is,ms=Gr[5]*Xn+ms,m(eo,zo,Go,Yo,Is,ms));return Yi&&yi(),mi(li),this},x.path=function(se){for(var je=0;je<se.length;je++){var kt=se[je],Wt=kt.c;switch(kt.op){case"m":Sn(Wt[0],Wt[1]);break;case"l":dt(Wt[0],Wt[1]);break;case"c":m.apply(this,Wt);break;case"h":yi()}}return this},x.__private__.rect=x.rect=function(se,je,kt,Wt,li){if(isNaN(se)||isNaN(je)||isNaN(kt)||isNaN(Wt)||!Nt(li))throw new Error("Invalid arguments passed to jsPDF.rect");return V===O.COMPAT&&(Wt=-Wt),Qe([Z(Ee(se)),Z(Ae(je)),Z(Ee(kt)),Z(Ee(Wt)),"re"].join(" ")),mi(li),this},x.__private__.triangle=x.triangle=function(se,je,kt,Wt,li,Yi,cn){if(isNaN(se)||isNaN(je)||isNaN(kt)||isNaN(Wt)||isNaN(li)||isNaN(Yi)||!Nt(cn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[kt-se,Wt-je],[li-kt,Yi-Wt],[se-li,je-Yi]],se,je,[1,1],cn,!0),this},x.__private__.roundedRect=x.roundedRect=function(se,je,kt,Wt,li,Yi,cn){if(isNaN(se)||isNaN(je)||isNaN(kt)||isNaN(Wt)||isNaN(li)||isNaN(Yi)||!Nt(cn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Xn=4/3*(Math.SQRT2-1);return li=Math.min(li,.5*kt),Yi=Math.min(Yi,.5*Wt),this.lines([[kt-2*li,0],[li*Xn,0,li,Yi-Yi*Xn,li,Yi],[0,Wt-2*Yi],[0,Yi*Xn,-li*Xn,Yi,-li,Yi],[2*li-kt,0],[-li*Xn,0,-li,-Yi*Xn,-li,-Yi],[0,2*Yi-Wt],[0,-Yi*Xn,li*Xn,-Yi,li,-Yi]],se+li,je,[1,1],cn,!0),this},x.__private__.ellipse=x.ellipse=function(se,je,kt,Wt,li){if(isNaN(se)||isNaN(je)||isNaN(kt)||isNaN(Wt)||!Nt(li))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Yi=4/3*(Math.SQRT2-1)*kt,cn=4/3*(Math.SQRT2-1)*Wt;return Sn(se+kt,je),m(se+kt,je-cn,se+Yi,je-Wt,se,je-Wt),m(se-Yi,je-Wt,se-kt,je-cn,se-kt,je),m(se-kt,je+cn,se-Yi,je+Wt,se,je+Wt),m(se+Yi,je+Wt,se+kt,je+cn,se+kt,je),mi(li),this},x.__private__.circle=x.circle=function(se,je,kt,Wt){if(isNaN(se)||isNaN(je)||isNaN(kt)||!Nt(Wt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(se,je,kt,kt,Wt)},x.setFont=function(se,je,kt){return kt&&(je=Q(je,kt)),et=Hs(se,je,{disableWarning:!1}),this};var Ri=x.__private__.getFont=x.getFont=function(){return qn[Hs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var se,je,kt={};for(se in bn)if(bn.hasOwnProperty(se))for(je in kt[se]=[],bn[se])bn[se].hasOwnProperty(je)&&kt[se].push(je);return kt},x.addFont=function(se,je,kt,Wt,li){var Yi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Yi.indexOf(arguments[3])!==-1?li=arguments[3]:arguments[3]&&Yi.indexOf(arguments[3])==-1&&(kt=Q(kt,Wt)),li=li||"Identity-H",Or.call(this,se,je,kt,li)};var h,F=i.lineWidth||.200025,dn=x.__private__.getLineWidth=x.getLineWidth=function(){return F},Zn=x.__private__.setLineWidth=x.setLineWidth=function(se){return F=se,Qe(Z(Ee(se))+" w"),this};x.__private__.setLineDash=Br.API.setLineDash=Br.API.setLineDashPattern=function(se,je){if(se=se||[],je=je||0,isNaN(je)||!Array.isArray(se))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return se=se.map(function(kt){return Z(Ee(kt))}).join(" "),je=Z(Ee(je)),Qe("["+se+"] "+je+" d"),this};var xo=x.__private__.getLineHeight=x.getLineHeight=function(){return Ei*h};x.__private__.getLineHeight=x.getLineHeight=function(){return Ei*h};var re=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(se){return typeof(se=se||1.15)=="number"&&(h=se),this},Mr=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return h};re(i.lineHeight);var ga=x.__private__.getHorizontalCoordinate=function(se){return Ee(se)},Ga=x.__private__.getVerticalCoordinate=function(se){return V===O.ADVANCED?se:Yn[Ie].mediaBox.topRightY-Yn[Ie].mediaBox.bottomLeftY-Ee(se)},Oc=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(se){return Z(ga(se))},El=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(se){return Z(Ga(se))},Gs=i.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Ut(Gs)},x.__private__.setStrokeColor=x.setDrawColor=function(se,je,kt,Wt){return Gs=Ge({ch1:se,ch2:je,ch3:kt,ch4:Wt,pdfColorType:"draw",precision:2}),Qe(Gs),this};var ac=i.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Ut(ac)},x.__private__.setFillColor=x.setFillColor=function(se,je,kt,Wt){return ac=Ge({ch1:se,ch2:je,ch3:kt,ch4:Wt,pdfColorType:"fill",precision:2}),Qe(ac),this};var pu=i.textColor||"0 g",hh=x.__private__.getTextColor=x.getTextColor=function(){return Ut(pu)};x.__private__.setTextColor=x.setTextColor=function(se,je,kt,Wt){return pu=Ge({ch1:se,ch2:je,ch3:kt,ch4:Wt,pdfColorType:"text",precision:3}),this};var mu=i.charSpace,fh=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(mu||0)};x.__private__.setCharSpace=x.setCharSpace=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return mu=se,this};var zu=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(se){var je=x.CapJoinStyles[se];if(je===void 0)throw new Error("Line cap style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zu=je,Qe(je+" J"),this};var gu=0;x.__private__.setLineJoin=x.setLineJoin=function(se){var je=x.CapJoinStyles[se];if(je===void 0)throw new Error("Line join style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gu=je,Qe(je+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(se){if(se=se||0,isNaN(se))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Qe(Z(Ee(se))+" M"),this},x.GState=x1,x.setGState=function(se){(se=typeof se=="string"?mr[yo[se]]:yu(null,se)).equals(ar)||(Qe("/"+se.id+" gs"),ar=se)};var yu=function(se,je){if(!se||!yo[se]){var kt=!1;for(var Wt in mr)if(mr.hasOwnProperty(Wt)&&mr[Wt].equals(je)){kt=!0;break}if(kt)je=mr[Wt];else{var li="GS"+(Object.keys(mr).length+1).toString(10);mr[li]=je,je.id=li}return se&&(yo[se]=je.id),Ur.publish("addGState",je),je}};x.addGState=function(se,je){return yu(se,je),this},x.saveGraphicsState=function(){return Qe("q"),Gi.push({key:et,size:Ei,color:pu}),this},x.restoreGraphicsState=function(){Qe("Q");var se=Gi.pop();return et=se.key,Ei=se.size,pu=se.color,ar=null,this},x.setCurrentTransformationMatrix=function(se){return Qe(se.toString()+" cm"),this},x.comment=function(se){return Qe("#"+se),this};var Wl=function(se,je){var kt=se||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return kt},set:function(Yi){isNaN(Yi)||(kt=parseFloat(Yi))}});var Wt=je||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Wt},set:function(Yi){isNaN(Yi)||(Wt=parseFloat(Yi))}});var li="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return li},set:function(Yi){li=Yi.toString()}}),this},_u=function(se,je,kt,Wt){Wl.call(this,se,je),this.type="rect";var li=kt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return li},set:function(cn){isNaN(cn)||(li=parseFloat(cn))}});var Yi=Wt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Yi},set:function(cn){isNaN(cn)||(Yi=parseFloat(cn))}}),this},Fn=function(){this.page=Hr,this.currentPage=Ie,this.pages=Dt.slice(0),this.pagesContext=Yn.slice(0),this.x=Xt,this.y=fi,this.matrix=xn,this.width=ya(Ie),this.height=_a(Ie),this.outputDestination=mt,this.id="",this.objectNumber=-1};Fn.prototype.restore=function(){Hr=this.page,Ie=this.currentPage,Yn=this.pagesContext,Dt=this.pages,Xt=this.x,fi=this.y,xn=this.matrix,Xl(Ie,this.width),Ao(Ie,this.height),mt=this.outputDestination};var Pn=function(se,je,kt,Wt,li){Eo.push(new Fn),Hr=Ie=0,Dt=[],Xt=se,fi=je,xn=li,qs([kt,Wt])},Nu=function(se){if(br[se])Eo.pop().restore();else{var je=new Fn,kt="Xo"+(Object.keys(Jn).length+1).toString(10);je.id=kt,br[se]=kt,Jn[kt]=je,Ur.publish("addFormObject",je),Eo.pop().restore()}};for(var Wa in x.beginFormObject=function(se,je,kt,Wt,li){return Pn(se,je,kt,Wt,li),this},x.endFormObject=function(se){return Nu(se),this},x.doFormObject=function(se,je){var kt=Jn[br[se]];return Qe("q"),Qe(je.toString()+" cm"),Qe("/"+kt.id+" Do"),Qe("Q"),this},x.getFormObject=function(se){var je=Jn[br[se]];return{x:je.x,y:je.y,width:je.width,height:je.height,matrix:je.matrix}},x.save=function(se,je){return se=se||"generated.pdf",(je=je||{}).returnPromise=je.returnPromise||!1,je.returnPromise===!1?(qf(ma(pa()),se),typeof qf.unload=="function"&&Nr.setTimeout&&setTimeout(qf.unload,911),this):new Promise(function(kt,Wt){try{var li=qf(ma(pa()),se);typeof qf.unload=="function"&&Nr.setTimeout&&setTimeout(qf.unload,911),kt(li)}catch(Yi){Wt(Yi.message)}})},Br.API)Br.API.hasOwnProperty(Wa)&&(Wa==="events"&&Br.API.events.length?function(se,je){var kt,Wt,li;for(li=je.length-1;li!==-1;li--)kt=je[li][0],Wt=je[li][1],se.subscribe.apply(se,[kt].concat(typeof Wt=="function"?[Wt]:Wt))}(Ur,Br.API.events):x[Wa]=Br.API[Wa]);var ya=x.getPageWidth=function(se){return(Yn[se=se||Ie].mediaBox.topRightX-Yn[se].mediaBox.bottomLeftX)/bt},Xl=x.setPageWidth=function(se,je){Yn[se].mediaBox.topRightX=je*bt+Yn[se].mediaBox.bottomLeftX},_a=x.getPageHeight=function(se){return(Yn[se=se||Ie].mediaBox.topRightY-Yn[se].mediaBox.bottomLeftY)/bt},Ao=x.setPageHeight=function(se,je){Yn[se].mediaBox.topRightY=je*bt+Yn[se].mediaBox.bottomLeftY};return x.internal={pdfEscape:rs,getStyle:Bt,getFont:Ri,getFontSize:Ot,getCharSpace:fh,getTextColor:hh,getLineHeight:xo,getLineHeightFactor:Mr,getLineWidth:dn,write:Yt,getHorizontalCoordinate:ga,getVerticalCoordinate:Ga,getCoordinateString:Oc,getVerticalCoordinateString:El,collections:{},newObject:wo,newAdditionalObject:qe,newObjectDeferred:Pe,newObjectDeferredBegin:Te,getFilters:Ht,putStream:zt,events:Ur,scaleFactor:bt,pageSize:{getWidth:function(){return ya(Ie)},setWidth:function(se){Xl(Ie,se)},getHeight:function(){return _a(Ie)},setHeight:function(se){Ao(Ie,se)}},encryptionOptions:_,encryption:U,getEncryptor:$,output:Io,getNumberOfPages:Ks,pages:Dt,out:Qe,f2:xe,f3:le,getPageInfo:ye,getPageInfoByObjId:De,getCurrentPageInfo:ot,getPDFVersion:T,Point:Wl,Rectangle:_u,Matrix:un,hasHotfix:ll},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return ya(Ie)},set:function(se){Xl(Ie,se)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return _a(Ie)},set:function(se){Ao(Ie,se)},enumerable:!0,configurable:!0}),Ko.call(x,Zt),et="F1",xs(l,t),Ur.publish("initialized"),x}D0.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},D0.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},D0.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},D0.prototype.processOwnerPassword=function(i,e){return Q2(J2(e).substr(0,5),i)},D0.prototype.encryptor=function(i,e){var t=J2(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Q2(t,n)}},x1.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||ns(i)!==ns(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;n++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Br.API={events:[]},Br.version="2.5.1";var Zs=Br.API,Ig=1,n0=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},S0=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kr=function(i){return i.toFixed(2)},rf=function(i){return i.toFixed(5)};Zs.__acroform__={};var hu=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},Q_=function(i){return i*Ig},Zc=function(i){var e=new Q4,t=pr.internal.getHeight(i)||0,n=pr.internal.getWidth(i)||0;return e.BBox=[0,0,Number(Kr(n)),Number(Kr(t))],e},RS=Zs.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},BS=Zs.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},zS=Zs.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<e)==0?0:1},ia=Zs.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zS(i,e-1)},na=Zs.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return RS(i,e-1)},ra=Zs.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BS(i,e-1)},NS=Zs.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,l=i[0],u=i[1],p=i[2],o=i[3],c={};return c.lowerLeft_X=t(l)||0,c.lowerLeft_Y=n(u+o)||0,c.upperRight_X=t(l+p)||0,c.upperRight_Y=n(u)||0,[Number(Kr(c.lowerLeft_X)),Number(Kr(c.lowerLeft_Y)),Number(Kr(c.upperRight_X)),Number(Kr(c.upperRight_Y))]},jS=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,n=$2(i,t),l=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+l+" "+Kr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=Zc(i);return u.scope=i.scope,u.stream=e.join(`
`),u}},$2=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=i.multiline?l.map(function(le){return le.split(`
`)}):l.map(function(le){return[le]});var u=t,p=pr.internal.getHeight(i)||0;p=p<0?-p:p;var o=pr.internal.getWidth(i)||0;o=o<0?-o:o;var c=function(le,Ee,me){if(le+1<l.length){var Ae=Ee+" "+l[le+1][0];return Hp(Ae,i,me).width<=o-4}return!1};u++;e:for(;u>0;){e="",u--;var g,_,v=Hp("3",i,u).height,w=i.multiline?p-u:(p-v)/2,x=w+=2,C=0,T=0,k=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+Hp(e,i,u=12).width+", FieldWidth:"+o+`
`;break}for(var M="",O=0,V=0;V<l.length;V++)if(l.hasOwnProperty(V)){var W=!1;if(l[V].length!==1&&k!==l[V].length-1){if((v+2)*(O+2)+2>p)continue e;M+=l[V][k],W=!0,T=V,V--}else{M=(M+=l[V][k]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var J=parseInt(V),Q=c(J,M,u),Z=V>=l.length-1;if(Q&&!Z){M+=" ",k=0;continue}if(Q||Z){if(Z)T=J;else if(i.multiline&&(v+2)*(O+2)+2>p)continue e}else{if(!i.multiline||(v+2)*(O+2)+2>p)continue e;T=J}}for(var ie="",Se=C;Se<=T;Se++){var xe=l[Se];if(i.multiline){if(Se===T){ie+=xe[k]+" ",k=(k+1)%xe.length;continue}if(Se===C){ie+=xe[xe.length-1]+" ";continue}}ie+=xe[0]+" "}switch(ie=ie.substr(ie.length-1)==" "?ie.substr(0,ie.length-1):ie,_=Hp(ie,i,u).width,i.textAlign){case"right":g=o-_-2;break;case"center":g=(o-_)/2;break;case"left":default:g=2}e+=Kr(g)+" "+Kr(x)+` Td
`,e+="("+n0(ie)+`) Tj
`,e+=-Kr(g)+` 0 Td
`,x=-(u+2),_=0,C=W?T:T+1,O++,M=""}break}return n.text=e,n.fontSize=u,n},Hp=function(i,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:l}},US={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VS=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},qS=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var n=t,l=i[t];e.internal.newObjectDeferredBegin(l.objId,!0),ns(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete i[n]}},HS=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Pc.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(US)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ig=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new $4,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in n)if(n.hasOwnProperty(l)){var u=n[l];u.objId=void 0,u.hasAnnotation&&VS(u,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(n,l){var u=!n;for(var p in n||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(p)){var o=n[p],c=[],g=o.Rect;if(o.Rect&&(o.Rect=NS(o.Rect,l)),l.internal.newObjectDeferredBegin(o.objId,!0),o.DA=pr.createDefaultAppearanceStream(o),ns(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=g,o.hasAppearanceStream&&!o.appearanceStreamContent){var _=jS(o);c.push({key:"AP",value:"<</N "+_+">>"}),l.internal.acroformPlugin.xForms.push(_)}if(o.appearanceStreamContent){var v="";for(var w in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(w)){var x=o.appearanceStreamContent[w];if(v+="/"+w+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var p in x)if(x.hasOwnProperty(p)){var C=x[p];typeof C=="function"&&(C=C.call(l,o)),v+="/"+p+" "+C+" ",l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(l,o)),v+="/"+p+" "+C,l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C);v+=">>"}c.push({key:"AP",value:`<<
`+v+">>"})}l.internal.putStream({additionalKeyValues:c,objectId:o.objId}),l.internal.out("endobj")}u&&qS(l.internal.acroformPlugin.xForms,l)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},J4=Zs.__acroform__.arrayToPdfArray=function(i,e,t){var n=function(p){return p};if(Array.isArray(i)){for(var l="[",u=0;u<i.length;u++)switch(u!==0&&(l+=" "),ns(i[u])){case"boolean":case"number":case"object":l+=i[u].toString();break;case"string":i[u].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),l+="("+n0(n(i[u].toString()))+")"):l+=i[u].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gm=function(i,e,t){var n=function(l){return l};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+n0(n(i))+")"},nh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nh.prototype.toString=function(){return this.objId+" 0 R"},nh.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},nh.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],l=this[n];l&&(Array.isArray(l)?i.push({key:n,value:J4(l,this.objId,this.scope)}):l instanceof nh?(l.scope=this.scope,i.push({key:n,value:l.objId+" 0 R"})):typeof l!="function"&&i.push({key:n,value:l}))}return i};var Q4=function(){nh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};hu(Q4,nh);var $4=function(){nh.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+n0(t(i))+")"}},set:function(t){i=t}})};hu($4,nh);var Pc=function i(){nh.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');e=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(e,3))},set:function(M){Boolean(M)===!0?this.F=na(e,3):this.F=ra(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');t=M}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(M){n=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(M){n[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(M){n[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(M){n[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(M){n[3]=M}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof A1)return;u="FieldObject"+i.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+n0(M(u))+")"},set:function(M){u=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(M){u=M}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(M){p=M}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(M){o=M}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(M){c=M}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/Ig:g},set:function(M){g=M}});var _="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return _},set:function(M){_=M}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof A1||this instanceof Kf))return Gm(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=M}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof qa?w:Gm(w,this.objId,this.scope)},set:function(M){M=M.toString(),w=this instanceof qa?M:M.substr(0,1)==="("?S0(M.substr(1,M.length-2)):S0(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qa?S0(w.substr(1,w.length-1)):w},set:function(M){M=M.toString(),w=this instanceof qa?"/"+M:M}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof qa?x:Gm(x,this.objId,this.scope)},set:function(M){M=M.toString(),x=this instanceof qa?M:M.substr(0,1)==="("?S0(M.substr(1,M.length-2)):S0(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qa?S0(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof qa?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(M){M=Boolean(M),T=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(M){C=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,1))},set:function(M){Boolean(M)===!0?this.Ff=na(this.Ff,1):this.Ff=ra(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,2))},set:function(M){Boolean(M)===!0?this.Ff=na(this.Ff,2):this.Ff=ra(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,3))},set:function(M){Boolean(M)===!0?this.Ff=na(this.Ff,3):this.Ff=ra(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');k=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(k){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};hu(Pc,nh);var H0=function(){Pc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return J4(e,this.objId,this.scope)},set:function(t){var n,l;l=[],typeof(n=t)=="string"&&(l=function(u,p,o){o||(o=1);for(var c,g=[];c=p.exec(u);)g.push(c[o]);return g}(n,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,18):this.Ff=ra(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=na(this.Ff,19):this.Ff=ra(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=na(this.Ff,20),e.sort()):this.Ff=ra(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,22):this.Ff=ra(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,23):this.Ff=ra(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,27):this.Ff=ra(this.Ff,27)}}),this.hasAppearanceStream=!1};hu(H0,Pc);var G0=function(){H0.call(this),this.fontName="helvetica",this.combo=!1};hu(G0,H0);var W0=function(){G0.call(this),this.combo=!0};hu(W0,G0);var s1=function(){W0.call(this),this.edit=!0};hu(s1,W0);var qa=function(){Pc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,15):this.Ff=ra(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,16):this.Ff=ra(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,17):this.Ff=ra(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,26):this.Ff=ra(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(u){return u};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,l=[];for(n in l.push("<<"),e)l.push("/"+n+" ("+n0(t(e[n]))+")");return l.push(">>"),l.join(`
`)}},set:function(t){ns(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};hu(qa,Pc);var a1=function(){qa.call(this),this.pushButton=!0};hu(a1,qa);var X0=function(){qa.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};hu(X0,qa);var A1=function(){var i,e;Pc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(o){return o};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var u,p=[];for(u in p.push("<<"),n)p.push("/"+u+" ("+n0(l(n[u]))+")");return p.push(">>"),p.join(`
`)},set:function(l){ns(l)==="object"&&(n=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(l){typeof l=="string"&&(n.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(l){t=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(l){t="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};hu(A1,Pc),X0.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},X0.prototype.createOption=function(i){var e=new A1;return e.Parent=this,e.optionName=i,this.Kids.push(e),GS.call(this.scope,e),e};var l1=function(){qa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pr.CheckBox.createAppearanceStream()};hu(l1,qa);var Kf=function(){Pc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,13):this.Ff=ra(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,21):this.Ff=ra(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,23):this.Ff=ra(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,24):this.Ff=ra(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,25):this.Ff=ra(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,26):this.Ff=ra(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};hu(Kf,Pc);var u1=function(){Kf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,14))},set:function(i){Boolean(i)===!0?this.Ff=na(this.Ff,14):this.Ff=ra(this.Ff,14)}}),this.password=!0};hu(u1,Kf);var pr={CheckBox:{createAppearanceStream:function(){return{N:{On:pr.CheckBox.YesNormal},D:{On:pr.CheckBox.YesPushDown,Off:pr.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,l=i.scope.__private__.encodeColorString(i.color),u=$2(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+Kr(pr.internal.getWidth(i))+" "+Kr(pr.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Kr(u.fontSize)+" Tf "+l),t.push("BT"),t.push(u.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=Zc(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),l=[],u=pr.internal.getHeight(i),p=pr.internal.getWidth(i),o=$2(i,i.caption);return l.push("1 g"),l.push("0 0 "+Kr(p)+" "+Kr(u)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Kr(p-1)+" "+Kr(u-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+t+" "+Kr(o.fontSize)+" Tf "+n),l.push(o.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Kr(pr.internal.getWidth(i))+" "+Kr(pr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:pr.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=pr.RadioButton.Circle.YesNormal,e.D[i]=pr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Zc(i);e.scope=i.scope;var t=[],n=pr.internal.getWidth(i)<=pr.internal.getHeight(i)?pr.internal.getWidth(i)/4:pr.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var l=pr.internal.Bezier_C,u=Number((n*l).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+rf(pr.internal.getWidth(i)/2)+" "+rf(pr.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),t.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),t.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),t.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[],n=pr.internal.getWidth(i)<=pr.internal.getHeight(i)?pr.internal.getWidth(i)/4:pr.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var l=Number((2*n).toFixed(5)),u=Number((l*pr.internal.Bezier_C).toFixed(5)),p=Number((n*pr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+rf(pr.internal.getWidth(i)/2)+" "+rf(pr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+rf(pr.internal.getWidth(i)/2)+" "+rf(pr.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+p+" "+p+" "+n+" 0 "+n+" c"),t.push("-"+p+" "+n+" -"+n+" "+p+" -"+n+" 0 c"),t.push("-"+n+" -"+p+" -"+p+" -"+n+" 0 -"+n+" c"),t.push(p+" -"+n+" "+n+" -"+p+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[],n=pr.internal.getWidth(i)<=pr.internal.getHeight(i)?pr.internal.getWidth(i)/4:pr.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var l=Number((2*n).toFixed(5)),u=Number((l*pr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+rf(pr.internal.getWidth(i)/2)+" "+rf(pr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:pr.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=pr.RadioButton.Cross.YesNormal,e.D[i]=pr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Zc(i);e.scope=i.scope;var t=[],n=pr.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+Kr(pr.internal.getWidth(i)-2)+" "+Kr(pr.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(Kr(n.x1.x)+" "+Kr(n.x1.y)+" m"),t.push(Kr(n.x2.x)+" "+Kr(n.x2.y)+" l"),t.push(Kr(n.x4.x)+" "+Kr(n.x4.y)+" m"),t.push(Kr(n.x3.x)+" "+Kr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=pr.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+Kr(pr.internal.getWidth(i))+" "+Kr(pr.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Kr(pr.internal.getWidth(i)-2)+" "+Kr(pr.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(Kr(t.x1.x)+" "+Kr(t.x1.y)+" m"),n.push(Kr(t.x2.x)+" "+Kr(t.x2.y)+" l"),n.push(Kr(t.x4.x)+" "+Kr(t.x4.y)+" m"),n.push(Kr(t.x3.x)+" "+Kr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Kr(pr.internal.getWidth(i))+" "+Kr(pr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};pr.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=pr.internal.getWidth(i),t=pr.internal.getHeight(i),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},pr.internal.getWidth=function(i){var e=0;return ns(i)==="object"&&(e=Q_(i.Rect[2])),e},pr.internal.getHeight=function(i){var e=0;return ns(i)==="object"&&(e=Q_(i.Rect[3])),e};var GS=Zs.addField=function(i){if(HS(this,i),!(i instanceof Pc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Zs.AcroFormChoiceField=H0,Zs.AcroFormListBox=G0,Zs.AcroFormComboBox=W0,Zs.AcroFormEditBox=s1,Zs.AcroFormButton=qa,Zs.AcroFormPushButton=a1,Zs.AcroFormRadioButton=X0,Zs.AcroFormCheckBox=l1,Zs.AcroFormTextField=Kf,Zs.AcroFormPasswordField=u1,Zs.AcroFormAppearance=pr,Zs.AcroForm={ChoiceField:H0,ListBox:G0,ComboBox:W0,EditBox:s1,Button:qa,PushButton:a1,RadioButton:X0,CheckBox:l1,TextField:Kf,PasswordField:u1,Appearance:pr},Br.AcroForm={ChoiceField:H0,ListBox:G0,ComboBox:W0,EditBox:s1,Button:qa,PushButton:a1,RadioButton:X0,CheckBox:l1,TextField:Kf,PasswordField:u1,Appearance:pr};Br.AcroForm;function ew(i){return i.reduce(function(e,t,n){return e[t]=n,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=i.__addimage__.getImageFileTypeByImageData=function(le,Ee){var me,Ae,pt,rt,Pt,We=e;if((Ee=Ee||e)==="RGBA"||le.data!==void 0&&le.data instanceof Uint8ClampedArray&&"height"in le&&"width"in le)return"RGBA";if(Q(le))for(Pt in t)for(pt=t[Pt],me=0;me<pt.length;me+=1){for(rt=!0,Ae=0;Ae<pt[me].length;Ae+=1)if(pt[me][Ae]!==void 0&&pt[me][Ae]!==le[Ae]){rt=!1;break}if(rt===!0){We=Pt;break}}else for(Pt in t)for(pt=t[Pt],me=0;me<pt.length;me+=1){for(rt=!0,Ae=0;Ae<pt[me].length;Ae+=1)if(pt[me][Ae]!==void 0&&pt[me][Ae]!==le.charCodeAt(Ae)){rt=!1;break}if(rt===!0){We=Pt;break}}return We===e&&Ee!==e&&(We=Ee),We},l=function le(Ee){for(var me=this.internal.write,Ae=this.internal.putStream,pt=(0,this.internal.getFilters)();pt.indexOf("FlateEncode")!==-1;)pt.splice(pt.indexOf("FlateEncode"),1);Ee.objectId=this.internal.newObject();var rt=[];if(rt.push({key:"Type",value:"/XObject"}),rt.push({key:"Subtype",value:"/Image"}),rt.push({key:"Width",value:Ee.width}),rt.push({key:"Height",value:Ee.height}),Ee.colorSpace===k.INDEXED?rt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ee.palette.length/3-1)+" "+("sMask"in Ee&&Ee.sMask!==void 0?Ee.objectId+2:Ee.objectId+1)+" 0 R]"}):(rt.push({key:"ColorSpace",value:"/"+Ee.colorSpace}),Ee.colorSpace===k.DEVICE_CMYK&&rt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),rt.push({key:"BitsPerComponent",value:Ee.bitsPerComponent}),"decodeParameters"in Ee&&Ee.decodeParameters!==void 0&&rt.push({key:"DecodeParms",value:"<<"+Ee.decodeParameters+">>"}),"transparency"in Ee&&Array.isArray(Ee.transparency)){for(var Pt="",We=0,be=Ee.transparency.length;We<be;We++)Pt+=Ee.transparency[We]+" "+Ee.transparency[We]+" ";rt.push({key:"Mask",value:"["+Pt+"]"})}Ee.sMask!==void 0&&rt.push({key:"SMask",value:Ee.objectId+1+" 0 R"});var Le=Ee.filter!==void 0?["/"+Ee.filter]:void 0;if(Ae({data:Ee.data,additionalKeyValues:rt,alreadyAppliedFilters:Le,objectId:Ee.objectId}),me("endobj"),"sMask"in Ee&&Ee.sMask!==void 0){var Ue="/Predictor "+Ee.predictor+" /Colors 1 /BitsPerComponent "+Ee.bitsPerComponent+" /Columns "+Ee.width,ce={width:Ee.width,height:Ee.height,colorSpace:"DeviceGray",bitsPerComponent:Ee.bitsPerComponent,decodeParameters:Ue,data:Ee.sMask};"filter"in Ee&&(ce.filter=Ee.filter),le.call(this,ce)}if(Ee.colorSpace===k.INDEXED){var Ie=this.internal.newObject();Ae({data:ie(new Uint8Array(Ee.palette)),objectId:Ie}),me("endobj")}},u=function(){var le=this.internal.collections.addImage_images;for(var Ee in le)l.call(this,le[Ee])},p=function(){var le,Ee=this.internal.collections.addImage_images,me=this.internal.write;for(var Ae in Ee)me("/I"+(le=Ee[Ae]).index,le.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",p))},c=function(){var le=this.internal.collections.addImage_images;return o.call(this),le},g=function(){return Object.keys(this.internal.collections.addImage_images).length},_=function(le){return typeof i["process"+le.toUpperCase()]=="function"},v=function(le){return ns(le)==="object"&&le.nodeType===1},w=function(le,Ee){if(le.nodeName==="IMG"&&le.hasAttribute("src")){var me=""+le.getAttribute("src");if(me.indexOf("data:image/")===0)return jd(unescape(me).split("base64,").pop());var Ae=i.loadFile(me,!0);if(Ae!==void 0)return Ae}if(le.nodeName==="CANVAS"){if(le.width===0||le.height===0)throw new Error("Given canvas must have data. Canvas width: "+le.width+", height: "+le.height);var pt;switch(Ee){case"PNG":pt="image/png";break;case"WEBP":pt="image/webp";break;case"JPEG":case"JPG":default:pt="image/jpeg"}return jd(le.toDataURL(pt,1).split("base64,").pop())}},x=function(le){var Ee=this.internal.collections.addImage_images;if(Ee){for(var me in Ee)if(le===Ee[me].alias)return Ee[me]}},C=function(le,Ee,me){return le||Ee||(le=-96,Ee=-96),le<0&&(le=-1*me.width*72/le/this.internal.scaleFactor),Ee<0&&(Ee=-1*me.height*72/Ee/this.internal.scaleFactor),le===0&&(le=Ee*me.width/me.height),Ee===0&&(Ee=le*me.height/me.width),[le,Ee]},T=function(le,Ee,me,Ae,pt,rt){var Pt=C.call(this,me,Ae,pt),We=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,Le=c.call(this);if(me=Pt[0],Ae=Pt[1],Le[pt.index]=pt,rt){rt*=Math.PI/180;var Ue=Math.cos(rt),ce=Math.sin(rt),Ie=function(ge){return ge.toFixed(4)},de=[Ie(Ue),Ie(ce),Ie(-1*ce),Ie(Ue),0,0,"cm"]}this.internal.write("q"),rt?(this.internal.write([1,"0","0",1,We(le),be(Ee+Ae),"cm"].join(" ")),this.internal.write(de.join(" ")),this.internal.write([We(me),"0","0",We(Ae),"0","0","cm"].join(" "))):this.internal.write([We(me),"0","0",We(Ae),We(le),be(Ee+Ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pt.index+" Do"),this.internal.write("Q")},k=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=i.__addimage__.sHashCode=function(le){var Ee,me,Ae=0;if(typeof le=="string")for(me=le.length,Ee=0;Ee<me;Ee++)Ae=(Ae<<5)-Ae+le.charCodeAt(Ee),Ae|=0;else if(Q(le))for(me=le.byteLength/2,Ee=0;Ee<me;Ee++)Ae=(Ae<<5)-Ae+le[Ee],Ae|=0;return Ae},V=i.__addimage__.validateStringAsBase64=function(le){(le=le||"").toString().trim();var Ee=!0;return le.length===0&&(Ee=!1),le.length%4!=0&&(Ee=!1),/^[A-Za-z0-9+/]+$/.test(le.substr(0,le.length-2))===!1&&(Ee=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(le.substr(-2))===!1&&(Ee=!1),Ee},W=i.__addimage__.extractImageFromDataUrl=function(le){var Ee=(le=le||"").split("base64,"),me=null;if(Ee.length===2){var Ae=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ee[0]);Array.isArray(Ae)&&(me={mimeType:Ae[1],charset:Ae[2],data:Ee[1]})}return me},J=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(le){return J()&&le instanceof ArrayBuffer};var Q=i.__addimage__.isArrayBufferView=function(le){return J()&&typeof Uint32Array<"u"&&(le instanceof Int8Array||le instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&le instanceof Uint8ClampedArray||le instanceof Int16Array||le instanceof Uint16Array||le instanceof Int32Array||le instanceof Uint32Array||le instanceof Float32Array||le instanceof Float64Array)},Z=i.__addimage__.binaryStringToUint8Array=function(le){for(var Ee=le.length,me=new Uint8Array(Ee),Ae=0;Ae<Ee;Ae++)me[Ae]=le.charCodeAt(Ae);return me},ie=i.__addimage__.arrayBufferToBinaryString=function(le){for(var Ee="",me=Q(le)?le:new Uint8Array(le),Ae=0;Ae<me.length;Ae+=8192)Ee+=String.fromCharCode.apply(null,me.subarray(Ae,Ae+8192));return Ee};i.addImage=function(){var le,Ee,me,Ae,pt,rt,Pt,We,be;if(typeof arguments[1]=="number"?(Ee=e,me=arguments[1],Ae=arguments[2],pt=arguments[3],rt=arguments[4],Pt=arguments[5],We=arguments[6],be=arguments[7]):(Ee=arguments[1],me=arguments[2],Ae=arguments[3],pt=arguments[4],rt=arguments[5],Pt=arguments[6],We=arguments[7],be=arguments[8]),ns(le=arguments[0])==="object"&&!v(le)&&"imageData"in le){var Le=le;le=Le.imageData,Ee=Le.format||Ee||e,me=Le.x||me||0,Ae=Le.y||Ae||0,pt=Le.w||Le.width||pt,rt=Le.h||Le.height||rt,Pt=Le.alias||Pt,We=Le.compression||We,be=Le.rotation||Le.angle||be}var Ue=this.internal.getFilters();if(We===void 0&&Ue.indexOf("FlateEncode")!==-1&&(We="SLOW"),isNaN(me)||isNaN(Ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var ce=Se.call(this,le,Ee,Pt,We);return T.call(this,me,Ae,pt,rt,ce,be),this};var Se=function(le,Ee,me,Ae){var pt,rt,Pt;if(typeof le=="string"&&n(le)===e){le=unescape(le);var We=xe(le,!1);(We!==""||(We=i.loadFile(le,!0))!==void 0)&&(le=We)}if(v(le)&&(le=w(le,Ee)),Ee=n(le,Ee),!_(Ee))throw new Error("addImage does not support files of type '"+Ee+"', please ensure that a plugin for '"+Ee+"' support is added.");if(((Pt=me)==null||Pt.length===0)&&(me=function(be){return typeof be=="string"||Q(be)?O(be):Q(be.data)?O(be.data):null}(le)),(pt=x.call(this,me))||(J()&&(le instanceof Uint8Array||Ee==="RGBA"||(rt=le,le=Z(le))),pt=this["process"+Ee.toUpperCase()](le,g.call(this),me,function(be){return be&&typeof be=="string"&&(be=be.toUpperCase()),be in i.image_compression?be:M.NONE}(Ae),rt)),!pt)throw new Error("An unknown error occurred whilst processing the image.");return pt},xe=i.__addimage__.convertBase64ToBinaryString=function(le,Ee){var me;Ee=typeof Ee!="boolean"||Ee;var Ae,pt="";if(typeof le=="string"){Ae=(me=W(le))!==null?me.data:le;try{pt=jd(Ae)}catch(rt){if(Ee)throw V(Ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+rt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return pt};i.getImageProperties=function(le){var Ee,me,Ae="";if(v(le)&&(le=w(le)),typeof le=="string"&&n(le)===e&&((Ae=xe(le,!1))===""&&(Ae=i.loadFile(le)||""),le=Ae),me=n(le),!_(me))throw new Error("addImage does not support files of type '"+me+"', please ensure that a plugin for '"+me+"' support is added.");if(!J()||le instanceof Uint8Array||(le=Z(le)),!(Ee=this["process"+me.toUpperCase()](le)))throw new Error("An unknown error occurred whilst processing the image");return Ee.fileType=me,Ee}})(Br.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};Br.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var n,l,u,p=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),g=t.pageContext.annotations,_=!1,v=0;v<g.length&&!_;v++)switch((n=g[v]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(_=!0);break;case"reference":case"text":case"freetext":_=!0}if(_!=0){this.internal.write("/Annots [");for(var w=0;w<g.length;w++){n=g[w];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(T.objId),O=n.title||"Note";u="<</Type /Annot /Subtype /Text "+(l="/Rect ["+p(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+p(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+x(M(n.contents))+")",u+=" /Popup "+k.objId+" 0 R",u+=" /P "+c.objId+" 0 R",u+=" /T ("+x(M(O))+") >>",T.content=u;var V=T.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+p(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+p(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+V,n.open&&(u+=" /Open true"),u+=" >>",k.content=u,this.internal.write(T.objId,"0 R",k.objId,"0 R");break;case"freetext":l="/Rect ["+p(n.bounds.x)+" "+o(n.bounds.y)+" "+p(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var W=n.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(C(n.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(n.options.name){var J=this.annotations._nameMap[n.options.name];n.options.pageNumber=J.page,n.options.top=J.y}else n.options.top||(n.options.top=0);if(l="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",u="",n.options.url)u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(n.options.url))+") >>";else if(n.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,u+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var Q=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),u+=" /XYZ "+n.options.left+" "+Q+" "+n.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},i.link=function(t,n,l,u,p){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:g(n),w:c(t+l),h:g(n+u)},options:p,type:"link"})},i.textWithLink=function(t,n,l,u){var p,o,c=this.getTextWidth(t),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){o=u.maxWidth;var _=this.splitTextToSize(t,o).length;p=Math.ceil(g*_)}else o=c,p=g;return this.text(t,n,l,u),l+=.2*g,u.align==="center"&&(n-=c/2),u.align==="right"&&(n-=c),this.link(n,l-g,o,p,u),c},i.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Br.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];i.__arabicParser__={};var u=i.__arabicParser__.isInArabicSubstitutionA=function(T){return e[T.charCodeAt(0)]!==void 0},p=i.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},o=i.__arabicParser__.isArabicEndLetter=function(T){return p(T)&&u(T)&&e[T.charCodeAt(0)].length<=2},c=i.__arabicParser__.isArabicAlfLetter=function(T){return p(T)&&l.indexOf(T.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return p(T)&&u(T)&&e[T.charCodeAt(0)].length>=1};var g=i.__arabicParser__.arabicLetterHasFinalForm=function(T){return p(T)&&u(T)&&e[T.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(T){return p(T)&&u(T)&&e[T.charCodeAt(0)].length>=3};var _=i.__arabicParser__.arabicLetterHasMedialForm=function(T){return p(T)&&u(T)&&e[T.charCodeAt(0)].length==4},v=i.__arabicParser__.resolveLigatures=function(T){var k=0,M=t,O="",V=0;for(k=0;k<T.length;k+=1)M[T.charCodeAt(k)]!==void 0?(V++,typeof(M=M[T.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(M),M=t,V=0),k===T.length-1&&(M=t,O+=T.charAt(k-(V-1)),k-=V-1,V=0)):(M=t,O+=T.charAt(k-V),k-=V,V=0);return O};i.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&n[T.charCodeAt(0)]!==void 0};var w=i.__arabicParser__.getCorrectForm=function(T,k,M){return p(T)?u(T)===!1?-1:!g(T)||!p(k)&&!p(M)||!p(M)&&o(k)||o(T)&&!p(k)||o(T)&&c(k)||o(T)&&o(k)?0:_(T)&&p(k)&&!o(k)&&p(M)&&g(M)?3:o(T)||!p(M)?1:2:-1},x=function(T){var k=0,M=0,O=0,V="",W="",J="",Q=(T=T||"").split("\\s+"),Z=[];for(k=0;k<Q.length;k+=1){for(Z.push(""),M=0;M<Q[k].length;M+=1)V=Q[k][M],W=Q[k][M-1],J=Q[k][M+1],p(V)?(O=w(V,W,J),Z[k]+=O!==-1?String.fromCharCode(e[V.charCodeAt(0)][O]):V):Z[k]+=V;Z[k]=v(Z[k])}return Z.join(" ")},C=i.__arabicParser__.processArabic=i.processArabic=function(){var T,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(k)){var O=0;for(M=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?M.push([x(k[O][0]),k[O][1],k[O][2]]):M.push([x(k[O])]);T=M}else T=x(k);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};i.events.push(["preProcessText",C])}(Br.API),Br.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(o){l=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(o){u=o}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(o){p=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var l;if((t=t||"2d")!=="2d")return null;for(l in n)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=n[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Br.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(T){c=T}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(T){g=T}});var _=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return _},set:function(T){_=T}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(T){C=T}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},i.getTextDimensions=function(c,g){n.call(this);var _=(g=g||{}).fontSize||this.getFontSize(),v=g.font||this.getFont(),w=g.scaleFactor||this.internal.scaleFactor,x=0,C=0,T=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var M=g.maxWidth;M>0?typeof c=="string"?c=this.splitTextToSize(c,M):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(V,W){return V.concat(k.splitTextToSize(W,M))},[])):c=Array.isArray(c)?c:[c];for(var O=0;O<c.length;O++)x<(T=this.getStringUnitWidth(c[O],{font:v})*_)&&(x=T);return x!==0&&(C=c.length),{w:x/=w,h:Math.max((C*_*this.getLineHeightFactor()-_*(this.getLineHeightFactor()-1))/w,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=i.cell=function(){var c;c=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var g=this.internal.__cell__.lastCell,_=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===c.lineNumber?(c.x=(g.x||0)+(g.width||0),c.y=g.y||0):g.y+g.height+c.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=v.top,x&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=g.y+g.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-_,c.y+_,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+_,{align:"center",baseline:"top",maxWidth:c.width-_-_}):this.text(c.text,c.x+_,c.y+_,{align:"left",baseline:"top",maxWidth:c.width-_-_})),this.internal.__cell__.lastCell=c,this};i.table=function(c,g,_,v,w){if(n.call(this),!_)throw new Error("No data for PDF table.");var x,C,T,k,M=[],O=[],V=[],W={},J={},Q=[],Z=[],ie=(w=w||{}).autoSize||!1,Se=w.printHeaders!==!1,xe=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,le=w.margins||Object.assign({width:this.getPageWidth()},e),Ee=typeof w.padding=="number"?w.padding:3,me=w.headerBackgroundColor||"#c8c8c8",Ae=w.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Se,this.internal.__cell__.margins=le,this.internal.__cell__.table_font_size=xe,this.internal.__cell__.padding=Ee,this.internal.__cell__.headerBackgroundColor=me,this.internal.__cell__.headerTextColor=Ae,this.setFontSize(xe),v==null)O=M=Object.keys(_[0]),V=M.map(function(){return"left"});else if(Array.isArray(v)&&ns(v[0])==="object")for(M=v.map(function(Le){return Le.name}),O=v.map(function(Le){return Le.prompt||Le.name||""}),V=v.map(function(Le){return Le.align||"left"}),x=0;x<v.length;x+=1)J[v[x].name]=v[x].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(O=M=v,V=M.map(function(){return"left"}));if(ie||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<M.length;x+=1){for(W[k=M[x]]=_.map(function(Le){return Le[k]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=W[k],this.setFont(void 0,"normal"),T=0;T<C.length;T+=1)Q.push(this.getTextDimensions(C[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[k]=Math.max.apply(null,Q)+Ee+Ee,Q=[]}if(Se){var pt={};for(x=0;x<M.length;x+=1)pt[M[x]]={},pt[M[x]].text=O[x],pt[M[x]].align=V[x];var rt=o.call(this,pt,J);Z=M.map(function(Le){return new u(c,g,J[Le],rt,pt[Le].text,void 0,pt[Le].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var Pt=v.reduce(function(Le,Ue){return Le[Ue.name]=Ue.align,Le},{});for(x=0;x<_.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:_[x]},this);var We=o.call(this,_[x],J);for(T=0;T<M.length;T+=1){var be=_[x][M[T]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:T,data:be},this),p.call(this,new u(c,g,J[M[T]],We,be,x+2,Pt[M[T]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=g,this};var o=function(c,g){var _=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(x){var C=c[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,g[x]-_-_)},this).map(function(x){return this.getLineHeightFactor()*x.length*v/w+_+_},this).reduce(function(x,C){return Math.max(x,C)},0)};i.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},i.printHeaderRow=function(c,g){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var _;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){_=this.internal.__cell__.tableHeaderRow[x].clone(),g&&(_.y=this.internal.__cell__.margins.top||0,w.push(_)),_.lineNumber=c;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,_),this.setTextColor(C)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}}(Br.API);var tw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],eg=ew(iw),nw=[100,200,300,400,500,600,700,800,900],WS=ew(nw);function tg(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(u){return tw[u=u||"normal"]?u:"normal"}(i.style),n=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(i.weight),l=function(u){return typeof eg[u=u||"normal"]=="number"?u:"normal"}(i.stretch);return{family:e,style:t,weight:n,stretch:l,src:i.src||[],ref:i.ref||{name:e,style:[l,t,n].join(" ")}}}function $_(i,e,t,n){var l;for(l=t;l>=0&&l<e.length;l+=n)if(i[e[l]])return i[e[l]];for(l=t;l>=0&&l<e.length;l-=n)if(i[e[l]])return i[e[l]]}var XS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ev={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tv(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function YS(i,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",l=Object.assign({},XS,t.genericFontFamilies||{}),u=null,p=null,o=0;o<e.length;++o)if(l[(u=tg(e[o])).family]&&(u.family=l[u.family]),i.hasOwnProperty(u.family)){p=i[u.family];break}if(!(p=p||i[n]))throw new Error("Could not find a font-family for the rule '"+tv(u)+"' and default family '"+n+"'.");if(p=function(c,g){if(g[c])return g[c];var _=eg[c],v=_<=eg.normal?-1:1,w=$_(g,iw,_,v);if(!w)throw new Error("Could not find a matching font-stretch value for "+c);return w}(u.stretch,p),p=function(c,g){if(g[c])return g[c];for(var _=tw[c],v=0;v<_.length;++v)if(g[_[v]])return g[_[v]];throw new Error("Could not find a matching font-style for "+c)}(u.style,p),!(p=function(c,g){if(g[c])return g[c];if(c===400&&g[500])return g[500];if(c===500&&g[400])return g[400];var _=WS[c],v=$_(g,nw,_,c<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+c);return v}(u.weight,p)))throw new Error("Failed to resolve a font for the rule '"+tv(u)+"'.");return p}function iv(i){return i.trimLeft()}function ZS(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function KS(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var Gp,nv,rv,Wm=["times"];(function(i){var e,t,n,l,u,p,o,c,g,_=function(ce){return ce=ce||{},this.isStrokeTransparent=ce.isStrokeTransparent||!1,this.strokeOpacity=ce.strokeOpacity||1,this.strokeStyle=ce.strokeStyle||"#000000",this.fillStyle=ce.fillStyle||"#000000",this.isFillTransparent=ce.isFillTransparent||!1,this.fillOpacity=ce.fillOpacity||1,this.font=ce.font||"10px sans-serif",this.textBaseline=ce.textBaseline||"alphabetic",this.textAlign=ce.textAlign||"left",this.lineWidth=ce.lineWidth||1,this.lineJoin=ce.lineJoin||"miter",this.lineCap=ce.lineCap||"butt",this.path=ce.path||[],this.transform=ce.transform!==void 0?ce.transform.clone():new c,this.globalCompositeOperation=ce.globalCompositeOperation||"normal",this.globalAlpha=ce.globalAlpha||1,this.clip_path=ce.clip_path||[],this.currentPoint=ce.currentPoint||new p,this.miterLimit=ce.miterLimit||10,this.lastPoint=ce.lastPoint||new p,this.lineDashOffset=ce.lineDashOffset||0,this.lineDash=ce.lineDash||[],this.margin=ce.margin||[0,0,0,0],this.prevPageLastElemOffset=ce.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ce.ignoreClearRect!="boolean"||ce.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,p=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,g=new _}]);var v=function(ce){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ie=ce;Object.defineProperty(this,"pdf",{get:function(){return Ie}});var de=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return de},set:function(xt){de=Boolean(xt)}});var ge=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ge},set:function(xt){ge=Boolean(xt)}});var Re=0;Object.defineProperty(this,"posX",{get:function(){return Re},set:function(xt){isNaN(xt)||(Re=xt)}});var Ze=0;Object.defineProperty(this,"posY",{get:function(){return Ze},set:function(xt){isNaN(xt)||(Ze=xt)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(xt){var Qe;typeof xt=="number"?Qe=[xt,xt,xt,xt]:((Qe=new Array(4))[0]=xt[0],Qe[1]=xt.length>=2?xt[1]:Qe[0],Qe[2]=xt.length>=3?xt[2]:Qe[0],Qe[3]=xt.length>=4?xt[3]:Qe[1]),g.margin=Qe}});var ut=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ut},set:function(xt){ut=xt}});var Xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Xe},set:function(xt){Xe=xt}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(xt){$e=xt}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(xt){xt instanceof _&&(g=xt)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(xt){g.path=xt}});var Dt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Dt},set:function(xt){Dt=xt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xt){var Qe;Qe=w(xt),this.ctx.fillStyle=Qe.style,this.ctx.isFillTransparent=Qe.a===0,this.ctx.fillOpacity=Qe.a,this.pdf.setFillColor(Qe.r,Qe.g,Qe.b,{a:Qe.a}),this.pdf.setTextColor(Qe.r,Qe.g,Qe.b,{a:Qe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xt){var Qe=w(xt);this.ctx.strokeStyle=Qe.style,this.ctx.isStrokeTransparent=Qe.a===0,this.ctx.strokeOpacity=Qe.a,Qe.a===0?this.pdf.setDrawColor(255,255,255):(Qe.a,this.pdf.setDrawColor(Qe.r,Qe.g,Qe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xt){["butt","round","square"].indexOf(xt)!==-1&&(this.ctx.lineCap=xt,this.pdf.setLineCap(xt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xt){isNaN(xt)||(this.ctx.lineWidth=xt,this.pdf.setLineWidth(xt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xt){["bevel","round","miter"].indexOf(xt)!==-1&&(this.ctx.lineJoin=xt,this.pdf.setLineJoin(xt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xt){isNaN(xt)||(this.ctx.miterLimit=xt,this.pdf.setMiterLimit(xt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xt){this.ctx.textBaseline=xt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xt){["right","end","center","left","start"].indexOf(xt)!==-1&&(this.ctx.textAlign=xt)}});var ni=null;function mt(xt,Qe){if(ni===null){var Yt=function(si){var Zt=[];return Object.keys(si).forEach(function(Ei){si[Ei].forEach(function(Qt){var Ot=null;switch(Qt){case"bold":Ot={family:Ei,weight:"bold"};break;case"italic":Ot={family:Ei,style:"italic"};break;case"bolditalic":Ot={family:Ei,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:Ei}}Ot!==null&&(Ot.ref={name:Ei,style:Qt},Zt.push(Ot))})}),Zt}(xt.getFontList());ni=function(si){for(var Zt={},Ei=0;Ei<si.length;++Ei){var Qt=tg(si[Ei]),Ot=Qt.family,ai=Qt.stretch,Ji=Qt.style,Ii=Qt.weight;Zt[Ot]=Zt[Ot]||{},Zt[Ot][ai]=Zt[Ot][ai]||{},Zt[Ot][ai][Ji]=Zt[Ot][ai][Ji]||{},Zt[Ot][ai][Ji][Ii]=Qt}return Zt}(Yt.concat(Qe))}return ni}var At=null;Object.defineProperty(this,"fontFaces",{get:function(){return At},set:function(xt){ni=null,At=xt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xt){var Qe;if(this.ctx.font=xt,(Qe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xt))!==null){var Yt=Qe[1],si=(Qe[2],Qe[3]),Zt=Qe[4],Ei=(Qe[5],Qe[6]),Qt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Zt)[2];Zt=Math.floor(Qt==="px"?parseFloat(Zt)*this.pdf.internal.scaleFactor:Qt==="em"?parseFloat(Zt)*this.pdf.getFontSize():parseFloat(Zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Zt);var Ot=function(ae){var et,bt,Xt=[],fi=ae.trim();if(fi==="")return Wm;if(fi in ev)return[ev[fi]];for(;fi!=="";){switch(bt=null,et=(fi=iv(fi)).charAt(0)){case'"':case"'":bt=ZS(fi.substring(1),et);break;default:bt=KS(fi)}if(bt===null||(Xt.push(bt[0]),(fi=iv(bt[1]))!==""&&fi.charAt(0)!==","))return Wm;fi=fi.replace(/^,/,"")}return Xt}(Ei);if(this.fontFaces){var ai=YS(mt(this.pdf,this.fontFaces),Ot.map(function(ae){return{family:ae,stretch:"normal",weight:si,style:Yt}}));this.pdf.setFont(ai.ref.name,ai.ref.style)}else{var Ji="";(si==="bold"||parseInt(si,10)>=700||Yt==="bold")&&(Ji="bold"),Yt==="italic"&&(Ji+="italic"),Ji.length===0&&(Ji="normal");for(var Ii="",$t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Me=0;Me<Ot.length;Me++){if(this.pdf.internal.getFont(Ot[Me],Ji,{noFallback:!0,disableWarning:!0})!==void 0){Ii=Ot[Me];break}if(Ji==="bolditalic"&&this.pdf.internal.getFont(Ot[Me],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ii=Ot[Me],Ji="bold";else if(this.pdf.internal.getFont(Ot[Me],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ii=Ot[Me],Ji="normal";break}}if(Ii===""){for(var ee=0;ee<Ot.length;ee++)if($t[Ot[ee]]){Ii=$t[Ot[ee]];break}}Ii=Ii===""?"Times":Ii,this.pdf.setFont(Ii,Ji)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xt){this.ctx.globalCompositeOperation=xt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xt){this.ctx.globalAlpha=xt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xt){this.ctx.lineDashOffset=xt,Ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xt){this.ctx.lineDash=xt,Ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xt){this.ctx.ignoreClearRect=Boolean(xt)}})};v.prototype.setLineDash=function(ce){this.lineDash=ce},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){W.call(this,"fill",!1)},v.prototype.stroke=function(){W.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(ce,Ie){if(isNaN(ce)||isNaN(Ie))throw ps.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var de=this.ctx.transform.applyToPoint(new p(ce,Ie));this.path.push({type:"mt",x:de.x,y:de.y}),this.ctx.lastPoint=new p(ce,Ie)},v.prototype.closePath=function(){var ce=new p(0,0),Ie=0;for(Ie=this.path.length-1;Ie!==-1;Ie--)if(this.path[Ie].type==="begin"&&ns(this.path[Ie+1])==="object"&&typeof this.path[Ie+1].x=="number"){ce=new p(this.path[Ie+1].x,this.path[Ie+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(ce.x,ce.y)},v.prototype.lineTo=function(ce,Ie){if(isNaN(ce)||isNaN(Ie))throw ps.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var de=this.ctx.transform.applyToPoint(new p(ce,Ie));this.path.push({type:"lt",x:de.x,y:de.y}),this.ctx.lastPoint=new p(de.x,de.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},v.prototype.quadraticCurveTo=function(ce,Ie,de,ge){if(isNaN(de)||isNaN(ge)||isNaN(ce)||isNaN(Ie))throw ps.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Re=this.ctx.transform.applyToPoint(new p(de,ge)),Ze=this.ctx.transform.applyToPoint(new p(ce,Ie));this.path.push({type:"qct",x1:Ze.x,y1:Ze.y,x:Re.x,y:Re.y}),this.ctx.lastPoint=new p(Re.x,Re.y)},v.prototype.bezierCurveTo=function(ce,Ie,de,ge,Re,Ze){if(isNaN(Re)||isNaN(Ze)||isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge))throw ps.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ut=this.ctx.transform.applyToPoint(new p(Re,Ze)),Xe=this.ctx.transform.applyToPoint(new p(ce,Ie)),$e=this.ctx.transform.applyToPoint(new p(de,ge));this.path.push({type:"bct",x1:Xe.x,y1:Xe.y,x2:$e.x,y2:$e.y,x:ut.x,y:ut.y}),this.ctx.lastPoint=new p(ut.x,ut.y)},v.prototype.arc=function(ce,Ie,de,ge,Re,Ze){if(isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge)||isNaN(Re))throw ps.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ze=Boolean(Ze),!this.ctx.transform.isIdentity){var ut=this.ctx.transform.applyToPoint(new p(ce,Ie));ce=ut.x,Ie=ut.y;var Xe=this.ctx.transform.applyToPoint(new p(0,de)),$e=this.ctx.transform.applyToPoint(new p(0,0));de=Math.sqrt(Math.pow(Xe.x-$e.x,2)+Math.pow(Xe.y-$e.y,2))}Math.abs(Re-ge)>=2*Math.PI&&(ge=0,Re=2*Math.PI),this.path.push({type:"arc",x:ce,y:Ie,radius:de,startAngle:ge,endAngle:Re,counterclockwise:Ze})},v.prototype.arcTo=function(ce,Ie,de,ge,Re){throw new Error("arcTo not implemented.")},v.prototype.rect=function(ce,Ie,de,ge){if(isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge))throw ps.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ce,Ie),this.lineTo(ce+de,Ie),this.lineTo(ce+de,Ie+ge),this.lineTo(ce,Ie+ge),this.lineTo(ce,Ie),this.lineTo(ce+de,Ie),this.lineTo(ce,Ie)},v.prototype.fillRect=function(ce,Ie,de,ge){if(isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge))throw ps.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var Re={};this.lineCap!=="butt"&&(Re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ce,Ie,de,ge),this.fill(),Re.hasOwnProperty("lineCap")&&(this.lineCap=Re.lineCap),Re.hasOwnProperty("lineJoin")&&(this.lineJoin=Re.lineJoin)}},v.prototype.strokeRect=function(ce,Ie,de,ge){if(isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge))throw ps.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(ce,Ie,de,ge),this.stroke())},v.prototype.clearRect=function(ce,Ie,de,ge){if(isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge))throw ps.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ce,Ie,de,ge))},v.prototype.save=function(ce){ce=typeof ce!="boolean"||ce;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ie),ce){this.ctx.fontSize=this.pdf.internal.getFontSize();var ge=new _(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ge}},v.prototype.restore=function(ce){ce=typeof ce!="boolean"||ce;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("Q");this.pdf.setPage(Ie),ce&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(ce){var Ie,de,ge,Re;if(ce.isCanvasGradient===!0&&(ce=ce.getColor()),!ce)return{r:0,g:0,b:0,a:0,style:ce};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ce))Ie=0,de=0,ge=0,Re=0;else{var Ze=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ce);if(Ze!==null)Ie=parseInt(Ze[1]),de=parseInt(Ze[2]),ge=parseInt(Ze[3]),Re=1;else if((Ze=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ce))!==null)Ie=parseInt(Ze[1]),de=parseInt(Ze[2]),ge=parseInt(Ze[3]),Re=parseFloat(Ze[4]);else{if(Re=1,typeof ce=="string"&&ce.charAt(0)!=="#"){var ut=new Y4(ce);ce=ut.ok?ut.toHex():"#000000"}ce.length===4?(Ie=ce.substring(1,2),Ie+=Ie,de=ce.substring(2,3),de+=de,ge=ce.substring(3,4),ge+=ge):(Ie=ce.substring(1,3),de=ce.substring(3,5),ge=ce.substring(5,7)),Ie=parseInt(Ie,16),de=parseInt(de,16),ge=parseInt(ge,16)}}return{r:Ie,g:de,b:ge,a:Re,style:ce}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(ce,Ie,de,ge){if(isNaN(Ie)||isNaN(de)||typeof ce!="string")throw ps.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ge=isNaN(ge)?void 0:ge,!x.call(this)){var Re=We(this.ctx.transform.rotation),Ze=this.ctx.transform.scaleX;Ee.call(this,{text:ce,x:Ie,y:de,scale:Ze,angle:Re,align:this.textAlign,maxWidth:ge})}},v.prototype.strokeText=function(ce,Ie,de,ge){if(isNaN(Ie)||isNaN(de)||typeof ce!="string")throw ps.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){ge=isNaN(ge)?void 0:ge;var Re=We(this.ctx.transform.rotation),Ze=this.ctx.transform.scaleX;Ee.call(this,{text:ce,x:Ie,y:de,scale:Ze,renderingMode:"stroke",angle:Re,align:this.textAlign,maxWidth:ge})}},v.prototype.measureText=function(ce){if(typeof ce!="string")throw ps.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ie=this.pdf,de=this.pdf.internal.scaleFactor,ge=Ie.internal.getFontSize(),Re=Ie.getStringUnitWidth(ce)*ge/Ie.internal.scaleFactor,Ze=function(ut){var Xe=(ut=ut||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Xe}}),this};return new Ze({width:Re*=Math.round(96*de/72*1e4)/1e4})},v.prototype.scale=function(ce,Ie){if(isNaN(ce)||isNaN(Ie))throw ps.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var de=new c(ce,0,0,Ie,0,0);this.ctx.transform=this.ctx.transform.multiply(de)},v.prototype.rotate=function(ce){if(isNaN(ce))throw ps.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ie=new c(Math.cos(ce),Math.sin(ce),-Math.sin(ce),Math.cos(ce),0,0);this.ctx.transform=this.ctx.transform.multiply(Ie)},v.prototype.translate=function(ce,Ie){if(isNaN(ce)||isNaN(Ie))throw ps.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var de=new c(1,0,0,1,ce,Ie);this.ctx.transform=this.ctx.transform.multiply(de)},v.prototype.transform=function(ce,Ie,de,ge,Re,Ze){if(isNaN(ce)||isNaN(Ie)||isNaN(de)||isNaN(ge)||isNaN(Re)||isNaN(Ze))throw ps.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ut=new c(ce,Ie,de,ge,Re,Ze);this.ctx.transform=this.ctx.transform.multiply(ut)},v.prototype.setTransform=function(ce,Ie,de,ge,Re,Ze){ce=isNaN(ce)?1:ce,Ie=isNaN(Ie)?0:Ie,de=isNaN(de)?0:de,ge=isNaN(ge)?1:ge,Re=isNaN(Re)?0:Re,Ze=isNaN(Ze)?0:Ze,this.ctx.transform=new c(ce,Ie,de,ge,Re,Ze)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(ce,Ie,de,ge,Re,Ze,ut,Xe,$e){var Dt=this.pdf.getImageProperties(ce),ni=1,mt=1,At=1,xt=1;ge!==void 0&&Xe!==void 0&&(At=Xe/ge,xt=$e/Re,ni=Dt.width/ge*Xe/ge,mt=Dt.height/Re*$e/Re),Ze===void 0&&(Ze=Ie,ut=de,Ie=0,de=0),ge!==void 0&&Xe===void 0&&(Xe=ge,$e=Re),ge===void 0&&Xe===void 0&&(Xe=Dt.width,$e=Dt.height);for(var Qe,Yt=this.ctx.transform.decompose(),si=We(Yt.rotate.shx),Zt=new c,Ei=(Zt=(Zt=(Zt=Zt.multiply(Yt.translate)).multiply(Yt.skew)).multiply(Yt.scale)).applyToRectangle(new o(Ze-Ie*At,ut-de*xt,ge*ni,Re*mt)),Qt=k.call(this,Ei),Ot=[],ai=0;ai<Qt.length;ai+=1)Ot.indexOf(Qt[ai])===-1&&Ot.push(Qt[ai]);if(V(Ot),this.autoPaging)for(var Ji=Ot[0],Ii=Ot[Ot.length-1],$t=Ji;$t<Ii+1;$t++){this.pdf.setPage($t);var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ee=$t===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=$t===1?0:ae+($t-2)*et;if(this.ctx.clip_path.length!==0){var Xt=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Qe,this.posX+this.margin[3],-bt+ee+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=Xt}var fi=JSON.parse(JSON.stringify(Ei));fi=O([fi],this.posX+this.margin[3],-bt+ee+this.ctx.prevPageLastElemOffset)[0];var xn=($t>Ji||$t<Ii)&&T.call(this);xn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,et,null).clip().discardPath()),this.pdf.addImage(ce,"JPEG",fi.x,fi.y,fi.w,fi.h,null,null,si),xn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ce,"JPEG",Ei.x,Ei.y,Ei.w,Ei.h,null,null,si)};var k=function(ce,Ie,de){var ge=[];Ie=Ie||this.pdf.internal.pageSize.width,de=de||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Re=this.posY+this.ctx.prevPageLastElemOffset;switch(ce.type){default:case"mt":case"lt":ge.push(Math.floor((ce.y+Re)/de)+1);break;case"arc":ge.push(Math.floor((ce.y+Re-ce.radius)/de)+1),ge.push(Math.floor((ce.y+Re+ce.radius)/de)+1);break;case"qct":var Ze=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ce.x1,ce.y1,ce.x,ce.y);ge.push(Math.floor((Ze.y+Re)/de)+1),ge.push(Math.floor((Ze.y+Ze.h+Re)/de)+1);break;case"bct":var ut=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ce.x1,ce.y1,ce.x2,ce.y2,ce.x,ce.y);ge.push(Math.floor((ut.y+Re)/de)+1),ge.push(Math.floor((ut.y+ut.h+Re)/de)+1);break;case"rect":ge.push(Math.floor((ce.y+Re)/de)+1),ge.push(Math.floor((ce.y+ce.h+Re)/de)+1)}for(var Xe=0;Xe<ge.length;Xe+=1)for(;this.pdf.internal.getNumberOfPages()<ge[Xe];)M.call(this);return ge},M=function(){var ce=this.fillStyle,Ie=this.strokeStyle,de=this.font,ge=this.lineCap,Re=this.lineWidth,Ze=this.lineJoin;this.pdf.addPage(),this.fillStyle=ce,this.strokeStyle=Ie,this.font=de,this.lineCap=ge,this.lineWidth=Re,this.lineJoin=Ze},O=function(ce,Ie,de){for(var ge=0;ge<ce.length;ge++)switch(ce[ge].type){case"bct":ce[ge].x2+=Ie,ce[ge].y2+=de;case"qct":ce[ge].x1+=Ie,ce[ge].y1+=de;case"mt":case"lt":case"arc":default:ce[ge].x+=Ie,ce[ge].y+=de}return ce},V=function(ce){return ce.sort(function(Ie,de){return Ie-de})},W=function(ce,Ie){for(var de,ge,Re=this.fillStyle,Ze=this.strokeStyle,ut=this.lineCap,Xe=this.lineWidth,$e=Math.abs(Xe*this.ctx.transform.scaleX),Dt=this.lineJoin,ni=JSON.parse(JSON.stringify(this.path)),mt=JSON.parse(JSON.stringify(this.path)),At=[],xt=0;xt<mt.length;xt++)if(mt[xt].x!==void 0)for(var Qe=k.call(this,mt[xt]),Yt=0;Yt<Qe.length;Yt+=1)At.indexOf(Qe[Yt])===-1&&At.push(Qe[Yt]);for(var si=0;si<At.length;si++)for(;this.pdf.internal.getNumberOfPages()<At[si];)M.call(this);if(V(At),this.autoPaging)for(var Zt=At[0],Ei=At[At.length-1],Qt=Zt;Qt<Ei+1;Qt++){this.pdf.setPage(Qt),this.fillStyle=Re,this.strokeStyle=Ze,this.lineCap=ut,this.lineWidth=$e,this.lineJoin=Dt;var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ai=Qt===1?this.posY+this.margin[0]:this.margin[0],Ji=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ii=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=Qt===1?0:Ji+(Qt-2)*Ii;if(this.ctx.clip_path.length!==0){var Me=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(de,this.posX+this.margin[3],-$t+ai+this.ctx.prevPageLastElemOffset),J.call(this,ce,!0),this.path=Me}if(ge=JSON.parse(JSON.stringify(ni)),this.path=O(ge,this.posX+this.margin[3],-$t+ai+this.ctx.prevPageLastElemOffset),Ie===!1||Qt===0){var ee=(Qt>Zt||Qt<Ei)&&T.call(this);ee&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,Ii,null).clip().discardPath()),J.call(this,ce,Ie),ee&&this.pdf.restoreGraphicsState()}this.lineWidth=Xe}else this.lineWidth=$e,J.call(this,ce,Ie),this.lineWidth=Xe;this.path=ni},J=function(ce,Ie){if((ce!=="stroke"||Ie||!C.call(this))&&(ce==="stroke"||Ie||!x.call(this))){for(var de,ge,Re=[],Ze=this.path,ut=0;ut<Ze.length;ut++){var Xe=Ze[ut];switch(Xe.type){case"begin":Re.push({begin:!0});break;case"close":Re.push({close:!0});break;case"mt":Re.push({start:Xe,deltas:[],abs:[]});break;case"lt":var $e=Re.length;if(Ze[ut-1]&&!isNaN(Ze[ut-1].x)&&(de=[Xe.x-Ze[ut-1].x,Xe.y-Ze[ut-1].y],$e>0)){for(;$e>=0;$e--)if(Re[$e-1].close!==!0&&Re[$e-1].begin!==!0){Re[$e-1].deltas.push(de),Re[$e-1].abs.push(Xe);break}}break;case"bct":de=[Xe.x1-Ze[ut-1].x,Xe.y1-Ze[ut-1].y,Xe.x2-Ze[ut-1].x,Xe.y2-Ze[ut-1].y,Xe.x-Ze[ut-1].x,Xe.y-Ze[ut-1].y],Re[Re.length-1].deltas.push(de);break;case"qct":var Dt=Ze[ut-1].x+2/3*(Xe.x1-Ze[ut-1].x),ni=Ze[ut-1].y+2/3*(Xe.y1-Ze[ut-1].y),mt=Xe.x+2/3*(Xe.x1-Xe.x),At=Xe.y+2/3*(Xe.y1-Xe.y),xt=Xe.x,Qe=Xe.y;de=[Dt-Ze[ut-1].x,ni-Ze[ut-1].y,mt-Ze[ut-1].x,At-Ze[ut-1].y,xt-Ze[ut-1].x,Qe-Ze[ut-1].y],Re[Re.length-1].deltas.push(de);break;case"arc":Re.push({deltas:[],abs:[],arc:!0}),Array.isArray(Re[Re.length-1].abs)&&Re[Re.length-1].abs.push(Xe)}}ge=Ie?null:ce==="stroke"?"stroke":"fill";for(var Yt=!1,si=0;si<Re.length;si++)if(Re[si].arc)for(var Zt=Re[si].abs,Ei=0;Ei<Zt.length;Ei++){var Qt=Zt[Ei];Qt.type==="arc"?ie.call(this,Qt.x,Qt.y,Qt.radius,Qt.startAngle,Qt.endAngle,Qt.counterclockwise,void 0,Ie,!Yt):me.call(this,Qt.x,Qt.y),Yt=!0}else if(Re[si].close===!0)this.pdf.internal.out("h"),Yt=!1;else if(Re[si].begin!==!0){var Ot=Re[si].start.x,ai=Re[si].start.y;Ae.call(this,Re[si].deltas,Ot,ai),Yt=!0}ge&&Se.call(this,ge),Ie&&xe.call(this)}},Q=function(ce){var Ie=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,de=Ie*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ce-de;case"top":return ce+Ie-de;case"hanging":return ce+Ie-2*de;case"middle":return ce+Ie/2-de;case"ideographic":return ce;case"alphabetic":default:return ce}},Z=function(ce){return ce+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var ce=function(){};return ce.colorStops=[],ce.addColorStop=function(Ie,de){this.colorStops.push([Ie,de])},ce.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ce.isCanvasGradient=!0,ce},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ie=function(ce,Ie,de,ge,Re,Ze,ut,Xe,$e){for(var Dt=rt.call(this,de,ge,Re,Ze),ni=0;ni<Dt.length;ni++){var mt=Dt[ni];ni===0&&($e?le.call(this,mt.x1+ce,mt.y1+Ie):me.call(this,mt.x1+ce,mt.y1+Ie)),pt.call(this,ce,Ie,mt.x2,mt.y2,mt.x3,mt.y3,mt.x4,mt.y4)}Xe?xe.call(this):Se.call(this,ut)},Se=function(ce){switch(ce){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xe=function(){this.pdf.clip(),this.pdf.discardPath()},le=function(ce,Ie){this.pdf.internal.out(t(ce)+" "+n(Ie)+" m")},Ee=function(ce){var Ie;switch(ce.align){case"right":case"end":Ie="right";break;case"center":Ie="center";break;case"left":case"start":default:Ie="left"}var de=this.pdf.getTextDimensions(ce.text),ge=Q.call(this,ce.y),Re=Z.call(this,ge)-de.h,Ze=this.ctx.transform.applyToPoint(new p(ce.x,ge)),ut=this.ctx.transform.decompose(),Xe=new c;Xe=(Xe=(Xe=Xe.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale);for(var $e,Dt,ni,mt=this.ctx.transform.applyToRectangle(new o(ce.x,ge,de.w,de.h)),At=Xe.applyToRectangle(new o(ce.x,Re,de.w,de.h)),xt=k.call(this,At),Qe=[],Yt=0;Yt<xt.length;Yt+=1)Qe.indexOf(xt[Yt])===-1&&Qe.push(xt[Yt]);if(V(Qe),this.autoPaging)for(var si=Qe[0],Zt=Qe[Qe.length-1],Ei=si;Ei<Zt+1;Ei++){this.pdf.setPage(Ei);var Qt=Ei===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ai=this.pdf.internal.pageSize.height-this.margin[2],Ji=ai-this.margin[0],Ii=this.pdf.internal.pageSize.width-this.margin[1],$t=Ii-this.margin[3],Me=Ei===1?0:Ot+(Ei-2)*Ji;if(this.ctx.clip_path.length!==0){var ee=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O($e,this.posX+this.margin[3],-1*Me+Qt),J.call(this,"fill",!0),this.path=ee}var ae=O([JSON.parse(JSON.stringify(At))],this.posX+this.margin[3],-Me+Qt+this.ctx.prevPageLastElemOffset)[0];ce.scale>=.01&&(Dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dt*ce.scale),ni=this.lineWidth,this.lineWidth=ni*ce.scale);var et=this.autoPaging!=="text";if(et||ae.y+ae.h<=ai){if(et||ae.y>=Qt&&ae.x<=Ii){var bt=et?ce.text:this.pdf.splitTextToSize(ce.text,ce.maxWidth||Ii-ae.x)[0],Xt=O([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-Me+Qt+this.ctx.prevPageLastElemOffset)[0],fi=et&&(Ei>si||Ei<Zt)&&T.call(this);fi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,Ji,null).clip().discardPath()),this.pdf.text(bt,Xt.x,Xt.y,{angle:ce.angle,align:Ie,renderingMode:ce.renderingMode}),fi&&this.pdf.restoreGraphicsState()}}else ae.y<ai&&(this.ctx.prevPageLastElemOffset+=ai-ae.y);ce.scale>=.01&&(this.pdf.setFontSize(Dt),this.lineWidth=ni)}else ce.scale>=.01&&(Dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dt*ce.scale),ni=this.lineWidth,this.lineWidth=ni*ce.scale),this.pdf.text(ce.text,Ze.x+this.posX,Ze.y+this.posY,{angle:ce.angle,align:Ie,renderingMode:ce.renderingMode,maxWidth:ce.maxWidth}),ce.scale>=.01&&(this.pdf.setFontSize(Dt),this.lineWidth=ni)},me=function(ce,Ie,de,ge){de=de||0,ge=ge||0,this.pdf.internal.out(t(ce+de)+" "+n(Ie+ge)+" l")},Ae=function(ce,Ie,de){return this.pdf.lines(ce,Ie,de,null,null)},pt=function(ce,Ie,de,ge,Re,Ze,ut,Xe){this.pdf.internal.out([e(l(de+ce)),e(u(ge+Ie)),e(l(Re+ce)),e(u(Ze+Ie)),e(l(ut+ce)),e(u(Xe+Ie)),"c"].join(" "))},rt=function(ce,Ie,de,ge){for(var Re=2*Math.PI,Ze=Math.PI/2;Ie>de;)Ie-=Re;var ut=Math.abs(de-Ie);ut<Re&&ge&&(ut=Re-ut);for(var Xe=[],$e=ge?-1:1,Dt=Ie;ut>1e-5;){var ni=Dt+$e*Math.min(ut,Ze);Xe.push(Pt.call(this,ce,Dt,ni)),ut-=Math.abs(ni-Dt),Dt=ni}return Xe},Pt=function(ce,Ie,de){var ge=(de-Ie)/2,Re=ce*Math.cos(ge),Ze=ce*Math.sin(ge),ut=Re,Xe=-Ze,$e=ut*ut+Xe*Xe,Dt=$e+ut*Re+Xe*Ze,ni=4/3*(Math.sqrt(2*$e*Dt)-Dt)/(ut*Ze-Xe*Re),mt=ut-ni*Xe,At=Xe+ni*ut,xt=mt,Qe=-At,Yt=ge+Ie,si=Math.cos(Yt),Zt=Math.sin(Yt);return{x1:ce*Math.cos(Ie),y1:ce*Math.sin(Ie),x2:mt*si-At*Zt,y2:mt*Zt+At*si,x3:xt*si-Qe*Zt,y3:xt*Zt+Qe*si,x4:ce*Math.cos(de),y4:ce*Math.sin(de)}},We=function(ce){return 180*ce/Math.PI},be=function(ce,Ie,de,ge,Re,Ze){var ut=ce+.5*(de-ce),Xe=Ie+.5*(ge-Ie),$e=Re+.5*(de-Re),Dt=Ze+.5*(ge-Ze),ni=Math.min(ce,Re,ut,$e),mt=Math.max(ce,Re,ut,$e),At=Math.min(Ie,Ze,Xe,Dt),xt=Math.max(Ie,Ze,Xe,Dt);return new o(ni,At,mt-ni,xt-At)},Le=function(ce,Ie,de,ge,Re,Ze,ut,Xe){var $e,Dt,ni,mt,At,xt,Qe,Yt,si,Zt,Ei,Qt,Ot,ai,Ji=de-ce,Ii=ge-Ie,$t=Re-de,Me=Ze-ge,ee=ut-Re,ae=Xe-Ze;for(Dt=0;Dt<41;Dt++)si=(Qe=(ni=ce+($e=Dt/40)*Ji)+$e*((At=de+$e*$t)-ni))+$e*(At+$e*(Re+$e*ee-At)-Qe),Zt=(Yt=(mt=Ie+$e*Ii)+$e*((xt=ge+$e*Me)-mt))+$e*(xt+$e*(Ze+$e*ae-xt)-Yt),Dt==0?(Ei=si,Qt=Zt,Ot=si,ai=Zt):(Ei=Math.min(Ei,si),Qt=Math.min(Qt,Zt),Ot=Math.max(Ot,si),ai=Math.max(ai,Zt));return new o(Math.round(Ei),Math.round(Qt),Math.round(Ot-Ei),Math.round(ai-Qt))},Ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ce,Ie,de=(ce=this.ctx.lineDash,Ie=this.ctx.lineDashOffset,JSON.stringify({lineDash:ce,lineDashOffset:Ie}));this.prevLineDash!==de&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=de)}}})(Br.API),function(i){var e=function(u){var p,o,c,g,_,v,w,x,C,T;for(/[^\x00-\xFF]/.test(u),o=[],c=0,g=(u+=p="\0\0\0\0".slice(u.length%4||4)).length;g>c;c+=4)(_=(u.charCodeAt(c)<<24)+(u.charCodeAt(c+1)<<16)+(u.charCodeAt(c+2)<<8)+u.charCodeAt(c+3))!==0?(v=(_=((_=((_=((_=(_-(T=_%85))/85)-(C=_%85))/85)-(x=_%85))/85)-(w=_%85))/85)%85,o.push(v+33,w+33,x+33,C+33,T+33)):o.push(122);return function(k,M){for(var O=M;O>0;O--)k.pop()}(o,p.length),String.fromCharCode.apply(String,o)+"~>"},t=function(u){var p,o,c,g,_,v=String,w="length",x=255,C="charCodeAt",T="slice",k="replace";for(u[T](-2),u=u[T](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],g=0,_=(u+=p="uuuuu"[T](u[w]%5||5))[w];_>g;g+=5)o=52200625*(u[C](g)-33)+614125*(u[C](g+1)-33)+7225*(u[C](g+2)-33)+85*(u[C](g+3)-33)+(u[C](g+4)-33),c.push(x&o>>24,x&o>>16,x&o>>8,x&o);return function(M,O){for(var V=O;V>0;V--)M.pop()}(c,p[w]),v.fromCharCode.apply(v,c)},n=function(u){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),p.test(u)===!1)return"";for(var o="",c=0;c<u.length;c+=2)o+=String.fromCharCode("0x"+(u[c]+u[c+1]));return o},l=function(u){for(var p=new Uint8Array(u.length),o=u.length;o--;)p[o]=u.charCodeAt(o);return u=(p=Z2(p)).reduce(function(c,g){return c+String.fromCharCode(g)},"")};i.processDataByFilters=function(u,p){var o=0,c=u||"",g=[];for(typeof(p=p||[])=="string"&&(p=[p]),o=0;o<p.length;o+=1)switch(p[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(_){return("0"+_.charCodeAt().toString(16)).slice(-2)}).join("")+">",g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=l(c),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[o]+'" is not implemented')}return{data:c,reverseChain:g.reverse().join(" ")}}}(Br.API),function(i){i.loadFile=function(e,t,n){return function(l,u,p){u=u!==!1,p=typeof p=="function"?p:function(){};var o=void 0;try{o=function(c,g,_){var v=new XMLHttpRequest,w=0,x=function(C){var T=C.length,k=[],M=String.fromCharCode;for(w=0;w<T;w+=1)k.push(M(255&C.charCodeAt(w)));return k.join("")};if(v.open("GET",c,!g),v.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(v.onload=function(){v.status===200?_(x(this.responseText)):_(void 0)}),v.send(null),g&&v.status===200)return x(v.responseText)}(l,u,p)}catch{}return o}(e,t,n)},i.loadImageFile=i.loadFile}(Br.API),function(i){function e(){return(Nr.html2canvas?Promise.resolve(Nr.html2canvas):v1(()=>import("./html2canvas.esm-fb42d204.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function t(){return(Nr.DOMPurify?Promise.resolve(Nr.DOMPurify):v1(()=>import("./purify.es-20117e50.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var n=function(p){var o=ns(p);return o==="undefined"?"undefined":o==="string"||p instanceof String?"string":o==="number"||p instanceof Number?"number":o==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":o==="object"?"object":"unknown"},l=function(p,o){var c=document.createElement(p);for(var g in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[g]=o.style[g];return c},u=function p(o){var c=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),g=p.convert(Promise.resolve(),c);return g=(g=g.setProgress(1,p,1,[p])).set(o)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(p,o){return p.__proto__=o||u.prototype,p},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(p,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(p)){case"string":return this.then(t).then(function(c){return this.set({src:l("div",{innerHTML:p,dompurify:c})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},u.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(g,_){for(var v=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),w=g.firstChild;w;w=w.nextSibling)_!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||v.appendChild(c(w,_));return g.nodeType===1&&(g.nodeName==="CANVAS"?(v.width=g.width,v.height=g.height,v.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(v.value=g.value),v.addEventListener("load",function(){v.scrollTop=g.scrollTop,v.scrollLeft=g.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(o){var c=this.opt.jsPDF,g=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=g,g)for(var w=0;w<g.length;++w){var x=g[w],C=x.src.find(function(T){return T.format==="truetype"});C&&c.addFont(C.url,x.ref.name,x.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),o(this.prop.container,v)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(p,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(p,o):this.outputPdf(p,o)},u.prototype.outputPdf=function(p,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,o)})},u.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},u.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(p){if(n(p)!=="object")return this;var o=Object.keys(p||{}).map(function(c){if(c in u.template.prop)return function(){this.prop[c]=p[c]};switch(c){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[c]=p[c]}}},this);return this.then(function(){return this.thenList(o)})},u.prototype.get=function(p,o){return this.then(function(){var c=p in u.template.prop?this.prop[p]:this.opt[p];return o?o(c):c})},u.prototype.setMargin=function(p){return this.then(function(){switch(n(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},u.prototype.setPageSize=function(p){function o(c,g){return Math.floor(c*g/72*96)}return this.then(function(){(p=p||Br.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:o(p.inner.width,p.k),height:o(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},u.prototype.setProgress=function(p,o,c,g){return p!=null&&(this.progress.val=p),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(p,o,c,g){return this.setProgress(p?this.progress.val+p:null,o||null,c?this.progress.n+c:null,g?this.progress.stack.concat(g):null)},u.prototype.then=function(p,o){var c=this;return this.thenCore(p,o,function(g,_){return c.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,g),v}).then(g,_).then(function(v){return c.updateProgress(1),v})})},u.prototype.thenCore=function(p,o,c){c=c||Promise.prototype.then,p&&(p=p.bind(this)),o&&(o=o.bind(this));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),_=c.call(g,p,o);return u.convert(_,this.__proto__)},u.prototype.thenExternal=function(p,o){return Promise.prototype.then.call(this,p,o)},u.prototype.thenList=function(p){var o=this;return p.forEach(function(c){o=o.thenCore(c)}),o},u.prototype.catch=function(p){p&&(p=p.bind(this));var o=Promise.prototype.catch.call(this,p);return u.convert(o,this)},u.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},u.prototype.error=function(p){return this.then(function(){throw new Error(p)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Br.getPageSize=function(p,o,c){if(ns(p)==="object"){var g=p;p=g.orientation,o=g.unit||o,c=g.format||c}o=o||"mm",c=c||"a4",p=(""+(p||"P")).toLowerCase();var _,v=(""+c).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+o}var x,C=0,T=0;if(w.hasOwnProperty(v))C=w[v][1]/_,T=w[v][0]/_;else try{C=c[1],T=c[0]}catch{throw new Error("Invalid format: "+c)}if(p==="p"||p==="portrait")p="p",T>C&&(x=T,T=C,C=x);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",C>T&&(x=T,T=C,C=x)}return{width:T,height:C,unit:o,k:_,orientation:p}},i.html=function(p,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(tg):null;var c=new u(o);return o.worker?c:c.from(p).doCallback()}}(Br.API),Br.API.addJS=function(i){return rv=i,this.internal.events.subscribe("postPutResources",function(){Gp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Gp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),nv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Gp!==void 0&&nv!==void 0&&this.internal.out("/Names <</JavaScript "+Gp+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=t.outline.render().split(/\r\n/),u=0;u<l.length;u++){var p=l[u],o=n.exec(p);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(p)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,_=[];for(u=0;u<g;u++){var v=t.internal.newObject();_.push(v);var w=t.internal.getPageInfo(u+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),u=0;u<_.length;u++)t.internal.write("(page_"+(u+1)+")"+_[u]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,l,u){var p={title:l,options:u,children:[]};return n==null&&(n=this.root),n.children.push(p),p},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var l=0;l<n.children.length;l++)this.genIds_r(n.children[l])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<n.children.length;u++){var p=n.children[u];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(n)),u>0&&this.line("/Prev "+this.makeRef(n.children[u-1])),u<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[u+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var o=this.count=this.count_r({count:0},p);if(o>0&&this.line("/Count "+o),p.options&&p.options.pageNumber){var c=t.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var g=0;g<n.children.length;g++)this.renderItems(n.children[g])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,l){for(var u=0;u<l.children.length;u++)n.count++,this.count_r(n,l.children[u]);return n.count}}])}(Br.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,n,l,u,p,o){var c,g=this.decode.DCT_DECODE,_=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=p||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(v){for(var w,x=256*v.charCodeAt(4)+v.charCodeAt(5),C=v.length,T={width:0,height:0,numcomponents:1},k=4;k<C;k+=2){if(k+=x,e.indexOf(v.charCodeAt(k+1))!==-1){w=256*v.charCodeAt(k+5)+v.charCodeAt(k+6),T={width:256*v.charCodeAt(k+7)+v.charCodeAt(k+8),height:w,numcomponents:v.charCodeAt(k+9)};break}x=256*v.charCodeAt(k+2)+v.charCodeAt(k+3)}return T}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}_={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:g,index:n,alias:l}}return _}}(Br.API);var k0,Wp,ov,sv,av,JS=function(){var i,e,t;function n(u){var p,o,c,g,_,v,w,x,C,T,k,M,O,V;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(p=this.readUInt32(),C=function(){var W,J;for(J=[],W=0;W<4;++W)J.push(String.fromCharCode(this.data[this.pos++]));return J}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(p);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},_=this.readUInt16(),g=this.readUInt16()||100,v.delay=1e3*_/g,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,p-=4),u=(v!=null?v.data:void 0)||this.imgData,M=0;0<=p?M<p:M>p;0<=p?++M:--M)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(p),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((T=c-this.transparency.indexed.length)>0)for(O=0;0<=T?O<T:O>T;0<=T?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(p)[0];break;case 2:this.transparency.rgb=this.read(p)}break;case"tEXt":w=(k=this.read(p)).indexOf(0),x=String.fromCharCode.apply(String,k.slice(0,w)),this.text[x]=String.fromCharCode.apply(String,k.slice(w+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(u){var p,o;for(o=[],p=0;0<=u?p<u:p>u;0<=u?++p:--p)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(u){var p=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*p),c=0,g=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function _(v,w,x,C){var T,k,M,O,V,W,J,Q,Z,ie,Se,xe,le,Ee,me,Ae,pt,rt,Pt,We,be,Le=Math.ceil((g.width-v)/x),Ue=Math.ceil((g.height-w)/C),ce=g.width==Le&&g.height==Ue;for(Ee=p*Le,xe=ce?o:new Uint8Array(Ee*Ue),W=u.length,le=0,k=0;le<Ue&&c<W;){switch(u[c++]){case 0:for(O=pt=0;pt<Ee;O=pt+=1)xe[k++]=u[c++];break;case 1:for(O=rt=0;rt<Ee;O=rt+=1)T=u[c++],V=O<p?0:xe[k-p],xe[k++]=(T+V)%256;break;case 2:for(O=Pt=0;Pt<Ee;O=Pt+=1)T=u[c++],M=(O-O%p)/p,me=le&&xe[(le-1)*Ee+M*p+O%p],xe[k++]=(me+T)%256;break;case 3:for(O=We=0;We<Ee;O=We+=1)T=u[c++],M=(O-O%p)/p,V=O<p?0:xe[k-p],me=le&&xe[(le-1)*Ee+M*p+O%p],xe[k++]=(T+Math.floor((V+me)/2))%256;break;case 4:for(O=be=0;be<Ee;O=be+=1)T=u[c++],M=(O-O%p)/p,V=O<p?0:xe[k-p],le===0?me=Ae=0:(me=xe[(le-1)*Ee+M*p+O%p],Ae=M&&xe[(le-1)*Ee+(M-1)*p+O%p]),J=V+me-Ae,Q=Math.abs(J-V),ie=Math.abs(J-me),Se=Math.abs(J-Ae),Z=Q<=ie&&Q<=Se?V:ie<=Se?me:Ae,xe[k++]=(T+Z)%256;break;default:throw new Error("Invalid filter algorithm: "+u[c-1])}if(!ce){var Ie=((w+le*C)*g.width+v)*p,de=le*Ee;for(O=0;O<Le;O+=1){for(var ge=0;ge<p;ge+=1)o[Ie++]=xe[de++];Ie+=(x-1)*p}}le++}}return u=PS(u),g.interlaceMethod==1?(_(0,0,8,8),_(4,0,8,8),_(0,4,4,8),_(2,0,4,4),_(0,2,2,4),_(1,0,2,2),_(0,1,1,2)):_(0,0,1,1),o},n.prototype.decodePalette=function(){var u,p,o,c,g,_,v,w,x;for(o=this.palette,_=this.transparency.indexed||[],g=new Uint8Array((_.length||0)+o.length),c=0,u=0,p=v=0,w=o.length;v<w;p=v+=3)g[c++]=o[p],g[c++]=o[p+1],g[c++]=o[p+2],g[c++]=(x=_[u++])!=null?x:255;return g},n.prototype.copyToImageData=function(u,p){var o,c,g,_,v,w,x,C,T,k,M;if(c=this.colors,T=null,o=this.hasAlphaChannel,this.palette.length&&(T=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),c=4,o=!0),C=(g=u.data||u).length,v=T||p,_=w=0,c===1)for(;_<C;)x=T?4*p[_/4]:w,k=v[x++],g[_++]=k,g[_++]=k,g[_++]=k,g[_++]=o?v[x++]:255,w=x;else for(;_<C;)x=T?4*p[_/4]:w,g[_++]=v[x++],g[_++]=v[x++],g[_++]=v[x++],g[_++]=o?v[x++]:255,w=x},n.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var l=function(){if(Object.prototype.toString.call(Nr)==="[object Window]"){try{e=Nr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),i=function(u){var p;if(l()===!0)return t.width=u.width,t.height=u.height,t.clearRect(0,0,u.width,u.height),t.putImageData(u,0,0),(p=new Image).src=e.toDataURL(),p;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(u){var p,o,c,g,_,v,w,x;if(this.animation){for(x=[],o=_=0,v=(w=this.animation.frames).length;_<v;o=++_)p=w[o],c=u.createImageData(p.width,p.height),g=this.decodePixels(new Uint8Array(p.data)),this.copyToImageData(c,g),p.imageData=c,x.push(p.image=i(c));return x}},n.prototype.renderFrame=function(u,p){var o,c,g;return o=(c=this.animation.frames)[p],g=c[p-1],p===0&&u.clearRect(0,0,this.width,this.height),(g!=null?g.disposeOp:void 0)===1?u.clearRect(g.xOffset,g.yOffset,g.width,g.height):(g!=null?g.disposeOp:void 0)===2&&u.putImageData(g.imageData,g.xOffset,g.yOffset),o.blendOp===0&&u.clearRect(o.xOffset,o.yOffset,o.width,o.height),u.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(u){var p,o,c,g,_,v,w=this;return o=0,v=this.animation,g=v.numFrames,c=v.frames,_=v.numPlays,(p=function(){var x,C;if(x=o++%g,C=c[x],w.renderFrame(u,x),g>1&&o/g<_)return w.animation._timeout=setTimeout(p,C.delay)})()},n.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},n.prototype.render=function(u){var p,o;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,p=u.getContext("2d"),this.animation?(this.decodeFrames(p),this.animate(p)):(o=p.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),p.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function QS(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,n=i[e++]|i[e++]<<8,l=i[e++],u=l>>7,p=1<<(7&l)+1;i[e++],i[e++];var o=null,c=null;u&&(o=e,c=p,e+=3*p);var g=!0,_=[],v=0,w=null,x=0,C=null;for(this.width=t,this.height=n;g&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,C=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((le=i[e++])>=0))throw Error("Invalid block size");if(le===0)break;e+=le}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var T=i[e++];v=i[e++]|i[e++]<<8,w=i[e++],(1&T)==0&&(w=null),x=T>>2&7,e++;break;case 254:for(;;){if(!((le=i[e++])>=0))throw Error("Invalid block size");if(le===0)break;e+=le}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var k=i[e++]|i[e++]<<8,M=i[e++]|i[e++]<<8,O=i[e++]|i[e++]<<8,V=i[e++]|i[e++]<<8,W=i[e++],J=W>>6&1,Q=1<<(7&W)+1,Z=o,ie=c,Se=!1;W>>7&&(Se=!0,Z=e,ie=Q,e+=3*Q);var xe=e;for(e++;;){var le;if(!((le=i[e++])>=0))throw Error("Invalid block size");if(le===0)break;e+=le}_.push({x:k,y:M,width:O,height:V,has_local_palette:Se,palette_offset:Z,palette_size:ie,data_offset:xe,data_length:e-xe,transparent_index:w,interlaced:!!J,delay:v,disposal:x});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return C},this.frameInfo=function(Ee){if(Ee<0||Ee>=_.length)throw new Error("Frame index out of range.");return _[Ee]},this.decodeAndBlitFrameBGRA=function(Ee,me){var Ae=this.frameInfo(Ee),pt=Ae.width*Ae.height,rt=new Uint8Array(pt);lv(i,Ae.data_offset,rt,pt);var Pt=Ae.palette_offset,We=Ae.transparent_index;We===null&&(We=256);var be=Ae.width,Le=t-be,Ue=be,ce=4*(Ae.y*t+Ae.x),Ie=4*((Ae.y+Ae.height)*t+Ae.x),de=ce,ge=4*Le;Ae.interlaced===!0&&(ge+=4*t*7);for(var Re=8,Ze=0,ut=rt.length;Ze<ut;++Ze){var Xe=rt[Ze];if(Ue===0&&(Ue=be,(de+=ge)>=Ie&&(ge=4*Le+4*t*(Re-1),de=ce+(be+Le)*(Re<<1),Re>>=1)),Xe===We)de+=4;else{var $e=i[Pt+3*Xe],Dt=i[Pt+3*Xe+1],ni=i[Pt+3*Xe+2];me[de++]=ni,me[de++]=Dt,me[de++]=$e,me[de++]=255}--Ue}},this.decodeAndBlitFrameRGBA=function(Ee,me){var Ae=this.frameInfo(Ee),pt=Ae.width*Ae.height,rt=new Uint8Array(pt);lv(i,Ae.data_offset,rt,pt);var Pt=Ae.palette_offset,We=Ae.transparent_index;We===null&&(We=256);var be=Ae.width,Le=t-be,Ue=be,ce=4*(Ae.y*t+Ae.x),Ie=4*((Ae.y+Ae.height)*t+Ae.x),de=ce,ge=4*Le;Ae.interlaced===!0&&(ge+=4*t*7);for(var Re=8,Ze=0,ut=rt.length;Ze<ut;++Ze){var Xe=rt[Ze];if(Ue===0&&(Ue=be,(de+=ge)>=Ie&&(ge=4*Le+4*t*(Re-1),de=ce+(be+Le)*(Re<<1),Re>>=1)),Xe===We)de+=4;else{var $e=i[Pt+3*Xe],Dt=i[Pt+3*Xe+1],ni=i[Pt+3*Xe+2];me[de++]=$e,me[de++]=Dt,me[de++]=ni,me[de++]=255}--Ue}}}function lv(i,e,t,n){for(var l=i[e++],u=1<<l,p=u+1,o=p+1,c=l+1,g=(1<<c)-1,_=0,v=0,w=0,x=i[e++],C=new Int32Array(4096),T=null;;){for(;_<16&&x!==0;)v|=i[e++]<<_,_+=8,x===1?x=i[e++]:--x;if(_<c)break;var k=v&g;if(v>>=c,_-=c,k!==u){if(k===p)break;for(var M=k<o?k:T,O=0,V=M;V>u;)V=C[V]>>8,++O;var W=V;if(w+O+(M!==k?1:0)>n)return void ps.log("Warning, gif stream longer than expected.");t[w++]=W;var J=w+=O;for(M!==k&&(t[w++]=W),V=M;O--;)V=C[V],t[--J]=255&V,V>>=8;T!==null&&o<4096&&(C[o++]=T<<8|W,o>=g+1&&c<12&&(++c,g=g<<1|1)),T=k}else o=p+1,g=(1<<(c=l+1))-1,T=null}return w!==n&&ps.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Xm(i){var e,t,n,l,u,p=Math.floor,o=new Array(64),c=new Array(64),g=new Array(64),_=new Array(64),v=new Array(65535),w=new Array(65535),x=new Array(64),C=new Array(64),T=[],k=0,M=7,O=new Array(64),V=new Array(64),W=new Array(64),J=new Array(256),Q=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ie=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],le=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ee=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],me=[0,1,2,3,4,5,6,7,8,9,10,11],Ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function rt(ce,Ie){for(var de=0,ge=0,Re=new Array,Ze=1;Ze<=16;Ze++){for(var ut=1;ut<=ce[Ze];ut++)Re[Ie[ge]]=[],Re[Ie[ge]][0]=de,Re[Ie[ge]][1]=Ze,ge++,de++;de*=2}return Re}function Pt(ce){for(var Ie=ce[0],de=ce[1]-1;de>=0;)Ie&1<<de&&(k|=1<<M),de--,--M<0&&(k==255?(We(255),We(0)):We(k),M=7,k=0)}function We(ce){T.push(ce)}function be(ce){We(ce>>8&255),We(255&ce)}function Le(ce,Ie,de,ge,Re){for(var Ze,ut=Re[0],Xe=Re[240],$e=function(Zt,Ei){var Qt,Ot,ai,Ji,Ii,$t,Me,ee,ae,et,bt=0;for(ae=0;ae<8;++ae){Qt=Zt[bt],Ot=Zt[bt+1],ai=Zt[bt+2],Ji=Zt[bt+3],Ii=Zt[bt+4],$t=Zt[bt+5],Me=Zt[bt+6];var Xt=Qt+(ee=Zt[bt+7]),fi=Qt-ee,xn=Ot+Me,qn=Ot-Me,bn=ai+$t,Gi=ai-$t,an=Ji+Ii,Kn=Ji-Ii,mr=Xt+an,yo=Xt-an,ar=xn+bn,Hr=xn-bn;Zt[bt]=mr+ar,Zt[bt+4]=mr-ar;var Yn=.707106781*(Hr+yo);Zt[bt+2]=yo+Yn,Zt[bt+6]=yo-Yn;var Ur=.382683433*((mr=Kn+Gi)-(Hr=qn+fi)),co=.5411961*mr+Ur,Jn=1.306562965*Hr+Ur,br=.707106781*(ar=Gi+qn),Eo=fi+br,un=fi-br;Zt[bt+5]=un+co,Zt[bt+3]=un-co,Zt[bt+1]=Eo+Jn,Zt[bt+7]=Eo-Jn,bt+=8}for(bt=0,ae=0;ae<8;++ae){Qt=Zt[bt],Ot=Zt[bt+8],ai=Zt[bt+16],Ji=Zt[bt+24],Ii=Zt[bt+32],$t=Zt[bt+40],Me=Zt[bt+48];var He=Qt+(ee=Zt[bt+56]),Ho=Qt-ee,Do=Ot+Me,wo=Ot-Me,Pe=ai+$t,Te=ai-$t,qe=Ji+Ii,ft=Ji-Ii,_t=He+qe,Ut=He-qe,Ge=Do+Pe,Ht=Do-Pe;Zt[bt]=_t+Ge,Zt[bt+32]=_t-Ge;var zt=.707106781*(Ht+Ut);Zt[bt+16]=Ut+zt,Zt[bt+48]=Ut-zt;var ti=.382683433*((_t=ft+Te)-(Ht=wo+Ho)),vt=.5411961*_t+ti,ji=1.306562965*Ht+ti,Di=.707106781*(Ge=Te+wo),In=Ho+Di,kn=Ho-Di;Zt[bt+40]=kn+vt,Zt[bt+24]=kn-vt,Zt[bt+8]=In+ji,Zt[bt+56]=In-ji,bt++}for(ae=0;ae<64;++ae)et=Zt[ae]*Ei[ae],x[ae]=et>0?et+.5|0:et-.5|0;return x}(ce,Ie),Dt=0;Dt<64;++Dt)C[Z[Dt]]=$e[Dt];var ni=C[0]-de;de=C[0],ni==0?Pt(ge[0]):(Pt(ge[w[Ze=32767+ni]]),Pt(v[Ze]));for(var mt=63;mt>0&&C[mt]==0;)mt--;if(mt==0)return Pt(ut),de;for(var At,xt=1;xt<=mt;){for(var Qe=xt;C[xt]==0&&xt<=mt;)++xt;var Yt=xt-Qe;if(Yt>=16){At=Yt>>4;for(var si=1;si<=At;++si)Pt(Xe);Yt&=15}Ze=32767+C[xt],Pt(Re[(Yt<<4)+w[Ze]]),Pt(v[Ze]),xt++}return mt!=63&&Pt(ut),de}function Ue(ce){ce=Math.min(Math.max(ce,1),100),u!=ce&&(function(Ie){for(var de=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ge=0;ge<64;ge++){var Re=p((de[ge]*Ie+50)/100);Re=Math.min(Math.max(Re,1),255),o[Z[ge]]=Re}for(var Ze=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ut=0;ut<64;ut++){var Xe=p((Ze[ut]*Ie+50)/100);Xe=Math.min(Math.max(Xe,1),255),c[Z[ut]]=Xe}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Dt=0,ni=0;ni<8;ni++)for(var mt=0;mt<8;mt++)g[Dt]=1/(o[Z[Dt]]*$e[ni]*$e[mt]*8),_[Dt]=1/(c[Z[Dt]]*$e[ni]*$e[mt]*8),Dt++}(ce<50?Math.floor(5e3/ce):Math.floor(200-2*ce)),u=ce)}this.encode=function(ce,Ie){Ie&&Ue(Ie),T=new Array,k=0,M=7,be(65496),be(65504),be(16),We(74),We(70),We(73),We(70),We(0),We(1),We(1),We(0),be(1),be(1),We(0),We(0),function(){be(65499),be(132),We(0);for(var Ot=0;Ot<64;Ot++)We(o[Ot]);We(1);for(var ai=0;ai<64;ai++)We(c[ai])}(),function(Ot,ai){be(65472),be(17),We(8),be(ai),be(Ot),We(3),We(1),We(17),We(0),We(2),We(17),We(1),We(3),We(17),We(1)}(ce.width,ce.height),function(){be(65476),be(418),We(0);for(var Ot=0;Ot<16;Ot++)We(ie[Ot+1]);for(var ai=0;ai<=11;ai++)We(Se[ai]);We(16);for(var Ji=0;Ji<16;Ji++)We(xe[Ji+1]);for(var Ii=0;Ii<=161;Ii++)We(le[Ii]);We(1);for(var $t=0;$t<16;$t++)We(Ee[$t+1]);for(var Me=0;Me<=11;Me++)We(me[Me]);We(17);for(var ee=0;ee<16;ee++)We(Ae[ee+1]);for(var ae=0;ae<=161;ae++)We(pt[ae])}(),be(65498),be(12),We(3),We(1),We(0),We(2),We(17),We(3),We(17),We(0),We(63),We(0);var de=0,ge=0,Re=0;k=0,M=7,this.encode.displayName="_encode_";for(var Ze,ut,Xe,$e,Dt,ni,mt,At,xt,Qe=ce.data,Yt=ce.width,si=ce.height,Zt=4*Yt,Ei=0;Ei<si;){for(Ze=0;Ze<Zt;){for(Dt=Zt*Ei+Ze,mt=-1,At=0,xt=0;xt<64;xt++)ni=Dt+(At=xt>>3)*Zt+(mt=4*(7&xt)),Ei+At>=si&&(ni-=Zt*(Ei+1+At-si)),Ze+mt>=Zt&&(ni-=Ze+mt-Zt+4),ut=Qe[ni++],Xe=Qe[ni++],$e=Qe[ni++],O[xt]=(Q[ut]+Q[Xe+256>>0]+Q[$e+512>>0]>>16)-128,V[xt]=(Q[ut+768>>0]+Q[Xe+1024>>0]+Q[$e+1280>>0]>>16)-128,W[xt]=(Q[ut+1280>>0]+Q[Xe+1536>>0]+Q[$e+1792>>0]>>16)-128;de=Le(O,g,de,e,n),ge=Le(V,_,ge,t,l),Re=Le(W,_,Re,t,l),Ze+=32}Ei+=8}if(M>=0){var Qt=[];Qt[1]=M+1,Qt[0]=(1<<M+1)-1,Pt(Qt)}return be(65497),new Uint8Array(T)},i=i||50,function(){for(var ce=String.fromCharCode,Ie=0;Ie<256;Ie++)J[Ie]=ce(Ie)}(),e=rt(ie,Se),t=rt(Ee,me),n=rt(xe,le),l=rt(Ae,pt),function(){for(var ce=1,Ie=2,de=1;de<=15;de++){for(var ge=ce;ge<Ie;ge++)w[32767+ge]=de,v[32767+ge]=[],v[32767+ge][1]=de,v[32767+ge][0]=ge;for(var Re=-(Ie-1);Re<=-ce;Re++)w[32767+Re]=de,v[32767+Re]=[],v[32767+Re][1]=de,v[32767+Re][0]=Ie-1+Re;ce<<=1,Ie<<=1}}(),function(){for(var ce=0;ce<256;ce++)Q[ce]=19595*ce,Q[ce+256>>0]=38470*ce,Q[ce+512>>0]=7471*ce+32768,Q[ce+768>>0]=-11059*ce,Q[ce+1024>>0]=-21709*ce,Q[ce+1280>>0]=32768*ce+8421375,Q[ce+1536>>0]=-27439*ce,Q[ce+1792>>0]=-5329*ce}(),Ue(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cc(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uv(i){function e(ie){if(!ie)throw Error("assert :P")}function t(ie,Se,xe){for(var le=0;4>le;le++)if(ie[Se+le]!=xe.charCodeAt(le))return!0;return!1}function n(ie,Se,xe,le,Ee){for(var me=0;me<Ee;me++)ie[Se+me]=xe[le+me]}function l(ie,Se,xe,le){for(var Ee=0;Ee<le;Ee++)ie[Se+Ee]=xe}function u(ie){return new Int32Array(ie)}function p(ie,Se){for(var xe=[],le=0;le<ie;le++)xe.push(new Se);return xe}function o(ie,Se){var xe=[];return function le(Ee,me,Ae){for(var pt=Ae[me],rt=0;rt<pt&&(Ee.push(Ae.length>me+1?[]:new Se),!(Ae.length<me+1));rt++)le(Ee[rt],me+1,Ae)}(xe,0,ie),xe}var c=function(){var ie=this;function Se(j,K){for(var ue=1<<K-1>>>0;j&ue;)ue>>>=1;return ue?(j&ue-1)+ue:j}function xe(j,K,ue,ve,Ne){e(!(ve%ue));do j[K+(ve-=ue)]=Ne;while(0<ve)}function le(j,K,ue,ve,Ne){if(e(2328>=Ne),512>=Ne)var Ke=u(512);else if((Ke=u(Ne))==null)return 0;return function(it,at,gt,Et,ii,bi){var _i,ci,rn=at,Bi=1<<gt,qt=u(16),Kt=u(16);for(e(ii!=0),e(Et!=null),e(it!=null),e(0<gt),ci=0;ci<ii;++ci){if(15<Et[ci])return 0;++qt[Et[ci]]}if(qt[0]==ii)return 0;for(Kt[1]=0,_i=1;15>_i;++_i){if(qt[_i]>1<<_i)return 0;Kt[_i+1]=Kt[_i]+qt[_i]}for(ci=0;ci<ii;++ci)_i=Et[ci],0<Et[ci]&&(bi[Kt[_i]++]=ci);if(Kt[15]==1)return(Et=new Ee).g=0,Et.value=bi[0],xe(it,rn,1,Bi,Et),Bi;var Zi,Qi=-1,Hi=Bi-1,Tn=0,An=1,xr=1,Ln=1<<gt;for(ci=0,_i=1,ii=2;_i<=gt;++_i,ii<<=1){if(An+=xr<<=1,0>(xr-=qt[_i]))return 0;for(;0<qt[_i];--qt[_i])(Et=new Ee).g=_i,Et.value=bi[ci++],xe(it,rn+Tn,ii,Ln,Et),Tn=Se(Tn,_i)}for(_i=gt+1,ii=2;15>=_i;++_i,ii<<=1){if(An+=xr<<=1,0>(xr-=qt[_i]))return 0;for(;0<qt[_i];--qt[_i]){if(Et=new Ee,(Tn&Hi)!=Qi){for(rn+=Ln,Zi=1<<(Qi=_i)-gt;15>Qi&&!(0>=(Zi-=qt[Qi]));)++Qi,Zi<<=1;Bi+=Ln=1<<(Zi=Qi-gt),it[at+(Qi=Tn&Hi)].g=Zi+gt,it[at+Qi].value=rn-at-Qi}Et.g=_i-gt,Et.value=bi[ci++],xe(it,rn+(Tn>>gt),ii,Ln,Et),Tn=Se(Tn,_i)}}return An!=2*Kt[15]-1?0:Bi}(j,K,ue,ve,Ne,Ke)}function Ee(){this.value=this.g=0}function me(){this.value=this.g=0}function Ae(){this.G=p(5,Ee),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(Rs,me)}function pt(j,K,ue,ve){e(j!=null),e(K!=null),e(2147483648>ve),j.Ca=254,j.I=0,j.b=-8,j.Ka=0,j.oa=K,j.pa=ue,j.Jd=K,j.Yc=ue+ve,j.Zc=4<=ve?ue+ve-4+1:ue,Ze(j)}function rt(j,K){for(var ue=0;0<K--;)ue|=Xe(j,128)<<K;return ue}function Pt(j,K){var ue=rt(j,K);return ut(j)?-ue:ue}function We(j,K,ue,ve){var Ne,Ke=0;for(e(j!=null),e(K!=null),e(4294967288>ve),j.Sb=ve,j.Ra=0,j.u=0,j.h=0,4<ve&&(ve=4),Ne=0;Ne<ve;++Ne)Ke+=K[ue+Ne]<<8*Ne;j.Ra=Ke,j.bb=ve,j.oa=K,j.pa=ue}function be(j){for(;8<=j.u&&j.bb<j.Sb;)j.Ra>>>=8,j.Ra+=j.oa[j.pa+j.bb]<<Xa-8>>>0,++j.bb,j.u-=8;de(j)&&(j.h=1,j.u=0)}function Le(j,K){if(e(0<=K),!j.h&&K<=Zl){var ue=Ie(j)&vu[K];return j.u+=K,be(j),ue}return j.h=1,j.u=0}function Ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ce(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ie(j){return j.Ra>>>(j.u&Xa-1)>>>0}function de(j){return e(j.bb<=j.Sb),j.h||j.bb==j.Sb&&j.u>Xa}function ge(j,K){j.u=K,j.h=de(j)}function Re(j){j.u>=bu&&(e(j.u>=bu),be(j))}function Ze(j){e(j!=null&&j.oa!=null),j.pa<j.Zc?(j.I=(j.oa[j.pa++]|j.I<<8)>>>0,j.b+=8):(e(j!=null&&j.oa!=null),j.pa<j.Yc?(j.b+=8,j.I=j.oa[j.pa++]|j.I<<8):j.Ka?j.b=0:(j.I<<=8,j.b+=8,j.Ka=1))}function ut(j){return rt(j,1)}function Xe(j,K){var ue=j.Ca;0>j.b&&Ze(j);var ve=j.b,Ne=ue*K>>>8,Ke=(j.I>>>ve>Ne)+0;for(Ke?(ue-=Ne,j.I-=Ne+1<<ve>>>0):ue=Ne+1,ve=ue,Ne=0;256<=ve;)Ne+=8,ve>>=8;return ve=7^Ne+Bs[ve],j.b-=ve,j.Ca=(ue<<ve)-1,Ke}function $e(j,K,ue){j[K+0]=ue>>24&255,j[K+1]=ue>>16&255,j[K+2]=ue>>8&255,j[K+3]=ue>>0&255}function Dt(j,K){return j[K+0]<<0|j[K+1]<<8}function ni(j,K){return Dt(j,K)|j[K+2]<<16}function mt(j,K){return Dt(j,K)|Dt(j,K+2)<<16}function At(j,K){var ue=1<<K;return e(j!=null),e(0<K),j.X=u(ue),j.X==null?0:(j.Mb=32-K,j.Xa=K,1)}function xt(j,K){e(j!=null),e(K!=null),e(j.Xa==K.Xa),n(K.X,0,j.X,0,1<<K.Xa)}function Qe(){this.X=[],this.Xa=this.Mb=0}function Yt(j,K,ue,ve){e(ue!=null),e(ve!=null);var Ne=ue[0],Ke=ve[0];return Ne==0&&(Ne=(j*Ke+K/2)/K),Ke==0&&(Ke=(K*Ne+j/2)/j),0>=Ne||0>=Ke?0:(ue[0]=Ne,ve[0]=Ke,1)}function si(j,K){return j+(1<<K)-1>>>K}function Zt(j,K){return((4278255360&j)+(4278255360&K)>>>0&4278255360)+((16711935&j)+(16711935&K)>>>0&16711935)>>>0}function Ei(j,K){ie[K]=function(ue,ve,Ne,Ke,it,at,gt){var Et;for(Et=0;Et<it;++Et){var ii=ie[j](at[gt+Et-1],Ne,Ke+Et);at[gt+Et]=Zt(ue[ve+Et],ii)}}}function Qt(){this.ud=this.hd=this.jd=0}function Ot(j,K){return((4278124286&(j^K))>>>1)+(j&K)>>>0}function ai(j){return 0<=j&&256>j?j:0>j?0:255<j?255:void 0}function Ji(j,K){return ai(j+(j-K+.5>>1))}function Ii(j,K,ue){return Math.abs(K-ue)-Math.abs(j-ue)}function $t(j,K,ue,ve,Ne,Ke,it){for(ve=Ke[it-1],ue=0;ue<Ne;++ue)Ke[it+ue]=ve=Zt(j[K+ue],ve)}function Me(j,K,ue,ve,Ne){var Ke;for(Ke=0;Ke<ue;++Ke){var it=j[K+Ke],at=it>>8&255,gt=16711935&(gt=(gt=16711935&it)+((at<<16)+at));ve[Ne+Ke]=(4278255360&it)+gt>>>0}}function ee(j,K){K.jd=j>>0&255,K.hd=j>>8&255,K.ud=j>>16&255}function ae(j,K,ue,ve,Ne,Ke){var it;for(it=0;it<ve;++it){var at=K[ue+it],gt=at>>>8,Et=at,ii=255&(ii=(ii=at>>>16)+((j.jd<<24>>24)*(gt<<24>>24)>>>5));Et=255&(Et=(Et=Et+((j.hd<<24>>24)*(gt<<24>>24)>>>5))+((j.ud<<24>>24)*(ii<<24>>24)>>>5)),Ne[Ke+it]=(4278255360&at)+(ii<<16)+Et}}function et(j,K,ue,ve,Ne){ie[K]=function(Ke,it,at,gt,Et,ii,bi,_i,ci){for(gt=bi;gt<_i;++gt)for(bi=0;bi<ci;++bi)Et[ii++]=Ne(at[ve(Ke[it++])])},ie[j]=function(Ke,it,at,gt,Et,ii,bi){var _i=8>>Ke.b,ci=Ke.Ea,rn=Ke.K[0],Bi=Ke.w;if(8>_i)for(Ke=(1<<Ke.b)-1,Bi=(1<<_i)-1;it<at;++it){var qt,Kt=0;for(qt=0;qt<ci;++qt)qt&Ke||(Kt=ve(gt[Et++])),ii[bi++]=Ne(rn[Kt&Bi]),Kt>>=_i}else ie["VP8LMapColor"+ue](gt,Et,rn,Bi,ii,bi,it,at,ci)}}function bt(j,K,ue,ve,Ne){for(ue=K+ue;K<ue;){var Ke=j[K++];ve[Ne++]=Ke>>16&255,ve[Ne++]=Ke>>8&255,ve[Ne++]=Ke>>0&255}}function Xt(j,K,ue,ve,Ne){for(ue=K+ue;K<ue;){var Ke=j[K++];ve[Ne++]=Ke>>16&255,ve[Ne++]=Ke>>8&255,ve[Ne++]=Ke>>0&255,ve[Ne++]=Ke>>24&255}}function fi(j,K,ue,ve,Ne){for(ue=K+ue;K<ue;){var Ke=(it=j[K++])>>16&240|it>>12&15,it=it>>0&240|it>>28&15;ve[Ne++]=Ke,ve[Ne++]=it}}function xn(j,K,ue,ve,Ne){for(ue=K+ue;K<ue;){var Ke=(it=j[K++])>>16&248|it>>13&7,it=it>>5&224|it>>3&31;ve[Ne++]=Ke,ve[Ne++]=it}}function qn(j,K,ue,ve,Ne){for(ue=K+ue;K<ue;){var Ke=j[K++];ve[Ne++]=Ke>>0&255,ve[Ne++]=Ke>>8&255,ve[Ne++]=Ke>>16&255}}function bn(j,K,ue,ve,Ne,Ke){if(Ke==0)for(ue=K+ue;K<ue;)$e(ve,((Ke=j[K++])[0]>>24|Ke[1]>>8&65280|Ke[2]<<8&16711680|Ke[3]<<24)>>>0),Ne+=32;else n(ve,Ne,j,K,ue)}function Gi(j,K){ie[K][0]=ie[j+"0"],ie[K][1]=ie[j+"1"],ie[K][2]=ie[j+"2"],ie[K][3]=ie[j+"3"],ie[K][4]=ie[j+"4"],ie[K][5]=ie[j+"5"],ie[K][6]=ie[j+"6"],ie[K][7]=ie[j+"7"],ie[K][8]=ie[j+"8"],ie[K][9]=ie[j+"9"],ie[K][10]=ie[j+"10"],ie[K][11]=ie[j+"11"],ie[K][12]=ie[j+"12"],ie[K][13]=ie[j+"13"],ie[K][14]=ie[j+"0"],ie[K][15]=ie[j+"0"]}function an(j){return j==jo||j==ku||j==Cu||j==Nc}function Kn(){this.eb=[],this.size=this.A=this.fb=0}function mr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function yo(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Kn,this.f.kb=new mr,this.sd=null}function ar(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Hr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Yn(j){return alert("todo:WebPSamplerProcessPlane"),j.T}function Ur(j,K){var ue=j.T,ve=K.ba.f.RGBA,Ne=ve.eb,Ke=ve.fb+j.ka*ve.A,it=X[K.ba.S],at=j.y,gt=j.O,Et=j.f,ii=j.N,bi=j.ea,_i=j.W,ci=K.cc,rn=K.dc,Bi=K.Mc,qt=K.Nc,Kt=j.ka,Zi=j.ka+j.T,Qi=j.U,Hi=Qi+1>>1;for(Kt==0?it(at,gt,null,null,Et,ii,bi,_i,Et,ii,bi,_i,Ne,Ke,null,null,Qi):(it(K.ec,K.fc,at,gt,ci,rn,Bi,qt,Et,ii,bi,_i,Ne,Ke-ve.A,Ne,Ke,Qi),++ue);Kt+2<Zi;Kt+=2)ci=Et,rn=ii,Bi=bi,qt=_i,ii+=j.Rc,_i+=j.Rc,Ke+=2*ve.A,it(at,(gt+=2*j.fa)-j.fa,at,gt,ci,rn,Bi,qt,Et,ii,bi,_i,Ne,Ke-ve.A,Ne,Ke,Qi);return gt+=j.fa,j.j+Zi<j.o?(n(K.ec,K.fc,at,gt,Qi),n(K.cc,K.dc,Et,ii,Hi),n(K.Mc,K.Nc,bi,_i,Hi),ue--):1&Zi||it(at,gt,null,null,Et,ii,bi,_i,Et,ii,bi,_i,Ne,Ke+ve.A,null,null,Qi),ue}function co(j,K,ue){var ve=j.F,Ne=[j.J];if(ve!=null){var Ke=j.U,it=K.ba.S,at=it==Jl||it==Cu;K=K.ba.f.RGBA;var gt=[0],Et=j.ka;gt[0]=j.T,j.Kb&&(Et==0?--gt[0]:(--Et,Ne[0]-=j.width),j.j+j.ka+j.T==j.o&&(gt[0]=j.o-j.j-Et));var ii=K.eb;Et=K.fb+Et*K.A,j=Gu(ve,Ne[0],j.width,Ke,gt,ii,Et+(at?0:3),K.A),e(ue==gt),j&&an(it)&&za(ii,Et,at,Ke,gt,K.A)}return 0}function Jn(j){var K=j.ma,ue=K.ba.S,ve=11>ue,Ne=ue==uc||ue==Su||ue==Jl||ue==no||ue==12||an(ue);if(K.memory=null,K.Ib=null,K.Jb=null,K.Nd=null,!Tl(K.Oa,j,Ne?11:12))return 0;if(Ne&&an(ue)&&cn(),j.da)alert("todo:use_scaling");else{if(ve){if(K.Ib=Yn,j.Kb){if(ue=j.U+1>>1,K.memory=u(j.U+2*ue),K.memory==null)return 0;K.ec=K.memory,K.fc=0,K.cc=K.ec,K.dc=K.fc+j.U,K.Mc=K.cc,K.Nc=K.dc+ue,K.Ib=Ur,cn()}}else alert("todo:EmitYUV");Ne&&(K.Jb=co,ve&&li())}if(ve&&!jt){for(j=0;256>j;++j)Oi[j]=89858*(j-128)+Ct>>Mt,Vi[j]=-22014*(j-128)+Ct,Wi[j]=-45773*(j-128),ki[j]=113618*(j-128)+Ct>>Mt;for(j=Tt;j<ei;++j)K=76283*(j-16)+Ct>>Mt,ln[j-Tt]=Ts(K,255),Ui[j-Tt]=Ts(K+8>>4,15);jt=1}return 1}function br(j){var K=j.ma,ue=j.U,ve=j.T;return e(!(1&j.ka)),0>=ue||0>=ve?0:(ue=K.Ib(j,K),K.Jb!=null&&K.Jb(j,K,ue),K.Dc+=ue,1)}function Eo(j){j.ma.memory=null}function un(j,K,ue,ve){return Le(j,8)!=47?0:(K[0]=Le(j,14)+1,ue[0]=Le(j,14)+1,ve[0]=Le(j,1),Le(j,3)!=0?0:!j.h)}function He(j,K){if(4>j)return j+1;var ue=j-2>>1;return(2+(1&j)<<ue)+Le(K,ue)+1}function Ho(j,K){return 120<K?K-120:1<=(ue=((ue=Qn[K-1])>>4)*j+(8-(15&ue)))?ue:1;var ue}function Do(j,K,ue){var ve=Ie(ue),Ne=j[K+=255&ve].g-8;return 0<Ne&&(ge(ue,ue.u+8),ve=Ie(ue),K+=j[K].value,K+=ve&(1<<Ne)-1),ge(ue,ue.u+j[K].g),j[K].value}function wo(j,K,ue){return ue.g+=j.g,ue.value+=j.value<<K>>>0,e(8>=ue.g),j.g}function Pe(j,K,ue){var ve=j.xc;return e((K=ve==0?0:j.vc[j.md*(ue>>ve)+(K>>ve)])<j.Wb),j.Ya[K]}function Te(j,K,ue,ve){var Ne=j.ab,Ke=j.c*K,it=j.C;K=it+K;var at=ue,gt=ve;for(ve=j.Ta,ue=j.Ua;0<Ne--;){var Et=j.gc[Ne],ii=it,bi=K,_i=at,ci=gt,rn=(gt=ve,at=ue,Et.Ea);switch(e(ii<bi),e(bi<=Et.nc),Et.hc){case 2:Kl(_i,ci,(bi-ii)*rn,gt,at);break;case 0:var Bi=ii,qt=bi,Kt=gt,Zi=at,Qi=(Ln=Et).Ea;Bi==0&&(wu(_i,ci,null,null,1,Kt,Zi),$t(_i,ci+1,0,0,Qi-1,Kt,Zi+1),ci+=Qi,Zi+=Qi,++Bi);for(var Hi=1<<Ln.b,Tn=Hi-1,An=si(Qi,Ln.b),xr=Ln.K,Ln=Ln.w+(Bi>>Ln.b)*An;Bi<qt;){var vo=xr,So=Ln,Xr=1;for(cl(_i,ci,Kt,Zi-Qi,1,Kt,Zi);Xr<Qi;){var jr=(Xr&~Tn)+Hi;jr>Qi&&(jr=Qi),(0,Pl[vo[So++]>>8&15])(_i,ci+ +Xr,Kt,Zi+Xr-Qi,jr-Xr,Kt,Zi+Xr),Xr=jr}ci+=Qi,Zi+=Qi,++Bi&Tn||(Ln+=An)}bi!=Et.nc&&n(gt,at-rn,gt,at+(bi-ii-1)*rn,rn);break;case 1:for(rn=_i,qt=ci,Qi=(_i=Et.Ea)-(Zi=_i&~(Kt=(ci=1<<Et.b)-1)),Bi=si(_i,Et.b),Hi=Et.K,Et=Et.w+(ii>>Et.b)*Bi;ii<bi;){for(Tn=Hi,An=Et,xr=new Qt,Ln=qt+Zi,vo=qt+_i;qt<Ln;)ee(Tn[An++],xr),zs(xr,rn,qt,ci,gt,at),qt+=ci,at+=ci;qt<vo&&(ee(Tn[An++],xr),zs(xr,rn,qt,Qi,gt,at),qt+=Qi,at+=Qi),++ii&Kt||(Et+=Bi)}break;case 3:if(_i==gt&&ci==at&&0<Et.b){for(qt=gt,_i=rn=at+(bi-ii)*rn-(Zi=(bi-ii)*si(Et.Ea,Et.b)),ci=gt,Kt=at,Bi=[],Zi=(Qi=Zi)-1;0<=Zi;--Zi)Bi[Zi]=ci[Kt+Zi];for(Zi=Qi-1;0<=Zi;--Zi)qt[_i+Zi]=Bi[Zi];Oa(Et,ii,bi,gt,rn,gt,at)}else Oa(Et,ii,bi,_i,ci,gt,at)}at=ve,gt=ue}gt!=ue&&n(ve,ue,at,gt,Ke)}function qe(j,K){var ue=j.V,ve=j.Ba+j.c*j.C,Ne=K-j.C;if(e(K<=j.l.o),e(16>=Ne),0<Ne){var Ke=j.l,it=j.Ta,at=j.Ua,gt=Ke.width;if(Te(j,Ne,ue,ve),Ne=at=[at],e((ue=j.C)<(ve=K)),e(Ke.v<Ke.va),ve>Ke.o&&(ve=Ke.o),ue<Ke.j){var Et=Ke.j-ue;ue=Ke.j,Ne[0]+=Et*gt}if(ue>=ve?ue=0:(Ne[0]+=4*Ke.v,Ke.ka=ue-Ke.j,Ke.U=Ke.va-Ke.v,Ke.T=ve-ue,ue=1),ue){if(at=at[0],11>(ue=j.ca).S){var ii=ue.f.RGBA,bi=(ve=ue.S,Ne=Ke.U,Ke=Ke.T,Et=ii.eb,ii.A),_i=Ke;for(ii=ii.fb+j.Ma*ii.A;0<_i--;){var ci=it,rn=at,Bi=Ne,qt=Et,Kt=ii;switch(ve){case Ya:Fa(ci,rn,Bi,qt,Kt);break;case uc:Ra(ci,rn,Bi,qt,Kt);break;case jo:Ra(ci,rn,Bi,qt,Kt),za(qt,Kt,0,Bi,1,0);break;case Au:hl(ci,rn,Bi,qt,Kt);break;case Su:bn(ci,rn,Bi,qt,Kt,1);break;case ku:bn(ci,rn,Bi,qt,Kt,1),za(qt,Kt,0,Bi,1,0);break;case Jl:bn(ci,rn,Bi,qt,Kt,0);break;case Cu:bn(ci,rn,Bi,qt,Kt,0),za(qt,Kt,1,Bi,1,0);break;case no:sa(ci,rn,Bi,qt,Kt);break;case Nc:sa(ci,rn,Bi,qt,Kt),Hu(qt,Kt,Bi,1,0);break;case ba:hs(ci,rn,Bi,qt,Kt);break;default:e(0)}at+=gt,ii+=bi}j.Ma+=Ke}else alert("todo:EmitRescaledRowsYUVA");e(j.Ma<=ue.height)}}j.C=K,e(j.C<=j.i)}function ft(j){var K;if(0<j.ua)return 0;for(K=0;K<j.Wb;++K){var ue=j.Ya[K].G,ve=j.Ya[K].H;if(0<ue[1][ve[1]+0].g||0<ue[2][ve[2]+0].g||0<ue[3][ve[3]+0].g)return 0}return 1}function _t(j,K,ue,ve,Ne,Ke){if(j.Z!=0){var it=j.qd,at=j.rd;for(e(z[j.Z]!=null);K<ue;++K)z[j.Z](it,at,ve,Ne,ve,Ne,Ke),it=ve,at=Ne,Ne+=Ke;j.qd=it,j.rd=at}}function Ut(j,K){var ue=j.l.ma,ve=ue.Z==0||ue.Z==1?j.l.j:j.C;if(ve=j.C<ve?ve:j.C,e(K<=j.l.o),K>ve){var Ne=j.l.width,Ke=ue.ca,it=ue.tb+Ne*ve,at=j.V,gt=j.Ba+j.c*ve,Et=j.gc;e(j.ab==1),e(Et[0].hc==3),Fc(Et[0],ve,K,at,gt,Ke,it),_t(ue,ve,K,Ke,it,Ne)}j.C=j.Ma=K}function Ge(j,K,ue,ve,Ne,Ke,it){var at=j.$/ve,gt=j.$%ve,Et=j.m,ii=j.s,bi=ue+j.$,_i=bi;Ne=ue+ve*Ne;var ci=ue+ve*Ke,rn=280+ii.ua,Bi=j.Pb?at:16777216,qt=0<ii.ua?ii.Wa:null,Kt=ii.wc,Zi=bi<ci?Pe(ii,gt,at):null;e(j.C<Ke),e(ci<=Ne);var Qi=!1;e:for(;;){for(;Qi||bi<ci;){var Hi=0;if(at>=Bi){var Tn=bi-ue;e((Bi=j).Pb),Bi.wd=Bi.m,Bi.xd=Tn,0<Bi.s.ua&&xt(Bi.s.Wa,Bi.s.vb),Bi=at+Wu}if(gt&Kt||(Zi=Pe(ii,gt,at)),e(Zi!=null),Zi.Qb&&(K[bi]=Zi.qb,Qi=!0),!Qi)if(Re(Et),Zi.jc){Hi=Et,Tn=K;var An=bi,xr=Zi.pd[Ie(Hi)&Rs-1];e(Zi.jc),256>xr.g?(ge(Hi,Hi.u+xr.g),Tn[An]=xr.value,Hi=0):(ge(Hi,Hi.u+xr.g-256),e(256<=xr.value),Hi=xr.value),Hi==0&&(Qi=!0)}else Hi=Do(Zi.G[0],Zi.H[0],Et);if(Et.h)break;if(Qi||256>Hi){if(!Qi)if(Zi.nd)K[bi]=(Zi.qb|Hi<<8)>>>0;else{if(Re(Et),Qi=Do(Zi.G[1],Zi.H[1],Et),Re(Et),Tn=Do(Zi.G[2],Zi.H[2],Et),An=Do(Zi.G[3],Zi.H[3],Et),Et.h)break;K[bi]=(An<<24|Qi<<16|Hi<<8|Tn)>>>0}if(Qi=!1,++bi,++gt>=ve&&(gt=0,++at,it!=null&&at<=Ke&&!(at%16)&&it(j,at),qt!=null))for(;_i<bi;)Hi=K[_i++],qt.X[(506832829*Hi&4294967295)>>>qt.Mb]=Hi}else if(280>Hi){if(Hi=He(Hi-256,Et),Tn=Do(Zi.G[4],Zi.H[4],Et),Re(Et),Tn=Ho(ve,Tn=He(Tn,Et)),Et.h)break;if(bi-ue<Tn||Ne-bi<Hi)break e;for(An=0;An<Hi;++An)K[bi+An]=K[bi+An-Tn];for(bi+=Hi,gt+=Hi;gt>=ve;)gt-=ve,++at,it!=null&&at<=Ke&&!(at%16)&&it(j,at);if(e(bi<=Ne),gt&Kt&&(Zi=Pe(ii,gt,at)),qt!=null)for(;_i<bi;)Hi=K[_i++],qt.X[(506832829*Hi&4294967295)>>>qt.Mb]=Hi}else{if(!(Hi<rn))break e;for(Qi=Hi-280,e(qt!=null);_i<bi;)Hi=K[_i++],qt.X[(506832829*Hi&4294967295)>>>qt.Mb]=Hi;Hi=bi,e(!(Qi>>>(Tn=qt).Xa)),K[Hi]=Tn.X[Qi],Qi=!0}Qi||e(Et.h==de(Et))}if(j.Pb&&Et.h&&bi<Ne)e(j.m.h),j.a=5,j.m=j.wd,j.$=j.xd,0<j.s.ua&&xt(j.s.vb,j.s.Wa);else{if(Et.h)break e;it!=null&&it(j,at>Ke?Ke:at),j.a=0,j.$=bi-ue}return 1}return j.a=3,0}function Ht(j){e(j!=null),j.vc=null,j.yc=null,j.Ya=null;var K=j.Wa;K!=null&&(K.X=null),j.vb=null,e(j!=null)}function zt(){var j=new Nu;return j==null?null:(j.a=0,j.xb=D,Gi("Predictor","VP8LPredictors"),Gi("Predictor","VP8LPredictors_C"),Gi("PredictorAdd","VP8LPredictorsAdd"),Gi("PredictorAdd","VP8LPredictorsAdd_C"),Kl=Me,zs=ae,Fa=bt,Ra=Xt,sa=fi,hs=xn,hl=qn,ie.VP8LMapColor32b=Ll,ie.VP8LMapColor8b=Rc,j)}function ti(j,K,ue,ve,Ne){var Ke=1,it=[j],at=[K],gt=ve.m,Et=ve.s,ii=null,bi=0;e:for(;;){if(ue)for(;Ke&&Le(gt,1);){var _i=it,ci=at,rn=ve,Bi=1,qt=rn.m,Kt=rn.gc[rn.ab],Zi=Le(qt,2);if(rn.Oc&1<<Zi)Ke=0;else{switch(rn.Oc|=1<<Zi,Kt.hc=Zi,Kt.Ea=_i[0],Kt.nc=ci[0],Kt.K=[null],++rn.ab,e(4>=rn.ab),Zi){case 0:case 1:Kt.b=Le(qt,3)+2,Bi=ti(si(Kt.Ea,Kt.b),si(Kt.nc,Kt.b),0,rn,Kt.K),Kt.K=Kt.K[0];break;case 3:var Qi,Hi=Le(qt,8)+1,Tn=16<Hi?0:4<Hi?1:2<Hi?2:3;if(_i[0]=si(Kt.Ea,Tn),Kt.b=Tn,Qi=Bi=ti(Hi,1,0,rn,Kt.K)){var An,xr=Hi,Ln=Kt,vo=1<<(8>>Ln.b),So=u(vo);if(So==null)Qi=0;else{var Xr=Ln.K[0],jr=Ln.w;for(So[0]=Ln.K[0][0],An=1;An<1*xr;++An)So[An]=Zt(Xr[jr+An],So[An-1]);for(;An<4*vo;++An)So[An]=0;Ln.K[0]=null,Ln.K[0]=So,Qi=1}}Bi=Qi;break;case 2:break;default:e(0)}Ke=Bi}}if(it=it[0],at=at[0],Ke&&Le(gt,1)&&!(Ke=1<=(bi=Le(gt,4))&&11>=bi)){ve.a=3;break e}var mo;if(mo=Ke)t:{var ko,qr,Ls,Pr=ve,as=it,Ns=at,ao=bi,fs=ue,Ps=Pr.m,js=Pr.s,Uo=[null],wa=1,Za=0,Oo=gr[ao];i:for(;;){if(fs&&Le(Ps,1)){var ks=Le(Ps,3)+2,eu=si(as,ks),Ka=si(Ns,ks),ml=eu*Ka;if(!ti(eu,Ka,0,Pr,Uo))break i;for(Uo=Uo[0],js.xc=ks,ko=0;ko<ml;++ko){var gl=Uo[ko]>>8&65535;Uo[ko]=gl,gl>=wa&&(wa=gl+1)}}if(Ps.h)break i;for(qr=0;5>qr;++qr){var ls=Uh[qr];!qr&&0<ao&&(ls+=1<<ao),Za<ls&&(Za=ls)}var Vh=p(wa*Oo,Ee),a0=wa,xf=p(a0,Ae);if(xf==null)var fc=null;else e(65536>=a0),fc=xf;var dc=u(Za);if(fc==null||dc==null||Vh==null){Pr.a=1;break i}var qh=Vh;for(ko=Ls=0;ko<wa;++ko){var Ja=fc[ko],Qa=Ja.G,pc=Ja.H,mc=0,Hh=1,jc=0;for(qr=0;5>qr;++qr){ls=Uh[qr],Qa[qr]=qh,pc[qr]=Ls,!qr&&0<ao&&(ls+=1<<ao);n:{var gc,Uc=ls,yc=Pr,Vc=dc,ua=qh,Qs=Ls,Ms=0,tu=yc.m,l0=Le(tu,1);if(l(Vc,0,0,Uc),l0){var iu=Le(tu,1)+1,u0=Le(tu,1),Af=Le(tu,u0==0?1:8);Vc[Af]=1,iu==2&&(Vc[Af=Le(tu,8)]=1);var yh=1}else{var qc=u(19),Sf=Le(tu,4)+4;if(19<Sf){yc.a=3;var _h=0;break n}for(gc=0;gc<Sf;++gc)qc[cc[gc]]=Le(tu,3);var Gh=void 0,vh=void 0,Ol=yc,c0=qc,Hc=Uc,_c=Vc,xa=0,nu=Ol.m,h0=8,kf=p(128,Ee);o:for(;le(kf,0,7,c0,19);){if(Le(nu,1)){var dd=2+2*Le(nu,3);if((Gh=2+Le(nu,dd))>Hc)break o}else Gh=Hc;for(vh=0;vh<Hc&&Gh--;){Re(nu);var vc=kf[0+(127&Ie(nu))];ge(nu,nu.u+vc.g);var Eu=vc.value;if(16>Eu)_c[vh++]=Eu,Eu!=0&&(h0=Eu);else{var f0=Eu==16,Xu=Eu-16,bh=fl[Xu],Cf=Le(nu,jh[Xu])+bh;if(vh+Cf>Hc)break o;for(var pd=f0?h0:0;0<Cf--;)_c[vh++]=pd}}xa=1;break o}xa||(Ol.a=3),yh=xa}(yh=yh&&!tu.h)&&(Ms=le(ua,Qs,8,Vc,Uc)),yh&&Ms!=0?_h=Ms:(yc.a=3,_h=0)}if(_h==0)break i;if(Hh&&dl[qr]==1&&(Hh=qh[Ls].g==0),mc+=qh[Ls].g,Ls+=_h,3>=qr){var wh,Ef=dc[0];for(wh=1;wh<ls;++wh)dc[wh]>Ef&&(Ef=dc[wh]);jc+=Ef}}if(Ja.nd=Hh,Ja.Qb=0,Hh&&(Ja.qb=(Qa[3][pc[3]+0].value<<24|Qa[1][pc[1]+0].value<<16|Qa[2][pc[2]+0].value)>>>0,mc==0&&256>Qa[0][pc[0]+0].value&&(Ja.Qb=1,Ja.qb+=Qa[0][pc[0]+0].value<<8)),Ja.jc=!Ja.Qb&&6>jc,Ja.jc){var Aa,Iu=Ja;for(Aa=0;Aa<Rs;++Aa){var Yu=Aa,ru=Iu.pd[Yu],Wh=Iu.G[0][Iu.H[0]+Yu];256<=Wh.value?(ru.g=Wh.g+256,ru.value=Wh.value):(ru.g=0,ru.value=0,Yu>>=wo(Wh,8,ru),Yu>>=wo(Iu.G[1][Iu.H[1]+Yu],16,ru),Yu>>=wo(Iu.G[2][Iu.H[2]+Yu],0,ru),wo(Iu.G[3][Iu.H[3]+Yu],24,ru))}}}js.vc=Uo,js.Wb=wa,js.Ya=fc,js.yc=Vh,mo=1;break t}mo=0}if(!(Ke=mo)){ve.a=3;break e}if(0<bi){if(Et.ua=1<<bi,!At(Et.Wa,bi)){ve.a=1,Ke=0;break e}}else Et.ua=0;var Zu=ve,d0=it,$o=at,Ku=Zu.s,Xh=Ku.xc;if(Zu.c=d0,Zu.i=$o,Ku.md=si(d0,Xh),Ku.wc=Xh==0?-1:(1<<Xh)-1,ue){ve.xb=I;break e}if((ii=u(it*at))==null){ve.a=1,Ke=0;break e}Ke=(Ke=Ge(ve,ii,0,it,at,at,null))&&!gt.h;break e}return Ke?(Ne!=null?Ne[0]=ii:(e(ii==null),e(ue)),ve.$=0,ue||Ht(Et)):Ht(Et),Ke}function vt(j,K){var ue=j.c*j.i,ve=ue+K+16*K;return e(j.c<=K),j.V=u(ve),j.V==null?(j.Ta=null,j.Ua=0,j.a=1,0):(j.Ta=j.V,j.Ua=j.Ba+ue+K,1)}function ji(j,K){var ue=j.C,ve=K-ue,Ne=j.V,Ke=j.Ba+j.c*ue;for(e(K<=j.l.o);0<ve;){var it=16<ve?16:ve,at=j.l.ma,gt=j.l.width,Et=gt*it,ii=at.ca,bi=at.tb+gt*ue,_i=j.Ta,ci=j.Ua;Te(j,it,Ne,Ke),Bc(_i,ci,ii,bi,Et),_t(at,ue,ue+it,ii,bi,gt),ve-=it,Ne+=it*j.c,ue+=it}e(ue==K),j.C=j.Ma=K}function Di(){this.ub=this.yd=this.td=this.Rb=0}function In(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function kn(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function St(){this.Yb=function(){var j=[];return function K(ue,ve,Ne){for(var Ke=Ne[ve],it=0;it<Ke&&(ue.push(Ne.length>ve+1?[]:0),!(Ne.length<ve+1));it++)K(ue[it],ve+1,Ne)}(j,0,[3,11]),j}()}function Bn(){this.jb=u(3),this.Wc=o([4,8],St),this.Xc=o([4,17],St)}function er(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Dr(){this.ld=this.La=this.dd=this.tc=0}function vr(){this.Na=this.la=0}function Tr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zr(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function po(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dr),this.Y=0,this.ya=Array(new zr),this.aa=0,this.l=new is}function ts(){this.y=u(16),this.f=u(8),this.ea=u(8)}function _o(){this.cb=this.a=0,this.sc="",this.m=new Ue,this.Od=new Di,this.Kc=new In,this.ed=new er,this.Qa=new kn,this.Ic=this.$c=this.Aa=0,this.D=new po,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,Ue),this.ia=0,this.pb=p(4,Tr),this.Pa=new Bn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ts),this.Hd=0,this.rb=Array(new vr),this.sb=0,this.wa=Array(new Dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zr),this.L=this.aa=0,this.gd=o([4,2],Dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function is(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function al(){var j=new _o;return j!=null&&(j.a=0,j.sc="OK",j.cb=0,j.Xb=0,Wo||(Wo=ur)),j}function Ro(j,K,ue){return j.a==0&&(j.a=K,j.sc=ue,j.cb=0),0}function Ft(j,K,ue){return 3<=ue&&j[K+0]==157&&j[K+1]==1&&j[K+2]==42}function tr(j,K){if(j==null)return 0;if(j.a=0,j.sc="OK",K==null)return Ro(j,2,"null VP8Io passed to VP8GetHeaders()");var ue=K.data,ve=K.w,Ne=K.ha;if(4>Ne)return Ro(j,7,"Truncated header.");var Ke=ue[ve+0]|ue[ve+1]<<8|ue[ve+2]<<16,it=j.Od;if(it.Rb=!(1&Ke),it.td=Ke>>1&7,it.yd=Ke>>4&1,it.ub=Ke>>5,3<it.td)return Ro(j,3,"Incorrect keyframe parameters.");if(!it.yd)return Ro(j,4,"Frame not displayable.");ve+=3,Ne-=3;var at=j.Kc;if(it.Rb){if(7>Ne)return Ro(j,7,"cannot parse picture header");if(!Ft(ue,ve,Ne))return Ro(j,3,"Bad code word");at.c=16383&(ue[ve+4]<<8|ue[ve+3]),at.Td=ue[ve+4]>>6,at.i=16383&(ue[ve+6]<<8|ue[ve+5]),at.Ud=ue[ve+6]>>6,ve+=7,Ne-=7,j.za=at.c+15>>4,j.Ub=at.i+15>>4,K.width=at.c,K.height=at.i,K.Da=0,K.j=0,K.v=0,K.va=K.width,K.o=K.height,K.da=0,K.ib=K.width,K.hb=K.height,K.U=K.width,K.T=K.height,l((Ke=j.Pa).jb,0,255,Ke.jb.length),e((Ke=j.Qa)!=null),Ke.Cb=0,Ke.Bb=0,Ke.Fb=1,l(Ke.Zb,0,0,Ke.Zb.length),l(Ke.Lb,0,0,Ke.Lb)}if(it.ub>Ne)return Ro(j,7,"bad partition length");pt(Ke=j.m,ue,ve,it.ub),ve+=it.ub,Ne-=it.ub,it.Rb&&(at.Ld=ut(Ke),at.Kd=ut(Ke)),at=j.Qa;var gt,Et=j.Pa;if(e(Ke!=null),e(at!=null),at.Cb=ut(Ke),at.Cb){if(at.Bb=ut(Ke),ut(Ke)){for(at.Fb=ut(Ke),gt=0;4>gt;++gt)at.Zb[gt]=ut(Ke)?Pt(Ke,7):0;for(gt=0;4>gt;++gt)at.Lb[gt]=ut(Ke)?Pt(Ke,6):0}if(at.Bb)for(gt=0;3>gt;++gt)Et.jb[gt]=ut(Ke)?rt(Ke,8):255}else at.Bb=0;if(Ke.Ka)return Ro(j,3,"cannot parse segment header");if((at=j.ed).zd=ut(Ke),at.Tb=rt(Ke,6),at.wb=rt(Ke,3),at.Pc=ut(Ke),at.Pc&&ut(Ke)){for(Et=0;4>Et;++Et)ut(Ke)&&(at.vd[Et]=Pt(Ke,6));for(Et=0;4>Et;++Et)ut(Ke)&&(at.od[Et]=Pt(Ke,6))}if(j.L=at.Tb==0?0:at.zd?1:2,Ke.Ka)return Ro(j,3,"cannot parse filter header");var ii=Ne;if(Ne=gt=ve,ve=gt+ii,at=ii,j.Xb=(1<<rt(j.m,2))-1,ii<3*(Et=j.Xb))ue=7;else{for(gt+=3*Et,at-=3*Et,ii=0;ii<Et;++ii){var bi=ue[Ne+0]|ue[Ne+1]<<8|ue[Ne+2]<<16;bi>at&&(bi=at),pt(j.Jc[+ii],ue,gt,bi),gt+=bi,at-=bi,Ne+=3}pt(j.Jc[+Et],ue,gt,at),ue=gt<ve?0:5}if(ue!=0)return Ro(j,ue,"cannot parse partitions");for(ue=rt(gt=j.m,7),Ne=ut(gt)?Pt(gt,4):0,ve=ut(gt)?Pt(gt,4):0,at=ut(gt)?Pt(gt,4):0,Et=ut(gt)?Pt(gt,4):0,gt=ut(gt)?Pt(gt,4):0,ii=j.Qa,bi=0;4>bi;++bi){if(ii.Cb){var _i=ii.Zb[bi];ii.Fb||(_i+=ue)}else{if(0<bi){j.pb[bi]=j.pb[0];continue}_i=ue}var ci=j.pb[bi];ci.Sc[0]=hc[Ts(_i+Ne,127)],ci.Sc[1]=Ss[Ts(_i+0,127)],ci.Eb[0]=2*hc[Ts(_i+ve,127)],ci.Eb[1]=101581*Ss[Ts(_i+at,127)]>>16,8>ci.Eb[1]&&(ci.Eb[1]=8),ci.Qc[0]=hc[Ts(_i+Et,117)],ci.Qc[1]=Ss[Ts(_i+gt,127)],ci.lc=_i+gt}if(!it.Rb)return Ro(j,4,"Not a key frame.");for(ut(Ke),it=j.Pa,ue=0;4>ue;++ue){for(Ne=0;8>Ne;++Ne)for(ve=0;3>ve;++ve)for(at=0;11>at;++at)Et=Xe(Ke,ys[ue][Ne][ve][at])?rt(Ke,8):$l[ue][Ne][ve][at],it.Wc[ue][Ne].Yb[ve][at]=Et;for(Ne=0;17>Ne;++Ne)it.Xc[ue][Ne]=it.Wc[ue][gh[Ne]]}return j.kc=ut(Ke),j.kc&&(j.Bd=rt(Ke,8)),j.cb=1}function ur(j,K,ue,ve,Ne,Ke,it){var at=K[Ne].Yb[ue];for(ue=0;16>Ne;++Ne){if(!Xe(j,at[ue+0]))return Ne;for(;!Xe(j,at[ue+1]);)if(at=K[++Ne].Yb[0],ue=0,Ne==16)return 16;var gt=K[Ne+1].Yb;if(Xe(j,at[ue+2])){var Et=j,ii=0;if(Xe(Et,(_i=at)[(bi=ue)+3]))if(Xe(Et,_i[bi+6])){for(at=0,bi=2*(ii=Xe(Et,_i[bi+8]))+(_i=Xe(Et,_i[bi+9+ii])),ii=0,_i=Ql[bi];_i[at];++at)ii+=ii+Xe(Et,_i[at]);ii+=3+(8<<bi)}else Xe(Et,_i[bi+7])?(ii=7+2*Xe(Et,165),ii+=Xe(Et,145)):ii=5+Xe(Et,159);else ii=Xe(Et,_i[bi+4])?3+Xe(Et,_i[bi+5]):2;at=gt[2]}else ii=1,at=gt[1];gt=it+pl[Ne],0>(Et=j).b&&Ze(Et);var bi,_i=Et.b,ci=(bi=Et.Ca>>1)-(Et.I>>_i)>>31;--Et.b,Et.Ca+=ci,Et.Ca|=1,Et.I-=(bi+1&ci)<<_i,Ke[gt]=((ii^ci)-ci)*ve[(0<Ne)+0]}return 16}function Or(j){var K=j.rb[j.sb-1];K.la=0,K.Na=0,l(j.zc,0,0,j.zc.length),j.ja=0}function Ko(j,K){if(j==null)return 0;if(K==null)return Ro(j,2,"NULL VP8Io parameter in VP8Decode().");if(!j.cb&&!tr(j,K))return 0;if(e(j.cb),K.ac==null||K.ac(K)){K.ob&&(j.L=0);var ue=_n[j.L];if(j.L==2?(j.yb=0,j.zb=0):(j.yb=K.v-ue>>4,j.zb=K.j-ue>>4,0>j.yb&&(j.yb=0),0>j.zb&&(j.zb=0)),j.Va=K.o+15+ue>>4,j.Hb=K.va+15+ue>>4,j.Hb>j.za&&(j.Hb=j.za),j.Va>j.Ub&&(j.Va=j.Ub),0<j.L){var ve=j.ed;for(ue=0;4>ue;++ue){var Ne;if(j.Qa.Cb){var Ke=j.Qa.Lb[ue];j.Qa.Fb||(Ke+=ve.Tb)}else Ke=ve.Tb;for(Ne=0;1>=Ne;++Ne){var it=j.gd[ue][Ne],at=Ke;if(ve.Pc&&(at+=ve.vd[0],Ne&&(at+=ve.od[0])),0<(at=0>at?0:63<at?63:at)){var gt=at;0<ve.wb&&(gt=4<ve.wb?gt>>2:gt>>1)>9-ve.wb&&(gt=9-ve.wb),1>gt&&(gt=1),it.dd=gt,it.tc=2*at+gt,it.ld=40<=at?2:15<=at?1:0}else it.tc=0;it.La=Ne}}}ue=0}else Ro(j,6,"Frame setup failed"),ue=j.a;if(ue=ue==0){if(ue){j.$c=0,0<j.Aa||(j.Ic=Cr);e:{ue=j.Ic,ve=4*(gt=j.za);var Et=32*gt,ii=gt+1,bi=0<j.L?gt*(0<j.Aa?2:1):0,_i=(j.Aa==2?2:1)*gt;if((it=ve+832+(Ne=3*(16*ue+_n[j.L])/2*Et)+(Ke=j.Fa!=null&&0<j.Fa.length?j.Kc.c*j.Kc.i:0))!=it)ue=0;else{if(it>j.Vb){if(j.Vb=0,j.Ec=u(it),j.Fc=0,j.Ec==null){ue=Ro(j,1,"no memory during frame initialization.");break e}j.Vb=it}it=j.Ec,at=j.Fc,j.Ac=it,j.Bc=at,at+=ve,j.Gd=p(Et,ts),j.Hd=0,j.rb=p(ii+1,vr),j.sb=1,j.wa=bi?p(bi,Dr):null,j.Y=0,j.D.Nb=0,j.D.wa=j.wa,j.D.Y=j.Y,0<j.Aa&&(j.D.Y+=gt),e(!0),j.oc=it,j.pc=at,at+=832,j.ya=p(_i,zr),j.aa=0,j.D.ya=j.ya,j.D.aa=j.aa,j.Aa==2&&(j.D.aa+=gt),j.R=16*gt,j.B=8*gt,gt=(Et=_n[j.L])*j.R,Et=Et/2*j.B,j.sa=it,j.ta=at+gt,j.qa=j.sa,j.ra=j.ta+16*ue*j.R+Et,j.Ha=j.qa,j.Ia=j.ra+8*ue*j.B+Et,j.$c=0,at+=Ne,j.mb=Ke?it:null,j.nb=Ke?at:null,e(at+Ke<=j.Fc+j.Vb),Or(j),l(j.Ac,j.Bc,0,ve),ue=1}}if(ue){if(K.ka=0,K.y=j.sa,K.O=j.ta,K.f=j.qa,K.N=j.ra,K.ea=j.Ha,K.Vd=j.Ia,K.fa=j.R,K.Rc=j.B,K.F=null,K.J=0,!zc){for(ue=-255;255>=ue;++ue)dh[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)ph[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)Nh[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)Ir[255+ue]=0>ue?0:255<ue?255:ue;zc=1}Jo=Ma,Vu=Pa,aa=Es,Wr=Ks,va=Hs,Ba=xs,Ml=ac,qu=pu,xu=fh,Ws=zu,Dl=hh,gs=mu,Cn=gu,No=yu,Vr=Mr,Po=ga,os=Ga,mn=Oc,B[0]=Nt,B[1]=fu,B[2]=ot,B[3]=It,B[4]=Bt,B[5]=pi,B[6]=yi,B[7]=mi,B[8]=qi,B[9]=ri,la[0]=ll,la[1]=du,la[2]=pa,la[3]=ma,la[4]=U,la[5]=$,la[6]=ye,d[0]=m,d[1]=Cl,d[2]=sn,d[3]=Sn,d[4]=h,d[5]=Ri,d[6]=F,ue=1}else ue=0}ue&&(ue=function(ci,rn){for(ci.M=0;ci.M<ci.Va;++ci.M){var Bi,qt=ci.Jc[ci.M&ci.Xb],Kt=ci.m,Zi=ci;for(Bi=0;Bi<Zi.za;++Bi){var Qi=Kt,Hi=Zi,Tn=Hi.Ac,An=Hi.Bc+4*Bi,xr=Hi.zc,Ln=Hi.ya[Hi.aa+Bi];if(Hi.Qa.Bb?Ln.$b=Xe(Qi,Hi.Pa.jb[0])?2+Xe(Qi,Hi.Pa.jb[2]):Xe(Qi,Hi.Pa.jb[1]):Ln.$b=0,Hi.kc&&(Ln.Ad=Xe(Qi,Hi.Bd)),Ln.Za=!Xe(Qi,145)+0,Ln.Za){var vo=Ln.Ob,So=0;for(Hi=0;4>Hi;++Hi){var Xr,jr=xr[0+Hi];for(Xr=0;4>Xr;++Xr){jr=ss[Tn[An+Xr]][jr];for(var mo=mh[Xe(Qi,jr[0])];0<mo;)mo=mh[2*mo+Xe(Qi,jr[mo])];jr=-mo,Tn[An+Xr]=jr}n(vo,So,Tn,An,4),So+=4,xr[0+Hi]=jr}}else jr=Xe(Qi,156)?Xe(Qi,128)?1:3:Xe(Qi,163)?2:0,Ln.Ob[0]=jr,l(Tn,An,jr,4),l(xr,0,jr,4);Ln.Dd=Xe(Qi,142)?Xe(Qi,114)?Xe(Qi,183)?1:3:2:0}if(Zi.m.Ka)return Ro(ci,7,"Premature end-of-partition0 encountered.");for(;ci.ja<ci.za;++ci.ja){if(Zi=qt,Qi=(Kt=ci).rb[Kt.sb-1],Tn=Kt.rb[Kt.sb+Kt.ja],Bi=Kt.ya[Kt.aa+Kt.ja],An=Kt.kc?Bi.Ad:0)Qi.la=Tn.la=0,Bi.Za||(Qi.Na=Tn.Na=0),Bi.Hc=0,Bi.Gc=0,Bi.ia=0;else{var ko,qr;if(Qi=Tn,Tn=Zi,An=Kt.Pa.Xc,xr=Kt.ya[Kt.aa+Kt.ja],Ln=Kt.pb[xr.$b],Hi=xr.ad,vo=0,So=Kt.rb[Kt.sb-1],jr=Xr=0,l(Hi,vo,0,384),xr.Za)var Ls=0,Pr=An[3];else{mo=u(16);var as=Qi.Na+So.Na;if(as=Wo(Tn,An[1],as,Ln.Eb,0,mo,0),Qi.Na=So.Na=(0<as)+0,1<as)Jo(mo,0,Hi,vo);else{var Ns=mo[0]+3>>3;for(mo=0;256>mo;mo+=16)Hi[vo+mo]=Ns}Ls=1,Pr=An[0]}var ao=15&Qi.la,fs=15&So.la;for(mo=0;4>mo;++mo){var Ps=1&fs;for(Ns=qr=0;4>Ns;++Ns)ao=ao>>1|(Ps=(as=Wo(Tn,Pr,as=Ps+(1&ao),Ln.Sc,Ls,Hi,vo))>Ls)<<7,qr=qr<<2|(3<as?3:1<as?2:Hi[vo+0]!=0),vo+=16;ao>>=4,fs=fs>>1|Ps<<7,Xr=(Xr<<8|qr)>>>0}for(Pr=ao,Ls=fs>>4,ko=0;4>ko;ko+=2){for(qr=0,ao=Qi.la>>4+ko,fs=So.la>>4+ko,mo=0;2>mo;++mo){for(Ps=1&fs,Ns=0;2>Ns;++Ns)as=Ps+(1&ao),ao=ao>>1|(Ps=0<(as=Wo(Tn,An[2],as,Ln.Qc,0,Hi,vo)))<<3,qr=qr<<2|(3<as?3:1<as?2:Hi[vo+0]!=0),vo+=16;ao>>=2,fs=fs>>1|Ps<<5}jr|=qr<<4*ko,Pr|=ao<<4<<ko,Ls|=(240&fs)<<ko}Qi.la=Pr,So.la=Ls,xr.Hc=Xr,xr.Gc=jr,xr.ia=43690&jr?0:Ln.ia,An=!(Xr|jr)}if(0<Kt.L&&(Kt.wa[Kt.Y+Kt.ja]=Kt.gd[Bi.$b][Bi.Za],Kt.wa[Kt.Y+Kt.ja].La|=!An),Zi.Ka)return Ro(ci,7,"Premature end-of-file encountered.")}if(Or(ci),Kt=rn,Zi=1,Bi=(qt=ci).D,Qi=0<qt.L&&qt.M>=qt.zb&&qt.M<=qt.Va,qt.Aa==0)e:{if(Bi.M=qt.M,Bi.uc=Qi,ju(qt,Bi),Zi=1,Bi=(qr=qt.D).Nb,Qi=(jr=_n[qt.L])*qt.R,Tn=jr/2*qt.B,mo=16*Bi*qt.R,Ns=8*Bi*qt.B,An=qt.sa,xr=qt.ta-Qi+mo,Ln=qt.qa,Hi=qt.ra-Tn+Ns,vo=qt.Ha,So=qt.Ia-Tn+Ns,fs=(ao=qr.M)==0,Xr=ao>=qt.Va-1,qt.Aa==2&&ju(qt,qr),qr.uc)for(Ps=(as=qt).D.M,e(as.D.uc),qr=as.yb;qr<as.Hb;++qr){Ls=qr,Pr=Ps;var js=(Uo=(ls=as).D).Nb;ko=ls.R;var Uo=Uo.wa[Uo.Y+Ls],wa=ls.sa,Za=ls.ta+16*js*ko+16*Ls,Oo=Uo.dd,ks=Uo.tc;if(ks!=0)if(e(3<=ks),ls.L==1)0<Ls&&Po(wa,Za,ko,ks+4),Uo.La&&mn(wa,Za,ko,ks),0<Pr&&Vr(wa,Za,ko,ks+4),Uo.La&&os(wa,Za,ko,ks);else{var eu=ls.B,Ka=ls.qa,ml=ls.ra+8*js*eu+8*Ls,gl=ls.Ha,ls=ls.Ia+8*js*eu+8*Ls;js=Uo.ld,0<Ls&&(qu(wa,Za,ko,ks+4,Oo,js),Ws(Ka,ml,gl,ls,eu,ks+4,Oo,js)),Uo.La&&(gs(wa,Za,ko,ks,Oo,js),No(Ka,ml,gl,ls,eu,ks,Oo,js)),0<Pr&&(Ml(wa,Za,ko,ks+4,Oo,js),xu(Ka,ml,gl,ls,eu,ks+4,Oo,js)),Uo.La&&(Dl(wa,Za,ko,ks,Oo,js),Cn(Ka,ml,gl,ls,eu,ks,Oo,js))}}if(qt.ia&&alert("todo:DitherRow"),Kt.put!=null){if(qr=16*ao,ao=16*(ao+1),fs?(Kt.y=qt.sa,Kt.O=qt.ta+mo,Kt.f=qt.qa,Kt.N=qt.ra+Ns,Kt.ea=qt.Ha,Kt.W=qt.Ia+Ns):(qr-=jr,Kt.y=An,Kt.O=xr,Kt.f=Ln,Kt.N=Hi,Kt.ea=vo,Kt.W=So),Xr||(ao-=jr),ao>Kt.o&&(ao=Kt.o),Kt.F=null,Kt.J=null,qt.Fa!=null&&0<qt.Fa.length&&qr<ao&&(Kt.J=Ao(qt,Kt,qr,ao-qr),Kt.F=qt.mb,Kt.F==null&&Kt.F.length==0)){Zi=Ro(qt,3,"Could not decode alpha data.");break e}qr<Kt.j&&(jr=Kt.j-qr,qr=Kt.j,e(!(1&jr)),Kt.O+=qt.R*jr,Kt.N+=qt.B*(jr>>1),Kt.W+=qt.B*(jr>>1),Kt.F!=null&&(Kt.J+=Kt.width*jr)),qr<ao&&(Kt.O+=Kt.v,Kt.N+=Kt.v>>1,Kt.W+=Kt.v>>1,Kt.F!=null&&(Kt.J+=Kt.v),Kt.ka=qr-Kt.j,Kt.U=Kt.va-Kt.v,Kt.T=ao-qr,Zi=Kt.put(Kt))}Bi+1!=qt.Ic||Xr||(n(qt.sa,qt.ta-Qi,An,xr+16*qt.R,Qi),n(qt.qa,qt.ra-Tn,Ln,Hi+8*qt.B,Tn),n(qt.Ha,qt.Ia-Tn,vo,So+8*qt.B,Tn))}if(!Zi)return Ro(ci,6,"Output aborted.")}return 1}(j,K)),K.bc!=null&&K.bc(K),ue&=1}return ue?(j.cb=0,ue):0}function Bo(j,K,ue,ve,Ne){Ne=j[K+ue+32*ve]+(Ne>>3),j[K+ue+32*ve]=-256&Ne?0>Ne?0:255:Ne}function La(j,K,ue,ve,Ne,Ke){Bo(j,K,0,ue,ve+Ne),Bo(j,K,1,ue,ve+Ke),Bo(j,K,2,ue,ve-Ke),Bo(j,K,3,ue,ve-Ne)}function rs(j){return(20091*j>>16)+j}function qs(j,K,ue,ve){var Ne,Ke=0,it=u(16);for(Ne=0;4>Ne;++Ne){var at=j[K+0]+j[K+8],gt=j[K+0]-j[K+8],Et=(35468*j[K+4]>>16)-rs(j[K+12]),ii=rs(j[K+4])+(35468*j[K+12]>>16);it[Ke+0]=at+ii,it[Ke+1]=gt+Et,it[Ke+2]=gt-Et,it[Ke+3]=at-ii,Ke+=4,K++}for(Ne=Ke=0;4>Ne;++Ne)at=(j=it[Ke+0]+4)+it[Ke+8],gt=j-it[Ke+8],Et=(35468*it[Ke+4]>>16)-rs(it[Ke+12]),Bo(ue,ve,0,0,at+(ii=rs(it[Ke+4])+(35468*it[Ke+12]>>16))),Bo(ue,ve,1,0,gt+Et),Bo(ue,ve,2,0,gt-Et),Bo(ue,ve,3,0,at-ii),Ke++,ve+=32}function xs(j,K,ue,ve){var Ne=j[K+0]+4,Ke=35468*j[K+4]>>16,it=rs(j[K+4]),at=35468*j[K+1]>>16;La(ue,ve,0,Ne+it,j=rs(j[K+1]),at),La(ue,ve,1,Ne+Ke,j,at),La(ue,ve,2,Ne-Ke,j,at),La(ue,ve,3,Ne-it,j,at)}function Pa(j,K,ue,ve,Ne){qs(j,K,ue,ve),Ne&&qs(j,K+16,ue,ve+4)}function Es(j,K,ue,ve){Vu(j,K+0,ue,ve,1),Vu(j,K+32,ue,ve+128,1)}function Ks(j,K,ue,ve){var Ne;for(j=j[K+0]+4,Ne=0;4>Ne;++Ne)for(K=0;4>K;++K)Bo(ue,ve,K,Ne,j)}function Hs(j,K,ue,ve){j[K+0]&&Wr(j,K+0,ue,ve),j[K+16]&&Wr(j,K+16,ue,ve+4),j[K+32]&&Wr(j,K+32,ue,ve+128),j[K+48]&&Wr(j,K+48,ue,ve+128+4)}function Ma(j,K,ue,ve){var Ne,Ke=u(16);for(Ne=0;4>Ne;++Ne){var it=j[K+0+Ne]+j[K+12+Ne],at=j[K+4+Ne]+j[K+8+Ne],gt=j[K+4+Ne]-j[K+8+Ne],Et=j[K+0+Ne]-j[K+12+Ne];Ke[0+Ne]=it+at,Ke[8+Ne]=it-at,Ke[4+Ne]=Et+gt,Ke[12+Ne]=Et-gt}for(Ne=0;4>Ne;++Ne)it=(j=Ke[0+4*Ne]+3)+Ke[3+4*Ne],at=Ke[1+4*Ne]+Ke[2+4*Ne],gt=Ke[1+4*Ne]-Ke[2+4*Ne],Et=j-Ke[3+4*Ne],ue[ve+0]=it+at>>3,ue[ve+16]=Et+gt>>3,ue[ve+32]=it-at>>3,ue[ve+48]=Et-gt>>3,ve+=64}function kl(j,K,ue){var ve,Ne=K-32,Ke=Js,it=255-j[Ne-1];for(ve=0;ve<ue;++ve){var at,gt=Ke,Et=it+j[K-1];for(at=0;at<ue;++at)j[K+at]=gt[Et+j[Ne+at]];K+=32}}function fu(j,K){kl(j,K,4)}function Cl(j,K){kl(j,K,8)}function du(j,K){kl(j,K,16)}function pa(j,K){var ue;for(ue=0;16>ue;++ue)n(j,K+32*ue,j,K-32,16)}function ma(j,K){var ue;for(ue=16;0<ue;--ue)l(j,K,j[K-1],16),K+=32}function Io(j,K,ue){var ve;for(ve=0;16>ve;++ve)l(K,ue+32*ve,j,16)}function ll(j,K){var ue,ve=16;for(ue=0;16>ue;++ue)ve+=j[K-1+32*ue]+j[K+ue-32];Io(ve>>5,j,K)}function U(j,K){var ue,ve=8;for(ue=0;16>ue;++ue)ve+=j[K-1+32*ue];Io(ve>>4,j,K)}function $(j,K){var ue,ve=8;for(ue=0;16>ue;++ue)ve+=j[K+ue-32];Io(ve>>4,j,K)}function ye(j,K){Io(128,j,K)}function De(j,K,ue){return j+2*K+ue+2>>2}function ot(j,K){var ue,ve=K-32;for(ve=new Uint8Array([De(j[ve-1],j[ve+0],j[ve+1]),De(j[ve+0],j[ve+1],j[ve+2]),De(j[ve+1],j[ve+2],j[ve+3]),De(j[ve+2],j[ve+3],j[ve+4])]),ue=0;4>ue;++ue)n(j,K+32*ue,ve,0,ve.length)}function It(j,K){var ue=j[K-1],ve=j[K-1+32],Ne=j[K-1+64],Ke=j[K-1+96];$e(j,K+0,16843009*De(j[K-1-32],ue,ve)),$e(j,K+32,16843009*De(ue,ve,Ne)),$e(j,K+64,16843009*De(ve,Ne,Ke)),$e(j,K+96,16843009*De(Ne,Ke,Ke))}function Nt(j,K){var ue,ve=4;for(ue=0;4>ue;++ue)ve+=j[K+ue-32]+j[K-1+32*ue];for(ve>>=3,ue=0;4>ue;++ue)l(j,K+32*ue,ve,4)}function Bt(j,K){var ue=j[K-1+0],ve=j[K-1+32],Ne=j[K-1+64],Ke=j[K-1-32],it=j[K+0-32],at=j[K+1-32],gt=j[K+2-32],Et=j[K+3-32];j[K+0+96]=De(ve,Ne,j[K-1+96]),j[K+1+96]=j[K+0+64]=De(ue,ve,Ne),j[K+2+96]=j[K+1+64]=j[K+0+32]=De(Ke,ue,ve),j[K+3+96]=j[K+2+64]=j[K+1+32]=j[K+0+0]=De(it,Ke,ue),j[K+3+64]=j[K+2+32]=j[K+1+0]=De(at,it,Ke),j[K+3+32]=j[K+2+0]=De(gt,at,it),j[K+3+0]=De(Et,gt,at)}function yi(j,K){var ue=j[K+1-32],ve=j[K+2-32],Ne=j[K+3-32],Ke=j[K+4-32],it=j[K+5-32],at=j[K+6-32],gt=j[K+7-32];j[K+0+0]=De(j[K+0-32],ue,ve),j[K+1+0]=j[K+0+32]=De(ue,ve,Ne),j[K+2+0]=j[K+1+32]=j[K+0+64]=De(ve,Ne,Ke),j[K+3+0]=j[K+2+32]=j[K+1+64]=j[K+0+96]=De(Ne,Ke,it),j[K+3+32]=j[K+2+64]=j[K+1+96]=De(Ke,it,at),j[K+3+64]=j[K+2+96]=De(it,at,gt),j[K+3+96]=De(at,gt,gt)}function pi(j,K){var ue=j[K-1+0],ve=j[K-1+32],Ne=j[K-1+64],Ke=j[K-1-32],it=j[K+0-32],at=j[K+1-32],gt=j[K+2-32],Et=j[K+3-32];j[K+0+0]=j[K+1+64]=Ke+it+1>>1,j[K+1+0]=j[K+2+64]=it+at+1>>1,j[K+2+0]=j[K+3+64]=at+gt+1>>1,j[K+3+0]=gt+Et+1>>1,j[K+0+96]=De(Ne,ve,ue),j[K+0+64]=De(ve,ue,Ke),j[K+0+32]=j[K+1+96]=De(ue,Ke,it),j[K+1+32]=j[K+2+96]=De(Ke,it,at),j[K+2+32]=j[K+3+96]=De(it,at,gt),j[K+3+32]=De(at,gt,Et)}function mi(j,K){var ue=j[K+0-32],ve=j[K+1-32],Ne=j[K+2-32],Ke=j[K+3-32],it=j[K+4-32],at=j[K+5-32],gt=j[K+6-32],Et=j[K+7-32];j[K+0+0]=ue+ve+1>>1,j[K+1+0]=j[K+0+64]=ve+Ne+1>>1,j[K+2+0]=j[K+1+64]=Ne+Ke+1>>1,j[K+3+0]=j[K+2+64]=Ke+it+1>>1,j[K+0+32]=De(ue,ve,Ne),j[K+1+32]=j[K+0+96]=De(ve,Ne,Ke),j[K+2+32]=j[K+1+96]=De(Ne,Ke,it),j[K+3+32]=j[K+2+96]=De(Ke,it,at),j[K+3+64]=De(it,at,gt),j[K+3+96]=De(at,gt,Et)}function ri(j,K){var ue=j[K-1+0],ve=j[K-1+32],Ne=j[K-1+64],Ke=j[K-1+96];j[K+0+0]=ue+ve+1>>1,j[K+2+0]=j[K+0+32]=ve+Ne+1>>1,j[K+2+32]=j[K+0+64]=Ne+Ke+1>>1,j[K+1+0]=De(ue,ve,Ne),j[K+3+0]=j[K+1+32]=De(ve,Ne,Ke),j[K+3+32]=j[K+1+64]=De(Ne,Ke,Ke),j[K+3+64]=j[K+2+64]=j[K+0+96]=j[K+1+96]=j[K+2+96]=j[K+3+96]=Ke}function qi(j,K){var ue=j[K-1+0],ve=j[K-1+32],Ne=j[K-1+64],Ke=j[K-1+96],it=j[K-1-32],at=j[K+0-32],gt=j[K+1-32],Et=j[K+2-32];j[K+0+0]=j[K+2+32]=ue+it+1>>1,j[K+0+32]=j[K+2+64]=ve+ue+1>>1,j[K+0+64]=j[K+2+96]=Ne+ve+1>>1,j[K+0+96]=Ke+Ne+1>>1,j[K+3+0]=De(at,gt,Et),j[K+2+0]=De(it,at,gt),j[K+1+0]=j[K+3+32]=De(ue,it,at),j[K+1+32]=j[K+3+64]=De(ve,ue,it),j[K+1+64]=j[K+3+96]=De(Ne,ve,ue),j[K+1+96]=De(Ke,Ne,ve)}function sn(j,K){var ue;for(ue=0;8>ue;++ue)n(j,K+32*ue,j,K-32,8)}function Sn(j,K){var ue;for(ue=0;8>ue;++ue)l(j,K,j[K-1],8),K+=32}function dt(j,K,ue){var ve;for(ve=0;8>ve;++ve)l(K,ue+32*ve,j,8)}function m(j,K){var ue,ve=8;for(ue=0;8>ue;++ue)ve+=j[K+ue-32]+j[K-1+32*ue];dt(ve>>4,j,K)}function Ri(j,K){var ue,ve=4;for(ue=0;8>ue;++ue)ve+=j[K+ue-32];dt(ve>>3,j,K)}function h(j,K){var ue,ve=4;for(ue=0;8>ue;++ue)ve+=j[K-1+32*ue];dt(ve>>3,j,K)}function F(j,K){dt(128,j,K)}function dn(j,K,ue){var ve=j[K-ue],Ne=j[K+0],Ke=3*(Ne-ve)+lc[1020+j[K-2*ue]-j[K+ue]],it=Qo[112+(Ke+4>>3)];j[K-ue]=Js[255+ve+Qo[112+(Ke+3>>3)]],j[K+0]=Js[255+Ne-it]}function Zn(j,K,ue,ve){var Ne=j[K+0],Ke=j[K+ue];return Zo[255+j[K-2*ue]-j[K-ue]]>ve||Zo[255+Ke-Ne]>ve}function xo(j,K,ue,ve){return 4*Zo[255+j[K-ue]-j[K+0]]+Zo[255+j[K-2*ue]-j[K+ue]]<=ve}function re(j,K,ue,ve,Ne){var Ke=j[K-3*ue],it=j[K-2*ue],at=j[K-ue],gt=j[K+0],Et=j[K+ue],ii=j[K+2*ue],bi=j[K+3*ue];return 4*Zo[255+at-gt]+Zo[255+it-Et]>ve?0:Zo[255+j[K-4*ue]-Ke]<=Ne&&Zo[255+Ke-it]<=Ne&&Zo[255+it-at]<=Ne&&Zo[255+bi-ii]<=Ne&&Zo[255+ii-Et]<=Ne&&Zo[255+Et-gt]<=Ne}function Mr(j,K,ue,ve){var Ne=2*ve+1;for(ve=0;16>ve;++ve)xo(j,K+ve,ue,Ne)&&dn(j,K+ve,ue)}function ga(j,K,ue,ve){var Ne=2*ve+1;for(ve=0;16>ve;++ve)xo(j,K+ve*ue,1,Ne)&&dn(j,K+ve*ue,1)}function Ga(j,K,ue,ve){var Ne;for(Ne=3;0<Ne;--Ne)Mr(j,K+=4*ue,ue,ve)}function Oc(j,K,ue,ve){var Ne;for(Ne=3;0<Ne;--Ne)ga(j,K+=4,ue,ve)}function El(j,K,ue,ve,Ne,Ke,it,at){for(Ke=2*Ke+1;0<Ne--;){if(re(j,K,ue,Ke,it))if(Zn(j,K,ue,at))dn(j,K,ue);else{var gt=j,Et=K,ii=ue,bi=gt[Et-2*ii],_i=gt[Et-ii],ci=gt[Et+0],rn=gt[Et+ii],Bi=gt[Et+2*ii],qt=27*(Zi=lc[1020+3*(ci-_i)+lc[1020+bi-rn]])+63>>7,Kt=18*Zi+63>>7,Zi=9*Zi+63>>7;gt[Et-3*ii]=Js[255+gt[Et-3*ii]+Zi],gt[Et-2*ii]=Js[255+bi+Kt],gt[Et-ii]=Js[255+_i+qt],gt[Et+0]=Js[255+ci-qt],gt[Et+ii]=Js[255+rn-Kt],gt[Et+2*ii]=Js[255+Bi-Zi]}K+=ve}}function Gs(j,K,ue,ve,Ne,Ke,it,at){for(Ke=2*Ke+1;0<Ne--;){if(re(j,K,ue,Ke,it))if(Zn(j,K,ue,at))dn(j,K,ue);else{var gt=j,Et=K,ii=ue,bi=gt[Et-ii],_i=gt[Et+0],ci=gt[Et+ii],rn=Qo[112+((Bi=3*(_i-bi))+4>>3)],Bi=Qo[112+(Bi+3>>3)],qt=rn+1>>1;gt[Et-2*ii]=Js[255+gt[Et-2*ii]+qt],gt[Et-ii]=Js[255+bi+Bi],gt[Et+0]=Js[255+_i-rn],gt[Et+ii]=Js[255+ci-qt]}K+=ve}}function ac(j,K,ue,ve,Ne,Ke){El(j,K,ue,1,16,ve,Ne,Ke)}function pu(j,K,ue,ve,Ne,Ke){El(j,K,1,ue,16,ve,Ne,Ke)}function hh(j,K,ue,ve,Ne,Ke){var it;for(it=3;0<it;--it)Gs(j,K+=4*ue,ue,1,16,ve,Ne,Ke)}function mu(j,K,ue,ve,Ne,Ke){var it;for(it=3;0<it;--it)Gs(j,K+=4,1,ue,16,ve,Ne,Ke)}function fh(j,K,ue,ve,Ne,Ke,it,at){El(j,K,Ne,1,8,Ke,it,at),El(ue,ve,Ne,1,8,Ke,it,at)}function zu(j,K,ue,ve,Ne,Ke,it,at){El(j,K,1,Ne,8,Ke,it,at),El(ue,ve,1,Ne,8,Ke,it,at)}function gu(j,K,ue,ve,Ne,Ke,it,at){Gs(j,K+4*Ne,Ne,1,8,Ke,it,at),Gs(ue,ve+4*Ne,Ne,1,8,Ke,it,at)}function yu(j,K,ue,ve,Ne,Ke,it,at){Gs(j,K+4,1,Ne,8,Ke,it,at),Gs(ue,ve+4,1,Ne,8,Ke,it,at)}function Wl(){this.ba=new yo,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Hr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _u(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pn(){this.ua=0,this.Wa=new Qe,this.vb=new Qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ae,this.yc=new Ee}function Nu(){this.xb=this.a=0,this.l=new is,this.ca=new yo,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ce,this.Pb=0,this.wd=new ce,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pn,this.ab=0,this.gc=p(4,Fn),this.Oc=0}function Wa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new is,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ya(j,K,ue,ve,Ne,Ke,it){for(j=j==null?0:j[K+0],K=0;K<it;++K)Ne[Ke+K]=j+ue[ve+K]&255,j=Ne[Ke+K]}function Xl(j,K,ue,ve,Ne,Ke,it){var at;if(j==null)ya(null,null,ue,ve,Ne,Ke,it);else for(at=0;at<it;++at)Ne[Ke+at]=j[K+at]+ue[ve+at]&255}function _a(j,K,ue,ve,Ne,Ke,it){if(j==null)ya(null,null,ue,ve,Ne,Ke,it);else{var at,gt=j[K+0],Et=gt,ii=gt;for(at=0;at<it;++at)Et=ii+(gt=j[K+at])-Et,ii=ue[ve+at]+(-256&Et?0>Et?0:255:Et)&255,Et=gt,Ne[Ke+at]=ii}}function Ao(j,K,ue,ve){var Ne=K.width,Ke=K.o;if(e(j!=null&&K!=null),0>ue||0>=ve||ue+ve>Ke)return null;if(!j.Cc){if(j.ga==null){var it;if(j.ga=new Wa,(it=j.ga==null)||(it=K.width*K.o,e(j.Gb.length==0),j.Gb=u(it),j.Uc=0,j.Gb==null?it=0:(j.mb=j.Gb,j.nb=j.Uc,j.rc=null,it=1),it=!it),!it){it=j.ga;var at=j.Fa,gt=j.P,Et=j.qc,ii=j.mb,bi=j.nb,_i=gt+1,ci=Et-1,rn=it.l;if(e(at!=null&&ii!=null&&K!=null),z[0]=null,z[1]=ya,z[2]=Xl,z[3]=_a,it.ca=ii,it.tb=bi,it.c=K.width,it.i=K.height,e(0<it.c&&0<it.i),1>=Et)K=0;else if(it.$a=at[gt+0]>>0&3,it.Z=at[gt+0]>>2&3,it.Lc=at[gt+0]>>4&3,gt=at[gt+0]>>6&3,0>it.$a||1<it.$a||4<=it.Z||1<it.Lc||gt)K=0;else if(rn.put=br,rn.ac=Jn,rn.bc=Eo,rn.ma=it,rn.width=K.width,rn.height=K.height,rn.Da=K.Da,rn.v=K.v,rn.va=K.va,rn.j=K.j,rn.o=K.o,it.$a)e:{e(it.$a==1),K=zt();t:for(;;){if(K==null){K=0;break e}if(e(it!=null),it.mc=K,K.c=it.c,K.i=it.i,K.l=it.l,K.l.ma=it,K.l.width=it.c,K.l.height=it.i,K.a=0,We(K.m,at,_i,ci),!ti(it.c,it.i,1,K,null)||(K.ab==1&&K.gc[0].hc==3&&ft(K.s)?(it.ic=1,at=K.c*K.i,K.Ta=null,K.Ua=0,K.V=u(at),K.Ba=0,K.V==null?(K.a=1,K=0):K=1):(it.ic=0,K=vt(K,it.c)),!K))break t;K=1;break e}it.mc=null,K=0}else K=ci>=it.c*it.i;it=!K}if(it)return null;j.ga.Lc!=1?j.Ga=0:ve=Ke-ue}e(j.ga!=null),e(ue+ve<=Ke);e:{if(K=(at=j.ga).c,Ke=at.l.o,at.$a==0){if(_i=j.rc,ci=j.Vc,rn=j.Fa,gt=j.P+1+ue*K,Et=j.mb,ii=j.nb+ue*K,e(gt<=j.P+j.qc),at.Z!=0)for(e(z[at.Z]!=null),it=0;it<ve;++it)z[at.Z](_i,ci,rn,gt,Et,ii,K),_i=Et,ci=ii,ii+=K,gt+=K;else for(it=0;it<ve;++it)n(Et,ii,rn,gt,K),_i=Et,ci=ii,ii+=K,gt+=K;j.rc=_i,j.Vc=ci}else{if(e(at.mc!=null),K=ue+ve,e((it=at.mc)!=null),e(K<=it.i),it.C>=K)K=1;else if(at.ic||li(),at.ic){at=it.V,_i=it.Ba,ci=it.c;var Bi=it.i,qt=(rn=1,gt=it.$/ci,Et=it.$%ci,ii=it.m,bi=it.s,it.$),Kt=ci*Bi,Zi=ci*K,Qi=bi.wc,Hi=qt<Zi?Pe(bi,Et,gt):null;e(qt<=Kt),e(K<=Bi),e(ft(bi));t:for(;;){for(;!ii.h&&qt<Zi;){if(Et&Qi||(Hi=Pe(bi,Et,gt)),e(Hi!=null),Re(ii),256>(Bi=Do(Hi.G[0],Hi.H[0],ii)))at[_i+qt]=Bi,++qt,++Et>=ci&&(Et=0,++gt<=K&&!(gt%16)&&Ut(it,gt));else{if(!(280>Bi)){rn=0;break t}Bi=He(Bi-256,ii);var Tn,An=Do(Hi.G[4],Hi.H[4],ii);if(Re(ii),!(qt>=(An=Ho(ci,An=He(An,ii)))&&Kt-qt>=Bi)){rn=0;break t}for(Tn=0;Tn<Bi;++Tn)at[_i+qt+Tn]=at[_i+qt+Tn-An];for(qt+=Bi,Et+=Bi;Et>=ci;)Et-=ci,++gt<=K&&!(gt%16)&&Ut(it,gt);qt<Zi&&Et&Qi&&(Hi=Pe(bi,Et,gt))}e(ii.h==de(ii))}Ut(it,gt>K?K:gt);break t}!rn||ii.h&&qt<Kt?(rn=0,it.a=ii.h?5:3):it.$=qt,K=rn}else K=Ge(it,it.V,it.Ba,it.c,it.i,K,ji);if(!K){ve=0;break e}}ue+ve>=Ke&&(j.Cc=1),ve=1}if(!ve)return null;if(j.Cc&&((ve=j.ga)!=null&&(ve.mc=null),j.ga=null,0<j.Ga))return alert("todo:WebPDequantizeLevels"),null}return j.nb+ue*Ne}function se(j,K,ue,ve,Ne,Ke){for(;0<Ne--;){var it,at=j,gt=K+(ue?1:0),Et=j,ii=K+(ue?0:3);for(it=0;it<ve;++it){var bi=Et[ii+4*it];bi!=255&&(bi*=32897,at[gt+4*it+0]=at[gt+4*it+0]*bi>>23,at[gt+4*it+1]=at[gt+4*it+1]*bi>>23,at[gt+4*it+2]=at[gt+4*it+2]*bi>>23)}K+=Ke}}function je(j,K,ue,ve,Ne){for(;0<ve--;){var Ke;for(Ke=0;Ke<ue;++Ke){var it=j[K+2*Ke+0],at=15&(Et=j[K+2*Ke+1]),gt=4369*at,Et=(240&Et|Et>>4)*gt>>16;j[K+2*Ke+0]=(240&it|it>>4)*gt>>16&240|(15&it|it<<4)*gt>>16>>4&15,j[K+2*Ke+1]=240&Et|at}K+=Ne}}function kt(j,K,ue,ve,Ne,Ke,it,at){var gt,Et,ii=255;for(Et=0;Et<Ne;++Et){for(gt=0;gt<ve;++gt){var bi=j[K+gt];Ke[it+4*gt]=bi,ii&=bi}K+=ue,it+=at}return ii!=255}function Wt(j,K,ue,ve,Ne){var Ke;for(Ke=0;Ke<Ne;++Ke)ue[ve+Ke]=j[K+Ke]>>8}function li(){za=se,Hu=je,Gu=kt,Bc=Wt}function Yi(j,K,ue){ie[j]=function(ve,Ne,Ke,it,at,gt,Et,ii,bi,_i,ci,rn,Bi,qt,Kt,Zi,Qi){var Hi,Tn=Qi-1>>1,An=at[gt+0]|Et[ii+0]<<16,xr=bi[_i+0]|ci[rn+0]<<16;e(ve!=null);var Ln=3*An+xr+131074>>2;for(K(ve[Ne+0],255&Ln,Ln>>16,Bi,qt),Ke!=null&&(Ln=3*xr+An+131074>>2,K(Ke[it+0],255&Ln,Ln>>16,Kt,Zi)),Hi=1;Hi<=Tn;++Hi){var vo=at[gt+Hi]|Et[ii+Hi]<<16,So=bi[_i+Hi]|ci[rn+Hi]<<16,Xr=An+vo+xr+So+524296,jr=Xr+2*(vo+xr)>>3;Ln=jr+An>>1,An=(Xr=Xr+2*(An+So)>>3)+vo>>1,K(ve[Ne+2*Hi-1],255&Ln,Ln>>16,Bi,qt+(2*Hi-1)*ue),K(ve[Ne+2*Hi-0],255&An,An>>16,Bi,qt+(2*Hi-0)*ue),Ke!=null&&(Ln=Xr+xr>>1,An=jr+So>>1,K(Ke[it+2*Hi-1],255&Ln,Ln>>16,Kt,Zi+(2*Hi-1)*ue),K(Ke[it+2*Hi+0],255&An,An>>16,Kt,Zi+(2*Hi+0)*ue)),An=vo,xr=So}1&Qi||(Ln=3*An+xr+131074>>2,K(ve[Ne+Qi-1],255&Ln,Ln>>16,Bi,qt+(Qi-1)*ue),Ke!=null&&(Ln=3*xr+An+131074>>2,K(Ke[it+Qi-1],255&Ln,Ln>>16,Kt,Zi+(Qi-1)*ue)))}}function cn(){X[Ya]=ne,X[uc]=_e,X[Au]=pe,X[Su]=Ce,X[Jl]=Be,X[no]=Je,X[ba]=st,X[jo]=_e,X[ku]=Ce,X[Cu]=Be,X[Nc]=Je}function Xn(j){return j&~vi?0>j?0:255:j>>ui}function wr(j,K){return Xn((19077*j>>8)+(26149*K>>8)-14234)}function Fr(j,K,ue){return Xn((19077*j>>8)-(6419*K>>8)-(13320*ue>>8)+8708)}function Gr(j,K){return Xn((19077*j>>8)+(33050*K>>8)-17685)}function eo(j,K,ue,ve,Ne){ve[Ne+0]=wr(j,ue),ve[Ne+1]=Fr(j,K,ue),ve[Ne+2]=Gr(j,K)}function zo(j,K,ue,ve,Ne){ve[Ne+0]=Gr(j,K),ve[Ne+1]=Fr(j,K,ue),ve[Ne+2]=wr(j,ue)}function Go(j,K,ue,ve,Ne){var Ke=Fr(j,K,ue);K=Ke<<3&224|Gr(j,K)>>3,ve[Ne+0]=248&wr(j,ue)|Ke>>5,ve[Ne+1]=K}function Yo(j,K,ue,ve,Ne){var Ke=240&Gr(j,K)|15;ve[Ne+0]=240&wr(j,ue)|Fr(j,K,ue)>>4,ve[Ne+1]=Ke}function Is(j,K,ue,ve,Ne){ve[Ne+0]=255,eo(j,K,ue,ve,Ne+1)}function ms(j,K,ue,ve,Ne){zo(j,K,ue,ve,Ne),ve[Ne+3]=255}function Rr(j,K,ue,ve,Ne){eo(j,K,ue,ve,Ne),ve[Ne+3]=255}function Ts(j,K){return 0>j?0:j>K?K:j}function As(j,K,ue){ie[j]=function(ve,Ne,Ke,it,at,gt,Et,ii,bi){for(var _i=ii+(-2&bi)*ue;ii!=_i;)K(ve[Ne+0],Ke[it+0],at[gt+0],Et,ii),K(ve[Ne+1],Ke[it+0],at[gt+0],Et,ii+ue),Ne+=2,++it,++gt,ii+=2*ue;1&bi&&K(ve[Ne+0],Ke[it+0],at[gt+0],Et,ii)}}function Yl(j,K,ue){return ue==0?j==0?K==0?6:5:K==0?4:0:ue}function Il(j,K,ue,ve,Ne){switch(j>>>30){case 3:Vu(K,ue,ve,Ne,0);break;case 2:Ba(K,ue,ve,Ne);break;case 1:Wr(K,ue,ve,Ne)}}function ju(j,K){var ue,ve,Ne=K.M,Ke=K.Nb,it=j.oc,at=j.pc+40,gt=j.oc,Et=j.pc+584,ii=j.oc,bi=j.pc+600;for(ue=0;16>ue;++ue)it[at+32*ue-1]=129;for(ue=0;8>ue;++ue)gt[Et+32*ue-1]=129,ii[bi+32*ue-1]=129;for(0<Ne?it[at-1-32]=gt[Et-1-32]=ii[bi-1-32]=129:(l(it,at-32-1,127,21),l(gt,Et-32-1,127,9),l(ii,bi-32-1,127,9)),ve=0;ve<j.za;++ve){var _i=K.ya[K.aa+ve];if(0<ve){for(ue=-1;16>ue;++ue)n(it,at+32*ue-4,it,at+32*ue+12,4);for(ue=-1;8>ue;++ue)n(gt,Et+32*ue-4,gt,Et+32*ue+4,4),n(ii,bi+32*ue-4,ii,bi+32*ue+4,4)}var ci=j.Gd,rn=j.Hd+ve,Bi=_i.ad,qt=_i.Hc;if(0<Ne&&(n(it,at-32,ci[rn].y,0,16),n(gt,Et-32,ci[rn].f,0,8),n(ii,bi-32,ci[rn].ea,0,8)),_i.Za){var Kt=it,Zi=at-32+16;for(0<Ne&&(ve>=j.za-1?l(Kt,Zi,ci[rn].y[15],4):n(Kt,Zi,ci[rn+1].y,0,4)),ue=0;4>ue;ue++)Kt[Zi+128+ue]=Kt[Zi+256+ue]=Kt[Zi+384+ue]=Kt[Zi+0+ue];for(ue=0;16>ue;++ue,qt<<=2)Kt=it,Zi=at+Mn[ue],B[_i.Ob[ue]](Kt,Zi),Il(qt,Bi,16*+ue,Kt,Zi)}else if(Kt=Yl(ve,Ne,_i.Ob[0]),la[Kt](it,at),qt!=0)for(ue=0;16>ue;++ue,qt<<=2)Il(qt,Bi,16*+ue,it,at+Mn[ue]);for(ue=_i.Gc,Kt=Yl(ve,Ne,_i.Dd),d[Kt](gt,Et),d[Kt](ii,bi),qt=Bi,Kt=gt,Zi=Et,255&(_i=ue>>0)&&(170&_i?aa(qt,256,Kt,Zi):va(qt,256,Kt,Zi)),_i=ii,qt=bi,255&(ue>>=8)&&(170&ue?aa(Bi,320,_i,qt):va(Bi,320,_i,qt)),Ne<j.Ub-1&&(n(ci[rn].y,0,it,at+480,16),n(ci[rn].f,0,gt,Et+224,8),n(ci[rn].ea,0,ii,bi+224,8)),ue=8*Ke*j.B,ci=j.sa,rn=j.ta+16*ve+16*Ke*j.R,Bi=j.qa,_i=j.ra+8*ve+ue,qt=j.Ha,Kt=j.Ia+8*ve+ue,ue=0;16>ue;++ue)n(ci,rn+ue*j.R,it,at+32*ue,16);for(ue=0;8>ue;++ue)n(Bi,_i+ue*j.B,gt,Et+32*ue,8),n(qt,Kt+ue*j.B,ii,bi+32*ue,8)}}function Da(j,K,ue,ve,Ne,Ke,it,at,gt){var Et=[0],ii=[0],bi=0,_i=gt!=null?gt.kd:0,ci=gt!=null?gt:new _u;if(j==null||12>ue)return 7;ci.data=j,ci.w=K,ci.ha=ue,K=[K],ue=[ue],ci.gb=[ci.gb];e:{var rn=K,Bi=ue,qt=ci.gb;if(e(j!=null),e(Bi!=null),e(qt!=null),qt[0]=0,12<=Bi[0]&&!t(j,rn[0],"RIFF")){if(t(j,rn[0]+8,"WEBP")){qt=3;break e}var Kt=mt(j,rn[0]+4);if(12>Kt||4294967286<Kt){qt=3;break e}if(_i&&Kt>Bi[0]-8){qt=7;break e}qt[0]=Kt,rn[0]+=12,Bi[0]-=12}qt=0}if(qt!=0)return qt;for(Kt=0<ci.gb[0],ue=ue[0];;){e:{var Zi=j;Bi=K,qt=ue;var Qi=Et,Hi=ii,Tn=rn=[0];if((Ln=bi=[bi])[0]=0,8>qt[0])qt=7;else{if(!t(Zi,Bi[0],"VP8X")){if(mt(Zi,Bi[0]+4)!=10){qt=3;break e}if(18>qt[0]){qt=7;break e}var An=mt(Zi,Bi[0]+8),xr=1+ni(Zi,Bi[0]+12);if(2147483648<=xr*(Zi=1+ni(Zi,Bi[0]+15))){qt=3;break e}Tn!=null&&(Tn[0]=An),Qi!=null&&(Qi[0]=xr),Hi!=null&&(Hi[0]=Zi),Bi[0]+=18,qt[0]-=18,Ln[0]=1}qt=0}}if(bi=bi[0],rn=rn[0],qt!=0)return qt;if(Bi=!!(2&rn),!Kt&&bi)return 3;if(Ke!=null&&(Ke[0]=!!(16&rn)),it!=null&&(it[0]=Bi),at!=null&&(at[0]=0),it=Et[0],rn=ii[0],bi&&Bi&&gt==null){qt=0;break}if(4>ue){qt=7;break}if(Kt&&bi||!Kt&&!bi&&!t(j,K[0],"ALPH")){ue=[ue],ci.na=[ci.na],ci.P=[ci.P],ci.Sa=[ci.Sa];e:{An=j,qt=K,Kt=ue;var Ln=ci.gb;Qi=ci.na,Hi=ci.P,Tn=ci.Sa,xr=22,e(An!=null),e(Kt!=null),Zi=qt[0];var vo=Kt[0];for(e(Qi!=null),e(Tn!=null),Qi[0]=null,Hi[0]=null,Tn[0]=0;;){if(qt[0]=Zi,Kt[0]=vo,8>vo){qt=7;break e}var So=mt(An,Zi+4);if(4294967286<So){qt=3;break e}var Xr=8+So+1&-2;if(xr+=Xr,0<Ln&&xr>Ln){qt=3;break e}if(!t(An,Zi,"VP8 ")||!t(An,Zi,"VP8L")){qt=0;break e}if(vo[0]<Xr){qt=7;break e}t(An,Zi,"ALPH")||(Qi[0]=An,Hi[0]=Zi+8,Tn[0]=So),Zi+=Xr,vo-=Xr}}if(ue=ue[0],ci.na=ci.na[0],ci.P=ci.P[0],ci.Sa=ci.Sa[0],qt!=0)break}ue=[ue],ci.Ja=[ci.Ja],ci.xa=[ci.xa];e:if(Ln=j,qt=K,Kt=ue,Qi=ci.gb[0],Hi=ci.Ja,Tn=ci.xa,An=qt[0],Zi=!t(Ln,An,"VP8 "),xr=!t(Ln,An,"VP8L"),e(Ln!=null),e(Kt!=null),e(Hi!=null),e(Tn!=null),8>Kt[0])qt=7;else{if(Zi||xr){if(Ln=mt(Ln,An+4),12<=Qi&&Ln>Qi-12){qt=3;break e}if(_i&&Ln>Kt[0]-8){qt=7;break e}Hi[0]=Ln,qt[0]+=8,Kt[0]-=8,Tn[0]=xr}else Tn[0]=5<=Kt[0]&&Ln[An+0]==47&&!(Ln[An+4]>>5),Hi[0]=Kt[0];qt=0}if(ue=ue[0],ci.Ja=ci.Ja[0],ci.xa=ci.xa[0],K=K[0],qt!=0)break;if(4294967286<ci.Ja)return 3;if(at==null||Bi||(at[0]=ci.xa?2:1),it=[it],rn=[rn],ci.xa){if(5>ue){qt=7;break}at=it,_i=rn,Bi=Ke,j==null||5>ue?j=0:5<=ue&&j[K+0]==47&&!(j[K+4]>>5)?(Kt=[0],Ln=[0],Qi=[0],We(Hi=new ce,j,K,ue),un(Hi,Kt,Ln,Qi)?(at!=null&&(at[0]=Kt[0]),_i!=null&&(_i[0]=Ln[0]),Bi!=null&&(Bi[0]=Qi[0]),j=1):j=0):j=0}else{if(10>ue){qt=7;break}at=rn,j==null||10>ue||!Ft(j,K+3,ue-3)?j=0:(_i=j[K+0]|j[K+1]<<8|j[K+2]<<16,Bi=16383&(j[K+7]<<8|j[K+6]),j=16383&(j[K+9]<<8|j[K+8]),1&_i||3<(_i>>1&7)||!(_i>>4&1)||_i>>5>=ci.Ja||!Bi||!j?j=0:(it&&(it[0]=Bi),at&&(at[0]=j),j=1))}if(!j||(it=it[0],rn=rn[0],bi&&(Et[0]!=it||ii[0]!=rn)))return 3;gt!=null&&(gt[0]=ci,gt.offset=K-gt.w,e(4294967286>K-gt.w),e(gt.offset==gt.ha-ue));break}return qt==0||qt==7&&bi&&gt==null?(Ke!=null&&(Ke[0]|=ci.na!=null&&0<ci.na.length),ve!=null&&(ve[0]=it),Ne!=null&&(Ne[0]=rn),0):qt}function Tl(j,K,ue){var ve=K.width,Ne=K.height,Ke=0,it=0,at=ve,gt=Ne;if(K.Da=j!=null&&0<j.Da,K.Da&&(at=j.cd,gt=j.bd,Ke=j.v,it=j.j,11>ue||(Ke&=-2,it&=-2),0>Ke||0>it||0>=at||0>=gt||Ke+at>ve||it+gt>Ne))return 0;if(K.v=Ke,K.j=it,K.va=Ke+at,K.o=it+gt,K.U=at,K.T=gt,K.da=j!=null&&0<j.da,K.da){if(!Yt(at,gt,ue=[j.ib],Ke=[j.hb]))return 0;K.ib=ue[0],K.hb=Ke[0]}return K.ob=j!=null&&j.ob,K.Kb=j==null||!j.Sd,K.da&&(K.ob=K.ib<3*ve/4&&K.hb<3*Ne/4,K.Kb=0),1}function ul(j){if(j==null)return 2;if(11>j.S){var K=j.f.RGBA;K.fb+=(j.height-1)*K.A,K.A=-K.A}else K=j.f.kb,j=j.height,K.O+=(j-1)*K.fa,K.fa=-K.fa,K.N+=(j-1>>1)*K.Ab,K.Ab=-K.Ab,K.W+=(j-1>>1)*K.Db,K.Db=-K.Db,K.F!=null&&(K.J+=(j-1)*K.lb,K.lb=-K.lb);return 0}function Uu(j,K,ue,ve){if(ve==null||0>=j||0>=K)return 2;if(ue!=null){if(ue.Da){var Ne=ue.cd,Ke=ue.bd,it=-2&ue.v,at=-2&ue.j;if(0>it||0>at||0>=Ne||0>=Ke||it+Ne>j||at+Ke>K)return 2;j=Ne,K=Ke}if(ue.da){if(!Yt(j,K,Ne=[ue.ib],Ke=[ue.hb]))return 2;j=Ne[0],K=Ke[0]}}ve.width=j,ve.height=K;e:{var gt=ve.width,Et=ve.height;if(j=ve.S,0>=gt||0>=Et||!(j>=Ya&&13>j))j=2;else{if(0>=ve.Rd&&ve.sd==null){it=Ke=Ne=K=0;var ii=(at=gt*Lr[j])*Et;if(11>j||(Ke=(Et+1)/2*(K=(gt+1)/2),j==12&&(it=(Ne=gt)*Et)),(Et=u(ii+2*Ke+it))==null){j=1;break e}ve.sd=Et,11>j?((gt=ve.f.RGBA).eb=Et,gt.fb=0,gt.A=at,gt.size=ii):((gt=ve.f.kb).y=Et,gt.O=0,gt.fa=at,gt.Fd=ii,gt.f=Et,gt.N=0+ii,gt.Ab=K,gt.Cd=Ke,gt.ea=Et,gt.W=0+ii+Ke,gt.Db=K,gt.Ed=Ke,j==12&&(gt.F=Et,gt.J=0+ii+2*Ke),gt.Tc=it,gt.lb=Ne)}if(K=1,Ne=ve.S,Ke=ve.width,it=ve.height,Ne>=Ya&&13>Ne)if(11>Ne)j=ve.f.RGBA,K&=(at=Math.abs(j.A))*(it-1)+Ke<=j.size,K&=at>=Ke*Lr[Ne],K&=j.eb!=null;else{j=ve.f.kb,at=(Ke+1)/2,ii=(it+1)/2,gt=Math.abs(j.fa),Et=Math.abs(j.Ab);var bi=Math.abs(j.Db),_i=Math.abs(j.lb),ci=_i*(it-1)+Ke;K&=gt*(it-1)+Ke<=j.Fd,K&=Et*(ii-1)+at<=j.Cd,K=(K&=bi*(ii-1)+at<=j.Ed)&gt>=Ke&Et>=at&bi>=at,K&=j.y!=null,K&=j.f!=null,K&=j.ea!=null,Ne==12&&(K&=_i>=Ke,K&=ci<=j.Tc,K&=j.F!=null)}else K=0;j=K?0:2}}return j!=0||ue!=null&&ue.fd&&(j=ul(ve)),j}var Rs=64,vu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zl=24,Xa=32,bu=8,Bs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ei("Predictor0","PredictorAdd0"),ie.Predictor0=function(){return 4278190080},ie.Predictor1=function(j){return j},ie.Predictor2=function(j,K,ue){return K[ue+0]},ie.Predictor3=function(j,K,ue){return K[ue+1]},ie.Predictor4=function(j,K,ue){return K[ue-1]},ie.Predictor5=function(j,K,ue){return Ot(Ot(j,K[ue+1]),K[ue+0])},ie.Predictor6=function(j,K,ue){return Ot(j,K[ue-1])},ie.Predictor7=function(j,K,ue){return Ot(j,K[ue+0])},ie.Predictor8=function(j,K,ue){return Ot(K[ue-1],K[ue+0])},ie.Predictor9=function(j,K,ue){return Ot(K[ue+0],K[ue+1])},ie.Predictor10=function(j,K,ue){return Ot(Ot(j,K[ue-1]),Ot(K[ue+0],K[ue+1]))},ie.Predictor11=function(j,K,ue){var ve=K[ue+0];return 0>=Ii(ve>>24&255,j>>24&255,(K=K[ue-1])>>24&255)+Ii(ve>>16&255,j>>16&255,K>>16&255)+Ii(ve>>8&255,j>>8&255,K>>8&255)+Ii(255&ve,255&j,255&K)?ve:j},ie.Predictor12=function(j,K,ue){var ve=K[ue+0];return(ai((j>>24&255)+(ve>>24&255)-((K=K[ue-1])>>24&255))<<24|ai((j>>16&255)+(ve>>16&255)-(K>>16&255))<<16|ai((j>>8&255)+(ve>>8&255)-(K>>8&255))<<8|ai((255&j)+(255&ve)-(255&K)))>>>0},ie.Predictor13=function(j,K,ue){var ve=K[ue-1];return(Ji((j=Ot(j,K[ue+0]))>>24&255,ve>>24&255)<<24|Ji(j>>16&255,ve>>16&255)<<16|Ji(j>>8&255,ve>>8&255)<<8|Ji(j>>0&255,ve>>0&255))>>>0};var wu=ie.PredictorAdd0;ie.PredictorAdd1=$t,Ei("Predictor2","PredictorAdd2"),Ei("Predictor3","PredictorAdd3"),Ei("Predictor4","PredictorAdd4"),Ei("Predictor5","PredictorAdd5"),Ei("Predictor6","PredictorAdd6"),Ei("Predictor7","PredictorAdd7"),Ei("Predictor8","PredictorAdd8"),Ei("Predictor9","PredictorAdd9"),Ei("Predictor10","PredictorAdd10"),Ei("Predictor11","PredictorAdd11"),Ei("Predictor12","PredictorAdd12"),Ei("Predictor13","PredictorAdd13");var cl=ie.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(j){return j>>8&255},function(j){return j}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(j){return j},function(j){return j>>8&255});var Kl,Oa=ie.ColorIndexInverseTransform,Ll=ie.MapARGB,Fc=ie.VP8LColorIndexInverseTransformAlpha,Rc=ie.MapAlpha,Pl=ie.VP8LPredictorsAdd=[];Pl.length=16,(ie.VP8LPredictors=[]).length=16,(ie.VP8LPredictorsAdd_C=[]).length=16,(ie.VP8LPredictors_C=[]).length=16;var zs,Fa,Ra,sa,hs,hl,Jo,Vu,Ba,aa,Wr,va,Ml,qu,xu,Ws,Dl,gs,Cn,No,Vr,Po,os,mn,za,Hu,Gu,Bc,dh=u(511),ph=u(2041),Nh=u(225),Ir=u(767),zc=0,lc=ph,Qo=Nh,Js=Ir,Zo=dh,Ya=0,uc=1,Au=2,Su=3,Jl=4,no=5,ba=6,jo=7,ku=8,Cu=9,Nc=10,jh=[2,3,7],fl=[3,3,11],Uh=[280,256,256,256,40],dl=[0,1,1,1,0],cc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wu=8,hc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ss=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wo=null,Ql=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$l=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ss=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ys=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],la=[],B=[],d=[],I=1,D=2,z=[],X=[];Yi("UpsampleRgbLinePair",eo,3),Yi("UpsampleBgrLinePair",zo,3),Yi("UpsampleRgbaLinePair",Rr,4),Yi("UpsampleBgraLinePair",ms,4),Yi("UpsampleArgbLinePair",Is,4),Yi("UpsampleRgba4444LinePair",Yo,2),Yi("UpsampleRgb565LinePair",Go,2);var ne=ie.UpsampleRgbLinePair,pe=ie.UpsampleBgrLinePair,_e=ie.UpsampleRgbaLinePair,Ce=ie.UpsampleBgraLinePair,Be=ie.UpsampleArgbLinePair,Je=ie.UpsampleRgba4444LinePair,st=ie.UpsampleRgb565LinePair,Mt=16,Ct=1<<Mt-1,Tt=-227,ei=482,ui=6,vi=(256<<ui)-1,jt=0,Oi=u(256),ki=u(256),Wi=u(256),Vi=u(256),ln=u(ei-Tt),Ui=u(ei-Tt);As("YuvToRgbRow",eo,3),As("YuvToBgrRow",zo,3),As("YuvToRgbaRow",Rr,4),As("YuvToBgraRow",ms,4),As("YuvToArgbRow",Is,4),As("YuvToRgba4444Row",Yo,2),As("YuvToRgb565Row",Go,2);var Mn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_n=[0,2,8],jn=[8,7,6,4,4,2,2,2,1,1,1,1],Cr=1;this.WebPDecodeRGBA=function(j,K,ue,ve,Ne){var Ke=uc,it=new Wl,at=new yo;it.ba=at,at.S=Ke,at.width=[at.width],at.height=[at.height];var gt=at.width,Et=at.height,ii=new ar;if(ii==null||j==null)var bi=2;else e(ii!=null),bi=Da(j,K,ue,ii.width,ii.height,ii.Pd,ii.Qd,ii.format,null);if(bi!=0?gt=0:(gt!=null&&(gt[0]=ii.width[0]),Et!=null&&(Et[0]=ii.height[0]),gt=1),gt){at.width=at.width[0],at.height=at.height[0],ve!=null&&(ve[0]=at.width),Ne!=null&&(Ne[0]=at.height);e:{if(ve=new is,(Ne=new _u).data=j,Ne.w=K,Ne.ha=ue,Ne.kd=1,K=[0],e(Ne!=null),((j=Da(Ne.data,Ne.w,Ne.ha,null,null,null,K,null,Ne))==0||j==7)&&K[0]&&(j=4),(K=j)==0){if(e(it!=null),ve.data=Ne.data,ve.w=Ne.w+Ne.offset,ve.ha=Ne.ha-Ne.offset,ve.put=br,ve.ac=Jn,ve.bc=Eo,ve.ma=it,Ne.xa){if((j=zt())==null){it=1;break e}if(function(_i,ci){var rn=[0],Bi=[0],qt=[0];t:for(;;){if(_i==null)return 0;if(ci==null)return _i.a=2,0;if(_i.l=ci,_i.a=0,We(_i.m,ci.data,ci.w,ci.ha),!un(_i.m,rn,Bi,qt)){_i.a=3;break t}if(_i.xb=D,ci.width=rn[0],ci.height=Bi[0],!ti(rn[0],Bi[0],1,_i,null))break t;return 1}return e(_i.a!=0),0}(j,ve)){if(ve=(K=Uu(ve.width,ve.height,it.Oa,it.ba))==0){t:{ve=j;i:for(;;){if(ve==null){ve=0;break t}if(e(ve.s.yc!=null),e(ve.s.Ya!=null),e(0<ve.s.Wb),e((ue=ve.l)!=null),e((Ne=ue.ma)!=null),ve.xb!=0){if(ve.ca=Ne.ba,ve.tb=Ne.tb,e(ve.ca!=null),!Tl(Ne.Oa,ue,Su)){ve.a=2;break i}if(!vt(ve,ue.width)||ue.da)break i;if((ue.da||an(ve.ca.S))&&li(),11>ve.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ve.ca.f.kb.F!=null&&li()),ve.Pb&&0<ve.s.ua&&ve.s.vb.X==null&&!At(ve.s.vb,ve.s.Wa.Xa)){ve.a=1;break i}ve.xb=0}if(!Ge(ve,ve.V,ve.Ba,ve.c,ve.i,ue.o,qe))break i;Ne.Dc=ve.Ma,ve=1;break t}e(ve.a!=0),ve=0}ve=!ve}ve&&(K=j.a)}else K=j.a}else{if((j=new al)==null){it=1;break e}if(j.Fa=Ne.na,j.P=Ne.P,j.qc=Ne.Sa,tr(j,ve)){if((K=Uu(ve.width,ve.height,it.Oa,it.ba))==0){if(j.Aa=0,ue=it.Oa,e((Ne=j)!=null),ue!=null){if(0<(gt=0>(gt=ue.Md)?0:100<gt?255:255*gt/100)){for(Et=ii=0;4>Et;++Et)12>(bi=Ne.pb[Et]).lc&&(bi.ia=gt*jn[0>bi.lc?0:bi.lc]>>3),ii|=bi.ia;ii&&(alert("todo:VP8InitRandom"),Ne.ia=1)}Ne.Ga=ue.Id,100<Ne.Ga?Ne.Ga=100:0>Ne.Ga&&(Ne.Ga=0)}Ko(j,ve)||(K=j.a)}}else K=j.a}K==0&&it.Oa!=null&&it.Oa.fd&&(K=ul(it.ba))}it=K}Ke=it!=0?null:11>Ke?at.f.RGBA.eb:at.f.kb.y}else Ke=null;return Ke};var Lr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(ie,Se){for(var xe="",le=0;le<4;le++)xe+=String.fromCharCode(ie[Se++]);return xe}function _(ie,Se){return(ie[Se+0]<<0|ie[Se+1]<<8|ie[Se+2]<<16)>>>0}function v(ie,Se){return(ie[Se+0]<<0|ie[Se+1]<<8|ie[Se+2]<<16|ie[Se+3]<<24)>>>0}new c;var w=[0],x=[0],C=[],T=new c,k=i,M=function(ie,Se){var xe={},le=0,Ee=!1,me=0,Ae=0;if(xe.frames=[],!function(Ie,de,ge,Re){for(var Ze=0;Ze<Re;Ze++)if(Ie[de+Ze]!=ge.charCodeAt(Ze))return!0;return!1}(ie,Se,"RIFF",4)){var pt,rt;for(v(ie,Se+=4),Se+=8;Se<ie.length;){var Pt=g(ie,Se),We=v(ie,Se+=4);Se+=4;var be=We+(1&We);switch(Pt){case"VP8 ":case"VP8L":xe.frames[le]===void 0&&(xe.frames[le]={}),(ce=xe.frames[le]).src_off=Ee?Ae:Se-8,ce.src_size=me+We+8,le++,Ee&&(Ee=!1,me=0,Ae=0);break;case"VP8X":(ce=xe.header={}).feature_flags=ie[Se];var Le=Se+4;ce.canvas_width=1+_(ie,Le),Le+=3,ce.canvas_height=1+_(ie,Le),Le+=3;break;case"ALPH":Ee=!0,me=be+8,Ae=Se-8;break;case"ANIM":(ce=xe.header).bgcolor=v(ie,Se),Le=Se+4,ce.loop_count=(pt=ie)[(rt=Le)+0]<<0|pt[rt+1]<<8,Le+=2;break;case"ANMF":var Ue,ce;(ce=xe.frames[le]={}).offset_x=2*_(ie,Se),Se+=3,ce.offset_y=2*_(ie,Se),Se+=3,ce.width=1+_(ie,Se),Se+=3,ce.height=1+_(ie,Se),Se+=3,ce.duration=_(ie,Se),Se+=3,Ue=ie[Se++],ce.dispose=1&Ue,ce.blend=Ue>>1&1}Pt!="ANMF"&&(Se+=be)}return xe}}(k,0);M.response=k,M.rgbaoutput=!0,M.dataurl=!1;var O=M.header?M.header:null,V=M.frames?M.frames:null;if(O){O.loop_counter=O.loop_count,w=[O.canvas_height],x=[O.canvas_width];for(var W=0;W<V.length&&V[W].blend!=0;W++);}var J=V[0],Q=T.WebPDecodeRGBA(k,J.src_off,J.src_size,x,w);J.rgba=Q,J.imgwidth=x[0],J.imgheight=w[0];for(var Z=0;Z<x[0]*w[0]*4;Z++)C[Z]=Q[Z];return this.width=x,this.height=w,this.data=C,this}(function(i){var e=function(){return typeof Z2=="function"},t=function(w,x,C,T){var k=4,M=p;switch(T){case i.image_compression.FAST:k=1,M=u;break;case i.image_compression.MEDIUM:k=6,M=o;break;case i.image_compression.SLOW:k=9,M=c}w=n(w,x,C,M);var O=Z2(w,{level:k});return i.__addimage__.arrayBufferToBinaryString(O)},n=function(w,x,C,T){for(var k,M,O,V=w.length/x,W=new Uint8Array(w.length+V),J=_(),Q=0;Q<V;Q+=1){if(O=Q*x,k=w.subarray(O,O+x),T)W.set(T(k,C,M),O+Q);else{for(var Z,ie=J.length,Se=[];Z<ie;Z+=1)Se[Z]=J[Z](k,C,M);var xe=v(Se.concat());W.set(Se[xe],O+Q)}M=k}return W},l=function(w){var x=Array.apply([],w);return x.unshift(0),x},u=function(w,x){var C,T=[],k=w.length;T[0]=1;for(var M=0;M<k;M+=1)C=w[M-x]||0,T[M+1]=w[M]-C+256&255;return T},p=function(w,x,C){var T,k=[],M=w.length;k[0]=2;for(var O=0;O<M;O+=1)T=C&&C[O]||0,k[O+1]=w[O]-T+256&255;return k},o=function(w,x,C){var T,k,M=[],O=w.length;M[0]=3;for(var V=0;V<O;V+=1)T=w[V-x]||0,k=C&&C[V]||0,M[V+1]=w[V]+256-(T+k>>>1)&255;return M},c=function(w,x,C){var T,k,M,O,V=[],W=w.length;V[0]=4;for(var J=0;J<W;J+=1)T=w[J-x]||0,k=C&&C[J]||0,M=C&&C[J-x]||0,O=g(T,k,M),V[J+1]=w[J]-O+256&255;return V},g=function(w,x,C){if(w===x&&x===C)return w;var T=Math.abs(x-C),k=Math.abs(w-C),M=Math.abs(w+x-C-C);return T<=k&&T<=M?w:k<=M?x:C},_=function(){return[l,u,p,o,c]},v=function(w){var x=w.map(function(C){return C.reduce(function(T,k){return T+Math.abs(k)},0)});return x.indexOf(Math.min.apply(null,x))};i.processPNG=function(w,x,C,T){var k,M,O,V,W,J,Q,Z,ie,Se,xe,le,Ee,me,Ae,pt=this.decode.FLATE_DECODE,rt="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(O=new JS(w)).imgData,M=O.bits,k=O.colorSpace,W=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){ie=(Z=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,xe=new Uint8Array(ie*O.colors),Se=new Uint8Array(ie);var Pt,We=O.pixelBitlength-O.bits;for(me=0,Ae=0;me<ie;me++){for(Ee=Z[me],Pt=0;Pt<We;)xe[Ae++]=Ee>>>Pt&255,Pt+=O.bits;Se[me]=Ee>>>Pt&255}}if(O.bits===16){ie=(Z=new Uint32Array(O.decodePixels().buffer)).length,xe=new Uint8Array(ie*(32/O.pixelBitlength)*O.colors),Se=new Uint8Array(ie*(32/O.pixelBitlength)),le=O.colors>1,me=0,Ae=0;for(var be=0;me<ie;)Ee=Z[me++],xe[Ae++]=Ee>>>0&255,le&&(xe[Ae++]=Ee>>>16&255,Ee=Z[me++],xe[Ae++]=Ee>>>0&255),Se[be++]=Ee>>>16&255;M=8}T!==i.image_compression.NONE&&e()?(w=t(xe,O.width*O.colors,O.colors,T),Q=t(Se,O.width,1,T)):(w=xe,Q=Se,pt=void 0)}if(O.colorType===3&&(k=this.color_spaces.INDEXED,J=O.palette,O.transparency.indexed)){var Le=O.transparency.indexed,Ue=0;for(me=0,ie=Le.length;me<ie;++me)Ue+=Le[me];if((Ue/=255)===ie-1&&Le.indexOf(0)!==-1)V=[Le.indexOf(0)];else if(Ue!==ie){for(Z=O.decodePixels(),Se=new Uint8Array(Z.length),me=0,ie=Z.length;me<ie;me++)Se[me]=Le[Z[me]];Q=t(Se,O.width,1)}}var ce=function(Ie){var de;switch(Ie){case i.image_compression.FAST:de=11;break;case i.image_compression.MEDIUM:de=13;break;case i.image_compression.SLOW:de=14;break;default:de=12}return de}(T);return pt===this.decode.FLATE_DECODE&&(rt="/Predictor "+ce+" "),rt+="/Colors "+W+" /BitsPerComponent "+M+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:C,data:w,index:x,filter:pt,decodeParameters:rt,transparency:V,palette:J,sMask:Q,predictor:ce,width:O.width,height:O.height,bitsPerComponent:M,colorSpace:k}}}})(Br.API),function(i){i.processGIF89A=function(e,t,n,l){var u=new QS(e),p=u.width,o=u.height,c=[];u.decodeAndBlitFrameRGBA(0,c);var g={data:c,width:p,height:o},_=new Xm(100).encode(g,100);return i.processJPEG.call(this,_,t,n,l)},i.processGIF87A=i.processGIF89A}(Br.API),Cc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:n,blue:t,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cc.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){ps.log("bit decode error:"+t)}},Cc.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,l=0;l<e;l++)for(var u=this.datav.getUint8(this.pos++,!0),p=n*this.width*4+8*l*4,o=0;o<8&&8*l+o<this.width;o++){var c=this.palette[u>>7-o&1];this.data[p+4*o]=c.blue,this.data[p+4*o+1]=c.green,this.data[p+4*o+2]=c.red,this.data[p+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Cc.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,l=0;l<i;l++){var u=this.datav.getUint8(this.pos++,!0),p=n*this.width*4+2*l*4,o=u>>4,c=15&u,g=this.palette[o];if(this.data[p]=g.blue,this.data[p+1]=g.green,this.data[p+2]=g.red,this.data[p+3]=255,2*l+1>=this.width)break;g=this.palette[c],this.data[p+4]=g.blue,this.data[p+4+1]=g.green,this.data[p+4+2]=g.red,this.data[p+4+3]=255}e!==0&&(this.pos+=4-e)}},Cc.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;if(l<this.palette.length){var p=this.palette[l];this.data[u]=p.red,this.data[u+1]=p.green,this.data[u+2]=p.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}i!==0&&(this.pos+=4-i)}},Cc.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(u&e)/e*255|0,o=(u>>5&e)/e*255|0,c=(u>>10&e)/e*255|0,g=u>>15?255:0,_=n*this.width*4+4*l;this.data[_]=c,this.data[_+1]=o,this.data[_+2]=p,this.data[_+3]=g}this.pos+=i}},Cc.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var l=this.bottom_up?n:this.height-1-n,u=0;u<this.width;u++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(p&e)/e*255|0,c=(p>>5&t)/t*255|0,g=(p>>11)/e*255|0,_=l*this.width*4+4*u;this.data[_]=g,this.data[_+1]=c,this.data[_+2]=o,this.data[_+3]=255}this.pos+=i}},Cc.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),p=e*this.width*4+4*t;this.data[p]=u,this.data[p+1]=l,this.data[p+2]=n,this.data[p+3]=255}this.pos+=this.width%4}},Cc.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=u,this.data[o+1]=l,this.data[o+2]=n,this.data[o+3]=p}},Cc.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,n,l){var u=new Cc(e,!1),p=u.width,o=u.height,c={data:u.getData(),width:p,height:o},g=new Xm(100).encode(c,100);return i.processJPEG.call(this,g,t,n,l)}}(Br.API),uv.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,n,l){var u=new uv(e),p=u.width,o=u.height,c={data:u.getData(),width:p,height:o},g=new Xm(100).encode(c,100);return i.processJPEG.call(this,g,t,n,l)}}(Br.API),Br.API.processRGBA=function(i,e,t){for(var n=i.data,l=n.length,u=new Uint8Array(l/4*3),p=new Uint8Array(l/4),o=0,c=0,g=0;g<l;g+=4){var _=n[g],v=n[g+1],w=n[g+2],x=n[g+3];u[o++]=_,u[o++]=v,u[o++]=w,p[c++]=x}var C=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Br.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},k0=Br.API,Wp=k0.getCharWidthsArray=function(i,e){var t,n,l=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),p=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:l.metadata.Unicode.widths,c=o.fof?o.fof:1,g=e.kerning?e.kerning:l.metadata.Unicode.kerning,_=g.fof?g.fof:1,v=e.doKerning!==!1,w=0,x=i.length,C=0,T=o[0]||c,k=[];for(t=0;t<x;t++)n=i.charCodeAt(t),typeof l.metadata.widthOfString=="function"?k.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(n))+p*(1e3/u)||0)/1e3):(w=v&&ns(g[n])==="object"&&!isNaN(parseInt(g[n][C],10))?g[n][C]/_:0,k.push((o[n]||T)/c+w)),C=n;return k},ov=k0.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return k0.processArabic&&(i=k0.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,t,l)/t:Wp.apply(this,arguments).reduce(function(u,p){return u+p},0)},sv=function(i,e,t,n){for(var l=[],u=0,p=i.length,o=0;u!==p&&o+e[u]<t;)o+=e[u],u++;l.push(i.slice(0,u));var c=u;for(o=0;u!==p;)o+e[u]>n&&(l.push(i.slice(c,u)),o=0,c=u),o+=e[u],u++;return c!==u&&l.push(i.slice(c,u)),l},av=function(i,e,t){t||(t={});var n,l,u,p,o,c,g,_=[],v=[_],w=t.textIndent||0,x=0,C=0,T=i.split(" "),k=Wp.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?T[0].length+2:t.lineIndent||0){var M=Array(c).join(" "),O=[];T.map(function(W){(W=W.split(/\s*\n/)).length>1?O=O.concat(W.map(function(J,Q){return(Q&&J.length?`
`:"")+J})):O.push(W[0])}),T=O,c=ov.apply(this,[M,t])}for(u=0,p=T.length;u<p;u++){var V=0;if(n=T[u],c&&n[0]==`
`&&(n=n.substr(1),V=1),w+x+(C=(l=Wp.apply(this,[n,t])).reduce(function(W,J){return W+J},0))>e||V){if(C>e){for(o=sv.apply(this,[n,l,e-(w+x),e]),_.push(o.shift()),_=[o.pop()];o.length;)v.push([o.shift()]);C=l.slice(n.length-(_[0]?_[0].length:0)).reduce(function(W,J){return W+J},0)}else _=[n];v.push(_),w=C+c,x=k}else _.push(n),w+=x+C,x=k}return g=c?function(W,J){return(J?M:"")+W.join(" ")}:function(W){return W.join(" ")},v.map(g)},k0.splitTextToSize=function(i,e,t){var n,l=(t=t||{}).fontSize||this.internal.getFontSize(),u=function(_){if(_.widths&&_.kerning)return{widths:_.widths,kerning:_.kerning};var v=this.internal.getFont(_.fontName,_.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var p=1*this.internal.scaleFactor*e/l;u.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/l:0,u.lineIndent=t.lineIndent;var o,c,g=[];for(o=0,c=n.length;o<c;o++)g=g.concat(av.apply(this,[n[o],p,u]));return g},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},l=0;l<e.length;l++)t[e[l]]="0123456789abcdef"[l],n["0123456789abcdef"[l]]=e[l];var u=function(v){return"0x"+parseInt(v,10).toString(16)},p=i.__fontmetrics__.compress=function(v){var w,x,C,T,k=["{"];for(var M in v){if(w=v[M],isNaN(parseInt(M,10))?x="'"+M+"'":(M=parseInt(M,10),x=(x=u(M).slice(2)).slice(0,-1)+n[x.slice(-1)]),typeof w=="number")w<0?(C=u(w).slice(3),T="-"):(C=u(w).slice(2),T=""),C=T+C.slice(0,-1)+n[C.slice(-1)];else{if(ns(w)!=="object")throw new Error("Don't know what to do with value type "+ns(w)+".");C=p(w)}k.push(x+C)}return k.push("}"),k.join("")},o=i.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,x,C,T,k={},M=1,O=k,V=[],W="",J="",Q=v.length-1,Z=1;Z<Q;Z+=1)(T=v[Z])=="'"?w?(C=w.join(""),w=void 0):w=[]:w?w.push(T):T=="{"?(V.push([O,C]),O={},C=void 0):T=="}"?((x=V.pop())[0][x[1]]=O,C=void 0,O=x[0]):T=="-"?M=-1:C===void 0?t.hasOwnProperty(T)?(W+=t[T],C=parseInt(W,16)*M,M=1,W=""):W+=T:t.hasOwnProperty(T)?(J+=t[T],O[C]=parseInt(J,16)*M,M=1,C=void 0,J=""):J+=T;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},_={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(v){var w=v.font,x=_.Unicode[w.postScriptName];x&&(w.metadata.Unicode={},w.metadata.Unicode.widths=x.widths,w.metadata.Unicode.kerning=x.kerning);var C=g.Unicode[w.postScriptName];C&&(w.metadata.Unicode.encoding=C,w.encoding=C.codePages[0])}])}(Br.API),function(i){var e=function(t){for(var n=t.length,l=new Uint8Array(n),u=0;u<n;u++)l[u]=t.charCodeAt(u);return l};i.API.events.push(["addFont",function(t){var n=void 0,l=t.font,u=t.instance;if(!l.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(n=u.existsFileInVFS(l.postScriptName)===!1?u.loadFile(l.postScriptName):u.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(p,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(jd(o)),p.metadata=i.API.TTFFont.open(o),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(l,n)}}])}(Br),function(i){function e(){return(Nr.canvg?Promise.resolve(Nr.canvg):v1(()=>import("./index.es-ea4c7d4f.js"),[],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Br.API.addSvgAsImage=function(t,n,l,u,p,o,c,g){if(isNaN(n)||isNaN(l))throw ps.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(p))throw ps.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var _=document.createElement("canvas");_.width=u,_.height=p;var v=_.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,_.width,_.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(C){return C.fromString(v,t,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(w)}).then(function(){x.addImage(_.toDataURL("image/jpeg",1),n,l,u,p,c,g)})}}(),Br.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var l=0;l<this.internal.pages[n].length;l++)this.internal.pages[n][l]=this.internal.pages[n][l].replace(e,t);return this},Br.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var n,l,u,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(p),c=[],g=0,_=0,v=0;function w(C,T){var k,M=!1;for(k=0;k<C.length;k+=1)C[k]===T&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var x=o.length;for(v=0;v<x;v+=1)t[o[v]].value=t[o[v]].defaultValue,t[o[v]].explicitSet=!1}if(ns(i)==="object"){for(l in i)if(u=i[l],w(o,l)&&u!==void 0){if(t[l].type==="boolean"&&typeof u=="boolean")t[l].value=u;else if(t[l].type==="name"&&w(t[l].valueSet,u))t[l].value=u;else if(t[l].type==="integer"&&Number.isInteger(u))t[l].value=u;else if(t[l].type==="array"){for(g=0;g<u.length;g+=1)if(n=!0,u[g].length===1&&typeof u[g][0]=="number")c.push(String(u[g]-1));else if(u[g].length>1){for(_=0;_<u[g].length;_+=1)typeof u[g][_]!="number"&&(n=!1);n===!0&&c.push([u[g][0]-1,u[g][1]-1].join(" "))}t[l].value="["+c.join(" ")+"]"}else t[l].value=t[l].defaultValue;t[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,T=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?T.push("/"+C+" /"+t[C].value):T.push("/"+C+" "+t[C].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(n)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),g=u.length+p.length+o.length+l.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(l+u+p+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Br.API),function(i){var e=i.API,t=e.pdfEscape16=function(u,p){for(var o,c=p.metadata.Unicode.widths,g=["","0","00","000","0000"],_=[""],v=0,w=u.length;v<w;++v){if(o=p.metadata.characterToGlyph(u.charCodeAt(v)),p.metadata.glyIdsUsed.push(o),p.metadata.toUnicode[o]=u.charCodeAt(v),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(p.metadata.widthOfGlyph(o),10)])),o=="0")return _.join("");o=o.toString(16),_.push(g[4-o.length],o)}return _.join("")},n=function(u){var p,o,c,g,_,v,w;for(_=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],v=0,w=(o=Object.keys(u).sort(function(x,C){return x-C})).length;v<w;v++)p=o[v],c.length>=100&&(_+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),u[p]!==void 0&&u[p]!==null&&typeof u[p].toString=="function"&&(g=("0000"+u[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),c.push("<"+p+"><"+g+">"));return c.length&&(_+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),_+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(p){var o=p.font,c=p.out,g=p.newObject,_=p.putStream;if(o.metadata instanceof i.API.TTFFont&&o.encoding==="Identity-H"){for(var v=o.metadata.Unicode.widths,w=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),x="",C=0;C<w.length;C++)x+=String.fromCharCode(w[C]);var T=g();_({data:x,addLength1:!0,objectId:T}),c("endobj");var k=g();_({data:n(o.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var M=g();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+O0(o.fontName)),c("/FontFile2 "+T+" 0 R"),c("/FontBBox "+i.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var O=g();c("<<"),c("/Type /Font"),c("/BaseFont /"+O0(o.fontName)),c("/FontDescriptor "+M+" 0 R"),c("/W "+i.API.PDFObject.convert(v)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=g(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+O0(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+O+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(p){var o=p.font,c=p.out,g=p.newObject,_=p.putStream;if(o.metadata instanceof i.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var v=o.metadata.rawData,w="",x=0;x<v.length;x++)w+=String.fromCharCode(v[x]);var C=g();_({data:w,addLength1:!0,objectId:C}),c("endobj");var T=g();_({data:n(o.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var k=g();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+C+" 0 R"),c("/Flags 96"),c("/FontBBox "+i.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+O0(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=g();for(var M=0;M<o.metadata.hmtx.widths.length;M++)o.metadata.hmtx.widths[M]=parseInt(o.metadata.hmtx.widths[M]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+O0(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(u)}]);var l=function(u){var p,o=u.text||"",c=u.x,g=u.y,_=u.options||{},v=u.mutex||{},w=v.pdfEscape,x=v.activeFontKey,C=v.fonts,T=x,k="",M=0,O="",V=C[T].encoding;if(C[T].encoding!=="Identity-H")return{text:o,x:c,y:g,options:_,mutex:v};for(O=o,T=x,Array.isArray(o)&&(O=o[0]),M=0;M<O.length;M+=1)C[T].metadata.hasOwnProperty("cmap")&&(p=C[T].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),p||O[M].charCodeAt(0)<256&&C[T].metadata.hasOwnProperty("Unicode")?k+=O[M]:k+="";var W="";return parseInt(T.slice(1))<14||V==="WinAnsiEncoding"?W=w(k,T).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(W=t(k,C[T])),v.isHex=!0,{text:W,x:c,y:g,options:_,mutex:v}};e.events.push(["postProcessText",function(u){var p=u.text||"",o=[],c={text:p,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(p)){var g=0;for(g=0;g<p.length;g+=1)Array.isArray(p[g])&&p[g].length===3?o.push([l(Object.assign({},c,{text:p[g][0]})).text,p[g][1],p[g][2]]):o.push(l(Object.assign({},c,{text:p[g]})).text);u.text=o}else u.text=l(Object.assign({},c,{text:p})).text}])}(Br),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Br.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var l,u,p,o,c,g,_,v=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,V=0;this.__bidiEngine__={};var W=function(le){var Ee=le.charCodeAt(),me=Ee>>8,Ae=T[me];return Ae!==void 0?v[256*Ae+(255&Ee)]:me===252||me===253?"AL":M.test(me)?"L":me===8?"R":"N"},J=function(le){for(var Ee,me=0;me<le.length;me++){if((Ee=W(le.charAt(me)))==="L")return!1;if(Ee==="R")return!0}return!1},Q=function(le,Ee,me,Ae){var pt,rt,Pt,We,be=Ee[Ae];switch(be){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(be="AN");break;case"AL":O=!0,be="R";break;case"WS":be="N";break;case"CS":Ae<1||Ae+1>=Ee.length||(pt=me[Ae-1])!=="EN"&&pt!=="AN"||(rt=Ee[Ae+1])!=="EN"&&rt!=="AN"?be="N":O&&(rt="AN"),be=rt===pt?rt:"N";break;case"ES":be=(pt=Ae>0?me[Ae-1]:"B")==="EN"&&Ae+1<Ee.length&&Ee[Ae+1]==="EN"?"EN":"N";break;case"ET":if(Ae>0&&me[Ae-1]==="EN"){be="EN";break}if(O){be="N";break}for(Pt=Ae+1,We=Ee.length;Pt<We&&Ee[Pt]==="ET";)Pt++;be=Pt<We&&Ee[Pt]==="EN"?"EN":"N";break;case"NSM":if(p&&!o){for(We=Ee.length,Pt=Ae+1;Pt<We&&Ee[Pt]==="NSM";)Pt++;if(Pt<We){var Le=le[Ae],Ue=Le>=1425&&Le<=2303||Le===64286;if(pt=Ee[Pt],Ue&&(pt==="R"||pt==="AL")){be="R";break}}}be=Ae<1||(pt=Ee[Ae-1])==="B"?"N":me[Ae-1];break;case"B":O=!1,l=!0,be=V;break;case"S":u=!0,be="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":be="N"}return be},Z=function(le,Ee,me){var Ae=le.split("");return me&&ie(Ae,me,{hiLevel:V}),Ae.reverse(),Ee&&Ee.reverse(),Ae.join("")},ie=function(le,Ee,me){var Ae,pt,rt,Pt,We,be=-1,Le=le.length,Ue=0,ce=[],Ie=V?x:w,de=[];for(O=!1,l=!1,u=!1,pt=0;pt<Le;pt++)de[pt]=W(le[pt]);for(rt=0;rt<Le;rt++){if(We=Ue,ce[rt]=Q(le,de,ce,rt),Ae=240&(Ue=Ie[We][C[ce[rt]]]),Ue&=15,Ee[rt]=Pt=Ie[Ue][5],Ae>0)if(Ae===16){for(pt=be;pt<rt;pt++)Ee[pt]=1;be=-1}else be=-1;if(Ie[Ue][6])be===-1&&(be=rt);else if(be>-1){for(pt=be;pt<rt;pt++)Ee[pt]=Pt;be=-1}de[rt]==="B"&&(Ee[rt]=0),me.hiLevel|=Pt}u&&function(ge,Re,Ze){for(var ut=0;ut<Ze;ut++)if(ge[ut]==="S"){Re[ut]=V;for(var Xe=ut-1;Xe>=0&&ge[Xe]==="WS";Xe--)Re[Xe]=V}}(de,Ee,Le)},Se=function(le,Ee,me,Ae,pt){if(!(pt.hiLevel<le)){if(le===1&&V===1&&!l)return Ee.reverse(),void(me&&me.reverse());for(var rt,Pt,We,be,Le=Ee.length,Ue=0;Ue<Le;){if(Ae[Ue]>=le){for(We=Ue+1;We<Le&&Ae[We]>=le;)We++;for(be=Ue,Pt=We-1;be<Pt;be++,Pt--)rt=Ee[be],Ee[be]=Ee[Pt],Ee[Pt]=rt,me&&(rt=me[be],me[be]=me[Pt],me[Pt]=rt);Ue=We}Ue++}}},xe=function(le,Ee,me){var Ae=le.split(""),pt={hiLevel:V};return me||(me=[]),ie(Ae,me,pt),function(rt,Pt,We){if(We.hiLevel!==0&&_)for(var be,Le=0;Le<rt.length;Le++)Pt[Le]===1&&(be=k.indexOf(rt[Le]))>=0&&(rt[Le]=k[be+1])}(Ae,me,pt),Se(2,Ae,Ee,me,pt),Se(1,Ae,Ee,me,pt),Ae.join("")};return this.__bidiEngine__.doBidiReorder=function(le,Ee,me){if(function(pt,rt){if(rt)for(var Pt=0;Pt<pt.length;Pt++)rt[Pt]=Pt;o===void 0&&(o=J(pt)),g===void 0&&(g=J(pt))}(le,Ee),p||!c||g)if(p&&c&&o^g)V=o?1:0,le=Z(le,Ee,me);else if(!p&&c&&g)V=o?1:0,le=xe(le,Ee,me),le=Z(le,Ee);else if(!p||o||c||g){if(p&&!c&&o^g)le=Z(le,Ee),o?(V=0,le=xe(le,Ee,me)):(V=1,le=xe(le,Ee,me),le=Z(le,Ee));else if(p&&o&&!c&&g)V=1,le=xe(le,Ee,me),le=Z(le,Ee);else if(!p&&!c&&o^g){var Ae=_;o?(V=1,le=xe(le,Ee,me),V=0,_=!1,le=xe(le,Ee,me),_=Ae):(V=0,le=xe(le,Ee,me),le=Z(le,Ee),V=1,_=!1,le=xe(le,Ee,me),_=Ae,le=Z(le,Ee))}}else V=0,le=xe(le,Ee,me);else V=o?1:0,le=xe(le,Ee,me);return le},this.__bidiEngine__.setOptions=function(le){le&&(p=le.isInputVisual,c=le.isOutputVisual,o=le.isInputRtl,g=le.isOutputRtl,_=le.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var l=n.text,u=(n.x,n.y,n.options||{}),p=(n.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,t.setOptions(u),Object.prototype.toString.call(l)==="[object Array]"){var o=0;for(p=[],o=0;o<l.length;o+=1)Object.prototype.toString.call(l[o])==="[object Array]"?p.push([t.doBidiReorder(l[o][0]),l[o][1],l[o][2]]):p.push([t.doBidiReorder(l[o])]);n.text=p}else n.text=t.doBidiReorder(l);t.setOptions({isInputVisual:!0})}])}(Br),Br.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new yf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new dk(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new $S(this.contents),this.head=new tk(this),this.name=new sk(this),this.cmap=new rw(this),this.toUnicode={},this.hhea=new ik(this),this.maxp=new ak(this),this.hmtx=new lk(this),this.post=new rk(this),this.os2=new nk(this),this.loca=new fk(this),this.glyf=new uk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,n,l,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var p,o,c,g;for(g=[],p=0,o=(c=this.bbox).length;p<o;p++)e=c[p],g.push(Math.round(e*this.scaleFactor));return g}.call(this),this.stemV=0,this.post.exists?(n=255&(l=this.post.italic_angle),(32768&(t=l>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,n){var l,u,p,o;for(p=0,u=0,o=(e=""+e).length;0<=o?u<o:u>o;u=0<=o?++u:--u)l=e.charCodeAt(u),p+=this.widthOfGlyph(this.characterToGlyph(l))+n*(1e3/t)||0;return p*(t/1e3)},i.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},i}();var Mc,yf=function(){function i(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(e){var t,n,l;for(l=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)l.push(this.writeByte(e.charCodeAt(t)));return l},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,n,l,u,p,o,c;return e=this.readByte(),t=this.readByte(),n=this.readByte(),l=this.readByte(),u=this.readByte(),p=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^l)+16777216*(255^u)+65536*(255^p)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*l+16777216*u+65536*p+256*o+c},i.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},i.prototype.write=function(e){var t,n,l,u;for(u=[],n=0,l=e.length;n<l;n++)t=e[n],u.push(this.writeByte(t));return u},i}(),$S=function(){var i;function e(t){var n,l,u;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},l=0,u=this.tableCount;0<=u?l<u:l>u;l=0<=u?++l:--l)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,l,u,p,o,c,g,_,v,w,x,C,T;for(T in x=Object.keys(t).length,c=Math.log(2),v=16*Math.floor(Math.log(x)/c),p=Math.floor(v/c),_=16*x-v,(l=new yf).writeInt(this.scalarType),l.writeShort(x),l.writeShort(v),l.writeShort(p),l.writeShort(_),u=16*x,g=l.pos+u,o=null,C=[],t)for(w=t[T],l.writeString(T),l.writeInt(i(w)),l.writeInt(g),l.writeInt(w.length),C=C.concat(w),T==="head"&&(o=g),g+=w.length;g%4;)C.push(0),g++;return l.write(C),n=2981146554-i(l.data),l.pos=o+8,l.writeUInt32(n),l.data},i=function(t){var n,l,u,p;for(t=ow.call(t);t.length%4;)t.push(0);for(u=new yf(t),l=0,n=0,p=t.length;n<p;n=n+=4)l+=u.readUInt32();return 4294967295&l},e}(),ek={}.hasOwnProperty,uh=function(i,e){for(var t in e)ek.call(e,t)&&(i[t]=e[t]);function n(){this.constructor=i}return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};Mc=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var tk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new yf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),cv=function(){function i(e,t){var n,l,u,p,o,c,g,_,v,w,x,C,T,k,M,O,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(x=e.readUInt16(),w=x/2,e.pos+=6,u=function(){var W,J;for(J=[],c=W=0;0<=w?W<w:W>w;c=0<=w?++W:--W)J.push(e.readUInt16());return J}(),e.pos+=2,T=function(){var W,J;for(J=[],c=W=0;0<=w?W<w:W>w;c=0<=w?++W:--W)J.push(e.readUInt16());return J}(),g=function(){var W,J;for(J=[],c=W=0;0<=w?W<w:W>w;c=0<=w?++W:--W)J.push(e.readUInt16());return J}(),_=function(){var W,J;for(J=[],c=W=0;0<=w?W<w:W>w;c=0<=w?++W:--W)J.push(e.readUInt16());return J}(),l=(this.length-e.pos+this.offset)/2,o=function(){var W,J;for(J=[],c=W=0;0<=l?W<l:W>l;c=0<=l?++W:--W)J.push(e.readUInt16());return J}(),c=M=0,V=u.length;M<V;c=++M)for(k=u[c],n=O=C=T[c];C<=k?O<=k:O>=k;n=C<=k?++O:--O)_[c]===0?p=n+g[c]:(p=o[_[c]/2+(n-C)-(w-c)]||0)!==0&&(p+=g[c]),this.codeMap[n]=65535&p}e.pos=v}return i.encode=function(e,t){var n,l,u,p,o,c,g,_,v,w,x,C,T,k,M,O,V,W,J,Q,Z,ie,Se,xe,le,Ee,me,Ae,pt,rt,Pt,We,be,Le,Ue,ce,Ie,de,ge,Re,Ze,ut,Xe,$e,Dt,ni;switch(Ae=new yf,p=Object.keys(e).sort(function(mt,At){return mt-At}),t){case"macroman":for(T=0,k=function(){var mt=[];for(C=0;C<256;++C)mt.push(0);return mt}(),O={0:0},u={},pt=0,be=p.length;pt<be;pt++)O[Xe=e[l=p[pt]]]==null&&(O[Xe]=++T),u[l]={old:e[l],new:O[e[l]]},k[l]=O[e[l]];return Ae.writeUInt16(1),Ae.writeUInt16(0),Ae.writeUInt32(12),Ae.writeUInt16(0),Ae.writeUInt16(262),Ae.writeUInt16(0),Ae.write(k),{charMap:u,subtable:Ae.data,maxGlyphID:T+1};case"unicode":for(Ee=[],v=[],V=0,O={},n={},M=g=null,rt=0,Le=p.length;rt<Le;rt++)O[J=e[l=p[rt]]]==null&&(O[J]=++V),n[l]={old:J,new:O[J]},o=O[J]-l,M!=null&&o===g||(M&&v.push(M),Ee.push(l),g=o),M=l;for(M&&v.push(M),v.push(65535),Ee.push(65535),xe=2*(Se=Ee.length),ie=2*Math.pow(Math.log(Se)/Math.LN2,2),w=Math.log(ie/2)/Math.LN2,Z=2*Se-ie,c=[],Q=[],x=[],C=Pt=0,Ue=Ee.length;Pt<Ue;C=++Pt){if(le=Ee[C],_=v[C],le===65535){c.push(0),Q.push(0);break}if(le-(me=n[le].new)>=32768)for(c.push(0),Q.push(2*(x.length+Se-C)),l=We=le;le<=_?We<=_:We>=_;l=le<=_?++We:--We)x.push(n[l].new);else c.push(me-le),Q.push(0)}for(Ae.writeUInt16(3),Ae.writeUInt16(1),Ae.writeUInt32(12),Ae.writeUInt16(4),Ae.writeUInt16(16+8*Se+2*x.length),Ae.writeUInt16(0),Ae.writeUInt16(xe),Ae.writeUInt16(ie),Ae.writeUInt16(w),Ae.writeUInt16(Z),Ze=0,ce=v.length;Ze<ce;Ze++)l=v[Ze],Ae.writeUInt16(l);for(Ae.writeUInt16(0),ut=0,Ie=Ee.length;ut<Ie;ut++)l=Ee[ut],Ae.writeUInt16(l);for($e=0,de=c.length;$e<de;$e++)o=c[$e],Ae.writeUInt16(o);for(Dt=0,ge=Q.length;Dt<ge;Dt++)W=Q[Dt],Ae.writeUInt16(W);for(ni=0,Re=x.length;ni<Re;ni++)T=x[ni],Ae.writeUInt16(T);return{charMap:n,subtable:Ae.data,maxGlyphID:V+1}}},i}(),rw=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,l,u;for(t.pos=this.offset,this.version=t.readUInt16(),u=t.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=u?l<u:l>u;l=0<=u?++l:--l)n=new cv(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var l,u;return n==null&&(n="macroman"),l=cv.encode(t,n),(u=new yf).writeUInt16(0),u.writeUInt16(1),l.table=u.data.concat(l.subtable),l},e}(),ik=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),nk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,l;for(l=[],n=0;n<10;++n)l.push(t.readByte());return l}(),this.charRange=function(){var n,l;for(l=[],n=0;n<4;++n)l.push(t.readInt());return l}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,l;for(l=[],n=0;n<2;n=++n)l.push(t.readInt());return l}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),rk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="post",e.prototype.parse=function(t){var n,l,u;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var p;for(l=t.readUInt16(),this.glyphNameIndex=[],p=0;0<=l?p<l:p>l;p=0<=l?++p:--p)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],u=[];t.pos<this.offset+this.length;)n=t.readByte(),u.push(this.names.push(t.readString(n)));return u;case 151552:return l=t.readUInt16(),this.offsets=t.read(l);case 196608:break;case 262144:return this.map=function(){var o,c,g;for(g=[],p=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;p=0<=c?++o:--o)g.push(t.readUInt32());return g}.call(this)}},e}(),ok=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},sk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="name",e.prototype.parse=function(t){var n,l,u,p,o,c,g,_,v,w,x;for(t.pos=this.offset,t.readShort(),n=t.readShort(),c=t.readShort(),l=[],p=0;0<=n?p<n:p>n;p=0<=n?++p:--p)l.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(g={},p=v=0,w=l.length;v<w;p=++v)u=l[p],t.pos=u.offset,_=t.readString(u.length),o=new ok(_,u),g[x=u.nameID]==null&&(g[x]=[]),g[u.nameID].push(o);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},e}(),ak=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),lk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,l,u,p,o,c,g;for(t.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var _,v;for(v=[],n=_=0;0<=u?_<u:_>u;n=0<=u?++_:--_)v.push(t.readInt16());return v}(),this.widths=function(){var _,v,w,x;for(x=[],_=0,v=(w=this.metrics).length;_<v;_++)p=w[_],x.push(p.advance);return x}.call(this),l=this.widths[this.widths.length-1],g=[],n=o=0;0<=u?o<u:o>u;n=0<=u?++o:--o)g.push(this.widths.push(l));return g},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ow=[].slice,uk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,l,u,p,o,c,g,_,v,w;return t in this.cache?this.cache[t]:(p=this.file.loca,n=this.file.contents,l=p.indexOf(t),(u=p.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+l,o=(c=new yf(n.read(u))).readShort(),_=c.readShort(),w=c.readShort(),g=c.readShort(),v=c.readShort(),this.cache[t]=o===-1?new hk(c,_,w,g,v):new ck(c,o,_,w,g,v),this.cache[t]))},e.prototype.encode=function(t,n,l){var u,p,o,c,g;for(o=[],p=[],c=0,g=n.length;c<g;c++)u=t[n[c]],p.push(o.length),u&&(o=o.concat(u.encode(l)));return p.push(o.length),{table:o,offsets:p}},e}(),ck=function(){function i(e,t,n,l,u,p){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=l,this.xMax=u,this.yMax=p,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),hk=function(){function i(e,t,n,l,u){var p,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=l,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;o=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&o;)p.pos+=1&o?4:2,128&o?p.pos+=8:64&o?p.pos+=4:8&o&&(p.pos+=2)}return i.prototype.encode=function(){var e,t,n;for(t=new yf(ow.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),fk=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return uh(e,Mc),e.prototype.tag="loca",e.prototype.parse=function(t){var n,l;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var u,p;for(p=[],l=0,u=this.length;l<u;l+=2)p.push(2*t.readUInt16());return p}.call(this):function(){var u,p;for(p=[],l=0,u=this.length;l<u;l+=4)p.push(t.readUInt32());return p}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var l=new Uint32Array(this.offsets.length),u=0,p=0,o=0;o<l.length;++o)if(l[o]=u,p<n.length&&n[p]==o){++p,l[o]=u;var c=this.offsets[o],g=this.offsets[o+1]-c;g>0&&(u+=g)}for(var _=new Array(4*l.length),v=0;v<l.length;++v)_[4*v+3]=255&l[v],_[4*v+2]=(65280&l[v])>>8,_[4*v+1]=(16711680&l[v])>>16,_[4*v]=(4278190080&l[v])>>24;return _},e}(),dk=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,n,l,u;for(t in l=this.font.cmap.tables[0].codeMap,e={},u=this.subset)n=u[t],e[t]=l[n];return e},i.prototype.glyphsFor=function(e){var t,n,l,u,p,o,c;for(l={},p=0,o=e.length;p<o;p++)l[u=e[p]]=this.font.glyf.glyphFor(u);for(u in t=[],l)(n=l[u])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(u in c=this.glyphsFor(t))n=c[u],l[u]=n;return l},i.prototype.encode=function(e,t){var n,l,u,p,o,c,g,_,v,w,x,C,T,k,M;for(l in n=rw.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(e),x={0:0},M=n.charMap)x[(c=M[l]).old]=c.new;for(C in w=n.maxGlyphID,p)C in x||(x[C]=w++);return _=function(O){var V,W;for(V in W={},O)W[O[V]]=V;return W}(x),v=Object.keys(_).sort(function(O,V){return O-V}),T=function(){var O,V,W;for(W=[],O=0,V=v.length;O<V;O++)o=v[O],W.push(_[o]);return W}(),u=this.font.glyf.encode(p,T,x),g=this.font.loca.encode(u.offsets,T),k={cmap:this.font.cmap.raw(),glyf:u.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},i}();Br.API.PDFObject=function(){var i;function e(){}return i=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,l,u,p;if(Array.isArray(t))return"["+function(){var o,c,g;for(g=[],o=0,c=t.length;o<c;o++)n=t[o],g.push(e.convert(n));return g}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(l in u=["<<"],t)p=t[l],u.push("/"+l+" "+e.convert(p));return u.push(">>"),u.join(`
`)}return""+t},e}();var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pk(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function mk(i){var e=i.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var l=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return i[n]}})}),t}var sw={exports:{}};(function(i,e){(function(t,n){n()})(F0,function(){function t(g,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function n(g,_,v){var w=new XMLHttpRequest;w.open("GET",g),w.responseType="blob",w.onload=function(){c(w.response,_,v)},w.onerror=function(){console.error("could not download file")},w.send()}function l(g){var _=new XMLHttpRequest;_.open("HEAD",g,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function u(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(_)}}var p=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof F0=="object"&&F0.global===F0?F0:void 0,o=p.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=p.saveAs||(typeof window!="object"||window!==p?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(g,_,v){var w=p.URL||p.webkitURL,x=document.createElement("a");_=_||g.name||"download",x.download=_,x.rel="noopener",typeof g=="string"?(x.href=g,x.origin===location.origin?u(x):l(x.href)?n(g,_,v):u(x,x.target="_blank")):(x.href=w.createObjectURL(g),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){u(x)},0))}:"msSaveOrOpenBlob"in navigator?function(g,_,v){if(_=_||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(t(g,v),_);else if(l(g))n(g,_,v);else{var w=document.createElement("a");w.href=g,w.target="_blank",setTimeout(function(){u(w)})}}:function(g,_,v,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof g=="string")return n(g,_,v);var x=g.type==="application/octet-stream",C=/constructor/i.test(p.HTMLElement)||p.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||x&&C||o)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var V=k.result;V=T?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=V:location=V,w=null},k.readAsDataURL(g)}else{var M=p.URL||p.webkitURL,O=M.createObjectURL(g);w?w.location=O:location.href=O,w=null,setTimeout(function(){M.revokeObjectURL(O)},4e4)}});p.saveAs=c.saveAs=c,i.exports=c})})(sw);var tc={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(F0,function(){var t,n,l;function u(o,c){if(!t)t=c;else if(!n)n=c;else{var g="var sharedChunk = {}; ("+t+")(sharedChunk); ("+n+")(sharedChunk);",_={};t(_),l=c(_),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}u(["exports"],function(o){var c=g;function g(b,f,A,P){this.cx=3*b,this.bx=3*(A-b)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(P-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=b,this.p1y=f,this.p2x=A,this.p2y=P}function _(b,f,A,P){const N=new c(b,f,A,P);return function(q){return N.solve(q)}}g.prototype={sampleCurveX:function(b){return((this.ax*b+this.bx)*b+this.cx)*b},sampleCurveY:function(b){return((this.ay*b+this.by)*b+this.cy)*b},sampleCurveDerivativeX:function(b){return(3*this.ax*b+2*this.bx)*b+this.cx},solveCurveX:function(b,f){if(f===void 0&&(f=1e-6),b<0)return 0;if(b>1)return 1;for(var A=b,P=0;P<8;P++){var N=this.sampleCurveX(A)-b;if(Math.abs(N)<f)return A;var q=this.sampleCurveDerivativeX(A);if(Math.abs(q)<1e-6)break;A-=N/q}var Y=0,oe=1;for(A=b,P=0;P<20&&(N=this.sampleCurveX(A),!(Math.abs(N-b)<f));P++)b>N?Y=A:oe=A,A=.5*(oe-Y)+Y;return A},solve:function(b,f){return this.sampleCurveY(this.solveCurveX(b,f))}};const v=_(.25,.1,.25,1);function w(b,f,A){return Math.min(A,Math.max(f,b))}function x(b,f,A){const P=A-f,N=((b-f)%P+P)%P+f;return N===f?A:N}function C(b,...f){for(const A of f)for(const P in A)b[P]=A[P];return b}let T=1;function k(b,f){b.forEach(A=>{f[A]&&(f[A]=f[A].bind(f))})}function M(b,f,A){const P={};for(const N in b)P[N]=f.call(A||this,b[N],N,b);return P}function O(b,f,A){const P={};for(const N in b)f.call(A||this,b[N],N,b)&&(P[N]=b[N]);return P}function V(b){return Array.isArray(b)?b.map(V):typeof b=="object"&&b?M(b,V):b}const W={};function J(b){W[b]||(typeof console<"u"&&console.warn(b),W[b]=!0)}function Q(b,f,A){return(A.y-b.y)*(f.x-b.x)>(f.y-b.y)*(A.x-b.x)}function Z(b){let f=0;for(let A,P,N=0,q=b.length,Y=q-1;N<q;Y=N++)A=b[N],P=b[Y],f+=(P.x-A.x)*(A.y+P.y);return f}function ie(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Se(b){const f={};if(b.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,P,N,q)=>{const Y=N||q;return f[P]=!Y||Y.toLowerCase(),""}),f["max-age"]){const A=parseInt(f["max-age"],10);isNaN(A)?delete f["max-age"]:f["max-age"]=A}return f}let xe,le,Ee=null;function me(b){if(Ee==null){const f=b.navigator?b.navigator.userAgent:null;Ee=!!b.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Ee}function Ae(b){return typeof ImageBitmap<"u"&&b instanceof ImageBitmap}const pt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b){const f=requestAnimationFrame(b);return{cancel:()=>cancelAnimationFrame(f)}},getImageData(b,f=0){const A=window.document.createElement("canvas"),P=A.getContext("2d");if(!P)throw new Error("failed to create canvas 2d context");return A.width=b.width,A.height=b.height,P.drawImage(b,0,0,b.width,b.height),P.getImageData(-f,-f,b.width+2*f,b.height+2*f)},resolveURL:b=>(xe||(xe=document.createElement("a")),xe.href=b,xe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(le==null&&(le=matchMedia("(prefers-reduced-motion: reduce)")),le.matches)}};var rt=Pt;function Pt(b,f){this.x=b,this.y=f}Pt.prototype={clone:function(){return new Pt(this.x,this.y)},add:function(b){return this.clone()._add(b)},sub:function(b){return this.clone()._sub(b)},multByPoint:function(b){return this.clone()._multByPoint(b)},divByPoint:function(b){return this.clone()._divByPoint(b)},mult:function(b){return this.clone()._mult(b)},div:function(b){return this.clone()._div(b)},rotate:function(b){return this.clone()._rotate(b)},rotateAround:function(b,f){return this.clone()._rotateAround(b,f)},matMult:function(b){return this.clone()._matMult(b)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.distSqr(b))},distSqr:function(b){var f=b.x-this.x,A=b.y-this.y;return f*f+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(b,f){return Math.atan2(this.x*f-this.y*b,this.x*b+this.y*f)},_matMult:function(b){var f=b[2]*this.x+b[3]*this.y;return this.x=b[0]*this.x+b[1]*this.y,this.y=f,this},_add:function(b){return this.x+=b.x,this.y+=b.y,this},_sub:function(b){return this.x-=b.x,this.y-=b.y,this},_mult:function(b){return this.x*=b,this.y*=b,this},_div:function(b){return this.x/=b,this.y/=b,this},_multByPoint:function(b){return this.x*=b.x,this.y*=b.y,this},_divByPoint:function(b){return this.x/=b.x,this.y/=b.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var b=this.y;return this.y=this.x,this.x=-b,this},_rotate:function(b){var f=Math.cos(b),A=Math.sin(b),P=A*this.x+f*this.y;return this.x=f*this.x-A*this.y,this.y=P,this},_rotateAround:function(b,f){var A=Math.cos(b),P=Math.sin(b),N=f.y+P*(this.x-f.x)+A*(this.y-f.y);return this.x=f.x+A*(this.x-f.x)-P*(this.y-f.y),this.y=N,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Pt.convert=function(b){return b instanceof Pt?b:Array.isArray(b)?new Pt(b[0],b[1]):b};const We={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},be="mapbox-tiles";let Le,Ue,ce=500,Ie=50;function de(){typeof caches>"u"||Le||(Le=caches.open(be))}let ge=1/0;const Re={supported:!1,testSupport:function(b){!Xe&&ut&&($e?Dt(b):Ze=b)}};let Ze,ut,Xe=!1,$e=!1;function Dt(b){const f=b.createTexture();b.bindTexture(b.TEXTURE_2D,f);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,ut),b.isContextLost())return;Re.supported=!0}catch{}b.deleteTexture(f),Xe=!0}typeof document<"u"&&(ut=document.createElement("img"),ut.onload=function(){Ze&&Dt(Ze),Ze=null,$e=!0},ut.onerror=function(){Xe=!0,Ze=null},ut.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ni={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ni);class mt extends Error{constructor(f,A,P,N){super(`AJAXError: ${A} (${f}): ${P}`),this.status=f,this.statusText=A,this.url=P,this.body=N}}const At=ie()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function xt(b,f){const A=new AbortController,P=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,referrer:At(),signal:A.signal});let N=!1,q=!1;return b.type==="json"&&P.headers.set("Accept","application/json"),((Y,oe,fe)=>{if(q)return;const we=Date.now();fetch(P).then(Fe=>Fe.ok?((Ve,nt,lt)=>{(b.type==="arrayBuffer"?Ve.arrayBuffer():b.type==="json"?Ve.json():Ve.text()).then(ht=>{q||(nt&&lt&&function(Gt,Vt,gi){if(de(),!Le)return;const zi={status:Vt.status,statusText:Vt.statusText,headers:new Headers};Vt.headers.forEach((Mi,nn)=>zi.headers.set(nn,Mi));const di=Se(Vt.headers.get("Cache-Control")||"");di["no-store"]||(di["max-age"]&&zi.headers.set("Expires",new Date(gi+1e3*di["max-age"]).toUTCString()),new Date(zi.headers.get("Expires")).getTime()-gi<42e4||function(Mi,nn){if(Ue===void 0)try{new Response(new ReadableStream),Ue=!0}catch{Ue=!1}Ue?nn(Mi.body):Mi.blob().then(nn)}(Vt,Mi=>{const nn=new Response(Mi,zi);de(),Le&&Le.then(tn=>tn.put(function(Wn){const $n=Wn.indexOf("?");return $n<0?Wn:Wn.slice(0,$n)}(Gt.url),nn)).catch(tn=>J(tn.message))}))}(P,nt,lt),N=!0,f(null,ht,Ve.headers.get("Cache-Control"),Ve.headers.get("Expires")))}).catch(ht=>{q||f(new Error(ht.message))})})(Fe,null,we):Fe.blob().then(Ve=>f(new mt(Fe.status,Fe.statusText,b.url,Ve)))).catch(Fe=>{Fe.code!==20&&f(new Error(Fe.message))})})(),{cancel:()=>{q=!0,N||A.abort()}}}const Qe=function(b,f){if(/:\/\//.test(b.url)&&!/^https?:|^file:/.test(b.url)){if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",b,f);if(!ie()){const P=b.url.substring(0,b.url.indexOf("://"));return(We.REGISTERED_PROTOCOLS[P]||xt)(b,f)}}if(!(/^file:/.test(A=b.url)||/^file:/.test(At())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return xt(b,f);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",b,f,void 0,!0)}var A;return function(P,N){const q=new XMLHttpRequest;q.open(P.method||"GET",P.url,!0),P.type==="arrayBuffer"&&(q.responseType="arraybuffer");for(const Y in P.headers)q.setRequestHeader(Y,P.headers[Y]);return P.type==="json"&&(q.responseType="text",q.setRequestHeader("Accept","application/json")),q.withCredentials=P.credentials==="include",q.onerror=()=>{N(new Error(q.statusText))},q.onload=()=>{if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let Y=q.response;if(P.type==="json")try{Y=JSON.parse(q.response)}catch(oe){return N(oe)}N(null,Y,q.getResponseHeader("Cache-Control"),q.getResponseHeader("Expires"))}else{const Y=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});N(new mt(q.status,q.statusText,P.url,Y))}},q.send(P.body),{cancel:()=>q.abort()}}(b,f)},Yt=function(b,f){return Qe(C(b,{type:"arrayBuffer"}),f)};function si(b){const f=window.document.createElement("a");return f.href=b,f.protocol===window.document.location.protocol&&f.host===window.document.location.host}const Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ei,Qt;Ei=[],Qt=0;const Ot=function(b,f){if(Re.supported&&(b.headers||(b.headers={}),b.headers.accept="image/webp,*/*"),Qt>=We.MAX_PARALLEL_IMAGE_REQUESTS){const q={requestParameters:b,callback:f,cancelled:!1,cancel(){this.cancelled=!0}};return Ei.push(q),q}Qt++;let A=!1;const P=()=>{if(!A)for(A=!0,Qt--;Ei.length&&Qt<We.MAX_PARALLEL_IMAGE_REQUESTS;){const q=Ei.shift(),{requestParameters:Y,callback:oe,cancelled:fe}=q;fe||(q.cancel=Ot(Y,oe).cancel)}},N=Yt(b,(q,Y,oe,fe)=>{P(),q?f(q):Y&&function(we,Fe){typeof createImageBitmap=="function"?function(Ve,nt){const lt=new Blob([new Uint8Array(Ve)],{type:"image/png"});createImageBitmap(lt).then(ht=>{nt(null,ht)}).catch(ht=>{nt(new Error(`Could not load image because of ${ht.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(we,Fe):function(Ve,nt){const lt=new Image;lt.onload=()=>{nt(null,lt),URL.revokeObjectURL(lt.src),lt.onload=null,window.requestAnimationFrame(()=>{lt.src=Zt})},lt.onerror=()=>nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ht=new Blob([new Uint8Array(Ve)],{type:"image/png"});lt.src=Ve.byteLength?URL.createObjectURL(ht):Zt}(we,Fe)}(Y,(we,Fe)=>{we!=null?f(we):Fe!=null&&f(null,Fe,{cacheControl:oe,expires:fe})})});return{cancel:()=>{N.cancel(),P()}}};function ai(b,f,A){A[b]&&A[b].indexOf(f)!==-1||(A[b]=A[b]||[],A[b].push(f))}function Ji(b,f,A){if(A&&A[b]){const P=A[b].indexOf(f);P!==-1&&A[b].splice(P,1)}}class Ii{constructor(f,A={}){C(this,A),this.type=f}}class $t extends Ii{constructor(f,A={}){super("error",C({error:f},A))}}class Me{on(f,A){return this._listeners=this._listeners||{},ai(f,A,this._listeners),this}off(f,A){return Ji(f,A,this._listeners),Ji(f,A,this._oneTimeListeners),this}once(f,A){return this._oneTimeListeners=this._oneTimeListeners||{},ai(f,A,this._oneTimeListeners),this}fire(f,A){typeof f=="string"&&(f=new Ii(f,A||{}));const P=f.type;if(this.listens(P)){f.target=this;const N=this._listeners&&this._listeners[P]?this._listeners[P].slice():[];for(const oe of N)oe.call(this,f);const q=this._oneTimeListeners&&this._oneTimeListeners[P]?this._oneTimeListeners[P].slice():[];for(const oe of q)Ji(P,oe,this._oneTimeListeners),oe.call(this,f);const Y=this._eventedParent;Y&&(C(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Y.fire(f))}else f instanceof $t&&console.error(f.error);return this}listens(f){return this._listeners&&this._listeners[f]&&this._listeners[f].length>0||this._oneTimeListeners&&this._oneTimeListeners[f]&&this._oneTimeListeners[f].length>0||this._eventedParent&&this._eventedParent.listens(f)}setEventedParent(f,A){return this._eventedParent=f,this._eventedParentData=A,this}}var ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ae{constructor(f,A,P,N){this.message=(f?`${f}: `:"")+P,N&&(this.identifier=N),A!=null&&A.__line__&&(this.line=A.__line__)}}function et(b){const f=b.value;return f?[new ae(b.key,f,"constants have been deprecated as of v8")]:[]}function bt(b,...f){for(const A of f)for(const P in A)b[P]=A[P];return b}function Xt(b){return b instanceof Number||b instanceof String||b instanceof Boolean?b.valueOf():b}function fi(b){if(Array.isArray(b))return b.map(fi);if(b instanceof Object&&!(b instanceof Number||b instanceof String||b instanceof Boolean)){const f={};for(const A in b)f[A]=fi(b[A]);return f}return Xt(b)}class xn extends Error{constructor(f,A){super(A),this.message=A,this.key=f}}class qn{constructor(f,A=[]){this.parent=f,this.bindings={};for(const[P,N]of A)this.bindings[P]=N}concat(f){return new qn(this,f)}get(f){if(this.bindings[f])return this.bindings[f];if(this.parent)return this.parent.get(f);throw new Error(`${f} not found in scope.`)}has(f){return!!this.bindings[f]||!!this.parent&&this.parent.has(f)}}const bn={kind:"null"},Gi={kind:"number"},an={kind:"string"},Kn={kind:"boolean"},mr={kind:"color"},yo={kind:"object"},ar={kind:"value"},Hr={kind:"collator"},Yn={kind:"formatted"},Ur={kind:"padding"},co={kind:"resolvedImage"};function Jn(b,f){return{kind:"array",itemType:b,N:f}}function br(b){if(b.kind==="array"){const f=br(b.itemType);return typeof b.N=="number"?`array<${f}, ${b.N}>`:b.itemType.kind==="value"?"array":`array<${f}>`}return b.kind}const Eo=[bn,Gi,an,Kn,mr,Yn,yo,Jn(ar),Ur,co];function un(b,f){if(f.kind==="error")return null;if(b.kind==="array"){if(f.kind==="array"&&(f.N===0&&f.itemType.kind==="value"||!un(b.itemType,f.itemType))&&(typeof b.N!="number"||b.N===f.N))return null}else{if(b.kind===f.kind)return null;if(b.kind==="value"){for(const A of Eo)if(!un(A,f))return null}}return`Expected ${br(b)} but found ${br(f)} instead.`}function He(b,f){return f.some(A=>A.kind===b.kind)}function Ho(b,f){return f.some(A=>A==="null"?b===null:A==="array"?Array.isArray(b):A==="object"?b&&!Array.isArray(b)&&typeof b=="object":A===typeof b)}var Do,wo={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pe(b){return(b=Math.round(b))<0?0:b>255?255:b}function Te(b){return Pe(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function qe(b){return(f=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:f>1?1:f;var f}function ft(b,f,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?b+(f-b)*A*6:2*A<1?f:3*A<2?b+(f-b)*(2/3-A)*6:b}try{Do={}.parseCSSColor=function(b){var f,A=b.replace(/ /g,"").toLowerCase();if(A in wo)return wo[A].slice();if(A[0]==="#")return A.length===4?(f=parseInt(A.substr(1),16))>=0&&f<=4095?[(3840&f)>>4|(3840&f)>>8,240&f|(240&f)>>4,15&f|(15&f)<<4,1]:null:A.length===7&&(f=parseInt(A.substr(1),16))>=0&&f<=16777215?[(16711680&f)>>16,(65280&f)>>8,255&f,1]:null;var P=A.indexOf("("),N=A.indexOf(")");if(P!==-1&&N+1===A.length){var q=A.substr(0,P),Y=A.substr(P+1,N-(P+1)).split(","),oe=1;switch(q){case"rgba":if(Y.length!==4)return null;oe=qe(Y.pop());case"rgb":return Y.length!==3?null:[Te(Y[0]),Te(Y[1]),Te(Y[2]),oe];case"hsla":if(Y.length!==4)return null;oe=qe(Y.pop());case"hsl":if(Y.length!==3)return null;var fe=(parseFloat(Y[0])%360+360)%360/360,we=qe(Y[1]),Fe=qe(Y[2]),Ve=Fe<=.5?Fe*(we+1):Fe+we-Fe*we,nt=2*Fe-Ve;return[Pe(255*ft(nt,Ve,fe+1/3)),Pe(255*ft(nt,Ve,fe)),Pe(255*ft(nt,Ve,fe-1/3)),oe];default:return null}}return null}}catch{}class _t{constructor(f,A,P,N=1){this.r=f,this.g=A,this.b=P,this.a=N}static parse(f){if(!f)return;if(f instanceof _t)return f;if(typeof f!="string")return;const A=Do(f);return A?new _t(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[f,A,P,N]=this.toArray();return`rgba(${Math.round(f)},${Math.round(A)},${Math.round(P)},${N})`}toArray(){const{r:f,g:A,b:P,a:N}=this;return N===0?[0,0,0,0]:[255*f/N,255*A/N,255*P/N,N]}}_t.black=new _t(0,0,0,1),_t.white=new _t(1,1,1,1),_t.transparent=new _t(0,0,0,0),_t.red=new _t(1,0,0,1);class Ut{constructor(f,A,P){this.sensitivity=f?A?"variant":"case":A?"accent":"base",this.locale=P,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(f,A){return this.collator.compare(f,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ge{constructor(f,A,P,N,q){this.text=f,this.image=A,this.scale=P,this.fontStack=N,this.textColor=q}}class Ht{constructor(f){this.sections=f}static fromString(f){return new Ht([new Ge(f,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(f=>f.text.length!==0||f.image&&f.image.name.length!==0)}static factory(f){return f instanceof Ht?f:Ht.fromString(f)}toString(){return this.sections.length===0?"":this.sections.map(f=>f.text).join("")}}class zt{constructor(f){this.values=f.slice()}static parse(f){if(f instanceof zt)return f;if(typeof f=="number")return new zt([f,f,f,f]);if(Array.isArray(f)&&!(f.length<1||f.length>4)){for(const A of f)if(typeof A!="number")return;switch(f.length){case 1:f=[f[0],f[0],f[0],f[0]];break;case 2:f=[f[0],f[1],f[0],f[1]];break;case 3:f=[f[0],f[1],f[2],f[1]]}return new zt(f)}}toString(){return JSON.stringify(this.values)}}class ti{constructor(f){this.name=f.name,this.available=f.available}toString(){return this.name}static fromString(f){return f?new ti({name:f,available:!1}):null}}function vt(b,f,A,P){return typeof b=="number"&&b>=0&&b<=255&&typeof f=="number"&&f>=0&&f<=255&&typeof A=="number"&&A>=0&&A<=255?P===void 0||typeof P=="number"&&P>=0&&P<=1?null:`Invalid rgba value [${[b,f,A,P].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof P=="number"?[b,f,A,P]:[b,f,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ji(b){if(b===null||typeof b=="string"||typeof b=="boolean"||typeof b=="number"||b instanceof _t||b instanceof Ut||b instanceof Ht||b instanceof zt||b instanceof ti)return!0;if(Array.isArray(b)){for(const f of b)if(!ji(f))return!1;return!0}if(typeof b=="object"){for(const f in b)if(!ji(b[f]))return!1;return!0}return!1}function Di(b){if(b===null)return bn;if(typeof b=="string")return an;if(typeof b=="boolean")return Kn;if(typeof b=="number")return Gi;if(b instanceof _t)return mr;if(b instanceof Ut)return Hr;if(b instanceof Ht)return Yn;if(b instanceof zt)return Ur;if(b instanceof ti)return co;if(Array.isArray(b)){const f=b.length;let A;for(const P of b){const N=Di(P);if(A){if(A===N)continue;A=ar;break}A=N}return Jn(A||ar,f)}return yo}function In(b){const f=typeof b;return b===null?"":f==="string"||f==="number"||f==="boolean"?String(b):b instanceof _t||b instanceof Ht||b instanceof zt||b instanceof ti?b.toString():JSON.stringify(b)}class kn{constructor(f,A){this.type=f,this.value=A}static parse(f,A){if(f.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${f.length-1} instead.`);if(!ji(f[1]))return A.error("invalid value");const P=f[1];let N=Di(P);const q=A.expectedType;return N.kind!=="array"||N.N!==0||!q||q.kind!=="array"||typeof q.N=="number"&&q.N!==0||(N=q),new kn(N,P)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class St{constructor(f){this.name="ExpressionEvaluationError",this.message=f}toJSON(){return this.message}}const Bn={string:an,number:Gi,boolean:Kn,object:yo};class er{constructor(f,A){this.type=f,this.args=A}static parse(f,A){if(f.length<2)return A.error("Expected at least one argument.");let P,N=1;const q=f[0];if(q==="array"){let oe,fe;if(f.length>2){const we=f[1];if(typeof we!="string"||!(we in Bn)||we==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);oe=Bn[we],N++}else oe=ar;if(f.length>3){if(f[2]!==null&&(typeof f[2]!="number"||f[2]<0||f[2]!==Math.floor(f[2])))return A.error('The length argument to "array" must be a positive integer literal',2);fe=f[2],N++}P=Jn(oe,fe)}else{if(!Bn[q])throw new Error(`Types doesn't contain name = ${q}`);P=Bn[q]}const Y=[];for(;N<f.length;N++){const oe=A.parse(f[N],N,ar);if(!oe)return null;Y.push(oe)}return new er(P,Y)}evaluate(f){for(let A=0;A<this.args.length;A++){const P=this.args[A].evaluate(f);if(!un(this.type,Di(P)))return P;if(A===this.args.length-1)throw new St(`Expected value to be of type ${br(this.type)}, but found ${br(Di(P))} instead.`)}throw new Error}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}const Dr={"to-boolean":Kn,"to-color":mr,"to-number":Gi,"to-string":an};class vr{constructor(f,A){this.type=f,this.args=A}static parse(f,A){if(f.length<2)return A.error("Expected at least one argument.");const P=f[0];if(!Dr[P])throw new Error(`Can't parse ${P} as it is not part of the known types`);if((P==="to-boolean"||P==="to-string")&&f.length!==2)return A.error("Expected one argument.");const N=Dr[P],q=[];for(let Y=1;Y<f.length;Y++){const oe=A.parse(f[Y],Y,ar);if(!oe)return null;q.push(oe)}return new vr(N,q)}evaluate(f){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(f));if(this.type.kind==="color"){let A,P;for(const N of this.args){if(A=N.evaluate(f),P=null,A instanceof _t)return A;if(typeof A=="string"){const q=f.parseColor(A);if(q)return q}else if(Array.isArray(A)&&(P=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:vt(A[0],A[1],A[2],A[3]),!P))return new _t(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new St(P||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const P of this.args){A=P.evaluate(f);const N=zt.parse(A);if(N)return N}throw new St(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const P of this.args){if(A=P.evaluate(f),A===null)return 0;const N=Number(A);if(!isNaN(N))return N}throw new St(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?Ht.fromString(In(this.args[0].evaluate(f))):this.type.kind==="resolvedImage"?ti.fromString(In(this.args[0].evaluate(f))):In(this.args[0].evaluate(f))}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}const Tr=["Unknown","Point","LineString","Polygon"];class zr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(f){let A=this._parseColorCache[f];return A||(A=this._parseColorCache[f]=_t.parse(f)),A}}class po{constructor(f,A,P,N){this.name=f,this.type=A,this._evaluate=P,this.args=N}evaluate(f){return this._evaluate(f,this.args)}eachChild(f){this.args.forEach(f)}outputDefined(){return!1}static parse(f,A){const P=f[0],N=po.definitions[P];if(!N)return A.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0);const q=Array.isArray(N)?N[0]:N.type,Y=Array.isArray(N)?[[N[1],N[2]]]:N.overloads,oe=Y.filter(([we])=>!Array.isArray(we)||we.length===f.length-1);let fe=null;for(const[we,Fe]of oe){fe=new Cl(A.registry,A.path,null,A.scope);const Ve=[];let nt=!1;for(let lt=1;lt<f.length;lt++){const ht=f[lt],Gt=Array.isArray(we)?we[lt-1]:we.type,Vt=fe.parse(ht,1+Ve.length,Gt);if(!Vt){nt=!0;break}Ve.push(Vt)}if(!nt)if(Array.isArray(we)&&we.length!==Ve.length)fe.error(`Expected ${we.length} arguments, but found ${Ve.length} instead.`);else{for(let lt=0;lt<Ve.length;lt++){const ht=Array.isArray(we)?we[lt]:we.type,Gt=Ve[lt];fe.concat(lt+1).checkSubtype(ht,Gt.type)}if(fe.errors.length===0)return new po(P,q,Fe,Ve)}}if(oe.length===1)A.errors.push(...fe.errors);else{const we=(oe.length?oe:Y).map(([Ve])=>{return nt=Ve,Array.isArray(nt)?`(${nt.map(br).join(", ")})`:`(${br(nt.type)}...)`;var nt}).join(" | "),Fe=[];for(let Ve=1;Ve<f.length;Ve++){const nt=A.parse(f[Ve],1+Fe.length);if(!nt)return null;Fe.push(br(nt.type))}A.error(`Expected arguments of type ${we}, but found (${Fe.join(", ")}) instead.`)}return null}static register(f,A){po.definitions=A;for(const P in A)f[P]=po}}class ts{constructor(f,A,P){this.type=Hr,this.locale=P,this.caseSensitive=f,this.diacriticSensitive=A}static parse(f,A){if(f.length!==2)return A.error("Expected one argument.");const P=f[1];if(typeof P!="object"||Array.isArray(P))return A.error("Collator options argument must be an object.");const N=A.parse(P["case-sensitive"]!==void 0&&P["case-sensitive"],1,Kn);if(!N)return null;const q=A.parse(P["diacritic-sensitive"]!==void 0&&P["diacritic-sensitive"],1,Kn);if(!q)return null;let Y=null;return P.locale&&(Y=A.parse(P.locale,1,an),!Y)?null:new ts(N,q,Y)}evaluate(f){return new Ut(this.caseSensitive.evaluate(f),this.diacriticSensitive.evaluate(f),this.locale?this.locale.evaluate(f):null)}eachChild(f){f(this.caseSensitive),f(this.diacriticSensitive),this.locale&&f(this.locale)}outputDefined(){return!1}}const _o=8192;function is(b,f){b[0]=Math.min(b[0],f[0]),b[1]=Math.min(b[1],f[1]),b[2]=Math.max(b[2],f[0]),b[3]=Math.max(b[3],f[1])}function al(b,f){return!(b[0]<=f[0]||b[2]>=f[2]||b[1]<=f[1]||b[3]>=f[3])}function Ro(b,f){const A=(180+b[0])/360,P=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+b[1]*Math.PI/360)))/360,N=Math.pow(2,f.z);return[Math.round(A*N*_o),Math.round(P*N*_o)]}function Ft(b,f,A){const P=b[0]-f[0],N=b[1]-f[1],q=b[0]-A[0],Y=b[1]-A[1];return P*Y-q*N==0&&P*q<=0&&N*Y<=0}function tr(b,f){let A=!1;for(let Y=0,oe=f.length;Y<oe;Y++){const fe=f[Y];for(let we=0,Fe=fe.length;we<Fe-1;we++){if(Ft(b,fe[we],fe[we+1]))return!1;(N=fe[we])[1]>(P=b)[1]!=(q=fe[we+1])[1]>P[1]&&P[0]<(q[0]-N[0])*(P[1]-N[1])/(q[1]-N[1])+N[0]&&(A=!A)}}var P,N,q;return A}function ur(b,f){for(let A=0;A<f.length;A++)if(tr(b,f[A]))return!0;return!1}function Or(b,f,A,P){const N=P[0]-A[0],q=P[1]-A[1],Y=(b[0]-A[0])*q-N*(b[1]-A[1]),oe=(f[0]-A[0])*q-N*(f[1]-A[1]);return Y>0&&oe<0||Y<0&&oe>0}function Ko(b,f,A){for(const we of A)for(let Fe=0;Fe<we.length-1;++Fe)if((oe=[(Y=we[Fe+1])[0]-(q=we[Fe])[0],Y[1]-q[1]])[0]*(fe=[(N=f)[0]-(P=b)[0],N[1]-P[1]])[1]-oe[1]*fe[0]!=0&&Or(P,N,q,Y)&&Or(q,Y,P,N))return!0;var P,N,q,Y,oe,fe;return!1}function Bo(b,f){for(let A=0;A<b.length;++A)if(!tr(b[A],f))return!1;for(let A=0;A<b.length-1;++A)if(Ko(b[A],b[A+1],f))return!1;return!0}function La(b,f){for(let A=0;A<f.length;A++)if(Bo(b,f[A]))return!0;return!1}function rs(b,f,A){const P=[];for(let N=0;N<b.length;N++){const q=[];for(let Y=0;Y<b[N].length;Y++){const oe=Ro(b[N][Y],A);is(f,oe),q.push(oe)}P.push(q)}return P}function qs(b,f,A){const P=[];for(let N=0;N<b.length;N++){const q=rs(b[N],f,A);P.push(q)}return P}function xs(b,f,A,P){if(b[0]<A[0]||b[0]>A[2]){const N=.5*P;let q=b[0]-A[0]>N?-P:A[0]-b[0]>N?P:0;q===0&&(q=b[0]-A[2]>N?-P:A[2]-b[0]>N?P:0),b[0]+=q}is(f,b)}function Pa(b,f,A,P){const N=Math.pow(2,P.z)*_o,q=[P.x*_o,P.y*_o],Y=[];for(const oe of b)for(const fe of oe){const we=[fe.x+q[0],fe.y+q[1]];xs(we,f,A,N),Y.push(we)}return Y}function Es(b,f,A,P){const N=Math.pow(2,P.z)*_o,q=[P.x*_o,P.y*_o],Y=[];for(const fe of b){const we=[];for(const Fe of fe){const Ve=[Fe.x+q[0],Fe.y+q[1]];is(f,Ve),we.push(Ve)}Y.push(we)}if(f[2]-f[0]<=N/2){(oe=f)[0]=oe[1]=1/0,oe[2]=oe[3]=-1/0;for(const fe of Y)for(const we of fe)xs(we,f,A,N)}var oe;return Y}class Ks{constructor(f,A){this.type=Kn,this.geojson=f,this.geometries=A}static parse(f,A){if(f.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${f.length-1} instead.`);if(ji(f[1])){const P=f[1];if(P.type==="FeatureCollection")for(let N=0;N<P.features.length;++N){const q=P.features[N].geometry.type;if(q==="Polygon"||q==="MultiPolygon")return new Ks(P,P.features[N].geometry)}else if(P.type==="Feature"){const N=P.geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new Ks(P,P.geometry)}else if(P.type==="Polygon"||P.type==="MultiPolygon")return new Ks(P,P)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(f){if(f.geometry()!=null&&f.canonicalID()!=null){if(f.geometryType()==="Point")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const oe=rs(P.coordinates,q,Y),fe=Pa(A.geometry(),N,q,Y);if(!al(N,q))return!1;for(const we of fe)if(!tr(we,oe))return!1}if(P.type==="MultiPolygon"){const oe=qs(P.coordinates,q,Y),fe=Pa(A.geometry(),N,q,Y);if(!al(N,q))return!1;for(const we of fe)if(!ur(we,oe))return!1}return!0}(f,this.geometries);if(f.geometryType()==="LineString")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const oe=rs(P.coordinates,q,Y),fe=Es(A.geometry(),N,q,Y);if(!al(N,q))return!1;for(const we of fe)if(!Bo(we,oe))return!1}if(P.type==="MultiPolygon"){const oe=qs(P.coordinates,q,Y),fe=Es(A.geometry(),N,q,Y);if(!al(N,q))return!1;for(const we of fe)if(!La(we,oe))return!1}return!0}(f,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Hs(b){if(b instanceof po&&(b.name==="get"&&b.args.length===1||b.name==="feature-state"||b.name==="has"&&b.args.length===1||b.name==="properties"||b.name==="geometry-type"||b.name==="id"||/^filter-/.test(b.name))||b instanceof Ks)return!1;let f=!0;return b.eachChild(A=>{f&&!Hs(A)&&(f=!1)}),f}function Ma(b){if(b instanceof po&&b.name==="feature-state")return!1;let f=!0;return b.eachChild(A=>{f&&!Ma(A)&&(f=!1)}),f}function kl(b,f){if(b instanceof po&&f.indexOf(b.name)>=0)return!1;let A=!0;return b.eachChild(P=>{A&&!kl(P,f)&&(A=!1)}),A}class fu{constructor(f,A){this.type=A.type,this.name=f,this.boundExpression=A}static parse(f,A){if(f.length!==2||typeof f[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const P=f[1];return A.scope.has(P)?new fu(P,A.scope.get(P)):A.error(`Unknown variable "${P}". Make sure "${P}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(f){return this.boundExpression.evaluate(f)}eachChild(){}outputDefined(){return!1}}class Cl{constructor(f,A=[],P,N=new qn,q=[]){this.registry=f,this.path=A,this.key=A.map(Y=>`[${Y}]`).join(""),this.scope=N,this.errors=q,this.expectedType=P}parse(f,A,P,N,q={}){return A?this.concat(A,P,N)._parse(f,q):this._parse(f,q)}_parse(f,A){function P(N,q,Y){return Y==="assert"?new er(q,[N]):Y==="coerce"?new vr(q,[N]):N}if(f!==null&&typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"||(f=["literal",f]),Array.isArray(f)){if(f.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const N=f[0];if(typeof N!="string")return this.error(`Expression name must be a string, but found ${typeof N} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const q=this.registry[N];if(q){let Y=q.parse(f,this);if(!Y)return null;if(this.expectedType){const oe=this.expectedType,fe=Y.type;if(oe.kind!=="string"&&oe.kind!=="number"&&oe.kind!=="boolean"&&oe.kind!=="object"&&oe.kind!=="array"||fe.kind!=="value")if(oe.kind!=="color"&&oe.kind!=="formatted"&&oe.kind!=="resolvedImage"||fe.kind!=="value"&&fe.kind!=="string")if(oe.kind!=="padding"||fe.kind!=="value"&&fe.kind!=="number"&&fe.kind!=="array"){if(this.checkSubtype(oe,fe))return null}else Y=P(Y,oe,A.typeAnnotation||"coerce");else Y=P(Y,oe,A.typeAnnotation||"coerce");else Y=P(Y,oe,A.typeAnnotation||"assert")}if(!(Y instanceof kn)&&Y.type.kind!=="resolvedImage"&&du(Y)){const oe=new zr;try{Y=new kn(Y.type,Y.evaluate(oe))}catch(fe){return this.error(fe.message),null}}return Y}return this.error(`Unknown expression "${N}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(f===void 0?"'undefined' value invalid. Use null instead.":typeof f=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof f} instead.`)}concat(f,A,P){const N=typeof f=="number"?this.path.concat(f):this.path,q=P?this.scope.concat(P):this.scope;return new Cl(this.registry,N,A||null,q,this.errors)}error(f,...A){const P=`${this.key}${A.map(N=>`[${N}]`).join("")}`;this.errors.push(new xn(P,f))}checkSubtype(f,A){const P=un(f,A);return P&&this.error(P),P}}function du(b){if(b instanceof fu)return du(b.boundExpression);if(b instanceof po&&b.name==="error"||b instanceof ts||b instanceof Ks)return!1;const f=b instanceof vr||b instanceof er;let A=!0;return b.eachChild(P=>{A=f?A&&du(P):A&&P instanceof kn}),!!A&&Hs(b)&&kl(b,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function pa(b,f){const A=b.length-1;let P,N,q=0,Y=A,oe=0;for(;q<=Y;)if(oe=Math.floor((q+Y)/2),P=b[oe],N=b[oe+1],P<=f){if(oe===A||f<N)return oe;q=oe+1}else{if(!(P>f))throw new St("Input is not a number.");Y=oe-1}return 0}class ma{constructor(f,A,P){this.type=f,this.input=A,this.labels=[],this.outputs=[];for(const[N,q]of P)this.labels.push(N),this.outputs.push(q)}static parse(f,A){if(f.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if((f.length-1)%2!=0)return A.error("Expected an even number of arguments.");const P=A.parse(f[1],1,Gi);if(!P)return null;const N=[];let q=null;A.expectedType&&A.expectedType.kind!=="value"&&(q=A.expectedType);for(let Y=1;Y<f.length;Y+=2){const oe=Y===1?-1/0:f[Y],fe=f[Y+1],we=Y,Fe=Y+1;if(typeof oe!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',we);if(N.length&&N[N.length-1][0]>=oe)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',we);const Ve=A.parse(fe,Fe,q);if(!Ve)return null;q=q||Ve.type,N.push([oe,Ve])}return new ma(q,P,N)}evaluate(f){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(f);const N=this.input.evaluate(f);if(N<=A[0])return P[0].evaluate(f);const q=A.length;return N>=A[q-1]?P[q-1].evaluate(f):P[pa(A,N)].evaluate(f)}eachChild(f){f(this.input);for(const A of this.outputs)f(A)}outputDefined(){return this.outputs.every(f=>f.outputDefined())}}function Io(b,f,A){return b*(1-A)+f*A}var ll=Object.freeze({__proto__:null,number:Io,color:function(b,f,A){return new _t(Io(b.r,f.r,A),Io(b.g,f.g,A),Io(b.b,f.b,A),Io(b.a,f.a,A))},array:function(b,f,A){return b.map((P,N)=>Io(P,f[N],A))},padding:function(b,f,A){const P=b.values,N=f.values;return new zt([Io(P[0],N[0],A),Io(P[1],N[1],A),Io(P[2],N[2],A),Io(P[3],N[3],A)])}});const U=.95047,$=1.08883,ye=4/29,De=6/29,ot=3*De*De,It=Math.PI/180,Nt=180/Math.PI;function Bt(b){return b>.008856451679035631?Math.pow(b,1/3):b/ot+ye}function yi(b){return b>De?b*b*b:ot*(b-ye)}function pi(b){return 255*(b<=.0031308?12.92*b:1.055*Math.pow(b,1/2.4)-.055)}function mi(b){return(b/=255)<=.04045?b/12.92:Math.pow((b+.055)/1.055,2.4)}function ri(b){const f=mi(b.r),A=mi(b.g),P=mi(b.b),N=Bt((.4124564*f+.3575761*A+.1804375*P)/U),q=Bt((.2126729*f+.7151522*A+.072175*P)/1);return{l:116*q-16,a:500*(N-q),b:200*(q-Bt((.0193339*f+.119192*A+.9503041*P)/$)),alpha:b.a}}function qi(b){let f=(b.l+16)/116,A=isNaN(b.a)?f:f+b.a/500,P=isNaN(b.b)?f:f-b.b/200;return f=1*yi(f),A=U*yi(A),P=$*yi(P),new _t(pi(3.2404542*A-1.5371385*f-.4985314*P),pi(-.969266*A+1.8760108*f+.041556*P),pi(.0556434*A-.2040259*f+1.0572252*P),b.alpha)}function sn(b,f,A){const P=f-b;return b+A*(P>180||P<-180?P-360*Math.round(P/360):P)}const Sn={forward:ri,reverse:qi,interpolate:function(b,f,A){return{l:Io(b.l,f.l,A),a:Io(b.a,f.a,A),b:Io(b.b,f.b,A),alpha:Io(b.alpha,f.alpha,A)}}},dt={forward:function(b){const{l:f,a:A,b:P}=ri(b),N=Math.atan2(P,A)*Nt;return{h:N<0?N+360:N,c:Math.sqrt(A*A+P*P),l:f,alpha:b.a}},reverse:function(b){const f=b.h*It,A=b.c;return qi({l:b.l,a:Math.cos(f)*A,b:Math.sin(f)*A,alpha:b.alpha})},interpolate:function(b,f,A){return{h:sn(b.h,f.h,A),c:Io(b.c,f.c,A),l:Io(b.l,f.l,A),alpha:Io(b.alpha,f.alpha,A)}}};var m=Object.freeze({__proto__:null,lab:Sn,hcl:dt});class Ri{constructor(f,A,P,N,q){this.type=f,this.operator=A,this.interpolation=P,this.input=N,this.labels=[],this.outputs=[];for(const[Y,oe]of q)this.labels.push(Y),this.outputs.push(oe)}static interpolationFactor(f,A,P,N){let q=0;if(f.name==="exponential")q=h(A,f.base,P,N);else if(f.name==="linear")q=h(A,1,P,N);else if(f.name==="cubic-bezier"){const Y=f.controlPoints;q=new c(Y[0],Y[1],Y[2],Y[3]).solve(h(A,1,P,N))}return q}static parse(f,A){let[P,N,q,...Y]=f;if(!Array.isArray(N)||N.length===0)return A.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){const we=N[1];if(typeof we!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:we}}else{if(N[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(N[0])}`,1,0);{const we=N.slice(1);if(we.length!==4||we.some(Fe=>typeof Fe!="number"||Fe<0||Fe>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:we}}}if(f.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if((f.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(q=A.parse(q,2,Gi),!q)return null;const oe=[];let fe=null;P==="interpolate-hcl"||P==="interpolate-lab"?fe=mr:A.expectedType&&A.expectedType.kind!=="value"&&(fe=A.expectedType);for(let we=0;we<Y.length;we+=2){const Fe=Y[we],Ve=Y[we+1],nt=we+3,lt=we+4;if(typeof Fe!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',nt);if(oe.length&&oe[oe.length-1][0]>=Fe)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',nt);const ht=A.parse(Ve,lt,fe);if(!ht)return null;fe=fe||ht.type,oe.push([Fe,ht])}return fe.kind==="number"||fe.kind==="color"||fe.kind==="padding"||fe.kind==="array"&&fe.itemType.kind==="number"&&typeof fe.N=="number"?new Ri(fe,P,N,q,oe):A.error(`Type ${br(fe)} is not interpolatable.`)}evaluate(f){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(f);const N=this.input.evaluate(f);if(N<=A[0])return P[0].evaluate(f);const q=A.length;if(N>=A[q-1])return P[q-1].evaluate(f);const Y=pa(A,N),oe=Ri.interpolationFactor(this.interpolation,N,A[Y],A[Y+1]),fe=P[Y].evaluate(f),we=P[Y+1].evaluate(f);return this.operator==="interpolate"?ll[this.type.kind.toLowerCase()](fe,we,oe):this.operator==="interpolate-hcl"?dt.reverse(dt.interpolate(dt.forward(fe),dt.forward(we),oe)):Sn.reverse(Sn.interpolate(Sn.forward(fe),Sn.forward(we),oe))}eachChild(f){f(this.input);for(const A of this.outputs)f(A)}outputDefined(){return this.outputs.every(f=>f.outputDefined())}}function h(b,f,A,P){const N=P-A,q=b-A;return N===0?0:f===1?q/N:(Math.pow(f,q)-1)/(Math.pow(f,N)-1)}class F{constructor(f,A){this.type=f,this.args=A}static parse(f,A){if(f.length<2)return A.error("Expectected at least one argument.");let P=null;const N=A.expectedType;N&&N.kind!=="value"&&(P=N);const q=[];for(const oe of f.slice(1)){const fe=A.parse(oe,1+q.length,P,void 0,{typeAnnotation:"omit"});if(!fe)return null;P=P||fe.type,q.push(fe)}if(!P)throw new Error("No output type");const Y=N&&q.some(oe=>un(N,oe.type));return new F(Y?ar:P,q)}evaluate(f){let A,P=null,N=0;for(const q of this.args)if(N++,P=q.evaluate(f),P&&P instanceof ti&&!P.available&&(A||(A=P.name),P=null,N===this.args.length&&(P=A)),P!==null)break;return P}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}class dn{constructor(f,A){this.type=A.type,this.bindings=[].concat(f),this.result=A}evaluate(f){return this.result.evaluate(f)}eachChild(f){for(const A of this.bindings)f(A[1]);f(this.result)}static parse(f,A){if(f.length<4)return A.error(`Expected at least 3 arguments, but found ${f.length-1} instead.`);const P=[];for(let q=1;q<f.length-1;q+=2){const Y=f[q];if(typeof Y!="string")return A.error(`Expected string, but found ${typeof Y} instead.`,q);if(/[^a-zA-Z0-9_]/.test(Y))return A.error("Variable names must contain only alphanumeric characters or '_'.",q);const oe=A.parse(f[q+1],q+1);if(!oe)return null;P.push([Y,oe])}const N=A.parse(f[f.length-1],f.length-1,A.expectedType,P);return N?new dn(P,N):null}outputDefined(){return this.result.outputDefined()}}class Zn{constructor(f,A,P){this.type=f,this.index=A,this.input=P}static parse(f,A){if(f.length!==3)return A.error(`Expected 2 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,Gi),N=A.parse(f[2],2,Jn(A.expectedType||ar));return P&&N?new Zn(N.type.itemType,P,N):null}evaluate(f){const A=this.index.evaluate(f),P=this.input.evaluate(f);if(A<0)throw new St(`Array index out of bounds: ${A} < 0.`);if(A>=P.length)throw new St(`Array index out of bounds: ${A} > ${P.length-1}.`);if(A!==Math.floor(A))throw new St(`Array index must be an integer, but found ${A} instead.`);return P[A]}eachChild(f){f(this.index),f(this.input)}outputDefined(){return!1}}class xo{constructor(f,A){this.type=Kn,this.needle=f,this.haystack=A}static parse(f,A){if(f.length!==3)return A.error(`Expected 2 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,ar),N=A.parse(f[2],2,ar);return P&&N?He(P.type,[Kn,an,Gi,bn,ar])?new xo(P,N):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${br(P.type)} instead`):null}evaluate(f){const A=this.needle.evaluate(f),P=this.haystack.evaluate(f);if(!P)return!1;if(!Ho(A,["boolean","string","number","null"]))throw new St(`Expected first argument to be of type boolean, string, number or null, but found ${br(Di(A))} instead.`);if(!Ho(P,["string","array"]))throw new St(`Expected second argument to be of type array or string, but found ${br(Di(P))} instead.`);return P.indexOf(A)>=0}eachChild(f){f(this.needle),f(this.haystack)}outputDefined(){return!0}}class re{constructor(f,A,P){this.type=Gi,this.needle=f,this.haystack=A,this.fromIndex=P}static parse(f,A){if(f.length<=2||f.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,ar),N=A.parse(f[2],2,ar);if(!P||!N)return null;if(!He(P.type,[Kn,an,Gi,bn,ar]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${br(P.type)} instead`);if(f.length===4){const q=A.parse(f[3],3,Gi);return q?new re(P,N,q):null}return new re(P,N)}evaluate(f){const A=this.needle.evaluate(f),P=this.haystack.evaluate(f);if(!Ho(A,["boolean","string","number","null"]))throw new St(`Expected first argument to be of type boolean, string, number or null, but found ${br(Di(A))} instead.`);if(!Ho(P,["string","array"]))throw new St(`Expected second argument to be of type array or string, but found ${br(Di(P))} instead.`);if(this.fromIndex){const N=this.fromIndex.evaluate(f);return P.indexOf(A,N)}return P.indexOf(A)}eachChild(f){f(this.needle),f(this.haystack),this.fromIndex&&f(this.fromIndex)}outputDefined(){return!1}}class Mr{constructor(f,A,P,N,q,Y){this.inputType=f,this.type=A,this.input=P,this.cases=N,this.outputs=q,this.otherwise=Y}static parse(f,A){if(f.length<5)return A.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if(f.length%2!=1)return A.error("Expected an even number of arguments.");let P,N;A.expectedType&&A.expectedType.kind!=="value"&&(N=A.expectedType);const q={},Y=[];for(let we=2;we<f.length-1;we+=2){let Fe=f[we];const Ve=f[we+1];Array.isArray(Fe)||(Fe=[Fe]);const nt=A.concat(we);if(Fe.length===0)return nt.error("Expected at least one branch label.");for(const ht of Fe){if(typeof ht!="number"&&typeof ht!="string")return nt.error("Branch labels must be numbers or strings.");if(typeof ht=="number"&&Math.abs(ht)>Number.MAX_SAFE_INTEGER)return nt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ht=="number"&&Math.floor(ht)!==ht)return nt.error("Numeric branch labels must be integer values.");if(P){if(nt.checkSubtype(P,Di(ht)))return null}else P=Di(ht);if(q[String(ht)]!==void 0)return nt.error("Branch labels must be unique.");q[String(ht)]=Y.length}const lt=A.parse(Ve,we,N);if(!lt)return null;N=N||lt.type,Y.push(lt)}const oe=A.parse(f[1],1,ar);if(!oe)return null;const fe=A.parse(f[f.length-1],f.length-1,N);return fe?oe.type.kind!=="value"&&A.concat(1).checkSubtype(P,oe.type)?null:new Mr(P,N,oe,q,Y,fe):null}evaluate(f){const A=this.input.evaluate(f);return(Di(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(f)}eachChild(f){f(this.input),this.outputs.forEach(f),f(this.otherwise)}outputDefined(){return this.outputs.every(f=>f.outputDefined())&&this.otherwise.outputDefined()}}class ga{constructor(f,A,P){this.type=f,this.branches=A,this.otherwise=P}static parse(f,A){if(f.length<4)return A.error(`Expected at least 3 arguments, but found only ${f.length-1}.`);if(f.length%2!=0)return A.error("Expected an odd number of arguments.");let P;A.expectedType&&A.expectedType.kind!=="value"&&(P=A.expectedType);const N=[];for(let Y=1;Y<f.length-1;Y+=2){const oe=A.parse(f[Y],Y,Kn);if(!oe)return null;const fe=A.parse(f[Y+1],Y+1,P);if(!fe)return null;N.push([oe,fe]),P=P||fe.type}const q=A.parse(f[f.length-1],f.length-1,P);if(!q)return null;if(!P)throw new Error("Can't infer output type");return new ga(P,N,q)}evaluate(f){for(const[A,P]of this.branches)if(A.evaluate(f))return P.evaluate(f);return this.otherwise.evaluate(f)}eachChild(f){for(const[A,P]of this.branches)f(A),f(P);f(this.otherwise)}outputDefined(){return this.branches.every(([f,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class Ga{constructor(f,A,P,N){this.type=f,this.input=A,this.beginIndex=P,this.endIndex=N}static parse(f,A){if(f.length<=2||f.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,ar),N=A.parse(f[2],2,Gi);if(!P||!N)return null;if(!He(P.type,[Jn(ar),an,ar]))return A.error(`Expected first argument to be of type array or string, but found ${br(P.type)} instead`);if(f.length===4){const q=A.parse(f[3],3,Gi);return q?new Ga(P.type,P,N,q):null}return new Ga(P.type,P,N)}evaluate(f){const A=this.input.evaluate(f),P=this.beginIndex.evaluate(f);if(!Ho(A,["string","array"]))throw new St(`Expected first argument to be of type array or string, but found ${br(Di(A))} instead.`);if(this.endIndex){const N=this.endIndex.evaluate(f);return A.slice(P,N)}return A.slice(P)}eachChild(f){f(this.input),f(this.beginIndex),this.endIndex&&f(this.endIndex)}outputDefined(){return!1}}function Oc(b,f){return b==="=="||b==="!="?f.kind==="boolean"||f.kind==="string"||f.kind==="number"||f.kind==="null"||f.kind==="value":f.kind==="string"||f.kind==="number"||f.kind==="value"}function El(b,f,A,P){return P.compare(f,A)===0}function Gs(b,f,A){const P=b!=="=="&&b!=="!=";return class aw{constructor(q,Y,oe){this.type=Kn,this.lhs=q,this.rhs=Y,this.collator=oe,this.hasUntypedArgument=q.type.kind==="value"||Y.type.kind==="value"}static parse(q,Y){if(q.length!==3&&q.length!==4)return Y.error("Expected two or three arguments.");const oe=q[0];let fe=Y.parse(q[1],1,ar);if(!fe)return null;if(!Oc(oe,fe.type))return Y.concat(1).error(`"${oe}" comparisons are not supported for type '${br(fe.type)}'.`);let we=Y.parse(q[2],2,ar);if(!we)return null;if(!Oc(oe,we.type))return Y.concat(2).error(`"${oe}" comparisons are not supported for type '${br(we.type)}'.`);if(fe.type.kind!==we.type.kind&&fe.type.kind!=="value"&&we.type.kind!=="value")return Y.error(`Cannot compare types '${br(fe.type)}' and '${br(we.type)}'.`);P&&(fe.type.kind==="value"&&we.type.kind!=="value"?fe=new er(we.type,[fe]):fe.type.kind!=="value"&&we.type.kind==="value"&&(we=new er(fe.type,[we])));let Fe=null;if(q.length===4){if(fe.type.kind!=="string"&&we.type.kind!=="string"&&fe.type.kind!=="value"&&we.type.kind!=="value")return Y.error("Cannot use collator to compare non-string types.");if(Fe=Y.parse(q[3],3,Hr),!Fe)return null}return new aw(fe,we,Fe)}evaluate(q){const Y=this.lhs.evaluate(q),oe=this.rhs.evaluate(q);if(P&&this.hasUntypedArgument){const fe=Di(Y),we=Di(oe);if(fe.kind!==we.kind||fe.kind!=="string"&&fe.kind!=="number")throw new St(`Expected arguments for "${b}" to be (string, string) or (number, number), but found (${fe.kind}, ${we.kind}) instead.`)}if(this.collator&&!P&&this.hasUntypedArgument){const fe=Di(Y),we=Di(oe);if(fe.kind!=="string"||we.kind!=="string")return f(q,Y,oe)}return this.collator?A(q,Y,oe,this.collator.evaluate(q)):f(q,Y,oe)}eachChild(q){q(this.lhs),q(this.rhs),this.collator&&q(this.collator)}outputDefined(){return!0}}}const ac=Gs("==",function(b,f,A){return f===A},El),pu=Gs("!=",function(b,f,A){return f!==A},function(b,f,A,P){return!El(0,f,A,P)}),hh=Gs("<",function(b,f,A){return f<A},function(b,f,A,P){return P.compare(f,A)<0}),mu=Gs(">",function(b,f,A){return f>A},function(b,f,A,P){return P.compare(f,A)>0}),fh=Gs("<=",function(b,f,A){return f<=A},function(b,f,A,P){return P.compare(f,A)<=0}),zu=Gs(">=",function(b,f,A){return f>=A},function(b,f,A,P){return P.compare(f,A)>=0});class gu{constructor(f,A,P,N,q){this.type=an,this.number=f,this.locale=A,this.currency=P,this.minFractionDigits=N,this.maxFractionDigits=q}static parse(f,A){if(f.length!==3)return A.error("Expected two arguments.");const P=A.parse(f[1],1,Gi);if(!P)return null;const N=f[2];if(typeof N!="object"||Array.isArray(N))return A.error("NumberFormat options argument must be an object.");let q=null;if(N.locale&&(q=A.parse(N.locale,1,an),!q))return null;let Y=null;if(N.currency&&(Y=A.parse(N.currency,1,an),!Y))return null;let oe=null;if(N["min-fraction-digits"]&&(oe=A.parse(N["min-fraction-digits"],1,Gi),!oe))return null;let fe=null;return N["max-fraction-digits"]&&(fe=A.parse(N["max-fraction-digits"],1,Gi),!fe)?null:new gu(P,q,Y,oe,fe)}evaluate(f){return new Intl.NumberFormat(this.locale?this.locale.evaluate(f):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(f):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(f):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(f):void 0}).format(this.number.evaluate(f))}eachChild(f){f(this.number),this.locale&&f(this.locale),this.currency&&f(this.currency),this.minFractionDigits&&f(this.minFractionDigits),this.maxFractionDigits&&f(this.maxFractionDigits)}outputDefined(){return!1}}class yu{constructor(f){this.type=Yn,this.sections=f}static parse(f,A){if(f.length<2)return A.error("Expected at least one argument.");const P=f[1];if(!Array.isArray(P)&&typeof P=="object")return A.error("First argument must be an image or text section.");const N=[];let q=!1;for(let Y=1;Y<=f.length-1;++Y){const oe=f[Y];if(q&&typeof oe=="object"&&!Array.isArray(oe)){q=!1;let fe=null;if(oe["font-scale"]&&(fe=A.parse(oe["font-scale"],1,Gi),!fe))return null;let we=null;if(oe["text-font"]&&(we=A.parse(oe["text-font"],1,Jn(an)),!we))return null;let Fe=null;if(oe["text-color"]&&(Fe=A.parse(oe["text-color"],1,mr),!Fe))return null;const Ve=N[N.length-1];Ve.scale=fe,Ve.font=we,Ve.textColor=Fe}else{const fe=A.parse(f[Y],1,ar);if(!fe)return null;const we=fe.type.kind;if(we!=="string"&&we!=="value"&&we!=="null"&&we!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");q=!0,N.push({content:fe,scale:null,font:null,textColor:null})}}return new yu(N)}evaluate(f){return new Ht(this.sections.map(A=>{const P=A.content.evaluate(f);return Di(P)===co?new Ge("",P,null,null,null):new Ge(In(P),null,A.scale?A.scale.evaluate(f):null,A.font?A.font.evaluate(f).join(","):null,A.textColor?A.textColor.evaluate(f):null)}))}eachChild(f){for(const A of this.sections)f(A.content),A.scale&&f(A.scale),A.font&&f(A.font),A.textColor&&f(A.textColor)}outputDefined(){return!1}}class Wl{constructor(f){this.type=co,this.input=f}static parse(f,A){if(f.length!==2)return A.error("Expected two arguments.");const P=A.parse(f[1],1,an);return P?new Wl(P):A.error("No image name provided.")}evaluate(f){const A=this.input.evaluate(f),P=ti.fromString(A);return P&&f.availableImages&&(P.available=f.availableImages.indexOf(A)>-1),P}eachChild(f){f(this.input)}outputDefined(){return!1}}class _u{constructor(f){this.type=Gi,this.input=f}static parse(f,A){if(f.length!==2)return A.error(`Expected 1 argument, but found ${f.length-1} instead.`);const P=A.parse(f[1],1);return P?P.type.kind!=="array"&&P.type.kind!=="string"&&P.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${br(P.type)} instead.`):new _u(P):null}evaluate(f){const A=this.input.evaluate(f);if(typeof A=="string"||Array.isArray(A))return A.length;throw new St(`Expected value to be of type string or array, but found ${br(Di(A))} instead.`)}eachChild(f){f(this.input)}outputDefined(){return!1}}const Fn={"==":ac,"!=":pu,">":mu,"<":hh,">=":zu,"<=":fh,array:er,at:Zn,boolean:er,case:ga,coalesce:F,collator:ts,format:yu,image:Wl,in:xo,"index-of":re,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:_u,let:dn,literal:kn,match:Mr,number:er,"number-format":gu,object:er,slice:Ga,step:ma,string:er,"to-boolean":vr,"to-color":vr,"to-number":vr,"to-string":vr,var:fu,within:Ks};function Pn(b,[f,A,P,N]){f=f.evaluate(b),A=A.evaluate(b),P=P.evaluate(b);const q=N?N.evaluate(b):1,Y=vt(f,A,P,q);if(Y)throw new St(Y);return new _t(f/255*q,A/255*q,P/255*q,q)}function Nu(b,f){return b in f}function Wa(b,f){const A=f[b];return A===void 0?null:A}function ya(b){return{type:b}}function Xl(b){return{result:"success",value:b}}function _a(b){return{result:"error",value:b}}function Ao(b){return b["property-type"]==="data-driven"||b["property-type"]==="cross-faded-data-driven"}function se(b){return!!b.expression&&b.expression.parameters.indexOf("zoom")>-1}function je(b){return!!b.expression&&b.expression.interpolated}function kt(b){return b instanceof Number?"number":b instanceof String?"string":b instanceof Boolean?"boolean":Array.isArray(b)?"array":b===null?"null":typeof b}function Wt(b){return typeof b=="object"&&b!==null&&!Array.isArray(b)}function li(b){return b}function Yi(b,f){const A=f.type==="color",P=b.stops&&typeof b.stops[0][0]=="object",N=P||!(P||b.property!==void 0),q=b.type||(je(f)?"exponential":"interval");if(A||f.type==="padding"){const we=A?_t.parse:zt.parse;(b=bt({},b)).stops&&(b.stops=b.stops.map(Fe=>[Fe[0],we(Fe[1])])),b.default=we(b.default?b.default:f.default)}if(b.colorSpace&&b.colorSpace!=="rgb"&&!m[b.colorSpace])throw new Error(`Unknown color space: ${b.colorSpace}`);let Y,oe,fe;if(q==="exponential")Y=Fr;else if(q==="interval")Y=wr;else if(q==="categorical"){Y=Xn,oe=Object.create(null);for(const we of b.stops)oe[we[0]]=we[1];fe=typeof b.stops[0][0]}else{if(q!=="identity")throw new Error(`Unknown function type "${q}"`);Y=Gr}if(P){const we={},Fe=[];for(let lt=0;lt<b.stops.length;lt++){const ht=b.stops[lt],Gt=ht[0].zoom;we[Gt]===void 0&&(we[Gt]={zoom:Gt,type:b.type,property:b.property,default:b.default,stops:[]},Fe.push(Gt)),we[Gt].stops.push([ht[0].value,ht[1]])}const Ve=[];for(const lt of Fe)Ve.push([we[lt].zoom,Yi(we[lt],f)]);const nt={name:"linear"};return{kind:"composite",interpolationType:nt,interpolationFactor:Ri.interpolationFactor.bind(void 0,nt),zoomStops:Ve.map(lt=>lt[0]),evaluate:({zoom:lt},ht)=>Fr({stops:Ve,base:b.base},f,lt).evaluate(lt,ht)}}if(N){const we=q==="exponential"?{name:"exponential",base:b.base!==void 0?b.base:1}:null;return{kind:"camera",interpolationType:we,interpolationFactor:Ri.interpolationFactor.bind(void 0,we),zoomStops:b.stops.map(Fe=>Fe[0]),evaluate:({zoom:Fe})=>Y(b,f,Fe,oe,fe)}}return{kind:"source",evaluate(we,Fe){const Ve=Fe&&Fe.properties?Fe.properties[b.property]:void 0;return Ve===void 0?cn(b.default,f.default):Y(b,f,Ve,oe,fe)}}}function cn(b,f,A){return b!==void 0?b:f!==void 0?f:A!==void 0?A:void 0}function Xn(b,f,A,P,N){return cn(typeof A===N?P[A]:void 0,b.default,f.default)}function wr(b,f,A){if(kt(A)!=="number")return cn(b.default,f.default);const P=b.stops.length;if(P===1||A<=b.stops[0][0])return b.stops[0][1];if(A>=b.stops[P-1][0])return b.stops[P-1][1];const N=pa(b.stops.map(q=>q[0]),A);return b.stops[N][1]}function Fr(b,f,A){const P=b.base!==void 0?b.base:1;if(kt(A)!=="number")return cn(b.default,f.default);const N=b.stops.length;if(N===1||A<=b.stops[0][0])return b.stops[0][1];if(A>=b.stops[N-1][0])return b.stops[N-1][1];const q=pa(b.stops.map(Fe=>Fe[0]),A),Y=function(Fe,Ve,nt,lt){const ht=lt-nt,Gt=Fe-nt;return ht===0?0:Ve===1?Gt/ht:(Math.pow(Ve,Gt)-1)/(Math.pow(Ve,ht)-1)}(A,P,b.stops[q][0],b.stops[q+1][0]),oe=b.stops[q][1],fe=b.stops[q+1][1];let we=ll[f.type]||li;if(b.colorSpace&&b.colorSpace!=="rgb"){const Fe=m[b.colorSpace];we=(Ve,nt)=>Fe.reverse(Fe.interpolate(Fe.forward(Ve),Fe.forward(nt),Y))}return typeof oe.evaluate=="function"?{evaluate(...Fe){const Ve=oe.evaluate.apply(void 0,Fe),nt=fe.evaluate.apply(void 0,Fe);if(Ve!==void 0&&nt!==void 0)return we(Ve,nt,Y)}}:we(oe,fe,Y)}function Gr(b,f,A){switch(f.type){case"color":A=_t.parse(A);break;case"formatted":A=Ht.fromString(A.toString());break;case"resolvedImage":A=ti.fromString(A.toString());break;case"padding":A=zt.parse(A);break;default:kt(A)===f.type||f.type==="enum"&&f.values[A]||(A=void 0)}return cn(A,b.default,f.default)}po.register(Fn,{error:[{kind:"error"},[an],(b,[f])=>{throw new St(f.evaluate(b))}],typeof:[an,[ar],(b,[f])=>br(Di(f.evaluate(b)))],"to-rgba":[Jn(Gi,4),[mr],(b,[f])=>f.evaluate(b).toArray()],rgb:[mr,[Gi,Gi,Gi],Pn],rgba:[mr,[Gi,Gi,Gi,Gi],Pn],has:{type:Kn,overloads:[[[an],(b,[f])=>Nu(f.evaluate(b),b.properties())],[[an,yo],(b,[f,A])=>Nu(f.evaluate(b),A.evaluate(b))]]},get:{type:ar,overloads:[[[an],(b,[f])=>Wa(f.evaluate(b),b.properties())],[[an,yo],(b,[f,A])=>Wa(f.evaluate(b),A.evaluate(b))]]},"feature-state":[ar,[an],(b,[f])=>Wa(f.evaluate(b),b.featureState||{})],properties:[yo,[],b=>b.properties()],"geometry-type":[an,[],b=>b.geometryType()],id:[ar,[],b=>b.id()],zoom:[Gi,[],b=>b.globals.zoom],"heatmap-density":[Gi,[],b=>b.globals.heatmapDensity||0],"line-progress":[Gi,[],b=>b.globals.lineProgress||0],accumulated:[ar,[],b=>b.globals.accumulated===void 0?null:b.globals.accumulated],"+":[Gi,ya(Gi),(b,f)=>{let A=0;for(const P of f)A+=P.evaluate(b);return A}],"*":[Gi,ya(Gi),(b,f)=>{let A=1;for(const P of f)A*=P.evaluate(b);return A}],"-":{type:Gi,overloads:[[[Gi,Gi],(b,[f,A])=>f.evaluate(b)-A.evaluate(b)],[[Gi],(b,[f])=>-f.evaluate(b)]]},"/":[Gi,[Gi,Gi],(b,[f,A])=>f.evaluate(b)/A.evaluate(b)],"%":[Gi,[Gi,Gi],(b,[f,A])=>f.evaluate(b)%A.evaluate(b)],ln2:[Gi,[],()=>Math.LN2],pi:[Gi,[],()=>Math.PI],e:[Gi,[],()=>Math.E],"^":[Gi,[Gi,Gi],(b,[f,A])=>Math.pow(f.evaluate(b),A.evaluate(b))],sqrt:[Gi,[Gi],(b,[f])=>Math.sqrt(f.evaluate(b))],log10:[Gi,[Gi],(b,[f])=>Math.log(f.evaluate(b))/Math.LN10],ln:[Gi,[Gi],(b,[f])=>Math.log(f.evaluate(b))],log2:[Gi,[Gi],(b,[f])=>Math.log(f.evaluate(b))/Math.LN2],sin:[Gi,[Gi],(b,[f])=>Math.sin(f.evaluate(b))],cos:[Gi,[Gi],(b,[f])=>Math.cos(f.evaluate(b))],tan:[Gi,[Gi],(b,[f])=>Math.tan(f.evaluate(b))],asin:[Gi,[Gi],(b,[f])=>Math.asin(f.evaluate(b))],acos:[Gi,[Gi],(b,[f])=>Math.acos(f.evaluate(b))],atan:[Gi,[Gi],(b,[f])=>Math.atan(f.evaluate(b))],min:[Gi,ya(Gi),(b,f)=>Math.min(...f.map(A=>A.evaluate(b)))],max:[Gi,ya(Gi),(b,f)=>Math.max(...f.map(A=>A.evaluate(b)))],abs:[Gi,[Gi],(b,[f])=>Math.abs(f.evaluate(b))],round:[Gi,[Gi],(b,[f])=>{const A=f.evaluate(b);return A<0?-Math.round(-A):Math.round(A)}],floor:[Gi,[Gi],(b,[f])=>Math.floor(f.evaluate(b))],ceil:[Gi,[Gi],(b,[f])=>Math.ceil(f.evaluate(b))],"filter-==":[Kn,[an,ar],(b,[f,A])=>b.properties()[f.value]===A.value],"filter-id-==":[Kn,[ar],(b,[f])=>b.id()===f.value],"filter-type-==":[Kn,[an],(b,[f])=>b.geometryType()===f.value],"filter-<":[Kn,[an,ar],(b,[f,A])=>{const P=b.properties()[f.value],N=A.value;return typeof P==typeof N&&P<N}],"filter-id-<":[Kn,[ar],(b,[f])=>{const A=b.id(),P=f.value;return typeof A==typeof P&&A<P}],"filter->":[Kn,[an,ar],(b,[f,A])=>{const P=b.properties()[f.value],N=A.value;return typeof P==typeof N&&P>N}],"filter-id->":[Kn,[ar],(b,[f])=>{const A=b.id(),P=f.value;return typeof A==typeof P&&A>P}],"filter-<=":[Kn,[an,ar],(b,[f,A])=>{const P=b.properties()[f.value],N=A.value;return typeof P==typeof N&&P<=N}],"filter-id-<=":[Kn,[ar],(b,[f])=>{const A=b.id(),P=f.value;return typeof A==typeof P&&A<=P}],"filter->=":[Kn,[an,ar],(b,[f,A])=>{const P=b.properties()[f.value],N=A.value;return typeof P==typeof N&&P>=N}],"filter-id->=":[Kn,[ar],(b,[f])=>{const A=b.id(),P=f.value;return typeof A==typeof P&&A>=P}],"filter-has":[Kn,[ar],(b,[f])=>f.value in b.properties()],"filter-has-id":[Kn,[],b=>b.id()!==null&&b.id()!==void 0],"filter-type-in":[Kn,[Jn(an)],(b,[f])=>f.value.indexOf(b.geometryType())>=0],"filter-id-in":[Kn,[Jn(ar)],(b,[f])=>f.value.indexOf(b.id())>=0],"filter-in-small":[Kn,[an,Jn(ar)],(b,[f,A])=>A.value.indexOf(b.properties()[f.value])>=0],"filter-in-large":[Kn,[an,Jn(ar)],(b,[f,A])=>function(P,N,q,Y){for(;q<=Y;){const oe=q+Y>>1;if(N[oe]===P)return!0;N[oe]>P?Y=oe-1:q=oe+1}return!1}(b.properties()[f.value],A.value,0,A.value.length-1)],all:{type:Kn,overloads:[[[Kn,Kn],(b,[f,A])=>f.evaluate(b)&&A.evaluate(b)],[ya(Kn),(b,f)=>{for(const A of f)if(!A.evaluate(b))return!1;return!0}]]},any:{type:Kn,overloads:[[[Kn,Kn],(b,[f,A])=>f.evaluate(b)||A.evaluate(b)],[ya(Kn),(b,f)=>{for(const A of f)if(A.evaluate(b))return!0;return!1}]]},"!":[Kn,[Kn],(b,[f])=>!f.evaluate(b)],"is-supported-script":[Kn,[an],(b,[f])=>{const A=b.globals&&b.globals.isSupportedScript;return!A||A(f.evaluate(b))}],upcase:[an,[an],(b,[f])=>f.evaluate(b).toUpperCase()],downcase:[an,[an],(b,[f])=>f.evaluate(b).toLowerCase()],concat:[an,ya(ar),(b,f)=>f.map(A=>In(A.evaluate(b))).join("")],"resolved-locale":[an,[Hr],(b,[f])=>f.evaluate(b).resolvedLocale()]});class eo{constructor(f,A){this.expression=f,this._warningHistory={},this._evaluator=new zr,this._defaultValue=A?function(P){return P.type==="color"&&Wt(P.default)?new _t(0,0,0,0):P.type==="color"?_t.parse(P.default)||null:P.type==="padding"?zt.parse(P.default)||null:P.default===void 0?null:P.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(f,A,P,N,q,Y){return this._evaluator.globals=f,this._evaluator.feature=A,this._evaluator.featureState=P,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y,this.expression.evaluate(this._evaluator)}evaluate(f,A,P,N,q,Y){this._evaluator.globals=f,this._evaluator.feature=A||null,this._evaluator.featureState=P||null,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y||null;try{const oe=this.expression.evaluate(this._evaluator);if(oe==null||typeof oe=="number"&&oe!=oe)return this._defaultValue;if(this._enumValues&&!(oe in this._enumValues))throw new St(`Expected value to be one of ${Object.keys(this._enumValues).map(fe=>JSON.stringify(fe)).join(", ")}, but found ${JSON.stringify(oe)} instead.`);return oe}catch(oe){return this._warningHistory[oe.message]||(this._warningHistory[oe.message]=!0,typeof console<"u"&&console.warn(oe.message)),this._defaultValue}}}function zo(b){return Array.isArray(b)&&b.length>0&&typeof b[0]=="string"&&b[0]in Fn}function Go(b,f){const A=new Cl(Fn,[],f?function(N){const q={color:mr,string:an,number:Gi,enum:an,boolean:Kn,formatted:Yn,padding:Ur,resolvedImage:co};return N.type==="array"?Jn(q[N.value]||ar,N.length):q[N.type]}(f):void 0),P=A.parse(b,void 0,void 0,void 0,f&&f.type==="string"?{typeAnnotation:"coerce"}:void 0);return P?Xl(new eo(P,f)):_a(A.errors)}class Yo{constructor(f,A){this.kind=f,this._styleExpression=A,this.isStateDependent=f!=="constant"&&!Ma(A.expression)}evaluateWithoutErrorHandling(f,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(f,A,P,N,q,Y)}evaluate(f,A,P,N,q,Y){return this._styleExpression.evaluate(f,A,P,N,q,Y)}}class Is{constructor(f,A,P,N){this.kind=f,this.zoomStops=P,this._styleExpression=A,this.isStateDependent=f!=="camera"&&!Ma(A.expression),this.interpolationType=N}evaluateWithoutErrorHandling(f,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(f,A,P,N,q,Y)}evaluate(f,A,P,N,q,Y){return this._styleExpression.evaluate(f,A,P,N,q,Y)}interpolationFactor(f,A,P){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,f,A,P):0}}function ms(b,f){const A=Go(b,f);if(A.result==="error")return A;const P=A.value.expression,N=Hs(P);if(!N&&!Ao(f))return _a([new xn("","data expressions not supported")]);const q=kl(P,["zoom"]);if(!q&&!se(f))return _a([new xn("","zoom expressions not supported")]);const Y=Ts(P);return Y||q?Y instanceof xn?_a([Y]):Y instanceof Ri&&!je(f)?_a([new xn("",'"interpolate" expressions cannot be used with this property')]):Xl(Y?new Is(N?"camera":"composite",A.value,Y.labels,Y instanceof Ri?Y.interpolation:void 0):new Yo(N?"constant":"source",A.value)):_a([new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Rr{constructor(f,A){this._parameters=f,this._specification=A,bt(this,Yi(this._parameters,this._specification))}static deserialize(f){return new Rr(f._parameters,f._specification)}static serialize(f){return{_parameters:f._parameters,_specification:f._specification}}}function Ts(b){let f=null;if(b instanceof dn)f=Ts(b.result);else if(b instanceof F){for(const A of b.args)if(f=Ts(A),f)break}else(b instanceof ma||b instanceof Ri)&&b.input instanceof po&&b.input.name==="zoom"&&(f=b);return f instanceof xn||b.eachChild(A=>{const P=Ts(A);P instanceof xn?f=P:!f&&P?f=new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):f&&P&&f!==P&&(f=new xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),f}function As(b){const f=b.key,A=b.value,P=b.valueSpec||{},N=b.objectElementValidators||{},q=b.style,Y=b.styleSpec;let oe=[];const fe=kt(A);if(fe!=="object")return[new ae(f,A,`object expected, ${fe} found`)];for(const we in A){const Fe=we.split(".")[0],Ve=P[Fe]||P["*"];let nt;if(N[Fe])nt=N[Fe];else if(P[Fe])nt=Jo;else if(N["*"])nt=N["*"];else{if(!P["*"]){oe.push(new ae(f,A[we],`unknown property "${we}"`));continue}nt=Jo}oe=oe.concat(nt({key:(f&&`${f}.`)+we,value:A[we],valueSpec:Ve,style:q,styleSpec:Y,object:A,objectKey:we},A))}for(const we in P)N[we]||P[we].required&&P[we].default===void 0&&A[we]===void 0&&oe.push(new ae(f,A,`missing required property "${we}"`));return oe}function Yl(b){const f=b.value,A=b.valueSpec,P=b.style,N=b.styleSpec,q=b.key,Y=b.arrayElementValidator||Jo;if(kt(f)!=="array")return[new ae(q,f,`array expected, ${kt(f)} found`)];if(A.length&&f.length!==A.length)return[new ae(q,f,`array length ${A.length} expected, length ${f.length} found`)];if(A["min-length"]&&f.length<A["min-length"])return[new ae(q,f,`array length at least ${A["min-length"]} expected, length ${f.length} found`)];let oe={type:A.value,values:A.values};N.$version<7&&(oe.function=A.function),kt(A.value)==="object"&&(oe=A.value);let fe=[];for(let we=0;we<f.length;we++)fe=fe.concat(Y({array:f,arrayIndex:we,value:f[we],valueSpec:oe,style:P,styleSpec:N,key:`${q}[${we}]`}));return fe}function Il(b){const f=b.key,A=b.value,P=b.valueSpec;let N=kt(A);return N==="number"&&A!=A&&(N="NaN"),N!=="number"?[new ae(f,A,`number expected, ${N} found`)]:"minimum"in P&&A<P.minimum?[new ae(f,A,`${A} is less than the minimum value ${P.minimum}`)]:"maximum"in P&&A>P.maximum?[new ae(f,A,`${A} is greater than the maximum value ${P.maximum}`)]:[]}function ju(b){const f=b.valueSpec,A=Xt(b.value.type);let P,N,q,Y={};const oe=A!=="categorical"&&b.value.property===void 0,fe=!oe,we=kt(b.value.stops)==="array"&&kt(b.value.stops[0])==="array"&&kt(b.value.stops[0][0])==="object",Fe=As({key:b.key,value:b.value,valueSpec:b.styleSpec.function,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{stops:function(lt){if(A==="identity")return[new ae(lt.key,lt.value,'identity function may not have a "stops" property')];let ht=[];const Gt=lt.value;return ht=ht.concat(Yl({key:lt.key,value:Gt,valueSpec:lt.valueSpec,style:lt.style,styleSpec:lt.styleSpec,arrayElementValidator:Ve})),kt(Gt)==="array"&&Gt.length===0&&ht.push(new ae(lt.key,Gt,"array must have at least one stop")),ht},default:function(lt){return Jo({key:lt.key,value:lt.value,valueSpec:f,style:lt.style,styleSpec:lt.styleSpec})}}});return A==="identity"&&oe&&Fe.push(new ae(b.key,b.value,'missing required property "property"')),A==="identity"||b.value.stops||Fe.push(new ae(b.key,b.value,'missing required property "stops"')),A==="exponential"&&b.valueSpec.expression&&!je(b.valueSpec)&&Fe.push(new ae(b.key,b.value,"exponential functions not supported")),b.styleSpec.$version>=8&&(fe&&!Ao(b.valueSpec)?Fe.push(new ae(b.key,b.value,"property functions not supported")):oe&&!se(b.valueSpec)&&Fe.push(new ae(b.key,b.value,"zoom functions not supported"))),A!=="categorical"&&!we||b.value.property!==void 0||Fe.push(new ae(b.key,b.value,'"property" property is required')),Fe;function Ve(lt){let ht=[];const Gt=lt.value,Vt=lt.key;if(kt(Gt)!=="array")return[new ae(Vt,Gt,`array expected, ${kt(Gt)} found`)];if(Gt.length!==2)return[new ae(Vt,Gt,`array length 2 expected, length ${Gt.length} found`)];if(we){if(kt(Gt[0])!=="object")return[new ae(Vt,Gt,`object expected, ${kt(Gt[0])} found`)];if(Gt[0].zoom===void 0)return[new ae(Vt,Gt,"object stop key must have zoom")];if(Gt[0].value===void 0)return[new ae(Vt,Gt,"object stop key must have value")];if(q&&q>Xt(Gt[0].zoom))return[new ae(Vt,Gt[0].zoom,"stop zoom values must appear in ascending order")];Xt(Gt[0].zoom)!==q&&(q=Xt(Gt[0].zoom),N=void 0,Y={}),ht=ht.concat(As({key:`${Vt}[0]`,value:Gt[0],valueSpec:{zoom:{}},style:lt.style,styleSpec:lt.styleSpec,objectElementValidators:{zoom:Il,value:nt}}))}else ht=ht.concat(nt({key:`${Vt}[0]`,value:Gt[0],valueSpec:{},style:lt.style,styleSpec:lt.styleSpec},Gt));return zo(fi(Gt[1]))?ht.concat([new ae(`${Vt}[1]`,Gt[1],"expressions are not allowed in function stops.")]):ht.concat(Jo({key:`${Vt}[1]`,value:Gt[1],valueSpec:f,style:lt.style,styleSpec:lt.styleSpec}))}function nt(lt,ht){const Gt=kt(lt.value),Vt=Xt(lt.value),gi=lt.value!==null?lt.value:ht;if(P){if(Gt!==P)return[new ae(lt.key,gi,`${Gt} stop domain type must match previous stop domain type ${P}`)]}else P=Gt;if(Gt!=="number"&&Gt!=="string"&&Gt!=="boolean")return[new ae(lt.key,gi,"stop domain value must be a number, string, or boolean")];if(Gt!=="number"&&A!=="categorical"){let zi=`number expected, ${Gt} found`;return Ao(f)&&A===void 0&&(zi+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ae(lt.key,gi,zi)]}return A!=="categorical"||Gt!=="number"||isFinite(Vt)&&Math.floor(Vt)===Vt?A!=="categorical"&&Gt==="number"&&N!==void 0&&Vt<N?[new ae(lt.key,gi,"stop domain values must appear in ascending order")]:(N=Vt,A==="categorical"&&Vt in Y?[new ae(lt.key,gi,"stop domain values must be unique")]:(Y[Vt]=!0,[])):[new ae(lt.key,gi,`integer expected, found ${Vt}`)]}}function Da(b){const f=(b.expressionContext==="property"?ms:Go)(fi(b.value),b.valueSpec);if(f.result==="error")return f.value.map(P=>new ae(`${b.key}${P.key}`,b.value,P.message));const A=f.value.expression||f.value._styleExpression.expression;if(b.expressionContext==="property"&&b.propertyKey==="text-font"&&!A.outputDefined())return[new ae(b.key,b.value,`Invalid data expression for "${b.propertyKey}". Output values must be contained as literals within the expression.`)];if(b.expressionContext==="property"&&b.propertyType==="layout"&&!Ma(A))return[new ae(b.key,b.value,'"feature-state" data expressions are not supported with layout properties.')];if(b.expressionContext==="filter"&&!Ma(A))return[new ae(b.key,b.value,'"feature-state" data expressions are not supported with filters.')];if(b.expressionContext&&b.expressionContext.indexOf("cluster")===0){if(!kl(A,["zoom","feature-state"]))return[new ae(b.key,b.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(b.expressionContext==="cluster-initial"&&!Hs(A))return[new ae(b.key,b.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tl(b){const f=b.key,A=b.value,P=b.valueSpec,N=[];return Array.isArray(P.values)?P.values.indexOf(Xt(A))===-1&&N.push(new ae(f,A,`expected one of [${P.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(P.values).indexOf(Xt(A))===-1&&N.push(new ae(f,A,`expected one of [${Object.keys(P.values).join(", ")}], ${JSON.stringify(A)} found`)),N}function ul(b){if(b===!0||b===!1)return!0;if(!Array.isArray(b)||b.length===0)return!1;switch(b[0]){case"has":return b.length>=2&&b[1]!=="$id"&&b[1]!=="$type";case"in":return b.length>=3&&(typeof b[1]!="string"||Array.isArray(b[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return b.length!==3||Array.isArray(b[1])||Array.isArray(b[2]);case"any":case"all":for(const f of b.slice(1))if(!ul(f)&&typeof f!="boolean")return!1;return!0;default:return!0}}const Uu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Rs(b){if(b==null)return{filter:()=>!0,needGeometry:!1};ul(b)||(b=Xa(b));const f=Go(b,Uu);if(f.result==="error")throw new Error(f.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,P,N)=>f.value.evaluate(A,P,{},N),needGeometry:Zl(b)}}function vu(b,f){return b<f?-1:b>f?1:0}function Zl(b){if(!Array.isArray(b))return!1;if(b[0]==="within")return!0;for(let f=1;f<b.length;f++)if(Zl(b[f]))return!0;return!1}function Xa(b){if(!b)return!0;const f=b[0];return b.length<=1?f!=="any":f==="=="?bu(b[1],b[2],"=="):f==="!="?cl(bu(b[1],b[2],"==")):f==="<"||f===">"||f==="<="||f===">="?bu(b[1],b[2],f):f==="any"?(A=b.slice(1),["any"].concat(A.map(Xa))):f==="all"?["all"].concat(b.slice(1).map(Xa)):f==="none"?["all"].concat(b.slice(1).map(Xa).map(cl)):f==="in"?Bs(b[1],b.slice(2)):f==="!in"?cl(Bs(b[1],b.slice(2))):f==="has"?wu(b[1]):f==="!has"?cl(wu(b[1])):f!=="within"||b;var A}function bu(b,f,A){switch(b){case"$type":return[`filter-type-${A}`,f];case"$id":return[`filter-id-${A}`,f];default:return[`filter-${A}`,b,f]}}function Bs(b,f){if(f.length===0)return!1;switch(b){case"$type":return["filter-type-in",["literal",f]];case"$id":return["filter-id-in",["literal",f]];default:return f.length>200&&!f.some(A=>typeof A!=typeof f[0])?["filter-in-large",b,["literal",f.sort(vu)]]:["filter-in-small",b,["literal",f]]}}function wu(b){switch(b){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",b]}}function cl(b){return["!",b]}function Kl(b){return ul(fi(b.value))?Da(bt({},b,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Oa(b)}function Oa(b){const f=b.value,A=b.key;if(kt(f)!=="array")return[new ae(A,f,`array expected, ${kt(f)} found`)];const P=b.styleSpec;let N,q=[];if(f.length<1)return[new ae(A,f,"filter array must have at least 1 element")];switch(q=q.concat(Tl({key:`${A}[0]`,value:f[0],valueSpec:P.filter_operator,style:b.style,styleSpec:b.styleSpec})),Xt(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&Xt(f[1])==="$type"&&q.push(new ae(A,f,`"$type" cannot be use with operator "${f[0]}"`));case"==":case"!=":f.length!==3&&q.push(new ae(A,f,`filter array for operator "${f[0]}" must have 3 elements`));case"in":case"!in":f.length>=2&&(N=kt(f[1]),N!=="string"&&q.push(new ae(`${A}[1]`,f[1],`string expected, ${N} found`)));for(let Y=2;Y<f.length;Y++)N=kt(f[Y]),Xt(f[1])==="$type"?q=q.concat(Tl({key:`${A}[${Y}]`,value:f[Y],valueSpec:P.geometry_type,style:b.style,styleSpec:b.styleSpec})):N!=="string"&&N!=="number"&&N!=="boolean"&&q.push(new ae(`${A}[${Y}]`,f[Y],`string, number, or boolean expected, ${N} found`));break;case"any":case"all":case"none":for(let Y=1;Y<f.length;Y++)q=q.concat(Oa({key:`${A}[${Y}]`,value:f[Y],style:b.style,styleSpec:b.styleSpec}));break;case"has":case"!has":N=kt(f[1]),f.length!==2?q.push(new ae(A,f,`filter array for "${f[0]}" operator must have 2 elements`)):N!=="string"&&q.push(new ae(`${A}[1]`,f[1],`string expected, ${N} found`));break;case"within":N=kt(f[1]),f.length!==2?q.push(new ae(A,f,`filter array for "${f[0]}" operator must have 2 elements`)):N!=="object"&&q.push(new ae(`${A}[1]`,f[1],`object expected, ${N} found`))}return q}function Ll(b,f){const A=b.key,P=b.style,N=b.styleSpec,q=b.value,Y=b.objectKey,oe=N[`${f}_${b.layerType}`];if(!oe)return[];const fe=Y.match(/^(.*)-transition$/);if(f==="paint"&&fe&&oe[fe[1]]&&oe[fe[1]].transition)return Jo({key:A,value:q,valueSpec:N.transition,style:P,styleSpec:N});const we=b.valueSpec||oe[Y];if(!we)return[new ae(A,q,`unknown property "${Y}"`)];let Fe;if(kt(q)==="string"&&Ao(we)&&!we.tokens&&(Fe=/^{([^}]+)}$/.exec(q)))return[new ae(A,q,`"${Y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Fe[1])} }\`.`)];const Ve=[];return b.layerType==="symbol"&&(Y==="text-field"&&P&&!P.glyphs&&Ve.push(new ae(A,q,'use of "text-field" requires a style "glyphs" property')),Y==="text-font"&&Wt(fi(q))&&Xt(q.type)==="identity"&&Ve.push(new ae(A,q,'"text-font" does not support identity functions'))),Ve.concat(Jo({key:b.key,value:q,valueSpec:we,style:P,styleSpec:N,expressionContext:"property",propertyType:f,propertyKey:Y}))}function Fc(b){return Ll(b,"paint")}function Rc(b){return Ll(b,"layout")}function Pl(b){let f=[];const A=b.value,P=b.key,N=b.style,q=b.styleSpec;A.type||A.ref||f.push(new ae(P,A,'either "type" or "ref" is required'));let Y=Xt(A.type);const oe=Xt(A.ref);if(A.id){const fe=Xt(A.id);for(let we=0;we<b.arrayIndex;we++){const Fe=N.layers[we];Xt(Fe.id)===fe&&f.push(new ae(P,A.id,`duplicate layer id "${A.id}", previously used at line ${Fe.id.__line__}`))}}if("ref"in A){let fe;["type","source","source-layer","filter","layout"].forEach(we=>{we in A&&f.push(new ae(P,A[we],`"${we}" is prohibited for ref layers`))}),N.layers.forEach(we=>{Xt(we.id)===oe&&(fe=we)}),fe?fe.ref?f.push(new ae(P,A.ref,"ref cannot reference another ref layer")):Y=Xt(fe.type):f.push(new ae(P,A.ref,`ref layer "${oe}" not found`))}else if(Y!=="background")if(A.source){const fe=N.sources&&N.sources[A.source],we=fe&&Xt(fe.type);fe?we==="vector"&&Y==="raster"?f.push(new ae(P,A.source,`layer "${A.id}" requires a raster source`)):we==="raster"&&Y!=="raster"?f.push(new ae(P,A.source,`layer "${A.id}" requires a vector source`)):we!=="vector"||A["source-layer"]?we==="raster-dem"&&Y!=="hillshade"?f.push(new ae(P,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):Y!=="line"||!A.paint||!A.paint["line-gradient"]||we==="geojson"&&fe.lineMetrics||f.push(new ae(P,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):f.push(new ae(P,A,`layer "${A.id}" must specify a "source-layer"`)):f.push(new ae(P,A.source,`source "${A.source}" not found`))}else f.push(new ae(P,A,'missing required property "source"'));return f=f.concat(As({key:P,value:A,valueSpec:q.layer,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Jo({key:`${P}.type`,value:A.type,valueSpec:q.layer.type,style:b.style,styleSpec:b.styleSpec,object:A,objectKey:"type"}),filter:Kl,layout:fe=>As({layer:A,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":we=>Rc(bt({layerType:Y},we))}}),paint:fe=>As({layer:A,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":we=>Fc(bt({layerType:Y},we))}})}})),f}function zs(b){const f=b.value,A=b.key,P=kt(f);return P!=="string"?[new ae(A,f,`string expected, ${P} found`)]:[]}const Fa={promoteId:function({key:b,value:f}){if(kt(f)==="string")return zs({key:b,value:f});{const A=[];for(const P in f)A.push(...zs({key:`${b}.${P}`,value:f[P]}));return A}}};function Ra(b){const f=b.value,A=b.key,P=b.styleSpec,N=b.style;if(!f.type)return[new ae(A,f,'"type" is required')];const q=Xt(f.type);let Y;switch(q){case"vector":case"raster":case"raster-dem":return Y=As({key:A,value:f,valueSpec:P[`source_${q.replace("-","_")}`],style:b.style,styleSpec:P,objectElementValidators:Fa}),Y;case"geojson":if(Y=As({key:A,value:f,valueSpec:P.source_geojson,style:N,styleSpec:P,objectElementValidators:Fa}),f.cluster)for(const oe in f.clusterProperties){const[fe,we]=f.clusterProperties[oe],Fe=typeof fe=="string"?[fe,["accumulated"],["get",oe]]:fe;Y.push(...Da({key:`${A}.${oe}.map`,value:we,expressionContext:"cluster-map"})),Y.push(...Da({key:`${A}.${oe}.reduce`,value:Fe,expressionContext:"cluster-reduce"}))}return Y;case"video":return As({key:A,value:f,valueSpec:P.source_video,style:N,styleSpec:P});case"image":return As({key:A,value:f,valueSpec:P.source_image,style:N,styleSpec:P});case"canvas":return[new ae(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tl({key:`${A}.type`,value:f.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:N,styleSpec:P})}}function sa(b){const f=b.value,A=b.styleSpec,P=A.light,N=b.style;let q=[];const Y=kt(f);if(f===void 0)return q;if(Y!=="object")return q=q.concat([new ae("light",f,`object expected, ${Y} found`)]),q;for(const oe in f){const fe=oe.match(/^(.*)-transition$/);q=q.concat(fe&&P[fe[1]]&&P[fe[1]].transition?Jo({key:oe,value:f[oe],valueSpec:A.transition,style:N,styleSpec:A}):P[oe]?Jo({key:oe,value:f[oe],valueSpec:P[oe],style:N,styleSpec:A}):[new ae(oe,f[oe],`unknown property "${oe}"`)])}return q}function hs(b){const f=b.value,A=b.styleSpec,P=A.terrain,N=b.style;let q=[];const Y=kt(f);if(f===void 0)return q;if(Y!=="object")return q=q.concat([new ae("terrain",f,`object expected, ${Y} found`)]),q;for(const oe in f)q=q.concat(P[oe]?Jo({key:oe,value:f[oe],valueSpec:P[oe],style:N,styleSpec:A}):[new ae(oe,f[oe],`unknown property "${oe}"`)]);return q}const hl={"*":()=>[],array:Yl,boolean:function(b){const f=b.value,A=b.key,P=kt(f);return P!=="boolean"?[new ae(A,f,`boolean expected, ${P} found`)]:[]},number:Il,color:function(b){const f=b.key,A=b.value,P=kt(A);return P!=="string"?[new ae(f,A,`color expected, ${P} found`)]:Do(A)===null?[new ae(f,A,`color expected, "${A}" found`)]:[]},constants:et,enum:Tl,filter:Kl,function:ju,layer:Pl,object:As,source:Ra,light:sa,terrain:hs,string:zs,formatted:function(b){return zs(b).length===0?[]:Da(b)},resolvedImage:function(b){return zs(b).length===0?[]:Da(b)},padding:function(b){const f=b.key,A=b.value;if(kt(A)==="array"){if(A.length<1||A.length>4)return[new ae(f,A,`padding requires 1 to 4 values; ${A.length} values found`)];const P={type:"number"};let N=[];for(let q=0;q<A.length;q++)N=N.concat(Jo({key:`${f}[${q}]`,value:A[q],valueSpec:P}));return N}return Il({key:f,value:A,valueSpec:{}})}};function Jo(b){const f=b.value,A=b.valueSpec,P=b.styleSpec;return A.expression&&Wt(Xt(f))?ju(b):A.expression&&zo(fi(f))?Da(b):A.type&&hl[A.type]?hl[A.type](b):As(bt({},b,{valueSpec:A.type?P[A.type]:A}))}function Vu(b){const f=b.value,A=b.key,P=zs(b);return P.length||(f.indexOf("{fontstack}")===-1&&P.push(new ae(A,f,'"glyphs" url must include a "{fontstack}" token')),f.indexOf("{range}")===-1&&P.push(new ae(A,f,'"glyphs" url must include a "{range}" token'))),P}function Ba(b,f=ee){let A=[];return A=A.concat(Jo({key:"",value:b,valueSpec:f.$root,styleSpec:f,style:b,objectElementValidators:{glyphs:Vu,"*":()=>[]}})),b.constants&&(A=A.concat(et({key:"constants",value:b.constants,style:b,styleSpec:f}))),aa(A)}function aa(b){return[].concat(b).sort((f,A)=>f.line-A.line)}function Wr(b){return function(...f){return aa(b.apply(this,f))}}Ba.source=Wr(Ra),Ba.light=Wr(sa),Ba.terrain=Wr(hs),Ba.layer=Wr(Pl),Ba.filter=Wr(Kl),Ba.paintProperty=Wr(Fc),Ba.layoutProperty=Wr(Rc);const va=Ba,Ml=va.light,qu=va.paintProperty,xu=va.layoutProperty;function Ws(b,f){let A=!1;if(f&&f.length)for(const P of f)b.fire(new $t(new Error(P.message))),A=!0;return A}class Dl{constructor(f,A,P){const N=this.cells=[];if(f instanceof ArrayBuffer){this.arrayBuffer=f;const Y=new Int32Array(this.arrayBuffer);f=Y[0],this.d=(A=Y[1])+2*(P=Y[2]);for(let fe=0;fe<this.d*this.d;fe++){const we=Y[3+fe],Fe=Y[3+fe+1];N.push(we===Fe?null:Y.subarray(we,Fe))}const oe=Y[3+N.length+1];this.keys=Y.subarray(Y[3+N.length],oe),this.bboxes=Y.subarray(oe),this.insert=this._insertReadonly}else{this.d=A+2*P;for(let Y=0;Y<this.d*this.d;Y++)N.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=f,this.padding=P,this.scale=A/f,this.uid=0;const q=P/A*f;this.min=-q,this.max=f+q}insert(f,A,P,N,q){this._forEachCell(A,P,N,q,this._insertCell,this.uid++,void 0,void 0),this.keys.push(f),this.bboxes.push(A),this.bboxes.push(P),this.bboxes.push(N),this.bboxes.push(q)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(f,A,P,N,q,Y){this.cells[q].push(Y)}query(f,A,P,N,q){const Y=this.min,oe=this.max;if(f<=Y&&A<=Y&&oe<=P&&oe<=N&&!q)return Array.prototype.slice.call(this.keys);{const fe=[];return this._forEachCell(f,A,P,N,this._queryCell,fe,{},q),fe}}_queryCell(f,A,P,N,q,Y,oe,fe){const we=this.cells[q];if(we!==null){const Fe=this.keys,Ve=this.bboxes;for(let nt=0;nt<we.length;nt++){const lt=we[nt];if(oe[lt]===void 0){const ht=4*lt;(fe?fe(Ve[ht+0],Ve[ht+1],Ve[ht+2],Ve[ht+3]):f<=Ve[ht+2]&&A<=Ve[ht+3]&&P>=Ve[ht+0]&&N>=Ve[ht+1])?(oe[lt]=!0,Y.push(Fe[lt])):oe[lt]=!1}}}}_forEachCell(f,A,P,N,q,Y,oe,fe){const we=this._convertToCellCoord(f),Fe=this._convertToCellCoord(A),Ve=this._convertToCellCoord(P),nt=this._convertToCellCoord(N);for(let lt=we;lt<=Ve;lt++)for(let ht=Fe;ht<=nt;ht++){const Gt=this.d*ht+lt;if((!fe||fe(this._convertFromCellCoord(lt),this._convertFromCellCoord(ht),this._convertFromCellCoord(lt+1),this._convertFromCellCoord(ht+1)))&&q.call(this,f,A,P,N,Gt,Y,oe,fe))return}}_convertFromCellCoord(f){return(f-this.padding)/this.scale}_convertToCellCoord(f){return Math.max(0,Math.min(this.d-1,Math.floor(f*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const f=this.cells,A=3+this.cells.length+1+1;let P=0;for(let Y=0;Y<this.cells.length;Y++)P+=this.cells[Y].length;const N=new Int32Array(A+P+this.keys.length+this.bboxes.length);N[0]=this.extent,N[1]=this.n,N[2]=this.padding;let q=A;for(let Y=0;Y<f.length;Y++){const oe=f[Y];N[3+Y]=q,N.set(oe,q),q+=oe.length}return N[3+f.length]=q,N.set(this.keys,q),q+=this.keys.length,N[3+f.length+1]=q,N.set(this.bboxes,q),q+=this.bboxes.length,N.buffer}static serialize(f,A){const P=f.toArrayBuffer();return A&&A.push(P),{buffer:P}}static deserialize(f){return new Dl(f.buffer)}}const gs={};function Cn(b,f,A={}){if(gs[b])throw new Error(`${b} is already registered.`);Object.defineProperty(f,"_classRegistryKey",{value:b,writeable:!1}),gs[b]={klass:f,omit:A.omit||[],shallow:A.shallow||[]}}Cn("Object",Object),Cn("TransferableGridIndex",Dl),Cn("Color",_t),Cn("Error",Error),Cn("AJAXError",mt),Cn("ResolvedImage",ti),Cn("StylePropertyFunction",Rr),Cn("StyleExpression",eo,{omit:["_evaluator"]}),Cn("ZoomDependentExpression",Is),Cn("ZoomConstantExpression",Yo),Cn("CompoundExpression",po,{omit:["_evaluate"]});for(const b in Fn)Fn[b]._classRegistryKey||Cn(`Expression_${b}`,Fn[b]);function No(b){return b&&typeof ArrayBuffer<"u"&&(b instanceof ArrayBuffer||b.constructor&&b.constructor.name==="ArrayBuffer")}function Vr(b,f){if(b==null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp||b instanceof Blob)return b;if(No(b)||Ae(b))return f&&f.push(b),b;if(ArrayBuffer.isView(b)){const A=b;return f&&f.push(A.buffer),A}if(b instanceof ImageData)return f&&f.push(b.data.buffer),b;if(Array.isArray(b)){const A=[];for(const P of b)A.push(Vr(P,f));return A}if(typeof b=="object"){const A=b.constructor,P=A._classRegistryKey;if(!P)throw new Error("can't serialize object of unregistered class");if(!gs[P])throw new Error(`${P} is not registered.`);const N=A.serialize?A.serialize(b,f):{};if(A.serialize){if(f&&N===f[f.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const q in b){if(!b.hasOwnProperty(q)||gs[P].omit.indexOf(q)>=0)continue;const Y=b[q];N[q]=gs[P].shallow.indexOf(q)>=0?Y:Vr(Y,f)}b instanceof Error&&(N.message=b.message)}if(N.$name)throw new Error("$name property is reserved for worker serialization logic.");return P!=="Object"&&(N.$name=P),N}throw new Error("can't serialize object of type "+typeof b)}function Po(b){if(b==null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp||b instanceof Blob||No(b)||Ae(b)||ArrayBuffer.isView(b)||b instanceof ImageData)return b;if(Array.isArray(b))return b.map(Po);if(typeof b=="object"){const f=b.$name||"Object";if(!gs[f])throw new Error(`can't deserialize unregistered class ${f}`);const{klass:A}=gs[f];if(!A)throw new Error(`can't deserialize unregistered class ${f}`);if(A.deserialize)return A.deserialize(b);const P=Object.create(A.prototype);for(const N of Object.keys(b)){if(N==="$name")continue;const q=b[N];P[N]=gs[f].shallow.indexOf(N)>=0?q:Po(q)}return P}throw new Error("can't deserialize object of type "+typeof b)}class os{constructor(){this.first=!0}update(f,A){const P=Math.floor(f);return this.first?(this.first=!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=f,this.lastFloorZoom=P,!0):(this.lastFloorZoom>P?(this.lastIntegerZoom=P+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=A),f!==this.lastZoom&&(this.lastZoom=f,this.lastFloorZoom=P,!0))}}const mn={"Latin-1 Supplement":b=>b>=128&&b<=255,Arabic:b=>b>=1536&&b<=1791,"Arabic Supplement":b=>b>=1872&&b<=1919,"Arabic Extended-A":b=>b>=2208&&b<=2303,"Hangul Jamo":b=>b>=4352&&b<=4607,"Unified Canadian Aboriginal Syllabics":b=>b>=5120&&b<=5759,Khmer:b=>b>=6016&&b<=6143,"Unified Canadian Aboriginal Syllabics Extended":b=>b>=6320&&b<=6399,"General Punctuation":b=>b>=8192&&b<=8303,"Letterlike Symbols":b=>b>=8448&&b<=8527,"Number Forms":b=>b>=8528&&b<=8591,"Miscellaneous Technical":b=>b>=8960&&b<=9215,"Control Pictures":b=>b>=9216&&b<=9279,"Optical Character Recognition":b=>b>=9280&&b<=9311,"Enclosed Alphanumerics":b=>b>=9312&&b<=9471,"Geometric Shapes":b=>b>=9632&&b<=9727,"Miscellaneous Symbols":b=>b>=9728&&b<=9983,"Miscellaneous Symbols and Arrows":b=>b>=11008&&b<=11263,"CJK Radicals Supplement":b=>b>=11904&&b<=12031,"Kangxi Radicals":b=>b>=12032&&b<=12255,"Ideographic Description Characters":b=>b>=12272&&b<=12287,"CJK Symbols and Punctuation":b=>b>=12288&&b<=12351,Hiragana:b=>b>=12352&&b<=12447,Katakana:b=>b>=12448&&b<=12543,Bopomofo:b=>b>=12544&&b<=12591,"Hangul Compatibility Jamo":b=>b>=12592&&b<=12687,Kanbun:b=>b>=12688&&b<=12703,"Bopomofo Extended":b=>b>=12704&&b<=12735,"CJK Strokes":b=>b>=12736&&b<=12783,"Katakana Phonetic Extensions":b=>b>=12784&&b<=12799,"Enclosed CJK Letters and Months":b=>b>=12800&&b<=13055,"CJK Compatibility":b=>b>=13056&&b<=13311,"CJK Unified Ideographs Extension A":b=>b>=13312&&b<=19903,"Yijing Hexagram Symbols":b=>b>=19904&&b<=19967,"CJK Unified Ideographs":b=>b>=19968&&b<=40959,"Yi Syllables":b=>b>=40960&&b<=42127,"Yi Radicals":b=>b>=42128&&b<=42191,"Hangul Jamo Extended-A":b=>b>=43360&&b<=43391,"Hangul Syllables":b=>b>=44032&&b<=55215,"Hangul Jamo Extended-B":b=>b>=55216&&b<=55295,"Private Use Area":b=>b>=57344&&b<=63743,"CJK Compatibility Ideographs":b=>b>=63744&&b<=64255,"Arabic Presentation Forms-A":b=>b>=64336&&b<=65023,"Vertical Forms":b=>b>=65040&&b<=65055,"CJK Compatibility Forms":b=>b>=65072&&b<=65103,"Small Form Variants":b=>b>=65104&&b<=65135,"Arabic Presentation Forms-B":b=>b>=65136&&b<=65279,"Halfwidth and Fullwidth Forms":b=>b>=65280&&b<=65519};function za(b){for(const f of b)if(Bc(f.charCodeAt(0)))return!0;return!1}function Hu(b){for(const f of b)if(!Gu(f.charCodeAt(0)))return!1;return!0}function Gu(b){return!(mn.Arabic(b)||mn["Arabic Supplement"](b)||mn["Arabic Extended-A"](b)||mn["Arabic Presentation Forms-A"](b)||mn["Arabic Presentation Forms-B"](b))}function Bc(b){return!(b!==746&&b!==747&&(b<4352||!(mn["Bopomofo Extended"](b)||mn.Bopomofo(b)||mn["CJK Compatibility Forms"](b)&&!(b>=65097&&b<=65103)||mn["CJK Compatibility Ideographs"](b)||mn["CJK Compatibility"](b)||mn["CJK Radicals Supplement"](b)||mn["CJK Strokes"](b)||!(!mn["CJK Symbols and Punctuation"](b)||b>=12296&&b<=12305||b>=12308&&b<=12319||b===12336)||mn["CJK Unified Ideographs Extension A"](b)||mn["CJK Unified Ideographs"](b)||mn["Enclosed CJK Letters and Months"](b)||mn["Hangul Compatibility Jamo"](b)||mn["Hangul Jamo Extended-A"](b)||mn["Hangul Jamo Extended-B"](b)||mn["Hangul Jamo"](b)||mn["Hangul Syllables"](b)||mn.Hiragana(b)||mn["Ideographic Description Characters"](b)||mn.Kanbun(b)||mn["Kangxi Radicals"](b)||mn["Katakana Phonetic Extensions"](b)||mn.Katakana(b)&&b!==12540||!(!mn["Halfwidth and Fullwidth Forms"](b)||b===65288||b===65289||b===65293||b>=65306&&b<=65310||b===65339||b===65341||b===65343||b>=65371&&b<=65503||b===65507||b>=65512&&b<=65519)||!(!mn["Small Form Variants"](b)||b>=65112&&b<=65118||b>=65123&&b<=65126)||mn["Unified Canadian Aboriginal Syllabics"](b)||mn["Unified Canadian Aboriginal Syllabics Extended"](b)||mn["Vertical Forms"](b)||mn["Yijing Hexagram Symbols"](b)||mn["Yi Syllables"](b)||mn["Yi Radicals"](b))))}function dh(b){return!(Bc(b)||function(f){return!!(mn["Latin-1 Supplement"](f)&&(f===167||f===169||f===174||f===177||f===188||f===189||f===190||f===215||f===247)||mn["General Punctuation"](f)&&(f===8214||f===8224||f===8225||f===8240||f===8241||f===8251||f===8252||f===8258||f===8263||f===8264||f===8265||f===8273)||mn["Letterlike Symbols"](f)||mn["Number Forms"](f)||mn["Miscellaneous Technical"](f)&&(f>=8960&&f<=8967||f>=8972&&f<=8991||f>=8996&&f<=9e3||f===9003||f>=9085&&f<=9114||f>=9150&&f<=9165||f===9167||f>=9169&&f<=9179||f>=9186&&f<=9215)||mn["Control Pictures"](f)&&f!==9251||mn["Optical Character Recognition"](f)||mn["Enclosed Alphanumerics"](f)||mn["Geometric Shapes"](f)||mn["Miscellaneous Symbols"](f)&&!(f>=9754&&f<=9759)||mn["Miscellaneous Symbols and Arrows"](f)&&(f>=11026&&f<=11055||f>=11088&&f<=11097||f>=11192&&f<=11243)||mn["CJK Symbols and Punctuation"](f)||mn.Katakana(f)||mn["Private Use Area"](f)||mn["CJK Compatibility Forms"](f)||mn["Small Form Variants"](f)||mn["Halfwidth and Fullwidth Forms"](f)||f===8734||f===8756||f===8757||f>=9984&&f<=10087||f>=10102&&f<=10131||f===65532||f===65533)}(b))}function ph(b){return b>=1424&&b<=2303||mn["Arabic Presentation Forms-A"](b)||mn["Arabic Presentation Forms-B"](b)}function Nh(b,f){return!(!f&&ph(b)||b>=2304&&b<=3583||b>=3840&&b<=4255||mn.Khmer(b))}function Ir(b){for(const f of b)if(ph(f.charCodeAt(0)))return!0;return!1}const zc="deferred",lc="loading",Qo="loaded";let Js=null,Zo="unavailable",Ya=null;const uc=function(b){b&&typeof b=="string"&&b.indexOf("NetworkError")>-1&&(Zo="error"),Js&&Js(b)};function Au(){Su.fire(new Ii("pluginStateChange",{pluginStatus:Zo,pluginURL:Ya}))}const Su=new Me,Jl=function(){return Zo},no=function(){if(Zo!==zc||!Ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zo=lc,Au(),Ya&&Yt({url:Ya},b=>{b?uc(b):(Zo=Qo,Au())})},ba={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Zo===Qo||ba.applyArabicShaping!=null,isLoading:()=>Zo===lc,setState(b){if(!ie())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Zo=b.pluginStatus,Ya=b.pluginURL},isParsed(){if(!ie())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ba.applyArabicShaping!=null&&ba.processBidirectionalText!=null&&ba.processStyledBidirectionalText!=null},getPluginURL(){if(!ie())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ya}};class jo{constructor(f,A){this.zoom=f,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new os,this.transition={})}isSupportedScript(f){return function(A,P){for(const N of A)if(!Nh(N.charCodeAt(0),P))return!1;return!0}(f,ba.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const f=this.zoom,A=f-Math.floor(f),P=this.crossFadingFactor();return f>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*A}}}class ku{constructor(f,A){this.property=f,this.value=A,this.expression=function(P,N){if(Wt(P))return new Rr(P,N);if(zo(P)){const q=ms(P,N);if(q.result==="error")throw new Error(q.value.map(Y=>`${Y.key}: ${Y.message}`).join(", "));return q.value}{let q=P;return N.type==="color"&&typeof P=="string"?q=_t.parse(P):N.type!=="padding"||typeof P!="number"&&!Array.isArray(P)||(q=zt.parse(P)),{kind:"constant",evaluate:()=>q}}}(A===void 0?f.specification.default:A,f.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(f,A,P){return this.property.possiblyEvaluate(this,f,A,P)}}class Cu{constructor(f){this.property=f,this.value=new ku(f,void 0)}transitioned(f,A){return new jh(this.property,this.value,A,C({},f.transition,this.transition),f.now)}untransitioned(){return new jh(this.property,this.value,null,{},0)}}class Nc{constructor(f){this._properties=f,this._values=Object.create(f.defaultTransitionablePropertyValues)}getValue(f){return V(this._values[f].value.value)}setValue(f,A){Object.prototype.hasOwnProperty.call(this._values,f)||(this._values[f]=new Cu(this._values[f].property)),this._values[f].value=new ku(this._values[f].property,A===null?void 0:V(A))}getTransition(f){return V(this._values[f].transition)}setTransition(f,A){Object.prototype.hasOwnProperty.call(this._values,f)||(this._values[f]=new Cu(this._values[f].property)),this._values[f].transition=V(A)||void 0}serialize(){const f={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(f[A]=P);const N=this.getTransition(A);N!==void 0&&(f[`${A}-transition`]=N)}return f}transitioned(f,A){const P=new fl(this._properties);for(const N of Object.keys(this._values))P._values[N]=this._values[N].transitioned(f,A._values[N]);return P}untransitioned(){const f=new fl(this._properties);for(const A of Object.keys(this._values))f._values[A]=this._values[A].untransitioned();return f}}class jh{constructor(f,A,P,N,q){this.property=f,this.value=A,this.begin=q+N.delay||0,this.end=this.begin+N.duration||0,f.specification.transition&&(N.delay||N.duration)&&(this.prior=P)}possiblyEvaluate(f,A,P){const N=f.now||0,q=this.value.possiblyEvaluate(f,A,P),Y=this.prior;if(Y){if(N>this.end)return this.prior=null,q;if(this.value.isDataDriven())return this.prior=null,q;if(N<this.begin)return Y.possiblyEvaluate(f,A,P);{const oe=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(Y.possiblyEvaluate(f,A,P),q,function(fe){if(fe<=0)return 0;if(fe>=1)return 1;const we=fe*fe,Fe=we*fe;return 4*(fe<.5?Fe:3*(fe-we)+Fe-.75)}(oe))}}return q}}class fl{constructor(f){this._properties=f,this._values=Object.create(f.defaultTransitioningPropertyValues)}possiblyEvaluate(f,A,P){const N=new cc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(f,A,P);return N}hasTransition(){for(const f of Object.keys(this._values))if(this._values[f].prior)return!0;return!1}}class Uh{constructor(f){this._properties=f,this._values=Object.create(f.defaultPropertyValues)}getValue(f){return V(this._values[f].value)}setValue(f,A){this._values[f]=new ku(this._values[f].property,A===null?void 0:V(A))}serialize(){const f={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(f[A]=P)}return f}possiblyEvaluate(f,A,P){const N=new cc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(f,A,P);return N}}class dl{constructor(f,A,P){this.property=f,this.value=A,this.parameters=P}isConstant(){return this.value.kind==="constant"}constantOr(f){return this.value.kind==="constant"?this.value.value:f}evaluate(f,A,P,N){return this.property.evaluate(this.value,this.parameters,f,A,P,N)}}class cc{constructor(f){this._properties=f,this._values=Object.create(f.defaultPossiblyEvaluatedValues)}get(f){return this._values[f]}}class Qn{constructor(f){this.specification=f}possiblyEvaluate(f,A){if(f.isDataDriven())throw new Error("Value should not be data driven");return f.expression.evaluate(A)}interpolate(f,A,P){const N=ll[this.specification.type];return N?N(f,A,P):f}}class gr{constructor(f,A){this.specification=f,this.overrides=A}possiblyEvaluate(f,A,P,N){return new dl(this,f.expression.kind==="constant"||f.expression.kind==="camera"?{kind:"constant",value:f.expression.evaluate(A,null,{},P,N)}:f.expression,A)}interpolate(f,A,P){if(f.value.kind!=="constant"||A.value.kind!=="constant")return f;if(f.value.value===void 0||A.value.value===void 0)return new dl(this,{kind:"constant",value:void 0},f.parameters);const N=ll[this.specification.type];return N?new dl(this,{kind:"constant",value:N(f.value.value,A.value.value,P)},f.parameters):f}evaluate(f,A,P,N,q,Y){return f.kind==="constant"?f.value:f.evaluate(A,P,N,q,Y)}}class Wu extends gr{possiblyEvaluate(f,A,P,N){if(f.value===void 0)return new dl(this,{kind:"constant",value:void 0},A);if(f.expression.kind==="constant"){const q=f.expression.evaluate(A,null,{},P,N),Y=f.property.specification.type==="resolvedImage"&&typeof q!="string"?q.name:q,oe=this._calculate(Y,Y,Y,A);return new dl(this,{kind:"constant",value:oe},A)}if(f.expression.kind==="camera"){const q=this._calculate(f.expression.evaluate({zoom:A.zoom-1}),f.expression.evaluate({zoom:A.zoom}),f.expression.evaluate({zoom:A.zoom+1}),A);return new dl(this,{kind:"constant",value:q},A)}return new dl(this,f.expression,A)}evaluate(f,A,P,N,q,Y){if(f.kind==="source"){const oe=f.evaluate(A,P,N,q,Y);return this._calculate(oe,oe,oe,A)}return f.kind==="composite"?this._calculate(f.evaluate({zoom:Math.floor(A.zoom)-1},P,N),f.evaluate({zoom:Math.floor(A.zoom)},P,N),f.evaluate({zoom:Math.floor(A.zoom)+1},P,N),A):f.value}_calculate(f,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:f,to:A}:{from:P,to:A}}interpolate(f){return f}}class hc{constructor(f){this.specification=f}possiblyEvaluate(f,A,P,N){if(f.value!==void 0){if(f.expression.kind==="constant"){const q=f.expression.evaluate(A,null,{},P,N);return this._calculate(q,q,q,A)}return this._calculate(f.expression.evaluate(new jo(Math.floor(A.zoom-1),A)),f.expression.evaluate(new jo(Math.floor(A.zoom),A)),f.expression.evaluate(new jo(Math.floor(A.zoom+1),A)),A)}}_calculate(f,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:f,to:A}:{from:P,to:A}}interpolate(f){return f}}class Ss{constructor(f){this.specification=f}possiblyEvaluate(f,A,P,N){return!!f.expression.evaluate(A,null,{},P,N)}interpolate(){return!1}}class Wo{constructor(f){this.properties=f,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in f){const P=f[A];P.specification.overridable&&this.overridableProperties.push(A);const N=this.defaultPropertyValues[A]=new ku(P,void 0),q=this.defaultTransitionablePropertyValues[A]=new Cu(P);this.defaultTransitioningPropertyValues[A]=q.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=N.possiblyEvaluate({})}}}Cn("DataDrivenProperty",gr),Cn("DataConstantProperty",Qn),Cn("CrossFadedDataDrivenProperty",Wu),Cn("CrossFadedProperty",hc),Cn("ColorRampProperty",Ss);const Ql="-transition";class pl extends Me{constructor(f,A){if(super(),this.id=f.id,this.type=f.type,this._featureFilter={filter:()=>!0,needGeometry:!1},f.type!=="custom"&&(this.metadata=f.metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),A.layout&&(this._unevaluatedLayout=new Uh(A.layout)),A.paint)){this._transitionablePaint=new Nc(A.paint);for(const P in f.paint)this.setPaintProperty(P,f.paint[P],{validate:!1});for(const P in f.layout)this.setLayoutProperty(P,f.layout[P],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new cc(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(f){return f==="visibility"?this.visibility:this._unevaluatedLayout.getValue(f)}setLayoutProperty(f,A,P={}){A!=null&&this._validate(xu,`layers.${this.id}.layout.${f}`,f,A,P)||(f!=="visibility"?this._unevaluatedLayout.setValue(f,A):this.visibility=A)}getPaintProperty(f){return f.endsWith(Ql)?this._transitionablePaint.getTransition(f.slice(0,-Ql.length)):this._transitionablePaint.getValue(f)}setPaintProperty(f,A,P={}){if(A!=null&&this._validate(qu,`layers.${this.id}.paint.${f}`,f,A,P))return!1;if(f.endsWith(Ql))return this._transitionablePaint.setTransition(f.slice(0,-Ql.length),A||void 0),!1;{const N=this._transitionablePaint._values[f],q=N.property.specification["property-type"]==="cross-faded-data-driven",Y=N.value.isDataDriven(),oe=N.value;this._transitionablePaint.setValue(f,A),this._handleSpecialPaintPropertyUpdate(f);const fe=this._transitionablePaint._values[f].value;return fe.isDataDriven()||Y||q||this._handleOverridablePaintPropertyUpdate(f,oe,fe)}}_handleSpecialPaintPropertyUpdate(f){}_handleOverridablePaintPropertyUpdate(f,A,P){return!1}isHidden(f){return!!(this.minzoom&&f<this.minzoom)||!!(this.maxzoom&&f>=this.maxzoom)||this.visibility==="none"}updateTransitions(f){this._transitioningPaint=this._transitionablePaint.transitioned(f,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(f,A){f.getCrossfadeParameters&&(this._crossfadeParameters=f.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(f,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(f,void 0,A)}serialize(){const f={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(f.layout=f.layout||{},f.layout.visibility=this.visibility),O(f,(A,P)=>!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length))}_validate(f,A,P,N,q={}){return(!q||q.validate!==!1)&&Ws(this,f.call(va,{key:A,layerType:this.type,objectKey:P,value:N,styleSpec:ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const f in this.paint._values){const A=this.paint.get(f);if(A instanceof dl&&Ao(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const mh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $l{constructor(f,A){this._structArray=f,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ss{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(f,A){return f._trim(),A&&(f.isTransferred=!0,A.push(f.arrayBuffer)),{length:f.length,arrayBuffer:f.arrayBuffer}}static deserialize(f){const A=Object.create(this.prototype);return A.arrayBuffer=f.arrayBuffer,A.length=f.length,A.capacity=f.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(f){this.reserve(f),this.length=f}reserve(f){if(f>this.capacity){this.capacity=Math.max(f,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ys(b,f=1){let A=0,P=0;return{members:b.map(N=>{const q=mh[N.type].BYTES_PER_ELEMENT,Y=A=gh(A,Math.max(f,q)),oe=N.components||1;return P=Math.max(P,q),A+=q*oe,{name:N.name,type:N.type,components:oe,offset:Y}}),size:gh(A,Math.max(P,f)),alignment:f}}function gh(b,f){return Math.ceil(b/f)*f}class la extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A){const P=this.length;return this.resize(P+1),this.emplace(P,f,A)}emplace(f,A,P){const N=2*f;return this.int16[N+0]=A,this.int16[N+1]=P,f}}la.prototype.bytesPerElement=4,Cn("StructArrayLayout2i4",la);class B extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,f,A,P,N)}emplace(f,A,P,N,q){const Y=4*f;return this.int16[Y+0]=A,this.int16[Y+1]=P,this.int16[Y+2]=N,this.int16[Y+3]=q,f}}B.prototype.bytesPerElement=8,Cn("StructArrayLayout4i8",B);class d extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,f,A,P,N,q,Y)}emplace(f,A,P,N,q,Y,oe){const fe=6*f;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.int16[fe+2]=N,this.int16[fe+3]=q,this.int16[fe+4]=Y,this.int16[fe+5]=oe,f}}d.prototype.bytesPerElement=12,Cn("StructArrayLayout2i4i12",d);class I extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,f,A,P,N,q,Y)}emplace(f,A,P,N,q,Y,oe){const fe=4*f,we=8*f;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.uint8[we+4]=N,this.uint8[we+5]=q,this.uint8[we+6]=Y,this.uint8[we+7]=oe,f}}I.prototype.bytesPerElement=8,Cn("StructArrayLayout2i4ub8",I);class D extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A){const P=this.length;return this.resize(P+1),this.emplace(P,f,A)}emplace(f,A,P){const N=2*f;return this.float32[N+0]=A,this.float32[N+1]=P,f}}D.prototype.bytesPerElement=8,Cn("StructArrayLayout2f8",D);class z extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,fe,we,Fe){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,f,A,P,N,q,Y,oe,fe,we,Fe)}emplace(f,A,P,N,q,Y,oe,fe,we,Fe,Ve){const nt=10*f;return this.uint16[nt+0]=A,this.uint16[nt+1]=P,this.uint16[nt+2]=N,this.uint16[nt+3]=q,this.uint16[nt+4]=Y,this.uint16[nt+5]=oe,this.uint16[nt+6]=fe,this.uint16[nt+7]=we,this.uint16[nt+8]=Fe,this.uint16[nt+9]=Ve,f}}z.prototype.bytesPerElement=20,Cn("StructArrayLayout10ui20",z);class X extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt)}emplace(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt){const ht=12*f;return this.int16[ht+0]=A,this.int16[ht+1]=P,this.int16[ht+2]=N,this.int16[ht+3]=q,this.uint16[ht+4]=Y,this.uint16[ht+5]=oe,this.uint16[ht+6]=fe,this.uint16[ht+7]=we,this.int16[ht+8]=Fe,this.int16[ht+9]=Ve,this.int16[ht+10]=nt,this.int16[ht+11]=lt,f}}X.prototype.bytesPerElement=24,Cn("StructArrayLayout4i4ui4i24",X);class ne extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=3*f;return this.float32[q+0]=A,this.float32[q+1]=P,this.float32[q+2]=N,f}}ne.prototype.bytesPerElement=12,Cn("StructArrayLayout3f12",ne);class pe extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(f){const A=this.length;return this.resize(A+1),this.emplace(A,f)}emplace(f,A){return this.uint32[1*f+0]=A,f}}pe.prototype.bytesPerElement=4,Cn("StructArrayLayout1ul4",pe);class _e extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,fe,we){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,f,A,P,N,q,Y,oe,fe,we)}emplace(f,A,P,N,q,Y,oe,fe,we,Fe){const Ve=10*f,nt=5*f;return this.int16[Ve+0]=A,this.int16[Ve+1]=P,this.int16[Ve+2]=N,this.int16[Ve+3]=q,this.int16[Ve+4]=Y,this.int16[Ve+5]=oe,this.uint32[nt+3]=fe,this.uint16[Ve+8]=we,this.uint16[Ve+9]=Fe,f}}_e.prototype.bytesPerElement=20,Cn("StructArrayLayout6i1ul2ui20",_e);class Ce extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,f,A,P,N,q,Y)}emplace(f,A,P,N,q,Y,oe){const fe=6*f;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.int16[fe+2]=N,this.int16[fe+3]=q,this.int16[fe+4]=Y,this.int16[fe+5]=oe,f}}Ce.prototype.bytesPerElement=12,Cn("StructArrayLayout2i2i2i12",Ce);class Be extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,f,A,P,N,q)}emplace(f,A,P,N,q,Y){const oe=4*f,fe=8*f;return this.float32[oe+0]=A,this.float32[oe+1]=P,this.float32[oe+2]=N,this.int16[fe+6]=q,this.int16[fe+7]=Y,f}}Be.prototype.bytesPerElement=16,Cn("StructArrayLayout2f1f2i16",Be);class Je extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,f,A,P,N)}emplace(f,A,P,N,q){const Y=12*f,oe=3*f;return this.uint8[Y+0]=A,this.uint8[Y+1]=P,this.float32[oe+1]=N,this.float32[oe+2]=q,f}}Je.prototype.bytesPerElement=12,Cn("StructArrayLayout2ub2f12",Je);class st extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=3*f;return this.uint16[q+0]=A,this.uint16[q+1]=P,this.uint16[q+2]=N,f}}st.prototype.bytesPerElement=6,Cn("StructArrayLayout3ui6",st);class Mt extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt,Vt,gi){const zi=this.length;return this.resize(zi+1),this.emplace(zi,f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt,Vt,gi)}emplace(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt,Vt,gi,zi){const di=24*f,Mi=12*f,nn=48*f;return this.int16[di+0]=A,this.int16[di+1]=P,this.uint16[di+2]=N,this.uint16[di+3]=q,this.uint32[Mi+2]=Y,this.uint32[Mi+3]=oe,this.uint32[Mi+4]=fe,this.uint16[di+10]=we,this.uint16[di+11]=Fe,this.uint16[di+12]=Ve,this.float32[Mi+7]=nt,this.float32[Mi+8]=lt,this.uint8[nn+36]=ht,this.uint8[nn+37]=Gt,this.uint8[nn+38]=Vt,this.uint32[Mi+10]=gi,this.int16[di+22]=zi,f}}Mt.prototype.bytesPerElement=48,Cn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Mt);class Ct extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt,Vt,gi,zi,di,Mi,nn,tn,Wn,$n,zn,En,wn,Nn){const Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt,Vt,gi,zi,di,Mi,nn,tn,Wn,$n,zn,En,wn,Nn)}emplace(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt,Vt,gi,zi,di,Mi,nn,tn,Wn,$n,zn,En,wn,Nn,Dn){const fn=34*f,_r=17*f;return this.int16[fn+0]=A,this.int16[fn+1]=P,this.int16[fn+2]=N,this.int16[fn+3]=q,this.int16[fn+4]=Y,this.int16[fn+5]=oe,this.int16[fn+6]=fe,this.int16[fn+7]=we,this.uint16[fn+8]=Fe,this.uint16[fn+9]=Ve,this.uint16[fn+10]=nt,this.uint16[fn+11]=lt,this.uint16[fn+12]=ht,this.uint16[fn+13]=Gt,this.uint16[fn+14]=Vt,this.uint16[fn+15]=gi,this.uint16[fn+16]=zi,this.uint16[fn+17]=di,this.uint16[fn+18]=Mi,this.uint16[fn+19]=nn,this.uint16[fn+20]=tn,this.uint16[fn+21]=Wn,this.uint16[fn+22]=$n,this.uint32[_r+12]=zn,this.float32[_r+13]=En,this.float32[_r+14]=wn,this.float32[_r+15]=Nn,this.float32[_r+16]=Dn,f}}Ct.prototype.bytesPerElement=68,Cn("StructArrayLayout8i15ui1ul4f68",Ct);class Tt extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f){const A=this.length;return this.resize(A+1),this.emplace(A,f)}emplace(f,A){return this.float32[1*f+0]=A,f}}Tt.prototype.bytesPerElement=4,Cn("StructArrayLayout1f4",Tt);class ei extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=3*f;return this.int16[q+0]=A,this.int16[q+1]=P,this.int16[q+2]=N,f}}ei.prototype.bytesPerElement=6,Cn("StructArrayLayout3i6",ei);class ui extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=4*f;return this.uint32[2*f+0]=A,this.uint16[q+2]=P,this.uint16[q+3]=N,f}}ui.prototype.bytesPerElement=8,Cn("StructArrayLayout1ul2ui8",ui);class vi extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A){const P=this.length;return this.resize(P+1),this.emplace(P,f,A)}emplace(f,A,P){const N=2*f;return this.uint16[N+0]=A,this.uint16[N+1]=P,f}}vi.prototype.bytesPerElement=4,Cn("StructArrayLayout2ui4",vi);class jt extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f){const A=this.length;return this.resize(A+1),this.emplace(A,f)}emplace(f,A){return this.uint16[1*f+0]=A,f}}jt.prototype.bytesPerElement=2,Cn("StructArrayLayout1ui2",jt);class Oi extends ss{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,f,A,P,N)}emplace(f,A,P,N,q){const Y=4*f;return this.float32[Y+0]=A,this.float32[Y+1]=P,this.float32[Y+2]=N,this.float32[Y+3]=q,f}}Oi.prototype.bytesPerElement=16,Cn("StructArrayLayout4f16",Oi);class ki extends $l{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new rt(this.anchorPointX,this.anchorPointY)}}ki.prototype.size=20;class Wi extends _e{get(f){return new ki(this,f)}}Cn("CollisionBoxArray",Wi);class Vi extends $l{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(f){this._structArray.uint8[this._pos1+37]=f}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(f){this._structArray.uint8[this._pos1+38]=f}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(f){this._structArray.uint32[this._pos4+10]=f}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Vi.prototype.size=48;class ln extends Mt{get(f){return new Vi(this,f)}}Cn("PlacedSymbolArray",ln);class Ui extends $l{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(f){this._structArray.uint32[this._pos4+12]=f}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ui.prototype.size=68;class Mn extends Ct{get(f){return new Ui(this,f)}}Cn("SymbolInstanceArray",Mn);class _n extends Tt{getoffsetX(f){return this.float32[1*f+0]}}Cn("GlyphOffsetArray",_n);class jn extends ei{getx(f){return this.int16[3*f+0]}gety(f){return this.int16[3*f+1]}gettileUnitDistanceFromAnchor(f){return this.int16[3*f+2]}}Cn("SymbolLineVertexArray",jn);class Cr extends $l{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Cr.prototype.size=8;class Lr extends ui{get(f){return new Cr(this,f)}}Cn("FeatureIndexArray",Lr);class j extends la{}class K extends la{}class ue extends la{}class ve extends d{}class Ne extends I{}class Ke extends D{}class it extends z{}class at extends X{}class gt extends ne{}class Et extends pe{}class ii extends Ce{}class bi extends Je{}class _i extends st{}class ci extends vi{}const rn=ys([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bi}=rn;class qt{constructor(f=[]){this.segments=f}prepareSegment(f,A,P,N){let q=this.segments[this.segments.length-1];return f>qt.MAX_VERTEX_ARRAY_LENGTH&&J(`Max vertices per segment is ${qt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${f}`),(!q||q.vertexLength+f>qt.MAX_VERTEX_ARRAY_LENGTH||q.sortKey!==N)&&(q={vertexOffset:A.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},N!==void 0&&(q.sortKey=N),this.segments.push(q)),q}get(){return this.segments}destroy(){for(const f of this.segments)for(const A in f.vaos)f.vaos[A].destroy()}static simpleSegment(f,A,P,N){return new qt([{vertexOffset:f,primitiveOffset:A,vertexLength:P,primitiveLength:N,vaos:{},sortKey:0}])}}function Kt(b,f){return 256*(b=w(Math.floor(b),0,255))+w(Math.floor(f),0,255)}qt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Cn("SegmentVector",qt);const Zi=ys([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qi={exports:{}},Hi={exports:{}};Hi.exports=function(b,f){var A,P,N,q,Y,oe,fe,we;for(P=b.length-(A=3&b.length),N=f,Y=3432918353,oe=461845907,we=0;we<P;)fe=255&b.charCodeAt(we)|(255&b.charCodeAt(++we))<<8|(255&b.charCodeAt(++we))<<16|(255&b.charCodeAt(++we))<<24,++we,N=27492+(65535&(q=5*(65535&(N=(N^=fe=(65535&(fe=(fe=(65535&fe)*Y+(((fe>>>16)*Y&65535)<<16)&4294967295)<<15|fe>>>17))*oe+(((fe>>>16)*oe&65535)<<16)&4294967295)<<13|N>>>19))+((5*(N>>>16)&65535)<<16)&4294967295))+((58964+(q>>>16)&65535)<<16);switch(fe=0,A){case 3:fe^=(255&b.charCodeAt(we+2))<<16;case 2:fe^=(255&b.charCodeAt(we+1))<<8;case 1:N^=fe=(65535&(fe=(fe=(65535&(fe^=255&b.charCodeAt(we)))*Y+(((fe>>>16)*Y&65535)<<16)&4294967295)<<15|fe>>>17))*oe+(((fe>>>16)*oe&65535)<<16)&4294967295}return N^=b.length,N=2246822507*(65535&(N^=N>>>16))+((2246822507*(N>>>16)&65535)<<16)&4294967295,N=3266489909*(65535&(N^=N>>>13))+((3266489909*(N>>>16)&65535)<<16)&4294967295,(N^=N>>>16)>>>0};var Tn={exports:{}};Tn.exports=function(b,f){for(var A,P=b.length,N=f^P,q=0;P>=4;)A=1540483477*(65535&(A=255&b.charCodeAt(q)|(255&b.charCodeAt(++q))<<8|(255&b.charCodeAt(++q))<<16|(255&b.charCodeAt(++q))<<24))+((1540483477*(A>>>16)&65535)<<16),N=1540483477*(65535&N)+((1540483477*(N>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++q;switch(P){case 3:N^=(255&b.charCodeAt(q+2))<<16;case 2:N^=(255&b.charCodeAt(q+1))<<8;case 1:N=1540483477*(65535&(N^=255&b.charCodeAt(q)))+((1540483477*(N>>>16)&65535)<<16)}return N=1540483477*(65535&(N^=N>>>13))+((1540483477*(N>>>16)&65535)<<16),(N^=N>>>15)>>>0};var An=Hi.exports,xr=Tn.exports;Qi.exports=An,Qi.exports.murmur3=An,Qi.exports.murmur2=xr;class Ln{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(f,A,P,N){this.ids.push(vo(f)),this.positions.push(A,P,N)}getPositions(f){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=vo(f);let P=0,N=this.ids.length-1;for(;P<N;){const Y=P+N>>1;this.ids[Y]>=A?N=Y:P=Y+1}const q=[];for(;this.ids[P]===A;)q.push({index:this.positions[3*P],start:this.positions[3*P+1],end:this.positions[3*P+2]}),P++;return q}static serialize(f,A){const P=new Float64Array(f.ids),N=new Uint32Array(f.positions);return So(P,N,0,P.length-1),A&&A.push(P.buffer,N.buffer),{ids:P,positions:N}}static deserialize(f){const A=new Ln;return A.ids=f.ids,A.positions=f.positions,A.indexed=!0,A}}function vo(b){const f=+b;return!isNaN(f)&&f<=Number.MAX_SAFE_INTEGER?f:Qi.exports(String(b))}function So(b,f,A,P){for(;A<P;){const N=b[A+P>>1];let q=A-1,Y=P+1;for(;;){do q++;while(b[q]<N);do Y--;while(b[Y]>N);if(q>=Y)break;Xr(b,q,Y),Xr(f,3*q,3*Y),Xr(f,3*q+1,3*Y+1),Xr(f,3*q+2,3*Y+2)}Y-A<P-Y?(So(b,f,A,Y),A=Y+1):(So(b,f,Y+1,P),P=Y)}}function Xr(b,f,A){const P=b[f];b[f]=b[A],b[A]=P}Cn("FeaturePositionMap",Ln);class jr{constructor(f,A){this.gl=f.gl,this.location=A}}class mo extends jr{constructor(f,A){super(f,A),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class ko extends jr{constructor(f,A){super(f,A),this.current=[0,0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3]))}}class qr extends jr{constructor(f,A){super(f,A),this.current=_t.transparent}set(f){f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a))}}const Ls=new Float32Array(16);function Pr(b){return[Kt(255*b.r,255*b.g),Kt(255*b.b,255*b.a)]}class as{constructor(f,A,P){this.value=f,this.uniformNames=A.map(N=>`u_${N}`),this.type=P}setUniform(f,A,P){f.set(P.constantOr(this.value))}getBinding(f,A,P){return this.type==="color"?new qr(f,A):new mo(f,A)}}class Ns{constructor(f,A){this.uniformNames=A.map(P=>`u_${P}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(f,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=f.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=f.tlbr}setUniform(f,A,P,N){const q=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;q&&f.set(q)}getBinding(f,A,P){return P.substr(0,9)==="u_pattern"?new ko(f,A):new mo(f,A)}}class ao{constructor(f,A,P,N){this.expression=f,this.type=P,this.maxValue=0,this.paintVertexAttributes=A.map(q=>({name:`a_${q}`,type:"Float32",components:P==="color"?2:1,offset:0})),this.paintVertexArray=new N}populatePaintArray(f,A,P,N,q){const Y=this.paintVertexArray.length,oe=this.expression.evaluate(new jo(0),A,{},N,[],q);this.paintVertexArray.resize(f),this._setPaintValue(Y,f,oe)}updatePaintArray(f,A,P,N){const q=this.expression.evaluate({zoom:0},P,N);this._setPaintValue(f,A,q)}_setPaintValue(f,A,P){if(this.type==="color"){const N=Pr(P);for(let q=f;q<A;q++)this.paintVertexArray.emplace(q,N[0],N[1])}else{for(let N=f;N<A;N++)this.paintVertexArray.emplace(N,P);this.maxValue=Math.max(this.maxValue,Math.abs(P))}}upload(f){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=f.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fs{constructor(f,A,P,N,q,Y){this.expression=f,this.uniformNames=A.map(oe=>`u_${oe}_t`),this.type=P,this.useIntegerZoom=N,this.zoom=q,this.maxValue=0,this.paintVertexAttributes=A.map(oe=>({name:`a_${oe}`,type:"Float32",components:P==="color"?4:2,offset:0})),this.paintVertexArray=new Y}populatePaintArray(f,A,P,N,q){const Y=this.expression.evaluate(new jo(this.zoom),A,{},N,[],q),oe=this.expression.evaluate(new jo(this.zoom+1),A,{},N,[],q),fe=this.paintVertexArray.length;this.paintVertexArray.resize(f),this._setPaintValue(fe,f,Y,oe)}updatePaintArray(f,A,P,N){const q=this.expression.evaluate({zoom:this.zoom},P,N),Y=this.expression.evaluate({zoom:this.zoom+1},P,N);this._setPaintValue(f,A,q,Y)}_setPaintValue(f,A,P,N){if(this.type==="color"){const q=Pr(P),Y=Pr(N);for(let oe=f;oe<A;oe++)this.paintVertexArray.emplace(oe,q[0],q[1],Y[0],Y[1])}else{for(let q=f;q<A;q++)this.paintVertexArray.emplace(q,P,N);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(N))}}upload(f){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=f.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(f,A){const P=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,N=w(this.expression.interpolationFactor(P,this.zoom,this.zoom+1),0,1);f.set(N)}getBinding(f,A,P){return new mo(f,A)}}class Ps{constructor(f,A,P,N,q,Y){this.expression=f,this.type=A,this.useIntegerZoom=P,this.zoom=N,this.layerId=Y,this.zoomInPaintVertexArray=new q,this.zoomOutPaintVertexArray=new q}populatePaintArray(f,A,P){const N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(f),this.zoomOutPaintVertexArray.resize(f),this._setPaintValues(N,f,A.patterns&&A.patterns[this.layerId],P)}updatePaintArray(f,A,P,N,q){this._setPaintValues(f,A,P.patterns&&P.patterns[this.layerId],q)}_setPaintValues(f,A,P,N){if(!N||!P)return;const{min:q,mid:Y,max:oe}=P,fe=N[q],we=N[Y],Fe=N[oe];if(fe&&we&&Fe)for(let Ve=f;Ve<A;Ve++)this.zoomInPaintVertexArray.emplace(Ve,we.tl[0],we.tl[1],we.br[0],we.br[1],fe.tl[0],fe.tl[1],fe.br[0],fe.br[1],we.pixelRatio,fe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ve,we.tl[0],we.tl[1],we.br[0],we.br[1],Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],we.pixelRatio,Fe.pixelRatio)}upload(f){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=f.createVertexBuffer(this.zoomInPaintVertexArray,Zi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=f.createVertexBuffer(this.zoomOutPaintVertexArray,Zi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class js{constructor(f,A,P){this.binders={},this._buffers=[];const N=[];for(const q in f.paint._values){if(!P(q))continue;const Y=f.paint.get(q);if(!(Y instanceof dl&&Ao(Y.property.specification)))continue;const oe=wa(q,f.type),fe=Y.value,we=Y.property.specification.type,Fe=Y.property.useIntegerZoom,Ve=Y.property.specification["property-type"],nt=Ve==="cross-faded"||Ve==="cross-faded-data-driven";if(fe.kind==="constant")this.binders[q]=nt?new Ns(fe.value,oe):new as(fe.value,oe,we),N.push(`/u_${q}`);else if(fe.kind==="source"||nt){const lt=Za(q,we,"source");this.binders[q]=nt?new Ps(fe,we,Fe,A,lt,f.id):new ao(fe,oe,we,lt),N.push(`/a_${q}`)}else{const lt=Za(q,we,"composite");this.binders[q]=new fs(fe,oe,we,Fe,A,lt),N.push(`/z_${q}`)}}this.cacheKey=N.sort().join("")}getMaxValue(f){const A=this.binders[f];return A instanceof ao||A instanceof fs?A.maxValue:0}populatePaintArrays(f,A,P,N,q){for(const Y in this.binders){const oe=this.binders[Y];(oe instanceof ao||oe instanceof fs||oe instanceof Ps)&&oe.populatePaintArray(f,A,P,N,q)}}setConstantPatternPositions(f,A){for(const P in this.binders){const N=this.binders[P];N instanceof Ns&&N.setConstantPatternPositions(f,A)}}updatePaintArrays(f,A,P,N,q){let Y=!1;for(const oe in f){const fe=A.getPositions(oe);for(const we of fe){const Fe=P.feature(we.index);for(const Ve in this.binders){const nt=this.binders[Ve];if((nt instanceof ao||nt instanceof fs||nt instanceof Ps)&&nt.expression.isStateDependent===!0){const lt=N.paint.get(Ve);nt.expression=lt.value,nt.updatePaintArray(we.start,we.end,Fe,f[oe],q),Y=!0}}}}return Y}defines(){const f=[];for(const A in this.binders){const P=this.binders[A];(P instanceof as||P instanceof Ns)&&f.push(...P.uniformNames.map(N=>`#define HAS_UNIFORM_${N}`))}return f}getBinderAttributes(){const f=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof ao||P instanceof fs)for(let N=0;N<P.paintVertexAttributes.length;N++)f.push(P.paintVertexAttributes[N].name);else if(P instanceof Ps)for(let N=0;N<Zi.members.length;N++)f.push(Zi.members[N].name)}return f}getBinderUniforms(){const f=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof as||P instanceof Ns||P instanceof fs)for(const N of P.uniformNames)f.push(N)}return f}getPaintVertexBuffers(){return this._buffers}getUniforms(f,A){const P=[];for(const N in this.binders){const q=this.binders[N];if(q instanceof as||q instanceof Ns||q instanceof fs){for(const Y of q.uniformNames)if(A[Y]){const oe=q.getBinding(f,A[Y],Y);P.push({name:Y,property:N,binding:oe})}}}return P}setUniforms(f,A,P,N){for(const{name:q,property:Y,binding:oe}of A)this.binders[Y].setUniform(oe,N,P.get(Y),q)}updatePaintBuffers(f){this._buffers=[];for(const A in this.binders){const P=this.binders[A];if(f&&P instanceof Ps){const N=f.fromScale===2?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(P instanceof ao||P instanceof fs)&&P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}}upload(f){for(const A in this.binders){const P=this.binders[A];(P instanceof ao||P instanceof fs||P instanceof Ps)&&P.upload(f)}this.updatePaintBuffers()}destroy(){for(const f in this.binders){const A=this.binders[f];(A instanceof ao||A instanceof fs||A instanceof Ps)&&A.destroy()}}}class Uo{constructor(f,A,P=()=>!0){this.programConfigurations={};for(const N of f)this.programConfigurations[N.id]=new js(N,A,P);this.needsUpload=!1,this._featureMap=new Ln,this._bufferOffset=0}populatePaintArrays(f,A,P,N,q,Y){for(const oe in this.programConfigurations)this.programConfigurations[oe].populatePaintArrays(f,A,N,q,Y);A.id!==void 0&&this._featureMap.add(A.id,P,this._bufferOffset,f),this._bufferOffset=f,this.needsUpload=!0}updatePaintArrays(f,A,P,N){for(const q of P)this.needsUpload=this.programConfigurations[q.id].updatePaintArrays(f,this._featureMap,A,q,N)||this.needsUpload}get(f){return this.programConfigurations[f]}upload(f){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(f);this.needsUpload=!1}}destroy(){for(const f in this.programConfigurations)this.programConfigurations[f].destroy()}}function wa(b,f){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[b]||[b.replace(`${f}-`,"").replace(/-/g,"_")]}function Za(b,f,A){const P={color:{source:D,composite:Oi},number:{source:Tt,composite:D}},N=function(q){return{"line-pattern":{source:it,composite:it},"fill-pattern":{source:it,composite:it},"fill-extrusion-pattern":{source:it,composite:it}}[q]}(b);return N&&N[A]||P[f][A]}Cn("ConstantBinder",as),Cn("CrossFadedConstantBinder",Ns),Cn("SourceExpressionBinder",ao),Cn("CrossFadedCompositeBinder",Ps),Cn("CompositeExpressionBinder",fs),Cn("ProgramConfiguration",js,{omit:["_buffers"]}),Cn("ProgramConfigurationSet",Uo);var Oo=8192;const ks=Math.pow(2,14)-1,eu=-ks-1;function Ka(b){const f=Oo/b.extent,A=b.loadGeometry();for(let P=0;P<A.length;P++){const N=A[P];for(let q=0;q<N.length;q++){const Y=N[q],oe=Math.round(Y.x*f),fe=Math.round(Y.y*f);Y.x=w(oe,eu,ks),Y.y=w(fe,eu,ks),(oe<Y.x||oe>Y.x+1||fe<Y.y||fe>Y.y+1)&&J("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function ml(b,f){return{type:b.type,id:b.id,properties:b.properties,geometry:f?Ka(b):[]}}function gl(b,f,A,P,N){b.emplaceBack(2*f+(P+1)/2,2*A+(N+1)/2)}class ls{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.layoutVertexArray=new K,this.indexArray=new _i,this.segments=new qt,this.programConfigurations=new Uo(f.layers,f.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){const N=this.layers[0],q=[];let Y=null,oe=!1;N.type==="circle"&&(Y=N.layout.get("circle-sort-key"),oe=!Y.isConstant());for(const{feature:fe,id:we,index:Fe,sourceLayerIndex:Ve}of f){const nt=this.layers[0]._featureFilter.needGeometry,lt=ml(fe,nt);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),lt,P))continue;const ht=oe?Y.evaluate(lt,{},P):void 0,Gt={id:we,properties:fe.properties,type:fe.type,sourceLayerIndex:Ve,index:Fe,geometry:nt?lt.geometry:Ka(fe),patterns:{},sortKey:ht};q.push(Gt)}oe&&q.sort((fe,we)=>fe.sortKey-we.sortKey);for(const fe of q){const{geometry:we,index:Fe,sourceLayerIndex:Ve}=fe,nt=f[Fe].feature;this.addFeature(fe,we,Fe,P),A.featureIndex.insert(nt,we,Fe,Ve,this.index)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,Bi),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(f,A,P,N){for(const q of A)for(const Y of q){const oe=Y.x,fe=Y.y;if(oe<0||oe>=Oo||fe<0||fe>=Oo)continue;const we=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,f.sortKey),Fe=we.vertexLength;gl(this.layoutVertexArray,oe,fe,-1,-1),gl(this.layoutVertexArray,oe,fe,1,-1),gl(this.layoutVertexArray,oe,fe,1,1),gl(this.layoutVertexArray,oe,fe,-1,1),this.indexArray.emplaceBack(Fe,Fe+1,Fe+2),this.indexArray.emplaceBack(Fe,Fe+3,Fe+2),we.vertexLength+=4,we.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,{},N)}}function Vh(b,f){for(let A=0;A<b.length;A++)if(mc(f,b[A]))return!0;for(let A=0;A<f.length;A++)if(mc(b,f[A]))return!0;return!!dc(b,f)}function a0(b,f,A){return!!mc(b,f)||!!Ja(f,b,A)}function xf(b,f){if(b.length===1)return pc(f,b[0]);for(let A=0;A<f.length;A++){const P=f[A];for(let N=0;N<P.length;N++)if(mc(b,P[N]))return!0}for(let A=0;A<b.length;A++)if(pc(f,b[A]))return!0;for(let A=0;A<f.length;A++)if(dc(b,f[A]))return!0;return!1}function fc(b,f,A){if(b.length>1){if(dc(b,f))return!0;for(let P=0;P<f.length;P++)if(Ja(f[P],b,A))return!0}for(let P=0;P<b.length;P++)if(Ja(b[P],f,A))return!0;return!1}function dc(b,f){if(b.length===0||f.length===0)return!1;for(let A=0;A<b.length-1;A++){const P=b[A],N=b[A+1];for(let q=0;q<f.length-1;q++)if(qh(P,N,f[q],f[q+1]))return!0}return!1}function qh(b,f,A,P){return Q(b,A,P)!==Q(f,A,P)&&Q(b,f,A)!==Q(b,f,P)}function Ja(b,f,A){const P=A*A;if(f.length===1)return b.distSqr(f[0])<P;for(let N=1;N<f.length;N++)if(Qa(b,f[N-1],f[N])<P)return!0;return!1}function Qa(b,f,A){const P=f.distSqr(A);if(P===0)return b.distSqr(f);const N=((b.x-f.x)*(A.x-f.x)+(b.y-f.y)*(A.y-f.y))/P;return b.distSqr(N<0?f:N>1?A:A.sub(f)._mult(N)._add(f))}function pc(b,f){let A,P,N,q=!1;for(let Y=0;Y<b.length;Y++){A=b[Y];for(let oe=0,fe=A.length-1;oe<A.length;fe=oe++)P=A[oe],N=A[fe],P.y>f.y!=N.y>f.y&&f.x<(N.x-P.x)*(f.y-P.y)/(N.y-P.y)+P.x&&(q=!q)}return q}function mc(b,f){let A=!1;for(let P=0,N=b.length-1;P<b.length;N=P++){const q=b[P],Y=b[N];q.y>f.y!=Y.y>f.y&&f.x<(Y.x-q.x)*(f.y-q.y)/(Y.y-q.y)+q.x&&(A=!A)}return A}function Hh(b,f,A){const P=A[0],N=A[2];if(b.x<P.x&&f.x<P.x||b.x>N.x&&f.x>N.x||b.y<P.y&&f.y<P.y||b.y>N.y&&f.y>N.y)return!1;const q=Q(b,f,A[0]);return q!==Q(b,f,A[1])||q!==Q(b,f,A[2])||q!==Q(b,f,A[3])}function jc(b,f,A){const P=f.paint.get(b).value;return P.kind==="constant"?P.value:A.programConfigurations.get(f.id).getMaxValue(b)}function gc(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1])}function Uc(b,f,A,P,N){if(!f[0]&&!f[1])return b;const q=rt.convert(f)._mult(N);A==="viewport"&&q._rotate(-P);const Y=[];for(let oe=0;oe<b.length;oe++)Y.push(b[oe].sub(q));return Y}Cn("CircleBucket",ls,{omit:["layers"]});const yc=new Wo({"circle-sort-key":new gr(ee.layout_circle["circle-sort-key"])});var Vc={paint:new Wo({"circle-radius":new gr(ee.paint_circle["circle-radius"]),"circle-color":new gr(ee.paint_circle["circle-color"]),"circle-blur":new gr(ee.paint_circle["circle-blur"]),"circle-opacity":new gr(ee.paint_circle["circle-opacity"]),"circle-translate":new Qn(ee.paint_circle["circle-translate"]),"circle-translate-anchor":new Qn(ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qn(ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qn(ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gr(ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gr(ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gr(ee.paint_circle["circle-stroke-opacity"])}),layout:yc},ua=1e-6,Qs=typeof Float32Array<"u"?Float32Array:Array;function Ms(){var b=new Qs(9);return Qs!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[5]=0,b[6]=0,b[7]=0),b[0]=1,b[4]=1,b[8]=1,b}function tu(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function l0(b,f,A){var P=f[0],N=f[1],q=f[2],Y=f[3],oe=f[4],fe=f[5],we=f[6],Fe=f[7],Ve=f[8],nt=f[9],lt=f[10],ht=f[11],Gt=f[12],Vt=f[13],gi=f[14],zi=f[15],di=A[0],Mi=A[1],nn=A[2],tn=A[3];return b[0]=di*P+Mi*oe+nn*Ve+tn*Gt,b[1]=di*N+Mi*fe+nn*nt+tn*Vt,b[2]=di*q+Mi*we+nn*lt+tn*gi,b[3]=di*Y+Mi*Fe+nn*ht+tn*zi,b[4]=(di=A[4])*P+(Mi=A[5])*oe+(nn=A[6])*Ve+(tn=A[7])*Gt,b[5]=di*N+Mi*fe+nn*nt+tn*Vt,b[6]=di*q+Mi*we+nn*lt+tn*gi,b[7]=di*Y+Mi*Fe+nn*ht+tn*zi,b[8]=(di=A[8])*P+(Mi=A[9])*oe+(nn=A[10])*Ve+(tn=A[11])*Gt,b[9]=di*N+Mi*fe+nn*nt+tn*Vt,b[10]=di*q+Mi*we+nn*lt+tn*gi,b[11]=di*Y+Mi*Fe+nn*ht+tn*zi,b[12]=(di=A[12])*P+(Mi=A[13])*oe+(nn=A[14])*Ve+(tn=A[15])*Gt,b[13]=di*N+Mi*fe+nn*nt+tn*Vt,b[14]=di*q+Mi*we+nn*lt+tn*gi,b[15]=di*Y+Mi*Fe+nn*ht+tn*zi,b}Math.hypot||(Math.hypot=function(){for(var b=0,f=arguments.length;f--;)b+=arguments[f]*arguments[f];return Math.sqrt(b)});var iu,u0=l0;function Af(){var b=new Qs(3);return Qs!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function yh(b,f,A){var P=new Qs(3);return P[0]=b,P[1]=f,P[2]=A,P}function qc(b,f,A){var P=f[0],N=f[1],q=f[2],Y=f[3];return b[0]=A[0]*P+A[4]*N+A[8]*q+A[12]*Y,b[1]=A[1]*P+A[5]*N+A[9]*q+A[13]*Y,b[2]=A[2]*P+A[6]*N+A[10]*q+A[14]*Y,b[3]=A[3]*P+A[7]*N+A[11]*q+A[15]*Y,b}function Sf(){var b=new Qs(4);return Qs!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function _h(b,f){const A=qc([],[b.x,b.y,0,1],f);return new rt(A[0]/A[3],A[1]/A[3])}Af(),iu=new Qs(4),Qs!=Float32Array&&(iu[0]=0,iu[1]=0,iu[2]=0,iu[3]=0),Af(),yh(1,0,0),yh(0,1,0),Sf(),Sf(),Ms(),function(){var b;b=new Qs(2),Qs!=Float32Array&&(b[0]=0,b[1]=0)}();class Gh extends ls{}Cn("HeatmapBucket",Gh,{omit:["layers"]});var vh={paint:new Wo({"heatmap-radius":new gr(ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gr(ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qn(ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ss(ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qn(ee.paint_heatmap["heatmap-opacity"])})};function Ol(b,{width:f,height:A},P,N){if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==f*A*P)throw new RangeError(`mismatched image size. expected: ${N.length} but got: ${f*A*P}`)}else N=new Uint8Array(f*A*P);return b.width=f,b.height=A,b.data=N,b}function c0(b,{width:f,height:A},P){if(f===b.width&&A===b.height)return;const N=Ol({},{width:f,height:A},P);Hc(b,N,{x:0,y:0},{x:0,y:0},{width:Math.min(b.width,f),height:Math.min(b.height,A)},P),b.width=f,b.height=A,b.data=N.data}function Hc(b,f,A,P,N,q){if(N.width===0||N.height===0)return f;if(N.width>b.width||N.height>b.height||A.x>b.width-N.width||A.y>b.height-N.height)throw new RangeError("out of range source coordinates for image copy");if(N.width>f.width||N.height>f.height||P.x>f.width-N.width||P.y>f.height-N.height)throw new RangeError("out of range destination coordinates for image copy");const Y=b.data,oe=f.data;if(Y===oe)throw new Error("srcData equals dstData, so image is already copied");for(let fe=0;fe<N.height;fe++){const we=((A.y+fe)*b.width+A.x)*q,Fe=((P.y+fe)*f.width+P.x)*q;for(let Ve=0;Ve<N.width*q;Ve++)oe[Fe+Ve]=Y[we+Ve]}return f}class _c{constructor(f,A){Ol(this,f,1,A)}resize(f){c0(this,f,1)}clone(){return new _c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(f,A,P,N,q){Hc(f,A,P,N,q,1)}}class xa{constructor(f,A){Ol(this,f,4,A)}resize(f){c0(this,f,4)}replace(f,A){A?this.data.set(f):this.data=f instanceof Uint8ClampedArray?new Uint8Array(f.buffer):f}clone(){return new xa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(f,A,P,N,q){Hc(f,A,P,N,q,4)}}function nu(b){const f={},A=b.resolution||256,P=b.clips?b.clips.length:1,N=b.image||new xa({width:A,height:P});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const q=(Y,oe,fe)=>{f[b.evaluationKey]=fe;const we=b.expression.evaluate(f);N.data[Y+oe+0]=Math.floor(255*we.r/we.a),N.data[Y+oe+1]=Math.floor(255*we.g/we.a),N.data[Y+oe+2]=Math.floor(255*we.b/we.a),N.data[Y+oe+3]=Math.floor(255*we.a)};if(b.clips)for(let Y=0,oe=0;Y<P;++Y,oe+=4*A)for(let fe=0,we=0;fe<A;fe++,we+=4){const Fe=fe/(A-1),{start:Ve,end:nt}=b.clips[Y];q(oe,we,Ve*(1-Fe)+nt*Fe)}else for(let Y=0,oe=0;Y<A;Y++,oe+=4)q(0,oe,Y/(A-1));return N}Cn("AlphaImage",_c),Cn("RGBAImage",xa);var h0={paint:new Wo({"hillshade-illumination-direction":new Qn(ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qn(ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qn(ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qn(ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qn(ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qn(ee.paint_hillshade["hillshade-accent-color"])})};const kf=ys([{name:"a_pos",components:2,type:"Int16"}],4),{members:dd}=kf;var vc={exports:{}};function Eu(b,f,A){A=A||2;var P,N,q,Y,oe,fe,we,Fe=f&&f.length,Ve=Fe?f[0]*A:b.length,nt=f0(b,0,Ve,A,!0),lt=[];if(!nt||nt.next===nt.prev)return lt;if(Fe&&(nt=function(Gt,Vt,gi,zi){var di,Mi,nn,tn=[];for(di=0,Mi=Vt.length;di<Mi;di++)(nn=f0(Gt,Vt[di]*zi,di<Mi-1?Vt[di+1]*zi:Gt.length,zi,!1))===nn.next&&(nn.steiner=!0),tn.push(Wh(nn));for(tn.sort(Aa),di=0;di<tn.length;di++)gi=Iu(tn[di],gi);return gi}(b,f,nt,A)),b.length>80*A){P=q=b[0],N=Y=b[1];for(var ht=A;ht<Ve;ht+=A)(oe=b[ht])<P&&(P=oe),(fe=b[ht+1])<N&&(N=fe),oe>q&&(q=oe),fe>Y&&(Y=fe);we=(we=Math.max(q-P,Y-N))!==0?32767/we:0}return bh(nt,lt,A,P,N,we,0),lt}function f0(b,f,A,P,N){var q,Y;if(N===Tf(b,f,A,P)>0)for(q=f;q<A;q+=P)Y=mp(q,b[q],b[q+1],Y);else for(q=A-P;q>=f;q-=P)Y=mp(q,b[q],b[q+1],Y);return Y&&Ku(Y,Y.next)&&(If(Y),Y=Y.next),Y}function Xu(b,f){if(!b)return b;f||(f=b);var A,P=b;do if(A=!1,P.steiner||!Ku(P,P.next)&&$o(P.prev,P,P.next)!==0)P=P.next;else{if(If(P),(P=f=P.prev)===P.next)break;A=!0}while(A||P!==f);return f}function bh(b,f,A,P,N,q,Y){if(b){!Y&&q&&function(Fe,Ve,nt,lt){var ht=Fe;do ht.z===0&&(ht.z=ru(ht.x,ht.y,Ve,nt,lt)),ht.prevZ=ht.prev,ht.nextZ=ht.next,ht=ht.next;while(ht!==Fe);ht.prevZ.nextZ=null,ht.prevZ=null,function(Gt){var Vt,gi,zi,di,Mi,nn,tn,Wn,$n=1;do{for(gi=Gt,Gt=null,Mi=null,nn=0;gi;){for(nn++,zi=gi,tn=0,Vt=0;Vt<$n&&(tn++,zi=zi.nextZ);Vt++);for(Wn=$n;tn>0||Wn>0&&zi;)tn!==0&&(Wn===0||!zi||gi.z<=zi.z)?(di=gi,gi=gi.nextZ,tn--):(di=zi,zi=zi.nextZ,Wn--),Mi?Mi.nextZ=di:Gt=di,di.prevZ=Mi,Mi=di;gi=zi}Mi.nextZ=null,$n*=2}while(nn>1)}(ht)}(b,P,N,q);for(var oe,fe,we=b;b.prev!==b.next;)if(oe=b.prev,fe=b.next,q?pd(b,P,N,q):Cf(b))f.push(oe.i/A|0),f.push(b.i/A|0),f.push(fe.i/A|0),If(b),b=fe.next,we=fe.next;else if((b=fe)===we){Y?Y===1?bh(b=wh(Xu(b),f,A),f,A,P,N,q,2):Y===2&&Ef(b,f,A,P,N,q):bh(Xu(b),f,A,P,N,q,1);break}}}function Cf(b){var f=b.prev,A=b,P=b.next;if($o(f,A,P)>=0)return!1;for(var N=f.x,q=A.x,Y=P.x,oe=f.y,fe=A.y,we=P.y,Fe=N<q?N<Y?N:Y:q<Y?q:Y,Ve=oe<fe?oe<we?oe:we:fe<we?fe:we,nt=N>q?N>Y?N:Y:q>Y?q:Y,lt=oe>fe?oe>we?oe:we:fe>we?fe:we,ht=P.next;ht!==f;){if(ht.x>=Fe&&ht.x<=nt&&ht.y>=Ve&&ht.y<=lt&&Zu(N,oe,q,fe,Y,we,ht.x,ht.y)&&$o(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function pd(b,f,A,P){var N=b.prev,q=b,Y=b.next;if($o(N,q,Y)>=0)return!1;for(var oe=N.x,fe=q.x,we=Y.x,Fe=N.y,Ve=q.y,nt=Y.y,lt=oe<fe?oe<we?oe:we:fe<we?fe:we,ht=Fe<Ve?Fe<nt?Fe:nt:Ve<nt?Ve:nt,Gt=oe>fe?oe>we?oe:we:fe>we?fe:we,Vt=Fe>Ve?Fe>nt?Fe:nt:Ve>nt?Ve:nt,gi=ru(lt,ht,f,A,P),zi=ru(Gt,Vt,f,A,P),di=b.prevZ,Mi=b.nextZ;di&&di.z>=gi&&Mi&&Mi.z<=zi;){if(di.x>=lt&&di.x<=Gt&&di.y>=ht&&di.y<=Vt&&di!==N&&di!==Y&&Zu(oe,Fe,fe,Ve,we,nt,di.x,di.y)&&$o(di.prev,di,di.next)>=0||(di=di.prevZ,Mi.x>=lt&&Mi.x<=Gt&&Mi.y>=ht&&Mi.y<=Vt&&Mi!==N&&Mi!==Y&&Zu(oe,Fe,fe,Ve,we,nt,Mi.x,Mi.y)&&$o(Mi.prev,Mi,Mi.next)>=0))return!1;Mi=Mi.nextZ}for(;di&&di.z>=gi;){if(di.x>=lt&&di.x<=Gt&&di.y>=ht&&di.y<=Vt&&di!==N&&di!==Y&&Zu(oe,Fe,fe,Ve,we,nt,di.x,di.y)&&$o(di.prev,di,di.next)>=0)return!1;di=di.prevZ}for(;Mi&&Mi.z<=zi;){if(Mi.x>=lt&&Mi.x<=Gt&&Mi.y>=ht&&Mi.y<=Vt&&Mi!==N&&Mi!==Y&&Zu(oe,Fe,fe,Ve,we,nt,Mi.x,Mi.y)&&$o(Mi.prev,Mi,Mi.next)>=0)return!1;Mi=Mi.nextZ}return!0}function wh(b,f,A){var P=b;do{var N=P.prev,q=P.next.next;!Ku(N,q)&&Xh(N,P,P.next,q)&&Yh(N,q)&&Yh(q,N)&&(f.push(N.i/A|0),f.push(P.i/A|0),f.push(q.i/A|0),If(P),If(P.next),P=b=q),P=P.next}while(P!==b);return Xu(P)}function Ef(b,f,A,P,N,q){var Y=b;do{for(var oe=Y.next.next;oe!==Y.prev;){if(Y.i!==oe.i&&d0(Y,oe)){var fe=pp(Y,oe);return Y=Xu(Y,Y.next),fe=Xu(fe,fe.next),bh(Y,f,A,P,N,q,0),void bh(fe,f,A,P,N,q,0)}oe=oe.next}Y=Y.next}while(Y!==b)}function Aa(b,f){return b.x-f.x}function Iu(b,f){var A=function(N,q){var Y,oe=q,fe=N.x,we=N.y,Fe=-1/0;do{if(we<=oe.y&&we>=oe.next.y&&oe.next.y!==oe.y){var Ve=oe.x+(we-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(Ve<=fe&&Ve>Fe&&(Fe=Ve,Y=oe.x<oe.next.x?oe:oe.next,Ve===fe))return Y}oe=oe.next}while(oe!==q);if(!Y)return null;var nt,lt=Y,ht=Y.x,Gt=Y.y,Vt=1/0;oe=Y;do fe>=oe.x&&oe.x>=ht&&fe!==oe.x&&Zu(we<Gt?fe:Fe,we,ht,Gt,we<Gt?Fe:fe,we,oe.x,oe.y)&&(nt=Math.abs(we-oe.y)/(fe-oe.x),Yh(oe,N)&&(nt<Vt||nt===Vt&&(oe.x>Y.x||oe.x===Y.x&&Yu(Y,oe)))&&(Y=oe,Vt=nt)),oe=oe.next;while(oe!==lt);return Y}(b,f);if(!A)return f;var P=pp(A,b);return Xu(P,P.next),Xu(A,A.next)}function Yu(b,f){return $o(b.prev,b,f.prev)<0&&$o(f.next,b,b.next)<0}function ru(b,f,A,P,N){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=(b-A)*N|0)|b<<8))|b<<4))|b<<2))|b<<1))|(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-P)*N|0)|f<<8))|f<<4))|f<<2))|f<<1))<<1}function Wh(b){var f=b,A=b;do(f.x<A.x||f.x===A.x&&f.y<A.y)&&(A=f),f=f.next;while(f!==b);return A}function Zu(b,f,A,P,N,q,Y,oe){return(N-Y)*(f-oe)>=(b-Y)*(q-oe)&&(b-Y)*(P-oe)>=(A-Y)*(f-oe)&&(A-Y)*(q-oe)>=(N-Y)*(P-oe)}function d0(b,f){return b.next.i!==f.i&&b.prev.i!==f.i&&!function(A,P){var N=A;do{if(N.i!==A.i&&N.next.i!==A.i&&N.i!==P.i&&N.next.i!==P.i&&Xh(N,N.next,A,P))return!0;N=N.next}while(N!==A);return!1}(b,f)&&(Yh(b,f)&&Yh(f,b)&&function(A,P){var N=A,q=!1,Y=(A.x+P.x)/2,oe=(A.y+P.y)/2;do N.y>oe!=N.next.y>oe&&N.next.y!==N.y&&Y<(N.next.x-N.x)*(oe-N.y)/(N.next.y-N.y)+N.x&&(q=!q),N=N.next;while(N!==A);return q}(b,f)&&($o(b.prev,b,f.prev)||$o(b,f.prev,f))||Ku(b,f)&&$o(b.prev,b,b.next)>0&&$o(f.prev,f,f.next)>0)}function $o(b,f,A){return(f.y-b.y)*(A.x-f.x)-(f.x-b.x)*(A.y-f.y)}function Ku(b,f){return b.x===f.x&&b.y===f.y}function Xh(b,f,A,P){var N=m0($o(b,f,A)),q=m0($o(b,f,P)),Y=m0($o(A,P,b)),oe=m0($o(A,P,f));return N!==q&&Y!==oe||!(N!==0||!p0(b,A,f))||!(q!==0||!p0(b,P,f))||!(Y!==0||!p0(A,b,P))||!(oe!==0||!p0(A,f,P))}function p0(b,f,A){return f.x<=Math.max(b.x,A.x)&&f.x>=Math.min(b.x,A.x)&&f.y<=Math.max(b.y,A.y)&&f.y>=Math.min(b.y,A.y)}function m0(b){return b>0?1:b<0?-1:0}function Yh(b,f){return $o(b.prev,b,b.next)<0?$o(b,f,b.next)>=0&&$o(b,b.prev,f)>=0:$o(b,f,b.prev)<0||$o(b,b.next,f)<0}function pp(b,f){var A=new md(b.i,b.x,b.y),P=new md(f.i,f.x,f.y),N=b.next,q=f.prev;return b.next=f,f.prev=b,A.next=N,N.prev=A,P.next=A,A.prev=P,q.next=P,P.prev=q,P}function mp(b,f,A,P){var N=new md(b,f,A);return P?(N.next=P.next,N.prev=P,P.next.prev=N,P.next=N):(N.prev=N,N.next=N),N}function If(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function md(b,f,A){this.i=b,this.x=f,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tf(b,f,A,P){for(var N=0,q=f,Y=A-P;q<A;q+=P)N+=(b[Y]-b[q])*(b[q+1]+b[Y+1]),Y=q;return N}function sm(b,f,A,P,N){gp(b,f,A||0,P||b.length-1,N||yp)}function gp(b,f,A,P,N){for(;P>A;){if(P-A>600){var q=P-A+1,Y=f-A+1,oe=Math.log(q),fe=.5*Math.exp(2*oe/3),we=.5*Math.sqrt(oe*fe*(q-fe)/q)*(Y-q/2<0?-1:1);gp(b,f,Math.max(A,Math.floor(f-Y*fe/q+we)),Math.min(P,Math.floor(f+(q-Y)*fe/q+we)),N)}var Fe=b[f],Ve=A,nt=P;for(Lf(b,A,f),N(b[P],Fe)>0&&Lf(b,A,P);Ve<nt;){for(Lf(b,Ve,nt),Ve++,nt--;N(b[Ve],Fe)<0;)Ve++;for(;N(b[nt],Fe)>0;)nt--}N(b[A],Fe)===0?Lf(b,A,nt):Lf(b,++nt,P),nt<=f&&(A=nt+1),f<=nt&&(P=nt-1)}}function Lf(b,f,A){var P=b[f];b[f]=b[A],b[A]=P}function yp(b,f){return b<f?-1:b>f?1:0}function g0(b,f){const A=b.length;if(A<=1)return[b];const P=[];let N,q;for(let Y=0;Y<A;Y++){const oe=Z(b[Y]);oe!==0&&(b[Y].area=Math.abs(oe),q===void 0&&(q=oe<0),q===oe<0?(N&&P.push(N),N=[b[Y]]):N.push(b[Y]))}if(N&&P.push(N),f>1)for(let Y=0;Y<P.length;Y++)P[Y].length<=f||(sm(P[Y],f,1,P[Y].length-1,Us),P[Y]=P[Y].slice(0,f));return P}function Us(b,f){return f.area-b.area}function Pf(b,f,A){const P=A.patternDependencies;let N=!1;for(const q of f){const Y=q.paint.get(`${b}-pattern`);Y.isConstant()||(N=!0);const oe=Y.constantOr(null);oe&&(N=!0,P[oe.to]=!0,P[oe.from]=!0)}return N}function gd(b,f,A,P,N){const q=N.patternDependencies;for(const Y of f){const oe=Y.paint.get(`${b}-pattern`).value;if(oe.kind!=="constant"){let fe=oe.evaluate({zoom:P-1},A,{},N.availableImages),we=oe.evaluate({zoom:P},A,{},N.availableImages),Fe=oe.evaluate({zoom:P+1},A,{},N.availableImages);fe=fe&&fe.name?fe.name:fe,we=we&&we.name?we.name:we,Fe=Fe&&Fe.name?Fe.name:Fe,q[fe]=!0,q[we]=!0,q[Fe]=!0,A.patterns[Y.id]={min:fe,mid:we,max:Fe}}}return A}vc.exports=Eu,vc.exports.default=Eu,Eu.deviation=function(b,f,A,P){var N=f&&f.length,q=Math.abs(Tf(b,0,N?f[0]*A:b.length,A));if(N)for(var Y=0,oe=f.length;Y<oe;Y++)q-=Math.abs(Tf(b,f[Y]*A,Y<oe-1?f[Y+1]*A:b.length,A));var fe=0;for(Y=0;Y<P.length;Y+=3){var we=P[Y]*A,Fe=P[Y+1]*A,Ve=P[Y+2]*A;fe+=Math.abs((b[we]-b[Ve])*(b[Fe+1]-b[we+1])-(b[we]-b[Fe])*(b[Ve+1]-b[we+1]))}return q===0&&fe===0?0:Math.abs((fe-q)/q)},Eu.flatten=function(b){for(var f=b[0][0].length,A={vertices:[],holes:[],dimensions:f},P=0,N=0;N<b.length;N++){for(var q=0;q<b[N].length;q++)for(var Y=0;Y<f;Y++)A.vertices.push(b[N][q][Y]);N>0&&A.holes.push(P+=b[N-1].length)}return A};class yd{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new _i,this.indexArray2=new ci,this.programConfigurations=new Uo(f.layers,f.zoom),this.segments=new qt,this.segments2=new qt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){this.hasPattern=Pf("fill",this.layers,A);const N=this.layers[0].layout.get("fill-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:oe,id:fe,index:we,sourceLayerIndex:Fe}of f){const Ve=this.layers[0]._featureFilter.needGeometry,nt=ml(oe,Ve);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),nt,P))continue;const lt=q?N.evaluate(nt,{},P,A.availableImages):void 0,ht={id:fe,properties:oe.properties,type:oe.type,sourceLayerIndex:Fe,index:we,geometry:Ve?nt.geometry:Ka(oe),patterns:{},sortKey:lt};Y.push(ht)}q&&Y.sort((oe,fe)=>oe.sortKey-fe.sortKey);for(const oe of Y){const{geometry:fe,index:we,sourceLayerIndex:Fe}=oe;if(this.hasPattern){const Ve=gd("fill",this.layers,oe,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(oe,fe,we,P,{});A.featureIndex.insert(f[we].feature,fe,we,Fe,this.index)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}addFeatures(f,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,dd),this.indexBuffer=f.createIndexBuffer(this.indexArray),this.indexBuffer2=f.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(f,A,P,N,q){for(const Y of g0(A,500)){let oe=0;for(const lt of Y)oe+=lt.length;const fe=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray),we=fe.vertexLength,Fe=[],Ve=[];for(const lt of Y){if(lt.length===0)continue;lt!==Y[0]&&Ve.push(Fe.length/2);const ht=this.segments2.prepareSegment(lt.length,this.layoutVertexArray,this.indexArray2),Gt=ht.vertexLength;this.layoutVertexArray.emplaceBack(lt[0].x,lt[0].y),this.indexArray2.emplaceBack(Gt+lt.length-1,Gt),Fe.push(lt[0].x),Fe.push(lt[0].y);for(let Vt=1;Vt<lt.length;Vt++)this.layoutVertexArray.emplaceBack(lt[Vt].x,lt[Vt].y),this.indexArray2.emplaceBack(Gt+Vt-1,Gt+Vt),Fe.push(lt[Vt].x),Fe.push(lt[Vt].y);ht.vertexLength+=lt.length,ht.primitiveLength+=lt.length}const nt=vc.exports(Fe,Ve);for(let lt=0;lt<nt.length;lt+=3)this.indexArray.emplaceBack(we+nt[lt],we+nt[lt+1],we+nt[lt+2]);fe.vertexLength+=oe,fe.primitiveLength+=nt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,q,N)}}Cn("FillBucket",yd,{omit:["layers","patternFeatures"]});const am=new Wo({"fill-sort-key":new gr(ee.layout_fill["fill-sort-key"])});var _p={paint:new Wo({"fill-antialias":new Qn(ee.paint_fill["fill-antialias"]),"fill-opacity":new gr(ee.paint_fill["fill-opacity"]),"fill-color":new gr(ee.paint_fill["fill-color"]),"fill-outline-color":new gr(ee.paint_fill["fill-outline-color"]),"fill-translate":new Qn(ee.paint_fill["fill-translate"]),"fill-translate-anchor":new Qn(ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wu(ee.paint_fill["fill-pattern"])}),layout:am};const Zh=ys([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),lm=ys([{name:"a_centroid",components:2,type:"Int16"}],4),{members:um}=Zh;var Gc={},bc=rt,yr=wc;function wc(b,f,A,P,N){this.properties={},this.extent=A,this.type=0,this._pbf=b,this._geometry=-1,this._keys=P,this._values=N,b.readFields(cm,this,f)}function cm(b,f,A){b==1?f.id=A.readVarint():b==2?function(P,N){for(var q=P.readVarint()+P.pos;P.pos<q;){var Y=N._keys[P.readVarint()],oe=N._values[P.readVarint()];N.properties[Y]=oe}}(A,f):b==3?f.type=A.readVarint():b==4&&(f._geometry=A.pos)}function hm(b){for(var f,A,P=0,N=0,q=b.length,Y=q-1;N<q;Y=N++)P+=((A=b[Y]).x-(f=b[N]).x)*(f.y+A.y);return P}wc.types=["Unknown","Point","LineString","Polygon"],wc.prototype.loadGeometry=function(){var b=this._pbf;b.pos=this._geometry;for(var f,A=b.readVarint()+b.pos,P=1,N=0,q=0,Y=0,oe=[];b.pos<A;){if(N<=0){var fe=b.readVarint();P=7&fe,N=fe>>3}if(N--,P===1||P===2)q+=b.readSVarint(),Y+=b.readSVarint(),P===1&&(f&&oe.push(f),f=[]),f.push(new bc(q,Y));else{if(P!==7)throw new Error("unknown command "+P);f&&f.push(f[0].clone())}}return f&&oe.push(f),oe},wc.prototype.bbox=function(){var b=this._pbf;b.pos=this._geometry;for(var f=b.readVarint()+b.pos,A=1,P=0,N=0,q=0,Y=1/0,oe=-1/0,fe=1/0,we=-1/0;b.pos<f;){if(P<=0){var Fe=b.readVarint();A=7&Fe,P=Fe>>3}if(P--,A===1||A===2)(N+=b.readSVarint())<Y&&(Y=N),N>oe&&(oe=N),(q+=b.readSVarint())<fe&&(fe=q),q>we&&(we=q);else if(A!==7)throw new Error("unknown command "+A)}return[Y,fe,oe,we]},wc.prototype.toGeoJSON=function(b,f,A){var P,N,q=this.extent*Math.pow(2,A),Y=this.extent*b,oe=this.extent*f,fe=this.loadGeometry(),we=wc.types[this.type];function Fe(lt){for(var ht=0;ht<lt.length;ht++){var Gt=lt[ht];lt[ht]=[360*(Gt.x+Y)/q-180,360/Math.PI*Math.atan(Math.exp((180-360*(Gt.y+oe)/q)*Math.PI/180))-90]}}switch(this.type){case 1:var Ve=[];for(P=0;P<fe.length;P++)Ve[P]=fe[P][0];Fe(fe=Ve);break;case 2:for(P=0;P<fe.length;P++)Fe(fe[P]);break;case 3:for(fe=function(lt){var ht=lt.length;if(ht<=1)return[lt];for(var Gt,Vt,gi=[],zi=0;zi<ht;zi++){var di=hm(lt[zi]);di!==0&&(Vt===void 0&&(Vt=di<0),Vt===di<0?(Gt&&gi.push(Gt),Gt=[lt[zi]]):Gt.push(lt[zi]))}return Gt&&gi.push(Gt),gi}(fe),P=0;P<fe.length;P++)for(N=0;N<fe[P].length;N++)Fe(fe[P][N])}fe.length===1?fe=fe[0]:we="Multi"+we;var nt={type:"Feature",geometry:{type:we,coordinates:fe},properties:this.properties};return"id"in this&&(nt.id=this.id),nt};var fm=yr,vp=bp;function bp(b,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=b,this._keys=[],this._values=[],this._features=[],b.readFields(dm,this,f),this.length=this._features.length}function dm(b,f,A){b===15?f.version=A.readVarint():b===1?f.name=A.readString():b===5?f.extent=A.readVarint():b===2?f._features.push(A.pos):b===3?f._keys.push(A.readString()):b===4&&f._values.push(function(P){for(var N=null,q=P.readVarint()+P.pos;P.pos<q;){var Y=P.readVarint()>>3;N=Y===1?P.readString():Y===2?P.readFloat():Y===3?P.readDouble():Y===4?P.readVarint64():Y===5?P.readVarint():Y===6?P.readSVarint():Y===7?P.readBoolean():null}return N}(A))}bp.prototype.feature=function(b){if(b<0||b>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[b];var f=this._pbf.readVarint()+this._pbf.pos;return new fm(this._pbf,f,this.extent,this._keys,this._values)};var Mf=vp;function y0(b,f,A){if(b===3){var P=new Mf(A,A.readVarint()+A.pos);P.length&&(f[P.name]=P)}}Gc.VectorTile=function(b,f){this.layers=b.readFields(y0,{},f)},Gc.VectorTileFeature=yr,Gc.VectorTileLayer=vp;const wp=Gc.VectorTileFeature.types,_d=Math.pow(2,13);function Kh(b,f,A,P,N,q,Y,oe){b.emplaceBack(f,A,2*Math.floor(P*_d)+Y,N*_d*2,q*_d*2,Math.round(oe))}class Df{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.layoutVertexArray=new ve,this.centroidVertexArray=new j,this.indexArray=new _i,this.programConfigurations=new Uo(f.layers,f.zoom),this.segments=new qt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){this.features=[],this.hasPattern=Pf("fill-extrusion",this.layers,A);for(const{feature:N,id:q,index:Y,sourceLayerIndex:oe}of f){const fe=this.layers[0]._featureFilter.needGeometry,we=ml(N,fe);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),we,P))continue;const Fe={id:q,sourceLayerIndex:oe,index:Y,geometry:fe?we.geometry:Ka(N),properties:N.properties,type:N.type,patterns:{}};this.hasPattern?this.features.push(gd("fill-extrusion",this.layers,Fe,this.zoom,A)):this.addFeature(Fe,Fe.geometry,Y,P,{}),A.featureIndex.insert(N,Fe.geometry,Y,oe,this.index,!0)}}addFeatures(f,A,P){for(const N of this.features){const{geometry:q}=N;this.addFeature(N,q,N.index,A,P)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,um),this.centroidVertexBuffer=f.createVertexBuffer(this.centroidVertexArray,lm.members,!0),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(f,A,P,N,q){const Y={x:0,y:0,vertexCount:0};for(const oe of g0(A,500)){let fe=0;for(const ht of oe)fe+=ht.length;let we=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ht of oe){if(ht.length===0||pm(ht))continue;let Gt=0;for(let Vt=0;Vt<ht.length;Vt++){const gi=ht[Vt];if(Vt>=1){const zi=ht[Vt-1];if(!xp(gi,zi)){we.vertexLength+4>qt.MAX_VERTEX_ARRAY_LENGTH&&(we=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const di=gi.sub(zi)._perp()._unit(),Mi=zi.dist(gi);Gt+Mi>32768&&(Gt=0),Kh(this.layoutVertexArray,gi.x,gi.y,di.x,di.y,0,0,Gt),Kh(this.layoutVertexArray,gi.x,gi.y,di.x,di.y,0,1,Gt),Y.x+=2*gi.x,Y.y+=2*gi.y,Y.vertexCount+=2,Gt+=Mi,Kh(this.layoutVertexArray,zi.x,zi.y,di.x,di.y,0,0,Gt),Kh(this.layoutVertexArray,zi.x,zi.y,di.x,di.y,0,1,Gt),Y.x+=2*zi.x,Y.y+=2*zi.y,Y.vertexCount+=2;const nn=we.vertexLength;this.indexArray.emplaceBack(nn,nn+2,nn+1),this.indexArray.emplaceBack(nn+1,nn+2,nn+3),we.vertexLength+=4,we.primitiveLength+=2}}}}if(we.vertexLength+fe>qt.MAX_VERTEX_ARRAY_LENGTH&&(we=this.segments.prepareSegment(fe,this.layoutVertexArray,this.indexArray)),wp[f.type]!=="Polygon")continue;const Fe=[],Ve=[],nt=we.vertexLength;for(const ht of oe)if(ht.length!==0){ht!==oe[0]&&Ve.push(Fe.length/2);for(let Gt=0;Gt<ht.length;Gt++){const Vt=ht[Gt];Kh(this.layoutVertexArray,Vt.x,Vt.y,0,0,1,1,0),Y.x+=Vt.x,Y.y+=Vt.y,Y.vertexCount+=1,Fe.push(Vt.x),Fe.push(Vt.y)}}const lt=vc.exports(Fe,Ve);for(let ht=0;ht<lt.length;ht+=3)this.indexArray.emplaceBack(nt+lt[ht],nt+lt[ht+2],nt+lt[ht+1]);we.primitiveLength+=lt.length/3,we.vertexLength+=fe}for(let oe=0;oe<Y.vertexCount;oe++)this.centroidVertexArray.emplaceBack(Math.floor(Y.x/Y.vertexCount),Math.floor(Y.y/Y.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,q,N)}}function xp(b,f){return b.x===f.x&&(b.x<0||b.x>Oo)||b.y===f.y&&(b.y<0||b.y>Oo)}function pm(b){return b.every(f=>f.x<0)||b.every(f=>f.x>Oo)||b.every(f=>f.y<0)||b.every(f=>f.y>Oo)}Cn("FillExtrusionBucket",Df,{omit:["layers","features"]});var mm={paint:new Wo({"fill-extrusion-opacity":new Qn(ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gr(ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qn(ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qn(ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wu(ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gr(ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gr(ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qn(ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Of(b,f){return b.x*f.x+b.y*f.y}function Ap(b,f){if(b.length===1){let A=0;const P=f[A++];let N;for(;!N||P.equals(N);)if(N=f[A++],!N)return 1/0;for(;A<f.length;A++){const q=f[A],Y=b[0],oe=N.sub(P),fe=q.sub(P),we=Y.sub(P),Fe=Of(oe,oe),Ve=Of(oe,fe),nt=Of(fe,fe),lt=Of(we,oe),ht=Of(we,fe),Gt=Fe*nt-Ve*Ve,Vt=(nt*lt-Ve*ht)/Gt,gi=(Fe*ht-Ve*lt)/Gt,zi=P.z*(1-Vt-gi)+N.z*Vt+q.z*gi;if(isFinite(zi))return zi}return 1/0}{let A=1/0;for(const P of f)A=Math.min(A,P.z);return A}}const Sp=ys([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:gm}=Sp,r=ys([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:s}=r,a=Gc.VectorTileFeature.types,y=Math.cos(Math.PI/180*37.5),S=Math.pow(2,14)/.5;class E{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new Ne,this.layoutVertexArray2=new Ke,this.indexArray=new _i,this.programConfigurations=new Uo(f.layers,f.zoom),this.segments=new qt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){this.hasPattern=Pf("line",this.layers,A);const N=this.layers[0].layout.get("line-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:oe,id:fe,index:we,sourceLayerIndex:Fe}of f){const Ve=this.layers[0]._featureFilter.needGeometry,nt=ml(oe,Ve);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),nt,P))continue;const lt=q?N.evaluate(nt,{},P):void 0,ht={id:fe,properties:oe.properties,type:oe.type,sourceLayerIndex:Fe,index:we,geometry:Ve?nt.geometry:Ka(oe),patterns:{},sortKey:lt};Y.push(ht)}q&&Y.sort((oe,fe)=>oe.sortKey-fe.sortKey);for(const oe of Y){const{geometry:fe,index:we,sourceLayerIndex:Fe}=oe;if(this.hasPattern){const Ve=gd("line",this.layers,oe,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(oe,fe,we,P,{});A.featureIndex.insert(f[we].feature,fe,we,Fe,this.index)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}addFeatures(f,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=f.createVertexBuffer(this.layoutVertexArray2,s)),this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,gm),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(f){if(f.properties&&Object.prototype.hasOwnProperty.call(f.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(f.properties,"mapbox_clip_end"))return{start:+f.properties.mapbox_clip_start,end:+f.properties.mapbox_clip_end}}addFeature(f,A,P,N,q){const Y=this.layers[0].layout,oe=Y.get("line-join").evaluate(f,{}),fe=Y.get("line-cap"),we=Y.get("line-miter-limit"),Fe=Y.get("line-round-limit");this.lineClips=this.lineFeatureClips(f);for(const Ve of A)this.addLine(Ve,f,oe,fe,we,Fe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,q,N)}addLine(f,A,P,N,q,Y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let gi=0;gi<f.length-1;gi++)this.totalDistance+=f[gi].dist(f[gi+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const oe=a[A.type]==="Polygon";let fe=f.length;for(;fe>=2&&f[fe-1].equals(f[fe-2]);)fe--;let we=0;for(;we<fe-1&&f[we].equals(f[we+1]);)we++;if(fe<(oe?3:2))return;P==="bevel"&&(q=1.05);const Fe=this.overscaling<=16?122880/(512*this.overscaling):0,Ve=this.segments.prepareSegment(10*fe,this.layoutVertexArray,this.indexArray);let nt,lt,ht,Gt,Vt;this.e1=this.e2=-1,oe&&(nt=f[fe-2],Vt=f[we].sub(nt)._unit()._perp());for(let gi=we;gi<fe;gi++){if(ht=gi===fe-1?oe?f[we+1]:void 0:f[gi+1],ht&&f[gi].equals(ht))continue;Vt&&(Gt=Vt),nt&&(lt=nt),nt=f[gi],Vt=ht?ht.sub(nt)._unit()._perp():Gt,Gt=Gt||Vt;let zi=Gt.add(Vt);zi.x===0&&zi.y===0||zi._unit();const di=Gt.x*Vt.x+Gt.y*Vt.y,Mi=zi.x*Vt.x+zi.y*Vt.y,nn=Mi!==0?1/Mi:1/0,tn=2*Math.sqrt(2-2*Mi),Wn=Mi<y&&lt&&ht,$n=Gt.x*Vt.y-Gt.y*Vt.x>0;if(Wn&&gi>we){const wn=nt.dist(lt);if(wn>2*Fe){const Nn=nt.sub(nt.sub(lt)._mult(Fe/wn)._round());this.updateDistance(lt,Nn),this.addCurrentVertex(Nn,Gt,0,0,Ve),lt=Nn}}const zn=lt&&ht;let En=zn?P:oe?"butt":N;if(zn&&En==="round"&&(nn<Y?En="miter":nn<=2&&(En="fakeround")),En==="miter"&&nn>q&&(En="bevel"),En==="bevel"&&(nn>2&&(En="flipbevel"),nn<q&&(En="miter")),lt&&this.updateDistance(lt,nt),En==="miter")zi._mult(nn),this.addCurrentVertex(nt,zi,0,0,Ve);else if(En==="flipbevel"){if(nn>100)zi=Vt.mult(-1);else{const wn=nn*Gt.add(Vt).mag()/Gt.sub(Vt).mag();zi._perp()._mult(wn*($n?-1:1))}this.addCurrentVertex(nt,zi,0,0,Ve),this.addCurrentVertex(nt,zi.mult(-1),0,0,Ve)}else if(En==="bevel"||En==="fakeround"){const wn=-Math.sqrt(nn*nn-1),Nn=$n?wn:0,Dn=$n?0:wn;if(lt&&this.addCurrentVertex(nt,Gt,Nn,Dn,Ve),En==="fakeround"){const fn=Math.round(180*tn/Math.PI/20);for(let _r=1;_r<fn;_r++){let lr=_r/fn;if(lr!==.5){const us=lr-.5;lr+=lr*us*(lr-1)*((1.0904+di*(di*(3.55645-1.43519*di)-3.2452))*us*us+(.848013+di*(.215638*di-1.06021)))}const Yr=Vt.sub(Gt)._mult(lr)._add(Gt)._unit()._mult($n?-1:1);this.addHalfVertex(nt,Yr.x,Yr.y,!1,$n,0,Ve)}}ht&&this.addCurrentVertex(nt,Vt,-Nn,-Dn,Ve)}else if(En==="butt")this.addCurrentVertex(nt,zi,0,0,Ve);else if(En==="square"){const wn=lt?1:-1;this.addCurrentVertex(nt,zi,wn,wn,Ve)}else En==="round"&&(lt&&(this.addCurrentVertex(nt,Gt,0,0,Ve),this.addCurrentVertex(nt,Gt,1,1,Ve,!0)),ht&&(this.addCurrentVertex(nt,Vt,-1,-1,Ve,!0),this.addCurrentVertex(nt,Vt,0,0,Ve)));if(Wn&&gi<fe-1){const wn=nt.dist(ht);if(wn>2*Fe){const Nn=nt.add(ht.sub(nt)._mult(Fe/wn)._round());this.updateDistance(nt,Nn),this.addCurrentVertex(Nn,Vt,0,0,Ve),nt=Nn}}}}addCurrentVertex(f,A,P,N,q,Y=!1){const oe=A.y*N-A.x,fe=-A.y-A.x*N;this.addHalfVertex(f,A.x+A.y*P,A.y-A.x*P,Y,!1,P,q),this.addHalfVertex(f,oe,fe,Y,!0,-N,q),this.distance>S/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(f,A,P,N,q,Y))}addHalfVertex({x:f,y:A},P,N,q,Y,oe,fe){const we=.5*(this.lineClips?this.scaledDistance*(S-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((f<<1)+(q?1:0),(A<<1)+(Y?1:0),Math.round(63*P)+128,Math.round(63*N)+128,1+(oe===0?0:oe<0?-1:1)|(63&we)<<2,we>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Fe=fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Fe),fe.primitiveLength++),Y?this.e2=Fe:this.e1=Fe}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(f,A){this.distance+=f.dist(A),this.updateScaledDistance()}}Cn("LineBucket",E,{omit:["layers","patternFeatures"]});const L=new Wo({"line-cap":new Qn(ee.layout_line["line-cap"]),"line-join":new gr(ee.layout_line["line-join"]),"line-miter-limit":new Qn(ee.layout_line["line-miter-limit"]),"line-round-limit":new Qn(ee.layout_line["line-round-limit"]),"line-sort-key":new gr(ee.layout_line["line-sort-key"])});var R={paint:new Wo({"line-opacity":new gr(ee.paint_line["line-opacity"]),"line-color":new gr(ee.paint_line["line-color"]),"line-translate":new Qn(ee.paint_line["line-translate"]),"line-translate-anchor":new Qn(ee.paint_line["line-translate-anchor"]),"line-width":new gr(ee.paint_line["line-width"]),"line-gap-width":new gr(ee.paint_line["line-gap-width"]),"line-offset":new gr(ee.paint_line["line-offset"]),"line-blur":new gr(ee.paint_line["line-blur"]),"line-dasharray":new hc(ee.paint_line["line-dasharray"]),"line-pattern":new Wu(ee.paint_line["line-pattern"]),"line-gradient":new Ss(ee.paint_line["line-gradient"])}),layout:L};const G=new class extends gr{possiblyEvaluate(b,f){return f=new jo(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(b,f)}evaluate(b,f,A,P){return f=C({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(b,f,A,P)}}(R.paint.properties["line-width"].specification);function H(b,f){return f>0?f+2*b:b}G.useIntegerZoom=!0;const te=ys([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),he=ys([{name:"a_projected_pos",components:3,type:"Float32"}],4);ys([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ke=ys([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ys([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ze=ys([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ye=ys([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yt(b,f,A){return b.sections.forEach(P=>{P.text=function(N,q,Y){const oe=q.layout.get("text-transform").evaluate(Y,{});return oe==="uppercase"?N=N.toLocaleUpperCase():oe==="lowercase"&&(N=N.toLocaleLowerCase()),ba.applyArabicShaping&&(N=ba.applyArabicShaping(N)),N}(P.text,f,A)}),b}ys([{name:"triangle",components:3,type:"Uint16"}]),ys([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ys([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ys([{type:"Float32",name:"offsetX"}]),ys([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Lt={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Rt=24,Jt=wi,oi=function(b,f,A,P,N){var q,Y,oe=8*N-P-1,fe=(1<<oe)-1,we=fe>>1,Fe=-7,Ve=A?N-1:0,nt=A?-1:1,lt=b[f+Ve];for(Ve+=nt,q=lt&(1<<-Fe)-1,lt>>=-Fe,Fe+=oe;Fe>0;q=256*q+b[f+Ve],Ve+=nt,Fe-=8);for(Y=q&(1<<-Fe)-1,q>>=-Fe,Fe+=P;Fe>0;Y=256*Y+b[f+Ve],Ve+=nt,Fe-=8);if(q===0)q=1-we;else{if(q===fe)return Y?NaN:1/0*(lt?-1:1);Y+=Math.pow(2,P),q-=we}return(lt?-1:1)*Y*Math.pow(2,q-P)},Fi=function(b,f,A,P,N,q){var Y,oe,fe,we=8*q-N-1,Fe=(1<<we)-1,Ve=Fe>>1,nt=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,lt=P?0:q-1,ht=P?1:-1,Gt=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(oe=isNaN(f)?1:0,Y=Fe):(Y=Math.floor(Math.log(f)/Math.LN2),f*(fe=Math.pow(2,-Y))<1&&(Y--,fe*=2),(f+=Y+Ve>=1?nt/fe:nt*Math.pow(2,1-Ve))*fe>=2&&(Y++,fe/=2),Y+Ve>=Fe?(oe=0,Y=Fe):Y+Ve>=1?(oe=(f*fe-1)*Math.pow(2,N),Y+=Ve):(oe=f*Math.pow(2,Ve-1)*Math.pow(2,N),Y=0));N>=8;b[A+lt]=255&oe,lt+=ht,oe/=256,N-=8);for(Y=Y<<N|oe,we+=N;we>0;b[A+lt]=255&Y,lt+=ht,Y/=256,we-=8);b[A+lt-ht]|=128*Gt};function wi(b){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(b)?b:new Uint8Array(b||0),this.pos=0,this.type=0,this.length=this.buf.length}wi.Varint=0,wi.Fixed64=1,wi.Bytes=2,wi.Fixed32=5;var Ki,on=4294967296,vn=1/on,ir=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Er(b){return b.type===wi.Bytes?b.readVarint()+b.pos:b.pos+1}function _s(b,f,A){return A?4294967296*f+(b>>>0):4294967296*(f>>>0)+(b>>>0)}function Sa(b,f,A){var P=f<=16383?1:f<=2097151?2:f<=268435455?3:Math.floor(Math.log(f)/(7*Math.LN2));A.realloc(P);for(var N=A.pos-1;N>=b;N--)A.buf[N+P]=A.buf[N]}function yl(b,f){for(var A=0;A<b.length;A++)f.writeVarint(b[A])}function Ju(b,f){for(var A=0;A<b.length;A++)f.writeSVarint(b[A])}function Jh(b,f){for(var A=0;A<b.length;A++)f.writeFloat(b[A])}function Q3(b,f){for(var A=0;A<b.length;A++)f.writeDouble(b[A])}function $3(b,f){for(var A=0;A<b.length;A++)f.writeBoolean(b[A])}function ex(b,f){for(var A=0;A<b.length;A++)f.writeFixed32(b[A])}function tx(b,f){for(var A=0;A<b.length;A++)f.writeSFixed32(b[A])}function ix(b,f){for(var A=0;A<b.length;A++)f.writeFixed64(b[A])}function nx(b,f){for(var A=0;A<b.length;A++)f.writeSFixed64(b[A])}function kp(b,f){return(b[f]|b[f+1]<<8|b[f+2]<<16)+16777216*b[f+3]}function _0(b,f,A){b[A]=f,b[A+1]=f>>>8,b[A+2]=f>>>16,b[A+3]=f>>>24}function _y(b,f){return(b[f]|b[f+1]<<8|b[f+2]<<16)+(b[f+3]<<24)}function rx(b,f,A){b===1&&A.readMessage(ox,f)}function ox(b,f,A){if(b===3){const{id:P,bitmap:N,width:q,height:Y,left:oe,top:fe,advance:we}=A.readMessage(sx,{});f.push({id:P,bitmap:new _c({width:q+6,height:Y+6},N),metrics:{width:q,height:Y,left:oe,top:fe,advance:we}})}}function sx(b,f,A){b===1?f.id=A.readVarint():b===2?f.bitmap=A.readBytes():b===3?f.width=A.readVarint():b===4?f.height=A.readVarint():b===5?f.left=A.readSVarint():b===6?f.top=A.readSVarint():b===7&&(f.advance=A.readVarint())}function vy(b){let f=0,A=0;for(const Y of b)f+=Y.w*Y.h,A=Math.max(A,Y.w);b.sort((Y,oe)=>oe.h-Y.h);const P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(f/.95)),A),h:1/0}];let N=0,q=0;for(const Y of b)for(let oe=P.length-1;oe>=0;oe--){const fe=P[oe];if(!(Y.w>fe.w||Y.h>fe.h)){if(Y.x=fe.x,Y.y=fe.y,q=Math.max(q,Y.y+Y.h),N=Math.max(N,Y.x+Y.w),Y.w===fe.w&&Y.h===fe.h){const we=P.pop();oe<P.length&&(P[oe]=we)}else Y.h===fe.h?(fe.x+=Y.w,fe.w-=Y.w):Y.w===fe.w?(fe.y+=Y.h,fe.h-=Y.h):(P.push({x:fe.x+Y.w,y:fe.y,w:fe.w-Y.w,h:Y.h}),fe.y+=Y.h,fe.h-=Y.h);break}}return{w:N,h:q,fill:f/(N*q)||0}}wi.prototype={destroy:function(){this.buf=null},readFields:function(b,f,A){for(A=A||this.length;this.pos<A;){var P=this.readVarint(),N=P>>3,q=this.pos;this.type=7&P,b(N,f,this),this.pos===q&&this.skip(P)}return f},readMessage:function(b,f){return this.readFields(b,f,this.readVarint()+this.pos)},readFixed32:function(){var b=kp(this.buf,this.pos);return this.pos+=4,b},readSFixed32:function(){var b=_y(this.buf,this.pos);return this.pos+=4,b},readFixed64:function(){var b=kp(this.buf,this.pos)+kp(this.buf,this.pos+4)*on;return this.pos+=8,b},readSFixed64:function(){var b=kp(this.buf,this.pos)+_y(this.buf,this.pos+4)*on;return this.pos+=8,b},readFloat:function(){var b=oi(this.buf,this.pos,!0,23,4);return this.pos+=4,b},readDouble:function(){var b=oi(this.buf,this.pos,!0,52,8);return this.pos+=8,b},readVarint:function(b){var f,A,P=this.buf;return f=127&(A=P[this.pos++]),A<128?f:(f|=(127&(A=P[this.pos++]))<<7,A<128?f:(f|=(127&(A=P[this.pos++]))<<14,A<128?f:(f|=(127&(A=P[this.pos++]))<<21,A<128?f:function(N,q,Y){var oe,fe,we=Y.buf;if(oe=(112&(fe=we[Y.pos++]))>>4,fe<128||(oe|=(127&(fe=we[Y.pos++]))<<3,fe<128)||(oe|=(127&(fe=we[Y.pos++]))<<10,fe<128)||(oe|=(127&(fe=we[Y.pos++]))<<17,fe<128)||(oe|=(127&(fe=we[Y.pos++]))<<24,fe<128)||(oe|=(1&(fe=we[Y.pos++]))<<31,fe<128))return _s(N,oe,q);throw new Error("Expected varint not more than 10 bytes")}(f|=(15&(A=P[this.pos]))<<28,b,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var b=this.readVarint();return b%2==1?(b+1)/-2:b/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var b=this.readVarint()+this.pos,f=this.pos;return this.pos=b,b-f>=12&&ir?function(A,P,N){return ir.decode(A.subarray(P,N))}(this.buf,f,b):function(A,P,N){for(var q="",Y=P;Y<N;){var oe,fe,we,Fe=A[Y],Ve=null,nt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(Y+nt>N)break;nt===1?Fe<128&&(Ve=Fe):nt===2?(192&(oe=A[Y+1]))==128&&(Ve=(31&Fe)<<6|63&oe)<=127&&(Ve=null):nt===3?(fe=A[Y+2],(192&(oe=A[Y+1]))==128&&(192&fe)==128&&((Ve=(15&Fe)<<12|(63&oe)<<6|63&fe)<=2047||Ve>=55296&&Ve<=57343)&&(Ve=null)):nt===4&&(fe=A[Y+2],we=A[Y+3],(192&(oe=A[Y+1]))==128&&(192&fe)==128&&(192&we)==128&&((Ve=(15&Fe)<<18|(63&oe)<<12|(63&fe)<<6|63&we)<=65535||Ve>=1114112)&&(Ve=null)),Ve===null?(Ve=65533,nt=1):Ve>65535&&(Ve-=65536,q+=String.fromCharCode(Ve>>>10&1023|55296),Ve=56320|1023&Ve),q+=String.fromCharCode(Ve),Y+=nt}return q}(this.buf,f,b)},readBytes:function(){var b=this.readVarint()+this.pos,f=this.buf.subarray(this.pos,b);return this.pos=b,f},readPackedVarint:function(b,f){if(this.type!==wi.Bytes)return b.push(this.readVarint(f));var A=Er(this);for(b=b||[];this.pos<A;)b.push(this.readVarint(f));return b},readPackedSVarint:function(b){if(this.type!==wi.Bytes)return b.push(this.readSVarint());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readSVarint());return b},readPackedBoolean:function(b){if(this.type!==wi.Bytes)return b.push(this.readBoolean());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readBoolean());return b},readPackedFloat:function(b){if(this.type!==wi.Bytes)return b.push(this.readFloat());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readFloat());return b},readPackedDouble:function(b){if(this.type!==wi.Bytes)return b.push(this.readDouble());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readDouble());return b},readPackedFixed32:function(b){if(this.type!==wi.Bytes)return b.push(this.readFixed32());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readFixed32());return b},readPackedSFixed32:function(b){if(this.type!==wi.Bytes)return b.push(this.readSFixed32());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readSFixed32());return b},readPackedFixed64:function(b){if(this.type!==wi.Bytes)return b.push(this.readFixed64());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readFixed64());return b},readPackedSFixed64:function(b){if(this.type!==wi.Bytes)return b.push(this.readSFixed64());var f=Er(this);for(b=b||[];this.pos<f;)b.push(this.readSFixed64());return b},skip:function(b){var f=7&b;if(f===wi.Varint)for(;this.buf[this.pos++]>127;);else if(f===wi.Bytes)this.pos=this.readVarint()+this.pos;else if(f===wi.Fixed32)this.pos+=4;else{if(f!==wi.Fixed64)throw new Error("Unimplemented type: "+f);this.pos+=8}},writeTag:function(b,f){this.writeVarint(b<<3|f)},realloc:function(b){for(var f=this.length||16;f<this.pos+b;)f*=2;if(f!==this.length){var A=new Uint8Array(f);A.set(this.buf),this.buf=A,this.length=f}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(b){this.realloc(4),_0(this.buf,b,this.pos),this.pos+=4},writeSFixed32:function(b){this.realloc(4),_0(this.buf,b,this.pos),this.pos+=4},writeFixed64:function(b){this.realloc(8),_0(this.buf,-1&b,this.pos),_0(this.buf,Math.floor(b*vn),this.pos+4),this.pos+=8},writeSFixed64:function(b){this.realloc(8),_0(this.buf,-1&b,this.pos),_0(this.buf,Math.floor(b*vn),this.pos+4),this.pos+=8},writeVarint:function(b){(b=+b||0)>268435455||b<0?function(f,A){var P,N;if(f>=0?(P=f%4294967296|0,N=f/4294967296|0):(N=~(-f/4294967296),4294967295^(P=~(-f%4294967296))?P=P+1|0:(P=0,N=N+1|0)),f>=18446744073709552e3||f<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(q,Y,oe){oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,oe.buf[oe.pos]=127&(q>>>=7)}(P,0,A),function(q,Y){var oe=(7&q)<<4;Y.buf[Y.pos++]|=oe|((q>>>=3)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q)))))}(N,A)}(b,this):(this.realloc(4),this.buf[this.pos++]=127&b|(b>127?128:0),b<=127||(this.buf[this.pos++]=127&(b>>>=7)|(b>127?128:0),b<=127||(this.buf[this.pos++]=127&(b>>>=7)|(b>127?128:0),b<=127||(this.buf[this.pos++]=b>>>7&127))))},writeSVarint:function(b){this.writeVarint(b<0?2*-b-1:2*b)},writeBoolean:function(b){this.writeVarint(Boolean(b))},writeString:function(b){b=String(b),this.realloc(4*b.length),this.pos++;var f=this.pos;this.pos=function(P,N,q){for(var Y,oe,fe=0;fe<N.length;fe++){if((Y=N.charCodeAt(fe))>55295&&Y<57344){if(!oe){Y>56319||fe+1===N.length?(P[q++]=239,P[q++]=191,P[q++]=189):oe=Y;continue}if(Y<56320){P[q++]=239,P[q++]=191,P[q++]=189,oe=Y;continue}Y=oe-55296<<10|Y-56320|65536,oe=null}else oe&&(P[q++]=239,P[q++]=191,P[q++]=189,oe=null);Y<128?P[q++]=Y:(Y<2048?P[q++]=Y>>6|192:(Y<65536?P[q++]=Y>>12|224:(P[q++]=Y>>18|240,P[q++]=Y>>12&63|128),P[q++]=Y>>6&63|128),P[q++]=63&Y|128)}return q}(this.buf,b,this.pos);var A=this.pos-f;A>=128&&Sa(f,A,this),this.pos=f-1,this.writeVarint(A),this.pos+=A},writeFloat:function(b){this.realloc(4),Fi(this.buf,b,this.pos,!0,23,4),this.pos+=4},writeDouble:function(b){this.realloc(8),Fi(this.buf,b,this.pos,!0,52,8),this.pos+=8},writeBytes:function(b){var f=b.length;this.writeVarint(f),this.realloc(f);for(var A=0;A<f;A++)this.buf[this.pos++]=b[A]},writeRawMessage:function(b,f){this.pos++;var A=this.pos;b(f,this);var P=this.pos-A;P>=128&&Sa(A,P,this),this.pos=A-1,this.writeVarint(P),this.pos+=P},writeMessage:function(b,f,A){this.writeTag(b,wi.Bytes),this.writeRawMessage(f,A)},writePackedVarint:function(b,f){f.length&&this.writeMessage(b,yl,f)},writePackedSVarint:function(b,f){f.length&&this.writeMessage(b,Ju,f)},writePackedBoolean:function(b,f){f.length&&this.writeMessage(b,$3,f)},writePackedFloat:function(b,f){f.length&&this.writeMessage(b,Jh,f)},writePackedDouble:function(b,f){f.length&&this.writeMessage(b,Q3,f)},writePackedFixed32:function(b,f){f.length&&this.writeMessage(b,ex,f)},writePackedSFixed32:function(b,f){f.length&&this.writeMessage(b,tx,f)},writePackedFixed64:function(b,f){f.length&&this.writeMessage(b,ix,f)},writePackedSFixed64:function(b,f){f.length&&this.writeMessage(b,nx,f)},writeBytesField:function(b,f){this.writeTag(b,wi.Bytes),this.writeBytes(f)},writeFixed32Field:function(b,f){this.writeTag(b,wi.Fixed32),this.writeFixed32(f)},writeSFixed32Field:function(b,f){this.writeTag(b,wi.Fixed32),this.writeSFixed32(f)},writeFixed64Field:function(b,f){this.writeTag(b,wi.Fixed64),this.writeFixed64(f)},writeSFixed64Field:function(b,f){this.writeTag(b,wi.Fixed64),this.writeSFixed64(f)},writeVarintField:function(b,f){this.writeTag(b,wi.Varint),this.writeVarint(f)},writeSVarintField:function(b,f){this.writeTag(b,wi.Varint),this.writeSVarint(f)},writeStringField:function(b,f){this.writeTag(b,wi.Bytes),this.writeString(f)},writeFloatField:function(b,f){this.writeTag(b,wi.Fixed32),this.writeFloat(f)},writeDoubleField:function(b,f){this.writeTag(b,wi.Fixed64),this.writeDouble(f)},writeBooleanField:function(b,f){this.writeVarintField(b,Boolean(f))}};class ym{constructor(f,{pixelRatio:A,version:P,stretchX:N,stretchY:q,content:Y}){this.paddedRect=f,this.pixelRatio=A,this.stretchX=N,this.stretchY=q,this.content=Y,this.version=P}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class by{constructor(f,A){const P={},N={};this.haveRenderCallbacks=[];const q=[];this.addImages(f,P,q),this.addImages(A,N,q);const{w:Y,h:oe}=vy(q),fe=new xa({width:Y||1,height:oe||1});for(const we in f){const Fe=f[we],Ve=P[we].paddedRect;xa.copy(Fe.data,fe,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Fe.data)}for(const we in A){const Fe=A[we],Ve=N[we].paddedRect,nt=Ve.x+1,lt=Ve.y+1,ht=Fe.data.width,Gt=Fe.data.height;xa.copy(Fe.data,fe,{x:0,y:0},{x:nt,y:lt},Fe.data),xa.copy(Fe.data,fe,{x:0,y:Gt-1},{x:nt,y:lt-1},{width:ht,height:1}),xa.copy(Fe.data,fe,{x:0,y:0},{x:nt,y:lt+Gt},{width:ht,height:1}),xa.copy(Fe.data,fe,{x:ht-1,y:0},{x:nt-1,y:lt},{width:1,height:Gt}),xa.copy(Fe.data,fe,{x:0,y:0},{x:nt+ht,y:lt},{width:1,height:Gt})}this.image=fe,this.iconPositions=P,this.patternPositions=N}addImages(f,A,P){for(const N in f){const q=f[N],Y={x:0,y:0,w:q.data.width+2,h:q.data.height+2};P.push(Y),A[N]=new ym(Y,q),q.hasRenderCallback&&this.haveRenderCallbacks.push(N)}}patchUpdatedImages(f,A){f.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const P in f.updatedImages)this.patchUpdatedImage(this.iconPositions[P],f.getImage(P),A),this.patchUpdatedImage(this.patternPositions[P],f.getImage(P),A)}patchUpdatedImage(f,A,P){if(!f||!A||f.version===A.version)return;f.version=A.version;const[N,q]=f.tl;P.update(A.data,void 0,{x:N,y:q})}}Cn("ImagePosition",ym),Cn("ImageAtlas",by),o.WritingMode=void 0,(Ki=o.WritingMode||(o.WritingMode={}))[Ki.none=0]="none",Ki[Ki.horizontal=1]="horizontal",Ki[Ki.vertical=2]="vertical",Ki[Ki.horizontalOnly=3]="horizontalOnly";const Cp=-17;class vd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(f,A){const P=new vd;return P.scale=f||1,P.fontStack=A,P}static forImage(f){const A=new vd;return A.imageName=f,A}}class v0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(f,A){const P=new v0;for(let N=0;N<f.sections.length;N++){const q=f.sections[N];q.image?P.addImageSection(q):P.addTextSection(q,A)}return P}length(){return this.text.length}getSection(f){return this.sections[this.sectionIndex[f]]}getSectionIndex(f){return this.sectionIndex[f]}getCharCode(f){return this.text.charCodeAt(f)}verticalizePunctuation(){this.text=function(f){let A="";for(let P=0;P<f.length;P++){const N=f.charCodeAt(P+1)||null,q=f.charCodeAt(P-1)||null;A+=N&&dh(N)&&!Lt[f[P+1]]||q&&dh(q)&&!Lt[f[P-1]]||!Lt[f[P]]?f[P]:Lt[f[P]]}return A}(this.text)}trim(){let f=0;for(let P=0;P<this.text.length&&Ip[this.text.charCodeAt(P)];P++)f++;let A=this.text.length;for(let P=this.text.length-1;P>=0&&P>=f&&Ip[this.text.charCodeAt(P)];P--)A--;this.text=this.text.substring(f,A),this.sectionIndex=this.sectionIndex.slice(f,A)}substring(f,A){const P=new v0;return P.text=this.text.substring(f,A),P.sectionIndex=this.sectionIndex.slice(f,A),P.sections=this.sections,P}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((f,A)=>Math.max(f,this.sections[A].scale),0)}addTextSection(f,A){this.text+=f.text,this.sections.push(vd.forText(f.scale,f.fontStack||A));const P=this.sections.length-1;for(let N=0;N<f.text.length;++N)this.sectionIndex.push(P)}addImageSection(f){const A=f.image?f.image.name:"";if(A.length===0)return void J("Can't add FormattedSection with an empty image.");const P=this.getNextImageSectionCharCode();P?(this.text+=String.fromCharCode(P),this.sections.push(vd.forImage(A)),this.sectionIndex.push(this.sections.length-1)):J("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ep(b,f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt){const Vt=v0.fromFeature(b,N);let gi;Ve===o.WritingMode.vertical&&Vt.verticalizePunctuation();const{processBidirectionalText:zi,processStyledBidirectionalText:di}=ba;if(zi&&Vt.sections.length===1){gi=[];const tn=zi(Vt.toString(),_m(Vt,we,q,f,P,lt,ht));for(const Wn of tn){const $n=new v0;$n.text=Wn,$n.sections=Vt.sections;for(let zn=0;zn<Wn.length;zn++)$n.sectionIndex.push(0);gi.push($n)}}else if(di){gi=[];const tn=di(Vt.text,Vt.sectionIndex,_m(Vt,we,q,f,P,lt,ht));for(const Wn of tn){const $n=new v0;$n.text=Wn[0],$n.sectionIndex=Wn[1],$n.sections=Vt.sections,gi.push($n)}}else gi=function(tn,Wn){const $n=[],zn=tn.text;let En=0;for(const wn of Wn)$n.push(tn.substring(En,wn)),En=wn;return En<zn.length&&$n.push(tn.substring(En,zn.length)),$n}(Vt,_m(Vt,we,q,f,P,lt,ht));const Mi=[],nn={positionedLines:Mi,text:Vt.toString(),top:Fe[1],bottom:Fe[1],left:Fe[0],right:Fe[0],writingMode:Ve,iconsInText:!1,verticalizable:!1};return function(tn,Wn,$n,zn,En,wn,Nn,Dn,fn,_r,lr,Yr){let us=0,ds=Cp,$s=0,Lu=0;const Na=Dn==="right"?1:Dn==="left"?0:.5;let Xs=0;for(const Ys of En){Ys.trim();const Ua=Ys.getMaxScale(),el=(Ua-1)*Rt,_l={positionedGlyphs:[],lineOffset:0};tn.positionedLines[Xs]=_l;const Rl=_l.positionedGlyphs;let Bl=0;if(!Ys.length()){ds+=wn,++Xs;continue}for(let ha=0;ha<Ys.length();ha++){const ro=Ys.getSection(ha),ou=Ys.getSectionIndex(ha),Va=Ys.getCharCode(ha);let tl=0,Qu=null,xc=null,Ac=null,Ah=Rt;const $u=!(fn===o.WritingMode.horizontal||!lr&&!Bc(Va)||lr&&(Ip[Va]||(ca=Va,mn.Arabic(ca)||mn["Arabic Supplement"](ca)||mn["Arabic Extended-A"](ca)||mn["Arabic Presentation Forms-A"](ca)||mn["Arabic Presentation Forms-B"](ca))));if(ro.imageName){const Pu=zn[ro.imageName];if(!Pu)continue;Ac=ro.imageName,tn.iconsInText=tn.iconsInText||!0,xc=Pu.paddedRect;const zl=Pu.displaySize;ro.scale=ro.scale*Rt/Yr,Qu={width:zl[0],height:zl[1],left:1,top:-3,advance:$u?zl[1]:zl[0]},tl=el+(Rt-zl[1]*ro.scale),Ah=Qu.advance;const Sh=$u?zl[0]*ro.scale-Rt*Ua:zl[1]*ro.scale-Rt*Ua;Sh>0&&Sh>Bl&&(Bl=Sh)}else{const Pu=$n[ro.fontStack],zl=Pu&&Pu[Va];if(zl&&zl.rect)xc=zl.rect,Qu=zl.metrics;else{const Sh=Wn[ro.fontStack],xd=Sh&&Sh[Va];if(!xd)continue;Qu=xd.metrics}tl=(Ua-ro.scale)*Rt}$u?(tn.verticalizable=!0,Rl.push({glyph:Va,imageName:Ac,x:us,y:ds+tl,vertical:$u,scale:ro.scale,fontStack:ro.fontStack,sectionIndex:ou,metrics:Qu,rect:xc}),us+=Ah*ro.scale+_r):(Rl.push({glyph:Va,imageName:Ac,x:us,y:ds+tl,vertical:$u,scale:ro.scale,fontStack:ro.fontStack,sectionIndex:ou,metrics:Qu,rect:xc}),us+=Qu.advance*ro.scale+_r)}Rl.length!==0&&($s=Math.max(us-_r,$s),ux(Rl,0,Rl.length-1,Na,Bl)),us=0;const vs=wn*Ua+Bl;_l.lineOffset=Math.max(Bl,el),ds+=vs,Lu=Math.max(vs,Lu),++Xs}var ca;const ja=ds-Cp,{horizontalAlign:$a,verticalAlign:Fl}=vm(Nn);(function(Ys,Ua,el,_l,Rl,Bl,vs,ha,ro){const ou=(Ua-el)*Rl;let Va=0;Va=Bl!==vs?-ha*_l-Cp:(-_l*ro+.5)*vs;for(const tl of Ys)for(const Qu of tl.positionedGlyphs)Qu.x+=ou,Qu.y+=Va})(tn.positionedLines,Na,$a,Fl,$s,Lu,wn,ja,En.length),tn.top+=-Fl*ja,tn.bottom=tn.top+ja,tn.left+=-$a*$s,tn.right=tn.left+$s}(nn,f,A,P,gi,Y,oe,fe,Ve,we,nt,Gt),!function(tn){for(const Wn of tn)if(Wn.positionedGlyphs.length!==0)return!1;return!0}(Mi)&&nn}const Ip={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ax={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function wy(b,f,A,P,N,q){if(f.imageName){const Y=P[f.imageName];return Y?Y.displaySize[0]*f.scale*Rt/q+N:0}{const Y=A[f.fontStack],oe=Y&&Y[b];return oe?oe.metrics.advance*f.scale+N:0}}function xy(b,f,A,P){const N=Math.pow(b-f,2);return P?b<f?N/2:2*N:N+Math.abs(A)*A}function lx(b,f,A){let P=0;return b===10&&(P-=1e4),A&&(P+=150),b!==40&&b!==65288||(P+=50),f!==41&&f!==65289||(P+=50),P}function Ay(b,f,A,P,N,q){let Y=null,oe=xy(f,A,N,q);for(const fe of P){const we=xy(f-fe.x,A,N,q)+fe.badness;we<=oe&&(Y=fe,oe=we)}return{index:b,x:f,priorBreak:Y,badness:oe}}function Sy(b){return b?Sy(b.priorBreak).concat(b.index):[]}function _m(b,f,A,P,N,q,Y){if(q!=="point")return[];if(!b)return[];const oe=[],fe=function(nt,lt,ht,Gt,Vt,gi){let zi=0;for(let di=0;di<nt.length();di++){const Mi=nt.getSection(di);zi+=wy(nt.getCharCode(di),Mi,Gt,Vt,lt,gi)}return zi/Math.max(1,Math.ceil(zi/ht))}(b,f,A,P,N,Y),we=b.text.indexOf("\u200B")>=0;let Fe=0;for(let nt=0;nt<b.length();nt++){const lt=b.getSection(nt),ht=b.getCharCode(nt);if(Ip[ht]||(Fe+=wy(ht,lt,P,N,f,Y)),nt<b.length()-1){const Gt=!((Ve=ht)<11904||!(mn["Bopomofo Extended"](Ve)||mn.Bopomofo(Ve)||mn["CJK Compatibility Forms"](Ve)||mn["CJK Compatibility Ideographs"](Ve)||mn["CJK Compatibility"](Ve)||mn["CJK Radicals Supplement"](Ve)||mn["CJK Strokes"](Ve)||mn["CJK Symbols and Punctuation"](Ve)||mn["CJK Unified Ideographs Extension A"](Ve)||mn["CJK Unified Ideographs"](Ve)||mn["Enclosed CJK Letters and Months"](Ve)||mn["Halfwidth and Fullwidth Forms"](Ve)||mn.Hiragana(Ve)||mn["Ideographic Description Characters"](Ve)||mn["Kangxi Radicals"](Ve)||mn["Katakana Phonetic Extensions"](Ve)||mn.Katakana(Ve)||mn["Vertical Forms"](Ve)||mn["Yi Radicals"](Ve)||mn["Yi Syllables"](Ve)));(ax[ht]||Gt||lt.imageName)&&oe.push(Ay(nt+1,Fe,fe,oe,lx(ht,b.getCharCode(nt+1),Gt&&we),!1))}}var Ve;return Sy(Ay(b.length(),Fe,fe,oe,0,!0))}function vm(b){let f=.5,A=.5;switch(b){case"right":case"top-right":case"bottom-right":f=1;break;case"left":case"top-left":case"bottom-left":f=0}switch(b){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:f,verticalAlign:A}}function ux(b,f,A,P,N){if(!P&&!N)return;const q=b[A],Y=(b[A].x+q.metrics.advance*q.scale)*P;for(let oe=f;oe<=A;oe++)b[oe].x-=Y,b[oe].y+=N}function cx(b,f,A){const{horizontalAlign:P,verticalAlign:N}=vm(A),q=f[0]-b.displaySize[0]*P,Y=f[1]-b.displaySize[1]*N;return{image:b,top:Y,bottom:Y+b.displaySize[1],left:q,right:q+b.displaySize[0]}}function ky(b,f,A,P,N,q){const Y=b.image;let oe;if(Y.content){const Vt=Y.content,gi=Y.pixelRatio||1;oe=[Vt[0]/gi,Vt[1]/gi,Y.displaySize[0]-Vt[2]/gi,Y.displaySize[1]-Vt[3]/gi]}const fe=f.left*q,we=f.right*q;let Fe,Ve,nt,lt;A==="width"||A==="both"?(lt=N[0]+fe-P[3],Ve=N[0]+we+P[1]):(lt=N[0]+(fe+we-Y.displaySize[0])/2,Ve=lt+Y.displaySize[0]);const ht=f.top*q,Gt=f.bottom*q;return A==="height"||A==="both"?(Fe=N[1]+ht-P[0],nt=N[1]+Gt+P[2]):(Fe=N[1]+(ht+Gt-Y.displaySize[1])/2,nt=Fe+Y.displaySize[1]),{image:Y,top:Fe,right:Ve,bottom:nt,left:lt,collisionPadding:oe}}const xh=128;function Cy(b,f){const{expression:A}=f;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new jo(b+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:P,interpolationType:N}=A;let q=0;for(;q<P.length&&P[q]<=b;)q++;q=Math.max(0,q-1);let Y=q;for(;Y<P.length&&P[Y]<b+1;)Y++;Y=Math.min(P.length-1,Y);const oe=P[q],fe=P[Y];return A.kind==="composite"?{kind:"composite",minZoom:oe,maxZoom:fe,interpolationType:N}:{kind:"camera",minZoom:oe,maxZoom:fe,minSize:A.evaluate(new jo(oe)),maxSize:A.evaluate(new jo(fe)),interpolationType:N}}}class Qh extends rt{constructor(f,A,P,N){super(f,A),this.angle=P,N!==void 0&&(this.segment=N)}clone(){return new Qh(this.x,this.y,this.angle,this.segment)}}function Ey(b,f,A,P,N){if(f.segment===void 0)return!0;let q=f,Y=f.segment+1,oe=0;for(;oe>-A/2;){if(Y--,Y<0)return!1;oe-=b[Y].dist(q),q=b[Y]}oe+=b[Y].dist(b[Y+1]),Y++;const fe=[];let we=0;for(;oe<A/2;){const Fe=b[Y],Ve=b[Y+1];if(!Ve)return!1;let nt=b[Y-1].angleTo(Fe)-Fe.angleTo(Ve);for(nt=Math.abs((nt+3*Math.PI)%(2*Math.PI)-Math.PI),fe.push({distance:oe,angleDelta:nt}),we+=nt;oe-fe[0].distance>P;)we-=fe.shift().angleDelta;if(we>N)return!1;Y++,oe+=Fe.dist(Ve)}return!0}function Iy(b){let f=0;for(let A=0;A<b.length-1;A++)f+=b[A].dist(b[A+1]);return f}function Ty(b,f,A){return b?.6*f*A:0}function Ly(b,f){return Math.max(b?b.right-b.left:0,f?f.right-f.left:0)}function hx(b,f,A,P,N,q){const Y=Ty(A,N,q),oe=Ly(A,P)*q;let fe=0;const we=Iy(b)/2;for(let Fe=0;Fe<b.length-1;Fe++){const Ve=b[Fe],nt=b[Fe+1],lt=Ve.dist(nt);if(fe+lt>we){const ht=(we-fe)/lt,Gt=Io(Ve.x,nt.x,ht),Vt=Io(Ve.y,nt.y,ht),gi=new Qh(Gt,Vt,nt.angleTo(Ve),Fe);return gi._round(),!Y||Ey(b,gi,oe,Y,f)?gi:void 0}fe+=lt}}function fx(b,f,A,P,N,q,Y,oe,fe){const we=Ty(P,q,Y),Fe=Ly(P,N),Ve=Fe*Y,nt=b[0].x===0||b[0].x===fe||b[0].y===0||b[0].y===fe;return f-Ve<f/4&&(f=Ve+f/4),Py(b,nt?f/2*oe%f:(Fe/2+2*q)*Y*oe%f,f,we,A,Ve,nt,!1,fe)}function Py(b,f,A,P,N,q,Y,oe,fe){const we=q/2,Fe=Iy(b);let Ve=0,nt=f-A,lt=[];for(let ht=0;ht<b.length-1;ht++){const Gt=b[ht],Vt=b[ht+1],gi=Gt.dist(Vt),zi=Vt.angleTo(Gt);for(;nt+A<Ve+gi;){nt+=A;const di=(nt-Ve)/gi,Mi=Io(Gt.x,Vt.x,di),nn=Io(Gt.y,Vt.y,di);if(Mi>=0&&Mi<fe&&nn>=0&&nn<fe&&nt-we>=0&&nt+we<=Fe){const tn=new Qh(Mi,nn,zi,ht);tn._round(),P&&!Ey(b,tn,q,P,N)||lt.push(tn)}}Ve+=gi}return oe||lt.length||Y||(lt=Py(b,Ve/2,A,P,N,q,Y,!0,fe)),lt}function My(b,f,A,P,N){const q=[];for(let Y=0;Y<b.length;Y++){const oe=b[Y];let fe;for(let we=0;we<oe.length-1;we++){let Fe=oe[we],Ve=oe[we+1];Fe.x<f&&Ve.x<f||(Fe.x<f?Fe=new rt(f,Fe.y+(f-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round():Ve.x<f&&(Ve=new rt(f,Fe.y+(f-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round()),Fe.y<A&&Ve.y<A||(Fe.y<A?Fe=new rt(Fe.x+(A-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),A)._round():Ve.y<A&&(Ve=new rt(Fe.x+(A-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),A)._round()),Fe.x>=P&&Ve.x>=P||(Fe.x>=P?Fe=new rt(P,Fe.y+(P-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round():Ve.x>=P&&(Ve=new rt(P,Fe.y+(P-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round()),Fe.y>=N&&Ve.y>=N||(Fe.y>=N?Fe=new rt(Fe.x+(N-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),N)._round():Ve.y>=N&&(Ve=new rt(Fe.x+(N-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),N)._round()),fe&&Fe.equals(fe[fe.length-1])||(fe=[Fe],q.push(fe)),fe.push(Ve)))))}}return q}function Dy(b,f,A,P){const N=[],q=b.image,Y=q.pixelRatio,oe=q.paddedRect.w-2,fe=q.paddedRect.h-2,we=b.right-b.left,Fe=b.bottom-b.top,Ve=q.stretchX||[[0,oe]],nt=q.stretchY||[[0,fe]],lt=(wn,Nn)=>wn+Nn[1]-Nn[0],ht=Ve.reduce(lt,0),Gt=nt.reduce(lt,0),Vt=oe-ht,gi=fe-Gt;let zi=0,di=ht,Mi=0,nn=Gt,tn=0,Wn=Vt,$n=0,zn=gi;if(q.content&&P){const wn=q.content;zi=Tp(Ve,0,wn[0]),Mi=Tp(nt,0,wn[1]),di=Tp(Ve,wn[0],wn[2]),nn=Tp(nt,wn[1],wn[3]),tn=wn[0]-zi,$n=wn[1]-Mi,Wn=wn[2]-wn[0]-di,zn=wn[3]-wn[1]-nn}const En=(wn,Nn,Dn,fn)=>{const _r=Lp(wn.stretch-zi,di,we,b.left),lr=Pp(wn.fixed-tn,Wn,wn.stretch,ht),Yr=Lp(Nn.stretch-Mi,nn,Fe,b.top),us=Pp(Nn.fixed-$n,zn,Nn.stretch,Gt),ds=Lp(Dn.stretch-zi,di,we,b.left),$s=Pp(Dn.fixed-tn,Wn,Dn.stretch,ht),Lu=Lp(fn.stretch-Mi,nn,Fe,b.top),Na=Pp(fn.fixed-$n,zn,fn.stretch,Gt),Xs=new rt(_r,Yr),ca=new rt(ds,Yr),ja=new rt(ds,Lu),$a=new rt(_r,Lu),Fl=new rt(lr/Y,us/Y),Ys=new rt($s/Y,Na/Y),Ua=f*Math.PI/180;if(Ua){const Rl=Math.sin(Ua),Bl=Math.cos(Ua),vs=[Bl,-Rl,Rl,Bl];Xs._matMult(vs),ca._matMult(vs),$a._matMult(vs),ja._matMult(vs)}const el=wn.stretch+wn.fixed,_l=Nn.stretch+Nn.fixed;return{tl:Xs,tr:ca,bl:$a,br:ja,tex:{x:q.paddedRect.x+1+el,y:q.paddedRect.y+1+_l,w:Dn.stretch+Dn.fixed-el,h:fn.stretch+fn.fixed-_l},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fl,pixelOffsetBR:Ys,minFontScaleX:Wn/Y/we,minFontScaleY:zn/Y/Fe,isSDF:A}};if(P&&(q.stretchX||q.stretchY)){const wn=Oy(Ve,Vt,ht),Nn=Oy(nt,gi,Gt);for(let Dn=0;Dn<wn.length-1;Dn++){const fn=wn[Dn],_r=wn[Dn+1];for(let lr=0;lr<Nn.length-1;lr++)N.push(En(fn,Nn[lr],_r,Nn[lr+1]))}}else N.push(En({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:oe+1},{fixed:0,stretch:fe+1}));return N}function Tp(b,f,A){let P=0;for(const N of b)P+=Math.max(f,Math.min(A,N[1]))-Math.max(f,Math.min(A,N[0]));return P}function Oy(b,f,A){const P=[{fixed:-1,stretch:0}];for(const[N,q]of b){const Y=P[P.length-1];P.push({fixed:N-Y.stretch,stretch:Y.stretch}),P.push({fixed:N-Y.stretch,stretch:Y.stretch+(q-N)})}return P.push({fixed:f+1,stretch:A}),P}function Lp(b,f,A,P){return b/f*A+P}function Pp(b,f,A,P){return b-f*A/P}Cn("Anchor",Qh);class Mp{constructor(f,A,P,N,q,Y,oe,fe,we,Fe){if(this.boxStartIndex=f.length,we){let Ve=Y.top,nt=Y.bottom;const lt=Y.collisionPadding;lt&&(Ve-=lt[1],nt+=lt[3]);let ht=nt-Ve;ht>0&&(ht=Math.max(10,ht),this.circleDiameter=ht)}else{let Ve=Y.top*oe-fe[0],nt=Y.bottom*oe+fe[2],lt=Y.left*oe-fe[3],ht=Y.right*oe+fe[1];const Gt=Y.collisionPadding;if(Gt&&(lt-=Gt[0]*oe,Ve-=Gt[1]*oe,ht+=Gt[2]*oe,nt+=Gt[3]*oe),Fe){const Vt=new rt(lt,Ve),gi=new rt(ht,Ve),zi=new rt(lt,nt),di=new rt(ht,nt),Mi=Fe*Math.PI/180;Vt._rotate(Mi),gi._rotate(Mi),zi._rotate(Mi),di._rotate(Mi),lt=Math.min(Vt.x,gi.x,zi.x,di.x),ht=Math.max(Vt.x,gi.x,zi.x,di.x),Ve=Math.min(Vt.y,gi.y,zi.y,di.y),nt=Math.max(Vt.y,gi.y,zi.y,di.y)}f.emplaceBack(A.x,A.y,lt,Ve,ht,nt,P,N,q)}this.boxEndIndex=f.length}}class dx{constructor(f=[],A=px){if(this.data=f,this.length=this.data.length,this.compare=A,this.length>0)for(let P=(this.length>>1)-1;P>=0;P--)this._down(P)}push(f){this.data.push(f),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const f=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:A,compare:P}=this,N=A[f];for(;f>0;){const q=f-1>>1,Y=A[q];if(P(N,Y)>=0)break;A[f]=Y,f=q}A[f]=N}_down(f){const{data:A,compare:P}=this,N=this.length>>1,q=A[f];for(;f<N;){let Y=1+(f<<1),oe=A[Y];const fe=Y+1;if(fe<this.length&&P(A[fe],oe)<0&&(Y=fe,oe=A[fe]),P(oe,q)>=0)break;A[f]=oe,f=Y}A[f]=q}}function px(b,f){return b<f?-1:b>f?1:0}function mx(b,f=1,A=!1){let P=1/0,N=1/0,q=-1/0,Y=-1/0;const oe=b[0];for(let lt=0;lt<oe.length;lt++){const ht=oe[lt];(!lt||ht.x<P)&&(P=ht.x),(!lt||ht.y<N)&&(N=ht.y),(!lt||ht.x>q)&&(q=ht.x),(!lt||ht.y>Y)&&(Y=ht.y)}const fe=Math.min(q-P,Y-N);let we=fe/2;const Fe=new dx([],gx);if(fe===0)return new rt(P,N);for(let lt=P;lt<q;lt+=fe)for(let ht=N;ht<Y;ht+=fe)Fe.push(new b0(lt+we,ht+we,we,b));let Ve=function(lt){let ht=0,Gt=0,Vt=0;const gi=lt[0];for(let zi=0,di=gi.length,Mi=di-1;zi<di;Mi=zi++){const nn=gi[zi],tn=gi[Mi],Wn=nn.x*tn.y-tn.x*nn.y;Gt+=(nn.x+tn.x)*Wn,Vt+=(nn.y+tn.y)*Wn,ht+=3*Wn}return new b0(Gt/ht,Vt/ht,0,lt)}(b),nt=Fe.length;for(;Fe.length;){const lt=Fe.pop();(lt.d>Ve.d||!Ve.d)&&(Ve=lt,A&&console.log("found best %d after %d probes",Math.round(1e4*lt.d)/1e4,nt)),lt.max-Ve.d<=f||(we=lt.h/2,Fe.push(new b0(lt.p.x-we,lt.p.y-we,we,b)),Fe.push(new b0(lt.p.x+we,lt.p.y-we,we,b)),Fe.push(new b0(lt.p.x-we,lt.p.y+we,we,b)),Fe.push(new b0(lt.p.x+we,lt.p.y+we,we,b)),nt+=4)}return A&&(console.log(`num probes: ${nt}`),console.log(`best distance: ${Ve.d}`)),Ve.p}function gx(b,f){return f.max-b.max}function b0(b,f,A,P){this.p=new rt(b,f),this.h=A,this.d=function(N,q){let Y=!1,oe=1/0;for(let fe=0;fe<q.length;fe++){const we=q[fe];for(let Fe=0,Ve=we.length,nt=Ve-1;Fe<Ve;nt=Fe++){const lt=we[Fe],ht=we[nt];lt.y>N.y!=ht.y>N.y&&N.x<(ht.x-lt.x)*(N.y-lt.y)/(ht.y-lt.y)+lt.x&&(Y=!Y),oe=Math.min(oe,Qa(N,lt,ht))}}return(Y?1:-1)*Math.sqrt(oe)}(this.p,P),this.max=this.d+this.h*Math.SQRT2}const bm=Number.POSITIVE_INFINITY;function Fy(b,f){return f[1]!==bm?function(A,P,N){let q=0,Y=0;switch(P=Math.abs(P),N=Math.abs(N),A){case"top-right":case"top-left":case"top":Y=N-7;break;case"bottom-right":case"bottom-left":case"bottom":Y=7-N}switch(A){case"top-right":case"bottom-right":case"right":q=-P;break;case"top-left":case"bottom-left":case"left":q=P}return[q,Y]}(b,f[0],f[1]):function(A,P){let N=0,q=0;P<0&&(P=0);const Y=P/Math.sqrt(2);switch(A){case"top-right":case"top-left":q=Y-7;break;case"bottom-right":case"bottom-left":q=7-Y;break;case"bottom":q=7-P;break;case"top":q=P-7}switch(A){case"top-right":case"bottom-right":N=-Y;break;case"top-left":case"bottom-left":N=Y;break;case"left":N=P;break;case"right":N=-P}return[N,q]}(b,f[0])}function wm(b){switch(b){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yx(b,f,A,P,N,q,Y,oe,fe,we,Fe){let Ve=q.textMaxSize.evaluate(f,{});Ve===void 0&&(Ve=Y);const nt=b.layers[0].layout,lt=nt.get("icon-offset").evaluate(f,{},Fe),ht=By(A.horizontal),Gt=Y/24,Vt=b.tilePixelRatio*Gt,gi=b.tilePixelRatio*Ve/24,zi=b.tilePixelRatio*oe,di=b.tilePixelRatio*nt.get("symbol-spacing"),Mi=nt.get("text-padding")*b.tilePixelRatio,nn=function(fn,_r,lr,Yr=1){const us=fn.get("icon-padding").evaluate(_r,{},lr),ds=us&&us.values;return[ds[0]*Yr,ds[1]*Yr,ds[2]*Yr,ds[3]*Yr]}(nt,f,Fe,b.tilePixelRatio),tn=nt.get("text-max-angle")/180*Math.PI,Wn=nt.get("text-rotation-alignment")!=="viewport"&&nt.get("symbol-placement")!=="point",$n=nt.get("icon-rotation-alignment")==="map"&&nt.get("symbol-placement")!=="point",zn=nt.get("symbol-placement"),En=di/2,wn=nt.get("icon-text-fit");let Nn;P&&wn!=="none"&&(b.allowVerticalPlacement&&A.vertical&&(Nn=ky(P,A.vertical,wn,nt.get("icon-text-fit-padding"),lt,Gt)),ht&&(P=ky(P,ht,wn,nt.get("icon-text-fit-padding"),lt,Gt)));const Dn=(fn,_r)=>{_r.x<0||_r.x>=Oo||_r.y<0||_r.y>=Oo||function(lr,Yr,us,ds,$s,Lu,Na,Xs,ca,ja,$a,Fl,Ys,Ua,el,_l,Rl,Bl,vs,ha,ro,ou,Va,tl,Qu){const xc=lr.addToLineVertexArray(Yr,us);let Ac,Ah,$u,Pu,zl=0,Sh=0,xd=0,$y=0,Pm=-1,Mm=-1;const kh={};let e_=Qi.exports(""),Dm=0,Om=0;if(Xs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Dm,Om]=Xs.layout.get("text-offset").evaluate(ro,{},tl).map(Nl=>Nl*Rt):(Dm=Xs.layout.get("text-radial-offset").evaluate(ro,{},tl)*Rt,Om=bm),lr.allowVerticalPlacement&&ds.vertical){const Nl=Xs.layout.get("text-rotate").evaluate(ro,{},tl)+90;$u=new Mp(ca,Yr,ja,$a,Fl,ds.vertical,Ys,Ua,el,Nl),Na&&(Pu=new Mp(ca,Yr,ja,$a,Fl,Na,Rl,Bl,el,Nl))}if($s){const Nl=Xs.layout.get("icon-rotate").evaluate(ro,{}),Wc=Xs.layout.get("icon-text-fit")!=="none",Ad=Dy($s,Nl,Va,Wc),Sd=Na?Dy(Na,Nl,Va,Wc):void 0;Ah=new Mp(ca,Yr,ja,$a,Fl,$s,Rl,Bl,!1,Nl),zl=4*Ad.length;const n_=lr.iconSizeData;let Rf=null;n_.kind==="source"?(Rf=[xh*Xs.layout.get("icon-size").evaluate(ro,{})],Rf[0]>$h&&J(`${lr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):n_.kind==="composite"&&(Rf=[xh*ou.compositeIconSizes[0].evaluate(ro,{},tl),xh*ou.compositeIconSizes[1].evaluate(ro,{},tl)],(Rf[0]>$h||Rf[1]>$h)&&J(`${lr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),lr.addSymbols(lr.icon,Ad,Rf,ha,vs,ro,o.WritingMode.none,Yr,xc.lineStartIndex,xc.lineLength,-1,tl),Pm=lr.icon.placedSymbolArray.length-1,Sd&&(Sh=4*Sd.length,lr.addSymbols(lr.icon,Sd,Rf,ha,vs,ro,o.WritingMode.vertical,Yr,xc.lineStartIndex,xc.lineLength,-1,tl),Mm=lr.icon.placedSymbolArray.length-1)}const t_=Object.keys(ds.horizontal);for(const Nl of t_){const Wc=ds.horizontal[Nl];if(!Ac){e_=Qi.exports(Wc.text);const Sd=Xs.layout.get("text-rotate").evaluate(ro,{},tl);Ac=new Mp(ca,Yr,ja,$a,Fl,Wc,Ys,Ua,el,Sd)}const Ad=Wc.positionedLines.length===1;if(xd+=Ry(lr,Yr,Wc,Lu,Xs,el,ro,_l,xc,ds.vertical?o.WritingMode.horizontal:o.WritingMode.horizontalOnly,Ad?t_:[Nl],kh,Pm,ou,tl),Ad)break}ds.vertical&&($y+=Ry(lr,Yr,ds.vertical,Lu,Xs,el,ro,_l,xc,o.WritingMode.vertical,["vertical"],kh,Mm,ou,tl));const Lx=Ac?Ac.boxStartIndex:lr.collisionBoxArray.length,Px=Ac?Ac.boxEndIndex:lr.collisionBoxArray.length,Mx=$u?$u.boxStartIndex:lr.collisionBoxArray.length,Dx=$u?$u.boxEndIndex:lr.collisionBoxArray.length,Ox=Ah?Ah.boxStartIndex:lr.collisionBoxArray.length,Fx=Ah?Ah.boxEndIndex:lr.collisionBoxArray.length,Rx=Pu?Pu.boxStartIndex:lr.collisionBoxArray.length,Bx=Pu?Pu.boxEndIndex:lr.collisionBoxArray.length;let Sc=-1;const Bp=(Nl,Wc)=>Nl&&Nl.circleDiameter?Math.max(Nl.circleDiameter,Wc):Wc;Sc=Bp(Ac,Sc),Sc=Bp($u,Sc),Sc=Bp(Ah,Sc),Sc=Bp(Pu,Sc);const i_=Sc>-1?1:0;i_&&(Sc*=Qu/Rt),lr.glyphOffsetArray.length>=w0.MAX_GLYPHS&&J("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ro.sortKey!==void 0&&lr.addToSortKeyRanges(lr.symbolInstances.length,ro.sortKey),lr.symbolInstances.emplaceBack(Yr.x,Yr.y,kh.right>=0?kh.right:-1,kh.center>=0?kh.center:-1,kh.left>=0?kh.left:-1,kh.vertical||-1,Pm,Mm,e_,Lx,Px,Mx,Dx,Ox,Fx,Rx,Bx,ja,xd,$y,zl,Sh,i_,0,Ys,Dm,Om,Sc)}(b,_r,fn,A,P,N,Nn,b.layers[0],b.collisionBoxArray,f.index,f.sourceLayerIndex,b.index,Vt,[Mi,Mi,Mi,Mi],Wn,fe,zi,nn,$n,lt,f,q,we,Fe,Y)};if(zn==="line")for(const fn of My(f.geometry,0,0,Oo,Oo)){const _r=fx(fn,di,tn,A.vertical||ht,P,24,gi,b.overscaling,Oo);for(const lr of _r){const Yr=ht;Yr&&_x(b,Yr.text,En,lr)||Dn(fn,lr)}}else if(zn==="line-center"){for(const fn of f.geometry)if(fn.length>1){const _r=hx(fn,tn,A.vertical||ht,P,24,gi);_r&&Dn(fn,_r)}}else if(f.type==="Polygon")for(const fn of g0(f.geometry,0)){const _r=mx(fn,16);Dn(fn[0],new Qh(_r.x,_r.y,0))}else if(f.type==="LineString")for(const fn of f.geometry)Dn(fn,new Qh(fn[0].x,fn[0].y,0));else if(f.type==="Point")for(const fn of f.geometry)for(const _r of fn)Dn([_r],new Qh(_r.x,_r.y,0))}const $h=32640;function Ry(b,f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht){const Gt=function(zi,di,Mi,nn,tn,Wn,$n,zn){const En=nn.layout.get("text-rotate").evaluate(Wn,{})*Math.PI/180,wn=[];for(const Nn of di.positionedLines)for(const Dn of Nn.positionedGlyphs){if(!Dn.rect)continue;const fn=Dn.rect||{};let _r=4,lr=!0,Yr=1,us=0;const ds=(tn||zn)&&Dn.vertical,$s=Dn.metrics.advance*Dn.scale/2;if(zn&&di.verticalizable){const vs=(Dn.scale-1)*Rt,ha=(Rt-Dn.metrics.width*Dn.scale)/2;us=Nn.lineOffset/2-(Dn.imageName?-ha:vs)}if(Dn.imageName){const vs=$n[Dn.imageName];lr=vs.sdf,Yr=vs.pixelRatio,_r=1/Yr}const Lu=tn?[Dn.x+$s,Dn.y]:[0,0];let Na=tn?[0,0]:[Dn.x+$s+Mi[0],Dn.y+Mi[1]-us],Xs=[0,0];ds&&(Xs=Na,Na=[0,0]);const ca=(Dn.metrics.left-_r)*Dn.scale-$s+Na[0],ja=(-Dn.metrics.top-_r)*Dn.scale+Na[1],$a=ca+fn.w*Dn.scale/Yr,Fl=ja+fn.h*Dn.scale/Yr,Ys=new rt(ca,ja),Ua=new rt($a,ja),el=new rt(ca,Fl),_l=new rt($a,Fl);if(ds){const vs=new rt(-$s,$s-Cp),ha=-Math.PI/2,ro=12-$s,ou=new rt(22-ro,-(Dn.imageName?ro:0)),Va=new rt(...Xs);Ys._rotateAround(ha,vs)._add(ou)._add(Va),Ua._rotateAround(ha,vs)._add(ou)._add(Va),el._rotateAround(ha,vs)._add(ou)._add(Va),_l._rotateAround(ha,vs)._add(ou)._add(Va)}if(En){const vs=Math.sin(En),ha=Math.cos(En),ro=[ha,-vs,vs,ha];Ys._matMult(ro),Ua._matMult(ro),el._matMult(ro),_l._matMult(ro)}const Rl=new rt(0,0),Bl=new rt(0,0);wn.push({tl:Ys,tr:Ua,bl:el,br:_l,tex:fn,writingMode:di.writingMode,glyphOffset:Lu,sectionIndex:Dn.sectionIndex,isSDF:lr,pixelOffsetTL:Rl,pixelOffsetBR:Bl,minFontScaleX:0,minFontScaleY:0})}return wn}(0,A,oe,N,q,Y,P,b.allowVerticalPlacement),Vt=b.textSizeData;let gi=null;Vt.kind==="source"?(gi=[xh*N.layout.get("text-size").evaluate(Y,{})],gi[0]>$h&&J(`${b.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Vt.kind==="composite"&&(gi=[xh*lt.compositeTextSizes[0].evaluate(Y,{},ht),xh*lt.compositeTextSizes[1].evaluate(Y,{},ht)],(gi[0]>$h||gi[1]>$h)&&J(`${b.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),b.addSymbols(b.text,Gt,gi,oe,q,Y,we,f,fe.lineStartIndex,fe.lineLength,nt,ht);for(const zi of Fe)Ve[zi]=b.text.placedSymbolArray.length-1;return 4*Gt.length}function By(b){for(const f in b)return b[f];return null}function _x(b,f,A,P){const N=b.compareText;if(f in N){const q=N[f];for(let Y=q.length-1;Y>=0;Y--)if(P.dist(q[Y])<A)return!0}else N[f]=[];return N[f].push(P),!1}const vx=Gc.VectorTileFeature.types,bx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dp(b,f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt){const lt=oe?Math.min($h,Math.round(oe[0])):0,ht=oe?Math.min($h,Math.round(oe[1])):0;b.emplaceBack(f,A,Math.round(32*P),Math.round(32*N),q,Y,(lt<<1)+(fe?1:0),ht,16*we,16*Fe,256*Ve,256*nt)}function xm(b,f,A){b.emplaceBack(f.x,f.y,A),b.emplaceBack(f.x,f.y,A),b.emplaceBack(f.x,f.y,A),b.emplaceBack(f.x,f.y,A)}function wx(b){for(const f of b.sections)if(Ir(f.text))return!0;return!1}class Am{constructor(f){this.layoutVertexArray=new at,this.indexArray=new _i,this.programConfigurations=f,this.segments=new qt,this.dynamicLayoutVertexArray=new gt,this.opacityVertexArray=new Et,this.placedSymbolArray=new ln}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(f,A,P,N){this.isEmpty()||(P&&(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,te.members),this.indexBuffer=f.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=f.createVertexBuffer(this.dynamicLayoutVertexArray,he.members,!0),this.opacityVertexBuffer=f.createVertexBuffer(this.opacityVertexArray,bx,!0),this.opacityVertexBuffer.itemSize=1),(P||N)&&this.programConfigurations.upload(f))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Cn("SymbolBuffers",Am);class Sm{constructor(f,A,P){this.layoutVertexArray=new f,this.layoutAttributes=A,this.indexArray=new P,this.segments=new qt,this.collisionVertexArray=new bi}upload(f){this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=f.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=f.createVertexBuffer(this.collisionVertexArray,ke.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Cn("CollisionBuffers",Sm);class w0{constructor(f){this.collisionBoxArray=f.collisionBoxArray,this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(Y=>Y.id),this.index=f.index,this.pixelRatio=f.pixelRatio,this.sourceLayerIndex=f.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=tu([]),this.placementViewportMatrix=tu([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cy(this.zoom,A["text-size"]),this.iconSizeData=Cy(this.zoom,A["icon-size"]);const P=this.layers[0].layout,N=P.get("symbol-sort-key"),q=P.get("symbol-z-order");this.canOverlap=Cm(P,"text-overlap","text-allow-overlap")!=="never"||Cm(P,"icon-overlap","icon-allow-overlap")!=="never"||P.get("text-ignore-placement")||P.get("icon-ignore-placement"),this.sortFeaturesByKey=q!=="viewport-y"&&!N.isConstant(),this.sortFeaturesByY=(q==="viewport-y"||q==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,P.get("symbol-placement")==="point"&&(this.writingModes=P.get("text-writing-mode").map(Y=>o.WritingMode[Y])),this.stateDependentLayerIds=this.layers.filter(Y=>Y.isStateDependent()).map(Y=>Y.id),this.sourceID=f.sourceID}createArrays(){this.text=new Am(new Uo(this.layers,this.zoom,f=>/^text/.test(f))),this.icon=new Am(new Uo(this.layers,this.zoom,f=>/^icon/.test(f))),this.glyphOffsetArray=new _n,this.lineVertexArray=new jn,this.symbolInstances=new Mn}calculateGlyphDependencies(f,A,P,N,q){for(let Y=0;Y<f.length;Y++)if(A[f.charCodeAt(Y)]=!0,(P||N)&&q){const oe=Lt[f.charAt(Y)];oe&&(A[oe.charCodeAt(0)]=!0)}}populate(f,A,P){const N=this.layers[0],q=N.layout,Y=q.get("text-font"),oe=q.get("text-field"),fe=q.get("icon-image"),we=(oe.value.kind!=="constant"||oe.value.value instanceof Ht&&!oe.value.value.isEmpty()||oe.value.value.toString().length>0)&&(Y.value.kind!=="constant"||Y.value.value.length>0),Fe=fe.value.kind!=="constant"||!!fe.value.value||Object.keys(fe.parameters).length>0,Ve=q.get("symbol-sort-key");if(this.features=[],!we&&!Fe)return;const nt=A.iconDependencies,lt=A.glyphDependencies,ht=A.availableImages,Gt=new jo(this.zoom);for(const{feature:Vt,id:gi,index:zi,sourceLayerIndex:di}of f){const Mi=N._featureFilter.needGeometry,nn=ml(Vt,Mi);if(!N._featureFilter.filter(Gt,nn,P))continue;let tn,Wn;if(Mi||(nn.geometry=Ka(Vt)),we){const zn=N.getValueAndResolveTokens("text-field",nn,P,ht),En=Ht.factory(zn);wx(En)&&(this.hasRTLText=!0),(!this.hasRTLText||Jl()==="unavailable"||this.hasRTLText&&ba.isParsed())&&(tn=yt(En,N,nn))}if(Fe){const zn=N.getValueAndResolveTokens("icon-image",nn,P,ht);Wn=zn instanceof ti?zn:ti.fromString(zn)}if(!tn&&!Wn)continue;const $n=this.sortFeaturesByKey?Ve.evaluate(nn,{},P):void 0;if(this.features.push({id:gi,text:tn,icon:Wn,index:zi,sourceLayerIndex:di,geometry:nn.geometry,properties:Vt.properties,type:vx[Vt.type],sortKey:$n}),Wn&&(nt[Wn.name]=!0),tn){const zn=Y.evaluate(nn,{},P).join(","),En=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.WritingMode.vertical)>=0;for(const wn of tn.sections)if(wn.image)nt[wn.image.name]=!0;else{const Nn=za(tn.toString()),Dn=wn.fontStack||zn,fn=lt[Dn]=lt[Dn]||{};this.calculateGlyphDependencies(wn.text,fn,En,this.allowVerticalPlacement,Nn)}}}q.get("symbol-placement")==="line"&&(this.features=function(Vt){const gi={},zi={},di=[];let Mi=0;function nn(zn){di.push(Vt[zn]),Mi++}function tn(zn,En,wn){const Nn=zi[zn];return delete zi[zn],zi[En]=Nn,di[Nn].geometry[0].pop(),di[Nn].geometry[0]=di[Nn].geometry[0].concat(wn[0]),Nn}function Wn(zn,En,wn){const Nn=gi[En];return delete gi[En],gi[zn]=Nn,di[Nn].geometry[0].shift(),di[Nn].geometry[0]=wn[0].concat(di[Nn].geometry[0]),Nn}function $n(zn,En,wn){const Nn=wn?En[0][En[0].length-1]:En[0][0];return`${zn}:${Nn.x}:${Nn.y}`}for(let zn=0;zn<Vt.length;zn++){const En=Vt[zn],wn=En.geometry,Nn=En.text?En.text.toString():null;if(!Nn){nn(zn);continue}const Dn=$n(Nn,wn),fn=$n(Nn,wn,!0);if(Dn in zi&&fn in gi&&zi[Dn]!==gi[fn]){const _r=Wn(Dn,fn,wn),lr=tn(Dn,fn,di[_r].geometry);delete gi[Dn],delete zi[fn],zi[$n(Nn,di[lr].geometry,!0)]=lr,di[_r].geometry=null}else Dn in zi?tn(Dn,fn,wn):fn in gi?Wn(Dn,fn,wn):(nn(zn),gi[Dn]=Mi-1,zi[fn]=Mi-1)}return di.filter(zn=>zn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Vt,gi)=>Vt.sortKey-gi.sortKey)}update(f,A,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(f,A,this.layers,P),this.icon.programConfigurations.updatePaintArrays(f,A,this.layers,P))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(f){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(f),this.iconCollisionBox.upload(f)),this.text.upload(f,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(f,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(f,A){const P=this.lineVertexArray.length;if(f.segment!==void 0){let N=f.dist(A[f.segment+1]),q=f.dist(A[f.segment]);const Y={};for(let oe=f.segment+1;oe<A.length;oe++)Y[oe]={x:A[oe].x,y:A[oe].y,tileUnitDistanceFromAnchor:N},oe<A.length-1&&(N+=A[oe+1].dist(A[oe]));for(let oe=f.segment||0;oe>=0;oe--)Y[oe]={x:A[oe].x,y:A[oe].y,tileUnitDistanceFromAnchor:q},oe>0&&(q+=A[oe-1].dist(A[oe]));for(let oe=0;oe<A.length;oe++){const fe=Y[oe];this.lineVertexArray.emplaceBack(fe.x,fe.y,fe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}}addSymbols(f,A,P,N,q,Y,oe,fe,we,Fe,Ve,nt){const lt=f.indexArray,ht=f.layoutVertexArray,Gt=f.segments.prepareSegment(4*A.length,ht,lt,this.canOverlap?Y.sortKey:void 0),Vt=this.glyphOffsetArray.length,gi=Gt.vertexLength,zi=this.allowVerticalPlacement&&oe===o.WritingMode.vertical?Math.PI/2:0,di=Y.text&&Y.text.sections;for(let Mi=0;Mi<A.length;Mi++){const{tl:nn,tr:tn,bl:Wn,br:$n,tex:zn,pixelOffsetTL:En,pixelOffsetBR:wn,minFontScaleX:Nn,minFontScaleY:Dn,glyphOffset:fn,isSDF:_r,sectionIndex:lr}=A[Mi],Yr=Gt.vertexLength,us=fn[1];Dp(ht,fe.x,fe.y,nn.x,us+nn.y,zn.x,zn.y,P,_r,En.x,En.y,Nn,Dn),Dp(ht,fe.x,fe.y,tn.x,us+tn.y,zn.x+zn.w,zn.y,P,_r,wn.x,En.y,Nn,Dn),Dp(ht,fe.x,fe.y,Wn.x,us+Wn.y,zn.x,zn.y+zn.h,P,_r,En.x,wn.y,Nn,Dn),Dp(ht,fe.x,fe.y,$n.x,us+$n.y,zn.x+zn.w,zn.y+zn.h,P,_r,wn.x,wn.y,Nn,Dn),xm(f.dynamicLayoutVertexArray,fe,zi),lt.emplaceBack(Yr,Yr+1,Yr+2),lt.emplaceBack(Yr+1,Yr+2,Yr+3),Gt.vertexLength+=4,Gt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(fn[0]),Mi!==A.length-1&&lr===A[Mi+1].sectionIndex||f.programConfigurations.populatePaintArrays(ht.length,Y,Y.index,{},nt,di&&di[lr])}f.placedSymbolArray.emplaceBack(fe.x,fe.y,Vt,this.glyphOffsetArray.length-Vt,gi,we,Fe,fe.segment,P?P[0]:0,P?P[1]:0,N[0],N[1],oe,0,!1,0,Ve)}_addCollisionDebugVertex(f,A,P,N,q,Y){return A.emplaceBack(0,0),f.emplaceBack(P.x,P.y,N,q,Math.round(Y.x),Math.round(Y.y))}addCollisionDebugVertices(f,A,P,N,q,Y,oe){const fe=q.segments.prepareSegment(4,q.layoutVertexArray,q.indexArray),we=fe.vertexLength,Fe=q.layoutVertexArray,Ve=q.collisionVertexArray,nt=oe.anchorX,lt=oe.anchorY;this._addCollisionDebugVertex(Fe,Ve,Y,nt,lt,new rt(f,A)),this._addCollisionDebugVertex(Fe,Ve,Y,nt,lt,new rt(P,A)),this._addCollisionDebugVertex(Fe,Ve,Y,nt,lt,new rt(P,N)),this._addCollisionDebugVertex(Fe,Ve,Y,nt,lt,new rt(f,N)),fe.vertexLength+=4;const ht=q.indexArray;ht.emplaceBack(we,we+1),ht.emplaceBack(we+1,we+2),ht.emplaceBack(we+2,we+3),ht.emplaceBack(we+3,we),fe.primitiveLength+=4}addDebugCollisionBoxes(f,A,P,N){for(let q=f;q<A;q++){const Y=this.collisionBoxArray.get(q);this.addCollisionDebugVertices(Y.x1,Y.y1,Y.x2,Y.y2,N?this.textCollisionBox:this.iconCollisionBox,Y.anchorPoint,P)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sm(ii,ze.members,ci),this.iconCollisionBox=new Sm(ii,ze.members,ci);for(let f=0;f<this.symbolInstances.length;f++){const A=this.symbolInstances.get(f);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(f,A,P,N,q,Y,oe,fe,we){const Fe={};for(let Ve=A;Ve<P;Ve++){const nt=f.get(Ve);Fe.textBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},Fe.textFeatureIndex=nt.featureIndex;break}for(let Ve=N;Ve<q;Ve++){const nt=f.get(Ve);Fe.verticalTextBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},Fe.verticalTextFeatureIndex=nt.featureIndex;break}for(let Ve=Y;Ve<oe;Ve++){const nt=f.get(Ve);Fe.iconBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},Fe.iconFeatureIndex=nt.featureIndex;break}for(let Ve=fe;Ve<we;Ve++){const nt=f.get(Ve);Fe.verticalIconBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},Fe.verticalIconFeatureIndex=nt.featureIndex;break}return Fe}deserializeCollisionBoxes(f){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const P=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(f,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(f,A){const P=f.placedSymbolArray.get(A),N=P.vertexStartIndex+4*P.numGlyphs;for(let q=P.vertexStartIndex;q<N;q+=4)f.indexArray.emplaceBack(q,q+1,q+2),f.indexArray.emplaceBack(q+1,q+2,q+3)}getSortedSymbolIndexes(f){if(this.sortedAngle===f&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(f),P=Math.cos(f),N=[],q=[],Y=[];for(let oe=0;oe<this.symbolInstances.length;++oe){Y.push(oe);const fe=this.symbolInstances.get(oe);N.push(0|Math.round(A*fe.anchorX+P*fe.anchorY)),q.push(fe.featureIndex)}return Y.sort((oe,fe)=>N[oe]-N[fe]||q[fe]-q[oe]),Y}addToSortKeyRanges(f,A){const P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===A?P.symbolInstanceEnd=f+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:f,symbolInstanceEnd:f+1})}sortFeatures(f){if(this.sortFeaturesByY&&this.sortedAngle!==f&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(f),this.sortedAngle=f,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const P=this.symbolInstances.get(A);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach((N,q,Y)=>{N>=0&&Y.indexOf(N)===q&&this.addIndicesForPlacedSymbol(this.text,N)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Cn("SymbolBucket",w0,{omit:["layers","collisionBoxArray","features","compareText"]}),w0.MAX_GLYPHS=65535,w0.addDynamicAttributes=xm;const xx=new Wo({"symbol-placement":new Qn(ee.layout_symbol["symbol-placement"]),"symbol-spacing":new Qn(ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qn(ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gr(ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qn(ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qn(ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qn(ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qn(ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qn(ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qn(ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new gr(ee.layout_symbol["icon-size"]),"icon-text-fit":new Qn(ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qn(ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new gr(ee.layout_symbol["icon-image"]),"icon-rotate":new gr(ee.layout_symbol["icon-rotate"]),"icon-padding":new gr(ee.layout_symbol["icon-padding"]),"icon-keep-upright":new Qn(ee.layout_symbol["icon-keep-upright"]),"icon-offset":new gr(ee.layout_symbol["icon-offset"]),"icon-anchor":new gr(ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qn(ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qn(ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qn(ee.layout_symbol["text-rotation-alignment"]),"text-field":new gr(ee.layout_symbol["text-field"]),"text-font":new gr(ee.layout_symbol["text-font"]),"text-size":new gr(ee.layout_symbol["text-size"]),"text-max-width":new gr(ee.layout_symbol["text-max-width"]),"text-line-height":new Qn(ee.layout_symbol["text-line-height"]),"text-letter-spacing":new gr(ee.layout_symbol["text-letter-spacing"]),"text-justify":new gr(ee.layout_symbol["text-justify"]),"text-radial-offset":new gr(ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qn(ee.layout_symbol["text-variable-anchor"]),"text-anchor":new gr(ee.layout_symbol["text-anchor"]),"text-max-angle":new Qn(ee.layout_symbol["text-max-angle"]),"text-writing-mode":new Qn(ee.layout_symbol["text-writing-mode"]),"text-rotate":new gr(ee.layout_symbol["text-rotate"]),"text-padding":new Qn(ee.layout_symbol["text-padding"]),"text-keep-upright":new Qn(ee.layout_symbol["text-keep-upright"]),"text-transform":new gr(ee.layout_symbol["text-transform"]),"text-offset":new gr(ee.layout_symbol["text-offset"]),"text-allow-overlap":new Qn(ee.layout_symbol["text-allow-overlap"]),"text-overlap":new Qn(ee.layout_symbol["text-overlap"]),"text-ignore-placement":new Qn(ee.layout_symbol["text-ignore-placement"]),"text-optional":new Qn(ee.layout_symbol["text-optional"])});var km={paint:new Wo({"icon-opacity":new gr(ee.paint_symbol["icon-opacity"]),"icon-color":new gr(ee.paint_symbol["icon-color"]),"icon-halo-color":new gr(ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new gr(ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gr(ee.paint_symbol["icon-halo-blur"]),"icon-translate":new Qn(ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qn(ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new gr(ee.paint_symbol["text-opacity"]),"text-color":new gr(ee.paint_symbol["text-color"],{runtimeType:mr,getOverride:b=>b.textColor,hasOverride:b=>!!b.textColor}),"text-halo-color":new gr(ee.paint_symbol["text-halo-color"]),"text-halo-width":new gr(ee.paint_symbol["text-halo-width"]),"text-halo-blur":new gr(ee.paint_symbol["text-halo-blur"]),"text-translate":new Qn(ee.paint_symbol["text-translate"]),"text-translate-anchor":new Qn(ee.paint_symbol["text-translate-anchor"])}),layout:xx};class zy{constructor(f){if(f.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=f.property.overrides?f.property.overrides.runtimeType:bn,this.defaultValue=f}evaluate(f){if(f.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(f.formattedSection))return A.getOverride(f.formattedSection)}return f.feature&&f.featureState?this.defaultValue.evaluate(f.feature,f.featureState):this.defaultValue.property.specification.default}eachChild(f){this.defaultValue.isConstant()||f(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Cn("FormatSectionOverride",zy,{omit:["defaultValue"]});class Op extends pl{constructor(f){super(f,km)}recalculate(f,A){if(super.recalculate(f,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const P=this.layout.get("text-writing-mode");if(P){const N=[];for(const q of P)N.indexOf(q)<0&&N.push(q);this.layout._values["text-writing-mode"]=N}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(f,A,P,N){const q=this.layout.get(f).evaluate(A,{},P,N),Y=this._unevaluatedLayout._values[f];return Y.isDataDriven()||zo(Y.value)||!q?q:function(oe,fe){return fe.replace(/{([^{}]+)}/g,(we,Fe)=>Fe in oe?String(oe[Fe]):"")}(A.properties,q)}createBucket(f){return new w0(f)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const f of km.paint.overridableProperties){if(!Op.hasPaintOverride(this.layout,f))continue;const A=this.paint.get(f),P=new zy(A),N=new eo(P,A.property.specification);let q=null;q=A.value.kind==="constant"||A.value.kind==="source"?new Yo("source",N):new Is("composite",N,A.value.zoomStops),this.paint._values[f]=new dl(A.property,q,A.parameters)}}_handleOverridablePaintPropertyUpdate(f,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&Op.hasPaintOverride(this.layout,f)}static hasPaintOverride(f,A){const P=f.get("text-field"),N=km.paint.properties[A];let q=!1;const Y=oe=>{for(const fe of oe)if(N.overrides&&N.overrides.hasOverride(fe))return void(q=!0)};if(P.value.kind==="constant"&&P.value.value instanceof Ht)Y(P.value.value.sections);else if(P.value.kind==="source"){const oe=we=>{q||(we instanceof kn&&Di(we.value)===Yn?Y(we.value.sections):we instanceof yu?Y(we.sections):we.eachChild(oe))},fe=P.value;fe._styleExpression&&oe(fe._styleExpression.expression)}return q}}function Cm(b,f,A){let P="never";const N=b.get(f);return N?P=N:b.get(A)&&(P="always"),P}var Ax={paint:new Wo({"background-color":new Qn(ee.paint_background["background-color"]),"background-pattern":new hc(ee.paint_background["background-pattern"]),"background-opacity":new Qn(ee.paint_background["background-opacity"])})},Sx={paint:new Wo({"raster-opacity":new Qn(ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qn(ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qn(ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qn(ee.paint_raster["raster-brightness-max"]),"raster-saturation":new Qn(ee.paint_raster["raster-saturation"]),"raster-contrast":new Qn(ee.paint_raster["raster-contrast"]),"raster-resampling":new Qn(ee.paint_raster["raster-resampling"]),"raster-fade-duration":new Qn(ee.paint_raster["raster-fade-duration"])})};class kx extends pl{constructor(f){super(f,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=f}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Cx={circle:class extends pl{constructor(b){super(b,Vc)}createBucket(b){return new ls(b)}queryRadius(b){const f=b;return jc("circle-radius",this,f)+jc("circle-stroke-width",this,f)+gc(this.paint.get("circle-translate"))}queryIntersectsFeature(b,f,A,P,N,q,Y,oe){const fe=Uc(b,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,Y),we=this.paint.get("circle-radius").evaluate(f,A)+this.paint.get("circle-stroke-width").evaluate(f,A),Fe=this.paint.get("circle-pitch-alignment")==="map",Ve=Fe?fe:function(lt,ht){return lt.map(Gt=>_h(Gt,ht))}(fe,oe),nt=Fe?we*Y:we;for(const lt of P)for(const ht of lt){const Gt=Fe?ht:_h(ht,oe);let Vt=nt;const gi=qc([],[ht.x,ht.y,0,1],oe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Vt*=gi[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Vt*=q.cameraToCenterDistance/gi[3]),a0(Ve,Gt,Vt))return!0}return!1}},heatmap:class extends pl{constructor(b){super(b,vh),this._updateColorRamp()}createBucket(b){return new Gh(b)}_handleSpecialPaintPropertyUpdate(b){b==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends pl{constructor(b){super(b,h0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends pl{constructor(b){super(b,_p)}recalculate(b,f){super.recalculate(b,f);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(b){return new yd(b)}queryRadius(){return gc(this.paint.get("fill-translate"))}queryIntersectsFeature(b,f,A,P,N,q,Y){return xf(Uc(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,Y),P)}isTileClipped(){return!0}},"fill-extrusion":class extends pl{constructor(b){super(b,mm)}createBucket(b){return new Df(b)}queryRadius(){return gc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(b,f,A,P,N,q,Y,oe){const fe=Uc(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,Y),we=this.paint.get("fill-extrusion-height").evaluate(f,A),Fe=this.paint.get("fill-extrusion-base").evaluate(f,A),Ve=function(lt,ht,Gt,Vt){const gi=[];for(const zi of lt){const di=[zi.x,zi.y,0,1];qc(di,di,ht),gi.push(new rt(di[0]/di[3],di[1]/di[3]))}return gi}(fe,oe),nt=function(lt,ht,Gt,Vt){const gi=[],zi=[],di=Vt[8]*ht,Mi=Vt[9]*ht,nn=Vt[10]*ht,tn=Vt[11]*ht,Wn=Vt[8]*Gt,$n=Vt[9]*Gt,zn=Vt[10]*Gt,En=Vt[11]*Gt;for(const wn of lt){const Nn=[],Dn=[];for(const fn of wn){const _r=fn.x,lr=fn.y,Yr=Vt[0]*_r+Vt[4]*lr+Vt[12],us=Vt[1]*_r+Vt[5]*lr+Vt[13],ds=Vt[2]*_r+Vt[6]*lr+Vt[14],$s=Vt[3]*_r+Vt[7]*lr+Vt[15],Lu=ds+nn,Na=$s+tn,Xs=Yr+Wn,ca=us+$n,ja=ds+zn,$a=$s+En,Fl=new rt((Yr+di)/Na,(us+Mi)/Na);Fl.z=Lu/Na,Nn.push(Fl);const Ys=new rt(Xs/$a,ca/$a);Ys.z=ja/$a,Dn.push(Ys)}gi.push(Nn),zi.push(Dn)}return[gi,zi]}(P,Fe,we,oe);return function(lt,ht,Gt){let Vt=1/0;xf(Gt,ht)&&(Vt=Ap(Gt,ht[0]));for(let gi=0;gi<ht.length;gi++){const zi=ht[gi],di=lt[gi];for(let Mi=0;Mi<zi.length-1;Mi++){const nn=zi[Mi],tn=[nn,zi[Mi+1],di[Mi+1],di[Mi],nn];Vh(Gt,tn)&&(Vt=Math.min(Vt,Ap(Gt,tn)))}}return Vt!==1/0&&Vt}(nt[0],nt[1],Ve)}},line:class extends pl{constructor(b){super(b,R),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(b){b==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ma,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(b,f){super.recalculate(b,f),this.paint._values["line-floorwidth"]=G.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,b)}createBucket(b){return new E(b)}queryRadius(b){const f=b,A=H(jc("line-width",this,f),jc("line-gap-width",this,f)),P=jc("line-offset",this,f);return A/2+Math.abs(P)+gc(this.paint.get("line-translate"))}queryIntersectsFeature(b,f,A,P,N,q,Y){const oe=Uc(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,Y),fe=Y/2*H(this.paint.get("line-width").evaluate(f,A),this.paint.get("line-gap-width").evaluate(f,A)),we=this.paint.get("line-offset").evaluate(f,A);return we&&(P=function(Fe,Ve){const nt=[];for(let lt=0;lt<Fe.length;lt++){const ht=Fe[lt],Gt=[];for(let Vt=0;Vt<ht.length;Vt++){const gi=ht[Vt-1],zi=ht[Vt],di=ht[Vt+1],Mi=Vt===0?new rt(0,0):zi.sub(gi)._unit()._perp(),nn=Vt===ht.length-1?new rt(0,0):di.sub(zi)._unit()._perp(),tn=Mi._add(nn)._unit(),Wn=tn.x*nn.x+tn.y*nn.y;Wn!==0&&tn._mult(1/Wn),Gt.push(tn._mult(Ve)._add(zi))}nt.push(Gt)}return nt}(P,we*Y)),function(Fe,Ve,nt){for(let lt=0;lt<Ve.length;lt++){const ht=Ve[lt];if(Fe.length>=3){for(let Gt=0;Gt<ht.length;Gt++)if(mc(Fe,ht[Gt]))return!0}if(fc(Fe,ht,nt))return!0}return!1}(oe,P,fe)}isTileClipped(){return!0}},symbol:Op,background:class extends pl{constructor(b){super(b,Ax)}},raster:class extends pl{constructor(b){super(b,Sx)}}};class Ex{constructor(f){this._callback=f,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ny=63710088e-1;class Ds{constructor(f,A){if(isNaN(f)||isNaN(A))throw new Error(`Invalid LngLat object: (${f}, ${A})`);if(this.lng=+f,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ds(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(f){const A=Math.PI/180,P=this.lat*A,N=f.lat*A,q=Math.sin(P)*Math.sin(N)+Math.cos(P)*Math.cos(N)*Math.cos((f.lng-this.lng)*A);return Ny*Math.acos(Math.min(q,1))}toBounds(f=0){const A=360*f/40075017,P=A/Math.cos(Math.PI/180*this.lat);return new Ff(new Ds(this.lng-P,this.lat-A),new Ds(this.lng+P,this.lat+A))}static convert(f){if(f instanceof Ds)return f;if(Array.isArray(f)&&(f.length===2||f.length===3))return new Ds(Number(f[0]),Number(f[1]));if(!Array.isArray(f)&&typeof f=="object"&&f!==null)return new Ds(Number("lng"in f?f.lng:f.lon),Number(f.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ff{constructor(f,A){f&&(A?this.setSouthWest(f).setNorthEast(A):f.length===4?this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]]):this.setSouthWest(f[0]).setNorthEast(f[1]))}setNorthEast(f){return this._ne=f instanceof Ds?new Ds(f.lng,f.lat):Ds.convert(f),this}setSouthWest(f){return this._sw=f instanceof Ds?new Ds(f.lng,f.lat):Ds.convert(f),this}extend(f){const A=this._sw,P=this._ne;let N,q;if(f instanceof Ds)N=f,q=f;else{if(!(f instanceof Ff))return Array.isArray(f)?f.length===4||f.every(Array.isArray)?this.extend(Ff.convert(f)):this.extend(Ds.convert(f)):this;if(N=f._sw,q=f._ne,!N||!q)return this}return A||P?(A.lng=Math.min(N.lng,A.lng),A.lat=Math.min(N.lat,A.lat),P.lng=Math.max(q.lng,P.lng),P.lat=Math.max(q.lat,P.lat)):(this._sw=new Ds(N.lng,N.lat),this._ne=new Ds(q.lng,q.lat)),this}getCenter(){return new Ds((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ds(this.getWest(),this.getNorth())}getSouthEast(){return new Ds(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(f){const{lng:A,lat:P}=Ds.convert(f);let N=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(N=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=P&&P<=this._ne.lat&&N}static convert(f){return f instanceof Ff?f:f&&new Ff(f)}}const jy=2*Math.PI*Ny;function Uy(b){return jy*Math.cos(b*Math.PI/180)}function Vy(b){return(180+b)/360}function qy(b){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+b*Math.PI/360)))/360}function Hy(b,f){return b/Uy(f)}function Em(b){return 360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90}class Fp{constructor(f,A,P=0){this.x=+f,this.y=+A,this.z=+P}static fromLngLat(f,A=0){const P=Ds.convert(f);return new Fp(Vy(P.lng),qy(P.lat),Hy(A,P.lat))}toLngLat(){return new Ds(360*this.x-180,Em(this.y))}toAltitude(){return this.z*Uy(Em(this.y))}meterInMercatorCoordinateUnits(){return 1/jy*(f=Em(this.y),1/Math.cos(f*Math.PI/180));var f}}function Gy(b,f,A){var P=2*Math.PI*6378137/256/Math.pow(2,A);return[b*P-2*Math.PI*6378137/2,f*P-2*Math.PI*6378137/2]}class Im{constructor(f,A,P){if(f<0||f>25||P<0||P>=Math.pow(2,f)||A<0||A>=Math.pow(2,f))throw new Error(`x=${A}, y=${P}, z=${f} outside of bounds. 0<=x<${Math.pow(2,f)}, 0<=y<${Math.pow(2,f)} 0<=z<=25 `);this.z=f,this.x=A,this.y=P,this.key=bd(0,f,f,A,P)}equals(f){return this.z===f.z&&this.x===f.x&&this.y===f.y}url(f,A,P){const N=(Y=this.y,oe=this.z,fe=Gy(256*(q=this.x),256*(Y=Math.pow(2,oe)-Y-1),oe),we=Gy(256*(q+1),256*(Y+1),oe),fe[0]+","+fe[1]+","+we[0]+","+we[1]);var q,Y,oe,fe,we;const Fe=function(Ve,nt,lt){let ht,Gt="";for(let Vt=Ve;Vt>0;Vt--)ht=1<<Vt-1,Gt+=(nt&ht?1:0)+(lt&ht?2:0);return Gt}(this.z,this.x,this.y);return f[(this.x+this.y)%f.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(P==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,Fe).replace(/{bbox-epsg-3857}/g,N)}isChildOf(f){const A=this.z-f.z;return A>0&&f.x===this.x>>A&&f.y===this.y>>A}getTilePoint(f){const A=Math.pow(2,this.z);return new rt((f.x*A-this.x)*Oo,(f.y*A-this.y)*Oo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Wy{constructor(f,A){this.wrap=f,this.canonical=A,this.key=bd(f,A.z,A.z,A.x,A.y)}}class Tu{constructor(f,A,P,N,q){if(f<P)throw new Error(`overscaledZ should be >= z; overscaledZ = ${f}; z = ${P}`);this.overscaledZ=f,this.wrap=A,this.canonical=new Im(P,+N,+q),this.key=bd(A,f,P,N,q)}clone(){return new Tu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(f){return this.overscaledZ===f.overscaledZ&&this.wrap===f.wrap&&this.canonical.equals(f.canonical)}scaledTo(f){if(f>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${f}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-f;return f>this.canonical.z?new Tu(f,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Tu(f,this.wrap,f,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(f,A){if(f>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${f}; overscaledZ = ${this.overscaledZ}`);const P=this.canonical.z-f;return f>this.canonical.z?bd(this.wrap*+A,f,this.canonical.z,this.canonical.x,this.canonical.y):bd(this.wrap*+A,f,f,this.canonical.x>>P,this.canonical.y>>P)}isChildOf(f){if(f.wrap!==this.wrap)return!1;const A=this.canonical.z-f.canonical.z;return f.overscaledZ===0||f.overscaledZ<this.overscaledZ&&f.canonical.x===this.canonical.x>>A&&f.canonical.y===this.canonical.y>>A}children(f){if(this.overscaledZ>=f)return[new Tu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,P=2*this.canonical.x,N=2*this.canonical.y;return[new Tu(A,this.wrap,A,P,N),new Tu(A,this.wrap,A,P+1,N),new Tu(A,this.wrap,A,P,N+1),new Tu(A,this.wrap,A,P+1,N+1)]}isLessThan(f){return this.wrap<f.wrap||!(this.wrap>f.wrap)&&(this.overscaledZ<f.overscaledZ||!(this.overscaledZ>f.overscaledZ)&&(this.canonical.x<f.canonical.x||!(this.canonical.x>f.canonical.x)&&this.canonical.y<f.canonical.y))}wrapped(){return new Tu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(f){return new Tu(this.overscaledZ,f,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Wy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(f){return this.canonical.getTilePoint(new Fp(f.x-this.wrap,f.y))}}function bd(b,f,A,P,N){(b*=2)<0&&(b=-1*b-1);const q=1<<A;return(q*q*b+q*N+P).toString(36)+A.toString(36)+f.toString(36)}Cn("CanonicalTileID",Im),Cn("OverscaledTileID",Tu,{omit:["posMatrix"]});class Xy{constructor(f,A,P){if(this.uid=f,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(P&&P!=="mapbox"&&P!=="terrarium")return void J(`"${P}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const N=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=P||"mapbox";for(let q=0;q<N;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(N,q)]=this.data[this._idx(N-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,N)]=this.data[this._idx(q,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<N;q++)for(let Y=0;Y<N;Y++){const oe=this.get(q,Y);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(f,A){const P=new Uint8Array(this.data.buffer),N=4*this._idx(f,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(P[N],P[N+1],P[N+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(f,A){if(f<-1||f>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(f+1)}_unpackMapbox(f,A,P){return(256*f*256+256*A+P)/10-1e4}_unpackTerrarium(f,A,P){return 256*f+A+P/256-32768}getPixels(){return new xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(f,A,P){if(this.dim!==f.dim)throw new Error("dem dimension mismatch");let N=A*this.dim,q=A*this.dim+this.dim,Y=P*this.dim,oe=P*this.dim+this.dim;switch(A){case-1:N=q-1;break;case 1:q=N+1}switch(P){case-1:Y=oe-1;break;case 1:oe=Y+1}const fe=-A*this.dim,we=-P*this.dim;for(let Fe=Y;Fe<oe;Fe++)for(let Ve=N;Ve<q;Ve++)this.data[this._idx(Ve,Fe)]=f.data[this._idx(Ve+fe,Fe+we)]}}Cn("DEMData",Xy);class Yy{constructor(f){this._stringToNumber={},this._numberToString=[];for(let A=0;A<f.length;A++){const P=f[A];this._stringToNumber[P]=A,this._numberToString[A]=P}}encode(f){return this._stringToNumber[f]}decode(f){if(f>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${f} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[f]}}class Zy{constructor(f,A,P,N,q){this.type="Feature",this._vectorTileFeature=f,f._z=A,f._x=P,f._y=N,this.properties=f.properties,this.id=q}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(f){this._geometry=f}toJSON(){const f={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(f[A]=this[A]);return f}}class Ky{constructor(f,A){this.tileID=f,this.x=f.canonical.x,this.y=f.canonical.y,this.z=f.canonical.z,this.grid=new Dl(Oo,16,0),this.grid3D=new Dl(Oo,16,0),this.featureIndexArray=new Lr,this.promoteId=A}insert(f,A,P,N,q,Y){const oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(P,N,q);const fe=Y?this.grid3D:this.grid;for(let we=0;we<A.length;we++){const Fe=A[we],Ve=[1/0,1/0,-1/0,-1/0];for(let nt=0;nt<Fe.length;nt++){const lt=Fe[nt];Ve[0]=Math.min(Ve[0],lt.x),Ve[1]=Math.min(Ve[1],lt.y),Ve[2]=Math.max(Ve[2],lt.x),Ve[3]=Math.max(Ve[3],lt.y)}Ve[0]<Oo&&Ve[1]<Oo&&Ve[2]>=0&&Ve[3]>=0&&fe.insert(oe,Ve[0],Ve[1],Ve[2],Ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gc.VectorTile(new Jt(this.rawTileData)).layers,this.sourceLayerCoder=new Yy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(f,A,P,N){this.loadVTLayers();const q=f.params||{},Y=Oo/f.tileSize/f.scale,oe=Rs(q.filter),fe=f.queryGeometry,we=f.queryPadding*Y,Fe=Qy(fe),Ve=this.grid.query(Fe.minX-we,Fe.minY-we,Fe.maxX+we,Fe.maxY+we),nt=Qy(f.cameraQueryGeometry),lt=this.grid3D.query(nt.minX-we,nt.minY-we,nt.maxX+we,nt.maxY+we,(Vt,gi,zi,di)=>function(Mi,nn,tn,Wn,$n){for(const En of Mi)if(nn<=En.x&&tn<=En.y&&Wn>=En.x&&$n>=En.y)return!0;const zn=[new rt(nn,tn),new rt(nn,$n),new rt(Wn,$n),new rt(Wn,tn)];if(Mi.length>2){for(const En of zn)if(mc(Mi,En))return!0}for(let En=0;En<Mi.length-1;En++)if(Hh(Mi[En],Mi[En+1],zn))return!0;return!1}(f.cameraQueryGeometry,Vt-we,gi-we,zi+we,di+we));for(const Vt of lt)Ve.push(Vt);Ve.sort(Ix);const ht={};let Gt;for(let Vt=0;Vt<Ve.length;Vt++){const gi=Ve[Vt];if(gi===Gt)continue;Gt=gi;const zi=this.featureIndexArray.get(gi);let di=null;this.loadMatchingFeature(ht,zi.bucketIndex,zi.sourceLayerIndex,zi.featureIndex,oe,q.layers,q.availableImages,A,P,N,(Mi,nn,tn)=>(di||(di=Ka(Mi)),nn.queryIntersectsFeature(fe,Mi,tn,di,this.z,f.transform,Y,f.pixelPosMatrix)))}return ht}loadMatchingFeature(f,A,P,N,q,Y,oe,fe,we,Fe,Ve){const nt=this.bucketLayerIDs[A];if(Y&&!function(Vt,gi){for(let zi=0;zi<Vt.length;zi++)if(gi.indexOf(Vt[zi])>=0)return!0;return!1}(Y,nt))return;const lt=this.sourceLayerCoder.decode(P),ht=this.vtLayers[lt].feature(N);if(q.needGeometry){const Vt=ml(ht,!0);if(!q.filter(new jo(this.tileID.overscaledZ),Vt,this.tileID.canonical))return}else if(!q.filter(new jo(this.tileID.overscaledZ),ht))return;const Gt=this.getId(ht,lt);for(let Vt=0;Vt<nt.length;Vt++){const gi=nt[Vt];if(Y&&Y.indexOf(gi)<0)continue;const zi=fe[gi];if(!zi)continue;let di={};Gt&&Fe&&(di=Fe.getState(zi.sourceLayer||"_geojsonTileLayer",Gt));const Mi=C({},we[gi]);Mi.paint=Jy(Mi.paint,zi.paint,ht,di,oe),Mi.layout=Jy(Mi.layout,zi.layout,ht,di,oe);const nn=!Ve||Ve(ht,zi,di);if(!nn)continue;const tn=new Zy(ht,this.z,this.x,this.y,Gt);tn.layer=Mi;let Wn=f[gi];Wn===void 0&&(Wn=f[gi]=[]),Wn.push({featureIndex:N,feature:tn,intersectionZ:nn})}}lookupSymbolFeatures(f,A,P,N,q,Y,oe,fe){const we={};this.loadVTLayers();const Fe=Rs(q);for(const Ve of f)this.loadMatchingFeature(we,P,N,Ve,Fe,Y,oe,fe,A);return we}hasLayer(f){for(const A of this.bucketLayerIDs)for(const P of A)if(f===P)return!0;return!1}getId(f,A){let P=f.id;return this.promoteId&&(P=f.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof P=="boolean"&&(P=Number(P))),P}}function Jy(b,f,A,P,N){return M(b,(q,Y)=>{const oe=f instanceof cc?f.get(Y):null;return oe&&oe.evaluate?oe.evaluate(A,P,N):oe})}function Qy(b){let f=1/0,A=1/0,P=-1/0,N=-1/0;for(const q of b)f=Math.min(f,q.x),A=Math.min(A,q.y),P=Math.max(P,q.x),N=Math.max(N,q.y);return{minX:f,minY:A,maxX:P,maxY:N}}function Ix(b,f){return f-b}var Tm;Cn("FeatureIndex",Ky,{omit:["rawTileData","sourceLayerCoder"]}),o.PerformanceMarkers=void 0,(Tm=o.PerformanceMarkers||(o.PerformanceMarkers={})).create="create",Tm.load="load",Tm.fullLoad="fullLoad";let Rp=null,wd=[];const Lm=1e3/30,Tx={mark(b){performance.mark(b)},frame(b){const f=b;Rp!=null&&wd.push(f-Rp),Rp=f},clearMetrics(){Rp=null,wd=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const b in o.PerformanceMarkers)performance.clearMarks(o.PerformanceMarkers[b])},getPerformanceMetrics(){performance.measure("loadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.load),performance.measure("fullLoadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.fullLoad);const b=performance.getEntriesByName("loadTime")[0].duration,f=performance.getEntriesByName("fullLoadTime")[0].duration,A=wd.length,P=1/(wd.reduce((q,Y)=>q+Y,0)/A/1e3),N=wd.filter(q=>q>Lm).reduce((q,Y)=>q+(Y-Lm)/Lm,0);return{loadTime:b,fullLoadTime:f,fps:P,percentDroppedFrames:N/(A+N)*100}}};o.AJAXError=mt,o.ARRAY_TYPE=Qs,o.Actor=class{constructor(b,f,A){this.target=b,this.parent=f,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},k(["receive","process"],this),this.invoker=new Ex(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?b:window}send(b,f,A,P,N=!1){const q=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[q]=A);const Y=me(this.globalScope)?void 0:[];return this.target.postMessage({id:q,type:b,hasCallback:!!A,targetMapId:P,mustQueue:N,sourceMapId:this.mapId,data:Vr(f,Y)},Y),{cancel:()=>{A&&delete this.callbacks[q],this.target.postMessage({id:q,type:"<cancel>",targetMapId:P,sourceMapId:this.mapId})}}}receive(b){const f=b.data,A=f.id;if(A&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[A];const P=this.cancelCallbacks[A];delete this.cancelCallbacks[A],P&&P()}else ie()||f.mustQueue?(this.tasks[A]=f,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,f)}process(){if(!this.taskQueue.length)return;const b=this.taskQueue.shift(),f=this.tasks[b];delete this.tasks[b],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(b,f)}processTask(b,f){if(f.type==="<response>"){const A=this.callbacks[b];delete this.callbacks[b],A&&(f.error?A(Po(f.error)):A(null,Po(f.data)))}else{let A=!1;const P=me(this.globalScope)?void 0:[],N=f.hasCallback?(oe,fe)=>{A=!0,delete this.cancelCallbacks[b],this.target.postMessage({id:b,type:"<response>",sourceMapId:this.mapId,error:oe?Vr(oe):null,data:Vr(fe,P)},P)}:oe=>{A=!0};let q=null;const Y=Po(f.data);if(this.parent[f.type])q=this.parent[f.type](f.sourceMapId,Y,N);else if(this.parent.getWorkerSource){const oe=f.type.split(".");q=this.parent.getWorkerSource(f.sourceMapId,oe[0],Y.source)[oe[1]](Y,N)}else N(new Error(`Could not find function ${f.type}`));!A&&q&&q.cancel&&(this.cancelCallbacks[b]=q.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.AlphaImage=_c,o.CanonicalTileID=Im,o.CollisionBoxArray=Wi,o.CollisionCircleLayoutArray=class extends Be{},o.Color=_t,o.DEMData=Xy,o.DataConstantProperty=Qn,o.DictionaryCoder=Yy,o.EXTENT=Oo,o.ErrorEvent=$t,o.EvaluationParameters=jo,o.Event=Ii,o.Evented=Me,o.FeatureIndex=Ky,o.FillBucket=yd,o.FillExtrusionBucket=Df,o.GeoJSONFeature=Zy,o.ImageAtlas=by,o.ImagePosition=ym,o.LineBucket=E,o.LineStripIndexArray=class extends jt{},o.LngLat=Ds,o.LngLatBounds=Ff,o.MercatorCoordinate=Fp,o.ONE_EM=Rt,o.OverscaledTileID=Tu,o.PerformanceUtils=Tx,o.PosArray=j,o.Properties=Wo,o.QuadTriangleArray=class extends st{},o.RGBAImage=xa,o.RasterBoundsArray=class extends B{},o.RequestPerformance=class{constructor(b){this._marks={start:[b.url,"start"].join("#"),end:[b.url,"end"].join("#"),measure:b.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let b=performance.getEntriesByName(this._marks.measure);return b.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),b=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),b}},o.ResourceType=ni,o.SegmentVector=qt,o.SymbolBucket=w0,o.Transitionable=Nc,o.TriangleIndexArray=_i,o.Uniform1f=mo,o.Uniform1i=class extends jr{constructor(b,f){super(b,f),this.current=0}set(b){this.current!==b&&(this.current=b,this.gl.uniform1i(this.location,b))}},o.Uniform2f=class extends jr{constructor(b,f){super(b,f),this.current=[0,0]}set(b){b[0]===this.current[0]&&b[1]===this.current[1]||(this.current=b,this.gl.uniform2f(this.location,b[0],b[1]))}},o.Uniform3f=class extends jr{constructor(b,f){super(b,f),this.current=[0,0,0]}set(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]||(this.current=b,this.gl.uniform3f(this.location,b[0],b[1],b[2]))}},o.Uniform4f=ko,o.UniformColor=qr,o.UniformMatrix4f=class extends jr{constructor(b,f){super(b,f),this.current=Ls}set(b){if(b[12]!==this.current[12]||b[0]!==this.current[0])return this.current=b,void this.gl.uniformMatrix4fv(this.location,!1,b);for(let f=1;f<16;f++)if(b[f]!==this.current[f]){this.current=b,this.gl.uniformMatrix4fv(this.location,!1,b);break}}},o.UnwrappedTileID=Wy,o.ValidationError=ae,o.ZoomHistory=os,o.add=function(b,f,A){return b[0]=f[0]+A[0],b[1]=f[1]+A[1],b[2]=f[2]+A[2],b},o.addDynamicAttributes=xm,o.asyncAll=function(b,f,A){if(!b.length)return A(null,[]);let P=b.length;const N=new Array(b.length);let q=null;b.forEach((Y,oe)=>{f(Y,(fe,we)=>{fe&&(q=fe),N[oe]=we,--P==0&&A(q,N)})})},o.bezier=_,o.bindAll=k,o.cacheEntryPossiblyAdded=function(b){ge++,ge>Ie&&(b.getActor().send("enforceCacheSizeLimit",ce),ge=0)},o.clamp=w,o.clearTileCache=function(b){const f=caches.delete(be);b&&f.catch(b).then(()=>b())},o.clipLine=My,o.clone=function(b){var f=new Qs(16);return f[0]=b[0],f[1]=b[1],f[2]=b[2],f[3]=b[3],f[4]=b[4],f[5]=b[5],f[6]=b[6],f[7]=b[7],f[8]=b[8],f[9]=b[9],f[10]=b[10],f[11]=b[11],f[12]=b[12],f[13]=b[13],f[14]=b[14],f[15]=b[15],f},o.clone$1=V,o.clone$2=function(b){var f=new Qs(3);return f[0]=b[0],f[1]=b[1],f[2]=b[2],f},o.collisionCircleLayout=Ye,o.config=We,o.copy=function(b,f){return b[0]=f[0],b[1]=f[1],b[2]=f[2],b[3]=f[3],b[4]=f[4],b[5]=f[5],b[6]=f[6],b[7]=f[7],b[8]=f[8],b[9]=f[9],b[10]=f[10],b[11]=f[11],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15],b},o.create=function(){var b=new Qs(16);return Qs!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b},o.create$1=Ms,o.createExpression=Go,o.createFilter=Rs,o.createLayout=ys,o.createStyleLayer=function(b){return b.type==="custom"?new kx(b):new Cx[b.type](b)},o.cross=function(b,f,A){var P=f[0],N=f[1],q=f[2],Y=A[0],oe=A[1],fe=A[2];return b[0]=N*fe-q*oe,b[1]=q*Y-P*fe,b[2]=P*oe-N*Y,b},o.dot=function(b,f){return b[0]*f[0]+b[1]*f[1]+b[2]*f[2]},o.dot$1=function(b,f){return b[0]*f[0]+b[1]*f[1]+b[2]*f[2]+b[3]*f[3]},o.ease=v,o.emitValidationErrors=Ws,o.enforceCacheSizeLimit=function(b){de(),Le&&Le.then(f=>{f.keys().then(A=>{for(let P=0;P<A.length-b;P++)f.delete(A[P])})})},o.equals=function(b,f){var A=b[0],P=b[1],N=b[2],q=b[3],Y=b[4],oe=b[5],fe=b[6],we=b[7],Fe=b[8],Ve=b[9],nt=b[10],lt=b[11],ht=b[12],Gt=b[13],Vt=b[14],gi=b[15],zi=f[0],di=f[1],Mi=f[2],nn=f[3],tn=f[4],Wn=f[5],$n=f[6],zn=f[7],En=f[8],wn=f[9],Nn=f[10],Dn=f[11],fn=f[12],_r=f[13],lr=f[14],Yr=f[15];return Math.abs(A-zi)<=ua*Math.max(1,Math.abs(A),Math.abs(zi))&&Math.abs(P-di)<=ua*Math.max(1,Math.abs(P),Math.abs(di))&&Math.abs(N-Mi)<=ua*Math.max(1,Math.abs(N),Math.abs(Mi))&&Math.abs(q-nn)<=ua*Math.max(1,Math.abs(q),Math.abs(nn))&&Math.abs(Y-tn)<=ua*Math.max(1,Math.abs(Y),Math.abs(tn))&&Math.abs(oe-Wn)<=ua*Math.max(1,Math.abs(oe),Math.abs(Wn))&&Math.abs(fe-$n)<=ua*Math.max(1,Math.abs(fe),Math.abs($n))&&Math.abs(we-zn)<=ua*Math.max(1,Math.abs(we),Math.abs(zn))&&Math.abs(Fe-En)<=ua*Math.max(1,Math.abs(Fe),Math.abs(En))&&Math.abs(Ve-wn)<=ua*Math.max(1,Math.abs(Ve),Math.abs(wn))&&Math.abs(nt-Nn)<=ua*Math.max(1,Math.abs(nt),Math.abs(Nn))&&Math.abs(lt-Dn)<=ua*Math.max(1,Math.abs(lt),Math.abs(Dn))&&Math.abs(ht-fn)<=ua*Math.max(1,Math.abs(ht),Math.abs(fn))&&Math.abs(Gt-_r)<=ua*Math.max(1,Math.abs(Gt),Math.abs(_r))&&Math.abs(Vt-lr)<=ua*Math.max(1,Math.abs(Vt),Math.abs(lr))&&Math.abs(gi-Yr)<=ua*Math.max(1,Math.abs(gi),Math.abs(Yr))},o.evaluateSizeForFeature=function(b,{uSize:f,uSizeT:A},{lowerSize:P,upperSize:N}){return b.kind==="source"?P/xh:b.kind==="composite"?Io(P/xh,N/xh,A):f},o.evaluateSizeForZoom=function(b,f){let A=0,P=0;if(b.kind==="constant")P=b.layoutSize;else if(b.kind!=="source"){const{interpolationType:N,minZoom:q,maxZoom:Y}=b,oe=N?w(Ri.interpolationFactor(N,f,q,Y),0,1):0;b.kind==="camera"?P=Io(b.minSize,b.maxSize,oe):A=oe}return{uSizeT:A,uSize:P}},o.evaluateVariableOffset=Fy,o.evented=Su,o.exported=pt,o.exported$1=Re,o.extend=C,o.filterObject=O,o.fromRotation=function(b,f){var A=Math.sin(f),P=Math.cos(f);return b[0]=P,b[1]=A,b[2]=0,b[3]=-A,b[4]=P,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},o.fromScaling=function(b,f){return b[0]=f[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=f[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=f[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},o.getAnchorAlignment=vm,o.getAnchorJustification=wm,o.getArrayBuffer=Yt,o.getImage=Ot,o.getJSON=function(b,f){return Qe(C(b,{type:"json"}),f)},o.getOverlapMode=Cm,o.getRTLTextPluginStatus=Jl,o.getReferrer=At,o.getVideo=function(b,f){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){f(null,A)};for(let P=0;P<b.length;P++){const N=window.document.createElement("source");si(b[P])||(A.crossOrigin="Anonymous"),N.src=b[P],A.appendChild(N)}return{cancel:()=>{}}},o.identity=tu,o.invert=function(b,f){var A=f[0],P=f[1],N=f[2],q=f[3],Y=f[4],oe=f[5],fe=f[6],we=f[7],Fe=f[8],Ve=f[9],nt=f[10],lt=f[11],ht=f[12],Gt=f[13],Vt=f[14],gi=f[15],zi=A*oe-P*Y,di=A*fe-N*Y,Mi=A*we-q*Y,nn=P*fe-N*oe,tn=P*we-q*oe,Wn=N*we-q*fe,$n=Fe*Gt-Ve*ht,zn=Fe*Vt-nt*ht,En=Fe*gi-lt*ht,wn=Ve*Vt-nt*Gt,Nn=Ve*gi-lt*Gt,Dn=nt*gi-lt*Vt,fn=zi*Dn-di*Nn+Mi*wn+nn*En-tn*zn+Wn*$n;return fn?(b[0]=(oe*Dn-fe*Nn+we*wn)*(fn=1/fn),b[1]=(N*Nn-P*Dn-q*wn)*fn,b[2]=(Gt*Wn-Vt*tn+gi*nn)*fn,b[3]=(nt*tn-Ve*Wn-lt*nn)*fn,b[4]=(fe*En-Y*Dn-we*zn)*fn,b[5]=(A*Dn-N*En+q*zn)*fn,b[6]=(Vt*Mi-ht*Wn-gi*di)*fn,b[7]=(Fe*Wn-nt*Mi+lt*di)*fn,b[8]=(Y*Nn-oe*En+we*$n)*fn,b[9]=(P*En-A*Nn-q*$n)*fn,b[10]=(ht*tn-Gt*Mi+gi*zi)*fn,b[11]=(Ve*Mi-Fe*tn-lt*zi)*fn,b[12]=(oe*zn-Y*wn-fe*$n)*fn,b[13]=(A*wn-P*zn+N*$n)*fn,b[14]=(Gt*di-ht*nn-Vt*zi)*fn,b[15]=(Fe*nn-Ve*di+nt*zi)*fn,b):null},o.isImageBitmap=Ae,o.isSafari=me,o.isWorker=ie,o.keysDifference=function(b,f){const A=[];for(const P in b)P in f||A.push(P);return A},o.lazyLoadRTLTextPlugin=function(){ba.isLoading()||ba.isLoaded()||Jl()!=="deferred"||no()},o.makeRequest=Qe,o.mapObject=M,o.mercatorXfromLng=Vy,o.mercatorYfromLat=qy,o.mercatorZfromAltitude=Hy,o.mul=u0,o.mul$1=function(b,f,A){return b[0]=f[0]*A[0],b[1]=f[1]*A[1],b[2]=f[2]*A[2],b[3]=f[3]*A[3],b},o.multiply=l0,o.nextPowerOfTwo=function(b){return b<=1?1:Math.pow(2,Math.ceil(Math.log(b)/Math.LN2))},o.normalize=function(b,f){var A=f[0],P=f[1],N=f[2],q=A*A+P*P+N*N;return q>0&&(q=1/Math.sqrt(q)),b[0]=f[0]*q,b[1]=f[1]*q,b[2]=f[2]*q,b},o.number=Io,o.ortho=function(b,f,A,P,N,q,Y){var oe=1/(f-A),fe=1/(P-N),we=1/(q-Y);return b[0]=-2*oe,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*fe,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*we,b[11]=0,b[12]=(f+A)*oe,b[13]=(N+P)*fe,b[14]=(Y+q)*we,b[15]=1,b},o.parseCacheControl=Se,o.parseGlyphPbf=function(b){return new Jt(b).readFields(rx,[])},o.pbf=Jt,o.performSymbolLayout=function(b){b.bucket.createArrays(),b.bucket.tilePixelRatio=Oo/(512*b.bucket.overscaling),b.bucket.compareText={},b.bucket.iconsNeedLinear=!1;const f=b.bucket.layers[0].layout,A=b.bucket.layers[0]._unevaluatedLayout._values,P={layoutIconSize:A["icon-size"].possiblyEvaluate(new jo(b.bucket.zoom+1),b.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new jo(b.bucket.zoom+1),b.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new jo(18))};if(b.bucket.textSizeData.kind==="composite"){const{minZoom:fe,maxZoom:we}=b.bucket.textSizeData;P.compositeTextSizes=[A["text-size"].possiblyEvaluate(new jo(fe),b.canonical),A["text-size"].possiblyEvaluate(new jo(we),b.canonical)]}if(b.bucket.iconSizeData.kind==="composite"){const{minZoom:fe,maxZoom:we}=b.bucket.iconSizeData;P.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new jo(fe),b.canonical),A["icon-size"].possiblyEvaluate(new jo(we),b.canonical)]}const N=f.get("text-line-height")*Rt,q=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",Y=f.get("text-keep-upright"),oe=f.get("text-size");for(const fe of b.bucket.features){const we=f.get("text-font").evaluate(fe,{},b.canonical).join(","),Fe=oe.evaluate(fe,{},b.canonical),Ve=P.layoutTextSize.evaluate(fe,{},b.canonical),nt=P.layoutIconSize.evaluate(fe,{},b.canonical),lt={horizontal:{},vertical:void 0},ht=fe.text;let Gt,Vt=[0,0];if(ht){const di=ht.toString(),Mi=f.get("text-letter-spacing").evaluate(fe,{},b.canonical)*Rt,nn=Hu(di)?Mi:0,tn=f.get("text-anchor").evaluate(fe,{},b.canonical),Wn=f.get("text-variable-anchor");if(!Wn){const Nn=f.get("text-radial-offset").evaluate(fe,{},b.canonical);Vt=Nn?Fy(tn,[Nn*Rt,bm]):f.get("text-offset").evaluate(fe,{},b.canonical).map(Dn=>Dn*Rt)}let $n=q?"center":f.get("text-justify").evaluate(fe,{},b.canonical);const zn=f.get("symbol-placement"),En=zn==="point"?f.get("text-max-width").evaluate(fe,{},b.canonical)*Rt:0,wn=()=>{b.bucket.allowVerticalPlacement&&za(di)&&(lt.vertical=Ep(ht,b.glyphMap,b.glyphPositions,b.imagePositions,we,En,N,tn,"left",nn,Vt,o.WritingMode.vertical,!0,zn,Ve,Fe))};if(!q&&Wn){const Nn=$n==="auto"?Wn.map(fn=>wm(fn)):[$n];let Dn=!1;for(let fn=0;fn<Nn.length;fn++){const _r=Nn[fn];if(!lt.horizontal[_r])if(Dn)lt.horizontal[_r]=lt.horizontal[0];else{const lr=Ep(ht,b.glyphMap,b.glyphPositions,b.imagePositions,we,En,N,"center",_r,nn,Vt,o.WritingMode.horizontal,!1,zn,Ve,Fe);lr&&(lt.horizontal[_r]=lr,Dn=lr.positionedLines.length===1)}}wn()}else{$n==="auto"&&($n=wm(tn));const Nn=Ep(ht,b.glyphMap,b.glyphPositions,b.imagePositions,we,En,N,tn,$n,nn,Vt,o.WritingMode.horizontal,!1,zn,Ve,Fe);Nn&&(lt.horizontal[$n]=Nn),wn(),za(di)&&q&&Y&&(lt.vertical=Ep(ht,b.glyphMap,b.glyphPositions,b.imagePositions,we,En,N,tn,$n,nn,Vt,o.WritingMode.vertical,!1,zn,Ve,Fe))}}let gi=!1;if(fe.icon&&fe.icon.name){const di=b.imageMap[fe.icon.name];di&&(Gt=cx(b.imagePositions[fe.icon.name],f.get("icon-offset").evaluate(fe,{},b.canonical),f.get("icon-anchor").evaluate(fe,{},b.canonical)),gi=!!di.sdf,b.bucket.sdfIcons===void 0?b.bucket.sdfIcons=gi:b.bucket.sdfIcons!==gi&&J("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(di.pixelRatio!==b.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(b.bucket.iconsNeedLinear=!0))}const zi=By(lt.horizontal)||lt.vertical;b.bucket.iconsInText=!!zi&&zi.iconsInText,(zi||Gt)&&yx(b.bucket,fe,lt,Gt,b.imageMap,P,Ve,nt,Vt,gi,b.canonical)}b.showCollisionBoxes&&b.bucket.generateCollisionDebugBuffers()},o.perspective=function(b,f,A,P,N){var q,Y=1/Math.tan(f/2);return b[0]=Y/A,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Y,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,N!=null&&N!==1/0?(b[10]=(N+P)*(q=1/(P-N)),b[14]=2*N*P*q):(b[10]=-1,b[14]=-2*P),b},o.pick=function(b,f){const A={};for(let P=0;P<f.length;P++){const N=f[P];N in b&&(A[N]=b[N])}return A},o.plugin=ba,o.pointGeometry=rt,o.polygonIntersectsPolygon=Vh,o.potpack=vy,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Cn,o.registerForPluginStateChange=function(b){return b({pluginStatus:Zo,pluginURL:Ya}),Su.on("pluginStateChange",b),b},o.renderColorRamp=nu,o.rotateX=function(b,f,A){var P=Math.sin(A),N=Math.cos(A),q=f[4],Y=f[5],oe=f[6],fe=f[7],we=f[8],Fe=f[9],Ve=f[10],nt=f[11];return f!==b&&(b[0]=f[0],b[1]=f[1],b[2]=f[2],b[3]=f[3],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]),b[4]=q*N+we*P,b[5]=Y*N+Fe*P,b[6]=oe*N+Ve*P,b[7]=fe*N+nt*P,b[8]=we*N-q*P,b[9]=Fe*N-Y*P,b[10]=Ve*N-oe*P,b[11]=nt*N-fe*P,b},o.rotateZ=function(b,f,A){var P=Math.sin(A),N=Math.cos(A),q=f[0],Y=f[1],oe=f[2],fe=f[3],we=f[4],Fe=f[5],Ve=f[6],nt=f[7];return f!==b&&(b[8]=f[8],b[9]=f[9],b[10]=f[10],b[11]=f[11],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]),b[0]=q*N+we*P,b[1]=Y*N+Fe*P,b[2]=oe*N+Ve*P,b[3]=fe*N+nt*P,b[4]=we*N-q*P,b[5]=Fe*N-Y*P,b[6]=Ve*N-oe*P,b[7]=nt*N-fe*P,b},o.scale=function(b,f,A){var P=A[0],N=A[1],q=A[2];return b[0]=f[0]*P,b[1]=f[1]*P,b[2]=f[2]*P,b[3]=f[3]*P,b[4]=f[4]*N,b[5]=f[5]*N,b[6]=f[6]*N,b[7]=f[7]*N,b[8]=f[8]*q,b[9]=f[9]*q,b[10]=f[10]*q,b[11]=f[11]*q,b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15],b},o.scale$1=function(b,f,A){return b[0]=f[0]*A,b[1]=f[1]*A,b[2]=f[2]*A,b},o.setCacheLimits=function(b,f){ce=b,Ie=f},o.setRTLTextPlugin=function(b,f,A=!1){if(Zo===zc||Zo===lc||Zo===Qo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ya=pt.resolveURL(b),Zo=zc,Js=f,Au(),A||no()},o.spec=ee,o.sphericalToCartesian=function([b,f,A]){return f+=90,f*=Math.PI/180,A*=Math.PI/180,{x:b*Math.cos(f)*Math.sin(A),y:b*Math.sin(f)*Math.sin(A),z:b*Math.cos(A)}},o.sqrLen=function(b){var f=b[0],A=b[1];return f*f+A*A},o.sub=function(b,f,A){return b[0]=f[0]-A[0],b[1]=f[1]-A[1],b[2]=f[2]-A[2],b},o.toEvaluationFeature=ml,o.transformMat3=function(b,f,A){var P=f[0],N=f[1],q=f[2];return b[0]=P*A[0]+N*A[3]+q*A[6],b[1]=P*A[1]+N*A[4]+q*A[7],b[2]=P*A[2]+N*A[5]+q*A[8],b},o.transformMat4=qc,o.transformMat4$1=function(b,f,A){var P=f[0],N=f[1];return b[0]=A[0]*P+A[4]*N+A[12],b[1]=A[1]*P+A[5]*N+A[13],b},o.translate=function(b,f,A){var P,N,q,Y,oe,fe,we,Fe,Ve,nt,lt,ht,Gt=A[0],Vt=A[1],gi=A[2];return f===b?(b[12]=f[0]*Gt+f[4]*Vt+f[8]*gi+f[12],b[13]=f[1]*Gt+f[5]*Vt+f[9]*gi+f[13],b[14]=f[2]*Gt+f[6]*Vt+f[10]*gi+f[14],b[15]=f[3]*Gt+f[7]*Vt+f[11]*gi+f[15]):(N=f[1],q=f[2],Y=f[3],oe=f[4],fe=f[5],we=f[6],Fe=f[7],Ve=f[8],nt=f[9],lt=f[10],ht=f[11],b[0]=P=f[0],b[1]=N,b[2]=q,b[3]=Y,b[4]=oe,b[5]=fe,b[6]=we,b[7]=Fe,b[8]=Ve,b[9]=nt,b[10]=lt,b[11]=ht,b[12]=P*Gt+oe*Vt+Ve*gi+f[12],b[13]=N*Gt+fe*Vt+nt*gi+f[13],b[14]=q*Gt+we*Vt+lt*gi+f[14],b[15]=Y*Gt+Fe*Vt+ht*gi+f[15]),b},o.triggerPluginCompletionEvent=uc,o.unicodeBlockLookup=mn,o.uniqueId=function(){return T++},o.validateCustomStyleLayer=function(b){const f=[],A=b.id;return A===void 0&&f.push({message:`layers.${A}: missing required property "id"`}),b.render===void 0&&f.push({message:`layers.${A}: missing required method "render"`}),b.renderingMode&&b.renderingMode!=="2d"&&b.renderingMode!=="3d"&&f.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),f},o.validateLight=Ml,o.validateStyle=va,o.vectorTile=Gc,o.warnOnce=J,o.wrap=x}),u(["./shared"],function(o){function c(Pe){const Te=typeof Pe;if(Te==="number"||Te==="boolean"||Te==="string"||Pe==null)return JSON.stringify(Pe);if(Array.isArray(Pe)){let _t="[";for(const Ut of Pe)_t+=`${c(Ut)},`;return`${_t}]`}const qe=Object.keys(Pe).sort();let ft="{";for(let _t=0;_t<qe.length;_t++)ft+=`${JSON.stringify(qe[_t])}:${c(Pe[qe[_t]])},`;return`${ft}}`}function g(Pe){let Te="";for(const qe of o.refProperties)Te+=`/${c(Pe[qe])}`;return Te}class _{constructor(Te){this.keyCache={},Te&&this.replace(Te)}replace(Te){this._layerConfigs={},this._layers={},this.update(Te,[])}update(Te,qe){for(const _t of Te){this._layerConfigs[_t.id]=_t;const Ut=this._layers[_t.id]=o.createStyleLayer(_t);Ut._featureFilter=o.createFilter(Ut.filter),this.keyCache[_t.id]&&delete this.keyCache[_t.id]}for(const _t of qe)delete this.keyCache[_t],delete this._layerConfigs[_t],delete this._layers[_t];this.familiesBySource={};const ft=function(_t,Ut){const Ge={};for(let zt=0;zt<_t.length;zt++){const ti=Ut&&Ut[_t[zt].id]||g(_t[zt]);Ut&&(Ut[_t[zt].id]=ti);let vt=Ge[ti];vt||(vt=Ge[ti]=[]),vt.push(_t[zt])}const Ht=[];for(const zt in Ge)Ht.push(Ge[zt]);return Ht}(Object.values(this._layerConfigs),this.keyCache);for(const _t of ft){const Ut=_t.map(ji=>this._layers[ji.id]),Ge=Ut[0];if(Ge.visibility==="none")continue;const Ht=Ge.source||"";let zt=this.familiesBySource[Ht];zt||(zt=this.familiesBySource[Ht]={});const ti=Ge.sourceLayer||"_geojsonTileLayer";let vt=zt[ti];vt||(vt=zt[ti]=[]),vt.push(Ut)}}}class v{constructor(Te){const qe={},ft=[];for(const Ht in Te){const zt=Te[Ht],ti=qe[Ht]={};for(const vt in zt){const ji=zt[+vt];if(!ji||ji.bitmap.width===0||ji.bitmap.height===0)continue;const Di={x:0,y:0,w:ji.bitmap.width+2,h:ji.bitmap.height+2};ft.push(Di),ti[vt]={rect:Di,metrics:ji.metrics}}}const{w:_t,h:Ut}=o.potpack(ft),Ge=new o.AlphaImage({width:_t||1,height:Ut||1});for(const Ht in Te){const zt=Te[Ht];for(const ti in zt){const vt=zt[+ti];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const ji=qe[Ht][ti].rect;o.AlphaImage.copy(vt.bitmap,Ge,{x:0,y:0},{x:ji.x+1,y:ji.y+1},vt.bitmap)}}this.image=Ge,this.positions=qe}}o.register("GlyphAtlas",v);class w{constructor(Te){this.tileID=new o.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId}parse(Te,qe,ft,_t,Ut){this.status="parsing",this.data=Te,this.collisionBoxArray=new o.CollisionBoxArray;const Ge=new o.DictionaryCoder(Object.keys(Te.layers).sort()),Ht=new o.FeatureIndex(this.tileID,this.promoteId);Ht.bucketLayerIDs=[];const zt={},ti={featureIndex:Ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ft},vt=qe.familiesBySource[this.source];for(const vr in vt){const Tr=Te.layers[vr];if(!Tr)continue;Tr.version===1&&o.warnOnce(`Vector tile source "${this.source}" layer "${vr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const zr=Ge.encode(vr),po=[];for(let ts=0;ts<Tr.length;ts++){const _o=Tr.feature(ts),is=Ht.getId(_o,vr);po.push({feature:_o,id:is,index:ts,sourceLayerIndex:zr})}for(const ts of vt[vr]){const _o=ts[0];_o.source!==this.source&&o.warnOnce(`layer.source = ${_o.source} does not equal this.source = ${this.source}`),_o.minzoom&&this.zoom<Math.floor(_o.minzoom)||_o.maxzoom&&this.zoom>=_o.maxzoom||_o.visibility!=="none"&&(x(ts,this.zoom,ft),(zt[_o.id]=_o.createBucket({index:Ht.bucketLayerIDs.length,layers:ts,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zr,sourceID:this.source})).populate(po,ti,this.tileID.canonical),Ht.bucketLayerIDs.push(ts.map(is=>is.id)))}}let ji,Di,In,kn;const St=o.mapObject(ti.glyphDependencies,vr=>Object.keys(vr).map(Number));Object.keys(St).length?_t.send("getGlyphs",{uid:this.uid,stacks:St},(vr,Tr)=>{ji||(ji=vr,Di=Tr,Dr.call(this))}):Di={};const Bn=Object.keys(ti.iconDependencies);Bn.length?_t.send("getImages",{icons:Bn,source:this.source,tileID:this.tileID,type:"icons"},(vr,Tr)=>{ji||(ji=vr,In=Tr,Dr.call(this))}):In={};const er=Object.keys(ti.patternDependencies);function Dr(){if(ji)return Ut(ji);if(Di&&In&&kn){const vr=new v(Di),Tr=new o.ImageAtlas(In,kn);for(const zr in zt){const po=zt[zr];po instanceof o.SymbolBucket?(x(po.layers,this.zoom,ft),o.performSymbolLayout({bucket:po,glyphMap:Di,glyphPositions:vr.positions,imageMap:In,imagePositions:Tr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):po.hasPattern&&(po instanceof o.LineBucket||po instanceof o.FillBucket||po instanceof o.FillExtrusionBucket)&&(x(po.layers,this.zoom,ft),po.addFeatures(ti,this.tileID.canonical,Tr.patternPositions))}this.status="done",Ut(null,{buckets:Object.values(zt).filter(zr=>!zr.isEmpty()),featureIndex:Ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vr.image,imageAtlas:Tr,glyphMap:this.returnDependencies?Di:null,iconMap:this.returnDependencies?In:null,glyphPositions:this.returnDependencies?vr.positions:null})}}er.length?_t.send("getImages",{icons:er,source:this.source,tileID:this.tileID,type:"patterns"},(vr,Tr)=>{ji||(ji=vr,kn=Tr,Dr.call(this))}):kn={},Dr.call(this)}}function x(Pe,Te,qe){const ft=new o.EvaluationParameters(Te);for(const _t of Pe)_t.recalculate(ft,qe)}function C(Pe,Te){const qe=o.getArrayBuffer(Pe.request,(ft,_t,Ut,Ge)=>{ft?Te(ft):_t&&Te(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(_t)),rawData:_t,cacheControl:Ut,expires:Ge})});return()=>{qe.cancel(),Te()}}class T{constructor(Te,qe,ft,_t){this.actor=Te,this.layerIndex=qe,this.availableImages=ft,this.loadVectorData=_t||C,this.loading={},this.loaded={}}loadTile(Te,qe){const ft=Te.uid;this.loading||(this.loading={});const _t=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new o.RequestPerformance(Te.request),Ut=this.loading[ft]=new w(Te);Ut.abort=this.loadVectorData(Te,(Ge,Ht)=>{if(delete this.loading[ft],Ge||!Ht)return Ut.status="done",this.loaded[ft]=Ut,qe(Ge);const zt=Ht.rawData,ti={};Ht.expires&&(ti.expires=Ht.expires),Ht.cacheControl&&(ti.cacheControl=Ht.cacheControl);const vt={};if(_t){const ji=_t.finish();ji&&(vt.resourceTiming=JSON.parse(JSON.stringify(ji)))}Ut.vectorTile=Ht.vectorTile,Ut.parse(Ht.vectorTile,this.layerIndex,this.availableImages,this.actor,(ji,Di)=>{if(ji||!Di)return qe(ji);qe(null,o.extend({rawTileData:zt.slice(0)},Di,ti,vt))}),this.loaded=this.loaded||{},this.loaded[ft]=Ut})}reloadTile(Te,qe){const ft=this.loaded,_t=Te.uid,Ut=this;if(ft&&ft[_t]){const Ge=ft[_t];Ge.showCollisionBoxes=Te.showCollisionBoxes;const Ht=(zt,ti)=>{const vt=Ge.reloadCallback;vt&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,Ut.layerIndex,this.availableImages,Ut.actor,vt)),qe(zt,ti)};Ge.status==="parsing"?Ge.reloadCallback=Ht:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,Ht):Ht())}}abortTile(Te,qe){const ft=this.loading,_t=Te.uid;ft&&ft[_t]&&ft[_t].abort&&(ft[_t].abort(),delete ft[_t]),qe()}removeTile(Te,qe){const ft=this.loaded,_t=Te.uid;ft&&ft[_t]&&delete ft[_t],qe()}}class k{constructor(){this.loaded={}}loadTile(Te,qe){const{uid:ft,encoding:_t,rawImageData:Ut}=Te,Ge=o.isImageBitmap(Ut)?this.getImageData(Ut):Ut,Ht=new o.DEMData(ft,Ge,_t);this.loaded=this.loaded||{},this.loaded[ft]=Ht,qe(null,Ht)}getImageData(Te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Te.width,Te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Te.width,this.offscreenCanvas.height=Te.height,this.offscreenCanvasContext.drawImage(Te,0,0,Te.width,Te.height);const qe=this.offscreenCanvasContext.getImageData(-1,-1,Te.width+2,Te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:qe.width,height:qe.height},qe.data)}removeTile(Te){const qe=this.loaded,ft=Te.uid;qe&&qe[ft]&&delete qe[ft]}}var M=function Pe(Te,qe){var ft,_t=Te&&Te.type;if(_t==="FeatureCollection")for(ft=0;ft<Te.features.length;ft++)Pe(Te.features[ft],qe);else if(_t==="GeometryCollection")for(ft=0;ft<Te.geometries.length;ft++)Pe(Te.geometries[ft],qe);else if(_t==="Feature")Pe(Te.geometry,qe);else if(_t==="Polygon")O(Te.coordinates,qe);else if(_t==="MultiPolygon")for(ft=0;ft<Te.coordinates.length;ft++)O(Te.coordinates[ft],qe);return Te};function O(Pe,Te){if(Pe.length!==0){V(Pe[0],Te);for(var qe=1;qe<Pe.length;qe++)V(Pe[qe],!Te)}}function V(Pe,Te){for(var qe=0,ft=0,_t=0,Ut=Pe.length,Ge=Ut-1;_t<Ut;Ge=_t++){var Ht=(Pe[_t][0]-Pe[Ge][0])*(Pe[Ge][1]+Pe[_t][1]),zt=qe+Ht;ft+=Math.abs(qe)>=Math.abs(Ht)?qe-zt+Ht:Ht-zt+qe,qe=zt}qe+ft>=0!=!!Te&&Pe.reverse()}const W=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;class J{constructor(Te){this._feature=Te,this.extent=o.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const qe of this._feature.geometry)Te.push([new o.pointGeometry(qe[0],qe[1])]);return Te}{const Te=[];for(const qe of this._feature.geometry){const ft=[];for(const _t of qe)ft.push(new o.pointGeometry(_t[0],_t[1]));Te.push(ft)}return Te}}toGeoJSON(Te,qe,ft){return W.call(this,Te,qe,ft)}}class Q{constructor(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Te.length,this._features=Te}feature(Te){return new J(this._features[Te])}}var Z={exports:{}},ie=o.pointGeometry,Se=o.vectorTile.VectorTileFeature,xe=le;function le(Pe,Te){this.options=Te||{},this.features=Pe,this.length=Pe.length}function Ee(Pe,Te){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=Te||4096}le.prototype.feature=function(Pe){return new Ee(this.features[Pe],this.options.extent)},Ee.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var Te=0;Te<Pe.length;Te++){for(var qe=Pe[Te],ft=[],_t=0;_t<qe.length;_t++)ft.push(new ie(qe[_t][0],qe[_t][1]));this.geometry.push(ft)}return this.geometry},Ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,Te=1/0,qe=-1/0,ft=1/0,_t=-1/0,Ut=0;Ut<Pe.length;Ut++)for(var Ge=Pe[Ut],Ht=0;Ht<Ge.length;Ht++){var zt=Ge[Ht];Te=Math.min(Te,zt.x),qe=Math.max(qe,zt.x),ft=Math.min(ft,zt.y),_t=Math.max(_t,zt.y)}return[Te,ft,qe,_t]},Ee.prototype.toGeoJSON=Se.prototype.toGeoJSON;var me=o.pbf,Ae=xe;function pt(Pe){var Te=new me;return function(qe,ft){for(var _t in qe.layers)ft.writeMessage(3,rt,qe.layers[_t])}(Pe,Te),Te.finish()}function rt(Pe,Te){var qe;Te.writeVarintField(15,Pe.version||1),Te.writeStringField(1,Pe.name||""),Te.writeVarintField(5,Pe.extent||4096);var ft={keys:[],values:[],keycache:{},valuecache:{}};for(qe=0;qe<Pe.length;qe++)ft.feature=Pe.feature(qe),Te.writeMessage(2,Pt,ft);var _t=ft.keys;for(qe=0;qe<_t.length;qe++)Te.writeStringField(3,_t[qe]);var Ut=ft.values;for(qe=0;qe<Ut.length;qe++)Te.writeMessage(4,ce,Ut[qe])}function Pt(Pe,Te){var qe=Pe.feature;qe.id!==void 0&&Te.writeVarintField(1,qe.id),Te.writeMessage(2,We,Pe),Te.writeVarintField(3,qe.type),Te.writeMessage(4,Ue,qe)}function We(Pe,Te){var qe=Pe.feature,ft=Pe.keys,_t=Pe.values,Ut=Pe.keycache,Ge=Pe.valuecache;for(var Ht in qe.properties){var zt=qe.properties[Ht],ti=Ut[Ht];if(zt!==null){ti===void 0&&(ft.push(Ht),Ut[Ht]=ti=ft.length-1),Te.writeVarint(ti);var vt=typeof zt;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(zt=JSON.stringify(zt));var ji=vt+":"+zt,Di=Ge[ji];Di===void 0&&(_t.push(zt),Ge[ji]=Di=_t.length-1),Te.writeVarint(Di)}}}function be(Pe,Te){return(Te<<3)+(7&Pe)}function Le(Pe){return Pe<<1^Pe>>31}function Ue(Pe,Te){for(var qe=Pe.loadGeometry(),ft=Pe.type,_t=0,Ut=0,Ge=qe.length,Ht=0;Ht<Ge;Ht++){var zt=qe[Ht],ti=1;ft===1&&(ti=zt.length),Te.writeVarint(be(1,ti));for(var vt=ft===3?zt.length-1:zt.length,ji=0;ji<vt;ji++){ji===1&&ft!==1&&Te.writeVarint(be(2,vt-1));var Di=zt[ji].x-_t,In=zt[ji].y-Ut;Te.writeVarint(Le(Di)),Te.writeVarint(Le(In)),_t+=Di,Ut+=In}ft===3&&Te.writeVarint(be(7,1))}}function ce(Pe,Te){var qe=typeof Pe;qe==="string"?Te.writeStringField(1,Pe):qe==="boolean"?Te.writeBooleanField(7,Pe):qe==="number"&&(Pe%1!=0?Te.writeDoubleField(3,Pe):Pe<0?Te.writeSVarintField(6,Pe):Te.writeVarintField(5,Pe))}function Ie(Pe,Te,qe,ft,_t,Ut){if(_t-ft<=qe)return;const Ge=ft+_t>>1;de(Pe,Te,Ge,ft,_t,Ut%2),Ie(Pe,Te,qe,ft,Ge-1,Ut+1),Ie(Pe,Te,qe,Ge+1,_t,Ut+1)}function de(Pe,Te,qe,ft,_t,Ut){for(;_t>ft;){if(_t-ft>600){const ti=_t-ft+1,vt=qe-ft+1,ji=Math.log(ti),Di=.5*Math.exp(2*ji/3),In=.5*Math.sqrt(ji*Di*(ti-Di)/ti)*(vt-ti/2<0?-1:1);de(Pe,Te,qe,Math.max(ft,Math.floor(qe-vt*Di/ti+In)),Math.min(_t,Math.floor(qe+(ti-vt)*Di/ti+In)),Ut)}const Ge=Te[2*qe+Ut];let Ht=ft,zt=_t;for(ge(Pe,Te,ft,qe),Te[2*_t+Ut]>Ge&&ge(Pe,Te,ft,_t);Ht<zt;){for(ge(Pe,Te,Ht,zt),Ht++,zt--;Te[2*Ht+Ut]<Ge;)Ht++;for(;Te[2*zt+Ut]>Ge;)zt--}Te[2*ft+Ut]===Ge?ge(Pe,Te,ft,zt):(zt++,ge(Pe,Te,zt,_t)),zt<=qe&&(ft=zt+1),qe<=zt&&(_t=zt-1)}}function ge(Pe,Te,qe,ft){Re(Pe,qe,ft),Re(Te,2*qe,2*ft),Re(Te,2*qe+1,2*ft+1)}function Re(Pe,Te,qe){const ft=Pe[Te];Pe[Te]=Pe[qe],Pe[qe]=ft}function Ze(Pe,Te,qe,ft){const _t=Pe-qe,Ut=Te-ft;return _t*_t+Ut*Ut}Z.exports=pt,Z.exports.fromVectorTileJs=pt,Z.exports.fromGeojsonVt=function(Pe,Te){Te=Te||{};var qe={};for(var ft in Pe)qe[ft]=new Ae(Pe[ft].features,Te),qe[ft].name=ft,qe[ft].version=Te.version,qe[ft].extent=Te.extent;return pt({layers:qe})},Z.exports.GeoJSONWrapper=Ae;const ut=Pe=>Pe[0],Xe=Pe=>Pe[1];class $e{constructor(Te,qe=ut,ft=Xe,_t=64,Ut=Float64Array){this.nodeSize=_t,this.points=Te;const Ge=Te.length<65536?Uint16Array:Uint32Array,Ht=this.ids=new Ge(Te.length),zt=this.coords=new Ut(2*Te.length);for(let ti=0;ti<Te.length;ti++)Ht[ti]=ti,zt[2*ti]=qe(Te[ti]),zt[2*ti+1]=ft(Te[ti]);Ie(Ht,zt,_t,0,Ht.length-1,0)}range(Te,qe,ft,_t){return function(Ut,Ge,Ht,zt,ti,vt,ji){const Di=[0,Ut.length-1,0],In=[];let kn,St;for(;Di.length;){const Bn=Di.pop(),er=Di.pop(),Dr=Di.pop();if(er-Dr<=ji){for(let zr=Dr;zr<=er;zr++)kn=Ge[2*zr],St=Ge[2*zr+1],kn>=Ht&&kn<=ti&&St>=zt&&St<=vt&&In.push(Ut[zr]);continue}const vr=Math.floor((Dr+er)/2);kn=Ge[2*vr],St=Ge[2*vr+1],kn>=Ht&&kn<=ti&&St>=zt&&St<=vt&&In.push(Ut[vr]);const Tr=(Bn+1)%2;(Bn===0?Ht<=kn:zt<=St)&&(Di.push(Dr),Di.push(vr-1),Di.push(Tr)),(Bn===0?ti>=kn:vt>=St)&&(Di.push(vr+1),Di.push(er),Di.push(Tr))}return In}(this.ids,this.coords,Te,qe,ft,_t,this.nodeSize)}within(Te,qe,ft){return function(_t,Ut,Ge,Ht,zt,ti){const vt=[0,_t.length-1,0],ji=[],Di=zt*zt;for(;vt.length;){const In=vt.pop(),kn=vt.pop(),St=vt.pop();if(kn-St<=ti){for(let Tr=St;Tr<=kn;Tr++)Ze(Ut[2*Tr],Ut[2*Tr+1],Ge,Ht)<=Di&&ji.push(_t[Tr]);continue}const Bn=Math.floor((St+kn)/2),er=Ut[2*Bn],Dr=Ut[2*Bn+1];Ze(er,Dr,Ge,Ht)<=Di&&ji.push(_t[Bn]);const vr=(In+1)%2;(In===0?Ge-zt<=er:Ht-zt<=Dr)&&(vt.push(St),vt.push(Bn-1),vt.push(vr)),(In===0?Ge+zt>=er:Ht+zt>=Dr)&&(vt.push(Bn+1),vt.push(kn),vt.push(vr))}return ji}(this.ids,this.coords,Te,qe,ft,this.nodeSize)}}const Dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},ni=Math.fround||(mt=new Float32Array(1),Pe=>(mt[0]=+Pe,mt[0]));var mt;class At{constructor(Te){this.options=Ot(Object.create(Dt),Te),this.trees=new Array(this.options.maxZoom+1)}load(Te){const{log:qe,minZoom:ft,maxZoom:_t,nodeSize:Ut}=this.options;qe&&console.time("total time");const Ge=`prepare ${Te.length} points`;qe&&console.time(Ge),this.points=Te;let Ht=[];for(let zt=0;zt<Te.length;zt++)Te[zt].geometry&&Ht.push(Qe(Te[zt],zt));this.trees[_t+1]=new $e(Ht,ai,Ji,Ut,Float32Array),qe&&console.timeEnd(Ge);for(let zt=_t;zt>=ft;zt--){const ti=+Date.now();Ht=this._cluster(Ht,zt),this.trees[zt]=new $e(Ht,ai,Ji,Ut,Float32Array),qe&&console.log("z%d: %d clusters in %dms",zt,Ht.length,+Date.now()-ti)}return qe&&console.timeEnd("total time"),this}getClusters(Te,qe){let ft=((Te[0]+180)%360+360)%360-180;const _t=Math.max(-90,Math.min(90,Te[1]));let Ut=Te[2]===180?180:((Te[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Te[3]));if(Te[2]-Te[0]>=360)ft=-180,Ut=180;else if(ft>Ut){const vt=this.getClusters([ft,_t,180,Ge],qe),ji=this.getClusters([-180,_t,Ut,Ge],qe);return vt.concat(ji)}const Ht=this.trees[this._limitZoom(qe)],zt=Ht.range(Zt(ft),Ei(Ge),Zt(Ut),Ei(_t)),ti=[];for(const vt of zt){const ji=Ht.points[vt];ti.push(ji.numPoints?Yt(ji):this.points[ji.index])}return ti}getChildren(Te){const qe=this._getOriginId(Te),ft=this._getOriginZoom(Te),_t="No cluster with the specified id.",Ut=this.trees[ft];if(!Ut)throw new Error(_t);const Ge=Ut.points[qe];if(!Ge)throw new Error(_t);const Ht=this.options.radius/(this.options.extent*Math.pow(2,ft-1)),zt=Ut.within(Ge.x,Ge.y,Ht),ti=[];for(const vt of zt){const ji=Ut.points[vt];ji.parentId===Te&&ti.push(ji.numPoints?Yt(ji):this.points[ji.index])}if(ti.length===0)throw new Error(_t);return ti}getLeaves(Te,qe,ft){const _t=[];return this._appendLeaves(_t,Te,qe=qe||10,ft=ft||0,0),_t}getTile(Te,qe,ft){const _t=this.trees[this._limitZoom(Te)],Ut=Math.pow(2,Te),{extent:Ge,radius:Ht}=this.options,zt=Ht/Ge,ti=(ft-zt)/Ut,vt=(ft+1+zt)/Ut,ji={features:[]};return this._addTileFeatures(_t.range((qe-zt)/Ut,ti,(qe+1+zt)/Ut,vt),_t.points,qe,ft,Ut,ji),qe===0&&this._addTileFeatures(_t.range(1-zt/Ut,ti,1,vt),_t.points,Ut,ft,Ut,ji),qe===Ut-1&&this._addTileFeatures(_t.range(0,ti,zt/Ut,vt),_t.points,-1,ft,Ut,ji),ji.features.length?ji:null}getClusterExpansionZoom(Te){let qe=this._getOriginZoom(Te)-1;for(;qe<=this.options.maxZoom;){const ft=this.getChildren(Te);if(qe++,ft.length!==1)break;Te=ft[0].properties.cluster_id}return qe}_appendLeaves(Te,qe,ft,_t,Ut){const Ge=this.getChildren(qe);for(const Ht of Ge){const zt=Ht.properties;if(zt&&zt.cluster?Ut+zt.point_count<=_t?Ut+=zt.point_count:Ut=this._appendLeaves(Te,zt.cluster_id,ft,_t,Ut):Ut<_t?Ut++:Te.push(Ht),Te.length===ft)break}return Ut}_addTileFeatures(Te,qe,ft,_t,Ut,Ge){for(const Ht of Te){const zt=qe[Ht],ti=zt.numPoints;let vt,ji,Di;if(ti)vt=si(zt),ji=zt.x,Di=zt.y;else{const St=this.points[zt.index];vt=St.properties,ji=Zt(St.geometry.coordinates[0]),Di=Ei(St.geometry.coordinates[1])}const In={type:1,geometry:[[Math.round(this.options.extent*(ji*Ut-ft)),Math.round(this.options.extent*(Di*Ut-_t))]],tags:vt};let kn;ti?kn=zt.id:this.options.generateId?kn=zt.index:this.points[zt.index].id&&(kn=this.points[zt.index].id),kn!==void 0&&(In.id=kn),Ge.features.push(In)}}_limitZoom(Te){return Math.max(this.options.minZoom,Math.min(Math.floor(+Te),this.options.maxZoom+1))}_cluster(Te,qe){const ft=[],{radius:_t,extent:Ut,reduce:Ge,minPoints:Ht}=this.options,zt=_t/(Ut*Math.pow(2,qe));for(let ti=0;ti<Te.length;ti++){const vt=Te[ti];if(vt.zoom<=qe)continue;vt.zoom=qe;const ji=this.trees[qe+1],Di=ji.within(vt.x,vt.y,zt),In=vt.numPoints||1;let kn=In;for(const St of Di){const Bn=ji.points[St];Bn.zoom>qe&&(kn+=Bn.numPoints||1)}if(kn>In&&kn>=Ht){let St=vt.x*In,Bn=vt.y*In,er=Ge&&In>1?this._map(vt,!0):null;const Dr=(ti<<5)+(qe+1)+this.points.length;for(const vr of Di){const Tr=ji.points[vr];if(Tr.zoom<=qe)continue;Tr.zoom=qe;const zr=Tr.numPoints||1;St+=Tr.x*zr,Bn+=Tr.y*zr,Tr.parentId=Dr,Ge&&(er||(er=this._map(vt,!0)),Ge(er,this._map(Tr)))}vt.parentId=Dr,ft.push(xt(St/kn,Bn/kn,Dr,kn,er))}else if(ft.push(vt),kn>1)for(const St of Di){const Bn=ji.points[St];Bn.zoom<=qe||(Bn.zoom=qe,ft.push(Bn))}}return ft}_getOriginId(Te){return Te-this.points.length>>5}_getOriginZoom(Te){return(Te-this.points.length)%32}_map(Te,qe){if(Te.numPoints)return qe?Ot({},Te.properties):Te.properties;const ft=this.points[Te.index].properties,_t=this.options.map(ft);return qe&&_t===ft?Ot({},_t):_t}}function xt(Pe,Te,qe,ft,_t){return{x:ni(Pe),y:ni(Te),zoom:1/0,id:qe,parentId:-1,numPoints:ft,properties:_t}}function Qe(Pe,Te){const[qe,ft]=Pe.geometry.coordinates;return{x:ni(Zt(qe)),y:ni(Ei(ft)),zoom:1/0,index:Te,parentId:-1}}function Yt(Pe){return{type:"Feature",id:Pe.id,properties:si(Pe),geometry:{type:"Point",coordinates:[(Te=Pe.x,360*(Te-.5)),Qt(Pe.y)]}};var Te}function si(Pe){const Te=Pe.numPoints,qe=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te;return Ot(Ot({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:Te,point_count_abbreviated:qe})}function Zt(Pe){return Pe/360+.5}function Ei(Pe){const Te=Math.sin(Pe*Math.PI/180),qe=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return qe<0?0:qe>1?1:qe}function Qt(Pe){const Te=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(Te))/Math.PI-90}function Ot(Pe,Te){for(const qe in Te)Pe[qe]=Te[qe];return Pe}function ai(Pe){return Pe.x}function Ji(Pe){return Pe.y}function Ii(Pe,Te,qe,ft){for(var _t,Ut=ft,Ge=qe-Te>>1,Ht=qe-Te,zt=Pe[Te],ti=Pe[Te+1],vt=Pe[qe],ji=Pe[qe+1],Di=Te+3;Di<qe;Di+=3){var In=$t(Pe[Di],Pe[Di+1],zt,ti,vt,ji);if(In>Ut)_t=Di,Ut=In;else if(In===Ut){var kn=Math.abs(Di-Ge);kn<Ht&&(_t=Di,Ht=kn)}}Ut>ft&&(_t-Te>3&&Ii(Pe,Te,_t,ft),Pe[_t+2]=Ut,qe-_t>3&&Ii(Pe,_t,qe,ft))}function $t(Pe,Te,qe,ft,_t,Ut){var Ge=_t-qe,Ht=Ut-ft;if(Ge!==0||Ht!==0){var zt=((Pe-qe)*Ge+(Te-ft)*Ht)/(Ge*Ge+Ht*Ht);zt>1?(qe=_t,ft=Ut):zt>0&&(qe+=Ge*zt,ft+=Ht*zt)}return(Ge=Pe-qe)*Ge+(Ht=Te-ft)*Ht}function Me(Pe,Te,qe,ft){var _t={id:Pe===void 0?null:Pe,type:Te,geometry:qe,tags:ft,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ut){var Ge=Ut.geometry,Ht=Ut.type;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")ee(Ut,Ge);else if(Ht==="Polygon"||Ht==="MultiLineString")for(var zt=0;zt<Ge.length;zt++)ee(Ut,Ge[zt]);else if(Ht==="MultiPolygon")for(zt=0;zt<Ge.length;zt++)for(var ti=0;ti<Ge[zt].length;ti++)ee(Ut,Ge[zt][ti])}(_t),_t}function ee(Pe,Te){for(var qe=0;qe<Te.length;qe+=3)Pe.minX=Math.min(Pe.minX,Te[qe]),Pe.minY=Math.min(Pe.minY,Te[qe+1]),Pe.maxX=Math.max(Pe.maxX,Te[qe]),Pe.maxY=Math.max(Pe.maxY,Te[qe+1])}function ae(Pe,Te,qe,ft){if(Te.geometry){var _t=Te.geometry.coordinates,Ut=Te.geometry.type,Ge=Math.pow(qe.tolerance/((1<<qe.maxZoom)*qe.extent),2),Ht=[],zt=Te.id;if(qe.promoteId?zt=Te.properties[qe.promoteId]:qe.generateId&&(zt=ft||0),Ut==="Point")et(_t,Ht);else if(Ut==="MultiPoint")for(var ti=0;ti<_t.length;ti++)et(_t[ti],Ht);else if(Ut==="LineString")bt(_t,Ht,Ge,!1);else if(Ut==="MultiLineString"){if(qe.lineMetrics){for(ti=0;ti<_t.length;ti++)bt(_t[ti],Ht=[],Ge,!1),Pe.push(Me(zt,"LineString",Ht,Te.properties));return}Xt(_t,Ht,Ge,!1)}else if(Ut==="Polygon")Xt(_t,Ht,Ge,!0);else{if(Ut!=="MultiPolygon"){if(Ut==="GeometryCollection"){for(ti=0;ti<Te.geometry.geometries.length;ti++)ae(Pe,{id:zt,geometry:Te.geometry.geometries[ti],properties:Te.properties},qe,ft);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ti=0;ti<_t.length;ti++){var vt=[];Xt(_t[ti],vt,Ge,!0),Ht.push(vt)}}Pe.push(Me(zt,Ut,Ht,Te.properties))}}function et(Pe,Te){Te.push(fi(Pe[0])),Te.push(xn(Pe[1])),Te.push(0)}function bt(Pe,Te,qe,ft){for(var _t,Ut,Ge=0,Ht=0;Ht<Pe.length;Ht++){var zt=fi(Pe[Ht][0]),ti=xn(Pe[Ht][1]);Te.push(zt),Te.push(ti),Te.push(0),Ht>0&&(Ge+=ft?(_t*ti-zt*Ut)/2:Math.sqrt(Math.pow(zt-_t,2)+Math.pow(ti-Ut,2))),_t=zt,Ut=ti}var vt=Te.length-3;Te[2]=1,Ii(Te,0,vt,qe),Te[vt+2]=1,Te.size=Math.abs(Ge),Te.start=0,Te.end=Te.size}function Xt(Pe,Te,qe,ft){for(var _t=0;_t<Pe.length;_t++){var Ut=[];bt(Pe[_t],Ut,qe,ft),Te.push(Ut)}}function fi(Pe){return Pe/360+.5}function xn(Pe){var Te=Math.sin(Pe*Math.PI/180),qe=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return qe<0?0:qe>1?1:qe}function qn(Pe,Te,qe,ft,_t,Ut,Ge,Ht){if(ft/=Te,Ut>=(qe/=Te)&&Ge<ft)return Pe;if(Ge<qe||Ut>=ft)return null;for(var zt=[],ti=0;ti<Pe.length;ti++){var vt=Pe[ti],ji=vt.geometry,Di=vt.type,In=_t===0?vt.minX:vt.minY,kn=_t===0?vt.maxX:vt.maxY;if(In>=qe&&kn<ft)zt.push(vt);else if(!(kn<qe||In>=ft)){var St=[];if(Di==="Point"||Di==="MultiPoint")bn(ji,St,qe,ft,_t);else if(Di==="LineString")Gi(ji,St,qe,ft,_t,!1,Ht.lineMetrics);else if(Di==="MultiLineString")Kn(ji,St,qe,ft,_t,!1);else if(Di==="Polygon")Kn(ji,St,qe,ft,_t,!0);else if(Di==="MultiPolygon")for(var Bn=0;Bn<ji.length;Bn++){var er=[];Kn(ji[Bn],er,qe,ft,_t,!0),er.length&&St.push(er)}if(St.length){if(Ht.lineMetrics&&Di==="LineString"){for(Bn=0;Bn<St.length;Bn++)zt.push(Me(vt.id,Di,St[Bn],vt.tags));continue}Di!=="LineString"&&Di!=="MultiLineString"||(St.length===1?(Di="LineString",St=St[0]):Di="MultiLineString"),Di!=="Point"&&Di!=="MultiPoint"||(Di=St.length===3?"Point":"MultiPoint"),zt.push(Me(vt.id,Di,St,vt.tags))}}}return zt.length?zt:null}function bn(Pe,Te,qe,ft,_t){for(var Ut=0;Ut<Pe.length;Ut+=3){var Ge=Pe[Ut+_t];Ge>=qe&&Ge<=ft&&(Te.push(Pe[Ut]),Te.push(Pe[Ut+1]),Te.push(Pe[Ut+2]))}}function Gi(Pe,Te,qe,ft,_t,Ut,Ge){for(var Ht,zt,ti=an(Pe),vt=_t===0?yo:ar,ji=Pe.start,Di=0;Di<Pe.length-3;Di+=3){var In=Pe[Di],kn=Pe[Di+1],St=Pe[Di+2],Bn=Pe[Di+3],er=Pe[Di+4],Dr=_t===0?In:kn,vr=_t===0?Bn:er,Tr=!1;Ge&&(Ht=Math.sqrt(Math.pow(In-Bn,2)+Math.pow(kn-er,2))),Dr<qe?vr>qe&&(zt=vt(ti,In,kn,Bn,er,qe),Ge&&(ti.start=ji+Ht*zt)):Dr>ft?vr<ft&&(zt=vt(ti,In,kn,Bn,er,ft),Ge&&(ti.start=ji+Ht*zt)):mr(ti,In,kn,St),vr<qe&&Dr>=qe&&(zt=vt(ti,In,kn,Bn,er,qe),Tr=!0),vr>ft&&Dr<=ft&&(zt=vt(ti,In,kn,Bn,er,ft),Tr=!0),!Ut&&Tr&&(Ge&&(ti.end=ji+Ht*zt),Te.push(ti),ti=an(Pe)),Ge&&(ji+=Ht)}var zr=Pe.length-3;In=Pe[zr],kn=Pe[zr+1],St=Pe[zr+2],(Dr=_t===0?In:kn)>=qe&&Dr<=ft&&mr(ti,In,kn,St),zr=ti.length-3,Ut&&zr>=3&&(ti[zr]!==ti[0]||ti[zr+1]!==ti[1])&&mr(ti,ti[0],ti[1],ti[2]),ti.length&&Te.push(ti)}function an(Pe){var Te=[];return Te.size=Pe.size,Te.start=Pe.start,Te.end=Pe.end,Te}function Kn(Pe,Te,qe,ft,_t,Ut){for(var Ge=0;Ge<Pe.length;Ge++)Gi(Pe[Ge],Te,qe,ft,_t,Ut,!1)}function mr(Pe,Te,qe,ft){Pe.push(Te),Pe.push(qe),Pe.push(ft)}function yo(Pe,Te,qe,ft,_t,Ut){var Ge=(Ut-Te)/(ft-Te);return Pe.push(Ut),Pe.push(qe+(_t-qe)*Ge),Pe.push(1),Ge}function ar(Pe,Te,qe,ft,_t,Ut){var Ge=(Ut-qe)/(_t-qe);return Pe.push(Te+(ft-Te)*Ge),Pe.push(Ut),Pe.push(1),Ge}function Hr(Pe,Te){for(var qe=[],ft=0;ft<Pe.length;ft++){var _t,Ut=Pe[ft],Ge=Ut.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")_t=Yn(Ut.geometry,Te);else if(Ge==="MultiLineString"||Ge==="Polygon"){_t=[];for(var Ht=0;Ht<Ut.geometry.length;Ht++)_t.push(Yn(Ut.geometry[Ht],Te))}else if(Ge==="MultiPolygon")for(_t=[],Ht=0;Ht<Ut.geometry.length;Ht++){for(var zt=[],ti=0;ti<Ut.geometry[Ht].length;ti++)zt.push(Yn(Ut.geometry[Ht][ti],Te));_t.push(zt)}qe.push(Me(Ut.id,Ge,_t,Ut.tags))}return qe}function Yn(Pe,Te){var qe=[];qe.size=Pe.size,Pe.start!==void 0&&(qe.start=Pe.start,qe.end=Pe.end);for(var ft=0;ft<Pe.length;ft+=3)qe.push(Pe[ft]+Te,Pe[ft+1],Pe[ft+2]);return qe}function Ur(Pe,Te){if(Pe.transformed)return Pe;var qe,ft,_t,Ut=1<<Pe.z,Ge=Pe.x,Ht=Pe.y;for(qe=0;qe<Pe.features.length;qe++){var zt=Pe.features[qe],ti=zt.geometry,vt=zt.type;if(zt.geometry=[],vt===1)for(ft=0;ft<ti.length;ft+=2)zt.geometry.push(co(ti[ft],ti[ft+1],Te,Ut,Ge,Ht));else for(ft=0;ft<ti.length;ft++){var ji=[];for(_t=0;_t<ti[ft].length;_t+=2)ji.push(co(ti[ft][_t],ti[ft][_t+1],Te,Ut,Ge,Ht));zt.geometry.push(ji)}}return Pe.transformed=!0,Pe}function co(Pe,Te,qe,ft,_t,Ut){return[Math.round(qe*(Pe*ft-_t)),Math.round(qe*(Te*ft-Ut))]}function Jn(Pe,Te,qe,ft,_t){for(var Ut=Te===_t.maxZoom?0:_t.tolerance/((1<<Te)*_t.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:qe,y:ft,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ht=0;Ht<Pe.length;Ht++){Ge.numFeatures++,br(Ge,Pe[Ht],Ut,_t);var zt=Pe[Ht].minX,ti=Pe[Ht].minY,vt=Pe[Ht].maxX,ji=Pe[Ht].maxY;zt<Ge.minX&&(Ge.minX=zt),ti<Ge.minY&&(Ge.minY=ti),vt>Ge.maxX&&(Ge.maxX=vt),ji>Ge.maxY&&(Ge.maxY=ji)}return Ge}function br(Pe,Te,qe,ft){var _t=Te.geometry,Ut=Te.type,Ge=[];if(Ut==="Point"||Ut==="MultiPoint")for(var Ht=0;Ht<_t.length;Ht+=3)Ge.push(_t[Ht]),Ge.push(_t[Ht+1]),Pe.numPoints++,Pe.numSimplified++;else if(Ut==="LineString")Eo(Ge,_t,Pe,qe,!1,!1);else if(Ut==="MultiLineString"||Ut==="Polygon")for(Ht=0;Ht<_t.length;Ht++)Eo(Ge,_t[Ht],Pe,qe,Ut==="Polygon",Ht===0);else if(Ut==="MultiPolygon")for(var zt=0;zt<_t.length;zt++){var ti=_t[zt];for(Ht=0;Ht<ti.length;Ht++)Eo(Ge,ti[Ht],Pe,qe,!0,Ht===0)}if(Ge.length){var vt=Te.tags||null;if(Ut==="LineString"&&ft.lineMetrics){for(var ji in vt={},Te.tags)vt[ji]=Te.tags[ji];vt.mapbox_clip_start=_t.start/_t.size,vt.mapbox_clip_end=_t.end/_t.size}var Di={geometry:Ge,type:Ut==="Polygon"||Ut==="MultiPolygon"?3:Ut==="LineString"||Ut==="MultiLineString"?2:1,tags:vt};Te.id!==null&&(Di.id=Te.id),Pe.features.push(Di)}}function Eo(Pe,Te,qe,ft,_t,Ut){var Ge=ft*ft;if(ft>0&&Te.size<(_t?Ge:ft))qe.numPoints+=Te.length/3;else{for(var Ht=[],zt=0;zt<Te.length;zt+=3)(ft===0||Te[zt+2]>Ge)&&(qe.numSimplified++,Ht.push(Te[zt]),Ht.push(Te[zt+1])),qe.numPoints++;_t&&function(ti,vt){for(var ji=0,Di=0,In=ti.length,kn=In-2;Di<In;kn=Di,Di+=2)ji+=(ti[Di]-ti[kn])*(ti[Di+1]+ti[kn+1]);if(ji>0===vt)for(Di=0,In=ti.length;Di<In/2;Di+=2){var St=ti[Di],Bn=ti[Di+1];ti[Di]=ti[In-2-Di],ti[Di+1]=ti[In-1-Di],ti[In-2-Di]=St,ti[In-1-Di]=Bn}}(Ht,Ut),Pe.push(Ht)}}function un(Pe,Te){var qe=(Te=this.options=function(_t,Ut){for(var Ge in Ut)_t[Ge]=Ut[Ge];return _t}(Object.create(this.options),Te)).debug;if(qe&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var ft=function(_t,Ut){var Ge=[];if(_t.type==="FeatureCollection")for(var Ht=0;Ht<_t.features.length;Ht++)ae(Ge,_t.features[Ht],Ut,Ht);else ae(Ge,_t.type==="Feature"?_t:{geometry:_t},Ut);return Ge}(Pe,Te);this.tiles={},this.tileCoords=[],qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ft=function(_t,Ut){var Ge=Ut.buffer/Ut.extent,Ht=_t,zt=qn(_t,1,-1-Ge,Ge,0,-1,2,Ut),ti=qn(_t,1,1-Ge,2+Ge,0,-1,2,Ut);return(zt||ti)&&(Ht=qn(_t,1,-Ge,1+Ge,0,-1,2,Ut)||[],zt&&(Ht=Hr(zt,1).concat(Ht)),ti&&(Ht=Ht.concat(Hr(ti,-1)))),Ht}(ft,Te),ft.length&&this.splitTile(ft,0,0,0),qe&&(ft.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function He(Pe,Te,qe){return 32*((1<<Pe)*qe+Te)+Pe}function Ho(Pe,Te){const qe=Pe.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);const ft=this._geoJSONIndex.getTile(qe.z,qe.x,qe.y);if(!ft)return Te(null,null);const _t=new Q(ft.features);let Ut=Z.exports(_t);Ut.byteOffset===0&&Ut.byteLength===Ut.buffer.byteLength||(Ut=new Uint8Array(Ut)),Te(null,{vectorTile:_t,rawData:Ut.buffer})}un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},un.prototype.splitTile=function(Pe,Te,qe,ft,_t,Ut,Ge){for(var Ht=[Pe,Te,qe,ft],zt=this.options,ti=zt.debug;Ht.length;){ft=Ht.pop(),qe=Ht.pop(),Te=Ht.pop(),Pe=Ht.pop();var vt=1<<Te,ji=He(Te,qe,ft),Di=this.tiles[ji];if(!Di&&(ti>1&&console.time("creation"),Di=this.tiles[ji]=Jn(Pe,Te,qe,ft,zt),this.tileCoords.push({z:Te,x:qe,y:ft}),ti)){ti>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,qe,ft,Di.numFeatures,Di.numPoints,Di.numSimplified),console.timeEnd("creation"));var In="z"+Te;this.stats[In]=(this.stats[In]||0)+1,this.total++}if(Di.source=Pe,_t){if(Te===zt.maxZoom||Te===_t)continue;var kn=1<<_t-Te;if(qe!==Math.floor(Ut/kn)||ft!==Math.floor(Ge/kn))continue}else if(Te===zt.indexMaxZoom||Di.numPoints<=zt.indexMaxPoints)continue;if(Di.source=null,Pe.length!==0){ti>1&&console.time("clipping");var St,Bn,er,Dr,vr,Tr,zr=.5*zt.buffer/zt.extent,po=.5-zr,ts=.5+zr,_o=1+zr;St=Bn=er=Dr=null,vr=qn(Pe,vt,qe-zr,qe+ts,0,Di.minX,Di.maxX,zt),Tr=qn(Pe,vt,qe+po,qe+_o,0,Di.minX,Di.maxX,zt),Pe=null,vr&&(St=qn(vr,vt,ft-zr,ft+ts,1,Di.minY,Di.maxY,zt),Bn=qn(vr,vt,ft+po,ft+_o,1,Di.minY,Di.maxY,zt),vr=null),Tr&&(er=qn(Tr,vt,ft-zr,ft+ts,1,Di.minY,Di.maxY,zt),Dr=qn(Tr,vt,ft+po,ft+_o,1,Di.minY,Di.maxY,zt),Tr=null),ti>1&&console.timeEnd("clipping"),Ht.push(St||[],Te+1,2*qe,2*ft),Ht.push(Bn||[],Te+1,2*qe,2*ft+1),Ht.push(er||[],Te+1,2*qe+1,2*ft),Ht.push(Dr||[],Te+1,2*qe+1,2*ft+1)}}},un.prototype.getTile=function(Pe,Te,qe){var ft=this.options,_t=ft.extent,Ut=ft.debug;if(Pe<0||Pe>24)return null;var Ge=1<<Pe,Ht=He(Pe,Te=(Te%Ge+Ge)%Ge,qe);if(this.tiles[Ht])return Ur(this.tiles[Ht],_t);Ut>1&&console.log("drilling down to z%d-%d-%d",Pe,Te,qe);for(var zt,ti=Pe,vt=Te,ji=qe;!zt&&ti>0;)ti--,vt=Math.floor(vt/2),ji=Math.floor(ji/2),zt=this.tiles[He(ti,vt,ji)];return zt&&zt.source?(Ut>1&&console.log("found parent tile z%d-%d-%d",ti,vt,ji),Ut>1&&console.time("drilling down"),this.splitTile(zt.source,ti,vt,ji,Pe,Te,qe),Ut>1&&console.timeEnd("drilling down"),this.tiles[Ht]?Ur(this.tiles[Ht],_t):null):null};class Do extends T{constructor(Te,qe,ft,_t){super(Te,qe,ft,Ho),_t&&(this.loadGeoJSON=_t)}loadData(Te,qe){var ft;(ft=this._pendingRequest)===null||ft===void 0||ft.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const _t=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new o.RequestPerformance(Te.request);this._pendingCallback=qe,this._pendingRequest=this.loadGeoJSON(Te,(Ut,Ge)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ut||!Ge)return qe(Ut);if(typeof Ge!="object")return qe(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`));{M(Ge,!0);try{if(Te.filter){const zt=o.createExpression(Te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(zt.result==="error")throw new Error(zt.value.map(vt=>`${vt.key}: ${vt.message}`).join(", "));const ti=Ge.features.filter(vt=>zt.value.evaluate({zoom:0},vt));Ge={type:"FeatureCollection",features:ti}}this._geoJSONIndex=Te.cluster?new At(function({superclusterOptions:zt,clusterProperties:ti}){if(!ti||!zt)return zt;const vt={},ji={},Di={accumulated:null,zoom:0},In={properties:null},kn=Object.keys(ti);for(const St of kn){const[Bn,er]=ti[St],Dr=o.createExpression(er),vr=o.createExpression(typeof Bn=="string"?[Bn,["accumulated"],["get",St]]:Bn);vt[St]=Dr.value,ji[St]=vr.value}return zt.map=St=>{In.properties=St;const Bn={};for(const er of kn)Bn[er]=vt[er].evaluate(Di,In);return Bn},zt.reduce=(St,Bn)=>{In.properties=Bn;for(const er of kn)Di.accumulated=St[er],St[er]=ji[er].evaluate(Di,In)},zt}(Te)).load(Ge.features):function(zt,ti){return new un(zt,ti)}(Ge,Te.geojsonVtOptions)}catch(zt){return qe(zt)}this.loaded={};const Ht={};if(_t){const zt=_t.finish();zt&&(Ht.resourceTiming={},Ht.resourceTiming[Te.source]=JSON.parse(JSON.stringify(zt)))}qe(null,Ht)}})}reloadTile(Te,qe){const ft=this.loaded;return ft&&ft[Te.uid]?super.reloadTile(Te,qe):this.loadTile(Te,qe)}loadGeoJSON(Te,qe){if(Te.request)return o.getJSON(Te.request,qe);if(typeof Te.data=="string")try{qe(null,JSON.parse(Te.data))}catch{qe(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`))}else qe(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Te,qe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),qe()}getClusterExpansionZoom(Te,qe){try{qe(null,this._geoJSONIndex.getClusterExpansionZoom(Te.clusterId))}catch(ft){qe(ft)}}getClusterChildren(Te,qe){try{qe(null,this._geoJSONIndex.getChildren(Te.clusterId))}catch(ft){qe(ft)}}getClusterLeaves(Te,qe){try{qe(null,this._geoJSONIndex.getLeaves(Te.clusterId,Te.limit,Te.offset))}catch(ft){qe(ft)}}}class wo{constructor(Te){this.self=Te,this.actor=new o.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:Do},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(qe,ft)=>{if(this.workerSourceTypes[qe])throw new Error(`Worker source with name "${qe}" already registered.`);this.workerSourceTypes[qe]=ft},this.self.registerRTLTextPlugin=qe=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=qe.applyArabicShaping,o.plugin.processBidirectionalText=qe.processBidirectionalText,o.plugin.processStyledBidirectionalText=qe.processStyledBidirectionalText}}setReferrer(Te,qe){this.referrer=qe}setImages(Te,qe,ft){this.availableImages[Te]=qe;for(const _t in this.workerSources[Te]){const Ut=this.workerSources[Te][_t];for(const Ge in Ut)Ut[Ge].availableImages=qe}ft()}setLayers(Te,qe,ft){this.getLayerIndex(Te).replace(qe),ft()}updateLayers(Te,qe,ft){this.getLayerIndex(Te).update(qe.layers,qe.removedIds),ft()}loadTile(Te,qe,ft){this.getWorkerSource(Te,qe.type,qe.source).loadTile(qe,ft)}loadDEMTile(Te,qe,ft){this.getDEMWorkerSource(Te,qe.source).loadTile(qe,ft)}reloadTile(Te,qe,ft){this.getWorkerSource(Te,qe.type,qe.source).reloadTile(qe,ft)}abortTile(Te,qe,ft){this.getWorkerSource(Te,qe.type,qe.source).abortTile(qe,ft)}removeTile(Te,qe,ft){this.getWorkerSource(Te,qe.type,qe.source).removeTile(qe,ft)}removeDEMTile(Te,qe){this.getDEMWorkerSource(Te,qe.source).removeTile(qe)}removeSource(Te,qe,ft){if(!this.workerSources[Te]||!this.workerSources[Te][qe.type]||!this.workerSources[Te][qe.type][qe.source])return;const _t=this.workerSources[Te][qe.type][qe.source];delete this.workerSources[Te][qe.type][qe.source],_t.removeSource!==void 0?_t.removeSource(qe,ft):ft()}loadWorkerSource(Te,qe,ft){try{this.self.importScripts(qe.url),ft()}catch(_t){ft(_t.toString())}}syncRTLPluginState(Te,qe,ft){try{o.plugin.setState(qe);const _t=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&_t!=null){this.self.importScripts(_t);const Ut=o.plugin.isParsed();ft(Ut?void 0:new Error(`RTL Text Plugin failed to import scripts from ${_t}`),Ut)}}catch(_t){ft(_t.toString())}}getAvailableImages(Te){let qe=this.availableImages[Te];return qe||(qe=[]),qe}getLayerIndex(Te){let qe=this.layerIndexes[Te];return qe||(qe=this.layerIndexes[Te]=new _),qe}getWorkerSource(Te,qe,ft){if(this.workerSources[Te]||(this.workerSources[Te]={}),this.workerSources[Te][qe]||(this.workerSources[Te][qe]={}),!this.workerSources[Te][qe][ft]){const _t={send:(Ut,Ge,Ht)=>{this.actor.send(Ut,Ge,Ht,Te)}};this.workerSources[Te][qe][ft]=new this.workerSourceTypes[qe](_t,this.getLayerIndex(Te),this.getAvailableImages(Te))}return this.workerSources[Te][qe][ft]}getDEMWorkerSource(Te,qe){return this.demWorkerSources[Te]||(this.demWorkerSources[Te]={}),this.demWorkerSources[Te][qe]||(this.demWorkerSources[Te][qe]=new k),this.demWorkerSources[Te][qe]}enforceCacheSizeLimit(Te,qe){o.enforceCacheSizeLimit(qe)}}return o.isWorker()&&(self.worker=new wo(self)),wo}),u(["./shared"],function(o){var c=g;function g(B){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var D,z,X=new Blob([""],{type:"text/javascript"}),ne=URL.createObjectURL(X);try{z=new Worker(ne),D=!0}catch{D=!1}return z&&z.terminate(),URL.revokeObjectURL(ne),D}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var D=document.createElement("canvas");D.width=D.height=1;var z=D.getContext("2d");if(!z)return!1;var X=z.getImageData(0,0,1,1);return X&&X.width===D.width}()?(_[I=d&&d.failIfMajorPerformanceCaveat]===void 0&&(_[I]=function(D){var z,X=function(ne){var pe=document.createElement("canvas"),_e=Object.create(g.webGLContextAttributes);return _e.failIfMajorPerformanceCaveat=ne,pe.getContext("webgl",_e)||pe.getContext("experimental-webgl",_e)}(D);if(!X)return!1;try{z=X.createShader(X.VERTEX_SHADER)}catch{return!1}return!(!z||X.isContextLost())&&(X.shaderSource(z,"void main() {}"),X.compileShader(z),X.getShaderParameter(z,X.COMPILE_STATUS)===!0)}(I)),_[I]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var I}(B)}var _={};function v(B,d){if(Array.isArray(B)){if(!Array.isArray(d)||B.length!==d.length)return!1;for(let I=0;I<B.length;I++)if(!v(B[I],d[I]))return!1;return!0}if(typeof B=="object"&&B!==null&&d!==null){if(typeof d!="object"||Object.keys(B).length!==Object.keys(d).length)return!1;for(const I in B)if(!v(B[I],d[I]))return!1;return!0}return B===d}g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class w{static testProp(d){if(!w.docStyle)return d[0];for(let I=0;I<d.length;I++)if(d[I]in w.docStyle)return d[I];return d[0]}static create(d,I,D){const z=window.document.createElement(d);return I!==void 0&&(z.className=I),D&&D.appendChild(z),z}static createNS(d,I){return window.document.createElementNS(d,I)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(d,I){d.style[w.transformProp]=I}static addEventListener(d,I,D,z={}){d.addEventListener(I,D,"passive"in z?z:z.capture)}static removeEventListener(d,I,D,z={}){d.removeEventListener(I,D,"passive"in z?z:z.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(d,I){const D=d.getBoundingClientRect();return new o.pointGeometry(I.clientX-D.left-d.clientLeft,I.clientY-D.top-d.clientTop)}static touchPos(d,I){const D=d.getBoundingClientRect(),z=[];for(let X=0;X<I.length;X++)z.push(new o.pointGeometry(I[X].clientX-D.left-d.clientLeft,I[X].clientY-D.top-d.clientTop));return z}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);class x{constructor(d){this._transformRequestFn=d}transformRequest(d,I){return this._transformRequestFn&&this._transformRequestFn(d,I)||{url:d}}normalizeSpriteURL(d,I,D){const z=function(X){const ne=X.match(C);if(!ne)throw new Error(`Unable to parse URL "${X}"`);return{protocol:ne[1],authority:ne[2],path:ne[3]||"/",params:ne[4]?ne[4].split("&"):[]}}(d);return z.path+=`${I}${D}`,function(X){const ne=X.params.length?`?${X.params.join("&")}`:"";return`${X.protocol}://${X.authority}${X.path}${ne}`}(z)}setTransformRequest(d){this._transformRequestFn=d}}const C=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(d,I,D,z){this.context=d,this.format=D,this.texture=d.gl.createTexture(),this.update(I,z)}update(d,I,D){const{width:z,height:X}=d,ne=!(this.size&&this.size[0]===z&&this.size[1]===X||D),{context:pe}=this,{gl:_e}=pe;if(this.useMipmap=Boolean(I&&I.useMipmap),_e.bindTexture(_e.TEXTURE_2D,this.texture),pe.pixelStoreUnpackFlipY.set(!1),pe.pixelStoreUnpack.set(1),pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===_e.RGBA&&(!I||I.premultiply!==!1)),ne)this.size=[z,X],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||o.isImageBitmap(d)?_e.texImage2D(_e.TEXTURE_2D,0,this.format,this.format,_e.UNSIGNED_BYTE,d):_e.texImage2D(_e.TEXTURE_2D,0,this.format,z,X,0,this.format,_e.UNSIGNED_BYTE,d.data);else{const{x:Ce,y:Be}=D||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||o.isImageBitmap(d)?_e.texSubImage2D(_e.TEXTURE_2D,0,Ce,Be,_e.RGBA,_e.UNSIGNED_BYTE,d):_e.texSubImage2D(_e.TEXTURE_2D,0,Ce,Be,z,X,_e.RGBA,_e.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&_e.generateMipmap(_e.TEXTURE_2D)}bind(d,I,D){const{context:z}=this,{gl:X}=z;X.bindTexture(X.TEXTURE_2D,this.texture),D!==X.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(D=X.LINEAR),d!==this.filter&&(X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,d),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,D||d),this.filter=d),I!==this.wrap&&(X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,I),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function k(B){const{userImage:d}=B;return!!(d&&d.render&&d.render())&&(B.data.replace(new Uint8Array(d.data.buffer)),!0)}class M extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:I,callback:D}of this.requestors)this._notify(I,D);this.requestors=[]}}getImage(d){return this.images[d]}addImage(d,I){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,I)&&(this.images[d]=I)}_validate(d,I){let D=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),D=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),D=!1),this._validateContent(I.content,I)||(this.fire(new o.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),D=!1),D}_validateStretch(d,I){if(!d)return!0;let D=0;for(const z of d){if(z[0]<D||z[1]<z[0]||I<z[1])return!1;D=z[1]}return!0}_validateContent(d,I){return!(d&&(d.length!==4||d[0]<0||I.data.width<d[0]||d[1]<0||I.data.height<d[1]||d[2]<0||I.data.width<d[2]||d[3]<0||I.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,I){const D=this.images[d];if(D.data.width!==I.data.width||D.data.height!==I.data.height)throw new Error(`size mismatch between old image (${D.data.width}x${D.data.height}) and new image (${I.data.width}x${I.data.height}).`);I.version=D.version+1,this.images[d]=I,this.updatedImages[d]=!0}removeImage(d){const I=this.images[d];delete this.images[d],delete this.patterns[d],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,I){let D=!0;if(!this.isLoaded())for(const z of d)this.images[z]||(D=!1);this.isLoaded()||D?this._notify(d,I):this.requestors.push({ids:d,callback:I})}_notify(d,I){const D={};for(const z of d){this.images[z]||this.fire(new o.Event("styleimagemissing",{id:z}));const X=this.images[z];X?D[z]={data:X.data.clone(),pixelRatio:X.pixelRatio,sdf:X.sdf,version:X.version,stretchX:X.stretchX,stretchY:X.stretchY,content:X.content,hasRenderCallback:Boolean(X.userImage&&X.userImage.render)}:o.warnOnce(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}I(null,D)}getPixelSize(){const{width:d,height:I}=this.atlasImage;return{width:d,height:I}}getPattern(d){const I=this.patterns[d],D=this.getImage(d);if(!D)return null;if(I&&I.position.version===D.version)return I.position;if(I)I.position.version=D.version;else{const z={w:D.data.width+2,h:D.data.height+2,x:0,y:0},X=new o.ImagePosition(z,D);this.patterns[d]={bin:z,position:X}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const I=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(d,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const X in this.patterns)d.push(this.patterns[X].bin);const{w:I,h:D}=o.potpack(d),z=this.atlasImage;z.resize({width:I||1,height:D||1});for(const X in this.patterns){const{bin:ne}=this.patterns[X],pe=ne.x+1,_e=ne.y+1,Ce=this.images[X].data,Be=Ce.width,Je=Ce.height;o.RGBAImage.copy(Ce,z,{x:0,y:0},{x:pe,y:_e},{width:Be,height:Je}),o.RGBAImage.copy(Ce,z,{x:0,y:Je-1},{x:pe,y:_e-1},{width:Be,height:1}),o.RGBAImage.copy(Ce,z,{x:0,y:0},{x:pe,y:_e+Je},{width:Be,height:1}),o.RGBAImage.copy(Ce,z,{x:Be-1,y:0},{x:pe-1,y:_e},{width:1,height:Je}),o.RGBAImage.copy(Ce,z,{x:0,y:0},{x:pe+Be,y:_e},{width:1,height:Je})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const I of d){if(this.callbackDispatchedThisFrame[I])continue;this.callbackDispatchedThisFrame[I]=!0;const D=this.images[I];D||o.warnOnce(`Image with ID: "${I}" was not found`),k(D)&&this.updateImage(I,D)}}}const O=1e20;function V(B,d,I,D,z,X,ne,pe,_e){for(let Ce=d;Ce<d+D;Ce++)W(B,I*X+Ce,X,z,ne,pe,_e);for(let Ce=I;Ce<I+z;Ce++)W(B,Ce*X+d,1,D,ne,pe,_e)}function W(B,d,I,D,z,X,ne){X[0]=0,ne[0]=-O,ne[1]=O,z[0]=B[d];for(let pe=1,_e=0,Ce=0;pe<D;pe++){z[pe]=B[d+pe*I];const Be=pe*pe;do{const Je=X[_e];Ce=(z[pe]-z[Je]+Be-Je*Je)/(pe-Je)/2}while(Ce<=ne[_e]&&--_e>-1);_e++,X[_e]=pe,ne[_e]=Ce,ne[_e+1]=O}for(let pe=0,_e=0;pe<D;pe++){for(;ne[_e+1]<pe;)_e++;const Ce=X[_e],Be=pe-Ce;B[d+pe*I]=z[Ce]+Be*Be}}class J{constructor(d,I){this.requestManager=d,this.localIdeographFontFamily=I,this.entries={}}setURL(d){this.url=d}getGlyphs(d,I){const D=[];for(const z in d)for(const X of d[z])D.push({stack:z,id:X});o.asyncAll(D,({stack:z,id:X},ne)=>{let pe=this.entries[z];pe||(pe=this.entries[z]={glyphs:{},requests:{},ranges:{}});let _e=pe.glyphs[X];if(_e!==void 0)return void ne(null,{stack:z,id:X,glyph:_e});if(_e=this._tinySDF(pe,z,X),_e)return pe.glyphs[X]=_e,void ne(null,{stack:z,id:X,glyph:_e});const Ce=Math.floor(X/256);if(256*Ce>65535)return void ne(new Error("glyphs > 65535 not supported"));if(pe.ranges[Ce])return void ne(null,{stack:z,id:X,glyph:_e});let Be=pe.requests[Ce];Be||(Be=pe.requests[Ce]=[],J.loadGlyphRange(z,Ce,this.url,this.requestManager,(Je,st)=>{if(st){for(const Mt in st)this._doesCharSupportLocalGlyph(+Mt)||(pe.glyphs[+Mt]=st[+Mt]);pe.ranges[Ce]=!0}for(const Mt of Be)Mt(Je,st);delete pe.requests[Ce]})),Be.push((Je,st)=>{Je?ne(Je):st&&ne(null,{stack:z,id:X,glyph:st[X]||null})})},(z,X)=>{if(z)I(z);else if(X){const ne={};for(const{stack:pe,id:_e,glyph:Ce}of X)(ne[pe]||(ne[pe]={}))[_e]=Ce&&{id:Ce.id,bitmap:Ce.bitmap.clone(),metrics:Ce.metrics};I(null,ne)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(o.unicodeBlockLookup["CJK Unified Ideographs"](d)||o.unicodeBlockLookup["Hangul Syllables"](d)||o.unicodeBlockLookup.Hiragana(d)||o.unicodeBlockLookup.Katakana(d))}_tinySDF(d,I,D){const z=this.localIdeographFontFamily;if(!z||!this._doesCharSupportLocalGlyph(D))return;let X=d.tinySDF;if(!X){let pe="400";/bold/i.test(I)?pe="900":/medium/i.test(I)?pe="500":/light/i.test(I)&&(pe="200"),X=d.tinySDF=new J.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:z,fontWeight:pe})}const ne=X.draw(String.fromCharCode(D));return{id:D,bitmap:new o.AlphaImage({width:ne.width||30,height:ne.height||30},ne.data),metrics:{width:ne.glyphWidth||24,height:ne.glyphHeight||24,left:ne.glyphLeft||0,top:ne.glyphTop-27||-8,advance:ne.glyphAdvance||24}}}}J.loadGlyphRange=function(B,d,I,D,z){const X=256*d,ne=X+255,pe=D.transformRequest(I.replace("{fontstack}",B).replace("{range}",`${X}-${ne}`),o.ResourceType.Glyphs);o.getArrayBuffer(pe,(_e,Ce)=>{if(_e)z(_e);else if(Ce){const Be={};for(const Je of o.parseGlyphPbf(Ce))Be[Je.id]=Je;z(null,Be)}})},J.TinySDF=class{constructor({fontSize:B=24,buffer:d=3,radius:I=8,cutoff:D=.25,fontFamily:z="sans-serif",fontWeight:X="normal",fontStyle:ne="normal"}={}){this.buffer=d,this.cutoff=D,this.radius=I;const pe=this.size=B+4*d,_e=this._createCanvas(pe),Ce=this.ctx=_e.getContext("2d",{willReadFrequently:!0});Ce.font=`${ne} ${X} ${B}px ${z}`,Ce.textBaseline="alphabetic",Ce.textAlign="left",Ce.fillStyle="black",this.gridOuter=new Float64Array(pe*pe),this.gridInner=new Float64Array(pe*pe),this.f=new Float64Array(pe),this.z=new Float64Array(pe+1),this.v=new Uint16Array(pe)}_createCanvas(B){const d=document.createElement("canvas");return d.width=d.height=B,d}draw(B){const{width:d,actualBoundingBoxAscent:I,actualBoundingBoxDescent:D,actualBoundingBoxLeft:z,actualBoundingBoxRight:X}=this.ctx.measureText(B),ne=Math.ceil(I),pe=Math.min(this.size-this.buffer,Math.ceil(X-z)),_e=Math.min(this.size-this.buffer,ne+Math.ceil(D)),Ce=pe+2*this.buffer,Be=_e+2*this.buffer,Je=Math.max(Ce*Be,0),st=new Uint8ClampedArray(Je),Mt={data:st,width:Ce,height:Be,glyphWidth:pe,glyphHeight:_e,glyphTop:ne,glyphLeft:0,glyphAdvance:d};if(pe===0||_e===0)return Mt;const{ctx:Ct,buffer:Tt,gridInner:ei,gridOuter:ui}=this;Ct.clearRect(Tt,Tt,pe,_e),Ct.fillText(B,Tt,Tt+ne);const vi=Ct.getImageData(Tt,Tt,pe,_e);ui.fill(O,0,Je),ei.fill(0,0,Je);for(let jt=0;jt<_e;jt++)for(let Oi=0;Oi<pe;Oi++){const ki=vi.data[4*(jt*pe+Oi)+3]/255;if(ki===0)continue;const Wi=(jt+Tt)*Ce+Oi+Tt;if(ki===1)ui[Wi]=0,ei[Wi]=O;else{const Vi=.5-ki;ui[Wi]=Vi>0?Vi*Vi:0,ei[Wi]=Vi<0?Vi*Vi:0}}V(ui,0,0,Ce,Be,Ce,this.f,this.v,this.z),V(ei,Tt,Tt,pe,_e,Ce,this.f,this.v,this.z);for(let jt=0;jt<Je;jt++){const Oi=Math.sqrt(ui[jt])-Math.sqrt(ei[jt]);st[jt]=Math.round(255-255*(Oi/this.radius+this.cutoff))}return Mt}};const Q=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(B,d){return o.sphericalToCartesian(B.expression.evaluate(d))}interpolate(B,d,I){return{x:o.number(B.x,d.x,I),y:o.number(B.y,d.y,I),z:o.number(B.z,d.z,I)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),Z="-transition";class ie extends o.Evented{constructor(d){super(),this._transitionable=new o.Transitionable(Q),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,I={}){if(!this._validate(o.validateLight,d,I))for(const D in d){const z=d[D];D.endsWith(Z)?this._transitionable.setTransition(D.slice(0,-Z.length),z):this._transitionable.setValue(D,z)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,I,D){return(!D||D.validate!==!1)&&o.emitValidationErrors(this,d.call(o.validateStyle,o.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Se{constructor(d,I){this.width=d,this.height=I,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,I){const D=d.join(",")+String(I);return this.dashEntry[D]||(this.dashEntry[D]=this.addDash(d,I)),this.dashEntry[D]}getDashRanges(d,I,D){const z=[];let X=d.length%2==1?-d[d.length-1]*D:0,ne=d[0]*D,pe=!0;z.push({left:X,right:ne,isDash:pe,zeroLength:d[0]===0});let _e=d[0];for(let Ce=1;Ce<d.length;Ce++){pe=!pe;const Be=d[Ce];X=_e*D,_e+=Be,ne=_e*D,z.push({left:X,right:ne,isDash:pe,zeroLength:Be===0})}return z}addRoundDash(d,I,D){const z=I/2;for(let X=-D;X<=D;X++){const ne=this.width*(this.nextRow+D+X);let pe=0,_e=d[pe];for(let Ce=0;Ce<this.width;Ce++){Ce/_e.right>1&&(_e=d[++pe]);const Be=Math.abs(Ce-_e.left),Je=Math.abs(Ce-_e.right),st=Math.min(Be,Je);let Mt;const Ct=X/D*(z+1);if(_e.isDash){const Tt=z-Math.abs(Ct);Mt=Math.sqrt(st*st+Tt*Tt)}else Mt=z-Math.sqrt(st*st+Ct*Ct);this.data[ne+Ce]=Math.max(0,Math.min(255,Mt+128))}}}addRegularDash(d){for(let pe=d.length-1;pe>=0;--pe){const _e=d[pe],Ce=d[pe+1];_e.zeroLength?d.splice(pe,1):Ce&&Ce.isDash===_e.isDash&&(Ce.left=_e.left,d.splice(pe,1))}const I=d[0],D=d[d.length-1];I.isDash===D.isDash&&(I.left=D.left-this.width,D.right=I.right+this.width);const z=this.width*this.nextRow;let X=0,ne=d[X];for(let pe=0;pe<this.width;pe++){pe/ne.right>1&&(ne=d[++X]);const _e=Math.abs(pe-ne.left),Ce=Math.abs(pe-ne.right),Be=Math.min(_e,Ce);this.data[z+pe]=Math.max(0,Math.min(255,(ne.isDash?Be:-Be)+128))}}addDash(d,I){const D=I?7:0,z=2*D+1;if(this.nextRow+z>this.height)return o.warnOnce("LineAtlas out of space"),null;let X=0;for(let pe=0;pe<d.length;pe++)X+=d[pe];if(X!==0){const pe=this.width/X,_e=this.getDashRanges(d,this.width,pe);I?this.addRoundDash(_e,pe,D):this.addRegularDash(_e)}const ne={y:(this.nextRow+D+.5)/this.height,height:2*D/this.height,width:X};return this.nextRow+=z,this.dirty=!0,ne}bind(d){const I=d.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))}}class xe{constructor(d,I){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const D=this.workerPool.acquire(this.id);for(let z=0;z<D.length;z++){const X=new xe.Actor(D[z],I,this.id);X.name=`Worker ${z}`,this.actors.push(X)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,I,D){o.asyncAll(this.actors,(z,X)=>{z.send(d,I,X)},D=D||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function le(B,d,I){const D=function(z,X){if(z)return I(z);if(X){const ne=o.pick(o.extend(X,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);X.vector_layers&&(ne.vectorLayers=X.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(pe=>pe.id)),I(null,ne)}};return B.url?o.getJSON(d.transformRequest(B.url,o.ResourceType.Source),D):o.exported.frame(()=>D(null,B))}xe.Actor=o.Actor;class Ee{constructor(d,I,D){this.bounds=o.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=I||0,this.maxzoom=D||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const I=Math.pow(2,d.z),D=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*I),z=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*I),X=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*I),ne=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*I);return d.x>=D&&d.x<X&&d.y>=z&&d.y<ne}}class me extends o.Evented{constructor(d,I,D,z){if(super(),this.id=d,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(I,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z)}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=le(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),d?this.fire(new o.ErrorEvent(d)):I&&(o.extend(this,I),I.bounds&&(this.tileBounds=new Ee(I.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z={request:this.map._requestManager.transformRequest(D,o.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function X(ne,pe){return delete d.request,d.aborted?I(null):ne&&ne.status!==404?I(ne):(pe&&pe.resourceTiming&&(d.resourceTiming=pe.resourceTiming),this.map._refreshExpiredTiles&&pe&&d.setExpiryData(pe),d.loadVectorData(pe,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}z.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=I:d.request=d.actor.send("reloadTile",z,X.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",z,X.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ae extends o.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},I),o.extend(this,o.pick(I,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=le(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new o.ErrorEvent(d)):I&&(o.extend(this,I),I.bounds&&(this.tileBounds=new Ee(I.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=o.getImage(this.map._requestManager.transformRequest(D,o.ResourceType.Tile),(z,X,ne)=>{if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(z)d.state="errored",I(z);else if(X){this.map._refreshExpiredTiles&&d.setExpiryData(ne);const pe=this.map.painter.context,_e=pe.gl;d.texture=this.map.painter.getTileTexture(X.width),d.texture?d.texture.update(X,{useMipmap:!0}):(d.texture=new T(pe,X,_e.RGBA,{useMipmap:!0}),d.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),pe.extTextureFilterAnisotropic&&_e.texParameterf(_e.TEXTURE_2D,pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,pe.extTextureFilterAnisotropicMax)),d.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),I(null)}})}abortTile(d,I){d.request&&(d.request.cancel(),delete d.request),I()}unloadTile(d,I){d.texture&&this.map.painter.saveTileTexture(d.texture),I()}hasTransition(){return!1}}let pt;class rt extends Ae{constructor(d,I,D,z){super(d,I,D,z),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function z(X,ne){X&&(d.state="errored",I(X)),ne&&(d.dem=ne,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",I(null))}d.request=o.getImage(this.map._requestManager.transformRequest(D,o.ResourceType.Tile),function(X,ne){if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(X)d.state="errored",I(X);else if(ne){this.map._refreshExpiredTiles&&d.setExpiryData(ne),delete ne.cacheControl,delete ne.expires;const pe=o.isImageBitmap(ne)&&(pt==null&&(pt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),pt)?ne:o.exported.getImageData(ne,1),_e={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:pe,encoding:this.encoding};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",_e,z.bind(this)))}}.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID)}_getNeighboringTiles(d){const I=d.canonical,D=Math.pow(2,I.z),z=(I.x-1+D)%D,X=I.x===0?d.wrap-1:d.wrap,ne=(I.x+1+D)%D,pe=I.x+1===D?d.wrap+1:d.wrap,_e={};return _e[new o.OverscaledTileID(d.overscaledZ,X,I.z,z,I.y).key]={backfilled:!1},_e[new o.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y).key]={backfilled:!1},I.y>0&&(_e[new o.OverscaledTileID(d.overscaledZ,X,I.z,z,I.y-1).key]={backfilled:!1},_e[new o.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},_e[new o.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y-1).key]={backfilled:!1}),I.y+1<D&&(_e[new o.OverscaledTileID(d.overscaledZ,X,I.z,z,I.y+1).key]={backfilled:!1},_e[new o.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},_e[new o.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y+1).key]={backfilled:!1}),_e}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class Pt extends o.Evented{constructor(d,I,D,z){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=D.getActor(),this.setEventedParent(z),this._data=I.data,this._options=o.extend({},I),this._collectResourceTiming=I.collectResourceTiming,I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;const X=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*X,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*X,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?I.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:o.EXTENT,radius:(I.clusterRadius||50)*X,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData("content"),this}getClusterExpansionZoom(d,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},I),this}getClusterChildren(d,I){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},I),this}getClusterLeaves(d,I,D,z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:I,offset:D},z),this}_updateWorkerData(d){const I=o.extend({},this.workerOptions),D=this._data;typeof D=="string"?(I.request=this.map._requestManager.transformRequest(o.exported.resolveURL(D),o.ResourceType.Source),I.request.collectResourceTiming=this._collectResourceTiming):I.data=JSON.stringify(D),this._pendingLoads++,this.fire(new o.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,I,(z,X)=>{if(this._pendingLoads--,this._removed||X&&X.abandoned)return void this.fire(new o.Event("dataabort",{dataType:"source",sourceDataType:d}));let ne=null;if(X&&X.resourceTiming&&X.resourceTiming[this.id]&&(ne=X.resourceTiming[this.id].slice(0)),z)return void this.fire(new o.ErrorEvent(z));const pe={dataType:"source",sourceDataType:d};this._collectResourceTiming&&ne&&ne.length>0&&o.extend(pe,{resourceTiming:ne}),this.fire(new o.Event("data",pe))})}loaded(){return this._pendingLoads===0}loadTile(d,I){const D=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const z={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(D,z,(X,ne)=>(delete d.request,d.unloadVectorData(),d.aborted?I(null):X?I(X):(d.loadVectorData(ne,this.map.painter,D==="reloadTile"),I(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var We=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class be extends o.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=I}load(d,I){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(D,z)=>{this._loaded=!0,D?this.fire(new o.ErrorEvent(D)):z&&(this.image=z,d&&(this.coordinates=d),I&&I(),this._finishLoading())})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}setCoordinates(d){this.coordinates=d;const I=d.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(z){let X=1/0,ne=1/0,pe=-1/0,_e=-1/0;for(const st of z)X=Math.min(X,st.x),ne=Math.min(ne,st.y),pe=Math.max(pe,st.x),_e=Math.max(_e,st.y);const Ce=Math.max(pe-X,_e-ne),Be=Math.max(0,Math.floor(-Math.log(Ce)/Math.LN2)),Je=Math.pow(2,Be);return new o.CanonicalTileID(Be,Math.floor((X+pe)/2*Je),Math.floor((ne+_e)/2*Je))}(I),this.minzoom=this.maxzoom=this.tileID.z;const D=I.map(z=>this.tileID.getTilePoint(z)._round());return this._boundsArray=new o.RasterBoundsArray,this._boundsArray.emplaceBack(D[0].x,D[0].y,0,0),this._boundsArray.emplaceBack(D[1].x,D[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(D[3].x,D[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(D[2].x,D[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(d,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}loadTile(d,I){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},I(null)):(d.state="errored",I(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Le extends be{constructor(d,I,D,z){super(d,I,D,z),this.roundZoom=!0,this.type="video",this.options=I}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const I of d.urls)this.urls.push(this.map._requestManager.transformRequest(I,o.ResourceType.Source).url);o.getVideo(this.urls,(I,D)=>{this._loaded=!0,I?this.fire(new o.ErrorEvent(I)):D&&(this.video=D,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const I=this.video.seekable;d<I.start(0)||d>I.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${I.start(0)} and ${I.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new T(d,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ue extends be{constructor(d,I,D,z){super(d,I,D,z),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(X=>!Array.isArray(X)||X.length!==2||X.some(ne=>typeof ne!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const I=this.map.painter.context,D=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(I,this.canvas,D.RGBA,{premultiply:!0});for(const z in this.tiles){const X=this.tiles[z];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const ce={vector:me,raster:Ae,"raster-dem":rt,geojson:Pt,video:Le,image:be,canvas:Ue};function Ie(B,d){const I=o.create();return o.translate(I,I,[1,1,0]),o.scale(I,I,[.5*B.width,.5*B.height,1]),o.multiply(I,I,B.calculatePosMatrix(d.toUnwrapped()))}function de(B,d,I,D,z,X){const ne=function(Je,st,Mt){if(Je)for(const Ct of Je){const Tt=st[Ct];if(Tt&&Tt.source===Mt&&Tt.type==="fill-extrusion")return!0}else for(const Ct in st){const Tt=st[Ct];if(Tt.source===Mt&&Tt.type==="fill-extrusion")return!0}return!1}(z&&z.layers,d,B.id),pe=X.maxPitchScaleFactor(),_e=B.tilesIn(D,pe,ne);_e.sort(ge);const Ce=[];for(const Je of _e)Ce.push({wrappedTileID:Je.tileID.wrapped().key,queryResults:Je.tile.queryRenderedFeatures(d,I,B._state,Je.queryGeometry,Je.cameraQueryGeometry,Je.scale,z,X,pe,Ie(B.transform,Je.tileID))});const Be=function(Je){const st={},Mt={};for(const Ct of Je){const Tt=Ct.queryResults,ei=Ct.wrappedTileID,ui=Mt[ei]=Mt[ei]||{};for(const vi in Tt){const jt=Tt[vi],Oi=ui[vi]=ui[vi]||{},ki=st[vi]=st[vi]||[];for(const Wi of jt)Oi[Wi.featureIndex]||(Oi[Wi.featureIndex]=!0,ki.push(Wi))}}return st}(Ce);for(const Je in Be)Be[Je].forEach(st=>{const Mt=st.feature,Ct=B.getFeatureState(Mt.layer["source-layer"],Mt.id);Mt.source=Mt.layer.source,Mt.layer["source-layer"]&&(Mt.sourceLayer=Mt.layer["source-layer"]),Mt.state=Ct});return Be}function ge(B,d){const I=B.tileID,D=d.tileID;return I.overscaledZ-D.overscaledZ||I.canonical.y-D.canonical.y||I.wrap-D.wrap||I.canonical.x-D.canonical.x}class Re{constructor(d,I){this.tileID=d,this.uid=o.uniqueId(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const I=d+this.timeAdded;I<o.exported.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.textures.forEach(I=>d.saveTileTexture(I)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(d,I,D){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(z,X){const ne={};if(!X)return ne;for(const pe of z){const _e=pe.layerIds.map(Ce=>X.getLayer(Ce)).filter(Boolean);if(_e.length!==0){pe.layers=_e,pe.stateDependentLayerIds&&(pe.stateDependentLayers=pe.stateDependentLayerIds.map(Ce=>_e.filter(Be=>Be.id===Ce)[0]));for(const Ce of _e)ne[Ce.id]=pe}}return ne}(d.buckets,I.style),this.hasSymbolBuckets=!1;for(const z in this.buckets){const X=this.buckets[z];if(X instanceof o.SymbolBucket){if(this.hasSymbolBuckets=!0,!D)break;X.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const z in this.buckets){const X=this.buckets[z];if(X instanceof o.SymbolBucket&&X.hasRTLText){this.hasRTLText=!0,o.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const z in this.buckets){const X=this.buckets[z];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(z).queryRadius(X))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new o.CollisionBoxArray}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const D in this.buckets){const z=this.buckets[D];z.uploadPending()&&z.upload(d)}const I=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(d,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(d,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,I,D,z,X,ne,pe,_e,Ce,Be){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:X,scale:ne,tileSize:this.tileSize,pixelPosMatrix:Be,transform:_e,params:pe,queryPadding:this.queryPadding*Ce},d,I,D):{}}querySourceFeatures(d,I){const D=this.latestFeatureIndex;if(!D||!D.rawTileData)return;const z=D.loadVTLayers(),X=I?I.sourceLayer:"",ne=z._geojsonTileLayer||z[X];if(!ne)return;const pe=o.createFilter(I&&I.filter),{z:_e,x:Ce,y:Be}=this.tileID.canonical,Je={z:_e,x:Ce,y:Be};for(let st=0;st<ne.length;st++){const Mt=ne.feature(st);if(pe.needGeometry){const ei=o.toEvaluationFeature(Mt,!0);if(!pe.filter(new o.EvaluationParameters(this.tileID.overscaledZ),ei,this.tileID.canonical))continue}else if(!pe.filter(new o.EvaluationParameters(this.tileID.overscaledZ),Mt))continue;const Ct=D.getId(Mt,X),Tt=new o.GeoJSONFeature(Mt,_e,Ce,Be,Ct);Tt.tile=Je,d.push(Tt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const I=this.expirationTime;if(d.cacheControl){const D=o.parseCacheControl(d.cacheControl);D["max-age"]&&(this.expirationTime=Date.now()+1e3*D["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const D=Date.now();let z=!1;if(this.expirationTime>D)z=!1;else if(I)if(this.expirationTime<I)z=!0;else{const X=this.expirationTime-I;X?this.expirationTime=D+Math.max(X,3e4):z=!0}else z=!0;z?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const D=this.latestFeatureIndex.loadVTLayers();for(const z in this.buckets){if(!I.style.hasLayer(z))continue;const X=this.buckets[z],ne=X.layers[0].sourceLayer||"_geojsonTileLayer",pe=D[ne],_e=d[ne];if(!pe||!_e||Object.keys(_e).length===0)continue;X.update(_e,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Ce=I&&I.style&&I.style.getLayer(z);Ce&&(this.queryPadding=Math.max(this.queryPadding,Ce.queryRadius(X)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=o.exported.now()+d}setDependencies(d,I){const D={};for(const z of I)D[z]=!0;this.dependencies[d]=D}hasDependency(d,I){for(const D of d){const z=this.dependencies[D];if(z){for(const X of I)if(z[X])return!0}}return!1}}class Ze{constructor(d,I){this.max=d,this.onRemove=I,this.reset()}reset(){for(const d in this.data)for(const I of this.data[d])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(d,I,D){const z=d.wrapped().key;this.data[z]===void 0&&(this.data[z]=[]);const X={value:I,timeout:void 0};if(D!==void 0&&(X.timeout=setTimeout(()=>{this.remove(d,X)},D)),this.data[z].push(X),this.order.push(z),this.order.length>this.max){const ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const I=this.data[d].shift();return I.timeout&&clearTimeout(I.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),I.value}getByKey(d){const I=this.data[d];return I?I[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,I){if(!this.has(d))return this;const D=d.wrapped().key,z=I===void 0?0:this.data[D].indexOf(I),X=this.data[D][z];return this.data[D].splice(z,1),X.timeout&&clearTimeout(X.timeout),this.data[D].length===0&&delete this.data[D],this.onRemove(X.value),this.order.splice(this.order.indexOf(D),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(d){const I=[];for(const D in this.data)for(const z of this.data[D])d(z.value)||I.push(z);for(const D of I)this.remove(D.value.tileID,D)}}class ut{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,I,D){const z=String(I);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][z]=this.stateChanges[d][z]||{},o.extend(this.stateChanges[d][z],D),this.deletedStates[d]===null){this.deletedStates[d]={};for(const X in this.state[d])X!==z&&(this.deletedStates[d][X]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][z]===null){this.deletedStates[d][z]={};for(const X in this.state[d][z])D[X]||(this.deletedStates[d][z][X]=null)}else for(const X in D)this.deletedStates[d]&&this.deletedStates[d][z]&&this.deletedStates[d][z][X]===null&&delete this.deletedStates[d][z][X]}removeFeatureState(d,I,D){if(this.deletedStates[d]===null)return;const z=String(I);if(this.deletedStates[d]=this.deletedStates[d]||{},D&&I!==void 0)this.deletedStates[d][z]!==null&&(this.deletedStates[d][z]=this.deletedStates[d][z]||{},this.deletedStates[d][z][D]=null);else if(I!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][z])for(D in this.deletedStates[d][z]={},this.stateChanges[d][z])this.deletedStates[d][z][D]=null;else this.deletedStates[d][z]=null;else this.deletedStates[d]=null}getState(d,I){const D=String(I),z=o.extend({},(this.state[d]||{})[D],(this.stateChanges[d]||{})[D]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const X=this.deletedStates[d][I];if(X===null)return{};for(const ne in X)delete z[ne]}return z}initializeTileState(d,I){d.setFeatureState(this.state,I)}coalesceChanges(d,I){const D={};for(const z in this.stateChanges){this.state[z]=this.state[z]||{};const X={};for(const ne in this.stateChanges[z])this.state[z][ne]||(this.state[z][ne]={}),o.extend(this.state[z][ne],this.stateChanges[z][ne]),X[ne]=this.state[z][ne];D[z]=X}for(const z in this.deletedStates){this.state[z]=this.state[z]||{};const X={};if(this.deletedStates[z]===null)for(const ne in this.state[z])X[ne]={},this.state[z][ne]={};else for(const ne in this.deletedStates[z]){if(this.deletedStates[z][ne]===null)this.state[z][ne]={};else for(const pe of Object.keys(this.deletedStates[z][ne]))delete this.state[z][ne][pe];X[ne]=this.state[z][ne]}D[z]=D[z]||{},o.extend(D[z],X)}if(this.stateChanges={},this.deletedStates={},Object.keys(D).length!==0)for(const z in d)d[z].setFeatureState(D,I)}}class Xe extends o.Evented{constructor(d,I,D){super(),this.id=d,this.dispatcher=D,this.on("data",z=>{z.dataType==="source"&&z.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(z,X,ne,pe){const _e=new ce[X.type](z,X,ne,pe);if(_e.id!==z)throw new Error(`Expected Source id to be ${z} instead of ${_e.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],_e),_e}(d,I,D,this),this._tiles={},this._cache=new Ze(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ut}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const d in this._tiles){const I=this._tiles[d];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,I){return this._source.loadTile(d,I)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new o.Event("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const I in this._tiles){const D=this._tiles[I];D.upload(d),D.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort($e).map(d=>d.key)}getRenderableIds(d){const I=[];for(const D in this._tiles)this._isIdRenderable(D,d)&&I.push(this._tiles[D]);return d?I.sort((D,z)=>{const X=D.tileID,ne=z.tileID,pe=new o.pointGeometry(X.canonical.x,X.canonical.y)._rotate(this.transform.angle),_e=new o.pointGeometry(ne.canonical.x,ne.canonical.y)._rotate(this.transform.angle);return X.overscaledZ-ne.overscaledZ||_e.y-pe.y||_e.x-pe.x}).map(D=>D.tileID.key):I.map(D=>D.tileID).sort($e).map(D=>D.key)}hasRenderableParent(d){const I=this.findLoadedParent(d,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(d,I){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(I||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,I){const D=this._tiles[d];D&&(D.state!=="loading"&&(D.state=I),this._loadTile(D,this._tileLoaded.bind(this,D,d,I)))}_tileLoaded(d,I,D,z){if(z)return d.state="errored",void(z.status!==404?this._source.fire(new o.ErrorEvent(z,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=o.exported.now(),D==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(I,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new o.Event("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const I=this.getRenderableIds();for(let z=0;z<I.length;z++){const X=I[z];if(d.neighboringTiles&&d.neighboringTiles[X]){const ne=this.getTileByID(X);D(d,ne),D(ne,d)}}function D(z,X){z.needsHillshadePrepare=!0,z.needsTerrainPrepare=!0;let ne=X.tileID.canonical.x-z.tileID.canonical.x;const pe=X.tileID.canonical.y-z.tileID.canonical.y,_e=Math.pow(2,z.tileID.canonical.z),Ce=X.tileID.key;ne===0&&pe===0||Math.abs(pe)>1||(Math.abs(ne)>1&&(Math.abs(ne+_e)===1?ne+=_e:Math.abs(ne-_e)===1&&(ne-=_e)),X.dem&&z.dem&&(z.dem.backfillBorder(X.dem,ne,pe),z.neighboringTiles&&z.neighboringTiles[Ce]&&(z.neighboringTiles[Ce].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,I,D,z){for(const X in this._tiles){let ne=this._tiles[X];if(z[X]||!ne.hasData()||ne.tileID.overscaledZ<=I||ne.tileID.overscaledZ>D)continue;let pe=ne.tileID;for(;ne&&ne.tileID.overscaledZ>I+1;){const Ce=ne.tileID.scaledTo(ne.tileID.overscaledZ-1);ne=this._tiles[Ce.key],ne&&ne.hasData()&&(pe=Ce)}let _e=pe;for(;_e.overscaledZ>I;)if(_e=_e.scaledTo(_e.overscaledZ-1),d[_e.key]){z[pe.key]=pe;break}}}findLoadedParent(d,I){if(d.key in this._loadedParentTiles){const D=this._loadedParentTiles[d.key];return D&&D.tileID.overscaledZ>=I?D:null}for(let D=d.overscaledZ-1;D>=I;D--){const z=d.scaledTo(D),X=this._getLoadedTile(z);if(X)return X}}_getLoadedTile(d){const I=this._tiles[d.key];return I&&I.hasData()?I:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const I=Math.ceil(d.width/this._source.tileSize)+1,D=Math.ceil(d.height/this._source.tileSize)+1,z=Math.floor(I*D*5),X=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,z):z;this._cache.setMaxSize(X)}handleWrapJump(d){const I=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,I){const D={};for(const z in this._tiles){const X=this._tiles[z];X.tileID=X.tileID.unwrapTo(X.tileID.wrap+I),D[X.tileID.key]=X}this._tiles=D;for(const z in this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(const z in this._tiles)this._setTileReloadTimer(z,this._tiles[z])}}update(d,I){if(this.transform=d,this.terrain=I,!this._sourceLoaded||this._paused)return;let D;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ce=>new o.OverscaledTileID(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y)):(D=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:I}),this._source.hasTile&&(D=D.filter(Ce=>this._source.hasTile(Ce)))):D=[];const z=d.coveringZoomLevel(this._source),X=Math.max(z-Xe.maxOverzooming,this._source.minzoom),ne=Math.max(z+Xe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ce={};for(const Be of D)if(Be.canonical.z>this._source.minzoom){const Je=Be.scaledTo(Be.canonical.z-1);Ce[Je.key]=Je;const st=Be.scaledTo(Math.max(this._source.minzoom,Math.min(Be.canonical.z,5)));Ce[st.key]=st}D=D.concat(Object.values(Ce))}const pe=this._updateRetainedTiles(D,z);if(Dt(this._source.type)){const Ce={},Be={},Je=Object.keys(pe);for(const st of Je){const Mt=pe[st],Ct=this._tiles[st];if(!Ct||Ct.fadeEndTime&&Ct.fadeEndTime<=o.exported.now())continue;const Tt=this.findLoadedParent(Mt,X);Tt&&(this._addTile(Tt.tileID),Ce[Tt.tileID.key]=Tt.tileID),Be[st]=Mt}this._retainLoadedChildren(Be,z,ne,pe);for(const st in Ce)pe[st]||(this._coveredTiles[st]=!0,pe[st]=Ce[st]);if(I){const st={},Mt={};for(const Ct of D)this._tiles[Ct.key].hasData()?st[Ct.key]=Ct:Mt[Ct.key]=Ct;for(const Ct in Mt){const Tt=Mt[Ct].children(this._source.maxzoom);this._tiles[Tt[0].key]&&this._tiles[Tt[1].key]&&this._tiles[Tt[2].key]&&this._tiles[Tt[3].key]&&(st[Tt[0].key]=pe[Tt[0].key]=Tt[0],st[Tt[1].key]=pe[Tt[1].key]=Tt[1],st[Tt[2].key]=pe[Tt[2].key]=Tt[2],st[Tt[3].key]=pe[Tt[3].key]=Tt[3],delete Mt[Ct])}for(const Ct in Mt){const Tt=this.findLoadedParent(Mt[Ct],this._source.minzoom);if(Tt){st[Tt.tileID.key]=pe[Tt.tileID.key]=Tt.tileID;for(const ei in st)st[ei].isChildOf(Tt.tileID)&&delete st[ei]}}for(const Ct in this._tiles)st[Ct]||(this._coveredTiles[Ct]=!0)}}for(const Ce in pe)this._tiles[Ce].clearFadeHold();const _e=o.keysDifference(this._tiles,pe);for(const Ce of _e){const Be=this._tiles[Ce];Be.hasSymbolBuckets&&!Be.holdingForFade()?Be.setHoldDuration(this.map._fadeDuration):Be.hasSymbolBuckets&&!Be.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,I){const D={},z={},X=Math.max(I-Xe.maxOverzooming,this._source.minzoom),ne=Math.max(I+Xe.maxUnderzooming,this._source.minzoom),pe={};for(const _e of d){const Ce=this._addTile(_e);D[_e.key]=_e,Ce.hasData()||I<this._source.maxzoom&&(pe[_e.key]=_e)}this._retainLoadedChildren(pe,I,ne,D);for(const _e of d){let Ce=this._tiles[_e.key];if(Ce.hasData())continue;if(I+1>this._source.maxzoom){const Je=_e.children(this._source.maxzoom)[0],st=this.getTile(Je);if(st&&st.hasData()){D[Je.key]=Je;continue}}else{const Je=_e.children(this._source.maxzoom);if(D[Je[0].key]&&D[Je[1].key]&&D[Je[2].key]&&D[Je[3].key])continue}let Be=Ce.wasRequested();for(let Je=_e.overscaledZ-1;Je>=X;--Je){const st=_e.scaledTo(Je);if(z[st.key]||(z[st.key]=!0,Ce=this.getTile(st),!Ce&&Be&&(Ce=this._addTile(st)),Ce&&(D[st.key]=st,Be=Ce.wasRequested(),Ce.hasData())))break}}return D}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const I=[];let D,z=this._tiles[d].tileID;for(;z.overscaledZ>0;){if(z.key in this._loadedParentTiles){D=this._loadedParentTiles[z.key];break}I.push(z.key);const X=z.scaledTo(z.overscaledZ-1);if(D=this._getLoadedTile(X),D)break;z=X}for(const X of I)this._loadedParentTiles[X]=D}}_addTile(d){let I=this._tiles[d.key];if(I)return I;I=this._cache.getAndRemove(d),I&&(this._setTileReloadTimer(d.key,I),I.tileID=d,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,I)));const D=I;return I||(I=new Re(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,d.key,I.state))),I.uses++,this._tiles[d.key]=I,D||this._source.fire(new o.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I}_setTileReloadTimer(d,I){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const D=I.getExpiryTimeout();D&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},D))}_removeTile(d){const I=this._tiles[d];I&&(I.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,I,D){const z=[],X=this.transform;if(!X)return z;const ne=D?X.getCameraQueryGeometry(d):d,pe=d.map(Ct=>X.pointCoordinate(Ct,this.terrain)),_e=ne.map(Ct=>X.pointCoordinate(Ct,this.terrain)),Ce=this.getIds();let Be=1/0,Je=1/0,st=-1/0,Mt=-1/0;for(const Ct of _e)Be=Math.min(Be,Ct.x),Je=Math.min(Je,Ct.y),st=Math.max(st,Ct.x),Mt=Math.max(Mt,Ct.y);for(let Ct=0;Ct<Ce.length;Ct++){const Tt=this._tiles[Ce[Ct]];if(Tt.holdingForFade())continue;const ei=Tt.tileID,ui=Math.pow(2,X.zoom-Tt.tileID.overscaledZ),vi=I*Tt.queryPadding*o.EXTENT/Tt.tileSize/ui,jt=[ei.getTilePoint(new o.MercatorCoordinate(Be,Je)),ei.getTilePoint(new o.MercatorCoordinate(st,Mt))];if(jt[0].x-vi<o.EXTENT&&jt[0].y-vi<o.EXTENT&&jt[1].x+vi>=0&&jt[1].y+vi>=0){const Oi=pe.map(Wi=>ei.getTilePoint(Wi)),ki=_e.map(Wi=>ei.getTilePoint(Wi));z.push({tile:Tt,tileID:ei,queryGeometry:Oi,cameraQueryGeometry:ki,scale:ui})}}return z}getVisibleCoordinates(d){const I=this.getRenderableIds(d).map(D=>this._tiles[D].tileID);for(const D of I)D.posMatrix=this.transform.calculatePosMatrix(D.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(Dt(this._source.type))for(const d in this._tiles){const I=this._tiles[d];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=o.exported.now())return!0}return!1}setFeatureState(d,I,D){this._state.updateState(d=d||"_geojsonTileLayer",I,D)}removeFeatureState(d,I,D){this._state.removeFeatureState(d=d||"_geojsonTileLayer",I,D)}getFeatureState(d,I){return this._state.getState(d=d||"_geojsonTileLayer",I)}setDependencies(d,I,D){const z=this._tiles[d];z&&z.setDependencies(I,D)}reloadTilesForDependencies(d,I){for(const D in this._tiles)this._tiles[D].hasDependency(d,I)&&this._reloadTile(D,"reloading");this._cache.filter(D=>!D.hasDependency(d,I))}}function $e(B,d){const I=Math.abs(2*B.wrap)-+(B.wrap<0),D=Math.abs(2*d.wrap)-+(d.wrap<0);return B.overscaledZ-d.overscaledZ||D-I||d.canonical.y-B.canonical.y||d.canonical.x-B.canonical.x}function Dt(B){return B==="raster"||B==="image"||B==="video"}Xe.maxOverzooming=10,Xe.maxUnderzooming=3;const ni="mapboxgl_preloaded_worker_pool";class mt{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<mt.workerCount;)this.workers.push(new Worker(la.workerUrl));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(I=>{I.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ni]}numActive(){return Object.keys(this.active).length}}const At=Math.floor(o.exported.hardwareConcurrency/2);let xt;function Qe(){return xt||(xt=new mt),xt}function Yt(B,d){const I={};for(const D in B)D!=="ref"&&(I[D]=B[D]);return o.refProperties.forEach(D=>{D in d&&(I[D]=d[D])}),I}function si(B){B=B.slice();const d=Object.create(null);for(let I=0;I<B.length;I++)d[B[I].id]=B[I];for(let I=0;I<B.length;I++)"ref"in B[I]&&(B[I]=Yt(B[I],d[B[I].ref]));return B}mt.workerCount=Math.max(Math.min(At,6),1);const Zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ei(B,d,I){I.push({command:Zt.addSource,args:[B,d[B]]})}function Qt(B,d,I){d.push({command:Zt.removeSource,args:[B]}),I[B]=!0}function Ot(B,d,I,D){Qt(B,I,D),Ei(B,d,I)}function ai(B,d,I){let D;for(D in B[I])if(Object.prototype.hasOwnProperty.call(B[I],D)&&D!=="data"&&!v(B[I][D],d[I][D]))return!1;for(D in d[I])if(Object.prototype.hasOwnProperty.call(d[I],D)&&D!=="data"&&!v(B[I][D],d[I][D]))return!1;return!0}function Ji(B,d,I,D,z,X){let ne;for(ne in d=d||{},B=B||{})Object.prototype.hasOwnProperty.call(B,ne)&&(v(B[ne],d[ne])||I.push({command:X,args:[D,ne,d[ne],z]}));for(ne in d)Object.prototype.hasOwnProperty.call(d,ne)&&!Object.prototype.hasOwnProperty.call(B,ne)&&(v(B[ne],d[ne])||I.push({command:X,args:[D,ne,d[ne],z]}))}function Ii(B){return B.id}function $t(B,d){return B[d.id]=d,B}class Me{constructor(d,I){this.reset(d,I)}reset(d,I){this.points=d||[],this._distances=[0];for(let D=1;D<this.points.length;D++)this._distances[D]=this._distances[D-1]+this.points[D].dist(this.points[D-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=o.clamp(d,0,1);let I=1,D=this._distances[I];const z=d*this.paddedLength+this.padding;for(;D<z&&I<this._distances.length;)D=this._distances[++I];const X=I-1,ne=this._distances[X],pe=D-ne,_e=pe>0?(z-ne)/pe:0;return this.points[X].mult(1-_e).add(this.points[I].mult(_e))}}function ee(B,d){let I=!0;return B==="always"||B!=="never"&&d!=="never"||(I=!1),I}class ae{constructor(d,I,D){const z=this.boxCells=[],X=this.circleCells=[];this.xCellCount=Math.ceil(d/D),this.yCellCount=Math.ceil(I/D);for(let ne=0;ne<this.xCellCount*this.yCellCount;ne++)z.push([]),X.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=I,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/I,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,I,D,z,X){this._forEachCell(I,D,z,X,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(I),this.bboxes.push(D),this.bboxes.push(z),this.bboxes.push(X)}insertCircle(d,I,D,z){this._forEachCell(I-z,D-z,I+z,D+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(I),this.circles.push(D),this.circles.push(z)}_insertBoxCell(d,I,D,z,X,ne){this.boxCells[X].push(ne)}_insertCircleCell(d,I,D,z,X,ne){this.circleCells[X].push(ne)}_query(d,I,D,z,X,ne,pe){if(D<0||d>this.width||z<0||I>this.height)return[];const _e=[];if(d<=0&&I<=0&&this.width<=D&&this.height<=z){if(X)return[{key:null,x1:d,y1:I,x2:D,y2:z}];for(let Ce=0;Ce<this.boxKeys.length;Ce++)_e.push({key:this.boxKeys[Ce],x1:this.bboxes[4*Ce],y1:this.bboxes[4*Ce+1],x2:this.bboxes[4*Ce+2],y2:this.bboxes[4*Ce+3]});for(let Ce=0;Ce<this.circleKeys.length;Ce++){const Be=this.circles[3*Ce],Je=this.circles[3*Ce+1],st=this.circles[3*Ce+2];_e.push({key:this.circleKeys[Ce],x1:Be-st,y1:Je-st,x2:Be+st,y2:Je+st})}}else this._forEachCell(d,I,D,z,this._queryCell,_e,{hitTest:X,overlapMode:ne,seenUids:{box:{},circle:{}}},pe);return _e}query(d,I,D,z){return this._query(d,I,D,z,!1,null)}hitTest(d,I,D,z,X,ne){return this._query(d,I,D,z,!0,X,ne).length>0}hitTestCircle(d,I,D,z,X){const ne=d-D,pe=d+D,_e=I-D,Ce=I+D;if(pe<0||ne>this.width||Ce<0||_e>this.height)return!1;const Be=[];return this._forEachCell(ne,_e,pe,Ce,this._queryCellCircle,Be,{hitTest:!0,overlapMode:z,circle:{x:d,y:I,radius:D},seenUids:{box:{},circle:{}}},X),Be.length>0}_queryCell(d,I,D,z,X,ne,pe,_e){const{seenUids:Ce,hitTest:Be,overlapMode:Je}=pe,st=this.boxCells[X];if(st!==null){const Ct=this.bboxes;for(const Tt of st)if(!Ce.box[Tt]){Ce.box[Tt]=!0;const ei=4*Tt,ui=this.boxKeys[Tt];if(d<=Ct[ei+2]&&I<=Ct[ei+3]&&D>=Ct[ei+0]&&z>=Ct[ei+1]&&(!_e||_e(ui))&&(!Be||!ee(Je,ui.overlapMode))&&(ne.push({key:ui,x1:Ct[ei],y1:Ct[ei+1],x2:Ct[ei+2],y2:Ct[ei+3]}),Be))return!0}}const Mt=this.circleCells[X];if(Mt!==null){const Ct=this.circles;for(const Tt of Mt)if(!Ce.circle[Tt]){Ce.circle[Tt]=!0;const ei=3*Tt,ui=this.circleKeys[Tt];if(this._circleAndRectCollide(Ct[ei],Ct[ei+1],Ct[ei+2],d,I,D,z)&&(!_e||_e(ui))&&(!Be||!ee(Je,ui.overlapMode))){const vi=Ct[ei],jt=Ct[ei+1],Oi=Ct[ei+2];if(ne.push({key:ui,x1:vi-Oi,y1:jt-Oi,x2:vi+Oi,y2:jt+Oi}),Be)return!0}}}return!1}_queryCellCircle(d,I,D,z,X,ne,pe,_e){const{circle:Ce,seenUids:Be,overlapMode:Je}=pe,st=this.boxCells[X];if(st!==null){const Ct=this.bboxes;for(const Tt of st)if(!Be.box[Tt]){Be.box[Tt]=!0;const ei=4*Tt,ui=this.boxKeys[Tt];if(this._circleAndRectCollide(Ce.x,Ce.y,Ce.radius,Ct[ei+0],Ct[ei+1],Ct[ei+2],Ct[ei+3])&&(!_e||_e(ui))&&!ee(Je,ui.overlapMode))return ne.push(!0),!0}}const Mt=this.circleCells[X];if(Mt!==null){const Ct=this.circles;for(const Tt of Mt)if(!Be.circle[Tt]){Be.circle[Tt]=!0;const ei=3*Tt,ui=this.circleKeys[Tt];if(this._circlesCollide(Ct[ei],Ct[ei+1],Ct[ei+2],Ce.x,Ce.y,Ce.radius)&&(!_e||_e(ui))&&!ee(Je,ui.overlapMode))return ne.push(!0),!0}}}_forEachCell(d,I,D,z,X,ne,pe,_e){const Ce=this._convertToXCellCoord(d),Be=this._convertToYCellCoord(I),Je=this._convertToXCellCoord(D),st=this._convertToYCellCoord(z);for(let Mt=Ce;Mt<=Je;Mt++)for(let Ct=Be;Ct<=st;Ct++)if(X.call(this,d,I,D,z,this.xCellCount*Ct+Mt,ne,pe,_e))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,I,D,z,X,ne){const pe=z-d,_e=X-I,Ce=D+ne;return Ce*Ce>pe*pe+_e*_e}_circleAndRectCollide(d,I,D,z,X,ne,pe){const _e=(ne-z)/2,Ce=Math.abs(d-(z+_e));if(Ce>_e+D)return!1;const Be=(pe-X)/2,Je=Math.abs(I-(X+Be));if(Je>Be+D)return!1;if(Ce<=_e||Je<=Be)return!0;const st=Ce-_e,Mt=Je-Be;return st*st+Mt*Mt<=D*D}}function et(B,d,I,D,z){const X=o.create();return d?(o.scale(X,X,[1/z,1/z,1]),I||o.rotateZ(X,X,D.angle)):o.multiply(X,D.labelPlaneMatrix,B),X}function bt(B,d,I,D,z){if(d){const X=o.clone(B);return o.scale(X,X,[z,z,1]),I||o.rotateZ(X,X,-D.angle),X}return D.glCoordMatrix}function Xt(B,d,I){let D;I?(D=[B.x,B.y,I(B.x,B.y),1],o.transformMat4(D,D,d)):(D=[B.x,B.y,0,1],Hr(D,D,d));const z=D[3];return{point:new o.pointGeometry(D[0]/z,D[1]/z),signedDistanceFromCamera:z}}function fi(B,d){return .5+B/d*.5}function xn(B,d){const I=B[0]/B[3],D=B[1]/B[3];return I>=-d[0]&&I<=d[0]&&D>=-d[1]&&D<=d[1]}function qn(B,d,I,D,z,X,ne,pe,_e,Ce){const Be=D?B.textSizeData:B.iconSizeData,Je=o.evaluateSizeForZoom(Be,I.transform.zoom),st=[256/I.width*2+1,256/I.height*2+1],Mt=D?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Mt.clear();const Ct=B.lineVertexArray,Tt=D?B.text.placedSymbolArray:B.icon.placedSymbolArray,ei=I.transform.width/I.transform.height;let ui=!1;for(let vi=0;vi<Tt.length;vi++){const jt=Tt.get(vi);if(jt.hidden||jt.writingMode===o.WritingMode.vertical&&!ui){ar(jt.numGlyphs,Mt);continue}let Oi;if(ui=!1,Ce?(Oi=[jt.anchorX,jt.anchorY,Ce(jt.anchorX,jt.anchorY),1],o.transformMat4(Oi,Oi,d)):(Oi=[jt.anchorX,jt.anchorY,0,1],Hr(Oi,Oi,d)),!xn(Oi,st)){ar(jt.numGlyphs,Mt);continue}const ki=fi(I.transform.cameraToCenterDistance,Oi[3]),Wi=o.evaluateSizeForFeature(Be,Je,jt),Vi=ne?Wi/ki:Wi*ki,ln=new o.pointGeometry(jt.anchorX,jt.anchorY),Ui=Xt(ln,z,Ce).point,Mn={},_n=an(jt,Vi,!1,pe,d,z,X,B.glyphOffsetArray,Ct,Mt,Ui,ln,Mn,ei,_e,Ce);ui=_n.useVertical,(_n.notEnoughRoom||ui||_n.needsFlipping&&an(jt,Vi,!0,pe,d,z,X,B.glyphOffsetArray,Ct,Mt,Ui,ln,Mn,ei,_e,Ce).notEnoughRoom)&&ar(jt.numGlyphs,Mt)}D?B.text.dynamicLayoutVertexBuffer.updateData(Mt):B.icon.dynamicLayoutVertexBuffer.updateData(Mt)}function bn(B,d,I,D,z,X,ne,pe,_e,Ce,Be,Je,st){const Mt=pe.glyphStartIndex+pe.numGlyphs,Ct=pe.lineStartIndex,Tt=pe.lineStartIndex+pe.lineLength,ei=d.getoffsetX(pe.glyphStartIndex),ui=d.getoffsetX(Mt-1),vi=mr(B*ei,I,D,z,X,ne,pe.segment,Ct,Tt,_e,Ce,Be,Je,st);if(!vi)return null;const jt=mr(B*ui,I,D,z,X,ne,pe.segment,Ct,Tt,_e,Ce,Be,Je,st);return jt?{first:vi,last:jt}:null}function Gi(B,d,I,D){return B===o.WritingMode.horizontal&&Math.abs(I.y-d.y)>Math.abs(I.x-d.x)*D?{useVertical:!0}:(B===o.WritingMode.vertical?d.y<I.y:d.x>I.x)?{needsFlipping:!0}:null}function an(B,d,I,D,z,X,ne,pe,_e,Ce,Be,Je,st,Mt,Ct,Tt){const ei=d/24,ui=B.lineOffsetX*ei,vi=B.lineOffsetY*ei;let jt;if(B.numGlyphs>1){const Oi=B.glyphStartIndex+B.numGlyphs,ki=B.lineStartIndex,Wi=B.lineStartIndex+B.lineLength,Vi=bn(ei,pe,ui,vi,I,Be,Je,B,_e,X,st,Ct,Tt);if(!Vi)return{notEnoughRoom:!0};const ln=Xt(Vi.first.point,ne,Tt).point,Ui=Xt(Vi.last.point,ne,Tt).point;if(D&&!I){const Mn=Gi(B.writingMode,ln,Ui,Mt);if(Mn)return Mn}jt=[Vi.first];for(let Mn=B.glyphStartIndex+1;Mn<Oi-1;Mn++)jt.push(mr(ei*pe.getoffsetX(Mn),ui,vi,I,Be,Je,B.segment,ki,Wi,_e,X,st,Ct,Tt));jt.push(Vi.last)}else{if(D&&!I){const ki=Xt(Je,z,Tt).point,Wi=B.lineStartIndex+B.segment+1,Vi=new o.pointGeometry(_e.getx(Wi),_e.gety(Wi)),ln=Xt(Vi,z,Tt),Ui=ln.signedDistanceFromCamera>0?ln.point:Kn(Je,Vi,ki,1,z,Tt),Mn=Gi(B.writingMode,ki,Ui,Mt);if(Mn)return Mn}const Oi=mr(ei*pe.getoffsetX(B.glyphStartIndex),ui,vi,I,Be,Je,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,_e,X,st,Ct,Tt);if(!Oi)return{notEnoughRoom:!0};jt=[Oi]}for(const Oi of jt)o.addDynamicAttributes(Ce,Oi.point,Oi.angle);return{}}function Kn(B,d,I,D,z,X){const ne=Xt(B.add(B.sub(d)._unit()),z,X).point,pe=I.sub(ne);return I.add(pe._mult(D/pe.mag()))}function mr(B,d,I,D,z,X,ne,pe,_e,Ce,Be,Je,st,Mt){const Ct=D?B-d:B+d;let Tt=Ct>0?1:-1,ei=0;D&&(Tt*=-1,ei=Math.PI),Tt<0&&(ei+=Math.PI);let ui=Tt>0?pe+ne:pe+ne+1,vi=z,jt=z,Oi=0,ki=0;const Wi=Math.abs(Ct),Vi=[];for(;Oi+ki<=Wi;){if(ui+=Tt,ui<pe||ui>=_e)return null;if(jt=vi,Vi.push(vi),vi=Je[ui],vi===void 0){const jn=new o.pointGeometry(Ce.getx(ui),Ce.gety(ui)),Cr=Xt(jn,Be,Mt);if(Cr.signedDistanceFromCamera>0)vi=Je[ui]=Cr.point;else{const Lr=ui-Tt;vi=Kn(Oi===0?X:new o.pointGeometry(Ce.getx(Lr),Ce.gety(Lr)),jn,jt,Wi-Oi+1,Be,Mt)}}Oi+=ki,ki=jt.dist(vi)}const ln=(Wi-Oi)/ki,Ui=vi.sub(jt),Mn=Ui.mult(ln)._add(jt);Mn._add(Ui._unit()._perp()._mult(I*Tt));const _n=ei+Math.atan2(vi.y-jt.y,vi.x-jt.x);return Vi.push(Mn),{point:Mn,angle:st?_n:0,path:Vi}}const yo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ar(B,d){for(let I=0;I<B;I++){const D=d.length;d.resize(D+4),d.float32.set(yo,3*D)}}function Hr(B,d,I){const D=d[0],z=d[1];return B[0]=I[0]*D+I[4]*z+I[12],B[1]=I[1]*D+I[5]*z+I[13],B[3]=I[3]*D+I[7]*z+I[15],B}const Yn=100;class Ur{constructor(d,I=new ae(d.width+200,d.height+200,25),D=new ae(d.width+200,d.height+200,25)){this.transform=d,this.grid=I,this.ignoredGrid=D,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+Yn,this.screenBottomBoundary=d.height+Yn,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,I,D,z,X,ne){const pe=this.projectAndGetPerspectiveRatio(z,d.anchorPointX,d.anchorPointY,ne),_e=D*pe.perspectiveRatio,Ce=d.x1*_e+pe.point.x,Be=d.y1*_e+pe.point.y,Je=d.x2*_e+pe.point.x,st=d.y2*_e+pe.point.y;return!this.isInsideGrid(Ce,Be,Je,st)||I!=="always"&&this.grid.hitTest(Ce,Be,Je,st,I,X)||pe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Ce,Be,Je,st],offscreen:this.isOffscreen(Ce,Be,Je,st)}}placeCollisionCircles(d,I,D,z,X,ne,pe,_e,Ce,Be,Je,st,Mt,Ct){const Tt=[],ei=new o.pointGeometry(I.anchorX,I.anchorY),ui=Xt(ei,ne,Ct),vi=fi(this.transform.cameraToCenterDistance,ui.signedDistanceFromCamera),jt=(Be?X/vi:X*vi)/o.ONE_EM,Oi=Xt(ei,pe,Ct).point,ki=bn(jt,z,I.lineOffsetX*jt,I.lineOffsetY*jt,!1,Oi,ei,I,D,pe,{},!1,Ct);let Wi=!1,Vi=!1,ln=!0;if(ki){const Ui=.5*st*vi+Mt,Mn=new o.pointGeometry(-100,-100),_n=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),jn=new Me,Cr=ki.first,Lr=ki.last;let j=[];for(let ve=Cr.path.length-1;ve>=1;ve--)j.push(Cr.path[ve]);for(let ve=1;ve<Lr.path.length;ve++)j.push(Lr.path[ve]);const K=2.5*Ui;if(_e){const ve=j.map(Ne=>Xt(Ne,_e,Ct));j=ve.some(Ne=>Ne.signedDistanceFromCamera<=0)?[]:ve.map(Ne=>Ne.point)}let ue=[];if(j.length>0){const ve=j[0].clone(),Ne=j[0].clone();for(let Ke=1;Ke<j.length;Ke++)ve.x=Math.min(ve.x,j[Ke].x),ve.y=Math.min(ve.y,j[Ke].y),Ne.x=Math.max(Ne.x,j[Ke].x),Ne.y=Math.max(Ne.y,j[Ke].y);ue=ve.x>=Mn.x&&Ne.x<=_n.x&&ve.y>=Mn.y&&Ne.y<=_n.y?[j]:Ne.x<Mn.x||ve.x>_n.x||Ne.y<Mn.y||ve.y>_n.y?[]:o.clipLine([j],Mn.x,Mn.y,_n.x,_n.y)}for(const ve of ue){jn.reset(ve,.25*Ui);let Ne=0;Ne=jn.length<=.5*Ui?1:Math.ceil(jn.paddedLength/K)+1;for(let Ke=0;Ke<Ne;Ke++){const it=Ke/Math.max(Ne-1,1),at=jn.lerp(it),gt=at.x+Yn,Et=at.y+Yn;Tt.push(gt,Et,Ui,0);const ii=gt-Ui,bi=Et-Ui,_i=gt+Ui,ci=Et+Ui;if(ln=ln&&this.isOffscreen(ii,bi,_i,ci),Vi=Vi||this.isInsideGrid(ii,bi,_i,ci),d!=="always"&&this.grid.hitTestCircle(gt,Et,Ui,d,Je)&&(Wi=!0,!Ce))return{circles:[],offscreen:!1,collisionDetected:Wi}}}}return{circles:!Ce&&Wi||!Vi||vi<this.perspectiveRatioCutoff?[]:Tt,offscreen:ln,collisionDetected:Wi}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const I=[];let D=1/0,z=1/0,X=-1/0,ne=-1/0;for(const Be of d){const Je=new o.pointGeometry(Be.x+Yn,Be.y+Yn);D=Math.min(D,Je.x),z=Math.min(z,Je.y),X=Math.max(X,Je.x),ne=Math.max(ne,Je.y),I.push(Je)}const pe=this.grid.query(D,z,X,ne).concat(this.ignoredGrid.query(D,z,X,ne)),_e={},Ce={};for(const Be of pe){const Je=Be.key;if(_e[Je.bucketInstanceId]===void 0&&(_e[Je.bucketInstanceId]={}),_e[Je.bucketInstanceId][Je.featureIndex])continue;const st=[new o.pointGeometry(Be.x1,Be.y1),new o.pointGeometry(Be.x2,Be.y1),new o.pointGeometry(Be.x2,Be.y2),new o.pointGeometry(Be.x1,Be.y2)];o.polygonIntersectsPolygon(I,st)&&(_e[Je.bucketInstanceId][Je.featureIndex]=!0,Ce[Je.bucketInstanceId]===void 0&&(Ce[Je.bucketInstanceId]=[]),Ce[Je.bucketInstanceId].push(Je.featureIndex))}return Ce}insertCollisionBox(d,I,D,z,X,ne){(D?this.ignoredGrid:this.grid).insert({bucketInstanceId:z,featureIndex:X,collisionGroupID:ne,overlapMode:I},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,I,D,z,X,ne){const pe=D?this.ignoredGrid:this.grid,_e={bucketInstanceId:z,featureIndex:X,collisionGroupID:ne,overlapMode:I};for(let Ce=0;Ce<d.length;Ce+=4)pe.insertCircle(_e,d[Ce],d[Ce+1],d[Ce+2])}projectAndGetPerspectiveRatio(d,I,D,z){let X;return z?(X=[I,D,z(I,D),1],o.transformMat4(X,X,d)):(X=[I,D,0,1],Hr(X,X,d)),{point:new o.pointGeometry((X[0]/X[3]+1)/2*this.transform.width+Yn,(-X[1]/X[3]+1)/2*this.transform.height+Yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}}isOffscreen(d,I,D,z){return D<Yn||d>=this.screenRightBoundary||z<Yn||I>this.screenBottomBoundary}isInsideGrid(d,I,D,z){return D>=0&&d<this.gridRightBoundary&&z>=0&&I<this.gridBottomBoundary}getViewportMatrix(){const d=o.identity([]);return o.translate(d,d,[-100,-100,0]),d}}function co(B,d,I){return d*(o.EXTENT/(B.tileSize*Math.pow(2,I-B.tileID.overscaledZ)))}class Jn{constructor(d,I,D,z){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?I:-I))):z&&D?1:0,this.placed=D}isHidden(){return this.opacity===0&&!this.placed}}class br{constructor(d,I,D,z,X){this.text=new Jn(d?d.text:null,I,D,X),this.icon=new Jn(d?d.icon:null,I,z,X)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Eo{constructor(d,I,D){this.text=d,this.icon=I,this.skipFade=D}}class un{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class He{constructor(d,I,D,z,X){this.bucketInstanceId=d,this.featureIndex=I,this.sourceLayerIndex=D,this.bucketIndex=z,this.tileID=X}}class Ho{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const I=++this.maxGroupID;this.collisionGroups[d]={ID:I,predicate:D=>D.collisionGroupID===I}}return this.collisionGroups[d]}}function Do(B,d,I,D,z){const{horizontalAlign:X,verticalAlign:ne}=o.getAnchorAlignment(B),pe=-(X-.5)*d,_e=-(ne-.5)*I,Ce=o.evaluateVariableOffset(B,D);return new o.pointGeometry(pe+Ce[0]*z,_e+Ce[1]*z)}function wo(B,d,I,D,z,X){const{x1:ne,x2:pe,y1:_e,y2:Ce,anchorPointX:Be,anchorPointY:Je}=B,st=new o.pointGeometry(d,I);return D&&st._rotate(z?X:-X),{x1:ne+st.x,y1:_e+st.y,x2:pe+st.x,y2:Ce+st.y,anchorPointX:Be,anchorPointY:Je}}class Pe{constructor(d,I,D,z,X){this.transform=d.clone(),this.terrain=I,this.collisionIndex=new Ur(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=D,this.retainedQueryData={},this.collisionGroups=new Ho(z),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,I,D,z){const X=D.getBucket(I),ne=D.latestFeatureIndex;if(!X||!ne||I.id!==X.layerIds[0])return;const pe=D.collisionBoxArray,_e=X.layers[0].layout,Ce=Math.pow(2,this.transform.zoom-D.tileID.overscaledZ),Be=D.tileSize/o.EXTENT,Je=this.transform.calculatePosMatrix(D.tileID.toUnwrapped()),st=_e.get("text-pitch-alignment")==="map",Mt=_e.get("text-rotation-alignment")==="map",Ct=co(D,1,this.transform.zoom),Tt=et(Je,st,Mt,this.transform,Ct);let ei=null;if(st){const vi=bt(Je,st,Mt,this.transform,Ct);ei=o.multiply([],this.transform.labelPlaneMatrix,vi)}this.retainedQueryData[X.bucketInstanceId]=new He(X.bucketInstanceId,ne,X.sourceLayerIndex,X.index,D.tileID);const ui={bucket:X,layout:_e,posMatrix:Je,textLabelPlaneMatrix:Tt,labelToScreenMatrix:ei,scale:Ce,textPixelRatio:Be,holdingForFade:D.holdingForFade(),collisionBoxArray:pe,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(X.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(X.sourceID)};if(z)for(const vi of X.sortKeyRanges){const{sortKey:jt,symbolInstanceStart:Oi,symbolInstanceEnd:ki}=vi;d.push({sortKey:jt,symbolInstanceStart:Oi,symbolInstanceEnd:ki,parameters:ui})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:X.symbolInstances.length,parameters:ui})}attemptAnchorPlacement(d,I,D,z,X,ne,pe,_e,Ce,Be,Je,st,Mt,Ct,Tt,ei){const ui=[st.textOffset0,st.textOffset1],vi=Do(d,D,z,ui,X),jt=this.collisionIndex.placeCollisionBox(wo(I,vi.x,vi.y,ne,pe,this.transform.angle),Je,_e,Ce,Be.predicate,ei);if((!Tt||this.collisionIndex.placeCollisionBox(wo(Tt,vi.x,vi.y,ne,pe,this.transform.angle),Je,_e,Ce,Be.predicate,ei).box.length!==0)&&jt.box.length>0){let Oi;if(this.prevPlacement&&this.prevPlacement.variableOffsets[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID].text&&(Oi=this.prevPlacement.variableOffsets[st.crossTileID].anchor),st.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[st.crossTileID]={textOffset:ui,width:D,height:z,anchor:d,textBoxScale:X,prevAnchor:Oi},this.markUsedJustification(Mt,d,st,Ct),Mt.allowVerticalPlacement&&(this.markUsedOrientation(Mt,Ct,st),this.placedOrientations[st.crossTileID]=Ct),{shift:vi,placedGlyphBoxes:jt}}}placeLayerBucketPart(d,I,D){const{bucket:z,layout:X,posMatrix:ne,textLabelPlaneMatrix:pe,labelToScreenMatrix:_e,textPixelRatio:Ce,holdingForFade:Be,collisionBoxArray:Je,partiallyEvaluatedTextSize:st,collisionGroup:Mt}=d.parameters,Ct=X.get("text-optional"),Tt=X.get("icon-optional"),ei=o.getOverlapMode(X,"text-overlap","text-allow-overlap"),ui=ei==="always",vi=o.getOverlapMode(X,"icon-overlap","icon-allow-overlap"),jt=vi==="always",Oi=X.get("text-rotation-alignment")==="map",ki=X.get("text-pitch-alignment")==="map",Wi=X.get("icon-text-fit")!=="none",Vi=X.get("symbol-z-order")==="viewport-y",ln=ui&&(jt||!z.hasIconData()||Tt),Ui=jt&&(ui||!z.hasTextData()||Ct);!z.collisionArrays&&Je&&z.deserializeCollisionBoxes(Je);const Mn=(_n,jn)=>{if(I[_n.crossTileID])return;if(Be)return void(this.placements[_n.crossTileID]=new Eo(!1,!1,!1));let Cr=!1,Lr=!1,j=!0,K=null,ue={box:null,offscreen:null},ve={box:null,offscreen:null},Ne=null,Ke=null,it=null,at=0,gt=0,Et=0;jn.textFeatureIndex?at=jn.textFeatureIndex:_n.useRuntimeCollisionCircles&&(at=_n.featureIndex),jn.verticalTextFeatureIndex&&(gt=jn.verticalTextFeatureIndex);const ii=this.retainedQueryData[z.bucketInstanceId].tileID,bi=this.terrain?(Bi,qt)=>this.terrain.getElevation(ii,Bi,qt):null;for(const Bi of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const qt=jn[Bi];qt&&(qt.elevation=bi?bi(qt.anchorPointX,qt.anchorPointY):0)}const _i=jn.textBox;if(_i){const Bi=Kt=>{let Zi=o.WritingMode.horizontal;if(z.allowVerticalPlacement&&!Kt&&this.prevPlacement){const Qi=this.prevPlacement.placedOrientations[_n.crossTileID];Qi&&(this.placedOrientations[_n.crossTileID]=Qi,Zi=Qi,this.markUsedOrientation(z,Zi,_n))}return Zi},qt=(Kt,Zi)=>{if(z.allowVerticalPlacement&&_n.numVerticalGlyphVertices>0&&jn.verticalTextBox){for(const Qi of z.writingModes)if(Qi===o.WritingMode.vertical?(ue=Zi(),ve=ue):ue=Kt(),ue&&ue.box&&ue.box.length)break}else ue=Kt()};if(X.get("text-variable-anchor")){let Kt=X.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[_n.crossTileID]){const Hi=this.prevPlacement.variableOffsets[_n.crossTileID];Kt.indexOf(Hi.anchor)>0&&(Kt=Kt.filter(Tn=>Tn!==Hi.anchor),Kt.unshift(Hi.anchor))}const Zi=(Hi,Tn,An)=>{const xr=Hi.x2-Hi.x1,Ln=Hi.y2-Hi.y1,vo=_n.textBoxScale,So=Wi&&vi==="never"?Tn:null;let Xr={box:[],offscreen:!1};const jr=ei!=="never"?2*Kt.length:Kt.length;for(let mo=0;mo<jr;++mo){const ko=this.attemptAnchorPlacement(Kt[mo%Kt.length],Hi,xr,Ln,vo,Oi,ki,Ce,ne,Mt,mo>=Kt.length?ei:"never",_n,z,An,So,bi);if(ko&&(Xr=ko.placedGlyphBoxes,Xr&&Xr.box&&Xr.box.length)){Cr=!0,K=ko.shift;break}}return Xr};qt(()=>Zi(_i,jn.iconBox,o.WritingMode.horizontal),()=>{const Hi=jn.verticalTextBox;return z.allowVerticalPlacement&&!(ue&&ue.box&&ue.box.length)&&_n.numVerticalGlyphVertices>0&&Hi?Zi(Hi,jn.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),ue&&(Cr=ue.box,j=ue.offscreen);const Qi=Bi(ue&&ue.box);if(!Cr&&this.prevPlacement){const Hi=this.prevPlacement.variableOffsets[_n.crossTileID];Hi&&(this.variableOffsets[_n.crossTileID]=Hi,this.markUsedJustification(z,Hi.anchor,_n,Qi))}}else{const Kt=(Zi,Qi)=>{const Hi=this.collisionIndex.placeCollisionBox(Zi,ei,Ce,ne,Mt.predicate,bi);return Hi&&Hi.box&&Hi.box.length&&(this.markUsedOrientation(z,Qi,_n),this.placedOrientations[_n.crossTileID]=Qi),Hi};qt(()=>Kt(_i,o.WritingMode.horizontal),()=>{const Zi=jn.verticalTextBox;return z.allowVerticalPlacement&&_n.numVerticalGlyphVertices>0&&Zi?Kt(Zi,o.WritingMode.vertical):{box:null,offscreen:null}}),Bi(ue&&ue.box&&ue.box.length)}}if(Ne=ue,Cr=Ne&&Ne.box&&Ne.box.length>0,j=Ne&&Ne.offscreen,_n.useRuntimeCollisionCircles){const Bi=z.text.placedSymbolArray.get(_n.centerJustifiedTextSymbolIndex),qt=o.evaluateSizeForFeature(z.textSizeData,st,Bi),Kt=X.get("text-padding");Ke=this.collisionIndex.placeCollisionCircles(ei,Bi,z.lineVertexArray,z.glyphOffsetArray,qt,ne,pe,_e,D,ki,Mt.predicate,_n.collisionCircleDiameter,Kt,bi),Ke.circles.length&&Ke.collisionDetected&&!D&&o.warnOnce("Collisions detected, but collision boxes are not shown"),Cr=ui||Ke.circles.length>0&&!Ke.collisionDetected,j=j&&Ke.offscreen}if(jn.iconFeatureIndex&&(Et=jn.iconFeatureIndex),jn.iconBox){const Bi=qt=>{const Kt=Wi&&K?wo(qt,K.x,K.y,Oi,ki,this.transform.angle):qt;return this.collisionIndex.placeCollisionBox(Kt,vi,Ce,ne,Mt.predicate,bi)};ve&&ve.box&&ve.box.length&&jn.verticalIconBox?(it=Bi(jn.verticalIconBox),Lr=it.box.length>0):(it=Bi(jn.iconBox),Lr=it.box.length>0),j=j&&it.offscreen}const ci=Ct||_n.numHorizontalGlyphVertices===0&&_n.numVerticalGlyphVertices===0,rn=Tt||_n.numIconVertices===0;if(ci||rn?rn?ci||(Lr=Lr&&Cr):Cr=Lr&&Cr:Lr=Cr=Lr&&Cr,Cr&&Ne&&Ne.box&&this.collisionIndex.insertCollisionBox(Ne.box,ei,X.get("text-ignore-placement"),z.bucketInstanceId,ve&&ve.box&&gt?gt:at,Mt.ID),Lr&&it&&this.collisionIndex.insertCollisionBox(it.box,vi,X.get("icon-ignore-placement"),z.bucketInstanceId,Et,Mt.ID),Ke&&(Cr&&this.collisionIndex.insertCollisionCircles(Ke.circles,ei,X.get("text-ignore-placement"),z.bucketInstanceId,at,Mt.ID),D)){const Bi=z.bucketInstanceId;let qt=this.collisionCircleArrays[Bi];qt===void 0&&(qt=this.collisionCircleArrays[Bi]=new un);for(let Kt=0;Kt<Ke.circles.length;Kt+=4)qt.circles.push(Ke.circles[Kt+0]),qt.circles.push(Ke.circles[Kt+1]),qt.circles.push(Ke.circles[Kt+2]),qt.circles.push(Ke.collisionDetected?1:0)}if(_n.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(z.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_n.crossTileID]=new Eo(Cr||ln,Lr||Ui,j||z.justReloaded),I[_n.crossTileID]=!0};if(Vi){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _n=z.getSortedSymbolIndexes(this.transform.angle);for(let jn=_n.length-1;jn>=0;--jn){const Cr=_n[jn];Mn(z.symbolInstances.get(Cr),z.collisionArrays[Cr])}}else for(let _n=d.symbolInstanceStart;_n<d.symbolInstanceEnd;_n++)Mn(z.symbolInstances.get(_n),z.collisionArrays[_n]);if(D&&z.bucketInstanceId in this.collisionCircleArrays){const _n=this.collisionCircleArrays[z.bucketInstanceId];o.invert(_n.invProjMatrix,ne),_n.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(d,I,D,z){let X;X=z===o.WritingMode.vertical?D.verticalPlacedTextSymbolIndex:{left:D.leftJustifiedTextSymbolIndex,center:D.centerJustifiedTextSymbolIndex,right:D.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(I)];const ne=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex,D.verticalPlacedTextSymbolIndex];for(const pe of ne)pe>=0&&(d.text.placedSymbolArray.get(pe).crossTileID=X>=0&&pe!==X?0:D.crossTileID)}markUsedOrientation(d,I,D){const z=I===o.WritingMode.horizontal||I===o.WritingMode.horizontalOnly?I:0,X=I===o.WritingMode.vertical?I:0,ne=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex];for(const pe of ne)d.text.placedSymbolArray.get(pe).placedOrientation=z;D.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(D.verticalPlacedTextSymbolIndex).placedOrientation=X)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const I=this.prevPlacement;let D=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;const z=I?I.symbolFadeChange(d):1,X=I?I.opacities:{},ne=I?I.variableOffsets:{},pe=I?I.placedOrientations:{};for(const _e in this.placements){const Ce=this.placements[_e],Be=X[_e];Be?(this.opacities[_e]=new br(Be,z,Ce.text,Ce.icon),D=D||Ce.text!==Be.text.placed||Ce.icon!==Be.icon.placed):(this.opacities[_e]=new br(null,z,Ce.text,Ce.icon,Ce.skipFade),D=D||Ce.text||Ce.icon)}for(const _e in X){const Ce=X[_e];if(!this.opacities[_e]){const Be=new br(Ce,z,!1,!1);Be.isHidden()||(this.opacities[_e]=Be,D=D||Ce.text.placed||Ce.icon.placed)}}for(const _e in ne)this.variableOffsets[_e]||!this.opacities[_e]||this.opacities[_e].isHidden()||(this.variableOffsets[_e]=ne[_e]);for(const _e in pe)this.placedOrientations[_e]||!this.opacities[_e]||this.opacities[_e].isHidden()||(this.placedOrientations[_e]=pe[_e]);if(I&&I.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");D?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:d)}updateLayerOpacities(d,I){const D={};for(const z of I){const X=z.getBucket(d);X&&z.latestFeatureIndex&&d.id===X.layerIds[0]&&this.updateBucketOpacities(X,D,z.collisionBoxArray)}}updateBucketOpacities(d,I,D){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const z=d.layers[0].layout,X=new br(null,0,!1,!1,!0),ne=z.get("text-allow-overlap"),pe=z.get("icon-allow-overlap"),_e=z.get("text-variable-anchor"),Ce=z.get("text-rotation-alignment")==="map",Be=z.get("text-pitch-alignment")==="map",Je=z.get("icon-text-fit")!=="none",st=new br(null,0,ne&&(pe||!d.hasIconData()||z.get("icon-optional")),pe&&(ne||!d.hasTextData()||z.get("text-optional")),!0);!d.collisionArrays&&D&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(D);const Mt=(Ct,Tt,ei)=>{for(let ui=0;ui<Tt/4;ui++)Ct.opacityVertexArray.emplaceBack(ei)};for(let Ct=0;Ct<d.symbolInstances.length;Ct++){const Tt=d.symbolInstances.get(Ct),{numHorizontalGlyphVertices:ei,numVerticalGlyphVertices:ui,crossTileID:vi}=Tt;let jt=this.opacities[vi];I[vi]?jt=X:jt||(jt=st,this.opacities[vi]=jt),I[vi]=!0;const Oi=Tt.numIconVertices>0,ki=this.placedOrientations[Tt.crossTileID],Wi=ki===o.WritingMode.vertical,Vi=ki===o.WritingMode.horizontal||ki===o.WritingMode.horizontalOnly;if(ei>0||ui>0){const ln=ti(jt.text);Mt(d.text,ei,Wi?vt:ln),Mt(d.text,ui,Vi?vt:ln);const Ui=jt.text.isHidden();[Tt.rightJustifiedTextSymbolIndex,Tt.centerJustifiedTextSymbolIndex,Tt.leftJustifiedTextSymbolIndex].forEach(jn=>{jn>=0&&(d.text.placedSymbolArray.get(jn).hidden=Ui||Wi?1:0)}),Tt.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(Tt.verticalPlacedTextSymbolIndex).hidden=Ui||Vi?1:0);const Mn=this.variableOffsets[Tt.crossTileID];Mn&&this.markUsedJustification(d,Mn.anchor,Tt,ki);const _n=this.placedOrientations[Tt.crossTileID];_n&&(this.markUsedJustification(d,"left",Tt,_n),this.markUsedOrientation(d,_n,Tt))}if(Oi){const ln=ti(jt.icon),Ui=!(Je&&Tt.verticalPlacedIconSymbolIndex&&Wi);Tt.placedIconSymbolIndex>=0&&(Mt(d.icon,Tt.numIconVertices,Ui?ln:vt),d.icon.placedSymbolArray.get(Tt.placedIconSymbolIndex).hidden=jt.icon.isHidden()),Tt.verticalPlacedIconSymbolIndex>=0&&(Mt(d.icon,Tt.numVerticalIconVertices,Ui?vt:ln),d.icon.placedSymbolArray.get(Tt.verticalPlacedIconSymbolIndex).hidden=jt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const ln=d.collisionArrays[Ct];if(ln){let Ui=new o.pointGeometry(0,0);if(ln.textBox||ln.verticalTextBox){let _n=!0;if(_e){const jn=this.variableOffsets[vi];jn?(Ui=Do(jn.anchor,jn.width,jn.height,jn.textOffset,jn.textBoxScale),Ce&&Ui._rotate(Be?this.transform.angle:-this.transform.angle)):_n=!1}ln.textBox&&Te(d.textCollisionBox.collisionVertexArray,jt.text.placed,!_n||Wi,Ui.x,Ui.y),ln.verticalTextBox&&Te(d.textCollisionBox.collisionVertexArray,jt.text.placed,!_n||Vi,Ui.x,Ui.y)}const Mn=Boolean(!Vi&&ln.verticalIconBox);ln.iconBox&&Te(d.iconCollisionBox.collisionVertexArray,jt.icon.placed,Mn,Je?Ui.x:0,Je?Ui.y:0),ln.verticalIconBox&&Te(d.iconCollisionBox.collisionVertexArray,jt.icon.placed,!Mn,Je?Ui.x:0,Je?Ui.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=Ct.invProjMatrix,d.placementViewportMatrix=Ct.viewportMatrix,d.collisionCircleArray=Ct.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,I){const D=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*D>d}setStale(){this.stale=!0}}function Te(B,d,I,D,z){B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0)}const qe=Math.pow(2,25),ft=Math.pow(2,24),_t=Math.pow(2,17),Ut=Math.pow(2,16),Ge=Math.pow(2,9),Ht=Math.pow(2,8),zt=Math.pow(2,1);function ti(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const d=B.placed?1:0,I=Math.floor(127*B.opacity);return I*qe+d*ft+I*_t+d*Ut+I*Ge+d*Ht+I*zt+d}const vt=0;class ji{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,I,D,z,X){const ne=this._bucketParts;for(;this._currentTileIndex<d.length;)if(I.getBucketParts(ne,z,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,X())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ne.sort((pe,_e)=>pe.sortKey-_e.sortKey));this._currentPartIndex<ne.length;)if(I.placeLayerBucketPart(ne[this._currentPartIndex],this._seenCrossTileIDs,D),this._currentPartIndex++,X())return!0;return!1}}class Di{constructor(d,I,D,z,X,ne,pe,_e){this.placement=new Pe(d,I,ne,pe,_e),this._currentPlacementIndex=D.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=X,this._done=!1}isDone(){return this._done}continuePlacement(d,I,D){const z=o.exported.now(),X=()=>{const ne=o.exported.now()-z;return!this._forceFullPlacement&&ne>2};for(;this._currentPlacementIndex>=0;){const ne=I[d[this._currentPlacementIndex]],pe=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=pe)&&(!ne.maxzoom||ne.maxzoom>pe)){if(this._inProgressLayer||(this._inProgressLayer=new ji(ne)),this._inProgressLayer.continuePlacement(D[ne.source],this.placement,this._showCollisionBoxes,ne,X))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const In=512/o.EXTENT/2;class kn{constructor(d,I,D){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=D;for(let z=0;z<I.length;z++){const X=I.get(z),ne=X.key;this.indexedSymbolInstances[ne]||(this.indexedSymbolInstances[ne]=[]),this.indexedSymbolInstances[ne].push({crossTileID:X.crossTileID,coord:this.getScaledCoordinates(X,d)})}}getScaledCoordinates(d,I){const D=In/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*o.EXTENT+d.anchorX)*D),y:Math.floor((I.canonical.y*o.EXTENT+d.anchorY)*D)}}findMatches(d,I,D){const z=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z);for(let X=0;X<d.length;X++){const ne=d.get(X);if(ne.crossTileID)continue;const pe=this.indexedSymbolInstances[ne.key];if(!pe)continue;const _e=this.getScaledCoordinates(ne,I);for(const Ce of pe)if(Math.abs(Ce.coord.x-_e.x)<=z&&Math.abs(Ce.coord.y-_e.y)<=z&&!D[Ce.crossTileID]){D[Ce.crossTileID]=!0,ne.crossTileID=Ce.crossTileID;break}}}}class St{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const I=Math.round((d-this.lng)/360);if(I!==0)for(const D in this.indexes){const z=this.indexes[D],X={};for(const ne in z){const pe=z[ne];pe.tileID=pe.tileID.unwrapTo(pe.tileID.wrap+I),X[pe.tileID.key]=pe}this.indexes[D]=X}this.lng=d}addBucket(d,I,D){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let X=0;X<I.symbolInstances.length;X++)I.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const z=this.usedCrossTileIDs[d.overscaledZ];for(const X in this.indexes){const ne=this.indexes[X];if(Number(X)>d.overscaledZ)for(const pe in ne){const _e=ne[pe];_e.tileID.isChildOf(d)&&_e.findMatches(I.symbolInstances,d,z)}else{const pe=ne[d.scaledTo(Number(X)).key];pe&&pe.findMatches(I.symbolInstances,d,z)}}for(let X=0;X<I.symbolInstances.length;X++){const ne=I.symbolInstances.get(X);ne.crossTileID||(ne.crossTileID=D.generate(),z[ne.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new kn(d,I.symbolInstances,I.bucketInstanceId),!0}removeBucketCrossTileIDs(d,I){for(const D in I.indexedSymbolInstances)for(const z of I.indexedSymbolInstances[D])delete this.usedCrossTileIDs[d][z.crossTileID]}removeStaleBuckets(d){let I=!1;for(const D in this.indexes){const z=this.indexes[D];for(const X in z)d[z[X].bucketInstanceId]||(this.removeBucketCrossTileIDs(D,z[X]),delete z[X],I=!0)}return I}}class er{constructor(){this.layerIndexes={},this.crossTileIDs=new St,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,I,D){let z=this.layerIndexes[d.id];z===void 0&&(z=this.layerIndexes[d.id]=new Bn);let X=!1;const ne={};z.handleWrapJump(D);for(const pe of I){const _e=pe.getBucket(d);_e&&d.id===_e.layerIds[0]&&(_e.bucketInstanceId||(_e.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(pe.tileID,_e,this.crossTileIDs)&&(X=!0),ne[_e.bucketInstanceId]=!0)}return z.removeStaleBuckets(ne)&&(X=!0),X}pruneUnusedLayers(d){const I={};d.forEach(D=>{I[D]=!0});for(const D in this.layerIndexes)I[D]||delete this.layerIndexes[D]}}var Dr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]);class vr extends o.Evented{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=d._cache.max,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const d in this._tiles){const I=this._tiles[d];I.textures.forEach(D=>D.destroy()),I.textures=[]}}update(d,I){this.sourceCache.update(d,I),this._renderableTilesKeys=[];for(const D of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:I}))this._renderableTilesKeys.push(D.key),this._tiles[D.key]||(D.posMatrix=new Float64Array(16),o.ortho(D.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),this._tiles[D.key]=new Re(D,this.tileSize))}removeOutdated(d){const I={};this.renderHistory=this.renderHistory.filter((D,z)=>this.renderHistory.indexOf(D)===z).slice(0,this.renderHistorySize);for(const D of this._renderableTilesKeys)I[D]=!0;for(const D of this.renderHistory)I[D]=!0;for(const D in this._tiles)I[D]||(this._tiles[D].clearTextures(d),delete this._tiles[D])}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const I={};for(const D of this._renderableTilesKeys){const z=this._tiles[D].tileID;if(z.canonical.equals(d.canonical)){const X=d.clone();X.posMatrix=new Float64Array(16),o.ortho(X.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),I[D]=X}else if(z.canonical.isChildOf(d.canonical)){const X=d.clone();X.posMatrix=new Float64Array(16);const ne=z.canonical.z-d.canonical.z,pe=z.canonical.x-(z.canonical.x>>ne<<ne),_e=z.canonical.y-(z.canonical.y>>ne<<ne),Ce=o.EXTENT>>ne;o.ortho(X.posMatrix,0,Ce,0,Ce,0,1),o.translate(X.posMatrix,X.posMatrix,[-pe*Ce,-_e*Ce,0]),I[D]=X}else if(d.canonical.isChildOf(z.canonical)){const X=d.clone();X.posMatrix=new Float64Array(16);const ne=d.canonical.z-z.canonical.z,pe=d.canonical.x-(d.canonical.x>>ne<<ne),_e=d.canonical.y-(d.canonical.y>>ne<<ne),Ce=o.EXTENT>>ne;o.ortho(X.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),o.translate(X.posMatrix,X.posMatrix,[pe*Ce,_e*Ce,0]),o.scale(X.posMatrix,X.posMatrix,[1/2**ne,1/2**ne,0]),I[D]=X}}return I}getSourceTile(d,I){const D=this.sourceCache._source;let z=d.overscaledZ-this.deltaZoom;if(z>D.maxzoom&&(z=D.maxzoom),z<D.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(z).key);let X=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!X||!X.dem)&&I)for(;z>=D.minzoom&&(!X||!X.dem);)X=this.sourceCache.getTileByID(d.scaledTo(z--).key);return X}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(I=>I.timeLoaded>=d)}}class Tr{constructor(d,I,D){this.style=d,this.sourceCache=new vr(I),this.options=D,this.exaggeration=typeof D.exaggeration=="number"?D.exaggeration:1,this.elevationOffset=typeof D.elevationOffset=="number"?D.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(d,I,D,z=o.EXTENT){if(!(I>=0&&I<z&&D>=0&&D<z))return this.elevationOffset;let X=0;const ne=this.getTerrainData(d);if(ne.tile&&ne.tile.dem){const pe=o.transformMat4$1([],[I/z*o.EXTENT,D/z*o.EXTENT],ne.u_terrain_matrix),_e=[pe[0]*ne.tile.dem.dim,pe[1]*ne.tile.dem.dim],Ce=[Math.floor(_e[0]),Math.floor(_e[1])],Be=ne.tile.dem.get(Ce[0],Ce[1]),Je=ne.tile.dem.get(Ce[0],Ce[1]+1),st=ne.tile.dem.get(Ce[0]+1,Ce[1]),Mt=ne.tile.dem.get(Ce[0]+1,Ce[1]+1);X=o.number(o.number(Be,Je,_e[0]-Ce[0]),o.number(st,Mt,_e[0]-Ce[0]),_e[1]-Ce[1])}return X}rememberForRerender(d,I){for(const D in this.sourceCache._tiles){const z=this.sourceCache._tiles[D];(z.tileID.equals(I)||z.tileID.isChildOf(I))&&(d===this.sourceCache.sourceCache.id&&(z.timeLoaded=Date.now()),this._rerender[d]=this._rerender[d]||{},this._rerender[d][z.tileID.key]=!0)}}needsRerender(d,I){return this._rerender[d]&&this._rerender[d][I.key]}clearRerenderCache(){this._rerender={}}getElevation(d,I,D,z=o.EXTENT){return(this.getDEMElevation(d,I,D,z)+this.elevationOffset)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const z=this.style.map.painter.context,X=new o.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(z,X,z.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(z,new o.RGBAImage({width:1,height:1}),z.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.identity([])}const I=this.sourceCache.getSourceTile(d,!0);if(I&&I.dem&&(!I.demTexture||I.needsTerrainPrepare)){const z=this.style.map.painter.context;I.demTexture=this.style.map.painter.getTileTexture(I.dem.stride),I.demTexture?I.demTexture.update(I.dem.getPixels(),{premultiply:!1}):I.demTexture=new T(z,I.dem.getPixels(),z.gl.RGBA,{premultiply:!1}),I.demTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),I.needsTerrainPrepare=!1}const D=I&&I+I.tileID.key+d.key;if(D&&!this._demMatrixCache[D]){const z=this.sourceCache.sourceCache._source.maxzoom;let X=d.canonical.z-I.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=z?X=d.canonical.z-z:o.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ne=d.canonical.x-(d.canonical.x>>X<<X),pe=d.canonical.y-(d.canonical.y>>X<<X),_e=o.fromScaling(new Float64Array(16),[1/(o.EXTENT<<X),1/(o.EXTENT<<X),0]);o.translate(_e,_e,[ne*o.EXTENT,pe*o.EXTENT,0]),this._demMatrixCache[d.key]={matrix:_e,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:I&&I.dem&&I.dem.dim||1,u_terrain_matrix:D?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:I&&I.dem&&I.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(I&&I.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:I}}getRTTFramebuffer(){const d=this.style.map.painter;if(!this._rttFramebuffer){const I=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=d.context.createFramebuffer(I,I,!0),this._rttFramebuffer.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,I,I))}return this._rttFramebuffer}getFramebuffer(d){const I=this.style.map.painter,D=I.width/devicePixelRatio,z=I.height/devicePixelRatio;return!this._fbo||this._fbo.width===D&&this._fbo.height===z||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=I.context.createFramebuffer(D,z,!0),this._fbo.depthAttachment.set(I.context.createRenderbuffer(I.context.gl.DEPTH_COMPONENT16,D,z))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const I=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let X=0,ne=0;X<this._coordsTextureSize;X++)for(let pe=0;pe<this._coordsTextureSize;pe++,ne+=4)I[ne+0]=255&pe,I[ne+1]=255&X,I[ne+2]=pe>>8<<4|X>>8,I[ne+3]=0;const D=new o.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(I.buffer)),z=new T(d,D,d.gl.RGBA,{premultiply:!1});return z.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=z,z}pointCoordinate(d){const I=new Uint8Array(4),D=this.style.map.painter,z=D.context,X=z.gl;z.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),X.readPixels(d.x,D.height/devicePixelRatio-d.y-1,1,1,X.RGBA,X.UNSIGNED_BYTE,I),z.bindFramebuffer.set(null);const ne=I[0]+(I[2]>>4<<8),pe=I[1]+((15&I[2])<<8),_e=this.coordsIndex[255-I[3]],Ce=_e&&this.sourceCache.getTileByID(_e);if(!Ce)return null;const Be=this._coordsTextureSize,Je=(1<<Ce.tileID.canonical.z)*Be;return new o.MercatorCoordinate((Ce.tileID.canonical.x*Be+ne)/Je,(Ce.tileID.canonical.y*Be+pe)/Je,this.getElevation(Ce.tileID,ne,pe,Be))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.style.map.painter.context,I=new o.PosArray,D=new o.TriangleIndexArray,z=this.meshSize,X=o.EXTENT/z,ne=z*z;for(let pe=0;pe<=z;pe++)for(let _e=0;_e<=z;_e++)I.emplaceBack(_e*X,pe*X);for(let pe=0;pe<ne;pe+=z+1)for(let _e=0;_e<z;_e++)D.emplaceBack(_e+pe,z+_e+pe+1,z+_e+pe+2),D.emplaceBack(_e+pe,z+_e+pe+2,_e+pe+1);return this._mesh={indexBuffer:d.createIndexBuffer(D),vertexBuffer:d.createVertexBuffer(I,Dr.members),segments:o.SegmentVector.simpleSegment(0,0,I.length,D.length)},this._mesh}getMinMaxElevation(d){const I=this.getTerrainData(d).tile,D={minElevation:null,maxElevation:null};return I&&I.dem&&(D.minElevation=(I.dem.min+this.elevationOffset)*this.exaggeration,D.maxElevation=(I.dem.max+this.elevationOffset)*this.exaggeration),D}}const zr=(B,d)=>o.emitValidationErrors(B,d&&d.filter(I=>I.identifier!=="source.canvas")),po=o.pick(Zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ts=o.pick(Zt,["setCenter","setZoom","setBearing","setPitch"]),_o=function(){const B={},d=o.spec.$version;for(const I in o.spec.$root){const D=o.spec.$root[I];if(D.required){let z=null;z=I==="version"?d:D.type==="array"?[]:{},z!=null&&(B[I]=z)}}return B}();class is extends o.Evented{constructor(d,I={}){super(),this.map=d,this.dispatcher=new xe(Qe(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new J(d._requestManager,I.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new er,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const D=this;this._rtlTextPluginCallback=is.registerForPluginStateChange(z=>{D.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(X,ne)=>{if(o.triggerPluginCompletionEvent(X),ne&&ne.every(pe=>pe))for(const pe in D.sourceCaches)D.sourceCaches[pe].reload()})}),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const X=this.sourceCaches[z.sourceId];if(!X)return;const ne=X.getSource();if(ne&&ne.vectorLayerIds)for(const pe in this._layers){const _e=this._layers[pe];_e.source===ne.id&&this._validateLayer(_e)}})}loadURL(d,I={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const D=typeof I.validate!="boolean"||I.validate,z=this.map._requestManager.transformRequest(d,o.ResourceType.Style);this._request=o.getJSON(z,(X,ne)=>{this._request=null,X?this.fire(new o.ErrorEvent(X)):ne&&this._load(ne,D)})}loadJSON(d,I={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(d,I.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(_o,!1)}_load(d,I){if(I&&zr(this,o.validateStyle(d)))return;this._loaded=!0,this.stylesheet=d;for(const z in d.sources)this.addSource(z,d.sources[z],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);const D=si(this.stylesheet.layers);this._order=D.map(z=>z.id),this._layers={},this._serializedLayers={};for(let z of D)z=o.createStyleLayer(z),z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ie(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}_loadSprite(d){this._spriteRequest=function(I,D,z,X){let ne,pe,_e;const Ce=z>1?"@2x":"";let Be=o.getJSON(D.transformRequest(D.normalizeSpriteURL(I,Ce,".json"),o.ResourceType.SpriteJSON),(Mt,Ct)=>{Be=null,_e||(_e=Mt,ne=Ct,st())}),Je=o.getImage(D.transformRequest(D.normalizeSpriteURL(I,Ce,".png"),o.ResourceType.SpriteImage),(Mt,Ct)=>{Je=null,_e||(_e=Mt,pe=Ct,st())});function st(){if(_e)X(_e);else if(ne&&pe){const Mt=o.exported.getImageData(pe),Ct={};for(const Tt in ne){const{width:ei,height:ui,x:vi,y:jt,sdf:Oi,pixelRatio:ki,stretchX:Wi,stretchY:Vi,content:ln}=ne[Tt],Ui=new o.RGBAImage({width:ei,height:ui});o.RGBAImage.copy(Mt,Ui,{x:vi,y:jt},{x:0,y:0},{width:ei,height:ui}),Ct[Tt]={data:Ui,pixelRatio:ki,sdf:Oi,stretchX:Wi,stretchY:Vi,content:ln}}X(null,Ct)}}return{cancel(){Be&&(Be.cancel(),Be=null),Je&&(Je.cancel(),Je=null)}}}(d,this.map._requestManager,this.map.getPixelRatio(),(I,D)=>{if(this._spriteRequest=null,I)this.fire(new o.ErrorEvent(I));else if(D)for(const z in D)this.imageManager.addImage(z,D[z]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(d){const I=this.sourceCaches[d.source];if(!I)return;const D=d.sourceLayer;if(!D)return;const z=I.getSource();(z.type==="geojson"||z.vectorLayerIds&&z.vectorLayerIds.indexOf(D)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${D}" does not exist on source "${z.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const I=[];for(const D of d){const z=this._layers[D];z.type!=="custom"&&I.push(z.serialize())}return I}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const I=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),X=Object.keys(this._removedLayers);(z.length||X.length)&&this._updateWorkerLayers(z,X);for(const ne in this._updatedSources){const pe=this._updatedSources[ne];if(pe==="reload")this._reloadSource(ne);else{if(pe!=="clear")throw new Error(`Invalid action ${pe}`);this._clearSource(ne)}}this._updateTilesForChangedImages();for(const ne in this._updatedPaintProps)this._layers[ne].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const D={};for(const z in this.sourceCaches){const X=this.sourceCaches[z];D[z]=X.used,X.used=!1}for(const z of this._order){const X=this._layers[z];X.recalculate(d,this._availableImages),!X.isHidden(d.zoom)&&X.source&&(this.sourceCaches[X.source].used=!0)}for(const z in D){const X=this.sourceCaches[z];D[z]!==X.used&&X.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:z}))}this.light.recalculate(d),this.z=d.zoom,I&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:I})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(d){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),d){const I=this.sourceCaches[d.source];if(!I)throw new Error(`cannot load terrain, because there exists no source with ID: ${d.source}`);this.terrain=new Tr(this,I,d),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=D=>{D.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=D=>{D.tile&&(D.sourceId===d.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(D.sourceId,D.tile.tileID)):D.source.type==="geojson"&&this.terrain.rememberForRerender(D.sourceId,D.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new o.Event("terrain",{terrain:d}))}setState(d){if(this._checkLoaded(),zr(this,o.validateStyle(d)))return!1;(d=o.clone$1(d)).layers=si(d.layers);const I=function(z,X){if(!z)return[{command:Zt.setStyle,args:[X]}];let ne=[];try{if(!v(z.version,X.version))return[{command:Zt.setStyle,args:[X]}];v(z.center,X.center)||ne.push({command:Zt.setCenter,args:[X.center]}),v(z.zoom,X.zoom)||ne.push({command:Zt.setZoom,args:[X.zoom]}),v(z.bearing,X.bearing)||ne.push({command:Zt.setBearing,args:[X.bearing]}),v(z.pitch,X.pitch)||ne.push({command:Zt.setPitch,args:[X.pitch]}),v(z.sprite,X.sprite)||ne.push({command:Zt.setSprite,args:[X.sprite]}),v(z.glyphs,X.glyphs)||ne.push({command:Zt.setGlyphs,args:[X.glyphs]}),v(z.transition,X.transition)||ne.push({command:Zt.setTransition,args:[X.transition]}),v(z.light,X.light)||ne.push({command:Zt.setLight,args:[X.light]});const pe={},_e=[];(function(Be,Je,st,Mt){let Ct;for(Ct in Je=Je||{},Be=Be||{})Object.prototype.hasOwnProperty.call(Be,Ct)&&(Object.prototype.hasOwnProperty.call(Je,Ct)||Qt(Ct,st,Mt));for(Ct in Je)Object.prototype.hasOwnProperty.call(Je,Ct)&&(Object.prototype.hasOwnProperty.call(Be,Ct)?v(Be[Ct],Je[Ct])||(Be[Ct].type==="geojson"&&Je[Ct].type==="geojson"&&ai(Be,Je,Ct)?st.push({command:Zt.setGeoJSONSourceData,args:[Ct,Je[Ct].data]}):Ot(Ct,Je,st,Mt)):Ei(Ct,Je,st))})(z.sources,X.sources,_e,pe);const Ce=[];z.layers&&z.layers.forEach(Be=>{pe[Be.source]?ne.push({command:Zt.removeLayer,args:[Be.id]}):Ce.push(Be)}),ne=ne.concat(_e),function(Be,Je,st){Je=Je||[];const Mt=(Be=Be||[]).map(Ii),Ct=Je.map(Ii),Tt=Be.reduce($t,{}),ei=Je.reduce($t,{}),ui=Mt.slice(),vi=Object.create(null);let jt,Oi,ki,Wi,Vi,ln,Ui;for(jt=0,Oi=0;jt<Mt.length;jt++)ki=Mt[jt],Object.prototype.hasOwnProperty.call(ei,ki)?Oi++:(st.push({command:Zt.removeLayer,args:[ki]}),ui.splice(ui.indexOf(ki,Oi),1));for(jt=0,Oi=0;jt<Ct.length;jt++)ki=Ct[Ct.length-1-jt],ui[ui.length-1-jt]!==ki&&(Object.prototype.hasOwnProperty.call(Tt,ki)?(st.push({command:Zt.removeLayer,args:[ki]}),ui.splice(ui.lastIndexOf(ki,ui.length-Oi),1)):Oi++,ln=ui[ui.length-jt],st.push({command:Zt.addLayer,args:[ei[ki],ln]}),ui.splice(ui.length-jt,0,ki),vi[ki]=!0);for(jt=0;jt<Ct.length;jt++)if(ki=Ct[jt],Wi=Tt[ki],Vi=ei[ki],!vi[ki]&&!v(Wi,Vi))if(v(Wi.source,Vi.source)&&v(Wi["source-layer"],Vi["source-layer"])&&v(Wi.type,Vi.type)){for(Ui in Ji(Wi.layout,Vi.layout,st,ki,null,Zt.setLayoutProperty),Ji(Wi.paint,Vi.paint,st,ki,null,Zt.setPaintProperty),v(Wi.filter,Vi.filter)||st.push({command:Zt.setFilter,args:[ki,Vi.filter]}),v(Wi.minzoom,Vi.minzoom)&&v(Wi.maxzoom,Vi.maxzoom)||st.push({command:Zt.setLayerZoomRange,args:[ki,Vi.minzoom,Vi.maxzoom]}),Wi)Object.prototype.hasOwnProperty.call(Wi,Ui)&&Ui!=="layout"&&Ui!=="paint"&&Ui!=="filter"&&Ui!=="metadata"&&Ui!=="minzoom"&&Ui!=="maxzoom"&&(Ui.indexOf("paint.")===0?Ji(Wi[Ui],Vi[Ui],st,ki,Ui.slice(6),Zt.setPaintProperty):v(Wi[Ui],Vi[Ui])||st.push({command:Zt.setLayerProperty,args:[ki,Ui,Vi[Ui]]}));for(Ui in Vi)Object.prototype.hasOwnProperty.call(Vi,Ui)&&!Object.prototype.hasOwnProperty.call(Wi,Ui)&&Ui!=="layout"&&Ui!=="paint"&&Ui!=="filter"&&Ui!=="metadata"&&Ui!=="minzoom"&&Ui!=="maxzoom"&&(Ui.indexOf("paint.")===0?Ji(Wi[Ui],Vi[Ui],st,ki,Ui.slice(6),Zt.setPaintProperty):v(Wi[Ui],Vi[Ui])||st.push({command:Zt.setLayerProperty,args:[ki,Ui,Vi[Ui]]}))}else st.push({command:Zt.removeLayer,args:[ki]}),ln=ui[ui.lastIndexOf(ki)+1],st.push({command:Zt.addLayer,args:[Vi,ln]})}(Ce,X.layers,ne)}catch(pe){console.warn("Unable to compute style diff:",pe),ne=[{command:Zt.setStyle,args:[X]}]}return ne}(this.serialize(),d).filter(z=>!(z.command in ts));if(I.length===0)return!1;const D=I.filter(z=>!(z.command in po));if(D.length>0)throw new Error(`Unimplemented: ${D.map(z=>z.command).join(", ")}.`);return I.forEach(z=>{z.command!=="setTransition"&&this[z.command].apply(this,z.args)}),this.stylesheet=d,!0}addImage(d,I){if(this.getImage(d))return this.fire(new o.ErrorEvent(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,I),this._afterImageUpdated(d)}updateImage(d,I){this.imageManager.updateImage(d,I)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new o.ErrorEvent(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,I,D={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!I.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(I).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(o.validateStyle.source,`sources.${d}`,I,null,D))return;this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);const z=this.sourceCaches[d]=new Xe(d,I,this.dispatcher);z.style=this,z.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:z.serialize(),sourceId:d})),z.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===d)return this.fire(new o.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${D}" is using it.`)));const I=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],I.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),I.setEventedParent(null),I.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,I){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const D=this.sourceCaches[d].getSource();if(D.type!=="geojson")throw new Error(`geojsonSource.type is ${D.type}, which is !== 'geojson`);D.setData(I),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,I,D={}){this._checkLoaded();const z=d.id;if(this.getLayer(z))return void this.fire(new o.ErrorEvent(new Error(`Layer "${z}" already exists on this map.`)));let X;if(d.type==="custom"){if(zr(this,o.validateCustomStyleLayer(d)))return;X=o.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(z,d.source),d=o.clone$1(d),d=o.extend(d,{source:z})),this._validate(o.validateStyle.layer,`layers.${z}`,d,{arrayIndex:-1},D))return;X=o.createStyleLayer(d),this._validateLayer(X),X.setEventedParent(this,{layer:{id:z}}),this._serializedLayers[X.id]=X.serialize()}const ne=I?this._order.indexOf(I):this._order.length;if(I&&ne===-1)this.fire(new o.ErrorEvent(new Error(`Cannot add layer "${z}" before non-existing layer "${I}".`)));else{if(this._order.splice(ne,0,z),this._layerOrderChanged=!0,this._layers[z]=X,this._removedLayers[z]&&X.source&&X.type!=="custom"){const pe=this._removedLayers[z];delete this._removedLayers[z],pe.type!==X.type?this._updatedSources[X.source]="clear":(this._updatedSources[X.source]="reload",this.sourceCaches[X.source].pause())}this._updateLayer(X),X.onAdd&&X.onAdd(this.map)}}moveLayer(d,I){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new o.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===I)return;const D=this._order.indexOf(d);this._order.splice(D,1);const z=I?this._order.indexOf(I):this._order.length;I&&z===-1?this.fire(new o.ErrorEvent(new Error(`Cannot move layer "${d}" before non-existing layer "${I}".`))):(this._order.splice(z,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const I=this._layers[d];if(!I)return void this.fire(new o.ErrorEvent(new Error(`Cannot remove non-existing layer "${d}".`)));I.setEventedParent(null);const D=this._order.indexOf(d);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=I,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],I.onRemove&&I.onRemove(this.map)}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,I,D){this._checkLoaded();const z=this.getLayer(d);z?z.minzoom===I&&z.maxzoom===D||(I!=null&&(z.minzoom=I),D!=null&&(z.maxzoom=D),this._updateLayer(z)):this.fire(new o.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,I,D={}){this._checkLoaded();const z=this.getLayer(d);if(z){if(!v(z.filter,I))return I==null?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(o.validateStyle.filter,`layers.${z.id}.filter`,I,null,D)||(z.filter=o.clone$1(I),this._updateLayer(z)))}else this.fire(new o.ErrorEvent(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return o.clone$1(this.getLayer(d).filter)}setLayoutProperty(d,I,D,z={}){this._checkLoaded();const X=this.getLayer(d);X?v(X.getLayoutProperty(I),D)||(X.setLayoutProperty(I,D,z),this._updateLayer(X)):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,I){const D=this.getLayer(d);if(D)return D.getLayoutProperty(I);this.fire(new o.ErrorEvent(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,I,D,z={}){this._checkLoaded();const X=this.getLayer(d);X?v(X.getPaintProperty(I),D)||(X.setPaintProperty(I,D,z)&&this._updateLayer(X),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,I){return this.getLayer(d).getPaintProperty(I)}setFeatureState(d,I){this._checkLoaded();const D=d.source,z=d.sourceLayer,X=this.sourceCaches[D];if(X===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const ne=X.getSource().type;ne==="geojson"&&z?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ne!=="vector"||z?(d.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),X.setFeatureState(z,d.id,I)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,I){this._checkLoaded();const D=d.source,z=this.sourceCaches[D];if(z===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const X=z.getSource().type,ne=X==="vector"?d.sourceLayer:void 0;X!=="vector"||ne?I&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):z.removeFeatureState(ne,d.id,I):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const I=d.source,D=d.sourceLayer,z=this.sourceCaches[I];if(z!==void 0)return z.getSource().type!=="vector"||D?(d.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),z.getFeatureState(D,d.id)):void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,d=>d.serialize()),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(d){const I=ne=>this._layers[ne].type==="fill-extrusion",D={},z=[];for(let ne=this._order.length-1;ne>=0;ne--){const pe=this._order[ne];if(I(pe)){D[pe]=ne;for(const _e of d){const Ce=_e[pe];if(Ce)for(const Be of Ce)z.push(Be)}}}z.sort((ne,pe)=>pe.intersectionZ-ne.intersectionZ);const X=[];for(let ne=this._order.length-1;ne>=0;ne--){const pe=this._order[ne];if(I(pe))for(let _e=z.length-1;_e>=0;_e--){const Ce=z[_e].feature;if(D[Ce.layer.id]<ne)break;X.push(Ce),z.pop()}else for(const _e of d){const Ce=_e[pe];if(Ce)for(const Be of Ce)X.push(Be.feature)}}return X}queryRenderedFeatures(d,I,D){I&&I.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);const z={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ne of I.layers){const pe=this._layers[ne];if(!pe)return this.fire(new o.ErrorEvent(new Error(`The layer '${ne}' does not exist in the map's style and cannot be queried for features.`))),[];z[pe.source]=!0}}const X=[];I.availableImages=this._availableImages;for(const ne in this.sourceCaches)I.layers&&!z[ne]||X.push(de(this.sourceCaches[ne],this._layers,this._serializedLayers,d,I,D));return this.placement&&X.push(function(ne,pe,_e,Ce,Be,Je,st){const Mt={},Ct=Je.queryRenderedSymbols(Ce),Tt=[];for(const ei of Object.keys(Ct).map(Number))Tt.push(st[ei]);Tt.sort(ge);for(const ei of Tt){const ui=ei.featureIndex.lookupSymbolFeatures(Ct[ei.bucketInstanceId],pe,ei.bucketIndex,ei.sourceLayerIndex,Be.filter,Be.layers,Be.availableImages,ne);for(const vi in ui){const jt=Mt[vi]=Mt[vi]||[],Oi=ui[vi];Oi.sort((ki,Wi)=>{const Vi=ei.featureSortOrder;if(Vi){const ln=Vi.indexOf(ki.featureIndex);return Vi.indexOf(Wi.featureIndex)-ln}return Wi.featureIndex-ki.featureIndex});for(const ki of Oi)jt.push(ki)}}for(const ei in Mt)Mt[ei].forEach(ui=>{const vi=ui.feature,jt=_e[ne[ei].source].getFeatureState(vi.layer["source-layer"],vi.id);vi.source=vi.layer.source,vi.layer["source-layer"]&&(vi.sourceLayer=vi.layer["source-layer"]),vi.state=jt});return Mt}(this._layers,this._serializedLayers,this.sourceCaches,d,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(X)}querySourceFeatures(d,I){I&&I.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);const D=this.sourceCaches[d];return D?function(z,X){const ne=z.getRenderableIds().map(Ce=>z.getTileByID(Ce)),pe=[],_e={};for(let Ce=0;Ce<ne.length;Ce++){const Be=ne[Ce],Je=Be.tileID.canonical.key;_e[Je]||(_e[Je]=!0,Be.querySourceFeatures(pe,X))}return pe}(D,I):[]}addSourceType(d,I,D){return is.getSourceType(d)?D(new Error(`A source type called "${d}" already exists.`)):(is.setSourceType(d,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:I.workerSourceURL},D):D(null,null))}getLight(){return this.light.getLight()}setLight(d,I={}){this._checkLoaded();const D=this.light.getLight();let z=!1;for(const ne in d)if(!v(d[ne],D[ne])){z=!0;break}if(!z)return;const X={now:o.exported.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,I),this.light.updateTransitions(X)}_validate(d,I,D,z,X={}){return(!X||X.validate!==!1)&&zr(this,d.call(o.validateStyle,o.extend({key:I,style:this.serialize(),value:D,styleSpec:o.spec},z)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const I=this.sourceCaches[d];I.setEventedParent(null),I.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const I in this.sourceCaches)this.sourceCaches[I].update(d,this.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,I,D,z,X=!1){let ne=!1,pe=!1;const _e={};for(const Ce of this._order){const Be=this._layers[Ce];if(Be.type!=="symbol")continue;if(!_e[Be.source]){const st=this.sourceCaches[Be.source];_e[Be.source]=st.getRenderableIds(!0).map(Mt=>st.getTileByID(Mt)).sort((Mt,Ct)=>Ct.tileID.overscaledZ-Mt.tileID.overscaledZ||(Mt.tileID.isLessThan(Ct.tileID)?-1:1))}const Je=this.crossTileSymbolIndex.addLayer(Be,_e[Be.source],d.center.lng);ne=ne||Je}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((X=X||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),d.zoom))&&(this.pauseablePlacement=new Di(d,this.terrain,this._order,X,I,D,z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,_e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),pe=!0),ne&&this.pauseablePlacement.placement.setStale()),pe||ne)for(const Ce of this._order){const Be=this._layers[Ce];Be.type==="symbol"&&this.placement.updateLayerOpacities(Be,_e[Be.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,I,D){this.imageManager.getImages(I.icons,D),this._updateTilesForChangedImages();const z=this.sourceCaches[I.source];z&&z.setDependencies(I.tileID.key,I.type,I.icons)}getGlyphs(d,I,D){this.glyphManager.getGlyphs(I.stacks,D)}getResource(d,I,D){return o.makeRequest(I,D)}}is.getSourceType=function(B){return ce[B]},is.setSourceType=function(B,d){ce[B]=d},is.registerForPluginStateChange=o.registerForPluginStateChange;var al="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ro={prelude:Ft(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ft(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ft(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ft(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ft("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ft(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ft(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ft("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ft("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ft("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ft(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ft(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ft(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ft(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ft(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ft(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ft(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ft(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ft(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ft(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ft(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ft(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ft(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ft("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",al),terrainDepth:Ft("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",al),terrainCoords:Ft("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",al)};function Ft(B,d){const I=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,D=d.match(/attribute ([\w]+) ([\w]+)/g),z=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),X=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=X?X.concat(z):z,pe={};return{fragmentSource:B=B.replace(I,(_e,Ce,Be,Je,st)=>(pe[st]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_${st}
varying ${Be} ${Je} ${st};
#else
uniform ${Be} ${Je} u_${st};
#endif
`:`
#ifdef HAS_UNIFORM_u_${st}
    ${Be} ${Je} ${st} = u_${st};
#endif
`)),vertexSource:d=d.replace(I,(_e,Ce,Be,Je,st)=>{const Mt=Je==="float"?"vec2":"vec4",Ct=st.match(/color/)?"color":Mt;return pe[st]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_${st}
uniform lowp float u_${st}_t;
attribute ${Be} ${Mt} a_${st};
varying ${Be} ${Je} ${st};
#else
uniform ${Be} ${Je} u_${st};
#endif
`:Ct==="vec4"?`
#ifndef HAS_UNIFORM_u_${st}
    ${st} = a_${st};
#else
    ${Be} ${Je} ${st} = u_${st};
#endif
`:`
#ifndef HAS_UNIFORM_u_${st}
    ${st} = unpack_mix_${Ct}(a_${st}, u_${st}_t);
#else
    ${Be} ${Je} ${st} = u_${st};
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_${st}
uniform lowp float u_${st}_t;
attribute ${Be} ${Mt} a_${st};
#else
uniform ${Be} ${Je} u_${st};
#endif
`:Ct==="vec4"?`
#ifndef HAS_UNIFORM_u_${st}
    ${Be} ${Je} ${st} = a_${st};
#else
    ${Be} ${Je} ${st} = u_${st};
#endif
`:`
#ifndef HAS_UNIFORM_u_${st}
    ${Be} ${Je} ${st} = unpack_mix_${Ct}(a_${st}, u_${st}_t);
#else
    ${Be} ${Je} ${st} = u_${st};
#endif
`}),staticAttributes:D,staticUniforms:ne}}class tr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,I,D,z,X,ne,pe,_e,Ce){this.context=d;let Be=this.boundPaintVertexBuffers.length!==z.length;for(let Je=0;!Be&&Je<z.length;Je++)this.boundPaintVertexBuffers[Je]!==z[Je]&&(Be=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===D&&!Be&&this.boundIndexBuffer===X&&this.boundVertexOffset===ne&&this.boundDynamicVertexBuffer===pe&&this.boundDynamicVertexBuffer2===_e&&this.boundDynamicVertexBuffer3===Ce?(d.bindVertexArrayOES.set(this.vao),pe&&pe.bind(),X&&X.dynamicDraw&&X.bind(),_e&&_e.bind(),Ce&&Ce.bind()):this.freshBind(I,D,z,X,ne,pe,_e,Ce)}freshBind(d,I,D,z,X,ne,pe,_e){let Ce;const Be=d.numAttributes,Je=this.context,st=Je.gl;if(Je.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Je.extVertexArrayObject.createVertexArrayOES(),Je.bindVertexArrayOES.set(this.vao),Ce=0,this.boundProgram=d,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=D,this.boundIndexBuffer=z,this.boundVertexOffset=X,this.boundDynamicVertexBuffer=ne,this.boundDynamicVertexBuffer2=pe,this.boundDynamicVertexBuffer3=_e;else{Ce=Je.currentNumAttributes||0;for(let Mt=Be;Mt<Ce;Mt++)st.disableVertexAttribArray(Mt)}I.enableAttributes(st,d);for(const Mt of D)Mt.enableAttributes(st,d);ne&&ne.enableAttributes(st,d),pe&&pe.enableAttributes(st,d),_e&&_e.enableAttributes(st,d),I.bind(),I.setVertexAttribPointers(st,d,X);for(const Mt of D)Mt.bind(),Mt.setVertexAttribPointers(st,d,X);ne&&(ne.bind(),ne.setVertexAttribPointers(st,d,X)),z&&z.bind(),pe&&(pe.bind(),pe.setVertexAttribPointers(st,d,X)),_e&&(_e.bind(),_e.setVertexAttribPointers(st,d,X)),Je.currentNumAttributes=Be}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ur(B){const d=[];for(let I=0;I<B.length;I++){if(B[I]===null)continue;const D=B[I].split(" ");d.push(D.pop())}return d}class Or{constructor(d,I,D,z,X,ne,pe){const _e=d.gl;this.program=_e.createProgram();const Ce=ur(D.staticAttributes),Be=z?z.getBinderAttributes():[],Je=Ce.concat(Be),st=Ro.prelude.staticUniforms?ur(Ro.prelude.staticUniforms):[],Mt=D.staticUniforms?ur(D.staticUniforms):[],Ct=z?z.getBinderUniforms():[],Tt=st.concat(Mt).concat(Ct),ei=[];for(const Vi of Tt)ei.indexOf(Vi)<0&&ei.push(Vi);const ui=z?z.defines():[];ne&&ui.push("#define OVERDRAW_INSPECTOR;"),pe&&ui.push("#define TERRAIN3D;");const vi=ui.concat(Ro.prelude.fragmentSource,D.fragmentSource).join(`
`),jt=ui.concat(Ro.prelude.vertexSource,D.vertexSource).join(`
`),Oi=_e.createShader(_e.FRAGMENT_SHADER);if(_e.isContextLost())return void(this.failedToCreate=!0);_e.shaderSource(Oi,vi),_e.compileShader(Oi),_e.attachShader(this.program,Oi);const ki=_e.createShader(_e.VERTEX_SHADER);if(_e.isContextLost())return void(this.failedToCreate=!0);_e.shaderSource(ki,jt),_e.compileShader(ki),_e.attachShader(this.program,ki),this.attributes={};const Wi={};this.numAttributes=Je.length;for(let Vi=0;Vi<this.numAttributes;Vi++)Je[Vi]&&(_e.bindAttribLocation(this.program,Vi,Je[Vi]),this.attributes[Je[Vi]]=Vi);_e.linkProgram(this.program),_e.deleteShader(ki),_e.deleteShader(Oi);for(let Vi=0;Vi<ei.length;Vi++){const ln=ei[Vi];if(ln&&!Wi[ln]){const Ui=_e.getUniformLocation(this.program,ln);Ui&&(Wi[ln]=Ui)}}this.fixedUniforms=X(d,Wi),this.terrainUniforms=((Vi,ln)=>({u_depth:new o.Uniform1i(Vi,ln.u_depth),u_terrain:new o.Uniform1i(Vi,ln.u_terrain),u_terrain_dim:new o.Uniform1f(Vi,ln.u_terrain_dim),u_terrain_matrix:new o.UniformMatrix4f(Vi,ln.u_terrain_matrix),u_terrain_unpack:new o.Uniform4f(Vi,ln.u_terrain_unpack),u_terrain_offset:new o.Uniform1f(Vi,ln.u_terrain_offset),u_terrain_exaggeration:new o.Uniform1f(Vi,ln.u_terrain_exaggeration)}))(d,Wi),this.binderUniforms=z?z.getUniforms(d,Wi):[]}draw(d,I,D,z,X,ne,pe,_e,Ce,Be,Je,st,Mt,Ct,Tt,ei,ui,vi){const jt=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(D),d.setStencilMode(z),d.setColorMode(X),d.setCullFace(ne),_e){d.activeTexture.set(jt.TEXTURE2),jt.bindTexture(jt.TEXTURE_2D,_e.depthTexture),d.activeTexture.set(jt.TEXTURE3),jt.bindTexture(jt.TEXTURE_2D,_e.texture);for(const ki in this.terrainUniforms)this.terrainUniforms[ki].set(_e[ki])}for(const ki in this.fixedUniforms)this.fixedUniforms[ki].set(pe[ki]);Tt&&Tt.setUniforms(d,this.binderUniforms,Mt,{zoom:Ct});let Oi=0;switch(I){case jt.LINES:Oi=2;break;case jt.TRIANGLES:Oi=3;break;case jt.LINE_STRIP:Oi=1}for(const ki of st.get()){const Wi=ki.vaos||(ki.vaos={});(Wi[Ce]||(Wi[Ce]=new tr)).bind(d,this,Be,Tt?Tt.getPaintVertexBuffers():[],Je,ki.vertexOffset,ei,ui,vi),jt.drawElements(I,ki.primitiveLength*Oi,jt.UNSIGNED_SHORT,ki.primitiveOffset*Oi*2)}}}function Ko(B,d,I){const D=1/co(I,1,d.transform.tileZoom),z=Math.pow(2,I.tileID.overscaledZ),X=I.tileSize*Math.pow(2,d.transform.tileZoom)/z,ne=X*(I.tileID.canonical.x+I.tileID.wrap*z),pe=X*I.tileID.canonical.y;return{u_image:0,u_texsize:I.imageAtlasTexture.size,u_scale:[D,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,pe>>16],u_pixel_coord_lower:[65535&ne,65535&pe]}}const Bo=(B,d,I,D)=>{const z=d.style.light,X=z.properties.get("position"),ne=[X.x,X.y,X.z],pe=o.create$1();z.properties.get("anchor")==="viewport"&&o.fromRotation(pe,-d.transform.angle),o.transformMat3(ne,ne,pe);const _e=z.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[_e.r,_e.g,_e.b],u_vertical_gradient:+I,u_opacity:D}},La=(B,d,I,D,z,X,ne)=>o.extend(Bo(B,d,I,D),Ko(X,d,ne),{u_height_factor:-Math.pow(2,z.overscaledZ)/ne.tileSize/8}),rs=B=>({u_matrix:B}),qs=(B,d,I,D)=>o.extend(rs(B),Ko(I,d,D)),xs=(B,d)=>({u_matrix:B,u_world:d}),Pa=(B,d,I,D,z)=>o.extend(qs(B,d,I,D),{u_world:z}),Es=(B,d,I,D)=>{const z=B.transform;let X,ne;if(D.paint.get("circle-pitch-alignment")==="map"){const pe=co(I,1,z.zoom);X=!0,ne=[pe,pe]}else X=!1,ne=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(d.posMatrix,I,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+X,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:ne}},Ks=(B,d,I)=>{const D=co(I,1,d.zoom),z=Math.pow(2,d.zoom-I.tileID.overscaledZ),X=I.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[d.pixelsToGLUnits[0]/(D*z),d.pixelsToGLUnits[1]/(D*z)],u_overscale_factor:X}},Hs=(B,d,I=1)=>({u_matrix:B,u_color:d,u_overlay:0,u_overlay_scale:I}),Ma=B=>({u_matrix:B}),kl=(B,d,I,D)=>({u_matrix:B,u_extrude_scale:co(d,1,I),u_intensity:D});function fu(B,d){const I=Math.pow(2,d.canonical.z),D=d.canonical.y;return[new o.MercatorCoordinate(0,D/I).toLngLat().lat,new o.MercatorCoordinate(0,(D+1)/I).toLngLat().lat]}const Cl=(B,d,I,D)=>{const z=B.transform;return{u_matrix:ll(B,d,I,D),u_ratio:1/co(d,1,z.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},du=(B,d,I,D,z)=>o.extend(Cl(B,d,I,z),{u_image:0,u_image_height:D}),pa=(B,d,I,D,z)=>{const X=B.transform,ne=Io(d,X);return{u_matrix:ll(B,d,I,z),u_texsize:d.imageAtlasTexture.size,u_ratio:1/co(d,1,X.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[ne,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},ma=(B,d,I,D,z,X)=>{const ne=B.lineAtlas,pe=Io(d,B.transform),_e=I.layout.get("line-cap")==="round",Ce=ne.getDash(D.from,_e),Be=ne.getDash(D.to,_e),Je=Ce.width*z.fromScale,st=Be.width*z.toScale;return o.extend(Cl(B,d,I,X),{u_patternscale_a:[pe/Je,-Ce.height/2],u_patternscale_b:[pe/st,-Be.height/2],u_sdfgamma:ne.width/(256*Math.min(Je,st)*B.pixelRatio)/2,u_image:0,u_tex_y_a:Ce.y,u_tex_y_b:Be.y,u_mix:z.t})};function Io(B,d){return 1/co(B,1,d.tileZoom)}function ll(B,d,I,D){return B.translatePosMatrix(D?D.posMatrix:d.tileID.posMatrix,d,I.paint.get("line-translate"),I.paint.get("line-translate-anchor"))}const U=(B,d,I,D,z)=>{return{u_matrix:B,u_tl_parent:d,u_scale_parent:I,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(ne=z.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:(X=z.paint.get("raster-contrast"),X>0?1/(1-X):1+X),u_spin_weights:$(z.paint.get("raster-hue-rotate"))};var X,ne};function $(B){B*=Math.PI/180;const d=Math.sin(B),I=Math.cos(B);return[(2*I+1)/3,(-Math.sqrt(3)*d-I+1)/3,(Math.sqrt(3)*d-I+1)/3]}const ye=(B,d,I,D,z,X,ne,pe,_e,Ce)=>{const Be=z.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:Be.cameraToCenterDistance,u_pitch:Be.pitch/360*2*Math.PI,u_rotate_symbol:+I,u_aspect_ratio:Be.width/Be.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:X,u_label_plane_matrix:ne,u_coord_matrix:pe,u_is_text:+_e,u_pitch_with_map:+D,u_texsize:Ce,u_texture:0}},De=(B,d,I,D,z,X,ne,pe,_e,Ce,Be)=>{const Je=z.transform;return o.extend(ye(B,d,I,D,z,X,ne,pe,_e,Ce),{u_gamma_scale:D?Math.cos(Je._pitch)*Je.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:+Be})},ot=(B,d,I,D,z,X,ne,pe,_e,Ce)=>o.extend(De(B,d,I,D,z,X,ne,pe,!0,_e,!0),{u_texsize_icon:Ce,u_texture_icon:1}),It=(B,d,I)=>({u_matrix:B,u_opacity:d,u_color:I}),Nt=(B,d,I,D,z,X)=>o.extend(function(ne,pe,_e,Ce){const Be=_e.imageManager.getPattern(ne.from.toString()),Je=_e.imageManager.getPattern(ne.to.toString()),{width:st,height:Mt}=_e.imageManager.getPixelSize(),Ct=Math.pow(2,Ce.tileID.overscaledZ),Tt=Ce.tileSize*Math.pow(2,_e.transform.tileZoom)/Ct,ei=Tt*(Ce.tileID.canonical.x+Ce.tileID.wrap*Ct),ui=Tt*Ce.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Be.tl,u_pattern_br_a:Be.br,u_pattern_tl_b:Je.tl,u_pattern_br_b:Je.br,u_texsize:[st,Mt],u_mix:pe.t,u_pattern_size_a:Be.displaySize,u_pattern_size_b:Je.displaySize,u_scale_a:pe.fromScale,u_scale_b:pe.toScale,u_tile_units_to_pixels:1/co(Ce,1,_e.transform.tileZoom),u_pixel_coord_upper:[ei>>16,ui>>16],u_pixel_coord_lower:[65535&ei,65535&ui]}}(D,X,I,z),{u_matrix:B,u_opacity:d}),Bt={fillExtrusion:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_lightpos:new o.Uniform3f(B,d.u_lightpos),u_lightintensity:new o.Uniform1f(B,d.u_lightintensity),u_lightcolor:new o.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,d.u_vertical_gradient),u_opacity:new o.Uniform1f(B,d.u_opacity)}),fillExtrusionPattern:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_lightpos:new o.Uniform3f(B,d.u_lightpos),u_lightintensity:new o.Uniform1f(B,d.u_lightintensity),u_lightcolor:new o.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,d.u_vertical_gradient),u_height_factor:new o.Uniform1f(B,d.u_height_factor),u_image:new o.Uniform1i(B,d.u_image),u_texsize:new o.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,d.u_scale),u_fade:new o.Uniform1f(B,d.u_fade),u_opacity:new o.Uniform1f(B,d.u_opacity)}),fill:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix)}),fillPattern:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_image:new o.Uniform1i(B,d.u_image),u_texsize:new o.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,d.u_scale),u_fade:new o.Uniform1f(B,d.u_fade)}),fillOutline:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_world:new o.Uniform2f(B,d.u_world)}),fillOutlinePattern:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_world:new o.Uniform2f(B,d.u_world),u_image:new o.Uniform1i(B,d.u_image),u_texsize:new o.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,d.u_scale),u_fade:new o.Uniform1f(B,d.u_fade)}),circle:(B,d)=>({u_camera_to_center_distance:new o.Uniform1f(B,d.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(B,d.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(B,d.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(B,d.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(B,d.u_matrix)}),collisionBox:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_camera_to_center_distance:new o.Uniform1f(B,d.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(B,d.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(B,d.u_extrude_scale),u_overscale_factor:new o.Uniform1f(B,d.u_overscale_factor)}),collisionCircle:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_inv_matrix:new o.UniformMatrix4f(B,d.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(B,d.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(B,d.u_viewport_size)}),debug:(B,d)=>({u_color:new o.UniformColor(B,d.u_color),u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_overlay:new o.Uniform1i(B,d.u_overlay),u_overlay_scale:new o.Uniform1f(B,d.u_overlay_scale)}),clippingMask:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix)}),heatmap:(B,d)=>({u_extrude_scale:new o.Uniform1f(B,d.u_extrude_scale),u_intensity:new o.Uniform1f(B,d.u_intensity),u_matrix:new o.UniformMatrix4f(B,d.u_matrix)}),heatmapTexture:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_world:new o.Uniform2f(B,d.u_world),u_image:new o.Uniform1i(B,d.u_image),u_color_ramp:new o.Uniform1i(B,d.u_color_ramp),u_opacity:new o.Uniform1f(B,d.u_opacity)}),hillshade:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_image:new o.Uniform1i(B,d.u_image),u_latrange:new o.Uniform2f(B,d.u_latrange),u_light:new o.Uniform2f(B,d.u_light),u_shadow:new o.UniformColor(B,d.u_shadow),u_highlight:new o.UniformColor(B,d.u_highlight),u_accent:new o.UniformColor(B,d.u_accent)}),hillshadePrepare:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_image:new o.Uniform1i(B,d.u_image),u_dimension:new o.Uniform2f(B,d.u_dimension),u_zoom:new o.Uniform1f(B,d.u_zoom),u_unpack:new o.Uniform4f(B,d.u_unpack)}),line:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_ratio:new o.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,d.u_units_to_pixels)}),lineGradient:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_ratio:new o.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,d.u_units_to_pixels),u_image:new o.Uniform1i(B,d.u_image),u_image_height:new o.Uniform1f(B,d.u_image_height)}),linePattern:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_texsize:new o.Uniform2f(B,d.u_texsize),u_ratio:new o.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_image:new o.Uniform1i(B,d.u_image),u_units_to_pixels:new o.Uniform2f(B,d.u_units_to_pixels),u_scale:new o.Uniform3f(B,d.u_scale),u_fade:new o.Uniform1f(B,d.u_fade)}),lineSDF:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_ratio:new o.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,d.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(B,d.u_patternscale_a),u_patternscale_b:new o.Uniform2f(B,d.u_patternscale_b),u_sdfgamma:new o.Uniform1f(B,d.u_sdfgamma),u_image:new o.Uniform1i(B,d.u_image),u_tex_y_a:new o.Uniform1f(B,d.u_tex_y_a),u_tex_y_b:new o.Uniform1f(B,d.u_tex_y_b),u_mix:new o.Uniform1f(B,d.u_mix)}),raster:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_tl_parent:new o.Uniform2f(B,d.u_tl_parent),u_scale_parent:new o.Uniform1f(B,d.u_scale_parent),u_buffer_scale:new o.Uniform1f(B,d.u_buffer_scale),u_fade_t:new o.Uniform1f(B,d.u_fade_t),u_opacity:new o.Uniform1f(B,d.u_opacity),u_image0:new o.Uniform1i(B,d.u_image0),u_image1:new o.Uniform1i(B,d.u_image1),u_brightness_low:new o.Uniform1f(B,d.u_brightness_low),u_brightness_high:new o.Uniform1f(B,d.u_brightness_high),u_saturation_factor:new o.Uniform1f(B,d.u_saturation_factor),u_contrast_factor:new o.Uniform1f(B,d.u_contrast_factor),u_spin_weights:new o.Uniform3f(B,d.u_spin_weights)}),symbolIcon:(B,d)=>({u_is_size_zoom_constant:new o.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,d.u_size_t),u_size:new o.Uniform1f(B,d.u_size),u_camera_to_center_distance:new o.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,d.u_pitch),u_rotate_symbol:new o.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,d.u_fade_change),u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new o.Uniform1i(B,d.u_is_text),u_pitch_with_map:new o.Uniform1i(B,d.u_pitch_with_map),u_texsize:new o.Uniform2f(B,d.u_texsize),u_texture:new o.Uniform1i(B,d.u_texture)}),symbolSDF:(B,d)=>({u_is_size_zoom_constant:new o.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,d.u_size_t),u_size:new o.Uniform1f(B,d.u_size),u_camera_to_center_distance:new o.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,d.u_pitch),u_rotate_symbol:new o.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,d.u_fade_change),u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new o.Uniform1i(B,d.u_is_text),u_pitch_with_map:new o.Uniform1i(B,d.u_pitch_with_map),u_texsize:new o.Uniform2f(B,d.u_texsize),u_texture:new o.Uniform1i(B,d.u_texture),u_gamma_scale:new o.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,d.u_is_halo)}),symbolTextAndIcon:(B,d)=>({u_is_size_zoom_constant:new o.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,d.u_size_t),u_size:new o.Uniform1f(B,d.u_size),u_camera_to_center_distance:new o.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,d.u_pitch),u_rotate_symbol:new o.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,d.u_fade_change),u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new o.Uniform1i(B,d.u_is_text),u_pitch_with_map:new o.Uniform1i(B,d.u_pitch_with_map),u_texsize:new o.Uniform2f(B,d.u_texsize),u_texsize_icon:new o.Uniform2f(B,d.u_texsize_icon),u_texture:new o.Uniform1i(B,d.u_texture),u_texture_icon:new o.Uniform1i(B,d.u_texture_icon),u_gamma_scale:new o.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,d.u_is_halo)}),background:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_opacity:new o.Uniform1f(B,d.u_opacity),u_color:new o.UniformColor(B,d.u_color)}),backgroundPattern:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_opacity:new o.Uniform1f(B,d.u_opacity),u_image:new o.Uniform1i(B,d.u_image),u_pattern_tl_a:new o.Uniform2f(B,d.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(B,d.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(B,d.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(B,d.u_pattern_br_b),u_texsize:new o.Uniform2f(B,d.u_texsize),u_mix:new o.Uniform1f(B,d.u_mix),u_pattern_size_a:new o.Uniform2f(B,d.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(B,d.u_pattern_size_b),u_scale_a:new o.Uniform1f(B,d.u_scale_a),u_scale_b:new o.Uniform1f(B,d.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,d.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(B,d.u_tile_units_to_pixels)}),terrain:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_texture:new o.Uniform1i(B,d.u_texture)}),terrainDepth:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix)}),terrainCoords:(B,d)=>({u_matrix:new o.UniformMatrix4f(B,d.u_matrix),u_texture:new o.Uniform1i(B,d.u_texture),u_terrain_coords_id:new o.Uniform1f(B,d.u_terrain_coords_id)})};class yi{constructor(d,I,D){this.context=d;const z=d.gl;this.buffer=z.createBuffer(),this.dynamicDraw=Boolean(D),this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const I=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mi{constructor(d,I,D,z){this.length=I.length,this.attributes=D,this.itemSize=I.bytesPerElement,this.dynamicDraw=z,this.context=d;const X=d.gl;this.buffer=X.createBuffer(),d.bindVertexBuffer.set(this.buffer),X.bufferData(X.ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,I){for(let D=0;D<this.attributes.length;D++){const z=I.attributes[this.attributes[D].name];z!==void 0&&d.enableVertexAttribArray(z)}}setVertexAttribPointers(d,I,D){for(let z=0;z<this.attributes.length;z++){const X=this.attributes[z],ne=I.attributes[X.name];ne!==void 0&&d.vertexAttribPointer(ne,X.components,d[pi[X.type]],!1,this.itemSize,X.offset+this.itemSize*(D||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ri{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qi extends ri{getDefault(){return o.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class sn extends ri{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class Sn extends ri{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class dt extends ri{getDefault(){return[!0,!0,!0,!0]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class m extends ri{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Ri extends ri{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class h extends ri{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const I=this.current;(d.func!==I.func||d.ref!==I.ref||d.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class F extends ri{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class dn extends ri{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=d,this.dirty=!1}}class Zn extends ri{getDefault(){return[0,1]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class xo extends ri{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=d,this.dirty=!1}}class re extends ri{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Mr extends ri{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.BLEND):I.disable(I.BLEND),this.current=d,this.dirty=!1}}class ga extends ri{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ga extends ri{getDefault(){return o.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Oc extends ri{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class El extends ri{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=d,this.dirty=!1}}class Gs extends ri{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class ac extends ri{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class pu extends ri{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class hh extends ri{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class mu extends ri{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class fh extends ri{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class zu extends ri{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class gu extends ri{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindTexture(I.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class yu extends ri{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Wl extends ri{getDefault(){return null}set(d){const I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class _u extends ri{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Fn extends ri{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class Pn extends ri{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Nu extends ri{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class Wa extends ri{constructor(d,I){super(d),this.context=d,this.parent=I}getDefault(){return null}}class ya extends Wa{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Xl extends Wa{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class _a{constructor(d,I,D,z){this.context=d,this.width=I,this.height=D;const X=d.gl,ne=this.framebuffer=X.createFramebuffer();if(this.colorAttachment=new ya(d,ne),z&&(this.depthAttachment=new Xl(d,ne)),X.checkFramebufferStatus(X.FRAMEBUFFER)!==X.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,I=this.colorAttachment.get();if(I&&d.deleteTexture(I),this.depthAttachment){const D=this.depthAttachment.get();D&&d.deleteRenderbuffer(D)}d.deleteFramebuffer(this.framebuffer)}}class Ao{constructor(d,I,D){this.blendFunction=d,this.blendColor=I,this.mask=D}}Ao.Replace=[1,0],Ao.disabled=new Ao(Ao.Replace,o.Color.transparent,[!1,!1,!1,!1]),Ao.unblended=new Ao(Ao.Replace,o.Color.transparent,[!0,!0,!0,!0]),Ao.alphaBlended=new Ao([1,771],o.Color.transparent,[!0,!0,!0,!0]);class se{constructor(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qi(this),this.clearDepth=new sn(this),this.clearStencil=new Sn(this),this.colorMask=new dt(this),this.depthMask=new m(this),this.stencilMask=new Ri(this),this.stencilFunc=new h(this),this.stencilOp=new F(this),this.stencilTest=new dn(this),this.depthRange=new Zn(this),this.depthTest=new xo(this),this.depthFunc=new re(this),this.blend=new Mr(this),this.blendFunc=new ga(this),this.blendColor=new Ga(this),this.blendEquation=new Oc(this),this.cullFace=new El(this),this.cullFaceSide=new Gs(this),this.frontFace=new ac(this),this.program=new pu(this),this.activeTexture=new hh(this),this.viewport=new mu(this),this.bindFramebuffer=new fh(this),this.bindRenderbuffer=new zu(this),this.bindTexture=new gu(this),this.bindVertexBuffer=new yu(this),this.bindElementBuffer=new Wl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new _u(this),this.pixelStoreUnpack=new Fn(this),this.pixelStoreUnpackPremultiplyAlpha=new Pn(this),this.pixelStoreUnpackFlipY=new Nu(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,I){return new yi(this,d,I)}createVertexBuffer(d,I,D){return new mi(this,d,I,D)}createRenderbuffer(d,I,D){const z=this.gl,X=z.createRenderbuffer();return this.bindRenderbuffer.set(X),z.renderbufferStorage(z.RENDERBUFFER,d,I,D),this.bindRenderbuffer.set(null),X}createFramebuffer(d,I,D){return new _a(this,d,I,D)}clear({color:d,depth:I}){const D=this.gl;let z=0;d&&(z|=D.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),I!==void 0&&(z|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),D.clear(z)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){v(d.blendFunction,Ao.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class je{constructor(d,I,D){this.func=d,this.mask=I,this.range=D}}je.ReadOnly=!1,je.ReadWrite=!0,je.disabled=new je(519,je.ReadOnly,[0,1]);const kt=7680;class Wt{constructor(d,I,D,z,X,ne){this.test=d,this.ref=I,this.mask=D,this.fail=z,this.depthFail=X,this.pass=ne}}Wt.disabled=new Wt({func:519,mask:0},0,0,kt,kt,kt);class li{constructor(d,I,D){this.enable=d,this.mode=I,this.frontFace=D}}let Yi;function cn(B,d,I,D,z,X,ne){const pe=B.context,_e=pe.gl,Ce=B.useProgram("collisionBox"),Be=[];let Je=0,st=0;for(let jt=0;jt<D.length;jt++){const Oi=D[jt],ki=d.getTile(Oi),Wi=ki.getBucket(I);if(!Wi)continue;let Vi=Oi.posMatrix;z[0]===0&&z[1]===0||(Vi=B.translatePosMatrix(Oi.posMatrix,ki,z,X));const ln=ne?Wi.textCollisionBox:Wi.iconCollisionBox,Ui=Wi.collisionCircleArray;if(Ui.length>0){const Mn=o.create(),_n=Vi;o.mul(Mn,Wi.placementInvProjMatrix,B.transform.glCoordMatrix),o.mul(Mn,Mn,Wi.placementViewportMatrix),Be.push({circleArray:Ui,circleOffset:st,transform:_n,invTransform:Mn,coord:Oi}),Je+=Ui.length/4,st=Je}ln&&Ce.draw(pe,_e.LINES,je.disabled,Wt.disabled,B.colorModeForRenderPass(),li.disabled,Ks(Vi,B.transform,ki),B.style.terrain&&B.style.terrain.getTerrainData(Oi),I.id,ln.layoutVertexBuffer,ln.indexBuffer,ln.segments,null,B.transform.zoom,null,null,ln.collisionVertexBuffer)}if(!ne||!Be.length)return;const Mt=B.useProgram("collisionCircle"),Ct=new o.CollisionCircleLayoutArray;Ct.resize(4*Je),Ct._trim();let Tt=0;for(const jt of Be)for(let Oi=0;Oi<jt.circleArray.length/4;Oi++){const ki=4*Oi,Wi=jt.circleArray[ki+0],Vi=jt.circleArray[ki+1],ln=jt.circleArray[ki+2],Ui=jt.circleArray[ki+3];Ct.emplace(Tt++,Wi,Vi,ln,Ui,0),Ct.emplace(Tt++,Wi,Vi,ln,Ui,1),Ct.emplace(Tt++,Wi,Vi,ln,Ui,2),Ct.emplace(Tt++,Wi,Vi,ln,Ui,3)}(!Yi||Yi.length<2*Je)&&(Yi=function(jt){const Oi=2*jt,ki=new o.QuadTriangleArray;ki.resize(Oi),ki._trim();for(let Wi=0;Wi<Oi;Wi++){const Vi=6*Wi;ki.uint16[Vi+0]=4*Wi+0,ki.uint16[Vi+1]=4*Wi+1,ki.uint16[Vi+2]=4*Wi+2,ki.uint16[Vi+3]=4*Wi+2,ki.uint16[Vi+4]=4*Wi+3,ki.uint16[Vi+5]=4*Wi+0}return ki}(Je));const ei=pe.createIndexBuffer(Yi,!0),ui=pe.createVertexBuffer(Ct,o.collisionCircleLayout.members,!0);for(const jt of Be){const Oi={u_matrix:jt.transform,u_inv_matrix:jt.invTransform,u_camera_to_center_distance:(vi=B.transform).cameraToCenterDistance,u_viewport_size:[vi.width,vi.height]};Mt.draw(pe,_e.TRIANGLES,je.disabled,Wt.disabled,B.colorModeForRenderPass(),li.disabled,Oi,B.style.terrain&&B.style.terrain.getTerrainData(jt.coord),I.id,ui,ei,o.SegmentVector.simpleSegment(0,2*jt.circleOffset,jt.circleArray.length,jt.circleArray.length/2),null,B.transform.zoom,null,null,null)}var vi;ui.destroy(),ei.destroy()}li.disabled=new li(!1,1029,2305),li.backCCW=new li(!0,1029,2305);const Xn=o.identity(new Float32Array(16));function wr(B,d,I,D,z,X){const{horizontalAlign:ne,verticalAlign:pe}=o.getAnchorAlignment(B),_e=-(ne-.5)*d,Ce=-(pe-.5)*I,Be=o.evaluateVariableOffset(B,D);return new o.pointGeometry((_e/z+Be[0])*X,(Ce/z+Be[1])*X)}function Fr(B,d,I,D,z,X,ne,pe,_e,Ce,Be){const Je=B.text.placedSymbolArray,st=B.text.dynamicLayoutVertexArray,Mt=B.icon.dynamicLayoutVertexArray,Ct={};st.clear();for(let Tt=0;Tt<Je.length;Tt++){const ei=Je.get(Tt),ui=B.allowVerticalPlacement&&!ei.placedOrientation,vi=ei.hidden||!ei.crossTileID||ui?null:D[ei.crossTileID];if(vi){const jt=new o.pointGeometry(ei.anchorX,ei.anchorY),Oi=Xt(jt,I?ne:X,Be),ki=fi(z.cameraToCenterDistance,Oi.signedDistanceFromCamera);let Wi=o.evaluateSizeForFeature(B.textSizeData,_e,ei)*ki/o.ONE_EM;I&&(Wi*=B.tilePixelRatio/pe);const{width:Vi,height:ln,anchor:Ui,textOffset:Mn,textBoxScale:_n}=vi,jn=wr(Ui,Vi,ln,Mn,_n,Wi),Cr=I?Xt(jt.add(jn),X,Be).point:Oi.point.add(d?jn.rotate(-z.angle):jn),Lr=B.allowVerticalPlacement&&ei.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let j=0;j<ei.numGlyphs;j++)o.addDynamicAttributes(st,Cr,Lr);Ce&&ei.associatedIconIndex>=0&&(Ct[ei.associatedIconIndex]={shiftedAnchor:Cr,angle:Lr})}else ar(ei.numGlyphs,st)}if(Ce){Mt.clear();const Tt=B.icon.placedSymbolArray;for(let ei=0;ei<Tt.length;ei++){const ui=Tt.get(ei);if(ui.hidden)ar(ui.numGlyphs,Mt);else{const vi=Ct[ei];if(vi)for(let jt=0;jt<ui.numGlyphs;jt++)o.addDynamicAttributes(Mt,vi.shiftedAnchor,vi.angle);else ar(ui.numGlyphs,Mt)}}B.icon.dynamicLayoutVertexBuffer.updateData(Mt)}B.text.dynamicLayoutVertexBuffer.updateData(st)}function Gr(B,d,I){return I.iconsInText&&d?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function eo(B,d,I,D,z,X,ne,pe,_e,Ce,Be,Je){const st=B.context,Mt=st.gl,Ct=B.transform,Tt=pe==="map",ei=_e==="map",ui=pe!=="viewport"&&I.layout.get("symbol-placement")!=="point",vi=Tt&&!ei&&!ui,jt=!I.layout.get("symbol-sort-key").isConstant();let Oi=!1;const ki=B.depthModeForSublayer(0,je.ReadOnly),Wi=I.layout.get("text-variable-anchor"),Vi=[];for(const ln of D){const Ui=d.getTile(ln),Mn=Ui.getBucket(I);if(!Mn)continue;const _n=z?Mn.text:Mn.icon;if(!_n||!_n.segments.get().length)continue;const jn=_n.programConfigurations.get(I.id),Cr=z||Mn.sdfIcons,Lr=z?Mn.textSizeData:Mn.iconSizeData,j=ei||Ct.pitch!==0,K=B.useProgram(Gr(Cr,z,Mn),jn),ue=o.evaluateSizeForZoom(Lr,Ct.zoom),ve=B.style.terrain&&B.style.terrain.getTerrainData(ln);let Ne,Ke,it,at,gt=[0,0],Et=null;if(z){if(Ke=Ui.glyphAtlasTexture,it=Mt.LINEAR,Ne=Ui.glyphAtlasTexture.size,Mn.iconsInText){gt=Ui.imageAtlasTexture.size,Et=Ui.imageAtlasTexture;const Tn=Lr.kind==="composite"||Lr.kind==="camera";at=j||B.options.rotating||B.options.zooming||Tn?Mt.LINEAR:Mt.NEAREST}}else{const Tn=I.layout.get("icon-size").constantOr(0)!==1||Mn.iconsNeedLinear;Ke=Ui.imageAtlasTexture,it=Cr||B.options.rotating||B.options.zooming||Tn||j?Mt.LINEAR:Mt.NEAREST,Ne=Ui.imageAtlasTexture.size}const ii=co(Ui,1,B.transform.zoom),bi=et(ln.posMatrix,ei,Tt,B.transform,ii),_i=bt(ln.posMatrix,ei,Tt,B.transform,ii),ci=Wi&&Mn.hasTextData(),rn=I.layout.get("icon-text-fit")!=="none"&&ci&&Mn.hasIconData();if(ui){const Tn=B.style.terrain?(xr,Ln)=>B.style.terrain.getElevation(ln,xr,Ln):null,An=I.layout.get("text-rotation-alignment")==="map";qn(Mn,ln.posMatrix,B,z,bi,_i,ei,Ce,An,Tn)}const Bi=B.translatePosMatrix(ln.posMatrix,Ui,X,ne),qt=ui||z&&Wi||rn?Xn:bi,Kt=B.translatePosMatrix(_i,Ui,X,ne,!0),Zi=Cr&&I.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qi;Qi=Cr?Mn.iconsInText?ot(Lr.kind,ue,vi,ei,B,Bi,qt,Kt,Ne,gt):De(Lr.kind,ue,vi,ei,B,Bi,qt,Kt,z,Ne,!0):ye(Lr.kind,ue,vi,ei,B,Bi,qt,Kt,z,Ne);const Hi={program:K,buffers:_n,uniformValues:Qi,atlasTexture:Ke,atlasTextureIcon:Et,atlasInterpolation:it,atlasInterpolationIcon:at,isSDF:Cr,hasHalo:Zi};if(jt&&Mn.canOverlap){Oi=!0;const Tn=_n.segments.get();for(const An of Tn)Vi.push({segments:new o.SegmentVector([An]),sortKey:An.sortKey,state:Hi,terrainData:ve})}else Vi.push({segments:_n.segments,sortKey:0,state:Hi,terrainData:ve})}Oi&&Vi.sort((ln,Ui)=>ln.sortKey-Ui.sortKey);for(const ln of Vi){const Ui=ln.state;if(st.activeTexture.set(Mt.TEXTURE0),Ui.atlasTexture.bind(Ui.atlasInterpolation,Mt.CLAMP_TO_EDGE),Ui.atlasTextureIcon&&(st.activeTexture.set(Mt.TEXTURE1),Ui.atlasTextureIcon&&Ui.atlasTextureIcon.bind(Ui.atlasInterpolationIcon,Mt.CLAMP_TO_EDGE)),Ui.isSDF){const Mn=Ui.uniformValues;Ui.hasHalo&&(Mn.u_is_halo=1,zo(Ui.buffers,ln.segments,I,B,Ui.program,ki,Be,Je,Mn,ln.terrainData)),Mn.u_is_halo=0}zo(Ui.buffers,ln.segments,I,B,Ui.program,ki,Be,Je,Ui.uniformValues,ln.terrainData)}}function zo(B,d,I,D,z,X,ne,pe,_e,Ce){const Be=D.context;z.draw(Be,Be.gl.TRIANGLES,X,ne,pe,li.disabled,_e,Ce,I.id,B.layoutVertexBuffer,B.indexBuffer,d,I.paint,D.transform.zoom,B.programConfigurations.get(I.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function Go(B,d,I,D,z,X,ne){const pe=B.context.gl,_e=I.paint.get("fill-pattern"),Ce=_e&&_e.constantOr(1),Be=I.getCrossfadeParameters();let Je,st,Mt,Ct,Tt;ne?(st=Ce&&!I.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Je=pe.LINES):(st=Ce?"fillPattern":"fill",Je=pe.TRIANGLES);for(const ei of D){const ui=d.getTile(ei);if(Ce&&!ui.patternsLoaded())continue;const vi=ui.getBucket(I);if(!vi)continue;const jt=vi.programConfigurations.get(I.id),Oi=B.useProgram(st,jt),ki=B.style.terrain&&B.style.terrain.getTerrainData(ei);Ce&&(B.context.activeTexture.set(pe.TEXTURE0),ui.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),jt.updatePaintBuffers(Be));const Wi=_e.constantOr(null);if(Wi&&ui.imageAtlas){const Ui=ui.imageAtlas,Mn=Ui.patternPositions[Wi.to.toString()],_n=Ui.patternPositions[Wi.from.toString()];Mn&&_n&&jt.setConstantPatternPositions(Mn,_n)}const Vi=ki?ei:null,ln=B.translatePosMatrix(Vi?Vi.posMatrix:ei.posMatrix,ui,I.paint.get("fill-translate"),I.paint.get("fill-translate-anchor"));if(ne){Ct=vi.indexBuffer2,Tt=vi.segments2;const Ui=[pe.drawingBufferWidth,pe.drawingBufferHeight];Mt=st==="fillOutlinePattern"&&Ce?Pa(ln,B,Be,ui,Ui):xs(ln,Ui)}else Ct=vi.indexBuffer,Tt=vi.segments,Mt=Ce?qs(ln,B,Be,ui):rs(ln);Oi.draw(B.context,Je,z,B.stencilModeForClipping(ei),X,li.disabled,Mt,ki,I.id,vi.layoutVertexBuffer,Ct,Tt,I.paint,B.transform.zoom,jt)}}function Yo(B,d,I,D,z,X,ne){const pe=B.context,_e=pe.gl,Ce=I.paint.get("fill-extrusion-pattern"),Be=Ce.constantOr(1),Je=I.getCrossfadeParameters(),st=I.paint.get("fill-extrusion-opacity");for(const Mt of D){const Ct=d.getTile(Mt),Tt=Ct.getBucket(I);if(!Tt)continue;const ei=B.style.terrain&&B.style.terrain.getTerrainData(Mt),ui=Tt.programConfigurations.get(I.id),vi=B.useProgram(Be?"fillExtrusionPattern":"fillExtrusion",ui);Be&&(B.context.activeTexture.set(_e.TEXTURE0),Ct.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),ui.updatePaintBuffers(Je));const jt=Ce.constantOr(null);if(jt&&Ct.imageAtlas){const Vi=Ct.imageAtlas,ln=Vi.patternPositions[jt.to.toString()],Ui=Vi.patternPositions[jt.from.toString()];ln&&Ui&&ui.setConstantPatternPositions(ln,Ui)}const Oi=B.translatePosMatrix(Mt.posMatrix,Ct,I.paint.get("fill-extrusion-translate"),I.paint.get("fill-extrusion-translate-anchor")),ki=I.paint.get("fill-extrusion-vertical-gradient"),Wi=Be?La(Oi,B,ki,st,Mt,Je,Ct):Bo(Oi,B,ki,st);vi.draw(pe,pe.gl.TRIANGLES,z,X,ne,li.backCCW,Wi,ei,I.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,I.paint,B.transform.zoom,ui,B.style.terrain&&Tt.centroidVertexBuffer)}}function Is(B,d,I,D,z,X,ne){const pe=B.context,_e=pe.gl,Ce=I.fbo;if(!Ce)return;const Be=B.useProgram("hillshade"),Je=B.style.terrain&&B.style.terrain.getTerrainData(d);pe.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Ce.colorAttachment.get()),Be.draw(pe,_e.TRIANGLES,z,X,ne,li.disabled,((st,Mt,Ct,Tt)=>{const ei=Ct.paint.get("hillshade-shadow-color"),ui=Ct.paint.get("hillshade-highlight-color"),vi=Ct.paint.get("hillshade-accent-color");let jt=Ct.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ct.paint.get("hillshade-illumination-anchor")==="viewport"&&(jt-=st.transform.angle);const Oi=!st.options.moving;return{u_matrix:Tt?Tt.posMatrix:st.transform.calculatePosMatrix(Mt.tileID.toUnwrapped(),Oi),u_image:0,u_latrange:fu(0,Mt.tileID),u_light:[Ct.paint.get("hillshade-exaggeration"),jt],u_shadow:ei,u_highlight:ui,u_accent:vi}})(B,I,D,Je?d:null),Je,D.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}function ms(B,d,I,D,z,X){const ne=B.context,pe=ne.gl,_e=d.dem;if(_e&&_e.data){const Ce=_e.dim,Be=_e.stride,Je=_e.getPixels();if(ne.activeTexture.set(pe.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||B.getTileTexture(Be),d.demTexture){const Mt=d.demTexture;Mt.update(Je,{premultiply:!1}),Mt.bind(pe.NEAREST,pe.CLAMP_TO_EDGE)}else d.demTexture=new T(ne,Je,pe.RGBA,{premultiply:!1}),d.demTexture.bind(pe.NEAREST,pe.CLAMP_TO_EDGE);ne.activeTexture.set(pe.TEXTURE0);let st=d.fbo;if(!st){const Mt=new T(ne,{width:Ce,height:Ce,data:null},pe.RGBA);Mt.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),st=d.fbo=ne.createFramebuffer(Ce,Ce,!0),st.colorAttachment.set(Mt.texture)}ne.bindFramebuffer.set(st.framebuffer),ne.viewport.set([0,0,Ce,Ce]),B.useProgram("hillshadePrepare").draw(ne,pe.TRIANGLES,D,z,X,li.disabled,((Mt,Ct)=>{const Tt=Ct.stride,ei=o.create();return o.ortho(ei,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(ei,ei,[0,-o.EXTENT,0]),{u_matrix:ei,u_image:1,u_dimension:[Tt,Tt],u_zoom:Mt.overscaledZ,u_unpack:Ct.getUnpackVector()}})(d.tileID,_e),null,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function Rr(B,d,I,D,z,X){const ne=D.paint.get("raster-fade-duration");if(!X&&ne>0){const pe=o.exported.now(),_e=(pe-B.timeAdded)/ne,Ce=d?(pe-d.timeAdded)/ne:-1,Be=I.getSource(),Je=z.coveringZoomLevel({tileSize:Be.tileSize,roundZoom:Be.roundZoom}),st=!d||Math.abs(d.tileID.overscaledZ-Je)>Math.abs(B.tileID.overscaledZ-Je),Mt=st&&B.refreshedUponExpiration?1:o.clamp(st?_e:1-Ce,0,1);return B.refreshedUponExpiration&&_e>=1&&(B.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Mt}:{opacity:Mt,mix:0}}return{opacity:1,mix:0}}const Ts=new o.Color(1,0,0,1),As=new o.Color(0,1,0,1),Yl=new o.Color(0,0,1,1),Il=new o.Color(1,0,1,1),ju=new o.Color(0,1,1,1);function Da(B,d,I,D){ul(B,0,d+I/2,B.transform.width,I,D)}function Tl(B,d,I,D){ul(B,d-I/2,0,I,B.transform.height,D)}function ul(B,d,I,D,z,X){const ne=B.context,pe=ne.gl;pe.enable(pe.SCISSOR_TEST),pe.scissor(d*B.pixelRatio,I*B.pixelRatio,D*B.pixelRatio,z*B.pixelRatio),ne.clear({color:X}),pe.disable(pe.SCISSOR_TEST)}function Uu(B,d,I){const D=B.context,z=D.gl,X=I.posMatrix,ne=B.useProgram("debug"),pe=je.disabled,_e=Wt.disabled,Ce=B.colorModeForRenderPass(),Be="$debug",Je=B.style.terrain&&B.style.terrain.getTerrainData(I);D.activeTexture.set(z.TEXTURE0),B.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE);const st=d.getTileByID(I.key).latestRawTileData,Mt=Math.floor((st&&st.byteLength||0)/1024),Ct=d.getTile(I).tileSize,Tt=512/Math.min(Ct,512)*(I.overscaledZ/B.transform.zoom)*.5;let ei=I.canonical.toString();I.overscaledZ!==I.canonical.z&&(ei+=` => ${I.overscaledZ}`),function(ui,vi){ui.initDebugOverlayCanvas();const jt=ui.debugOverlayCanvas,Oi=ui.context.gl,ki=ui.debugOverlayCanvas.getContext("2d");ki.clearRect(0,0,jt.width,jt.height),ki.shadowColor="white",ki.shadowBlur=2,ki.lineWidth=1.5,ki.strokeStyle="white",ki.textBaseline="top",ki.font="bold 36px Open Sans, sans-serif",ki.fillText(vi,5,5),ki.strokeText(vi,5,5),ui.debugOverlayTexture.update(jt),ui.debugOverlayTexture.bind(Oi.LINEAR,Oi.CLAMP_TO_EDGE)}(B,`${ei} ${Mt}kB`),ne.draw(D,z.TRIANGLES,pe,_e,Ao.alphaBlended,li.disabled,Hs(X,o.Color.transparent,Tt),null,Be,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),ne.draw(D,z.LINE_STRIP,pe,_e,Ce,li.disabled,Hs(X,o.Color.red),Je,Be,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function Rs(B,d,I){const D=B.context,z=D.gl,X=B.colorModeForRenderPass(),ne=new je(z.LEQUAL,je.ReadWrite,B.depthRangeFor3D),pe=B.useProgram("terrain"),_e=d.getTerrainMesh(),Ce=d.getTerrainData(I.tileID);D.bindFramebuffer.set(null),D.viewport.set([0,0,B.width,B.height]),D.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,d.getRTTFramebuffer().colorAttachment.get());const Be=B.transform.calculatePosMatrix(I.tileID.toUnwrapped());pe.draw(D,z.TRIANGLES,ne,Wt.disabled,X,li.backCCW,{u_matrix:Be,u_texture:0},Ce,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}function vu(B,d,I,D){const z=B.context,X=I.tileSize*d.qualityFactor;I.textures[D]||(I.textures[D]=B.getTileTexture(X)||new T(z,{width:X,height:X,data:null},z.gl.RGBA),I.textures[D].bind(z.gl.LINEAR,z.gl.CLAMP_TO_EDGE),D===0&&d.sourceCache.renderHistory.unshift(I.tileID.key));const ne=d.getRTTFramebuffer();ne.colorAttachment.set(I.textures[D].texture),z.bindFramebuffer.set(ne.framebuffer),z.viewport.set([0,0,X,X])}class Zl{constructor(d){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=d,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=d.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const d=this.painter.style,I=d.terrain;for(const D in d.sourceCaches){this._coordsDescendingInv[D]={};const z=d.sourceCaches[D].getVisibleCoordinates();for(const X of z){const ne=I.sourceCache.getTerrainCoords(X);for(const pe in ne)this._coordsDescendingInv[D][pe]||(this._coordsDescendingInv[D][pe]=[]),this._coordsDescendingInv[D][pe].push(ne[pe])}}for(const D of d._order){const z=d._layers[D],X=z.source;if(this._renderToTexture[z.type]&&!this._coordsDescendingInvStr[X]){this._coordsDescendingInvStr[X]={};for(const ne in this._coordsDescendingInv[X])this._coordsDescendingInvStr[X][ne]=this._coordsDescendingInv[X][ne].map(pe=>pe.key).sort().join()}}return this._renderableTiles.forEach(D=>{for(const z in this._coordsDescendingInvStr){const X=this._coordsDescendingInvStr[z][D.tileID.key];X&&X!==D.textureCoords[z]&&D.clearTextures(this.painter),I.needsRerender(z,D.tileID)&&D.clearTextures(this.painter)}this._rerender[D.tileID.key]=!D.textures.length}),I.clearRerenderCache(),I.sourceCache.removeOutdated(this.painter),this}renderLayer(d){const I=d.type,D=this.painter,z=D.style._order,X=D.currentLayer,ne=X+1===z.length;if(this._renderToTexture[I]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=I,this._stacks[this._stacks.length-1].push(z[X]),!ne))return!0;if(this._renderToTexture[this._prevType]||I==="hillshade"||this._renderToTexture[I]&&ne){this._prevType=I;const pe=this._stacks.length-1,_e=this._stacks[pe]||[];for(const Ce of this._renderableTiles){if(vu(D,D.style.terrain,Ce,pe),this._rerender[Ce.tileID.key]){D.context.clear({color:o.Color.transparent});for(let Be=0;Be<_e.length;Be++){const Je=D.style._layers[_e[Be]],st=Je.source?this._coordsDescendingInv[Je.source][Ce.tileID.key]:[Ce.tileID];D._renderTileClippingMasks(Je,st),D.renderLayer(D,D.style.sourceCaches[Je.source],Je,st),Je.source&&(Ce.textureCoords[Je.source]=this._coordsDescendingInvStr[Je.source][Ce.tileID.key])}}Rs(D,D.style.terrain,Ce)}if(I==="hillshade"){this._stacks.push([z[X]]);for(const Ce of this._renderableTiles){const Be=this._coordsDescendingInv[d.source][Ce.tileID.key];vu(D,D.style.terrain,Ce,this._stacks.length-1),D.context.clear({color:o.Color.transparent}),D._renderTileClippingMasks(d,Be),D.renderLayer(D,D.style.sourceCaches[d.source],d,Be),Rs(D,D.style.terrain,Ce)}return!0}return this._renderToTexture[I]}return!1}}const Xa={symbol:function(B,d,I,D,z){if(B.renderPass!=="translucent")return;const X=Wt.disabled,ne=B.colorModeForRenderPass();I.layout.get("text-variable-anchor")&&function(pe,_e,Ce,Be,Je,st,Mt){const Ct=_e.transform,Tt=Je==="map",ei=st==="map";for(const ui of pe){const vi=Be.getTile(ui),jt=vi.getBucket(Ce);if(!jt||!jt.text||!jt.text.segments.get().length)continue;const Oi=o.evaluateSizeForZoom(jt.textSizeData,Ct.zoom),ki=co(vi,1,_e.transform.zoom),Wi=et(ui.posMatrix,ei,Tt,_e.transform,ki),Vi=Ce.layout.get("icon-text-fit")!=="none"&&jt.hasIconData();if(Oi){const ln=Math.pow(2,Ct.zoom-vi.tileID.overscaledZ);Fr(jt,Tt,ei,Mt,Ct,Wi,ui.posMatrix,ln,Oi,Vi,_e.style.terrain?(Ui,Mn)=>_e.style.terrain.getElevation(ui,Ui,Mn):null)}}}(D,B,I,d,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),z),I.paint.get("icon-opacity").constantOr(1)!==0&&eo(B,d,I,D,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),X,ne),I.paint.get("text-opacity").constantOr(1)!==0&&eo(B,d,I,D,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),X,ne),d.map.showCollisionBoxes&&(cn(B,d,I,D,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),cn(B,d,I,D,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))},circle:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("circle-opacity"),X=I.paint.get("circle-stroke-width"),ne=I.paint.get("circle-stroke-opacity"),pe=!I.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(X.constantOr(1)===0||ne.constantOr(1)===0))return;const _e=B.context,Ce=_e.gl,Be=B.depthModeForSublayer(0,je.ReadOnly),Je=Wt.disabled,st=B.colorModeForRenderPass(),Mt=[];for(let Ct=0;Ct<D.length;Ct++){const Tt=D[Ct],ei=d.getTile(Tt),ui=ei.getBucket(I);if(!ui)continue;const vi=ui.programConfigurations.get(I.id),jt=B.useProgram("circle",vi),Oi=ui.layoutVertexBuffer,ki=ui.indexBuffer,Wi=B.style.terrain&&B.style.terrain.getTerrainData(Tt),Vi={programConfiguration:vi,program:jt,layoutVertexBuffer:Oi,indexBuffer:ki,uniformValues:Es(B,Tt,ei,I),terrainData:Wi};if(pe){const ln=ui.segments.get();for(const Ui of ln)Mt.push({segments:new o.SegmentVector([Ui]),sortKey:Ui.sortKey,state:Vi})}else Mt.push({segments:ui.segments,sortKey:0,state:Vi})}pe&&Mt.sort((Ct,Tt)=>Ct.sortKey-Tt.sortKey);for(const Ct of Mt){const{programConfiguration:Tt,program:ei,layoutVertexBuffer:ui,indexBuffer:vi,uniformValues:jt,terrainData:Oi}=Ct.state;ei.draw(_e,Ce.TRIANGLES,Be,Je,st,li.disabled,jt,Oi,I.id,ui,vi,Ct.segments,I.paint,B.transform.zoom,Tt)}},heatmap:function(B,d,I,D){if(I.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const z=B.context,X=z.gl,ne=Wt.disabled,pe=new Ao([X.ONE,X.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(_e,Ce,Be){const Je=_e.gl;_e.activeTexture.set(Je.TEXTURE1),_e.viewport.set([0,0,Ce.width/4,Ce.height/4]);let st=Be.heatmapFbo;if(st)Je.bindTexture(Je.TEXTURE_2D,st.colorAttachment.get()),_e.bindFramebuffer.set(st.framebuffer);else{const Mt=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,Mt),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),st=Be.heatmapFbo=_e.createFramebuffer(Ce.width/4,Ce.height/4,!1),function(Ct,Tt,ei,ui){const vi=Ct.gl;vi.texImage2D(vi.TEXTURE_2D,0,vi.RGBA,Tt.width/4,Tt.height/4,0,vi.RGBA,Ct.extRenderToTextureHalfFloat?Ct.extTextureHalfFloat.HALF_FLOAT_OES:vi.UNSIGNED_BYTE,null),ui.colorAttachment.set(ei)}(_e,Ce,Mt,st)}})(z,B,I),z.clear({color:o.Color.transparent});for(let _e=0;_e<D.length;_e++){const Ce=D[_e];if(d.hasRenderableParent(Ce))continue;const Be=d.getTile(Ce),Je=Be.getBucket(I);if(!Je)continue;const st=Je.programConfigurations.get(I.id),Mt=B.useProgram("heatmap",st),{zoom:Ct}=B.transform;Mt.draw(z,X.TRIANGLES,je.disabled,ne,pe,li.disabled,kl(Ce.posMatrix,Be,Ct,I.paint.get("heatmap-intensity")),null,I.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,I.paint,B.transform.zoom,st)}z.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(z,X){const ne=z.context,pe=ne.gl,_e=X.heatmapFbo;if(!_e)return;ne.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,_e.colorAttachment.get()),ne.activeTexture.set(pe.TEXTURE1);let Ce=X.colorRampTexture;Ce||(Ce=X.colorRampTexture=new T(ne,X.colorRamp,pe.RGBA)),Ce.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(ne,pe.TRIANGLES,je.disabled,Wt.disabled,z.colorModeForRenderPass(),li.disabled,((Be,Je,st,Mt)=>{const Ct=o.create();o.ortho(Ct,0,Be.width,Be.height,0,0,1);const Tt=Be.context.gl;return{u_matrix:Ct,u_world:[Tt.drawingBufferWidth,Tt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Je.paint.get("heatmap-opacity")}})(z,X),null,X.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,X.paint,z.transform.zoom)}(B,I))},line:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("line-opacity"),X=I.paint.get("line-width");if(z.constantOr(1)===0||X.constantOr(1)===0)return;const ne=B.depthModeForSublayer(0,je.ReadOnly),pe=B.colorModeForRenderPass(),_e=I.paint.get("line-dasharray"),Ce=I.paint.get("line-pattern"),Be=Ce.constantOr(1),Je=I.paint.get("line-gradient"),st=I.getCrossfadeParameters(),Mt=Be?"linePattern":_e?"lineSDF":Je?"lineGradient":"line",Ct=B.context,Tt=Ct.gl;let ei=!0;for(const ui of D){const vi=d.getTile(ui);if(Be&&!vi.patternsLoaded())continue;const jt=vi.getBucket(I);if(!jt)continue;const Oi=jt.programConfigurations.get(I.id),ki=B.context.program.get(),Wi=B.useProgram(Mt,Oi),Vi=ei||Wi.program!==ki,ln=B.style.terrain&&B.style.terrain.getTerrainData(ui),Ui=Ce.constantOr(null);if(Ui&&vi.imageAtlas){const jn=vi.imageAtlas,Cr=jn.patternPositions[Ui.to.toString()],Lr=jn.patternPositions[Ui.from.toString()];Cr&&Lr&&Oi.setConstantPatternPositions(Cr,Lr)}const Mn=ln?ui:null,_n=Be?pa(B,vi,I,st,Mn):_e?ma(B,vi,I,_e,st,Mn):Je?du(B,vi,I,jt.lineClipsArray.length,Mn):Cl(B,vi,I,Mn);if(Be)Ct.activeTexture.set(Tt.TEXTURE0),vi.imageAtlasTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),Oi.updatePaintBuffers(st);else if(_e&&(Vi||B.lineAtlas.dirty))Ct.activeTexture.set(Tt.TEXTURE0),B.lineAtlas.bind(Ct);else if(Je){const jn=jt.gradients[I.id];let Cr=jn.texture;if(I.gradientVersion!==jn.version){let Lr=256;if(I.stepInterpolant){const j=d.getSource().maxzoom,K=ui.canonical.z===j?Math.ceil(1<<B.transform.maxZoom-ui.canonical.z):1;Lr=o.clamp(o.nextPowerOfTwo(jt.maxLineLength/o.EXTENT*1024*K),256,Ct.maxTextureSize)}jn.gradient=o.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Lr,image:jn.gradient||void 0,clips:jt.lineClipsArray}),jn.texture?jn.texture.update(jn.gradient):jn.texture=new T(Ct,jn.gradient,Tt.RGBA),jn.version=I.gradientVersion,Cr=jn.texture}Ct.activeTexture.set(Tt.TEXTURE0),Cr.bind(I.stepInterpolant?Tt.NEAREST:Tt.LINEAR,Tt.CLAMP_TO_EDGE)}Wi.draw(Ct,Tt.TRIANGLES,ne,B.stencilModeForClipping(ui),pe,li.disabled,_n,ln,I.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,I.paint,B.transform.zoom,Oi,jt.layoutVertexBuffer2),ei=!1}},fill:function(B,d,I,D){const z=I.paint.get("fill-color"),X=I.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const ne=B.colorModeForRenderPass(),pe=I.paint.get("fill-pattern"),_e=B.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&z.constantOr(o.Color.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===_e){const Ce=B.depthModeForSublayer(1,B.renderPass==="opaque"?je.ReadWrite:je.ReadOnly);Go(B,d,I,D,Ce,ne,!1)}if(B.renderPass==="translucent"&&I.paint.get("fill-antialias")){const Ce=B.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,je.ReadOnly);Go(B,d,I,D,Ce,ne,!0)}},"fill-extrusion":function(B,d,I,D){const z=I.paint.get("fill-extrusion-opacity");if(z!==0&&B.renderPass==="translucent"){const X=new je(B.context.gl.LEQUAL,je.ReadWrite,B.depthRangeFor3D);if(z!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Yo(B,d,I,D,X,Wt.disabled,Ao.disabled),Yo(B,d,I,D,X,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const ne=B.colorModeForRenderPass();Yo(B,d,I,D,X,Wt.disabled,ne)}}},hillshade:function(B,d,I,D){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const z=B.context,X=B.depthModeForSublayer(0,je.ReadOnly),ne=B.colorModeForRenderPass(),[pe,_e]=B.renderPass==="translucent"?B.stencilConfigForOverlap(D):[{},D];for(const Ce of _e){const Be=d.getTile(Ce);Be.needsHillshadePrepare!==void 0&&Be.needsHillshadePrepare&&B.renderPass==="offscreen"?ms(B,Be,I,X,Wt.disabled,ne):B.renderPass==="translucent"&&Is(B,Ce,Be,I,X,pe[Ce.overscaledZ],ne)}z.viewport.set([0,0,B.width,B.height])},raster:function(B,d,I,D){if(B.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!D.length)return;const z=B.context,X=z.gl,ne=d.getSource(),pe=B.useProgram("raster"),_e=B.colorModeForRenderPass(),[Ce,Be]=ne instanceof be?[{},D]:B.stencilConfigForOverlap(D),Je=Be[Be.length-1].overscaledZ,st=!B.options.moving;for(const Mt of Be){const Ct=B.depthModeForSublayer(Mt.overscaledZ-Je,I.paint.get("raster-opacity")===1?je.ReadWrite:je.ReadOnly,X.LESS),Tt=d.getTile(Mt);Tt.registerFadeDuration(I.paint.get("raster-fade-duration"));const ei=d.findLoadedParent(Mt,0),ui=Rr(Tt,ei,d,I,B.transform,B.style.terrain);let vi,jt;const Oi=I.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;z.activeTexture.set(X.TEXTURE0),Tt.texture.bind(Oi,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(X.TEXTURE1),ei?(ei.texture.bind(Oi,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),vi=Math.pow(2,ei.tileID.overscaledZ-Tt.tileID.overscaledZ),jt=[Tt.tileID.canonical.x*vi%1,Tt.tileID.canonical.y*vi%1]):Tt.texture.bind(Oi,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const ki=B.style.terrain&&B.style.terrain.getTerrainData(Mt),Wi=ki?Mt:null,Vi=Wi?Wi.posMatrix:B.transform.calculatePosMatrix(Mt.toUnwrapped(),st),ln=U(Vi,jt||[0,0],vi||1,ui,I);ne instanceof be?pe.draw(z,X.TRIANGLES,Ct,Wt.disabled,_e,li.disabled,ln,ki,I.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):pe.draw(z,X.TRIANGLES,Ct,Ce[Mt.overscaledZ],_e,li.disabled,ln,ki,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,d,I,D){const z=I.paint.get("background-color"),X=I.paint.get("background-opacity");if(X===0)return;const ne=B.context,pe=ne.gl,_e=B.transform,Ce=_e.tileSize,Be=I.paint.get("background-pattern");if(B.isPatternMissing(Be))return;const Je=!Be&&z.a===1&&X===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Je)return;const st=Wt.disabled,Mt=B.depthModeForSublayer(0,Je==="opaque"?je.ReadWrite:je.ReadOnly),Ct=B.colorModeForRenderPass(),Tt=B.useProgram(Be?"backgroundPattern":"background"),ei=D||_e.coveringTiles({tileSize:Ce,terrain:B.style.terrain});Be&&(ne.activeTexture.set(pe.TEXTURE0),B.imageManager.bind(B.context));const ui=I.getCrossfadeParameters();for(const vi of ei){const jt=D?vi.posMatrix:B.transform.calculatePosMatrix(vi.toUnwrapped()),Oi=Be?Nt(jt,X,B,Be,{tileID:vi,tileSize:Ce},ui):It(jt,X,z),ki=B.style.terrain&&B.style.terrain.getTerrainData(vi);Tt.draw(ne,pe.TRIANGLES,Mt,st,Ct,li.disabled,Oi,ki,I.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}},debug:function(B,d,I){for(let D=0;D<I.length;D++)Uu(B,d,I[D])},custom:function(B,d,I){const D=B.context,z=I.implementation;if(B.renderPass==="offscreen"){const X=z.prerender;X&&(B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),X.call(z,D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),D.setStencilMode(Wt.disabled);const X=z.renderingMode==="3d"?new je(B.context.gl.LEQUAL,je.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,je.ReadOnly);D.setDepthMode(X),z.render(D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState(),D.bindFramebuffer.set(null)}}};class bu{constructor(d,I){this.context=new se(d),this.transform=I,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.create(),renderTime:0},this.setup(),this.numSublayers=Xe.maxUnderzooming+Xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new er,this.gpuTimers={}}resize(d,I,D){if(this.width=d*D,this.height=I*D,this.pixelRatio=D,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const z of this.style._order)this.style._layers[z].resize()}setup(){const d=this.context,I=new o.PosArray;I.emplaceBack(0,0),I.emplaceBack(o.EXTENT,0),I.emplaceBack(0,o.EXTENT),I.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(I,Dr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const D=new o.PosArray;D.emplaceBack(0,0),D.emplaceBack(o.EXTENT,0),D.emplaceBack(0,o.EXTENT),D.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=d.createVertexBuffer(D,Dr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const z=new o.RasterBoundsArray;z.emplaceBack(0,0,0,0),z.emplaceBack(o.EXTENT,0,o.EXTENT,0),z.emplaceBack(0,o.EXTENT,0,o.EXTENT),z.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(z,We.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const X=new o.PosArray;X.emplaceBack(0,0),X.emplaceBack(1,0),X.emplaceBack(0,1),X.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(X,Dr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const ne=new o.LineStripIndexArray;ne.emplaceBack(0),ne.emplaceBack(1),ne.emplaceBack(3),ne.emplaceBack(2),ne.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(ne);const pe=new o.TriangleIndexArray;pe.emplaceBack(0,1,2),pe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(pe),this.emptyTexture=new T(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);const _e=this.context.gl;this.stencilClearMode=new Wt({func:_e.ALWAYS,mask:0},0,255,_e.ZERO,_e.ZERO,_e.ZERO)}clearStencil(){const d=this.context,I=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const D=o.create();o.ortho(D,0,this.width,this.height,0,0,1),o.scale(D,D,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,I.TRIANGLES,je.disabled,this.stencilClearMode,Ao.disabled,li.disabled,Ma(D),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,I){if(this.currentStencilSource===d.source||!d.isTileClipped()||!I||!I.length)return;this.currentStencilSource=d.source;const D=this.context,z=D.gl;this.nextStencilID+I.length>256&&this.clearStencil(),D.setColorMode(Ao.disabled),D.setDepthMode(je.disabled);const X=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ne of I){const pe=this._tileClippingMaskIDs[ne.key]=this.nextStencilID++,_e=this.style.terrain&&this.style.terrain.getTerrainData(ne);X.draw(D,z.TRIANGLES,je.disabled,new Wt({func:z.ALWAYS,mask:0},pe,255,z.KEEP,z.KEEP,z.REPLACE),Ao.disabled,li.disabled,Ma(ne.posMatrix),_e,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,I=this.context.gl;return new Wt({func:I.NOTEQUAL,mask:255},d,255,I.KEEP,I.KEEP,I.REPLACE)}stencilModeForClipping(d){const I=this.context.gl;return new Wt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,I.KEEP,I.KEEP,I.REPLACE)}stencilConfigForOverlap(d){const I=this.context.gl,D=d.sort((ne,pe)=>pe.overscaledZ-ne.overscaledZ),z=D[D.length-1].overscaledZ,X=D[0].overscaledZ-z+1;if(X>1){this.currentStencilSource=void 0,this.nextStencilID+X>256&&this.clearStencil();const ne={};for(let pe=0;pe<X;pe++)ne[pe+z]=new Wt({func:I.GEQUAL,mask:255},pe+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=X,[ne,D]}return[{[z]:Wt.disabled},D]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new Ao([d.CONSTANT_COLOR,d.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ao.unblended:Ao.alphaBlended}depthModeForSublayer(d,I,D){if(!this.opaquePassEnabledForLayer())return je.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new je(D||this.context.gl.LEQUAL,I,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,I){this.style=d,this.options=I,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const D=this.style._order,z=this.style.sourceCaches,X=this.style.terrain&&new Zl(this);for(const Ce in z){const Be=z[Ce];Be.used&&Be.prepare(this.context)}const ne={},pe={},_e={};for(const Ce in z){const Be=z[Ce];ne[Ce]=Be.getVisibleCoordinates(),pe[Ce]=ne[Ce].slice().reverse(),_e[Ce]=Be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ce=0;Ce<D.length;Ce++)if(this.style._layers[D[Ce]].is3D()){this.opaquePassCutoff=Ce;break}if(X){this.opaquePassCutoff=0;const Ce=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Ce.length)&&(o.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Be,Je){const st=Be.context,Mt=st.gl,Ct=Ao.unblended,Tt=new je(Mt.LEQUAL,je.ReadWrite,[0,1]),ei=Je.getTerrainMesh(),ui=Je.sourceCache.getRenderableTiles(),vi=Be.useProgram("terrainDepth");st.bindFramebuffer.set(Je.getFramebuffer("depth").framebuffer),st.viewport.set([0,0,Be.width/devicePixelRatio,Be.height/devicePixelRatio]),st.clear({color:o.Color.transparent,depth:1});for(const jt of ui){const Oi=Je.getTerrainData(jt.tileID),ki=Be.transform.calculatePosMatrix(jt.tileID.toUnwrapped());vi.draw(st,Mt.TRIANGLES,Tt,Wt.disabled,Ct,li.backCCW,{u_matrix:ki},Oi,"terrain",ei.vertexBuffer,ei.indexBuffer,ei.segments)}st.bindFramebuffer.set(null),st.viewport.set([0,0,Be.width,Be.height])}(this,this.style.terrain),function(Be,Je){const st=Be.context,Mt=st.gl,Ct=Ao.unblended,Tt=new je(Mt.LEQUAL,je.ReadWrite,[0,1]),ei=Je.getTerrainMesh(),ui=Je.getCoordsTexture(),vi=Je.sourceCache.getRenderableTiles(),jt=Be.useProgram("terrainCoords");st.bindFramebuffer.set(Je.getFramebuffer("coords").framebuffer),st.viewport.set([0,0,Be.width/devicePixelRatio,Be.height/devicePixelRatio]),st.clear({color:o.Color.transparent,depth:1}),Je.coordsIndex=[];for(const Oi of vi){const ki=Je.getTerrainData(Oi.tileID);st.activeTexture.set(Mt.TEXTURE0),Mt.bindTexture(Mt.TEXTURE_2D,ui.texture);const Wi=Be.transform.calculatePosMatrix(Oi.tileID.toUnwrapped());jt.draw(st,Mt.TRIANGLES,Tt,Wt.disabled,Ct,li.backCCW,{u_matrix:Wi,u_terrain_coords_id:(255-Je.coordsIndex.length)/255,u_texture:0},ki,"terrain",ei.vertexBuffer,ei.indexBuffer,ei.segments),Je.coordsIndex.push(Oi.tileID.key)}st.bindFramebuffer.set(null),st.viewport.set([0,0,Be.width,Be.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Ce of D){const Be=this.style._layers[Ce];if(!Be.hasOffscreenPass()||Be.isHidden(this.transform.zoom))continue;const Je=pe[Be.source];(Be.type==="custom"||Je.length)&&this.renderLayer(this,z[Be.source],Be,Je)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!X)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const Ce=this.style._layers[D[this.currentLayer]],Be=z[Ce.source],Je=ne[Ce.source];this._renderTileClippingMasks(Ce,Je),this.renderLayer(this,Be,Ce,Je)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const Ce=this.style._layers[D[this.currentLayer]],Be=z[Ce.source];if(X&&X.renderLayer(Ce))continue;const Je=(Ce.type==="symbol"?_e:pe)[Ce.source];this._renderTileClippingMasks(Ce,ne[Ce.source]),this.renderLayer(this,Be,Ce,Je)}if(this.options.showTileBoundaries){let Ce,Be;Object.values(this.style._layers).forEach(Je=>{Je.source&&!Je.isHidden(this.transform.zoom)&&(Je.source!==(Be&&Be.id)&&(Be=this.style.sourceCaches[Je.source]),(!Ce||Ce.getSource().maxzoom<Be.getSource().maxzoom)&&(Ce=Be))}),Ce&&Xa.debug(this,Ce,Ce.getVisibleCoordinates())}this.options.showPadding&&function(Ce){const Be=Ce.transform.padding;Da(Ce,Ce.transform.height-(Be.top||0),3,Ts),Da(Ce,Be.bottom||0,3,As),Tl(Ce,Be.left||0,3,Yl),Tl(Ce,Ce.transform.width-(Be.right||0),3,Il);const Je=Ce.transform.centerPoint;(function(st,Mt,Ct,Tt){ul(st,Mt-1,Ct-10,2,20,Tt),ul(st,Mt-10,Ct-1,20,2,Tt)})(Ce,Je.x,Ce.transform.height-Je.y,ju)}(this),this.context.setDefault()}renderLayer(d,I,D,z){D.isHidden(this.transform.zoom)||(D.type==="background"||D.type==="custom"||(z||[]).length)&&(this.id=D.id,this.gpuTimingStart(D),Xa[D.type](d,I,D,z,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const I=this.context.extTimerQuery;let D=this.gpuTimers[d.id];D||(D=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),D.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,D.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}queryGpuTimers(d){const I={};for(const D in d){const z=d[D],X=this.context.extTimerQuery,ne=X.getQueryObjectEXT(z.query,X.QUERY_RESULT_EXT)/1e6;X.deleteQueryEXT(z.query),I[D]=ne}return I}translatePosMatrix(d,I,D,z,X){if(!D[0]&&!D[1])return d;const ne=X?z==="map"?this.transform.angle:0:z==="viewport"?-this.transform.angle:0;if(ne){const Ce=Math.sin(ne),Be=Math.cos(ne);D=[D[0]*Be-D[1]*Ce,D[0]*Ce+D[1]*Be]}const pe=[X?D[0]:co(I,D[0],this.transform.zoom),X?D[1]:co(I,D[1],this.transform.zoom),0],_e=new Float32Array(16);return o.translate(_e,d,pe),_e}saveTileTexture(d){const I=this._tileTextures[d.size[0]];I?I.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const I=this._tileTextures[d];return I&&I.length>0?I.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const I=this.imageManager.getPattern(d.from.toString()),D=this.imageManager.getPattern(d.to.toString());return!I||!D}useProgram(d,I){this.cache=this.cache||{};const D=d+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[D]||(this.cache[D]=new Or(this.context,d,Ro[d],I,Bt[d],this._showOverdrawInspector,this.style.terrain)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Bs{constructor(d,I){this.points=d,this.planes=I}static fromInvProjectionMatrix(d,I,D){const z=Math.pow(2,D),X=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(pe=>{const _e=1/(pe=o.transformMat4([],pe,d))[3]/I*z;return o.mul$1(pe,pe,[_e,_e,1/pe[3],_e])}),ne=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(pe=>{const _e=o.sub([],X[pe[0]],X[pe[1]]),Ce=o.sub([],X[pe[2]],X[pe[1]]),Be=o.normalize([],o.cross([],_e,Ce)),Je=-o.dot(Be,X[pe[1]]);return Be.concat(Je)});return new Bs(X,ne)}}class wu{constructor(d,I){this.min=d,this.max=I,this.center=o.scale$1([],o.add([],this.min,this.max),.5)}quadrant(d){const I=[d%2==0,d<2],D=o.clone$2(this.min),z=o.clone$2(this.max);for(let X=0;X<I.length;X++)D[X]=I[X]?this.min[X]:this.center[X],z[X]=I[X]?this.center[X]:this.max[X];return z[2]=this.max[2],new wu(D,z)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const I=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let D=!0;for(let z=0;z<d.planes.length;z++){const X=d.planes[z];let ne=0;for(let pe=0;pe<I.length;pe++)o.dot$1(X,I[pe])>=0&&ne++;if(ne===0)return 0;ne!==I.length&&(D=!1)}if(D)return 2;for(let z=0;z<3;z++){let X=Number.MAX_VALUE,ne=-Number.MAX_VALUE;for(let pe=0;pe<d.points.length;pe++){const _e=d.points[pe][z]-this.min[z];X=Math.min(X,_e),ne=Math.max(ne,_e)}if(ne<0||X>this.max[z]-this.min[z])return 0}return 1}}class cl{constructor(d=0,I=0,D=0,z=0){if(isNaN(d)||d<0||isNaN(I)||I<0||isNaN(D)||D<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=I,this.left=D,this.right=z}interpolate(d,I,D){return I.top!=null&&d.top!=null&&(this.top=o.number(d.top,I.top,D)),I.bottom!=null&&d.bottom!=null&&(this.bottom=o.number(d.bottom,I.bottom,D)),I.left!=null&&d.left!=null&&(this.left=o.number(d.left,I.left,D)),I.right!=null&&d.right!=null&&(this.right=o.number(d.right,I.right,D)),this}getCenter(d,I){const D=o.clamp((this.left+d-this.right)/2,0,d),z=o.clamp((this.top+I-this.bottom)/2,0,I);return new o.pointGeometry(D,z)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new cl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Kl{constructor(d,I,D,z,X){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=X===void 0||!!X,this._minZoom=d||0,this._maxZoom=I||22,this._minPitch=D==null?0:D,this._maxPitch=z==null?60:z,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new cl,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const d=new Kl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d._elevation=this._elevation,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const I=-o.wrap(d,-180,180)*Math.PI/180;var D;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=(D=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0),D[0]=1,D[3]=1,D),function(z,X,ne){var pe=X[0],_e=X[1],Ce=X[2],Be=X[3],Je=Math.sin(ne),st=Math.cos(ne);z[0]=pe*st+Ce*Je,z[1]=_e*st+Be*Je,z[2]=pe*-Je+Ce*st,z[3]=_e*-Je+Be*st}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const I=o.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const I=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,I,D){this._unmodified=!1,this._edgeInsets.interpolate(d,I,D),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const I=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,I)}getVisibleUnwrappedCoordinates(d){const I=[new o.UnwrappedTileID(0,d)];if(this._renderWorldCopies){const D=this.pointCoordinate(new o.pointGeometry(0,0)),z=this.pointCoordinate(new o.pointGeometry(this.width,0)),X=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),ne=this.pointCoordinate(new o.pointGeometry(0,this.height)),pe=Math.floor(Math.min(D.x,z.x,X.x,ne.x)),_e=Math.floor(Math.max(D.x,z.x,X.x,ne.x)),Ce=1;for(let Be=pe-Ce;Be<=_e+Ce;Be++)Be!==0&&I.push(new o.UnwrappedTileID(Be,d))}return I}coveringTiles(d){var I,D;let z=this.coveringZoomLevel(d);const X=z;if(d.minzoom!==void 0&&z<d.minzoom)return[];d.maxzoom!==void 0&&z>d.maxzoom&&(z=d.maxzoom);const ne=this.pointCoordinate(this.getCameraPoint()),pe=o.MercatorCoordinate.fromLngLat(this.center),_e=Math.pow(2,z),Ce=[_e*ne.x,_e*ne.y,0],Be=[_e*pe.x,_e*pe.y,0],Je=Bs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z);let st=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(st=z);const Mt=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,Ct=jt=>({aabb:new wu([jt*_e,0,0],[(jt+1)*_e,_e,0]),zoom:0,x:0,y:0,wrap:jt,fullyVisible:!1}),Tt=[],ei=[],ui=z,vi=d.reparseOverscaled?X:z;if(this._renderWorldCopies)for(let jt=1;jt<=3;jt++)Tt.push(Ct(-jt)),Tt.push(Ct(jt));for(Tt.push(Ct(0));Tt.length>0;){const jt=Tt.pop(),Oi=jt.x,ki=jt.y;let Wi=jt.fullyVisible;if(!Wi){const jn=jt.aabb.intersects(Je);if(jn===0)continue;Wi=jn===2}const Vi=d.terrain?Ce:Be,ln=jt.aabb.distanceX(Vi),Ui=jt.aabb.distanceY(Vi),Mn=Math.max(Math.abs(ln),Math.abs(Ui)),_n=Mt+(1<<ui-jt.zoom)-2;if(jt.zoom===ui||Mn>_n&&jt.zoom>=st){const jn=ui-jt.zoom,Cr=Ce[0]-.5-(Oi<<jn),Lr=Ce[1]-.5-(ki<<jn);ei.push({tileID:new o.OverscaledTileID(jt.zoom===ui?vi:jt.zoom,jt.wrap,jt.zoom,Oi,ki),distanceSq:o.sqrLen([Be[0]-.5-Oi,Be[1]-.5-ki]),tileDistanceToCamera:Math.sqrt(Cr*Cr+Lr*Lr)})}else for(let jn=0;jn<4;jn++){const Cr=(Oi<<1)+jn%2,Lr=(ki<<1)+(jn>>1),j=jt.zoom+1;let K=jt.aabb.quadrant(jn);if(d.terrain){const ue=new o.OverscaledTileID(j,jt.wrap,j,Cr,Lr),ve=d.terrain.getMinMaxElevation(ue),Ne=(I=ve.minElevation)!==null&&I!==void 0?I:this.elevation,Ke=(D=ve.maxElevation)!==null&&D!==void 0?D:this.elevation;K=new wu([K.min[0],K.min[1],Ne],[K.max[0],K.max[1],Ke])}Tt.push({aabb:K,zoom:j,x:Cr,y:Lr,wrap:jt.wrap,fullyVisible:Wi})}}return ei.sort((jt,Oi)=>jt.distanceSq-Oi.distanceSq).map(jt=>jt.tileID)}resize(d,I){this.width=d,this.height=I,this.pixelsToGLUnits=[2/d,-2/I],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const I=o.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.pointGeometry(o.mercatorXfromLng(d.lng)*this.worldSize,o.mercatorYfromLat(I)*this.worldSize)}unproject(d){return new o.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(d){this.freezeElevation||(this.elevation=d?this.getElevation(this._center,d):0)}getElevation(d,I){const D=o.MercatorCoordinate.fromLngLat(d),z=(1<<this.tileZoom)*o.EXTENT,X=D.x*z,ne=D.y*z,pe=Math.floor(X/o.EXTENT),_e=Math.floor(ne/o.EXTENT),Ce=new o.OverscaledTileID(this.tileZoom,0,this.tileZoom,pe,_e);return I.getElevation(Ce,X%o.EXTENT,ne%o.EXTENT,o.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const I=this.pointLocation(this.centerPoint,d),D=this.getElevation(I,d);if(!(this.elevation-D))return;const z=this.getCameraPosition(),X=o.MercatorCoordinate.fromLngLat(z.lngLat,z.altitude),ne=o.MercatorCoordinate.fromLngLat(I,D),pe=X.x-ne.x,_e=X.y-ne.y,Ce=X.z-ne.z,Be=Math.sqrt(pe*pe+_e*_e+Ce*Ce),Je=this.scaleZoom(this.cameraToCenterDistance/Be/this.tileSize);this._elevation=D,this._center=I,this.zoom=Je}setLocationAtPoint(d,I){const D=this.pointCoordinate(I),z=this.pointCoordinate(this.centerPoint),X=this.locationCoordinate(d),ne=new o.MercatorCoordinate(X.x-(D.x-z.x),X.y-(D.y-z.y));this.center=this.coordinateLocation(ne),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,I){return I?this.coordinatePoint(this.locationCoordinate(d),this.getElevation(d,I),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,I){return this.coordinateLocation(this.pointCoordinate(d,I))}locationCoordinate(d){return o.MercatorCoordinate.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,I){if(I){const st=I.pointCoordinate(d);if(st!=null)return st}const D=[d.x,d.y,0,1],z=[d.x,d.y,1,1];o.transformMat4(D,D,this.pixelMatrixInverse),o.transformMat4(z,z,this.pixelMatrixInverse);const X=D[3],ne=z[3],pe=D[1]/X,_e=z[1]/ne,Ce=D[2]/X,Be=z[2]/ne,Je=Ce===Be?0:(0-Ce)/(Be-Ce);return new o.MercatorCoordinate(o.number(D[0]/X,z[0]/ne,Je)/this.worldSize,o.number(pe,_e,Je)/this.worldSize)}coordinatePoint(d,I=0,D=this.pixelMatrix){const z=[d.x*this.worldSize,d.y*this.worldSize,I,1];return o.transformMat4(z,z,D),new o.pointGeometry(z[0]/z[3],z[1]/z[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new o.LngLatBounds().extend(this.pointLocation(new o.pointGeometry(0,d))).extend(this.pointLocation(new o.pointGeometry(this.width,d))).extend(this.pointLocation(new o.pointGeometry(this.width,this.height))).extend(this.pointLocation(new o.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,I=!1){const D=d.key,z=I?this._alignedPosMatrixCache:this._posMatrixCache;if(z[D])return z[D];const X=d.canonical,ne=this.worldSize/this.zoomScale(X.z),pe=X.x+Math.pow(2,X.z)*d.wrap,_e=o.identity(new Float64Array(16));return o.translate(_e,_e,[pe*ne,X.y*ne,0]),o.scale(_e,_e,[ne/o.EXTENT,ne/o.EXTENT,1]),o.multiply(_e,I?this.alignedProjMatrix:this.projMatrix,_e),z[D]=new Float32Array(_e),z[D]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,I,D,z,X=-90,ne=90,pe=-180,_e=180;const Ce=this.size,Be=this._unmodified;if(this.latRange){const Mt=this.latRange;X=o.mercatorYfromLat(Mt[1])*this.worldSize,ne=o.mercatorYfromLat(Mt[0])*this.worldSize,d=ne-X<Ce.y?Ce.y/(ne-X):0}if(this.lngRange){const Mt=this.lngRange;pe=o.wrap(o.mercatorXfromLng(Mt[0])*this.worldSize,0,this.worldSize),_e=o.wrap(o.mercatorXfromLng(Mt[1])*this.worldSize,0,this.worldSize),_e<pe&&(_e+=this.worldSize),I=_e-pe<Ce.x?Ce.x/(_e-pe):0}const Je=this.point,st=Math.max(I||0,d||0);if(st)return this.center=this.unproject(new o.pointGeometry(I?(_e+pe)/2:Je.x,d?(ne+X)/2:Je.y)),this.zoom+=this.scaleZoom(st),this._unmodified=Be,void(this._constraining=!1);if(this.latRange){const Mt=Je.y,Ct=Ce.y/2;Mt-Ct<X&&(z=X+Ct),Mt+Ct>ne&&(z=ne-Ct)}if(this.lngRange){const Mt=(pe+_e)/2,Ct=o.wrap(Je.x,Mt-this.worldSize/2,Mt+this.worldSize/2),Tt=Ce.x/2;Ct-Tt<pe&&(D=pe+Tt),Ct+Tt>_e&&(D=_e-Tt)}D===void 0&&z===void 0||(this.center=this.unproject(new o.pointGeometry(D!==void 0?D:Je.x,z!==void 0?z:Je.y)).wrap()),this._unmodified=Be,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,I=this.point.x,D=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let z=o.identity(new Float64Array(16));o.scale(z,z,[this.width/2,-this.height/2,1]),o.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=o.identity(new Float64Array(16)),o.scale(z,z,[1,-1,1]),o.translate(z,z,[-1,-1,0]),o.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const X=Math.PI/2+this._pitch,ne=this._fov*(.5+d.y/this.height),pe=Math.sin(ne)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-X-ne,.01,Math.PI-.01)),_e=this.getHorizon(),Ce=2*Math.atan(_e/this.cameraToCenterDistance)*(.5+d.y/(2*_e)),Be=Math.sin(Ce)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-X-Ce,.01,Math.PI-.01)),Je=Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToSeaLevelDistance,st=Math.cos(Math.PI/2-this._pitch)*Be+this.cameraToSeaLevelDistance,Mt=1.01*Math.min(Je,st),Ct=this.height/50;z=new Float64Array(16),o.perspective(z,this._fov,this.width/this.height,Ct,Mt),z[8]=2*-d.x/this.width,z[9]=2*d.y/this.height,o.scale(z,z,[1,-1,1]),o.translate(z,z,[0,0,-this.cameraToCenterDistance]),o.rotateX(z,z,this._pitch),o.rotateZ(z,z,this.angle),o.translate(z,z,[-I,-D,0]),this.mercatorMatrix=o.scale([],z,[this.worldSize,this.worldSize,this.worldSize]),o.scale(z,z,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,z),o.translate(z,z,[0,0,-this.elevation]),this.projMatrix=z,this.invProjMatrix=o.invert([],z),this.pixelMatrix3D=o.multiply(new Float64Array(16),this.labelPlaneMatrix,z);const Tt=this.width%2/2,ei=this.height%2/2,ui=Math.cos(this.angle),vi=Math.sin(this.angle),jt=I-Math.round(I)+ui*Tt+vi*ei,Oi=D-Math.round(D)+ui*ei+vi*Tt,ki=new Float64Array(z);if(o.translate(ki,ki,[jt>.5?jt-1:jt,Oi>.5?Oi-1:Oi,0]),this.alignedProjMatrix=ki,z=o.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new o.pointGeometry(0,0)),I=[d.x*this.worldSize,d.y*this.worldSize,0,1];return o.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,d))}getCameraQueryGeometry(d){const I=this.getCameraPoint();if(d.length===1)return[d[0],I];{let D=I.x,z=I.y,X=I.x,ne=I.y;for(const pe of d)D=Math.min(D,pe.x),z=Math.min(z,pe.y),X=Math.max(X,pe.x),ne=Math.max(ne,pe.y);return[new o.pointGeometry(D,z),new o.pointGeometry(X,z),new o.pointGeometry(X,ne),new o.pointGeometry(D,ne),new o.pointGeometry(D,z)]}}}class Oa{constructor(d){this._hashName=d&&encodeURIComponent(d),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(I,D){let z=!1,X=null;const ne=()=>{X=null,z&&(I(),X=setTimeout(ne,300),z=!1)};return()=>(z=!0,X||ne(),X)}(this._updateHashUnthrottled.bind(this))}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const I=this._map.getCenter(),D=Math.round(100*this._map.getZoom())/100,z=Math.ceil((D*Math.LN2+Math.log(512/360/.5))/Math.LN10),X=Math.pow(10,z),ne=Math.round(I.lng*X)/X,pe=Math.round(I.lat*X)/X,_e=this._map.getBearing(),Ce=this._map.getPitch();let Be="";if(Be+=d?`/${ne}/${pe}/${D}`:`${D}/${pe}/${ne}`,(_e||Ce)&&(Be+="/"+Math.round(10*_e)/10),Ce&&(Be+=`/${Math.round(Ce)}`),this._hashName){const Je=this._hashName;let st=!1;const Mt=window.location.hash.slice(1).split("&").map(Ct=>{const Tt=Ct.split("=")[0];return Tt===Je?(st=!0,`${Tt}=${Be}`):Ct}).filter(Ct=>Ct);return st||Mt.push(`${Je}=${Be}`),`#${Mt.join("&")}`}return`#${Be}`}_getCurrentHash(){const d=window.location.hash.replace("#","");if(this._hashName){let I;return d.split("&").map(D=>D.split("=")).forEach(D=>{D[0]===this._hashName&&(I=D)}),(I&&I[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._getCurrentHash();if(d.length>=3&&!d.some(I=>isNaN(I))){const I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:I,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}}}const Ll={linearity:.3,easing:o.bezier(0,0,.3,1)},Fc=o.extend({deceleration:2500,maxSpeed:1400},Ll),Rc=o.extend({deceleration:20,maxSpeed:1400},Ll),Pl=o.extend({deceleration:1e3,maxSpeed:360},Ll),zs=o.extend({deceleration:1e3,maxSpeed:90},Ll);class Fa{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,I=o.exported.now();for(;d.length>0&&I-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const I={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:X}of this._inertiaBuffer)I.zoom+=X.zoomDelta||0,I.bearing+=X.bearingDelta||0,I.pitch+=X.pitchDelta||0,X.panDelta&&I.pan._add(X.panDelta),X.around&&(I.around=X.around),X.pinchAround&&(I.pinchAround=X.pinchAround);const D=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(I.pan.mag()){const X=sa(I.pan.mag(),D,o.extend({},Fc,d||{}));z.offset=I.pan.mult(X.amount/I.pan.mag()),z.center=this._map.transform.center,Ra(z,X)}if(I.zoom){const X=sa(I.zoom,D,Rc);z.zoom=this._map.transform.zoom+X.amount,Ra(z,X)}if(I.bearing){const X=sa(I.bearing,D,Pl);z.bearing=this._map.transform.bearing+o.clamp(X.amount,-179,179),Ra(z,X)}if(I.pitch){const X=sa(I.pitch,D,zs);z.pitch=this._map.transform.pitch+X.amount,Ra(z,X)}if(z.zoom||z.bearing){const X=I.pinchAround===void 0?I.around:I.pinchAround;z.around=X?this._map.unproject(X):this._map.getCenter()}return this.clear(),o.extend(z,{noMoveStart:!0})}}function Ra(B,d){(!B.duration||B.duration<d.duration)&&(B.duration=d.duration,B.easing=d.easing)}function sa(B,d,I){const{maxSpeed:D,linearity:z,deceleration:X}=I,ne=o.clamp(B*z/(d/1e3),-D,D),pe=Math.abs(ne)/(X*z);return{easing:I.easing,duration:1e3*pe,amount:ne*(pe/2)}}class hs extends o.Event{constructor(d,I,D,z={}){const X=w.mousePos(I.getCanvasContainer(),D),ne=I.unproject(X);super(d,o.extend({point:X,lngLat:ne,originalEvent:D},z)),this._defaultPrevented=!1,this.target=I}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class hl extends o.Event{constructor(d,I,D){const z=d==="touchend"?D.changedTouches:D.touches,X=w.touchPos(I.getCanvasContainer(),z),ne=X.map(_e=>I.unproject(_e)),pe=X.reduce((_e,Ce,Be,Je)=>_e.add(Ce.div(Je.length)),new o.pointGeometry(0,0));super(d,{points:X,point:pe,lngLats:ne,lngLat:I.unproject(pe),originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Jo extends o.Event{constructor(d,I,D){super(d,{originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Vu{constructor(d,I){this._map=d,this._clickTolerance=I.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new Jo(d.type,this._map,d))}mousedown(d,I){return this._mousedownPos=I,this._firePreventable(new hs(d.type,this._map,d))}mouseup(d){this._map.fire(new hs(d.type,this._map,d))}click(d,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new hs(d.type,this._map,d))}dblclick(d){return this._firePreventable(new hs(d.type,this._map,d))}mouseover(d){this._map.fire(new hs(d.type,this._map,d))}mouseout(d){this._map.fire(new hs(d.type,this._map,d))}touchstart(d){return this._firePreventable(new hl(d.type,this._map,d))}touchmove(d){this._map.fire(new hl(d.type,this._map,d))}touchend(d){this._map.fire(new hl(d.type,this._map,d))}touchcancel(d){this._map.fire(new hl(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ba{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new hs(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new hs(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class aa{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=I.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,I){this.isEnabled()&&d.shiftKey&&d.button===0&&(w.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)}mousemoveWindow(d,I){if(!this._active)return;const D=I;if(this._lastPos.equals(D)||!this._box&&D.dist(this._startPos)<this._clickTolerance)return;const z=this._startPos;this._lastPos=D,this._box||(this._box=w.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const X=Math.min(z.x,D.x),ne=Math.max(z.x,D.x),pe=Math.min(z.y,D.y),_e=Math.max(z.y,D.y);w.setTransform(this._box,`translate(${X}px,${pe}px)`),this._box.style.width=ne-X+"px",this._box.style.height=_e-pe+"px"}mouseupWindow(d,I){if(!this._active||d.button!==0)return;const D=this._startPos,z=I;if(this.reset(),w.suppressClick(),D.x!==z.x||D.y!==z.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:X=>X.fitScreenCoordinates(D,z,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,I){return this._map.fire(new o.Event(d,{originalEvent:I}))}}function Wr(B,d){if(B.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${d.length}`);const I={};for(let D=0;D<B.length;D++)I[B[D].identifier]=d[D];return I}class va{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,I,D){(this.centroid||D.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),D.length===this.numTouches&&(this.centroid=function(z){const X=new o.pointGeometry(0,0);for(const ne of z)X._add(ne);return X.div(z.length)}(I),this.touches=Wr(D,I)))}touchmove(d,I,D){if(this.aborted||!this.centroid)return;const z=Wr(D,I);for(const X in this.touches){const ne=this.touches[X],pe=z[X];(!pe||pe.dist(ne)>30)&&(this.aborted=!0)}}touchend(d,I,D){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),D.length===0){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class Ml{constructor(d){this.singleTap=new va(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,I,D){this.singleTap.touchstart(d,I,D)}touchmove(d,I,D){this.singleTap.touchmove(d,I,D)}touchend(d,I,D){const z=this.singleTap.touchend(d,I,D);if(z){const X=d.timeStamp-this.lastTime<500,ne=!this.lastTap||this.lastTap.dist(z)<30;if(X&&ne||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class qu{constructor(){this._zoomIn=new Ml({numTouches:1,numTaps:2}),this._zoomOut=new Ml({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,I,D){this._zoomIn.touchstart(d,I,D),this._zoomOut.touchstart(d,I,D)}touchmove(d,I,D){this._zoomIn.touchmove(d,I,D),this._zoomOut.touchmove(d,I,D)}touchend(d,I,D){const z=this._zoomIn.touchend(d,I,D),X=this._zoomOut.touchend(d,I,D);return z?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(z)},{originalEvent:d})}):X?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(X)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const xu={0:1,2:2};class Ws{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(d,I){return!1}_move(d,I){return{}}mousedown(d,I){if(this._lastPoint)return;const D=w.mouseButton(d);this._correctButton(d,D)&&(this._lastPoint=I,this._eventButton=D)}mousemoveWindow(d,I){const D=this._lastPoint;if(D){if(d.preventDefault(),function(z,X){const ne=xu[X];return z.buttons===void 0||(z.buttons&ne)!==ne}(d,this._eventButton))this.reset();else if(this._moved||!(I.dist(D)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(D,I)}}mouseupWindow(d){this._lastPoint&&w.mouseButton(d)===this._eventButton&&(this._moved&&w.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dl extends Ws{mousedown(d,I){super.mousedown(d,I),this._lastPoint&&(this._active=!0)}_correctButton(d,I){return I===0&&!d.ctrlKey}_move(d,I){return{around:I,panDelta:I.sub(d)}}}class gs extends Ws{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=.8*(I.x-d.x);if(D)return this._active=!0,{bearingDelta:D}}contextmenu(d){d.preventDefault()}}class Cn extends Ws{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=-.5*(I.y-d.y);if(D)return this._active=!0,{pitchDelta:D}}contextmenu(d){d.preventDefault()}}class No{constructor(d,I){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=I,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,I,D){return this._calculateTransform(d,I,D)}touchmove(d,I,D){if(this._map._cooperativeGestures&&(this._minTouches===2&&D.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,D.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(D.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,I,D)}touchend(d,I,D){this._calculateTransform(d,I,D),this._active&&D.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,I,D){D.length>0&&(this._active=!0);const z=Wr(D,I),X=new o.pointGeometry(0,0),ne=new o.pointGeometry(0,0);let pe=0;for(const Ce in z){const Be=z[Ce],Je=this._touches[Ce];Je&&(X._add(Be),ne._add(Be.sub(Je)),pe++,z[Ce]=Be)}if(this._touches=z,pe<this._minTouches||!ne.mag())return;const _e=ne.div(pe);return this._sum._add(_e),this._sum.mag()<this._clickTolerance?void 0:{around:X.div(pe),panDelta:_e}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(d){}_move(d,I,D){return{}}touchstart(d,I,D){this._firstTwoTouches||D.length<2||(this._firstTwoTouches=[D[0].identifier,D[1].identifier],this._start([I[0],I[1]]))}touchmove(d,I,D){if(!this._firstTwoTouches)return;d.preventDefault();const[z,X]=this._firstTwoTouches,ne=Po(D,I,z),pe=Po(D,I,X);if(!ne||!pe)return;const _e=this._aroundCenter?null:ne.add(pe).div(2);return this._move([ne,pe],_e,d)}touchend(d,I,D){if(!this._firstTwoTouches)return;const[z,X]=this._firstTwoTouches,ne=Po(D,I,z),pe=Po(D,I,X);ne&&pe||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Po(B,d,I){for(let D=0;D<B.length;D++)if(B[D].identifier===I)return d[D]}function os(B,d){return Math.log(B/d)/Math.LN2}class mn extends Vr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,I){const D=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(os(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:os(this._distance,D),pinchAround:I}}}function za(B,d){return 180*B.angleWith(d)/Math.PI}class Hu extends Vr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,I){const D=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:za(this._vector,D),pinchAround:I}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const I=25/(Math.PI*this._minDiameter)*360,D=za(d,this._startVector);return Math.abs(D)<I}}function Gu(B){return Math.abs(B.y)>Math.abs(B.x)}class Bc extends Vr{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,I,D){super.touchstart(d,I,D),this._currentTouchCount=D.length}_start(d){this._lastPoints=d,Gu(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,I,D){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const z=d[0].sub(this._lastPoints[0]),X=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(z,X,D.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(z.y+X.y)/2*-.5}):void 0}gestureBeginsVertically(d,I,D){if(this._valid!==void 0)return this._valid;const z=d.mag()>=2,X=I.mag()>=2;if(!z&&!X)return;if(!z||!X)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;const ne=d.y>0==I.y>0;return Gu(d)&&Gu(I)&&ne}}const dh={panStep:100,bearingStep:15,pitchStep:10};class ph{constructor(){const d=dh;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let I=0,D=0,z=0,X=0,ne=0;switch(d.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:d.shiftKey?D=-1:(d.preventDefault(),X=-1);break;case 39:d.shiftKey?D=1:(d.preventDefault(),X=1);break;case 38:d.shiftKey?z=1:(d.preventDefault(),ne=-1);break;case 40:d.shiftKey?z=-1:(d.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(D=0,z=0),{cameraAnimation:pe=>{const _e=pe.getZoom();pe.easeTo({duration:300,easeId:"keyboardHandler",easing:Nh,zoom:I?Math.round(_e)+I*(d.shiftKey?2:1):_e,bearing:pe.getBearing()+D*this._bearingStep,pitch:pe.getPitch()+z*this._pitchStep,offset:[-X*this._panStep,-ne*this._panStep],center:pe.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nh(B){return B*(2-B)}const Ir=4.000244140625;class zc{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._handler=I,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;d.preventDefault()}let I=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const D=o.exported.now(),z=D-(this._lastWheelEventTime||0);this._lastWheelEventTime=D,I!==0&&I%Ir==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(z*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),d.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=d,this._delta-=I,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const I=w.mousePos(this._el,d);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;if(this._delta!==0){const pe=this._type==="wheel"&&Math.abs(this._delta)>Ir?this._wheelZoomRate:this._defaultZoomRate;let _e=2/(1+Math.exp(-Math.abs(this._delta*pe)));this._delta<0&&_e!==0&&(_e=1/_e);const Ce=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(Ce*_e))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const I=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,D=this._startZoom,z=this._easing;let X,ne=!1;if(this._type==="wheel"&&D&&z){const pe=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),_e=z(pe);X=o.number(D,I,_e),pe<1?this._frameId||(this._frameId=!0):ne=!0}else X=I,ne=!0;return this._active=!0,ne&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ne,zoomDelta:X-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let I=o.ease;if(this._prevEase){const D=this._prevEase,z=(o.exported.now()-D.start)/D.duration,X=D.easing(z+.01)-D.easing(z),ne=.27/Math.sqrt(X*X+1e-4)*.01,pe=Math.sqrt(.0729-ne*ne);I=o.bezier(ne,pe,.25,1)}return this._prevEase={start:o.exported.now(),duration:d,easing:I},I}reset(){this._active=!1}}class lc{constructor(d,I){this._clickZoom=d,this._tapZoom=I}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Qo{constructor(){this.reset()}reset(){this._active=!1}dblclick(d,I){return d.preventDefault(),{cameraAnimation:D=>{D.easeTo({duration:300,zoom:D.getZoom()+(d.shiftKey?-1:1),around:D.unproject(I)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Js{constructor(){this._tap=new Ml({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(d,I,D){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?D.length>0&&(this._swipePoint=I[0],this._swipeTouch=D[0].identifier):this._tap.touchstart(d,I,D))}touchmove(d,I,D){if(this._tapTime){if(this._swipePoint){if(D[0].identifier!==this._swipeTouch)return;const z=I[0],X=z.y-this._swipePoint.y;return this._swipePoint=z,d.preventDefault(),this._active=!0,{zoomDelta:X/128}}}else this._tap.touchmove(d,I,D)}touchend(d,I,D){this._tapTime?this._swipePoint&&D.length===0&&this.reset():this._tap.touchend(d,I,D)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zo{constructor(d,I,D){this._el=d,this._mousePan=I,this._touchPan=D}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ya{constructor(d,I,D){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=I,this._mousePitch=D}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class uc{constructor(d,I,D,z){this._el=d,this._touchZoom=I,this._touchRotate=D,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Au=B=>B.zoom||B.drag||B.pitch||B.rotate;class Su extends o.Event{}function Jl(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}class no{constructor(d,I){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fa(d),this._bearingSnap=I.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(I),o.bindAll(["handleEvent","handleWindowEvent"],this);const D=this._el;this._listeners=[[D,"touchstart",{passive:!0}],[D,"touchmove",{passive:!1}],[D,"touchend",void 0],[D,"touchcancel",void 0],[D,"mousedown",void 0],[D,"mousemove",void 0],[D,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[D,"mouseover",void 0],[D,"mouseout",void 0],[D,"dblclick",void 0],[D,"click",void 0],[D,"keydown",{capture:!1}],[D,"keyup",void 0],[D,"wheel",{passive:!1}],[D,"contextmenu",void 0],[window,"blur",void 0]];for(const[z,X,ne]of this._listeners)w.addEventListener(z,X,z===document?this.handleWindowEvent:this.handleEvent,ne)}destroy(){for(const[d,I,D]of this._listeners)w.removeEventListener(d,I,d===document?this.handleWindowEvent:this.handleEvent,D)}_addDefaultHandlers(d){const I=this._map,D=I.getCanvasContainer();this._add("mapEvent",new Vu(I,d));const z=I.boxZoom=new aa(I,d);this._add("boxZoom",z);const X=new qu,ne=new Qo;I.doubleClickZoom=new lc(ne,X),this._add("tapZoom",X),this._add("clickZoom",ne);const pe=new Js;this._add("tapDragZoom",pe);const _e=I.touchPitch=new Bc(I);this._add("touchPitch",_e);const Ce=new gs(d),Be=new Cn(d);I.dragRotate=new Ya(d,Ce,Be),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",Be,["mouseRotate"]);const Je=new Dl(d),st=new No(d,I);I.dragPan=new Zo(D,Je,st),this._add("mousePan",Je),this._add("touchPan",st,["touchZoom","touchRotate"]);const Mt=new Hu,Ct=new mn;I.touchZoomRotate=new uc(D,Ct,Mt,pe),this._add("touchRotate",Mt,["touchPan","touchZoom"]),this._add("touchZoom",Ct,["touchPan","touchRotate"]);const Tt=I.scrollZoom=new zc(I,this);this._add("scrollZoom",Tt,["mousePan"]);const ei=I.keyboard=new ph;this._add("keyboard",ei),this._add("blockableMapEvent",new Ba(I));for(const ui of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[ui]&&I[ui].enable(d[ui])}_add(d,I,D){this._handlers.push({handlerName:d,handler:I,allowed:D}),this._handlersById[d]=I}stop(d){if(!this._updatingCamera){for(const{handler:I}of this._handlers)I.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Au(this._eventsInProgress))||this.isZooming()}_blockedByActive(d,I,D){for(const z in d)if(z!==D&&(!I||I.indexOf(z)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const I=[];for(const D of d)this._el.contains(D.target)&&I.push(D);return I}handleEvent(d,I){if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const D=d.type==="renderFrame"?void 0:d,z={needsRenderFrame:!1},X={},ne={},pe=d.touches,_e=pe?this._getMapTouches(pe):void 0,Ce=_e?w.touchPos(this._el,_e):w.mousePos(this._el,d);for(const{handlerName:st,handler:Mt,allowed:Ct}of this._handlers){if(!Mt.isEnabled())continue;let Tt;this._blockedByActive(ne,Ct,st)?Mt.reset():Mt[I||d.type]&&(Tt=Mt[I||d.type](d,Ce,_e),this.mergeHandlerResult(z,X,Tt,st,D),Tt&&Tt.needsRenderFrame&&this._triggerRenderFrame()),(Tt||Mt.isActive())&&(ne[st]=Mt)}const Be={};for(const st in this._previousActiveHandlers)ne[st]||(Be[st]=D);this._previousActiveHandlers=ne,(Object.keys(Be).length||Jl(z))&&(this._changes.push([z,X,Be]),this._triggerRenderFrame()),(Object.keys(ne).length||Jl(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Je}=z;Je&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Je(this._map))}mergeHandlerResult(d,I,D,z,X){if(!D)return;o.extend(d,D);const ne={handlerName:z,originalEvent:D.originalEvent||X};D.zoomDelta!==void 0&&(I.zoom=ne),D.panDelta!==void 0&&(I.drag=ne),D.pitchDelta!==void 0&&(I.pitch=ne),D.bearingDelta!==void 0&&(I.rotate=ne)}_applyChanges(){const d={},I={},D={};for(const[z,X,ne]of this._changes)z.panDelta&&(d.panDelta=(d.panDelta||new o.pointGeometry(0,0))._add(z.panDelta)),z.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(d.around=z.around),z.pinchAround!==void 0&&(d.pinchAround=z.pinchAround),z.noInertia&&(d.noInertia=z.noInertia),o.extend(I,X),o.extend(D,ne);this._updateMapTransform(d,I,D),this._changes=[]}_updateMapTransform(d,I,D){const z=this._map,X=z.transform,ne=z.style&&z.style.terrain;if(!(Jl(d)||ne&&this._drag))return this._fireEvents(I,D,!0);let{panDelta:pe,zoomDelta:_e,bearingDelta:Ce,pitchDelta:Be,around:Je,pinchAround:st}=d;st!==void 0&&(Je=st),z._stop(!0),Je=Je||z.transform.centerPoint;const Mt=X.pointLocation(pe?Je.sub(pe):Je);Ce&&(X.bearing+=Ce),Be&&(X.pitch+=Be),_e&&(X.zoom+=_e),ne?I.drag&&!this._drag?(this._drag={center:X.centerPoint,lngLat:X.pointLocation(Je),point:Je,handlerName:I.drag.handlerName},z.fire(new o.Event("freezeElevation",{freeze:!0}))):this._drag&&D[this._drag.handlerName]?(z.fire(new o.Event("freezeElevation",{freeze:!1})),this._drag=null):I.drag&&this._drag&&(X.center=X.pointLocation(X.centerPoint.sub(pe))):X.setLocationAtPoint(Mt,Je),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(I,D,!0)}_fireEvents(d,I,D){const z=Au(this._eventsInProgress),X=Au(d),ne={};for(const Be in d){const{originalEvent:Je}=d[Be];this._eventsInProgress[Be]||(ne[`${Be}start`]=Je),this._eventsInProgress[Be]=d[Be]}!z&&X&&this._fireEvent("movestart",X.originalEvent);for(const Be in ne)this._fireEvent(Be,ne[Be]);X&&this._fireEvent("move",X.originalEvent);for(const Be in d){const{originalEvent:Je}=d[Be];this._fireEvent(Be,Je)}const pe={};let _e;for(const Be in this._eventsInProgress){const{handlerName:Je,originalEvent:st}=this._eventsInProgress[Be];this._handlersById[Je].isActive()||(delete this._eventsInProgress[Be],_e=I[Je]||st,pe[`${Be}end`]=_e)}for(const Be in pe)this._fireEvent(Be,pe[Be]);const Ce=Au(this._eventsInProgress);if(D&&(z||X)&&!Ce){this._updatingCamera=!0;const Be=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Je=st=>st!==0&&-this._bearingSnap<st&&st<this._bearingSnap;Be?(Je(Be.bearing||this._map.getBearing())&&(Be.bearing=0),this._map.easeTo(Be,{originalEvent:_e})):(this._map.fire(new o.Event("moveend",{originalEvent:_e})),Je(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,I){this._map.fire(new o.Event(d,I?{originalEvent:I}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new Su("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ba={extend:(B,...d)=>o.extend(B,...d),run(B){B()},logToElement(B,d=!1,I="log"){const D=window.document.getElementById(I);D&&(d&&(D.innerHTML=""),D.innerHTML+=`<br>${B}`)}};class jo extends o.Evented{constructor(d,I){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=I.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,I){return this.jumpTo({center:d},I)}panBy(d,I,D){return d=o.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,o.extend({offset:d},I),D)}panTo(d,I,D){return this.easeTo(o.extend({center:d},I),D)}getZoom(){return this.transform.zoom}setZoom(d,I){return this.jumpTo({zoom:d},I),this}zoomTo(d,I,D){return this.easeTo(o.extend({zoom:d},I),D)}zoomIn(d,I){return this.zoomTo(this.getZoom()+1,d,I),this}zoomOut(d,I){return this.zoomTo(this.getZoom()-1,d,I),this}getBearing(){return this.transform.bearing}setBearing(d,I){return this.jumpTo({bearing:d},I),this}getPadding(){return this.transform.padding}setPadding(d,I){return this.jumpTo({padding:d},I),this}rotateTo(d,I,D){return this.easeTo(o.extend({bearing:d},I),D)}resetNorth(d,I){return this.rotateTo(0,o.extend({duration:1e3},d),I),this}resetNorthPitch(d,I){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},d),I),this}snapToNorth(d,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,I):this}getPitch(){return this.transform.pitch}setPitch(d,I){return this.jumpTo({pitch:d},I),this}cameraForBounds(d,I){d=o.LngLatBounds.convert(d);const D=I&&I.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),D,I)}_cameraForBoxAndBearing(d,I,D,z){const X={top:0,bottom:0,right:0,left:0};if(typeof(z=o.extend({padding:X,offset:[0,0],maxZoom:this.transform.maxZoom},z)).padding=="number"){const ki=z.padding;z.padding={top:ki,bottom:ki,right:ki,left:ki}}z.padding=o.extend(X,z.padding);const ne=this.transform,pe=ne.padding,_e=ne.project(o.LngLat.convert(d)),Ce=ne.project(o.LngLat.convert(I)),Be=_e.rotate(-D*Math.PI/180),Je=Ce.rotate(-D*Math.PI/180),st=new o.pointGeometry(Math.max(Be.x,Je.x),Math.max(Be.y,Je.y)),Mt=new o.pointGeometry(Math.min(Be.x,Je.x),Math.min(Be.y,Je.y)),Ct=st.sub(Mt),Tt=(ne.width-(pe.left+pe.right+z.padding.left+z.padding.right))/Ct.x,ei=(ne.height-(pe.top+pe.bottom+z.padding.top+z.padding.bottom))/Ct.y;if(ei<0||Tt<0)return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ui=Math.min(ne.scaleZoom(ne.scale*Math.min(Tt,ei)),z.maxZoom),vi=o.pointGeometry.convert(z.offset),jt=new o.pointGeometry((z.padding.left-z.padding.right)/2,(z.padding.top-z.padding.bottom)/2).rotate(D*Math.PI/180),Oi=vi.add(jt).mult(ne.scale/ne.zoomScale(ui));return{center:ne.unproject(_e.add(Ce).div(2).sub(Oi)),zoom:ui,bearing:D}}fitBounds(d,I,D){return this._fitInternal(this.cameraForBounds(d,I),I,D)}fitScreenCoordinates(d,I,D,z,X){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.pointGeometry.convert(d)),this.transform.pointLocation(o.pointGeometry.convert(I)),D,z),z,X)}_fitInternal(d,I,D){return d?(delete(I=o.extend(d,I)).padding,I.linear?this.easeTo(I,D):this.flyTo(I,D)):this}jumpTo(d,I){this.stop();const D=this.transform;let z=!1,X=!1,ne=!1;return"zoom"in d&&D.zoom!==+d.zoom&&(z=!0,D.zoom=+d.zoom),d.center!==void 0&&(D.center=o.LngLat.convert(d.center)),"bearing"in d&&D.bearing!==+d.bearing&&(X=!0,D.bearing=+d.bearing),"pitch"in d&&D.pitch!==+d.pitch&&(ne=!0,D.pitch=+d.pitch),d.padding==null||D.isPaddingEqual(d.padding)||(D.padding=d.padding),this.fire(new o.Event("movestart",I)).fire(new o.Event("move",I)),z&&this.fire(new o.Event("zoomstart",I)).fire(new o.Event("zoom",I)).fire(new o.Event("zoomend",I)),X&&this.fire(new o.Event("rotatestart",I)).fire(new o.Event("rotate",I)).fire(new o.Event("rotateend",I)),ne&&this.fire(new o.Event("pitchstart",I)).fire(new o.Event("pitch",I)).fire(new o.Event("pitchend",I)),this.fire(new o.Event("moveend",I))}calculateCameraOptionsFromTo(d,I,D,z=0){const X=o.MercatorCoordinate.fromLngLat(d,I),ne=o.MercatorCoordinate.fromLngLat(D,z),pe=ne.x-X.x,_e=ne.y-X.y,Ce=ne.z-X.z,Be=Math.hypot(pe,_e,Ce);if(Be===0)throw new Error("Can't calculate camera options with same From and To");const Je=Math.hypot(pe,_e),st=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Be/this.transform.tileSize),Mt=180*Math.atan2(pe,-_e)/Math.PI;let Ct=180*Math.acos(Je/Be)/Math.PI;return Ct=Ce<0?90-Ct:90+Ct,{center:ne.toLngLat(),zoom:st,pitch:Ct,bearing:Mt}}easeTo(d,I){this._stop(!1,d.easeId),((d=o.extend({offset:[0,0],duration:500,easing:o.ease},d)).animate===!1||!d.essential&&o.exported.prefersReducedMotion)&&(d.duration=0);const D=this.transform,z=this.getZoom(),X=this.getBearing(),ne=this.getPitch(),pe=this.getPadding(),_e="zoom"in d?+d.zoom:z,Ce="bearing"in d?this._normalizeBearing(d.bearing,X):X,Be="pitch"in d?+d.pitch:ne,Je="padding"in d?d.padding:D.padding,st=o.pointGeometry.convert(d.offset);let Mt=D.centerPoint.add(st);const Ct=D.pointLocation(Mt),Tt=o.LngLat.convert(d.center||Ct);this._normalizeCenter(Tt);const ei=D.project(Ct),ui=D.project(Tt).sub(ei),vi=D.zoomScale(_e-z);let jt,Oi;d.around&&(jt=o.LngLat.convert(d.around),Oi=D.locationPoint(jt));const ki={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||_e!==z,this._rotating=this._rotating||X!==Ce,this._pitching=this._pitching||Be!==ne,this._padding=!D.isPaddingEqual(Je),this._easeId=d.easeId,this._prepareEase(I,d.noMoveStart,ki),this._ease(Wi=>{if(this._zooming&&(D.zoom=o.number(z,_e,Wi)),this._rotating&&(D.bearing=o.number(X,Ce,Wi)),this._pitching&&(D.pitch=o.number(ne,Be,Wi)),this._padding&&(D.interpolatePadding(pe,Je,Wi),Mt=D.centerPoint.add(st)),jt)D.setLocationAtPoint(jt,Oi);else{const Vi=D.zoomScale(D.zoom-z),ln=_e>z?Math.min(2,vi):Math.max(.5,vi),Ui=Math.pow(ln,1-Wi),Mn=D.unproject(ei.add(ui.mult(Wi*Ui)).mult(Vi));D.setLocationAtPoint(D.renderWorldCopies?Mn.wrap():Mn,Mt)}this._fireMoveEvents(I)},Wi=>{this._afterEase(I,Wi)},d),this}_prepareEase(d,I,D={}){this._moving=!0,this.fire(new o.Event("freezeElevation",{freeze:!0})),I||D.moving||this.fire(new o.Event("movestart",d)),this._zooming&&!D.zooming&&this.fire(new o.Event("zoomstart",d)),this._rotating&&!D.rotating&&this.fire(new o.Event("rotatestart",d)),this._pitching&&!D.pitching&&this.fire(new o.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new o.Event("move",d)),this._zooming&&this.fire(new o.Event("zoom",d)),this._rotating&&this.fire(new o.Event("rotate",d)),this._pitching&&this.fire(new o.Event("pitch",d))}_afterEase(d,I){if(this._easeId&&I&&this._easeId===I)return;delete this._easeId,this.fire(new o.Event("freezeElevation",{freeze:!1}));const D=this._zooming,z=this._rotating,X=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new o.Event("zoomend",d)),z&&this.fire(new o.Event("rotateend",d)),X&&this.fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d))}flyTo(d,I){if(!d.essential&&o.exported.prefersReducedMotion){const j=o.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(j,I)}this.stop(),d=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},d);const D=this.transform,z=this.getZoom(),X=this.getBearing(),ne=this.getPitch(),pe=this.getPadding(),_e="zoom"in d?o.clamp(+d.zoom,D.minZoom,D.maxZoom):z,Ce="bearing"in d?this._normalizeBearing(d.bearing,X):X,Be="pitch"in d?+d.pitch:ne,Je="padding"in d?d.padding:D.padding,st=D.zoomScale(_e-z),Mt=o.pointGeometry.convert(d.offset);let Ct=D.centerPoint.add(Mt);const Tt=D.pointLocation(Ct),ei=o.LngLat.convert(d.center||Tt);this._normalizeCenter(ei);const ui=D.project(Tt),vi=D.project(ei).sub(ui);let jt=d.curve;const Oi=Math.max(D.width,D.height),ki=Oi/st,Wi=vi.mag();if("minZoom"in d){const j=o.clamp(Math.min(d.minZoom,z,_e),D.minZoom,D.maxZoom),K=Oi/D.zoomScale(j-z);jt=Math.sqrt(K/Wi*2)}const Vi=jt*jt;function ln(j){const K=(ki*ki-Oi*Oi+(j?-1:1)*Vi*Vi*Wi*Wi)/(2*(j?ki:Oi)*Vi*Wi);return Math.log(Math.sqrt(K*K+1)-K)}function Ui(j){return(Math.exp(j)-Math.exp(-j))/2}function Mn(j){return(Math.exp(j)+Math.exp(-j))/2}const _n=ln(0);let jn=function(j){return Mn(_n)/Mn(_n+jt*j)},Cr=function(j){return Oi*((Mn(_n)*(Ui(K=_n+jt*j)/Mn(K))-Ui(_n))/Vi)/Wi;var K},Lr=(ln(1)-_n)/jt;if(Math.abs(Wi)<1e-6||!isFinite(Lr)){if(Math.abs(Oi-ki)<1e-6)return this.easeTo(d,I);const j=ki<Oi?-1:1;Lr=Math.abs(Math.log(ki/Oi))/jt,Cr=function(){return 0},jn=function(K){return Math.exp(j*jt*K)}}return d.duration="duration"in d?+d.duration:1e3*Lr/("screenSpeed"in d?+d.screenSpeed/jt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=X!==Ce,this._pitching=Be!==ne,this._padding=!D.isPaddingEqual(Je),this._prepareEase(I,!1),this._ease(j=>{const K=j*Lr,ue=1/jn(K);D.zoom=j===1?_e:z+D.scaleZoom(ue),this._rotating&&(D.bearing=o.number(X,Ce,j)),this._pitching&&(D.pitch=o.number(ne,Be,j)),this._padding&&(D.interpolatePadding(pe,Je,j),Ct=D.centerPoint.add(Mt));const ve=j===1?ei:D.unproject(ui.add(vi.mult(Cr(K))).mult(ue));D.setLocationAtPoint(D.renderWorldCopies?ve.wrap():ve,Ct),this._fireMoveEvents(I)},()=>this._afterEase(I),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,I)}if(!d){const D=this.handlers;D&&D.stop(!1)}return this}_ease(d,I,D){D.animate===!1||D.duration===0?(d(1),I()):(this._easeStart=o.exported.now(),this._easeOptions=D,this._onEaseFrame=d,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,I){d=o.wrap(d,-180,180);const D=Math.abs(d-I);return Math.abs(d-360-I)<D&&(d-=360),Math.abs(d+360-I)<D&&(d+=360),d}_normalizeCenter(d){const I=this.transform;if(!I.renderWorldCopies||I.lngRange)return;const D=d.lng-I.center.lng;d.lng+=D>180?-360:D<-180?360:0}}class ku{constructor(d={}){this.options=d,o.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,I){const D=this._map._getUIString(`AttributionControl.${I}`);d.title=D,d.setAttribute("aria-label",D)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(z=>typeof z!="string"?"":z)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const I=this._map.style.sourceCaches;for(const z in I){const X=I[z];if(X.used||X.usedForTerrain){const ne=X.getSource();ne.attribution&&d.indexOf(ne.attribution)<0&&d.push(ne.attribution)}}d=d.filter(z=>String(z).trim()),d.sort((z,X)=>z.length-X.length),d=d.filter((z,X)=>{for(let ne=X+1;ne<d.length;ne++)if(d[ne].indexOf(z)>=0)return!1;return!0});const D=d.join(" | ");D!==this._attribHTML&&(this._attribHTML=D,d.length?(this._innerContainer.innerHTML=D,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Cu{constructor(d={}){this.options=d,o.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl mapboxgl-ctrl");const I=w.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://maplibre.org/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const d=this._container.children;if(d.length){const I=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&I.classList.add("maplibregl-compact","mapboxgl-compact"):I.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Nc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const I=++this._id;return this._queue.push({callback:d,id:I,cancelled:!1}),I}remove(d){const I=this._currentlyRunning,D=I?this._queue.concat(I):this._queue;for(const z of D)if(z.id===d)return void(z.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const I=this._currentlyRunning=this._queue;this._queue=[];for(const D of I)if(!D.cancelled&&(D.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const jh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},fl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Uh={showCompass:!0,showZoom:!0,visualizePitch:!1};class dl{constructor(d,I,D=!1){this._clickTolerance=10,this.element=I,this.mouseRotate=new gs({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,D&&(this.mousePitch=new Cn({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(I,"mousedown",this.mousedown),w.addEventListener(I,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(I,"touchmove",this.touchmove),w.addEventListener(I,"touchend",this.touchend),w.addEventListener(I,"touchcancel",this.reset)}down(d,I){this.mouseRotate.mousedown(d,I),this.mousePitch&&this.mousePitch.mousedown(d,I),w.disableDrag()}move(d,I){const D=this.map,z=this.mouseRotate.mousemoveWindow(d,I);if(z&&z.bearingDelta&&D.setBearing(D.getBearing()+z.bearingDelta),this.mousePitch){const X=this.mousePitch.mousemoveWindow(d,I);X&&X.pitchDelta&&D.setPitch(D.getPitch()+X.pitchDelta)}}off(){const d=this.element;w.removeEventListener(d,"mousedown",this.mousedown),w.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(d,"touchmove",this.touchmove),w.removeEventListener(d,"touchend",this.touchend),w.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup)}mousedown(d){this.down(o.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),w.mousePos(this.element,d)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(d){this.move(d,w.mousePos(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function cc(B,d,I){if(B=new o.LngLat(B.lng,B.lat),d){const D=new o.LngLat(B.lng-360,B.lat),z=new o.LngLat(B.lng+360,B.lat),X=I.locationPoint(B).distSqr(d);I.locationPoint(D).distSqr(d)<X?B=D:I.locationPoint(z).distSqr(d)<X&&(B=z)}for(;Math.abs(B.lng-I.center.lng)>180;){const D=I.locationPoint(B);if(D.x>=0&&D.y>=0&&D.x<=I.width&&D.y<=I.height)break;B.lng>I.center.lng?B.lng-=360:B.lng+=360}return B}const Qn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gr(B,d,I){const D=B.classList;for(const z in Qn)D.remove(`maplibregl-${I}-anchor-${z}`,`mapboxgl-${I}-anchor-${z}`);D.add(`maplibregl-${I}-anchor-${d}`,`mapboxgl-${I}-anchor-${d}`)}class Wu extends o.Evented{constructor(d,I){if(super(),(d instanceof HTMLElement||I)&&(d=o.extend({element:d},I)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=o.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const D=w.createNS("http://www.w3.org/2000/svg","svg"),z=41,X=27;D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height",`${z}px`),D.setAttributeNS(null,"width",`${X}px`),D.setAttributeNS(null,"viewBox",`0 0 ${X} ${z}`);const ne=w.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"stroke","none"),ne.setAttributeNS(null,"stroke-width","1"),ne.setAttributeNS(null,"fill","none"),ne.setAttributeNS(null,"fill-rule","evenodd");const pe=w.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"fill-rule","nonzero");const _e=w.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(3.0, 29.0)"),_e.setAttributeNS(null,"fill","#000000");const Ce=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const vi of Ce){const jt=w.createNS("http://www.w3.org/2000/svg","ellipse");jt.setAttributeNS(null,"opacity","0.04"),jt.setAttributeNS(null,"cx","10.5"),jt.setAttributeNS(null,"cy","5.80029008"),jt.setAttributeNS(null,"rx",vi.rx),jt.setAttributeNS(null,"ry",vi.ry),_e.appendChild(jt)}const Be=w.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"fill",this._color);const Je=w.createNS("http://www.w3.org/2000/svg","path");Je.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Be.appendChild(Je);const st=w.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"opacity","0.25"),st.setAttributeNS(null,"fill","#000000");const Mt=w.createNS("http://www.w3.org/2000/svg","path");Mt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),st.appendChild(Mt);const Ct=w.createNS("http://www.w3.org/2000/svg","g");Ct.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ct.setAttributeNS(null,"fill","#FFFFFF");const Tt=w.createNS("http://www.w3.org/2000/svg","g");Tt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ei=w.createNS("http://www.w3.org/2000/svg","circle");ei.setAttributeNS(null,"fill","#000000"),ei.setAttributeNS(null,"opacity","0.25"),ei.setAttributeNS(null,"cx","5.5"),ei.setAttributeNS(null,"cy","5.5"),ei.setAttributeNS(null,"r","5.4999962");const ui=w.createNS("http://www.w3.org/2000/svg","circle");ui.setAttributeNS(null,"fill","#FFFFFF"),ui.setAttributeNS(null,"cx","5.5"),ui.setAttributeNS(null,"cy","5.5"),ui.setAttributeNS(null,"r","5.4999962"),Tt.appendChild(ei),Tt.appendChild(ui),pe.appendChild(_e),pe.appendChild(Be),pe.appendChild(st),pe.appendChild(Ct),pe.appendChild(Tt),D.appendChild(pe),D.setAttributeNS(null,"height",z*this._scale+"px"),D.setAttributeNS(null,"width",X*this._scale+"px"),this._element.appendChild(D),this._offset=o.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()}),gr(this._element,this._anchor,"marker"),this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=o.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const z=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(38.1-13.5+z)],"bottom-right":[-z,-1*(38.1-13.5+z)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(d){const I=d.code,D=d.charCode||d.keyCode;I!=="Space"&&I!=="Enter"&&D!==32&&D!==13||this.togglePopup()}_onMapClick(d){const I=d.originalEvent.target,D=this._element;this._popup&&(I===D||D.contains(I))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}_update(d){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=cc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(I=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Qn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${I}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const z=this._map.unproject(this._pos),X=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=z.distanceTo(this._lngLat)>20*X?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(d){return this._offset=o.pointGeometry.convert(d),this._update(),this}_onMove(d){if(!this._isDragging){const I=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ss,Wo=0,Ql=!1;const pl={maxWidth:100,unit:"metric"};function mh(B,d,I){const D=I&&I.maxWidth||100,z=B._container.clientHeight/2,X=B.unproject([0,z]),ne=B.unproject([D,z]),pe=X.distanceTo(ne);if(I&&I.unit==="imperial"){const _e=3.2808*pe;_e>5280?$l(d,D,_e/5280,B._getUIString("ScaleControl.Miles")):$l(d,D,_e,B._getUIString("ScaleControl.Feet"))}else I&&I.unit==="nautical"?$l(d,D,pe/1852,B._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?$l(d,D,pe/1e3,B._getUIString("ScaleControl.Kilometers")):$l(d,D,pe,B._getUIString("ScaleControl.Meters"))}function $l(B,d,I,D){const z=function(X){const ne=Math.pow(10,`${Math.floor(X)}`.length-1);let pe=X/ne;return pe=pe>=10?10:pe>=5?5:pe>=3?3:pe>=2?2:pe>=1?1:function(_e){const Ce=Math.pow(10,Math.ceil(-Math.log(_e)/Math.LN10));return Math.round(_e*Ce)/Ce}(pe),ne*pe}(I);B.style.width=d*(z/I)+"px",B.innerHTML=`${z}&nbsp;${D}`}const ss={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ys=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function gh(B){if(B){if(typeof B=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new o.pointGeometry(0,0),top:new o.pointGeometry(0,B),"top-left":new o.pointGeometry(d,d),"top-right":new o.pointGeometry(-d,d),bottom:new o.pointGeometry(0,-B),"bottom-left":new o.pointGeometry(d,-d),"bottom-right":new o.pointGeometry(-d,-d),left:new o.pointGeometry(B,0),right:new o.pointGeometry(-B,0)}}if(B instanceof o.pointGeometry||Array.isArray(B)){const d=o.pointGeometry.convert(B);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:o.pointGeometry.convert(B.center||[0,0]),top:o.pointGeometry.convert(B.top||[0,0]),"top-left":o.pointGeometry.convert(B["top-left"]||[0,0]),"top-right":o.pointGeometry.convert(B["top-right"]||[0,0]),bottom:o.pointGeometry.convert(B.bottom||[0,0]),"bottom-left":o.pointGeometry.convert(B["bottom-left"]||[0,0]),"bottom-right":o.pointGeometry.convert(B["bottom-right"]||[0,0]),left:o.pointGeometry.convert(B.left||[0,0]),right:o.pointGeometry.convert(B.right||[0,0])}}return gh(new o.pointGeometry(0,0))}const la={supported:c,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends jo{constructor(B){var d;if(o.PerformanceUtils.mark(o.PerformanceMarkers.create),(B=o.extend({},fl,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Kl(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies),{bearingSnap:B.bearingSnap}),this._interactive=B.interactive,this._cooperativeGestures=B.cooperativeGestures,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new Nc,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},jh,B.locale),this._clickTolerance=B.clickTolerance,this._pixelRatio=(d=B.pixelRatio)!==null&&d!==void 0?d:devicePixelRatio,this._requestManager=new x(B.transformRequest),typeof B.container=="string"){if(this._container=document.getElementById(B.container),!this._container)throw new Error(`Container '${B.container}' not found.`)}else{if(!(B.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new no(this,B),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=B.hash&&new Oa(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,o.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new ku({customAttribution:B.customAttribution})),B.maplibreLogo&&this.addControl(new Cu,B.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new o.Event(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new o.Event(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new o.Event("sourcedataabort",I))})}_getMapId(){return this._mapId}addControl(B,d){if(d===void 0&&(d=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const I=B.onAdd(this);this._controls.push(B);const D=this._controlPositions[d];return d.indexOf("bottom")!==-1?D.insertBefore(I,D.firstChild):D.appendChild(I),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(B);return d>-1&&this._controls.splice(d,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}calculateCameraOptionsFromTo(B,d,I,D){return D==null&&this.style.terrain&&(D=this.transform.getElevation(I,this.style.terrain)),super.calculateCameraOptionsFromTo(B,d,I,D)}resize(B){const d=this._containerDimensions(),I=d[0],D=d[1];this._resizeCanvas(I,D,this.getPixelRatio()),this.transform.resize(I,D),this.painter.resize(I,D,this.getPixelRatio());const z=!this._moving;return z&&(this.stop(),this.fire(new o.Event("movestart",B)).fire(new o.Event("move",B))),this.fire(new o.Event("resize",B)),z&&this.fire(new o.Event("moveend",B)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(B){const[d,I]=this._containerDimensions();this._pixelRatio=B,this._resizeCanvas(d,I,B),this.painter.resize(d,I,B)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(o.LngLatBounds.convert(B)),this._update()}setMinZoom(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B==null?60:B)>85)throw new Error("maxPitch must be less than or equal to 85");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.renderWorldCopies=B,this._update()}project(B){return this.transform.locationPoint(o.LngLat.convert(B),this.style&&this.style.terrain)}unproject(B){return this.transform.pointLocation(o.pointGeometry.convert(B),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(B,d,I){if(B==="mouseenter"||B==="mouseover"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:X=>{const ne=this.getLayer(d)?this.queryRenderedFeatures(X.point,{layers:[d]}):[];ne.length?D||(D=!0,I.call(this,new hs(B,this,X.originalEvent,{features:ne}))):D=!1},mouseout:()=>{D=!1}}}}if(B==="mouseleave"||B==="mouseout"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:ne=>{(this.getLayer(d)?this.queryRenderedFeatures(ne.point,{layers:[d]}):[]).length?D=!0:D&&(D=!1,I.call(this,new hs(B,this,ne.originalEvent)))},mouseout:ne=>{D&&(D=!1,I.call(this,new hs(B,this,ne.originalEvent)))}}}}{const D=z=>{const X=this.getLayer(d)?this.queryRenderedFeatures(z.point,{layers:[d]}):[];X.length&&(z.features=X,I.call(this,z),delete z.features)};return{layer:d,listener:I,delegates:{[B]:D}}}}on(B,d,I){if(I===void 0)return super.on(B,d);const D=this._createDelegatedListener(B,d,I);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(D);for(const z in D.delegates)this.on(z,D.delegates[z]);return this}once(B,d,I){if(I===void 0)return super.once(B,d);const D=this._createDelegatedListener(B,d,I);for(const z in D.delegates)this.once(z,D.delegates[z]);return this}off(B,d,I){return I===void 0?super.off(B,d):(this._delegatedListeners&&this._delegatedListeners[B]&&(D=>{const z=this._delegatedListeners[B];for(let X=0;X<z.length;X++){const ne=z[X];if(ne.layer===d&&ne.listener===I){for(const pe in ne.delegates)this.off(pe,ne.delegates[pe]);return z.splice(X,1),this}}})(),this)}queryRenderedFeatures(B,d){if(!this.style)return[];let I;if(d!==void 0||B===void 0||B instanceof o.pointGeometry||Array.isArray(B)||(d=B,B=void 0),d=d||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof o.pointGeometry||typeof B[0]=="number")I=[o.pointGeometry.convert(B)];else{const D=o.pointGeometry.convert(B[0]),z=o.pointGeometry.convert(B[1]);I=[D,new o.pointGeometry(z.x,D.y),z,new o.pointGeometry(D.x,z.y),D]}return this.style.queryRenderedFeatures(I,d,this.transform)}querySourceFeatures(B,d){return this.style.querySourceFeatures(B,d)}setStyle(B,d){return(d=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(B,d))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const d=this._locale[B];if(d==null)throw new Error(`Missing UI string '${B}'`);return d}_updateStyle(B,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new is(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new is(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,d){if(typeof B=="string"){const I=this._requestManager.transformRequest(B,o.ResourceType.Style);o.getJSON(I,(D,z)=>{D?this.fire(new o.ErrorEvent(D)):z&&this._updateDiff(z,d)})}else typeof B=="object"&&this._updateDiff(B,d)}_updateDiff(B,d){try{this.style.setState(B)&&this._update(!0)}catch(I){o.warnOnce(`Unable to perform style diff: ${I.message||I.error||I}.  Rebuilding the style from scratch.`),this._updateStyle(B,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")}addSource(B,d){return this._lazyInitEmptyStyle(),this.style.addSource(B,d),this._update(!0)}isSourceLoaded(B){const d=this.style&&this.style.sourceCaches[B];if(d!==void 0)return d.loaded();this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${B}'`)))}setTerrain(B){return this.style.setTerrain(B),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const B=this.style&&this.style.sourceCaches;for(const d in B){const I=B[d]._tiles;for(const D in I){const z=I[D];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0}addSourceType(B,d,I){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,d,I)}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}addImage(B,d,{pixelRatio:I=1,sdf:D=!1,stretchX:z,stretchY:X,content:ne}={}){if(this._lazyInitEmptyStyle(),d instanceof HTMLImageElement||o.isImageBitmap(d)){const{width:pe,height:_e,data:Ce}=o.exported.getImageData(d);this.style.addImage(B,{data:new o.RGBAImage({width:pe,height:_e},Ce),pixelRatio:I,stretchX:z,stretchY:X,content:ne,sdf:D,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:_e,data:Ce}=d,Be=d;this.style.addImage(B,{data:new o.RGBAImage({width:pe,height:_e},new Uint8Array(Ce)),pixelRatio:I,stretchX:z,stretchY:X,content:ne,sdf:D,version:0,userImage:Be}),Be.onAdd&&Be.onAdd(this,B)}}}updateImage(B,d){const I=this.style.getImage(B);if(!I)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const D=d instanceof HTMLImageElement||o.isImageBitmap(d)?o.exported.getImageData(d):d,{width:z,height:X,data:ne}=D;if(z===void 0||X===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(z!==I.data.width||X!==I.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const pe=!(d instanceof HTMLImageElement||o.isImageBitmap(d));I.data.replace(ne,pe),this.style.updateImage(B,I)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B,d){o.getImage(this._requestManager.transformRequest(B,o.ResourceType.Image),d)}listImages(){return this.style.listImages()}addLayer(B,d){return this._lazyInitEmptyStyle(),this.style.addLayer(B,d),this._update(!0)}moveLayer(B,d){return this.style.moveLayer(B,d),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}setLayerZoomRange(B,d,I){return this.style.setLayerZoomRange(B,d,I),this._update(!0)}setFilter(B,d,I={}){return this.style.setFilter(B,d,I),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,d,I,D={}){return this.style.setPaintProperty(B,d,I,D),this._update(!0)}getPaintProperty(B,d){return this.style.getPaintProperty(B,d)}setLayoutProperty(B,d,I,D={}){return this.style.setLayoutProperty(B,d,I,D),this._update(!0)}getLayoutProperty(B,d){return this.style.getLayoutProperty(B,d)}setLight(B,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(B,d){return this.style.setFeatureState(B,d),this._update()}removeFeatureState(B,d){return this.style.removeFeatureState(B,d),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,d=0;return this._container&&(B=this._container.clientWidth||400,d=this._container.clientHeight||300),[B,d]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map","mapboxgl-map");const d=this._canvasContainer=w.create("div","maplibregl-canvas-container mapboxgl-canvas-container",B);this._interactive&&d.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const I=this._containerDimensions();this._resizeCanvas(I[0],I[1],this.getPixelRatio());const D=this._controlContainer=w.create("div","maplibregl-control-container mapboxgl-control-container",B),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(X=>{z[X]=w.create("div",`maplibregl-ctrl-${X} mapboxgl-ctrl-${X}`,D)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const B=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",B);let d="Control",I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",d="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${I}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",D=>{D.key===d&&(this._metaPress=!0)}),document.addEventListener("keyup",D=>{D.key===d&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",D=>{this._onCooperativeGesture(D,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(B,d,I){this._canvas.width=I*B,this._canvas.height=I*d,this._canvas.style.width=`${B}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const B=o.extend({},c.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);d?(this.painter=new bu(d,this.transform),o.exported$1.testSupport(d)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:B}))}_contextRestored(B){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:B}))}_onMapScroll(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(B,d,I){return!d&&I<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){let d,I=0;const D=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=D.createQueryEXT(),D.beginQueryEXT(D.TIME_ELAPSED_EXT,d),I=o.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,pe=o.exported.now();this.style.zoomHistory.update(ne,pe);const _e=new o.EvaluationParameters(ne,{now:pe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ce=_e.crossFadingFactor();Ce===1&&Ce===this._crossFadingFactor||(z=!0,this._crossFadingFactor=Ce),this.style.update(_e)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.load),this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ne=o.exported.now()-I;D.endQueryEXT(D.TIME_ELAPSED_EXT,d),setTimeout(()=>{const pe=D.getQueryObjectEXT(d,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(d),this.fire(new o.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:pe}))},50)}if(this.listens("gpu-timing-layer")){const ne=this.painter.collectGpuTimers();setTimeout(()=>{const pe=this.painter.queryGpuTimers(ne);this.fire(new o.Event("gpu-timing-layer",{layerTimes:pe}))},50)}const X=this._sourcesDirty||this._styleDirty||this._placementDirty;return X||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const B=this.painter.context.gl.getExtension("WEBGL_lose_context");B&&B.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&w.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),o.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.exported.frame(B=>{o.PerformanceUtils.frame(B),this._frame=null,this._render(B)}))}_onWindowOnline(){this._update()}_onWindowResize(B){this._trackResize&&this.resize({originalEvent:B})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}_setCacheLimits(B,d){o.setCacheLimits(B,d)}get version(){return"2.4.0"}},NavigationControl:class{constructor(B){this.options=o.extend({},Uh,B),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const B=this._map.getZoom(),d=B===this._map.getMaxZoom(),I=B===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())}_rotateCompassArrow(){const B=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=B}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,d){const I=w.create("button",B,this._container);return I.type="button",I.addEventListener("click",d),I}_setButtonTitle(B,d){const I=this._map._getUIString(`NavigationControl.${d}`);B.title=I,B.setAttribute("aria-label",I)}},GeolocateControl:class extends o.Evented{constructor(B){super(),this.options=o.extend({},hc,B),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(B){var d;return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,Ss!==void 0?d(Ss):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(I=>{Ss=I.state!=="denied",d(Ss)}):(Ss=!!window.navigator.geolocation,d(Ss)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wo=0,Ql=!1}_isOutOfMapMaxBounds(B){const d=this._map.getMaxBounds(),I=B.coords;return d&&(I.longitude<d.getWest()||I.longitude>d.getEast()||I.latitude<d.getSouth()||I.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(B),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",B)),this._finish()}}_updateCamera(B){const d=new o.LngLat(B.coords.longitude,B.coords.latitude),I=B.coords.accuracy,D=this._map.getBearing(),z=o.extend({bearing:D},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(I),z,{geolocateSource:!0})}_updateMarker(B){if(B){const d=new o.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const B=this._map._container.clientHeight/2,d=this._map.unproject([0,B]),I=this._map.unproject([1,B]),D=d.distanceTo(I),z=Math.ceil(2*this._accuracy/D);this._circleElement.style.width=`${z}px`,this._circleElement.style.height=`${z}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(B){if(this._map){if(this.options.trackUserLocation)if(B.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(B.code===3&&Ql)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",B)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(B){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",B===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Wu(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wo--,Ql=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wo++,Wo>1?(B={maximumAge:6e5,timeout:0},Ql=!0):(B=this.options.positionOptions,Ql=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ku,LogoControl:Cu,ScaleControl:class{constructor(B){this.options=o.extend({},pl,B),o.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){mh(this._map,this._container,this.options)}onAdd(B){return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(B){this.options.unit=B,mh(this._map,this._container,this.options)}},FullscreenControl:class{constructor(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const B=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(B){this.options=B,o.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(B){return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends o.Evented{constructor(B){super(),this.options=o.extend(Object.create(ss),B),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=o.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const d=document.createDocumentFragment(),I=document.createElement("body");let D;for(I.innerHTML=B;D=I.firstChild,D;)d.appendChild(D);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){this._container&&this._container.classList.add(B)}removeClassName(B){this._container&&this._container.classList.remove(B)}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(B){this._update(B.point)}_onMouseMove(B){this._update(B.point)}_onDrag(B){this._update(B.point)}_update(B){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(X=>this._container.classList.add(X)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=cc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!B))return;const d=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat);let I=this.options.anchor;const D=gh(this.options.offset);if(!I){const X=this._container.offsetWidth,ne=this._container.offsetHeight;let pe;pe=d.y+D.bottom.y<ne?["top"]:d.y>this._map.transform.height-ne?["bottom"]:[],d.x<X/2?pe.push("left"):d.x>this._map.transform.width-X/2&&pe.push("right"),I=pe.length===0?"bottom":pe.join("-")}const z=d.add(D[I]).round();w.setTransform(this._container,`${Qn[I]} translate(${z.x}px,${z.y}px)`),gr(this._container,I,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(ys);B&&B.focus()}_onClose(){this.remove()}},Marker:Wu,Style:is,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,AJAXError:o.AJAXError,config:o.config,CanvasSource:Ue,GeoJSONSource:Pt,ImageSource:be,RasterDEMTileSource:rt,RasterTileSource:Ae,VectorTileSource:me,VideoSource:Le,prewarm:function(){Qe().acquire(ni)},clearPrewarmedResources:function(){const B=xt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(ni),xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return mt.workerCount},set workerCount(B){mt.workerCount=B},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){o.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage(B){o.clearTileCache(B)},workerUrl:"",addProtocol(B,d){o.config.REGISTERED_PROTOCOLS[B]=d},removeProtocol(B){delete o.config.REGISTERED_PROTOCOLS[B]}};return ba.extend(la,{isSafari:o.isSafari,getPerformanceMetrics:o.PerformanceUtils.getPerformanceMetrics}),la});var p=l;return p})})(tc);const lw=tc.exports;var ig={};const gk={},yk=Object.freeze(Object.defineProperty({__proto__:null,default:gk},Symbol.toStringTag,{value:"Module"})),Ym=mk(yk);(function(i){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.4"};if(i.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=Ym,n=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=n.document,e.jsdomImplForWrapper=Ym.implForWrapper,e.nodeCanvas=Ym.Canvas,e.window=n,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function o(x,C){if(!!this.__eventListeners[x]){var T=this.__eventListeners[x];C?T[T.indexOf(C)]=!1:e.util.array.fill(T,!1)}}function c(x,C){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var T in x)this.on(T,x[T]);else this.__eventListeners[x]||(this.__eventListeners[x]=[]),this.__eventListeners[x].push(C);return this}function g(x,C){var T=function(){C.apply(this,arguments),this.off(x,T)}.bind(this);this.on(x,T)}function _(x,C){if(arguments.length===1)for(var T in x)g.call(this,T,x[T]);else g.call(this,x,C);return this}function v(x,C){if(!this.__eventListeners)return this;if(arguments.length===0)for(x in this.__eventListeners)o.call(this,x);else if(arguments.length===1&&typeof arguments[0]=="object")for(var T in x)o.call(this,T,x[T]);else o.call(this,x,C);return this}function w(x,C){if(!this.__eventListeners)return this;var T=this.__eventListeners[x];if(!T)return this;for(var k=0,M=T.length;k<M;k++)T[k]&&T[k].call(this,C||{});return this.__eventListeners[x]=T.filter(function(O){return O!==!1}),this}e.Observable={fire:w,on:c,once:_,off:v}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var o=0,c=arguments.length;o<c;o++)this._onObjectAdded(arguments[o]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(o,c,g){var _=this._objects;return g?_[c]=o:_.splice(c,0,o),this._onObjectAdded&&this._onObjectAdded(o),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var o=this._objects,c,g=!1,_=0,v=arguments.length;_<v;_++)c=o.indexOf(arguments[_]),c!==-1&&(g=!0,o.splice(c,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[_]));return this.renderOnAddRemove&&g&&this.requestRenderAll(),this},forEachObject:function(o,c){for(var g=this.getObjects(),_=0,v=g.length;_<v;_++)o.call(c,g[_],_,g);return this},getObjects:function(o){return typeof o>"u"?this._objects.concat():this._objects.filter(function(c){return c.type===o})},item:function(o){return this._objects[o]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(o,c){return this._objects.indexOf(o)>-1?!0:c?this._objects.some(function(g){return typeof g.contains=="function"&&g.contains(o,!0)}):!1},complexity:function(){return this._objects.reduce(function(o,c){return o+=c.complexity?c.complexity():0,o},0)}},e.CommonMethods={_setOptions:function(o){for(var c in o)this.set(c,o[c])},_initGradient:function(o,c){o&&o.colorStops&&!(o instanceof e.Gradient)&&this.set(c,new e.Gradient(o))},_initPattern:function(o,c,g){o&&o.source&&!(o instanceof e.Pattern)?this.set(c,new e.Pattern(o,g)):g&&g()},_setObject:function(o){for(var c in o)this._set(c,o[c])},set:function(o,c){return typeof o=="object"?this._setObject(o):this._set(o,c),this},_set:function(o,c){this[o]=c},toggle:function(o){var c=this.get(o);return typeof c=="boolean"&&this.set(o,!c),this},get:function(o){return this[o]}},function(o){var c=Math.sqrt,g=Math.atan2,_=Math.pow,v=Math.PI/180,w=Math.PI/2;e.util={cos:function(x){if(x===0)return 1;x<0&&(x=-x);var C=x/w;switch(C){case 1:case 3:return 0;case 2:return-1}return Math.cos(x)},sin:function(x){if(x===0)return 0;var C=x/w,T=1;switch(x<0&&(T=-1),C){case 1:return T;case 2:return 0;case 3:return-T}return Math.sin(x)},removeFromArray:function(x,C){var T=x.indexOf(C);return T!==-1&&x.splice(T,1),x},getRandomInt:function(x,C){return Math.floor(Math.random()*(C-x+1))+x},degreesToRadians:function(x){return x*v},radiansToDegrees:function(x){return x/v},rotatePoint:function(x,C,T){var k=new e.Point(x.x-C.x,x.y-C.y),M=e.util.rotateVector(k,T);return new e.Point(M.x,M.y).addEquals(C)},rotateVector:function(x,C){var T=e.util.sin(C),k=e.util.cos(C),M=x.x*k-x.y*T,O=x.x*T+x.y*k;return{x:M,y:O}},createVector:function(x,C){return new e.Point(C.x-x.x,C.y-x.y)},calcAngleBetweenVectors:function(x,C){return Math.acos((x.x*C.x+x.y*C.y)/(Math.hypot(x.x,x.y)*Math.hypot(C.x,C.y)))},getHatVector:function(x){return new e.Point(x.x,x.y).multiply(1/Math.hypot(x.x,x.y))},getBisector:function(x,C,T){var k=e.util.createVector(x,C),M=e.util.createVector(x,T),O=e.util.calcAngleBetweenVectors(k,M),V=e.util.calcAngleBetweenVectors(e.util.rotateVector(k,O),M),W=O*(V===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(k,W)),angle:O}},projectStrokeOnPoints:function(x,C,T){var k=[],M=C.strokeWidth/2,O=C.strokeUniform?new e.Point(1/C.scaleX,1/C.scaleY):new e.Point(1,1),V=function(W){var J=M/Math.hypot(W.x,W.y);return new e.Point(W.x*J*O.x,W.y*J*O.y)};return x.length<=1||x.forEach(function(W,J){var Q=new e.Point(W.x,W.y),Z,ie;J===0?(ie=x[J+1],Z=T?V(e.util.createVector(ie,Q)).addEquals(Q):x[x.length-1]):J===x.length-1?(Z=x[J-1],ie=T?V(e.util.createVector(Z,Q)).addEquals(Q):x[0]):(Z=x[J-1],ie=x[J+1]);var Se=e.util.getBisector(Q,Z,ie),xe=Se.vector,le=Se.angle,Ee,me;if(C.strokeLineJoin==="miter"&&(Ee=-M/Math.sin(le/2),me=new e.Point(xe.x*Ee*O.x,xe.y*Ee*O.y),Math.hypot(me.x,me.y)/M<=C.strokeMiterLimit)){k.push(Q.add(me)),k.push(Q.subtract(me));return}Ee=-M*Math.SQRT2,me=new e.Point(xe.x*Ee*O.x,xe.y*Ee*O.y),k.push(Q.add(me)),k.push(Q.subtract(me))}),k},transformPoint:function(x,C,T){return T?new e.Point(C[0]*x.x+C[2]*x.y,C[1]*x.x+C[3]*x.y):new e.Point(C[0]*x.x+C[2]*x.y+C[4],C[1]*x.x+C[3]*x.y+C[5])},makeBoundingBoxFromPoints:function(x,C){if(C)for(var T=0;T<x.length;T++)x[T]=e.util.transformPoint(x[T],C);var k=[x[0].x,x[1].x,x[2].x,x[3].x],M=e.util.array.min(k),O=e.util.array.max(k),V=O-M,W=[x[0].y,x[1].y,x[2].y,x[3].y],J=e.util.array.min(W),Q=e.util.array.max(W),Z=Q-J;return{left:M,top:J,width:V,height:Z}},invertTransform:function(x){var C=1/(x[0]*x[3]-x[1]*x[2]),T=[C*x[3],-C*x[1],-C*x[2],C*x[0]],k=e.util.transformPoint({x:x[4],y:x[5]},T,!0);return T[4]=-k.x,T[5]=-k.y,T},toFixed:function(x,C){return parseFloat(Number(x).toFixed(C))},parseUnit:function(x,C){var T=/\D{0,2}$/.exec(x),k=parseFloat(x);switch(C||(C=e.Text.DEFAULT_SVG_FONT_SIZE),T[0]){case"mm":return k*e.DPI/25.4;case"cm":return k*e.DPI/2.54;case"in":return k*e.DPI;case"pt":return k*e.DPI/72;case"pc":return k*e.DPI/72*12;case"em":return k*C;default:return k}},falseFunction:function(){return!1},getKlass:function(x,C){return x=e.util.string.camelize(x.charAt(0).toUpperCase()+x.slice(1)),e.util.resolveNamespace(C)[x]},getSvgAttributes:function(x){var C=["instantiated_by_use","style","id","class"];switch(x){case"linearGradient":C=C.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":C=C.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":C=C.concat(["offset","stop-color","stop-opacity"]);break}return C},resolveNamespace:function(x){if(!x)return e;var C=x.split("."),T=C.length,k,M=o||e.window;for(k=0;k<T;++k)M=M[C[k]];return M},loadImage:function(x,C,T,k){if(!x){C&&C.call(T,x);return}var M=e.util.createImage(),O=function(){C&&C.call(T,M,!1),M=M.onload=M.onerror=null};M.onload=O,M.onerror=function(){e.log("Error loading "+M.src),C&&C.call(T,null,!0),M=M.onload=M.onerror=null},x.indexOf("data")!==0&&k!==void 0&&k!==null&&(M.crossOrigin=k),x.substring(0,14)==="data:image/svg"&&(M.onload=null,e.util.loadImageInDom(M,O)),M.src=x},loadImageInDom:function(x,C){var T=e.document.createElement("div");T.style.width=T.style.height="1px",T.style.left=T.style.top="-100%",T.style.position="absolute",T.appendChild(x),e.document.querySelector("body").appendChild(T),x.onload=function(){C(),T.parentNode.removeChild(T),T=null}},enlivenObjects:function(x,C,T,k){x=x||[];var M=[],O=0,V=x.length;function W(){++O===V&&C&&C(M.filter(function(J){return J}))}if(!V){C&&C(M);return}x.forEach(function(J,Q){if(!J||!J.type){W();return}var Z=e.util.getKlass(J.type,T);Z.fromObject(J,function(ie,Se){Se||(M[Q]=ie),k&&k(J,ie,Se),W()})})},enlivenObjectEnlivables:function(x,C,T){var k=e.Object.ENLIVEN_PROPS.filter(function(M){return!!x[M]});e.util.enlivenObjects(k.map(function(M){return x[M]}),function(M){var O={};k.forEach(function(V,W){O[V]=M[W],C&&(C[V]=M[W])}),T&&T(O)})},enlivenPatterns:function(x,C){x=x||[];function T(){++M===O&&C&&C(k)}var k=[],M=0,O=x.length;if(!O){C&&C(k);return}x.forEach(function(V,W){V&&V.source?new e.Pattern(V,function(J){k[W]=J,T()}):(k[W]=V,T())})},groupSVGElements:function(x,C,T){var k;return x&&x.length===1?(typeof T<"u"&&(x[0].sourcePath=T),x[0]):(C&&(C.width&&C.height?C.centerPoint={x:C.width/2,y:C.height/2}:(delete C.width,delete C.height)),k=new e.Group(x,C),typeof T<"u"&&(k.sourcePath=T),k)},populateWithProperties:function(x,C,T){if(T&&Array.isArray(T))for(var k=0,M=T.length;k<M;k++)T[k]in x&&(C[T[k]]=x[T[k]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(x){var C=e.util.createCanvasElement();return C.width=x.width,C.height=x.height,C.getContext("2d").drawImage(x,0,0),C},toDataURL:function(x,C,T){return x.toDataURL("image/"+C,T)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(x,C,T){return[x[0]*C[0]+x[2]*C[1],x[1]*C[0]+x[3]*C[1],x[0]*C[2]+x[2]*C[3],x[1]*C[2]+x[3]*C[3],T?0:x[0]*C[4]+x[2]*C[5]+x[4],T?0:x[1]*C[4]+x[3]*C[5]+x[5]]},qrDecompose:function(x){var C=g(x[1],x[0]),T=_(x[0],2)+_(x[1],2),k=c(T),M=(x[0]*x[3]-x[2]*x[1])/k,O=g(x[0]*x[2]+x[1]*x[3],T);return{angle:C/v,scaleX:k,scaleY:M,skewX:O/v,skewY:0,translateX:x[4],translateY:x[5]}},calcRotateMatrix:function(x){if(!x.angle)return e.iMatrix.concat();var C=e.util.degreesToRadians(x.angle),T=e.util.cos(C),k=e.util.sin(C);return[T,k,-k,T,0,0]},calcDimensionsMatrix:function(x){var C=typeof x.scaleX>"u"?1:x.scaleX,T=typeof x.scaleY>"u"?1:x.scaleY,k=[x.flipX?-C:C,0,0,x.flipY?-T:T,0,0],M=e.util.multiplyTransformMatrices,O=e.util.degreesToRadians;return x.skewX&&(k=M(k,[1,0,Math.tan(O(x.skewX)),1],!0)),x.skewY&&(k=M(k,[1,Math.tan(O(x.skewY)),0,1],!0)),k},composeMatrix:function(x){var C=[1,0,0,1,x.translateX||0,x.translateY||0],T=e.util.multiplyTransformMatrices;return x.angle&&(C=T(C,e.util.calcRotateMatrix(x))),(x.scaleX!==1||x.scaleY!==1||x.skewX||x.skewY||x.flipX||x.flipY)&&(C=T(C,e.util.calcDimensionsMatrix(x))),C},resetObjectTransform:function(x){x.scaleX=1,x.scaleY=1,x.skewX=0,x.skewY=0,x.flipX=!1,x.flipY=!1,x.rotate(0)},saveObjectTransform:function(x){return{scaleX:x.scaleX,scaleY:x.scaleY,skewX:x.skewX,skewY:x.skewY,angle:x.angle,left:x.left,flipX:x.flipX,flipY:x.flipY,top:x.top}},isTransparent:function(x,C,T,k){k>0&&(C>k?C-=k:C=0,T>k?T-=k:T=0);var M=!0,O,V,W=x.getImageData(C,T,k*2||1,k*2||1),J=W.data.length;for(O=3;O<J&&(V=W.data[O],M=V<=0,M!==!1);O+=4);return W=null,M},parsePreserveAspectRatioAttribute:function(x){var C="meet",T="Mid",k="Mid",M=x.split(" "),O;return M&&M.length&&(C=M.pop(),C!=="meet"&&C!=="slice"?(O=C,C="meet"):M.length&&(O=M.pop())),T=O!=="none"?O.slice(1,4):"none",k=O!=="none"?O.slice(5,8):"none",{meetOrSlice:C,alignX:T,alignY:k}},clearFabricFontCache:function(x){x=(x||"").toLowerCase(),x?e.charWidthsCache[x]&&delete e.charWidthsCache[x]:e.charWidthsCache={}},limitDimsByArea:function(x,C){var T=Math.sqrt(C*x),k=Math.floor(C/T);return{x:Math.floor(T),y:k}},capValue:function(x,C,T){return Math.max(x,Math.min(C,T))},findScaleToFit:function(x,C){return Math.min(C.width/x.width,C.height/x.height)},findScaleToCover:function(x,C){return Math.max(C.width/x.width,C.height/x.height)},matrixToSVG:function(x){return"matrix("+x.map(function(C){return e.util.toFixed(C,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(x,C){var T=e.util.invertTransform(C),k=e.util.multiplyTransformMatrices(T,x.calcOwnMatrix());e.util.applyTransformToObject(x,k)},addTransformToObject:function(x,C){e.util.applyTransformToObject(x,e.util.multiplyTransformMatrices(C,x.calcOwnMatrix()))},applyTransformToObject:function(x,C){var T=e.util.qrDecompose(C),k=new e.Point(T.translateX,T.translateY);x.flipX=!1,x.flipY=!1,x.set("scaleX",T.scaleX),x.set("scaleY",T.scaleY),x.skewX=T.skewX,x.skewY=T.skewY,x.angle=T.angle,x.setPositionByOrigin(k,"center","center")},sizeAfterTransform:function(x,C,T){var k=x/2,M=C/2,O=[{x:-k,y:-M},{x:k,y:-M},{x:-k,y:M},{x:k,y:M}],V=e.util.calcDimensionsMatrix(T),W=e.util.makeBoundingBoxFromPoints(O,V);return{x:W.width,y:W.height}},mergeClipPaths:function(x,C){var T=x,k=C;T.inverted&&!k.inverted&&(T=C,k=x),e.util.applyTransformToObject(k,e.util.multiplyTransformMatrices(e.util.invertTransform(T.calcTransformMatrix()),k.calcTransformMatrix()));var M=T.inverted&&k.inverted;return M&&(T.inverted=k.inverted=!1),new e.Group([T],{clipPath:k,inverted:M})},hasStyleChanged:function(x,C,T){return T=T||!1,x.fill!==C.fill||x.stroke!==C.stroke||x.strokeWidth!==C.strokeWidth||x.fontSize!==C.fontSize||x.fontFamily!==C.fontFamily||x.fontWeight!==C.fontWeight||x.fontStyle!==C.fontStyle||x.deltaY!==C.deltaY||T&&(x.overline!==C.overline||x.underline!==C.underline||x.linethrough!==C.linethrough)},stylesToArray:function(T,C){for(var T=e.util.object.clone(T,!0),k=C.split(`
`),M=-1,O={},V=[],W=0;W<k.length;W++){if(!T[W]){M+=k[W].length;continue}for(var J=0;J<k[W].length;J++){M++;var Q=T[W][J];if(Q){var Z=e.util.hasStyleChanged(O,Q,!0);Z?V.push({start:M,end:M+1,style:Q}):V[V.length-1].end++}O=Q||{}}}return V},stylesFromArray:function(x,C){if(!Array.isArray(x))return x;for(var T=C.split(`
`),k=-1,M=0,O={},V=0;V<T.length;V++)for(var W=0;W<T[V].length;W++)k++,x[M]&&x[M].start<=k&&k<x[M].end&&(O[V]=O[V]||{},O[V][W]=Object.assign({},x[M].style),k===x[M].end-1&&M++);return O}}}(i),function(){var o=Array.prototype.join,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},g={m:"l",M:"L"};function _(be,Le,Ue,ce,Ie,de,ge,Re,Ze,ut,Xe){var $e=e.util.cos(be),Dt=e.util.sin(be),ni=e.util.cos(Le),mt=e.util.sin(Le),At=Ue*Ie*ni-ce*de*mt+ge,xt=ce*Ie*ni+Ue*de*mt+Re,Qe=ut+Ze*(-Ue*Ie*Dt-ce*de*$e),Yt=Xe+Ze*(-ce*Ie*Dt+Ue*de*$e),si=At+Ze*(Ue*Ie*mt+ce*de*ni),Zt=xt+Ze*(ce*Ie*mt-Ue*de*ni);return["C",Qe,Yt,si,Zt,At,xt]}function v(be,Le,Ue,ce,Ie,de,ge){var Re=Math.PI,Ze=ge*Re/180,ut=e.util.sin(Ze),Xe=e.util.cos(Ze),$e=0,Dt=0;Ue=Math.abs(Ue),ce=Math.abs(ce);var ni=-Xe*be*.5-ut*Le*.5,mt=-Xe*Le*.5+ut*be*.5,At=Ue*Ue,xt=ce*ce,Qe=mt*mt,Yt=ni*ni,si=At*xt-At*Qe-xt*Yt,Zt=0;if(si<0){var Ei=Math.sqrt(1-si/(At*xt));Ue*=Ei,ce*=Ei}else Zt=(Ie===de?-1:1)*Math.sqrt(si/(At*Qe+xt*Yt));var Qt=Zt*Ue*mt/ce,Ot=-Zt*ce*ni/Ue,ai=Xe*Qt-ut*Ot+be*.5,Ji=ut*Qt+Xe*Ot+Le*.5,Ii=w(1,0,(ni-Qt)/Ue,(mt-Ot)/ce),$t=w((ni-Qt)/Ue,(mt-Ot)/ce,(-ni-Qt)/Ue,(-mt-Ot)/ce);de===0&&$t>0?$t-=2*Re:de===1&&$t<0&&($t+=2*Re);for(var Me=Math.ceil(Math.abs($t/Re*2)),ee=[],ae=$t/Me,et=8/3*Math.sin(ae/4)*Math.sin(ae/4)/Math.sin(ae/2),bt=Ii+ae,Xt=0;Xt<Me;Xt++)ee[Xt]=_(Ii,bt,Xe,ut,Ue,ce,ai,Ji,et,$e,Dt),$e=ee[Xt][5],Dt=ee[Xt][6],Ii=bt,bt+=ae;return ee}function w(be,Le,Ue,ce){var Ie=Math.atan2(Le,be),de=Math.atan2(ce,Ue);return de>=Ie?de-Ie:2*Math.PI-(Ie-de)}function x(be,Le,Ue,ce,Ie,de,ge,Re){var Ze;if(e.cachesBoundsOfCurve&&(Ze=o.call(arguments),e.boundsOfCurveCache[Ze]))return e.boundsOfCurveCache[Ze];var ut=Math.sqrt,Xe=Math.min,$e=Math.max,Dt=Math.abs,ni=[],mt=[[],[]],At,xt,Qe,Yt,si,Zt,Ei,Qt;xt=6*be-12*Ue+6*Ie,At=-3*be+9*Ue-9*Ie+3*ge,Qe=3*Ue-3*be;for(var Ot=0;Ot<2;++Ot){if(Ot>0&&(xt=6*Le-12*ce+6*de,At=-3*Le+9*ce-9*de+3*Re,Qe=3*ce-3*Le),Dt(At)<1e-12){if(Dt(xt)<1e-12)continue;Yt=-Qe/xt,0<Yt&&Yt<1&&ni.push(Yt);continue}Ei=xt*xt-4*Qe*At,!(Ei<0)&&(Qt=ut(Ei),si=(-xt+Qt)/(2*At),0<si&&si<1&&ni.push(si),Zt=(-xt-Qt)/(2*At),0<Zt&&Zt<1&&ni.push(Zt))}for(var ai,Ji,Ii=ni.length,$t=Ii,Me;Ii--;)Yt=ni[Ii],Me=1-Yt,ai=Me*Me*Me*be+3*Me*Me*Yt*Ue+3*Me*Yt*Yt*Ie+Yt*Yt*Yt*ge,mt[0][Ii]=ai,Ji=Me*Me*Me*Le+3*Me*Me*Yt*ce+3*Me*Yt*Yt*de+Yt*Yt*Yt*Re,mt[1][Ii]=Ji;mt[0][$t]=be,mt[1][$t]=Le,mt[0][$t+1]=ge,mt[1][$t+1]=Re;var ee=[{x:Xe.apply(null,mt[0]),y:Xe.apply(null,mt[1])},{x:$e.apply(null,mt[0]),y:$e.apply(null,mt[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[Ze]=ee),ee}function C(be,Le,Ue){for(var ce=Ue[1],Ie=Ue[2],de=Ue[3],ge=Ue[4],Re=Ue[5],Ze=Ue[6],ut=Ue[7],Xe=v(Ze-be,ut-Le,ce,Ie,ge,Re,de),$e=0,Dt=Xe.length;$e<Dt;$e++)Xe[$e][1]+=be,Xe[$e][2]+=Le,Xe[$e][3]+=be,Xe[$e][4]+=Le,Xe[$e][5]+=be,Xe[$e][6]+=Le;return Xe}function T(be){var Le=0,Ue=0,ce=be.length,Ie=0,de=0,ge,Re,Ze,ut=[],Xe,$e,Dt;for(Re=0;Re<ce;++Re){switch(Ze=!1,ge=be[Re].slice(0),ge[0]){case"l":ge[0]="L",ge[1]+=Le,ge[2]+=Ue;case"L":Le=ge[1],Ue=ge[2];break;case"h":ge[1]+=Le;case"H":ge[0]="L",ge[2]=Ue,Le=ge[1];break;case"v":ge[1]+=Ue;case"V":ge[0]="L",Ue=ge[1],ge[1]=Le,ge[2]=Ue;break;case"m":ge[0]="M",ge[1]+=Le,ge[2]+=Ue;case"M":Le=ge[1],Ue=ge[2],Ie=ge[1],de=ge[2];break;case"c":ge[0]="C",ge[1]+=Le,ge[2]+=Ue,ge[3]+=Le,ge[4]+=Ue,ge[5]+=Le,ge[6]+=Ue;case"C":$e=ge[3],Dt=ge[4],Le=ge[5],Ue=ge[6];break;case"s":ge[0]="S",ge[1]+=Le,ge[2]+=Ue,ge[3]+=Le,ge[4]+=Ue;case"S":Xe==="C"?($e=2*Le-$e,Dt=2*Ue-Dt):($e=Le,Dt=Ue),Le=ge[3],Ue=ge[4],ge[0]="C",ge[5]=ge[3],ge[6]=ge[4],ge[3]=ge[1],ge[4]=ge[2],ge[1]=$e,ge[2]=Dt,$e=ge[3],Dt=ge[4];break;case"q":ge[0]="Q",ge[1]+=Le,ge[2]+=Ue,ge[3]+=Le,ge[4]+=Ue;case"Q":$e=ge[1],Dt=ge[2],Le=ge[3],Ue=ge[4];break;case"t":ge[0]="T",ge[1]+=Le,ge[2]+=Ue;case"T":Xe==="Q"?($e=2*Le-$e,Dt=2*Ue-Dt):($e=Le,Dt=Ue),ge[0]="Q",Le=ge[1],Ue=ge[2],ge[1]=$e,ge[2]=Dt,ge[3]=Le,ge[4]=Ue;break;case"a":ge[0]="A",ge[6]+=Le,ge[7]+=Ue;case"A":Ze=!0,ut=ut.concat(C(Le,Ue,ge)),Le=ge[6],Ue=ge[7];break;case"z":case"Z":Le=Ie,Ue=de;break}Ze||ut.push(ge),Xe=ge[0]}return ut}function k(be,Le,Ue,ce){return Math.sqrt((Ue-be)*(Ue-be)+(ce-Le)*(ce-Le))}function M(be){return be*be*be}function O(be){return 3*be*be*(1-be)}function V(be){return 3*be*(1-be)*(1-be)}function W(be){return(1-be)*(1-be)*(1-be)}function J(be,Le,Ue,ce,Ie,de,ge,Re){return function(Ze){var ut=M(Ze),Xe=O(Ze),$e=V(Ze),Dt=W(Ze);return{x:ge*ut+Ie*Xe+Ue*$e+be*Dt,y:Re*ut+de*Xe+ce*$e+Le*Dt}}}function Q(be,Le,Ue,ce,Ie,de,ge,Re){return function(Ze){var ut=1-Ze,Xe=3*ut*ut*(Ue-be)+6*ut*Ze*(Ie-Ue)+3*Ze*Ze*(ge-Ie),$e=3*ut*ut*(ce-Le)+6*ut*Ze*(de-ce)+3*Ze*Ze*(Re-de);return Math.atan2($e,Xe)}}function Z(be){return be*be}function ie(be){return 2*be*(1-be)}function Se(be){return(1-be)*(1-be)}function xe(be,Le,Ue,ce,Ie,de){return function(ge){var Re=Z(ge),Ze=ie(ge),ut=Se(ge);return{x:Ie*Re+Ue*Ze+be*ut,y:de*Re+ce*Ze+Le*ut}}}function le(be,Le,Ue,ce,Ie,de){return function(ge){var Re=1-ge,Ze=2*Re*(Ue-be)+2*ge*(Ie-Ue),ut=2*Re*(ce-Le)+2*ge*(de-ce);return Math.atan2(ut,Ze)}}function Ee(be,Le,Ue){var ce={x:Le,y:Ue},Ie,de=0,ge;for(ge=1;ge<=100;ge+=1)Ie=be(ge/100),de+=k(ce.x,ce.y,Ie.x,Ie.y),ce=Ie;return de}function me(be,Le){for(var Ue=0,ce=0,Ie=be.iterator,de={x:be.x,y:be.y},ge,Re,Ze=.01,ut=be.angleFinder,Xe;ce<Le&&Ze>1e-4;)ge=Ie(Ue),Xe=Ue,Re=k(de.x,de.y,ge.x,ge.y),Re+ce>Le?(Ue-=Ze,Ze/=2):(de=ge,Ue+=Ze,ce+=Re);return ge.angle=ut(Xe),ge}function Ae(be){for(var Le=0,Ue=be.length,ce,Ie=0,de=0,ge=0,Re=0,Ze=[],ut,Xe,$e,Dt=0;Dt<Ue;Dt++){switch(ce=be[Dt],Xe={x:Ie,y:de,command:ce[0]},ce[0]){case"M":Xe.length=0,ge=Ie=ce[1],Re=de=ce[2];break;case"L":Xe.length=k(Ie,de,ce[1],ce[2]),Ie=ce[1],de=ce[2];break;case"C":ut=J(Ie,de,ce[1],ce[2],ce[3],ce[4],ce[5],ce[6]),$e=Q(Ie,de,ce[1],ce[2],ce[3],ce[4],ce[5],ce[6]),Xe.iterator=ut,Xe.angleFinder=$e,Xe.length=Ee(ut,Ie,de),Ie=ce[5],de=ce[6];break;case"Q":ut=xe(Ie,de,ce[1],ce[2],ce[3],ce[4]),$e=le(Ie,de,ce[1],ce[2],ce[3],ce[4]),Xe.iterator=ut,Xe.angleFinder=$e,Xe.length=Ee(ut,Ie,de),Ie=ce[3],de=ce[4];break;case"Z":case"z":Xe.destX=ge,Xe.destY=Re,Xe.length=k(Ie,de,ge,Re),Ie=ge,de=Re;break}Le+=Xe.length,Ze.push(Xe)}return Ze.push({length:Le,x:Ie,y:de}),Ze}function pt(be,Le,Ue){Ue||(Ue=Ae(be));for(var ce=0;Le-Ue[ce].length>0&&ce<Ue.length-2;)Le-=Ue[ce].length,ce++;var Ie=Ue[ce],de=Le/Ie.length,ge=Ie.command,Re=be[ce],Ze;switch(ge){case"M":return{x:Ie.x,y:Ie.y,angle:0};case"Z":case"z":return Ze=new e.Point(Ie.x,Ie.y).lerp(new e.Point(Ie.destX,Ie.destY),de),Ze.angle=Math.atan2(Ie.destY-Ie.y,Ie.destX-Ie.x),Ze;case"L":return Ze=new e.Point(Ie.x,Ie.y).lerp(new e.Point(Re[1],Re[2]),de),Ze.angle=Math.atan2(Re[2]-Ie.y,Re[1]-Ie.x),Ze;case"C":return me(Ie,Le);case"Q":return me(Ie,Le)}}function rt(be){var Le=[],Ue=[],ce,Ie,de=e.rePathCommand,ge="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Re="("+ge+")"+e.commaWsp,Ze="([01])"+e.commaWsp+"?",ut=Re+"?"+Re+"?"+Re+Ze+Ze+Re+"?("+ge+")",Xe=new RegExp(ut,"g"),$e,Dt,ni;if(!be||!be.match)return Le;ni=be.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var mt=0,At,xt=ni.length;mt<xt;mt++){ce=ni[mt],Dt=ce.slice(1).trim(),Ue.length=0;var Qe=ce.charAt(0);if(At=[Qe],Qe.toLowerCase()==="a")for(var Yt;Yt=Xe.exec(Dt);)for(var si=1;si<Yt.length;si++)Ue.push(Yt[si]);else for(;$e=de.exec(Dt);)Ue.push($e[0]);for(var si=0,Zt=Ue.length;si<Zt;si++)Ie=parseFloat(Ue[si]),isNaN(Ie)||At.push(Ie);var Ei=c[Qe.toLowerCase()],Qt=g[Qe]||Qe;if(At.length-1>Ei)for(var Ot=1,ai=At.length;Ot<ai;Ot+=Ei)Le.push([Qe].concat(At.slice(Ot,Ot+Ei))),Qe=Qt;else Le.push(At)}return Le}function Pt(be,Le){var Ue=[],ce,Ie=new e.Point(be[0].x,be[0].y),de=new e.Point(be[1].x,be[1].y),ge=be.length,Re=1,Ze=0,ut=ge>2;for(Le=Le||0,ut&&(Re=be[2].x<de.x?-1:be[2].x===de.x?0:1,Ze=be[2].y<de.y?-1:be[2].y===de.y?0:1),Ue.push(["M",Ie.x-Re*Le,Ie.y-Ze*Le]),ce=1;ce<ge;ce++){if(!Ie.eq(de)){var Xe=Ie.midPointFrom(de);Ue.push(["Q",Ie.x,Ie.y,Xe.x,Xe.y])}Ie=be[ce],ce+1<be.length&&(de=be[ce+1])}return ut&&(Re=Ie.x>be[ce-2].x?1:Ie.x===be[ce-2].x?0:-1,Ze=Ie.y>be[ce-2].y?1:Ie.y===be[ce-2].y?0:-1),Ue.push(["L",Ie.x+Re*Le,Ie.y+Ze*Le]),Ue}function We(be,Le,Ue){return Ue&&(Le=e.util.multiplyTransformMatrices(Le,[1,0,0,1,-Ue.x,-Ue.y])),be.map(function(ce){for(var Ie=ce.slice(0),de={},ge=1;ge<ce.length-1;ge+=2)de.x=ce[ge],de.y=ce[ge+1],de=e.util.transformPoint(de,Le),Ie[ge]=de.x,Ie[ge+1]=de.y;return Ie})}e.util.joinPath=function(be){return be.map(function(Le){return Le.join(" ")}).join(" ")},e.util.parsePath=rt,e.util.makePathSimpler=T,e.util.getSmoothPathFromPoints=Pt,e.util.getPathSegmentsInfo=Ae,e.util.getBoundsOfCurve=x,e.util.getPointOnPath=pt,e.util.transformPath=We}(),function(){var o=Array.prototype.slice;function c(x,C){for(var T=o.call(arguments,2),k=[],M=0,O=x.length;M<O;M++)k[M]=T.length?x[M][C].apply(x[M],T):x[M][C].call(x[M]);return k}function g(x,C){return w(x,C,function(T,k){return T>=k})}function _(x,C){return w(x,C,function(T,k){return T<k})}function v(x,C){for(var T=x.length;T--;)x[T]=C;return x}function w(x,C,T){if(!(!x||x.length===0)){var k=x.length-1,M=C?x[k][C]:x[k];if(C)for(;k--;)T(x[k][C],M)&&(M=x[k][C]);else for(;k--;)T(x[k],M)&&(M=x[k]);return M}}e.util.array={fill:v,invoke:c,min:_,max:g}}(),function(){function o(g,_,v){if(v)if(!e.isLikelyNode&&_ instanceof Element)g=_;else if(_ instanceof Array){g=[];for(var w=0,x=_.length;w<x;w++)g[w]=o({},_[w],v)}else if(_&&typeof _=="object")for(var C in _)C==="canvas"||C==="group"?g[C]=null:_.hasOwnProperty(C)&&(g[C]=o({},_[C],v));else g=_;else for(var C in _)g[C]=_[C];return g}function c(g,_){return o({},g,_)}e.util.object={extend:o,clone:c},e.util.object.extend(e.util,e.Observable)}(),function(){function o(w){return w.replace(/-+(.)?/g,function(x,C){return C?C.toUpperCase():""})}function c(w,x){return w.charAt(0).toUpperCase()+(x?w.slice(1):w.slice(1).toLowerCase())}function g(w){return w.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _(w){var x=0,C,T=[];for(x=0,C;x<w.length;x++)(C=v(w,x))!==!1&&T.push(C);return T}function v(w,x){var C=w.charCodeAt(x);if(isNaN(C))return"";if(C<55296||C>57343)return w.charAt(x);if(55296<=C&&C<=56319){if(w.length<=x+1)throw"High surrogate without following low surrogate";var T=w.charCodeAt(x+1);if(56320>T||T>57343)throw"High surrogate without following low surrogate";return w.charAt(x)+w.charAt(x+1)}if(x===0)throw"Low surrogate without preceding high surrogate";var k=w.charCodeAt(x-1);if(55296>k||k>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:o,capitalize:c,escapeXml:g,graphemeSplit:_}}(),function(){var o=Array.prototype.slice,c=function(){},g=function(){for(var C in{toString:1})if(C==="toString")return!1;return!0}(),_=function(C,T,k){for(var M in T)M in C.prototype&&typeof C.prototype[M]=="function"&&(T[M]+"").indexOf("callSuper")>-1?C.prototype[M]=function(O){return function(){var V=this.constructor.superclass;this.constructor.superclass=k;var W=T[O].apply(this,arguments);if(this.constructor.superclass=V,O!=="initialize")return W}}(M):C.prototype[M]=T[M],g&&(T.toString!==Object.prototype.toString&&(C.prototype.toString=T.toString),T.valueOf!==Object.prototype.valueOf&&(C.prototype.valueOf=T.valueOf))};function v(){}function w(C){for(var T=null,k=this;k.constructor.superclass;){var M=k.constructor.superclass.prototype[C];if(k[C]!==M){T=M;break}k=k.constructor.superclass.prototype}return T?arguments.length>1?T.apply(this,o.call(arguments,1)):T.call(this):console.log("tried to callSuper "+C+", method not found in prototype chain",this)}function x(){var C=null,T=o.call(arguments,0);typeof T[0]=="function"&&(C=T.shift());function k(){this.initialize.apply(this,arguments)}k.superclass=C,k.subclasses=[],C&&(v.prototype=C.prototype,k.prototype=new v,C.subclasses.push(k));for(var M=0,O=T.length;M<O;M++)_(k,T[M],C);return k.prototype.initialize||(k.prototype.initialize=c),k.prototype.constructor=k,k.prototype.callSuper=w,k}e.util.createClass=x}(),function(){var o=!!e.document.createElement("div").attachEvent,c=["touchstart","touchmove","touchend"];e.util.addListener=function(_,v,w,x){_&&_.addEventListener(v,w,o?!1:x)},e.util.removeListener=function(_,v,w,x){_&&_.removeEventListener(v,w,o?!1:x)};function g(_){var v=_.changedTouches;return v&&v[0]?v[0]:_}e.util.getPointer=function(_){var v=_.target,w=e.util.getScrollLeftTop(v),x=g(_);return{x:x.clientX+w.left,y:x.clientY+w.top}},e.util.isTouchEvent=function(_){return c.indexOf(_.type)>-1||_.pointerType==="touch"}}(),function(){function o(x,C){var T=x.style;if(!T)return x;if(typeof C=="string")return x.style.cssText+=";"+C,C.indexOf("opacity")>-1?w(x,C.match(/opacity:\s*(\d?\.?\d*)/)[1]):x;for(var k in C)if(k==="opacity")w(x,C[k]);else{var M=k==="float"||k==="cssFloat"?typeof T.styleFloat>"u"?"cssFloat":"styleFloat":k;T.setProperty(M,C[k])}return x}var c=e.document.createElement("div"),g=typeof c.style.opacity=="string",_=typeof c.style.filter=="string",v=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,w=function(x){return x};g?w=function(x,C){return x.style.opacity=C,x}:_&&(w=function(x,C){var T=x.style;return x.currentStyle&&!x.currentStyle.hasLayout&&(T.zoom=1),v.test(T.filter)?(C=C>=.9999?"":"alpha(opacity="+C*100+")",T.filter=T.filter.replace(v,C)):T.filter+=" alpha(opacity="+C*100+")",x}),e.util.setStyle=o}(),function(){var o=Array.prototype.slice;function c(W){return typeof W=="string"?e.document.getElementById(W):W}var g,_=function(W){return o.call(W,0)};try{g=_(e.document.childNodes)instanceof Array}catch{}g||(_=function(W){for(var J=new Array(W.length),Q=W.length;Q--;)J[Q]=W[Q];return J});function v(W,J){var Q=e.document.createElement(W);for(var Z in J)Z==="class"?Q.className=J[Z]:Z==="for"?Q.htmlFor=J[Z]:Q.setAttribute(Z,J[Z]);return Q}function w(W,J){W&&(" "+W.className+" ").indexOf(" "+J+" ")===-1&&(W.className+=(W.className?" ":"")+J)}function x(W,J,Q){return typeof J=="string"&&(J=v(J,Q)),W.parentNode&&W.parentNode.replaceChild(J,W),J.appendChild(W),J}function C(W){for(var J=0,Q=0,Z=e.document.documentElement,ie=e.document.body||{scrollLeft:0,scrollTop:0};W&&(W.parentNode||W.host)&&(W=W.parentNode||W.host,W===e.document?(J=ie.scrollLeft||Z.scrollLeft||0,Q=ie.scrollTop||Z.scrollTop||0):(J+=W.scrollLeft||0,Q+=W.scrollTop||0),!(W.nodeType===1&&W.style.position==="fixed")););return{left:J,top:Q}}function T(W){var J,Q=W&&W.ownerDocument,Z={left:0,top:0},ie={left:0,top:0},Se,xe={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!Q)return ie;for(var le in xe)ie[xe[le]]+=parseInt(k(W,le),10)||0;return J=Q.documentElement,typeof W.getBoundingClientRect<"u"&&(Z=W.getBoundingClientRect()),Se=C(W),{left:Z.left+Se.left-(J.clientLeft||0)+ie.left,top:Z.top+Se.top-(J.clientTop||0)+ie.top}}var k;e.document.defaultView&&e.document.defaultView.getComputedStyle?k=function(W,J){var Q=e.document.defaultView.getComputedStyle(W,null);return Q?Q[J]:void 0}:k=function(W,J){var Q=W.style[J];return!Q&&W.currentStyle&&(Q=W.currentStyle[J]),Q},function(){var W=e.document.documentElement.style,J="userSelect"in W?"userSelect":"MozUserSelect"in W?"MozUserSelect":"WebkitUserSelect"in W?"WebkitUserSelect":"KhtmlUserSelect"in W?"KhtmlUserSelect":"";function Q(ie){return typeof ie.onselectstart<"u"&&(ie.onselectstart=e.util.falseFunction),J?ie.style[J]="none":typeof ie.unselectable=="string"&&(ie.unselectable="on"),ie}function Z(ie){return typeof ie.onselectstart<"u"&&(ie.onselectstart=null),J?ie.style[J]="":typeof ie.unselectable=="string"&&(ie.unselectable=""),ie}e.util.makeElementUnselectable=Q,e.util.makeElementSelectable=Z}();function M(W){var J=e.jsdomImplForWrapper(W);return J._canvas||J._image}function O(W){if(!!e.isLikelyNode){var J=e.jsdomImplForWrapper(W);J&&(J._image=null,J._canvas=null,J._currentSrc=null,J._attributes=null,J._classList=null)}}function V(W,J){W.imageSmoothingEnabled=W.imageSmoothingEnabled||W.webkitImageSmoothingEnabled||W.mozImageSmoothingEnabled||W.msImageSmoothingEnabled||W.oImageSmoothingEnabled,W.imageSmoothingEnabled=J}e.util.setImageSmoothing=V,e.util.getById=c,e.util.toArray=_,e.util.addClass=w,e.util.makeElement=v,e.util.wrapElement=x,e.util.getScrollLeftTop=C,e.util.getElementOffset=T,e.util.getNodeCanvas=M,e.util.cleanUpJsdomNode=O}(),function(){function o(_,v){return _+(/\?/.test(_)?"&":"?")+v}function c(){}function g(_,v){v||(v={});var w=v.method?v.method.toUpperCase():"GET",x=v.onComplete||function(){},C=new e.window.XMLHttpRequest,T=v.body||v.parameters;return C.onreadystatechange=function(){C.readyState===4&&(x(C),C.onreadystatechange=c)},w==="GET"&&(T=null,typeof v.parameters=="string"&&(_=o(_,v.parameters))),C.open(w,_,!0),(w==="POST"||w==="PUT")&&C.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),C.send(T),C}e.util.request=g}(),e.log=console.log,e.warn=console.warn,function(){var o=e.util.object.extend,c=e.util.object.clone,g=[];e.util.object.extend(g,{cancelAll:function(){var M=this.splice(0);return M.forEach(function(O){O.cancel()}),M},cancelByCanvas:function(M){if(!M)return[];var O=this.filter(function(V){return typeof V.target=="object"&&V.target.canvas===M});return O.forEach(function(V){V.cancel()}),O},cancelByTarget:function(M){var O=this.findAnimationsByTarget(M);return O.forEach(function(V){V.cancel()}),O},findAnimationIndex:function(M){return this.indexOf(this.findAnimation(M))},findAnimation:function(M){return this.find(function(O){return O.cancel===M})},findAnimationsByTarget:function(M){return M?this.filter(function(O){return O.target===M}):[]}});function _(){return!1}function v(M,O,V,W){return-V*Math.cos(M/W*(Math.PI/2))+V+O}function w(M){M||(M={});var O=!1,V,W=function(){var J=e.runningAnimations.indexOf(V);return J>-1&&e.runningAnimations.splice(J,1)[0]};return V=o(c(M),{cancel:function(){return O=!0,W()},currentValue:"startValue"in M?M.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(V),T(function(J){var Q=J||+new Date,Z=M.duration||500,ie=Q+Z,Se,xe=M.onChange||_,le=M.abort||_,Ee=M.onComplete||_,me=M.easing||v,Ae="startValue"in M?M.startValue.length>0:!1,pt="startValue"in M?M.startValue:0,rt="endValue"in M?M.endValue:100,Pt=M.byValue||(Ae?pt.map(function(We,be){return rt[be]-pt[be]}):rt-pt);M.onStart&&M.onStart(),function We(be){Se=be||+new Date;var Le=Se>ie?Z:Se-Q,Ue=Le/Z,ce=Ae?pt.map(function(de,ge){return me(Le,pt[ge],Pt[ge],Z)}):me(Le,pt,Pt,Z),Ie=Math.abs(Ae?(ce[0]-pt[0])/Pt[0]:(ce-pt)/Pt);if(V.currentValue=Ae?ce.slice():ce,V.completionRate=Ie,V.durationRate=Ue,!O){if(le(ce,Ie,Ue)){W();return}if(Se>ie){V.currentValue=Ae?rt.slice():rt,V.completionRate=1,V.durationRate=1,xe(Ae?rt.slice():rt,1,1),Ee(rt,1,1),W();return}else xe(ce,Ie,Ue),T(We)}}(Q)}),V.cancel}var x=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(M){return e.window.setTimeout(M,1e3/60)},C=e.window.cancelAnimationFrame||e.window.clearTimeout;function T(){return x.apply(e.window,arguments)}function k(){return C.apply(e.window,arguments)}e.util.animate=w,e.util.requestAnimFrame=T,e.util.cancelAnimFrame=k,e.runningAnimations=g}(),function(){function o(g,_,v){var w="rgba("+parseInt(g[0]+v*(_[0]-g[0]),10)+","+parseInt(g[1]+v*(_[1]-g[1]),10)+","+parseInt(g[2]+v*(_[2]-g[2]),10);return w+=","+(g&&_?parseFloat(g[3]+v*(_[3]-g[3])):1),w+=")",w}function c(g,_,v,w){var x=new e.Color(g).getSource(),C=new e.Color(_).getSource(),T=w.onComplete,k=w.onChange;return w=w||{},e.util.animate(e.util.object.extend(w,{duration:v||500,startValue:x,endValue:C,byValue:C,easing:function(M,O,V,W){var J=w.colorEasing?w.colorEasing(M,W):1-Math.cos(M/W*(Math.PI/2));return o(O,V,J)},onComplete:function(M,O,V){if(T)return T(o(C,C,0),O,V)},onChange:function(M,O,V){if(k){if(Array.isArray(M))return k(o(M,M,0),O,V);k(M,O,V)}}}))}e.util.animateColor=c}(),function(){function o(be,Le,Ue,ce){return be<Math.abs(Le)?(be=Le,ce=Ue/4):Le===0&&be===0?ce=Ue/(2*Math.PI)*Math.asin(1):ce=Ue/(2*Math.PI)*Math.asin(Le/be),{a:be,c:Le,p:Ue,s:ce}}function c(be,Le,Ue){return be.a*Math.pow(2,10*(Le-=1))*Math.sin((Le*Ue-be.s)*(2*Math.PI)/be.p)}function g(be,Le,Ue,ce){return Ue*((be=be/ce-1)*be*be+1)+Le}function _(be,Le,Ue,ce){return be/=ce/2,be<1?Ue/2*be*be*be+Le:Ue/2*((be-=2)*be*be+2)+Le}function v(be,Le,Ue,ce){return Ue*(be/=ce)*be*be*be+Le}function w(be,Le,Ue,ce){return-Ue*((be=be/ce-1)*be*be*be-1)+Le}function x(be,Le,Ue,ce){return be/=ce/2,be<1?Ue/2*be*be*be*be+Le:-Ue/2*((be-=2)*be*be*be-2)+Le}function C(be,Le,Ue,ce){return Ue*(be/=ce)*be*be*be*be+Le}function T(be,Le,Ue,ce){return Ue*((be=be/ce-1)*be*be*be*be+1)+Le}function k(be,Le,Ue,ce){return be/=ce/2,be<1?Ue/2*be*be*be*be*be+Le:Ue/2*((be-=2)*be*be*be*be+2)+Le}function M(be,Le,Ue,ce){return-Ue*Math.cos(be/ce*(Math.PI/2))+Ue+Le}function O(be,Le,Ue,ce){return Ue*Math.sin(be/ce*(Math.PI/2))+Le}function V(be,Le,Ue,ce){return-Ue/2*(Math.cos(Math.PI*be/ce)-1)+Le}function W(be,Le,Ue,ce){return be===0?Le:Ue*Math.pow(2,10*(be/ce-1))+Le}function J(be,Le,Ue,ce){return be===ce?Le+Ue:Ue*(-Math.pow(2,-10*be/ce)+1)+Le}function Q(be,Le,Ue,ce){return be===0?Le:be===ce?Le+Ue:(be/=ce/2,be<1?Ue/2*Math.pow(2,10*(be-1))+Le:Ue/2*(-Math.pow(2,-10*--be)+2)+Le)}function Z(be,Le,Ue,ce){return-Ue*(Math.sqrt(1-(be/=ce)*be)-1)+Le}function ie(be,Le,Ue,ce){return Ue*Math.sqrt(1-(be=be/ce-1)*be)+Le}function Se(be,Le,Ue,ce){return be/=ce/2,be<1?-Ue/2*(Math.sqrt(1-be*be)-1)+Le:Ue/2*(Math.sqrt(1-(be-=2)*be)+1)+Le}function xe(be,Le,Ue,ce){var Ie=1.70158,de=0,ge=Ue;if(be===0)return Le;if(be/=ce,be===1)return Le+Ue;de||(de=ce*.3);var Re=o(ge,Ue,de,Ie);return-c(Re,be,ce)+Le}function le(be,Le,Ue,ce){var Ie=1.70158,de=0,ge=Ue;if(be===0)return Le;if(be/=ce,be===1)return Le+Ue;de||(de=ce*.3);var Re=o(ge,Ue,de,Ie);return Re.a*Math.pow(2,-10*be)*Math.sin((be*ce-Re.s)*(2*Math.PI)/Re.p)+Re.c+Le}function Ee(be,Le,Ue,ce){var Ie=1.70158,de=0,ge=Ue;if(be===0)return Le;if(be/=ce/2,be===2)return Le+Ue;de||(de=ce*(.3*1.5));var Re=o(ge,Ue,de,Ie);return be<1?-.5*c(Re,be,ce)+Le:Re.a*Math.pow(2,-10*(be-=1))*Math.sin((be*ce-Re.s)*(2*Math.PI)/Re.p)*.5+Re.c+Le}function me(be,Le,Ue,ce,Ie){return Ie===void 0&&(Ie=1.70158),Ue*(be/=ce)*be*((Ie+1)*be-Ie)+Le}function Ae(be,Le,Ue,ce,Ie){return Ie===void 0&&(Ie=1.70158),Ue*((be=be/ce-1)*be*((Ie+1)*be+Ie)+1)+Le}function pt(be,Le,Ue,ce,Ie){return Ie===void 0&&(Ie=1.70158),be/=ce/2,be<1?Ue/2*(be*be*(((Ie*=1.525)+1)*be-Ie))+Le:Ue/2*((be-=2)*be*(((Ie*=1.525)+1)*be+Ie)+2)+Le}function rt(be,Le,Ue,ce){return Ue-Pt(ce-be,0,Ue,ce)+Le}function Pt(be,Le,Ue,ce){return(be/=ce)<1/2.75?Ue*(7.5625*be*be)+Le:be<2/2.75?Ue*(7.5625*(be-=1.5/2.75)*be+.75)+Le:be<2.5/2.75?Ue*(7.5625*(be-=2.25/2.75)*be+.9375)+Le:Ue*(7.5625*(be-=2.625/2.75)*be+.984375)+Le}function We(be,Le,Ue,ce){return be<ce/2?rt(be*2,0,Ue,ce)*.5+Le:Pt(be*2-ce,0,Ue,ce)*.5+Ue*.5+Le}e.util.ease={easeInQuad:function(be,Le,Ue,ce){return Ue*(be/=ce)*be+Le},easeOutQuad:function(be,Le,Ue,ce){return-Ue*(be/=ce)*(be-2)+Le},easeInOutQuad:function(be,Le,Ue,ce){return be/=ce/2,be<1?Ue/2*be*be+Le:-Ue/2*(--be*(be-2)-1)+Le},easeInCubic:function(be,Le,Ue,ce){return Ue*(be/=ce)*be*be+Le},easeOutCubic:g,easeInOutCubic:_,easeInQuart:v,easeOutQuart:w,easeInOutQuart:x,easeInQuint:C,easeOutQuint:T,easeInOutQuint:k,easeInSine:M,easeOutSine:O,easeInOutSine:V,easeInExpo:W,easeOutExpo:J,easeInOutExpo:Q,easeInCirc:Z,easeOutCirc:ie,easeInOutCirc:Se,easeInElastic:xe,easeOutElastic:le,easeInOutElastic:Ee,easeInBack:me,easeOutBack:Ae,easeInOutBack:pt,easeInBounce:rt,easeOutBounce:Pt,easeInOutBounce:We}}(),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.util.object.clone,v=c.util.toFixed,w=c.util.parseUnit,x=c.util.multiplyTransformMatrices,C=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],T=["symbol","image","marker","pattern","view","svg"],k=["pattern","defs","symbol","metadata","clipPath","mask","desc"],M=["symbol","g","a","svg","clipPath","defs"],O={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},V={stroke:"strokeOpacity",fill:"fillOpacity"},W="font-size",J="clip-path";c.svgValidTagNamesRegEx=ie(C),c.svgViewBoxElementsRegEx=ie(T),c.svgInvalidAncestorsRegEx=ie(k),c.svgValidParentsRegEx=ie(M),c.cssRules={},c.gradientDefs={},c.clipPaths={};function Q(de){return de in O?O[de]:de}function Z(de,ge,Re,Ze){var ut=Array.isArray(ge),Xe;if((de==="fill"||de==="stroke")&&ge==="none")ge="";else{if(de==="strokeUniform")return ge==="non-scaling-stroke";if(de==="strokeDashArray")ge==="none"?ge=null:ge=ge.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(de==="transformMatrix")Re&&Re.transformMatrix?ge=x(Re.transformMatrix,c.parseTransformAttribute(ge)):ge=c.parseTransformAttribute(ge);else if(de==="visible")ge=ge!=="none"&&ge!=="hidden",Re&&Re.visible===!1&&(ge=!1);else if(de==="opacity")ge=parseFloat(ge),Re&&typeof Re.opacity<"u"&&(ge*=Re.opacity);else if(de==="textAnchor")ge=ge==="start"?"left":ge==="end"?"right":"center";else if(de==="charSpacing")Xe=w(ge,Ze)/Ze*1e3;else if(de==="paintFirst"){var $e=ge.indexOf("fill"),Dt=ge.indexOf("stroke"),ge="fill";($e>-1&&Dt>-1&&Dt<$e||$e===-1&&Dt>-1)&&(ge="stroke")}else{if(de==="href"||de==="xlink:href"||de==="font")return ge;if(de==="imageSmoothing")return ge==="optimizeQuality";Xe=ut?ge.map(w):w(ge,Ze)}}return!ut&&isNaN(Xe)?ge:Xe}function ie(de){return new RegExp("^("+de.join("|")+")\\b","i")}function Se(de){for(var ge in V)if(!(typeof de[V[ge]]>"u"||de[ge]==="")){if(typeof de[ge]>"u"){if(!c.Object.prototype[ge])continue;de[ge]=c.Object.prototype[ge]}if(de[ge].indexOf("url(")!==0){var Re=new c.Color(de[ge]);de[ge]=Re.setAlpha(v(Re.getAlpha()*de[V[ge]],2)).toRgba()}}return de}function xe(de,ge){var Re,Ze=[],ut,Xe,$e;for(Xe=0,$e=ge.length;Xe<$e;Xe++)Re=ge[Xe],ut=de.getElementsByTagName(Re),Ze=Ze.concat(Array.prototype.slice.call(ut));return Ze}c.parseTransformAttribute=function(){function de(Ot,ai){var Ji=c.util.cos(ai[0]),Ii=c.util.sin(ai[0]),$t=0,Me=0;ai.length===3&&($t=ai[1],Me=ai[2]),Ot[0]=Ji,Ot[1]=Ii,Ot[2]=-Ii,Ot[3]=Ji,Ot[4]=$t-(Ji*$t-Ii*Me),Ot[5]=Me-(Ii*$t+Ji*Me)}function ge(Ot,ai){var Ji=ai[0],Ii=ai.length===2?ai[1]:ai[0];Ot[0]=Ji,Ot[3]=Ii}function Re(Ot,ai,Ji){Ot[Ji]=Math.tan(c.util.degreesToRadians(ai[0]))}function Ze(Ot,ai){Ot[4]=ai[0],ai.length===2&&(Ot[5]=ai[1])}var ut=c.iMatrix,Xe=c.reNum,$e=c.commaWsp,Dt="(?:(skewX)\\s*\\(\\s*("+Xe+")\\s*\\))",ni="(?:(skewY)\\s*\\(\\s*("+Xe+")\\s*\\))",mt="(?:(rotate)\\s*\\(\\s*("+Xe+")(?:"+$e+"("+Xe+")"+$e+"("+Xe+"))?\\s*\\))",At="(?:(scale)\\s*\\(\\s*("+Xe+")(?:"+$e+"("+Xe+"))?\\s*\\))",xt="(?:(translate)\\s*\\(\\s*("+Xe+")(?:"+$e+"("+Xe+"))?\\s*\\))",Qe="(?:(matrix)\\s*\\(\\s*("+Xe+")"+$e+"("+Xe+")"+$e+"("+Xe+")"+$e+"("+Xe+")"+$e+"("+Xe+")"+$e+"("+Xe+")\\s*\\))",Yt="(?:"+Qe+"|"+xt+"|"+At+"|"+mt+"|"+Dt+"|"+ni+")",si="(?:"+Yt+"(?:"+$e+"*"+Yt+")*)",Zt="^\\s*(?:"+si+"?)\\s*$",Ei=new RegExp(Zt),Qt=new RegExp(Yt,"g");return function(Ot){var ai=ut.concat(),Ji=[];if(!Ot||Ot&&!Ei.test(Ot))return ai;Ot.replace(Qt,function($t){var Me=new RegExp(Yt).exec($t).filter(function(et){return!!et}),ee=Me[1],ae=Me.slice(2).map(parseFloat);switch(ee){case"translate":Ze(ai,ae);break;case"rotate":ae[0]=c.util.degreesToRadians(ae[0]),de(ai,ae);break;case"scale":ge(ai,ae);break;case"skewX":Re(ai,ae,2);break;case"skewY":Re(ai,ae,1);break;case"matrix":ai=ae;break}Ji.push(ai.concat()),ai=ut.concat()});for(var Ii=Ji[0];Ji.length>1;)Ji.shift(),Ii=c.util.multiplyTransformMatrices(Ii,Ji[0]);return Ii}}();function le(de,ge){var Re,Ze;de.replace(/;\s*$/,"").split(";").forEach(function(ut){var Xe=ut.split(":");Re=Xe[0].trim().toLowerCase(),Ze=Xe[1].trim(),ge[Re]=Ze})}function Ee(de,ge){var Re,Ze;for(var ut in de)typeof de[ut]>"u"||(Re=ut.toLowerCase(),Ze=de[ut],ge[Re]=Ze)}function me(de,ge){var Re={};for(var Ze in c.cssRules[ge])if(Ae(de,Ze.split(" ")))for(var ut in c.cssRules[ge][Ze])Re[ut]=c.cssRules[ge][Ze][ut];return Re}function Ae(de,ge){var Re,Ze=!0;return Re=rt(de,ge.pop()),Re&&ge.length&&(Ze=pt(de,ge)),Re&&Ze&&ge.length===0}function pt(de,ge){for(var Re,Ze=!0;de.parentNode&&de.parentNode.nodeType===1&&ge.length;)Ze&&(Re=ge.pop()),de=de.parentNode,Ze=rt(de,Re);return ge.length===0}function rt(de,ge){var Re=de.nodeName,Ze=de.getAttribute("class"),ut=de.getAttribute("id"),Xe,$e;if(Xe=new RegExp("^"+Re,"i"),ge=ge.replace(Xe,""),ut&&ge.length&&(Xe=new RegExp("#"+ut+"(?![a-zA-Z\\-]+)","i"),ge=ge.replace(Xe,"")),Ze&&ge.length)for(Ze=Ze.split(" "),$e=Ze.length;$e--;)Xe=new RegExp("\\."+Ze[$e]+"(?![a-zA-Z\\-]+)","i"),ge=ge.replace(Xe,"");return ge.length===0}function Pt(de,ge){var Re;if(de.getElementById&&(Re=de.getElementById(ge)),Re)return Re;var Ze,ut,Xe,$e=de.getElementsByTagName("*");for(ut=0,Xe=$e.length;ut<Xe;ut++)if(Ze=$e[ut],ge===Ze.getAttribute("id"))return Ze}function We(de){for(var ge=xe(de,["use","svg:use"]),Re=0;ge.length&&Re<ge.length;){var Ze=ge[Re],ut=Ze.getAttribute("xlink:href")||Ze.getAttribute("href");if(ut===null)return;var Xe=ut.slice(1),$e=Ze.getAttribute("x")||0,Dt=Ze.getAttribute("y")||0,ni=Pt(de,Xe).cloneNode(!0),mt=(ni.getAttribute("transform")||"")+" translate("+$e+", "+Dt+")",At,xt=ge.length,Qe,Yt,si,Zt,Ei=c.svgNS;if(Le(ni),/^svg$/i.test(ni.nodeName)){var Qt=ni.ownerDocument.createElementNS(Ei,"g");for(Yt=0,si=ni.attributes,Zt=si.length;Yt<Zt;Yt++)Qe=si.item(Yt),Qt.setAttributeNS(Ei,Qe.nodeName,Qe.nodeValue);for(;ni.firstChild;)Qt.appendChild(ni.firstChild);ni=Qt}for(Yt=0,si=Ze.attributes,Zt=si.length;Yt<Zt;Yt++)Qe=si.item(Yt),!(Qe.nodeName==="x"||Qe.nodeName==="y"||Qe.nodeName==="xlink:href"||Qe.nodeName==="href")&&(Qe.nodeName==="transform"?mt=Qe.nodeValue+" "+mt:ni.setAttribute(Qe.nodeName,Qe.nodeValue));ni.setAttribute("transform",mt),ni.setAttribute("instantiated_by_use","1"),ni.removeAttribute("id"),At=Ze.parentNode,At.replaceChild(ni,Ze),ge.length===xt&&Re++}}var be=new RegExp("^\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*$");function Le(de){if(!c.svgViewBoxElementsRegEx.test(de.nodeName))return{};var ge=de.getAttribute("viewBox"),Re=1,Ze=1,ut=0,Xe=0,$e,Dt,ni,mt,At=de.getAttribute("width"),xt=de.getAttribute("height"),Qe=de.getAttribute("x")||0,Yt=de.getAttribute("y")||0,si=de.getAttribute("preserveAspectRatio")||"",Zt=!ge||!(ge=ge.match(be)),Ei=!At||!xt||At==="100%"||xt==="100%",Qt=Zt&&Ei,Ot={},ai="",Ji=0,Ii=0;if(Ot.width=0,Ot.height=0,Ot.toBeParsed=Qt,Zt&&(Qe||Yt)&&de.parentNode&&de.parentNode.nodeName!=="#document"&&(ai=" translate("+w(Qe)+" "+w(Yt)+") ",ni=(de.getAttribute("transform")||"")+ai,de.setAttribute("transform",ni),de.removeAttribute("x"),de.removeAttribute("y")),Qt)return Ot;if(Zt)return Ot.width=w(At),Ot.height=w(xt),Ot;if(ut=-parseFloat(ge[1]),Xe=-parseFloat(ge[2]),$e=parseFloat(ge[3]),Dt=parseFloat(ge[4]),Ot.minX=ut,Ot.minY=Xe,Ot.viewBoxWidth=$e,Ot.viewBoxHeight=Dt,Ei?(Ot.width=$e,Ot.height=Dt):(Ot.width=w(At),Ot.height=w(xt),Re=Ot.width/$e,Ze=Ot.height/Dt),si=c.util.parsePreserveAspectRatioAttribute(si),si.alignX!=="none"&&(si.meetOrSlice==="meet"&&(Ze=Re=Re>Ze?Ze:Re),si.meetOrSlice==="slice"&&(Ze=Re=Re>Ze?Re:Ze),Ji=Ot.width-$e*Re,Ii=Ot.height-Dt*Re,si.alignX==="Mid"&&(Ji/=2),si.alignY==="Mid"&&(Ii/=2),si.alignX==="Min"&&(Ji=0),si.alignY==="Min"&&(Ii=0)),Re===1&&Ze===1&&ut===0&&Xe===0&&Qe===0&&Yt===0)return Ot;if((Qe||Yt)&&de.parentNode.nodeName!=="#document"&&(ai=" translate("+w(Qe)+" "+w(Yt)+") "),ni=ai+" matrix("+Re+" 0 0 "+Ze+" "+(ut*Re+Ji)+" "+(Xe*Ze+Ii)+") ",de.nodeName==="svg"){for(mt=de.ownerDocument.createElementNS(c.svgNS,"g");de.firstChild;)mt.appendChild(de.firstChild);de.appendChild(mt)}else mt=de,mt.removeAttribute("x"),mt.removeAttribute("y"),ni=mt.getAttribute("transform")+ni;return mt.setAttribute("transform",ni),Ot}function Ue(de,ge){for(;de&&(de=de.parentNode);)if(de.nodeName&&ge.test(de.nodeName.replace("svg:",""))&&!de.getAttribute("instantiated_by_use"))return!0;return!1}c.parseSVGDocument=function(de,ge,Re,Ze){if(!!de){We(de);var ut=c.Object.__uid++,Xe,$e,Dt=Le(de),ni=c.util.toArray(de.getElementsByTagName("*"));if(Dt.crossOrigin=Ze&&Ze.crossOrigin,Dt.svgUid=ut,ni.length===0&&c.isLikelyNode){ni=de.selectNodes('//*[name(.)!="svg"]');var mt=[];for(Xe=0,$e=ni.length;Xe<$e;Xe++)mt[Xe]=ni[Xe];ni=mt}var At=ni.filter(function(Qe){return Le(Qe),c.svgValidTagNamesRegEx.test(Qe.nodeName.replace("svg:",""))&&!Ue(Qe,c.svgInvalidAncestorsRegEx)});if(!At||At&&!At.length){ge&&ge([],{});return}var xt={};ni.filter(function(Qe){return Qe.nodeName.replace("svg:","")==="clipPath"}).forEach(function(Qe){var Yt=Qe.getAttribute("id");xt[Yt]=c.util.toArray(Qe.getElementsByTagName("*")).filter(function(si){return c.svgValidTagNamesRegEx.test(si.nodeName.replace("svg:",""))})}),c.gradientDefs[ut]=c.getGradientDefs(de),c.cssRules[ut]=c.getCSSRules(de),c.clipPaths[ut]=xt,c.parseElements(At,function(Qe,Yt){ge&&(ge(Qe,Dt,Yt,ni),delete c.gradientDefs[ut],delete c.cssRules[ut],delete c.clipPaths[ut])},_(Dt),Re,Ze)}};function ce(de,ge){var Re=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Ze="xlink:href",ut=ge.getAttribute(Ze).slice(1),Xe=Pt(de,ut);if(Xe&&Xe.getAttribute(Ze)&&ce(de,Xe),Re.forEach(function(Dt){Xe&&!ge.hasAttribute(Dt)&&Xe.hasAttribute(Dt)&&ge.setAttribute(Dt,Xe.getAttribute(Dt))}),!ge.children.length)for(var $e=Xe.cloneNode(!0);$e.firstChild;)ge.appendChild($e.firstChild);ge.removeAttribute(Ze)}var Ie=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+c.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+c.reNum+"))?\\s+(.*)");g(c,{parseFontDeclaration:function(de,ge){var Re=de.match(Ie);if(!!Re){var Ze=Re[1],ut=Re[3],Xe=Re[4],$e=Re[5],Dt=Re[6];Ze&&(ge.fontStyle=Ze),ut&&(ge.fontWeight=isNaN(parseFloat(ut))?ut:parseFloat(ut)),Xe&&(ge.fontSize=w(Xe)),Dt&&(ge.fontFamily=Dt),$e&&(ge.lineHeight=$e==="normal"?1:$e)}},getGradientDefs:function(de){var ge=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Re=xe(de,ge),Ze,ut=0,Xe={};for(ut=Re.length;ut--;)Ze=Re[ut],Ze.getAttribute("xlink:href")&&ce(de,Ze),Xe[Ze.getAttribute("id")]=Ze;return Xe},parseAttributes:function(de,ge,Re){if(!!de){var Ze,ut={},Xe,$e;typeof Re>"u"&&(Re=de.getAttribute("svgUid")),de.parentNode&&c.svgValidParentsRegEx.test(de.parentNode.nodeName)&&(ut=c.parseAttributes(de.parentNode,ge,Re));var Dt=ge.reduce(function(si,Zt){return Ze=de.getAttribute(Zt),Ze&&(si[Zt]=Ze),si},{}),ni=g(me(de,Re),c.parseStyleAttribute(de));Dt=g(Dt,ni),ni[J]&&de.setAttribute(J,ni[J]),Xe=$e=ut.fontSize||c.Text.DEFAULT_SVG_FONT_SIZE,Dt[W]&&(Dt[W]=Xe=w(Dt[W],$e));var mt,At,xt={};for(var Qe in Dt)mt=Q(Qe),At=Z(mt,Dt[Qe],ut,Xe),xt[mt]=At;xt&&xt.font&&c.parseFontDeclaration(xt.font,xt);var Yt=g(ut,xt);return c.svgValidParentsRegEx.test(de.nodeName)?Yt:Se(Yt)}},parseElements:function(de,ge,Re,Ze,ut){new c.ElementsParser(de,ge,Re,Ze,ut).parse()},parseStyleAttribute:function(de){var ge={},Re=de.getAttribute("style");return Re&&(typeof Re=="string"?le(Re,ge):Ee(Re,ge)),ge},parsePointsAttribute:function(de){if(!de)return null;de=de.replace(/,/g," ").trim(),de=de.split(/\s+/);var ge=[],Re,Ze;for(Re=0,Ze=de.length;Re<Ze;Re+=2)ge.push({x:parseFloat(de[Re]),y:parseFloat(de[Re+1])});return ge},getCSSRules:function(de){var ge=de.getElementsByTagName("style"),Re,Ze,ut={},Xe;for(Re=0,Ze=ge.length;Re<Ze;Re++){var $e=ge[Re].textContent;$e=$e.replace(/\/\*[\s\S]*?\*\//g,""),$e.trim()!==""&&(Xe=$e.split("}"),Xe=Xe.filter(function(Dt){return Dt.trim()}),Xe.forEach(function(Dt){var ni=Dt.split("{"),mt={},At=ni[1].trim(),xt=At.split(";").filter(function(Zt){return Zt.trim()});for(Re=0,Ze=xt.length;Re<Ze;Re++){var Qe=xt[Re].split(":"),Yt=Qe[0].trim(),si=Qe[1].trim();mt[Yt]=si}Dt=ni[0].trim(),Dt.split(",").forEach(function(Zt){Zt=Zt.replace(/^svg/i,"").trim(),Zt!==""&&(ut[Zt]?c.util.object.extend(ut[Zt],mt):ut[Zt]=c.util.object.clone(mt))})}))}return ut},loadSVGFromURL:function(de,ge,Re,Ze){de=de.replace(/^\n\s*/,"").trim(),new c.util.request(de,{method:"get",onComplete:ut});function ut(Xe){var $e=Xe.responseXML;if(!$e||!$e.documentElement)return ge&&ge(null),!1;c.parseSVGDocument($e.documentElement,function(Dt,ni,mt,At){ge&&ge(Dt,ni,mt,At)},Re,Ze)}},loadSVGFromString:function(de,ge,Re,Ze){var ut=new c.window.DOMParser,Xe=ut.parseFromString(de.trim(),"text/xml");c.parseSVGDocument(Xe.documentElement,function($e,Dt,ni,mt){ge($e,Dt,ni,mt)},Re,Ze)}})}(i),e.ElementsParser=function(o,c,g,_,v,w){this.elements=o,this.callback=c,this.options=g,this.reviver=_,this.svgUid=g&&g.svgUid||0,this.parsingOptions=v,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=w},function(o){o.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},o.createObjects=function(){var c=this;this.elements.forEach(function(g,_){g.setAttribute("svgUid",c.svgUid),c.createObject(g,_)})},o.findTag=function(c){return e[e.util.string.capitalize(c.tagName.replace("svg:",""))]},o.createObject=function(c,g){var _=this.findTag(c);if(_&&_.fromElement)try{_.fromElement(c,this.createCallback(g,c),this.options)}catch(v){e.log(v)}else this.checkIfDone()},o.createCallback=function(c,g){var _=this;return function(v){var w;_.resolveGradient(v,g,"fill"),_.resolveGradient(v,g,"stroke"),v instanceof e.Image&&v._originalElement&&(w=v.parsePreserveAspectRatioAttribute(g)),v._removeTransformMatrix(w),_.resolveClipPath(v,g),_.reviver&&_.reviver(g,v),_.instances[c]=v,_.checkIfDone()}},o.extractPropertyDefinition=function(c,g,_){var v=c[g],w=this.regexUrl;if(!!w.test(v)){w.lastIndex=0;var x=w.exec(v)[1];return w.lastIndex=0,e[_][this.svgUid][x]}},o.resolveGradient=function(c,g,_){var v=this.extractPropertyDefinition(c,_,"gradientDefs");if(v){var w=g.getAttribute(_+"-opacity"),x=e.Gradient.fromElement(v,c,w,this.options);c.set(_,x)}},o.createClipPathCallback=function(c,g){return function(_){_._removeTransformMatrix(),_.fillRule=_.clipRule,g.push(_)}},o.resolveClipPath=function(c,g){var _=this.extractPropertyDefinition(c,"clipPath","clipPaths"),v,w,x,C,T,k;if(_){C=[],x=e.util.invertTransform(c.calcTransformMatrix());for(var M=_[0].parentNode,O=g;O.parentNode&&O.getAttribute("clip-path")!==c.clipPath;)O=O.parentNode;O.parentNode.appendChild(M);for(var V=0;V<_.length;V++)v=_[V],w=this.findTag(v),w.fromElement(v,this.createClipPathCallback(c,C),this.options);C.length===1?_=C[0]:_=new e.Group(C),T=e.util.multiplyTransformMatrices(x,_.calcTransformMatrix()),_.clipPath&&this.resolveClipPath(_,O);var k=e.util.qrDecompose(T);_.flipX=!1,_.flipY=!1,_.set("scaleX",k.scaleX),_.set("scaleY",k.scaleY),_.angle=k.angle,_.skewX=k.skewX,_.skewY=0,_.setPositionByOrigin({x:k.translateX,y:k.translateY},"center","center"),c.clipPath=_}else delete c.clipPath},o.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(c){return c!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(o){var c=o.fabric||(o.fabric={});if(c.Point){c.warn("fabric.Point is already defined");return}c.Point=g;function g(_,v){this.x=_,this.y=v}g.prototype={type:"point",constructor:g,add:function(_){return new g(this.x+_.x,this.y+_.y)},addEquals:function(_){return this.x+=_.x,this.y+=_.y,this},scalarAdd:function(_){return new g(this.x+_,this.y+_)},scalarAddEquals:function(_){return this.x+=_,this.y+=_,this},subtract:function(_){return new g(this.x-_.x,this.y-_.y)},subtractEquals:function(_){return this.x-=_.x,this.y-=_.y,this},scalarSubtract:function(_){return new g(this.x-_,this.y-_)},scalarSubtractEquals:function(_){return this.x-=_,this.y-=_,this},multiply:function(_){return new g(this.x*_,this.y*_)},multiplyEquals:function(_){return this.x*=_,this.y*=_,this},divide:function(_){return new g(this.x/_,this.y/_)},divideEquals:function(_){return this.x/=_,this.y/=_,this},eq:function(_){return this.x===_.x&&this.y===_.y},lt:function(_){return this.x<_.x&&this.y<_.y},lte:function(_){return this.x<=_.x&&this.y<=_.y},gt:function(_){return this.x>_.x&&this.y>_.y},gte:function(_){return this.x>=_.x&&this.y>=_.y},lerp:function(_,v){return typeof v>"u"&&(v=.5),v=Math.max(Math.min(1,v),0),new g(this.x+(_.x-this.x)*v,this.y+(_.y-this.y)*v)},distanceFrom:function(_){var v=this.x-_.x,w=this.y-_.y;return Math.sqrt(v*v+w*w)},midPointFrom:function(_){return this.lerp(_)},min:function(_){return new g(Math.min(this.x,_.x),Math.min(this.y,_.y))},max:function(_){return new g(Math.max(this.x,_.x),Math.max(this.y,_.y))},toString:function(){return this.x+","+this.y},setXY:function(_,v){return this.x=_,this.y=v,this},setX:function(_){return this.x=_,this},setY:function(_){return this.y=_,this},setFromPoint:function(_){return this.x=_.x,this.y=_.y,this},swap:function(_){var v=this.x,w=this.y;this.x=_.x,this.y=_.y,_.x=v,_.y=w},clone:function(){return new g(this.x,this.y)}}}(i),function(o){var c=o.fabric||(o.fabric={});if(c.Intersection){c.warn("fabric.Intersection is already defined");return}function g(_){this.status=_,this.points=[]}c.Intersection=g,c.Intersection.prototype={constructor:g,appendPoint:function(_){return this.points.push(_),this},appendPoints:function(_){return this.points=this.points.concat(_),this}},c.Intersection.intersectLineLine=function(_,v,w,x){var C,T=(x.x-w.x)*(_.y-w.y)-(x.y-w.y)*(_.x-w.x),k=(v.x-_.x)*(_.y-w.y)-(v.y-_.y)*(_.x-w.x),M=(x.y-w.y)*(v.x-_.x)-(x.x-w.x)*(v.y-_.y);if(M!==0){var O=T/M,V=k/M;0<=O&&O<=1&&0<=V&&V<=1?(C=new g("Intersection"),C.appendPoint(new c.Point(_.x+O*(v.x-_.x),_.y+O*(v.y-_.y)))):C=new g}else T===0||k===0?C=new g("Coincident"):C=new g("Parallel");return C},c.Intersection.intersectLinePolygon=function(_,v,w){var x=new g,C=w.length,T,k,M,O;for(O=0;O<C;O++)T=w[O],k=w[(O+1)%C],M=g.intersectLineLine(_,v,T,k),x.appendPoints(M.points);return x.points.length>0&&(x.status="Intersection"),x},c.Intersection.intersectPolygonPolygon=function(_,v){var w=new g,x=_.length,C;for(C=0;C<x;C++){var T=_[C],k=_[(C+1)%x],M=g.intersectLinePolygon(T,k,v);w.appendPoints(M.points)}return w.points.length>0&&(w.status="Intersection"),w},c.Intersection.intersectPolygonRectangle=function(_,v,w){var x=v.min(w),C=v.max(w),T=new c.Point(C.x,x.y),k=new c.Point(x.x,C.y),M=g.intersectLinePolygon(x,T,_),O=g.intersectLinePolygon(T,C,_),V=g.intersectLinePolygon(C,k,_),W=g.intersectLinePolygon(k,x,_),J=new g;return J.appendPoints(M.points),J.appendPoints(O.points),J.appendPoints(V.points),J.appendPoints(W.points),J.points.length>0&&(J.status="Intersection"),J}}(i),function(o){var c=o.fabric||(o.fabric={});if(c.Color){c.warn("fabric.Color is already defined.");return}function g(v){v?this._tryParsingColor(v):this.setSource([0,0,0,1])}c.Color=g,c.Color.prototype={_tryParsingColor:function(v){var w;v in g.colorNameMap&&(v=g.colorNameMap[v]),v==="transparent"&&(w=[255,255,255,0]),w||(w=g.sourceFromHex(v)),w||(w=g.sourceFromRgb(v)),w||(w=g.sourceFromHsl(v)),w||(w=[0,0,0,1]),w&&this.setSource(w)},_rgbToHsl:function(v,w,x){v/=255,w/=255,x/=255;var C,T,k,M=c.util.array.max([v,w,x]),O=c.util.array.min([v,w,x]);if(k=(M+O)/2,M===O)C=T=0;else{var V=M-O;switch(T=k>.5?V/(2-M-O):V/(M+O),M){case v:C=(w-x)/V+(w<x?6:0);break;case w:C=(x-v)/V+2;break;case x:C=(v-w)/V+4;break}C/=6}return[Math.round(C*360),Math.round(T*100),Math.round(k*100)]},getSource:function(){return this._source},setSource:function(v){this._source=v},toRgb:function(){var v=this.getSource();return"rgb("+v[0]+","+v[1]+","+v[2]+")"},toRgba:function(){var v=this.getSource();return"rgba("+v[0]+","+v[1]+","+v[2]+","+v[3]+")"},toHsl:function(){var v=this.getSource(),w=this._rgbToHsl(v[0],v[1],v[2]);return"hsl("+w[0]+","+w[1]+"%,"+w[2]+"%)"},toHsla:function(){var v=this.getSource(),w=this._rgbToHsl(v[0],v[1],v[2]);return"hsla("+w[0]+","+w[1]+"%,"+w[2]+"%,"+v[3]+")"},toHex:function(){var v=this.getSource(),w,x,C;return w=v[0].toString(16),w=w.length===1?"0"+w:w,x=v[1].toString(16),x=x.length===1?"0"+x:x,C=v[2].toString(16),C=C.length===1?"0"+C:C,w.toUpperCase()+x.toUpperCase()+C.toUpperCase()},toHexa:function(){var v=this.getSource(),w;return w=Math.round(v[3]*255),w=w.toString(16),w=w.length===1?"0"+w:w,this.toHex()+w.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(v){var w=this.getSource();return w[3]=v,this.setSource(w),this},toGrayscale:function(){var v=this.getSource(),w=parseInt((v[0]*.3+v[1]*.59+v[2]*.11).toFixed(0),10),x=v[3];return this.setSource([w,w,w,x]),this},toBlackWhite:function(v){var w=this.getSource(),x=(w[0]*.3+w[1]*.59+w[2]*.11).toFixed(0),C=w[3];return v=v||127,x=Number(x)<Number(v)?0:255,this.setSource([x,x,x,C]),this},overlayWith:function(v){v instanceof g||(v=new g(v));var w=[],x=this.getAlpha(),C=.5,T=this.getSource(),k=v.getSource(),M;for(M=0;M<3;M++)w.push(Math.round(T[M]*(1-C)+k[M]*C));return w[3]=x,this.setSource(w),this}},c.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,c.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,c.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,c.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function _(v,w,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?v+(w-v)*6*x:x<1/2?w:x<2/3?v+(w-v)*(2/3-x)*6:v}c.Color.fromRgb=function(v){return g.fromSource(g.sourceFromRgb(v))},c.Color.sourceFromRgb=function(v){var w=v.match(g.reRGBa);if(w){var x=parseInt(w[1],10)/(/%$/.test(w[1])?100:1)*(/%$/.test(w[1])?255:1),C=parseInt(w[2],10)/(/%$/.test(w[2])?100:1)*(/%$/.test(w[2])?255:1),T=parseInt(w[3],10)/(/%$/.test(w[3])?100:1)*(/%$/.test(w[3])?255:1);return[parseInt(x,10),parseInt(C,10),parseInt(T,10),w[4]?parseFloat(w[4]):1]}},c.Color.fromRgba=g.fromRgb,c.Color.fromHsl=function(v){return g.fromSource(g.sourceFromHsl(v))},c.Color.sourceFromHsl=function(v){var w=v.match(g.reHSLa);if(!!w){var x=(parseFloat(w[1])%360+360)%360/360,C=parseFloat(w[2])/(/%$/.test(w[2])?100:1),T=parseFloat(w[3])/(/%$/.test(w[3])?100:1),k,M,O;if(C===0)k=M=O=T;else{var V=T<=.5?T*(C+1):T+C-T*C,W=T*2-V;k=_(W,V,x+1/3),M=_(W,V,x),O=_(W,V,x-1/3)}return[Math.round(k*255),Math.round(M*255),Math.round(O*255),w[4]?parseFloat(w[4]):1]}},c.Color.fromHsla=g.fromHsl,c.Color.fromHex=function(v){return g.fromSource(g.sourceFromHex(v))},c.Color.sourceFromHex=function(v){if(v.match(g.reHex)){var w=v.slice(v.indexOf("#")+1),x=w.length===3||w.length===4,C=w.length===8||w.length===4,T=x?w.charAt(0)+w.charAt(0):w.substring(0,2),k=x?w.charAt(1)+w.charAt(1):w.substring(2,4),M=x?w.charAt(2)+w.charAt(2):w.substring(4,6),O=C?x?w.charAt(3)+w.charAt(3):w.substring(6,8):"FF";return[parseInt(T,16),parseInt(k,16),parseInt(M,16),parseFloat((parseInt(O,16)/255).toFixed(2))]}},c.Color.fromSource=function(v){var w=new g;return w.setSource(v),w}}(i),function(o){var c=o.fabric||(o.fabric={}),g=["e","se","s","sw","w","nw","n","ne","e"],_=["ns","nesw","ew","nwse"],v={},w="left",x="top",C="right",T="bottom",k="center",M={top:T,bottom:x,left:C,right:w,center:k},O=c.util.radiansToDegrees,V=Math.sign||function(mt){return(mt>0)-(mt<0)||+mt};function W(mt,At){var xt=mt.angle+O(Math.atan2(At.y,At.x))+360;return Math.round(xt%360/45)}function J(mt,At){var xt=At.transform.target,Qe=xt.canvas,Yt=c.util.object.clone(At);Yt.target=xt,Qe&&Qe.fire("object:"+mt,Yt),xt.fire(mt,At)}function Q(mt,At){var xt=At.canvas,Qe=xt.uniScaleKey,Yt=mt[Qe];return xt.uniformScaling&&!Yt||!xt.uniformScaling&&Yt}function Z(mt){return mt.originX===k&&mt.originY===k}function ie(mt,At,xt){var Qe=mt.lockScalingX,Yt=mt.lockScalingY;return!!(Qe&&Yt||!At&&(Qe||Yt)&&xt||Qe&&At==="x"||Yt&&At==="y")}function Se(mt,At,xt){var Qe="not-allowed",Yt=Q(mt,xt),si="";if(At.x!==0&&At.y===0?si="x":At.x===0&&At.y!==0&&(si="y"),ie(xt,si,Yt))return Qe;var Zt=W(xt,At);return g[Zt]+"-resize"}function xe(mt,At,xt){var Qe="not-allowed";if(At.x!==0&&xt.lockSkewingY||At.y!==0&&xt.lockSkewingX)return Qe;var Yt=W(xt,At)%4;return _[Yt]+"-resize"}function le(mt,At,xt){return mt[xt.canvas.altActionKey]?v.skewCursorStyleHandler(mt,At,xt):v.scaleCursorStyleHandler(mt,At,xt)}function Ee(mt,At,xt){var Qe=mt[xt.canvas.altActionKey];if(At.x===0)return Qe?"skewX":"scaleY";if(At.y===0)return Qe?"skewY":"scaleX"}function me(mt,At,xt){return xt.lockRotation?"not-allowed":At.cursorStyle}function Ae(mt,At,xt,Qe){return{e:mt,transform:At,pointer:{x:xt,y:Qe}}}function pt(mt){return function(At,xt,Qe,Yt){var si=xt.target,Zt=si.getCenterPoint(),Ei=si.translateToOriginPoint(Zt,xt.originX,xt.originY),Qt=mt(At,xt,Qe,Yt);return si.setPositionByOrigin(Ei,xt.originX,xt.originY),Qt}}function rt(mt,At){return function(xt,Qe,Yt,si){var Zt=At(xt,Qe,Yt,si);return Zt&&J(mt,Ae(xt,Qe,Yt,si)),Zt}}function Pt(mt,At,xt,Qe,Yt){var si=mt.target,Zt=si.controls[mt.corner],Ei=si.canvas.getZoom(),Qt=si.padding/Ei,Ot=si.toLocalPoint(new c.Point(Qe,Yt),At,xt);return Ot.x>=Qt&&(Ot.x-=Qt),Ot.x<=-Qt&&(Ot.x+=Qt),Ot.y>=Qt&&(Ot.y-=Qt),Ot.y<=Qt&&(Ot.y+=Qt),Ot.x-=Zt.offsetX,Ot.y-=Zt.offsetY,Ot}function We(mt){return mt.flipX!==mt.flipY}function be(mt,At,xt,Qe,Yt){if(mt[At]!==0){var si=mt._getTransformedDimensions()[Qe],Zt=Yt/si*mt[xt];mt.set(xt,Zt)}}function Le(mt,At,xt,Qe){var Yt=At.target,si=Yt._getTransformedDimensions(0,Yt.skewY),Zt=Pt(At,At.originX,At.originY,xt,Qe),Ei=Math.abs(Zt.x*2)-si.x,Qt=Yt.skewX,Ot;Ei<2?Ot=0:(Ot=O(Math.atan2(Ei/Yt.scaleX,si.y/Yt.scaleY)),At.originX===w&&At.originY===T&&(Ot=-Ot),At.originX===C&&At.originY===x&&(Ot=-Ot),We(Yt)&&(Ot=-Ot));var ai=Qt!==Ot;if(ai){var Ji=Yt._getTransformedDimensions().y;Yt.set("skewX",Ot),be(Yt,"skewY","scaleY","y",Ji)}return ai}function Ue(mt,At,xt,Qe){var Yt=At.target,si=Yt._getTransformedDimensions(Yt.skewX,0),Zt=Pt(At,At.originX,At.originY,xt,Qe),Ei=Math.abs(Zt.y*2)-si.y,Qt=Yt.skewY,Ot;Ei<2?Ot=0:(Ot=O(Math.atan2(Ei/Yt.scaleY,si.x/Yt.scaleX)),At.originX===w&&At.originY===T&&(Ot=-Ot),At.originX===C&&At.originY===x&&(Ot=-Ot),We(Yt)&&(Ot=-Ot));var ai=Qt!==Ot;if(ai){var Ji=Yt._getTransformedDimensions().x;Yt.set("skewY",Ot),be(Yt,"skewX","scaleX","x",Ji)}return ai}function ce(mt,At,xt,Qe){var Yt=At.target,si=Yt.skewX,Zt,Ei=At.originY;if(Yt.lockSkewingX)return!1;if(si===0){var Qt=Pt(At,k,k,xt,Qe);Qt.x>0?Zt=w:Zt=C}else si>0&&(Zt=Ei===x?w:C),si<0&&(Zt=Ei===x?C:w),We(Yt)&&(Zt=Zt===w?C:w);At.originX=Zt;var Ot=rt("skewing",pt(Le));return Ot(mt,At,xt,Qe)}function Ie(mt,At,xt,Qe){var Yt=At.target,si=Yt.skewY,Zt,Ei=At.originX;if(Yt.lockSkewingY)return!1;if(si===0){var Qt=Pt(At,k,k,xt,Qe);Qt.y>0?Zt=x:Zt=T}else si>0&&(Zt=Ei===w?x:T),si<0&&(Zt=Ei===w?T:x),We(Yt)&&(Zt=Zt===x?T:x);At.originY=Zt;var Ot=rt("skewing",pt(Ue));return Ot(mt,At,xt,Qe)}function de(mt,At,xt,Qe){var Yt=At,si=Yt.target,Zt=si.translateToOriginPoint(si.getCenterPoint(),Yt.originX,Yt.originY);if(si.lockRotation)return!1;var Ei=Math.atan2(Yt.ey-Zt.y,Yt.ex-Zt.x),Qt=Math.atan2(Qe-Zt.y,xt-Zt.x),Ot=O(Qt-Ei+Yt.theta),ai=!0;if(si.snapAngle>0){var Ji=si.snapAngle,Ii=si.snapThreshold||Ji,$t=Math.ceil(Ot/Ji)*Ji,Me=Math.floor(Ot/Ji)*Ji;Math.abs(Ot-Me)<Ii?Ot=Me:Math.abs(Ot-$t)<Ii&&(Ot=$t)}return Ot<0&&(Ot=360+Ot),Ot%=360,ai=si.angle!==Ot,si.angle=Ot,ai}function ge(mt,At,xt,Qe,Yt){Yt=Yt||{};var si=At.target,Zt=si.lockScalingX,Ei=si.lockScalingY,Qt=Yt.by,Ot,ai,Ji,Ii,$t=Q(mt,si),Me=ie(si,Qt,$t),ee,ae,et=At.gestureScale;if(Me)return!1;if(et)ai=At.scaleX*et,Ji=At.scaleY*et;else{if(Ot=Pt(At,At.originX,At.originY,xt,Qe),ee=Qt!=="y"?V(Ot.x):1,ae=Qt!=="x"?V(Ot.y):1,At.signX||(At.signX=ee),At.signY||(At.signY=ae),si.lockScalingFlip&&(At.signX!==ee||At.signY!==ae))return!1;if(Ii=si._getTransformedDimensions(),$t&&!Qt){var bt=Math.abs(Ot.x)+Math.abs(Ot.y),Xt=At.original,fi=Math.abs(Ii.x*Xt.scaleX/si.scaleX)+Math.abs(Ii.y*Xt.scaleY/si.scaleY),xn=bt/fi;ai=Xt.scaleX*xn,Ji=Xt.scaleY*xn}else ai=Math.abs(Ot.x*si.scaleX/Ii.x),Ji=Math.abs(Ot.y*si.scaleY/Ii.y);Z(At)&&(ai*=2,Ji*=2),At.signX!==ee&&Qt!=="y"&&(At.originX=M[At.originX],ai*=-1,At.signX=ee),At.signY!==ae&&Qt!=="x"&&(At.originY=M[At.originY],Ji*=-1,At.signY=ae)}var qn=si.scaleX,bn=si.scaleY;return Qt?(Qt==="x"&&si.set("scaleX",ai),Qt==="y"&&si.set("scaleY",Ji)):(!Zt&&si.set("scaleX",ai),!Ei&&si.set("scaleY",Ji)),qn!==si.scaleX||bn!==si.scaleY}function Re(mt,At,xt,Qe){return ge(mt,At,xt,Qe)}function Ze(mt,At,xt,Qe){return ge(mt,At,xt,Qe,{by:"x"})}function ut(mt,At,xt,Qe){return ge(mt,At,xt,Qe,{by:"y"})}function Xe(mt,At,xt,Qe){return mt[At.target.canvas.altActionKey]?v.skewHandlerX(mt,At,xt,Qe):v.scalingY(mt,At,xt,Qe)}function $e(mt,At,xt,Qe){return mt[At.target.canvas.altActionKey]?v.skewHandlerY(mt,At,xt,Qe):v.scalingX(mt,At,xt,Qe)}function Dt(mt,At,xt,Qe){var Yt=At.target,si=Pt(At,At.originX,At.originY,xt,Qe),Zt=Yt.strokeWidth/(Yt.strokeUniform?Yt.scaleX:1),Ei=Z(At)?2:1,Qt=Yt.width,Ot=Math.abs(si.x*Ei/Yt.scaleX)-Zt;return Yt.set("width",Math.max(Ot,0)),Qt!==Ot}function ni(mt,At,xt,Qe){var Yt=At.target,si=xt-At.offsetX,Zt=Qe-At.offsetY,Ei=!Yt.get("lockMovementX")&&Yt.left!==si,Qt=!Yt.get("lockMovementY")&&Yt.top!==Zt;return Ei&&Yt.set("left",si),Qt&&Yt.set("top",Zt),(Ei||Qt)&&J("moving",Ae(mt,At,xt,Qe)),Ei||Qt}v.scaleCursorStyleHandler=Se,v.skewCursorStyleHandler=xe,v.scaleSkewCursorStyleHandler=le,v.rotationWithSnapping=rt("rotating",pt(de)),v.scalingEqually=rt("scaling",pt(Re)),v.scalingX=rt("scaling",pt(Ze)),v.scalingY=rt("scaling",pt(ut)),v.scalingYOrSkewingX=Xe,v.scalingXOrSkewingY=$e,v.changeWidth=rt("resizing",pt(Dt)),v.skewHandlerX=ce,v.skewHandlerY=Ie,v.dragHandler=ni,v.scaleOrSkewActionName=Ee,v.rotationStyleHandler=me,v.fireEvent=J,v.wrapWithFixedAnchor=pt,v.wrapWithFireEvent=rt,v.getLocalPoint=Pt,c.controlsUtils=v}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.degreesToRadians,_=c.controlsUtils;function v(x,C,T,k,M){k=k||{};var O=this.sizeX||k.cornerSize||M.cornerSize,V=this.sizeY||k.cornerSize||M.cornerSize,W=typeof k.transparentCorners<"u"?k.transparentCorners:M.transparentCorners,J=W?"stroke":"fill",Q=!W&&(k.cornerStrokeColor||M.cornerStrokeColor),Z=C,ie=T,Se;x.save(),x.fillStyle=k.cornerColor||M.cornerColor,x.strokeStyle=k.cornerStrokeColor||M.cornerStrokeColor,O>V?(Se=O,x.scale(1,V/O),ie=T*O/V):V>O?(Se=V,x.scale(O/V,1),Z=C*V/O):Se=O,x.lineWidth=1,x.beginPath(),x.arc(Z,ie,Se/2,0,2*Math.PI,!1),x[J](),Q&&x.stroke(),x.restore()}function w(x,C,T,k,M){k=k||{};var O=this.sizeX||k.cornerSize||M.cornerSize,V=this.sizeY||k.cornerSize||M.cornerSize,W=typeof k.transparentCorners<"u"?k.transparentCorners:M.transparentCorners,J=W?"stroke":"fill",Q=!W&&(k.cornerStrokeColor||M.cornerStrokeColor),Z=O/2,ie=V/2;x.save(),x.fillStyle=k.cornerColor||M.cornerColor,x.strokeStyle=k.cornerStrokeColor||M.cornerStrokeColor,x.lineWidth=1,x.translate(C,T),x.rotate(g(M.angle)),x[J+"Rect"](-Z,-ie,O,V),Q&&x.strokeRect(-Z,-ie,O,V),x.restore()}_.renderCircleControl=v,_.renderSquareControl=w}(i),function(o){var c=o.fabric||(o.fabric={});function g(_){for(var v in _)this[v]=_[v]}c.Control=g,c.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(_,v){return v.cursorStyle},getActionName:function(_,v){return v.actionName},getVisibility:function(_,v){var w=_._controlsVisibility;return w&&typeof w[v]<"u"?w[v]:this.visible},setVisibility:function(_){this.visible=_},positionHandler:function(_,v){var w=c.util.transformPoint({x:this.x*_.x+this.offsetX,y:this.y*_.y+this.offsetY},v);return w},calcCornerCoords:function(_,v,w,x,C){var T,k,M,O,V=C?this.touchSizeX:this.sizeX,W=C?this.touchSizeY:this.sizeY;if(V&&W&&V!==W){var J=Math.atan2(W,V),Q=Math.sqrt(V*V+W*W)/2,Z=J-c.util.degreesToRadians(_),ie=Math.PI/2-J-c.util.degreesToRadians(_);T=Q*c.util.cos(Z),k=Q*c.util.sin(Z),M=Q*c.util.cos(ie),O=Q*c.util.sin(ie)}else{var Se=V&&W?V:v;Q=Se*.7071067812;var Z=c.util.degreesToRadians(45-_);T=M=Q*c.util.cos(Z),k=O=Q*c.util.sin(Z)}return{tl:{x:w-O,y:x-M},tr:{x:w+T,y:x-k},bl:{x:w-T,y:x+k},br:{x:w+O,y:x+M}}},render:function(_,v,w,x,C){switch(x=x||{},x.cornerStyle||C.cornerStyle){case"circle":c.controlsUtils.renderCircleControl.call(this,_,v,w,x,C);break;default:c.controlsUtils.renderSquareControl.call(this,_,v,w,x,C)}}}}(i),function(){function o(w,x){var C=w.getAttribute("style"),T=w.getAttribute("offset")||0,k,M,O,V;if(T=parseFloat(T)/(/%$/.test(T)?100:1),T=T<0?0:T>1?1:T,C){var W=C.split(/\s*;\s*/);for(W[W.length-1]===""&&W.pop(),V=W.length;V--;){var J=W[V].split(/\s*:\s*/),Q=J[0].trim(),Z=J[1].trim();Q==="stop-color"?k=Z:Q==="stop-opacity"&&(O=Z)}}return k||(k=w.getAttribute("stop-color")||"rgb(0,0,0)"),O||(O=w.getAttribute("stop-opacity")),k=new e.Color(k),M=k.getAlpha(),O=isNaN(parseFloat(O))?1:parseFloat(O),O*=M*x,{offset:T,color:k.toRgb(),opacity:O}}function c(w){return{x1:w.getAttribute("x1")||0,y1:w.getAttribute("y1")||0,x2:w.getAttribute("x2")||"100%",y2:w.getAttribute("y2")||0}}function g(w){return{x1:w.getAttribute("fx")||w.getAttribute("cx")||"50%",y1:w.getAttribute("fy")||w.getAttribute("cy")||"50%",r1:0,x2:w.getAttribute("cx")||"50%",y2:w.getAttribute("cy")||"50%",r2:w.getAttribute("r")||"50%"}}var _=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(w){w||(w={}),w.coords||(w.coords={});var x,C=this;Object.keys(w).forEach(function(T){C[T]=w[T]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,x={x1:w.coords.x1||0,y1:w.coords.y1||0,x2:w.coords.x2||0,y2:w.coords.y2||0},this.type==="radial"&&(x.r1=w.coords.r1||0,x.r2=w.coords.r2||0),this.coords=x,this.colorStops=w.colorStops.slice()},addColorStop:function(w){for(var x in w){var C=new e.Color(w[x]);this.colorStops.push({offset:parseFloat(x),color:C.toRgb(),opacity:C.getAlpha()})}return this},toObject:function(w){var x={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,x,w),x},toSVG:function(w,M){var C=_(this.coords,!0),T,k,M=M||{},O,V,W=_(this.colorStops,!0),J=C.r1>C.r2,Q=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),Z=-this.offsetX,ie=-this.offsetY,Se=!!M.additionalTransform,xe=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(W.sort(function(pt,rt){return pt.offset-rt.offset}),xe==="objectBoundingBox"?(Z/=w.width,ie/=w.height):(Z+=w.width/2,ie+=w.height/2),w.type==="path"&&this.gradientUnits!=="percentage"&&(Z-=w.pathOffset.x,ie-=w.pathOffset.y),Q[4]-=Z,Q[5]-=ie,V='id="SVGID_'+this.id+'" gradientUnits="'+xe+'"',V+=' gradientTransform="'+(Se?M.additionalTransform+" ":"")+e.util.matrixToSVG(Q)+'" ',this.type==="linear"?O=["<linearGradient ",V,' x1="',C.x1,'" y1="',C.y1,'" x2="',C.x2,'" y2="',C.y2,`">
`]:this.type==="radial"&&(O=["<radialGradient ",V,' cx="',J?C.x1:C.x2,'" cy="',J?C.y1:C.y2,'" r="',J?C.r1:C.r2,'" fx="',J?C.x2:C.x1,'" fy="',J?C.y2:C.y1,`">
`]),this.type==="radial"){if(J)for(W=W.concat(),W.reverse(),T=0,k=W.length;T<k;T++)W[T].offset=1-W[T].offset;var le=Math.min(C.r1,C.r2);if(le>0){var Ee=Math.max(C.r1,C.r2),me=le/Ee;for(T=0,k=W.length;T<k;T++)W[T].offset+=me*(1-W[T].offset)}}for(T=0,k=W.length;T<k;T++){var Ae=W[T];O.push("<stop ",'offset="',Ae.offset*100+"%",'" style="stop-color:',Ae.color,typeof Ae.opacity<"u"?";stop-opacity: "+Ae.opacity:";",`"/>
`)}return O.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),O.join("")},toLive:function(w){var x,C=e.util.object.clone(this.coords),T,k;if(!!this.type){for(this.type==="linear"?x=w.createLinearGradient(C.x1,C.y1,C.x2,C.y2):this.type==="radial"&&(x=w.createRadialGradient(C.x1,C.y1,C.r1,C.x2,C.y2,C.r2)),T=0,k=this.colorStops.length;T<k;T++){var M=this.colorStops[T].color,O=this.colorStops[T].opacity,V=this.colorStops[T].offset;typeof O<"u"&&(M=new e.Color(M).setAlpha(O).toRgba()),x.addColorStop(V,M)}return x}}}),e.util.object.extend(e.Gradient,{fromElement:function(w,x,C,T){var k=parseFloat(C)/(/%$/.test(C)?100:1);k=k<0?0:k>1?1:k,isNaN(k)&&(k=1);var M=w.getElementsByTagName("stop"),O,V=w.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",W=w.getAttribute("gradientTransform")||"",J=[],Q,Z,ie=0,Se=0,xe;for(w.nodeName==="linearGradient"||w.nodeName==="LINEARGRADIENT"?(O="linear",Q=c(w)):(O="radial",Q=g(w)),Z=M.length;Z--;)J.push(o(M[Z],k));xe=e.parseTransformAttribute(W),v(x,Q,T,V),V==="pixels"&&(ie=-x.left,Se=-x.top);var le=new e.Gradient({id:w.getAttribute("id"),type:O,coords:Q,colorStops:J,gradientUnits:V,gradientTransform:xe,offsetX:ie,offsetY:Se});return le}});function v(w,x,C,T){var k,M;Object.keys(x).forEach(function(O){k=x[O],k==="Infinity"?M=1:k==="-Infinity"?M=0:(M=parseFloat(x[O],10),typeof k=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(k)&&(M*=.01,T==="pixels"&&((O==="x1"||O==="x2"||O==="r2")&&(M*=C.viewBoxWidth||C.width),(O==="y1"||O==="y2")&&(M*=C.viewBoxHeight||C.height)))),x[O]=M})}}(),function(){var o=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(c,g){if(c||(c={}),this.id=e.Object.__uid++,this.setOptions(c),!c.source||c.source&&typeof c.source!="string"){g&&g(this);return}else{var _=this;this.source=e.util.createImage(),e.util.loadImage(c.source,function(v,w){_.source=v,g&&g(_,w)},null,this.crossOrigin)}},toObject:function(c){var g=e.Object.NUM_FRACTION_DIGITS,_,v;return typeof this.source.src=="string"?_=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(_=this.source.toDataURL()),v={type:"pattern",source:_,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:o(this.offsetX,g),offsetY:o(this.offsetY,g),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,v,c),v},toSVG:function(c){var g=typeof this.source=="function"?this.source():this.source,_=g.width/c.width,v=g.height/c.height,w=this.offsetX/c.width,x=this.offsetY/c.height,C="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(v=1,x&&(v+=Math.abs(x))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(_=1,w&&(_+=Math.abs(w))),g.src?C=g.src:g.toDataURL&&(C=g.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+w+'" y="'+x+'" width="'+_+'" height="'+v+`">
<image x="0" y="0" width="`+g.width+'" height="'+g.height+'" xlink:href="'+C+`"></image>
</pattern>
`},setOptions:function(c){for(var g in c)this[g]=c[g]},toLive:function(c){var g=this.source;return!g||typeof g.src<"u"&&(!g.complete||g.naturalWidth===0||g.naturalHeight===0)?"":c.createPattern(g,this.repeat)}})}(),function(o){var c=o.fabric||(o.fabric={}),g=c.util.toFixed;if(c.Shadow){c.warn("fabric.Shadow is already defined.");return}c.Shadow=c.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(_){typeof _=="string"&&(_=this._parseShadow(_));for(var v in _)this[v]=_[v];this.id=c.Object.__uid++},_parseShadow:function(_){var v=_.trim(),w=c.Shadow.reOffsetsAndBlur.exec(v)||[],x=v.replace(c.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:x.trim(),offsetX:parseFloat(w[1],10)||0,offsetY:parseFloat(w[2],10)||0,blur:parseFloat(w[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(_){var v=40,w=40,x=c.Object.NUM_FRACTION_DIGITS,C=c.util.rotateVector({x:this.offsetX,y:this.offsetY},c.util.degreesToRadians(-_.angle)),T=20,k=new c.Color(this.color);return _.width&&_.height&&(v=g((Math.abs(C.x)+this.blur)/_.width,x)*100+T,w=g((Math.abs(C.y)+this.blur)/_.height,x)*100+T),_.flipX&&(C.x*=-1),_.flipY&&(C.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+w+'%" height="'+(100+2*w)+'%" x="-'+v+'%" width="'+(100+2*v)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+g(this.blur?this.blur/2:0,x)+`"></feGaussianBlur>
	<feOffset dx="`+g(C.x,x)+'" dy="'+g(C.y,x)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+k.toRgb()+'" flood-opacity="'+k.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var _={},v=c.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(w){this[w]!==v[w]&&(_[w]=this[w])},this),_}}),c.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(i),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var o=e.util.object.extend,c=e.util.getElementOffset,g=e.util.removeFromArray,_=e.util.toFixed,v=e.util.transformPoint,w=e.util.invertTransform,x=e.util.getNodeCanvas,C=e.util.createCanvasElement,T=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(k,M){M||(M={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(k,M)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(k,M){var O=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(k),this._initOptions(M),this.interactive||this._initRetinaScaling(),M.overlayImage&&this.setOverlayImage(M.overlayImage,O),M.backgroundImage&&this.setBackgroundImage(M.backgroundImage,O),M.backgroundColor&&this.setBackgroundColor(M.backgroundColor,O),M.overlayColor&&this.setOverlayColor(M.overlayColor,O),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var k=e.devicePixelRatio;this.__initRetinaScaling(k,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(k,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(k,M,O){M.setAttribute("width",this.width*k),M.setAttribute("height",this.height*k),O.scale(k,k)},calcOffset:function(){return this._offset=c(this.lowerCanvasEl),this},setOverlayImage:function(k,M,O){return this.__setBgOverlayImage("overlayImage",k,M,O)},setBackgroundImage:function(k,M,O){return this.__setBgOverlayImage("backgroundImage",k,M,O)},setOverlayColor:function(k,M){return this.__setBgOverlayColor("overlayColor",k,M)},setBackgroundColor:function(k,M){return this.__setBgOverlayColor("backgroundColor",k,M)},__setBgOverlayImage:function(k,M,O,V){return typeof M=="string"?e.util.loadImage(M,function(W,J){if(W){var Q=new e.Image(W,V);this[k]=Q,Q.canvas=this}O&&O(W,J)},this,V&&V.crossOrigin):(V&&M.setOptions(V),this[k]=M,M&&(M.canvas=this),O&&O(M,!1)),this},__setBgOverlayColor:function(k,M,O){return this[k]=M,this._initGradient(M,k),this._initPattern(M,k,O),this},_createCanvasElement:function(){var k=C();if(!k||(k.style||(k.style={}),typeof k.getContext>"u"))throw T;return k},_initOptions:function(k){var M=this.lowerCanvasEl;this._setOptions(k),this.width=this.width||parseInt(M.width,10)||0,this.height=this.height||parseInt(M.height,10)||0,this.lowerCanvasEl.style&&(M.width=this.width,M.height=this.height,M.style.width=this.width+"px",M.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(k){k&&k.getContext?this.lowerCanvasEl=k:this.lowerCanvasEl=e.util.getById(k)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(k,M){return this.setDimensions({width:k},M)},setHeight:function(k,M){return this.setDimensions({height:k},M)},setDimensions:function(k,M){var O;M=M||{};for(var V in k)O=k[V],M.cssOnly||(this._setBackstoreDimension(V,k[V]),O+="px",this.hasLostContext=!0),M.backstoreOnly||this._setCssDimension(V,O);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),M.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(k,M){return this.lowerCanvasEl[k]=M,this.upperCanvasEl&&(this.upperCanvasEl[k]=M),this.cacheCanvasEl&&(this.cacheCanvasEl[k]=M),this[k]=M,this},_setCssDimension:function(k,M){return this.lowerCanvasEl.style[k]=M,this.upperCanvasEl&&(this.upperCanvasEl.style[k]=M),this.wrapperEl&&(this.wrapperEl.style[k]=M),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(k){var M=this._activeObject,O=this.backgroundImage,V=this.overlayImage,W,J,Q;for(this.viewportTransform=k,J=0,Q=this._objects.length;J<Q;J++)W=this._objects[J],W.group||W.setCoords(!0);return M&&M.setCoords(),O&&O.setCoords(!0),V&&V.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(k,M){var O=k,V=this.viewportTransform.slice(0);k=v(k,w(this.viewportTransform)),V[0]=M,V[3]=M;var W=v(k,V);return V[4]+=O.x-W.x,V[5]+=O.y-W.y,this.setViewportTransform(V)},setZoom:function(k){return this.zoomToPoint(new e.Point(0,0),k),this},absolutePan:function(k){var M=this.viewportTransform.slice(0);return M[4]=-k.x,M[5]=-k.y,this.setViewportTransform(M)},relativePan:function(k){return this.absolutePan(new e.Point(-k.x-this.viewportTransform[4],-k.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(k){this.stateful&&k.setupState(),k._set("canvas",this),k.setCoords(),this.fire("object:added",{target:k}),k.fire("added")},_onObjectRemoved:function(k){this.fire("object:removed",{target:k}),k.fire("removed"),delete k.canvas},clearContext:function(k){return k.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var k=this.contextContainer;return this.renderCanvas(k,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var k={},M=this.width,O=this.height,V=w(this.viewportTransform);return k.tl=v({x:0,y:0},V),k.br=v({x:M,y:O},V),k.tr=new e.Point(k.br.x,k.tl.y),k.bl=new e.Point(k.tl.x,k.br.y),this.vptCoords=k,k},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(k,M){var O=this.viewportTransform,V=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(k),e.util.setImageSmoothing(k,this.imageSmoothingEnabled),this.fire("before:render",{ctx:k}),this._renderBackground(k),k.save(),k.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._renderObjects(k,M),k.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(k),V&&(V.canvas=this,V.shouldCache(),V._transformDone=!0,V.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(k)),this._renderOverlay(k),this.controlsAboveOverlay&&this.interactive&&this.drawControls(k),this.fire("after:render",{ctx:k})},drawClipPathOnCanvas:function(k){var M=this.viewportTransform,O=this.clipPath;k.save(),k.transform(M[0],M[1],M[2],M[3],M[4],M[5]),k.globalCompositeOperation="destination-in",O.transform(k),k.scale(1/O.zoomX,1/O.zoomY),k.drawImage(O._cacheCanvas,-O.cacheTranslationX,-O.cacheTranslationY),k.restore()},_renderObjects:function(k,M){var O,V;for(O=0,V=M.length;O<V;++O)M[O]&&M[O].render(k)},_renderBackgroundOrOverlay:function(k,M){var O=this[M+"Color"],V=this[M+"Image"],W=this.viewportTransform,J=this[M+"Vpt"];if(!(!O&&!V)){if(O){k.save(),k.beginPath(),k.moveTo(0,0),k.lineTo(this.width,0),k.lineTo(this.width,this.height),k.lineTo(0,this.height),k.closePath(),k.fillStyle=O.toLive?O.toLive(k,this):O,J&&k.transform(W[0],W[1],W[2],W[3],W[4],W[5]),k.transform(1,0,0,1,O.offsetX||0,O.offsetY||0);var Q=O.gradientTransform||O.patternTransform;Q&&k.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),k.fill(),k.restore()}V&&(k.save(),J&&k.transform(W[0],W[1],W[2],W[3],W[4],W[5]),V.render(k),k.restore())}},_renderBackground:function(k){this._renderBackgroundOrOverlay(k,"background")},_renderOverlay:function(k){this._renderBackgroundOrOverlay(k,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(k){return this._centerObject(k,new e.Point(this.getCenterPoint().x,k.getCenterPoint().y))},centerObjectV:function(k){return this._centerObject(k,new e.Point(k.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(k){var M=this.getCenterPoint();return this._centerObject(k,M)},viewportCenterObject:function(k){var M=this.getVpCenter();return this._centerObject(k,M)},viewportCenterObjectH:function(k){var M=this.getVpCenter();return this._centerObject(k,new e.Point(M.x,k.getCenterPoint().y)),this},viewportCenterObjectV:function(k){var M=this.getVpCenter();return this._centerObject(k,new e.Point(k.getCenterPoint().x,M.y))},getVpCenter:function(){var k=this.getCenterPoint(),M=w(this.viewportTransform);return v(k,M)},_centerObject:function(k,M){return k.setPositionByOrigin(M,"center","center"),k.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(k){return this.toDatalessObject(k)},toObject:function(k){return this._toObjectMethod("toObject",k)},toDatalessObject:function(k){return this._toObjectMethod("toDatalessObject",k)},_toObjectMethod:function(k,M){var O=this.clipPath,V={version:e.version,objects:this._toObjects(k,M)};return O&&!O.excludeFromExport&&(V.clipPath=this._toObject(this.clipPath,k,M)),o(V,this.__serializeBgOverlay(k,M)),e.util.populateWithProperties(this,V,M),V},_toObjects:function(k,M){return this._objects.filter(function(O){return!O.excludeFromExport}).map(function(O){return this._toObject(O,k,M)},this)},_toObject:function(k,M,O){var V;this.includeDefaultValues||(V=k.includeDefaultValues,k.includeDefaultValues=!1);var W=k[M](O);return this.includeDefaultValues||(k.includeDefaultValues=V),W},__serializeBgOverlay:function(k,M){var O={},V=this.backgroundImage,W=this.overlayImage,J=this.backgroundColor,Q=this.overlayColor;return J&&J.toObject?J.excludeFromExport||(O.background=J.toObject(M)):J&&(O.background=J),Q&&Q.toObject?Q.excludeFromExport||(O.overlay=Q.toObject(M)):Q&&(O.overlay=Q),V&&!V.excludeFromExport&&(O.backgroundImage=this._toObject(V,k,M)),W&&!W.excludeFromExport&&(O.overlayImage=this._toObject(W,k,M)),O},svgViewportTransformation:!0,toSVG:function(k,M){k||(k={}),k.reviver=M;var O=[];return this._setSVGPreamble(O,k),this._setSVGHeader(O,k),this.clipPath&&O.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(O,"background"),this._setSVGBgOverlayImage(O,"backgroundImage",M),this._setSVGObjects(O,M),this.clipPath&&O.push(`</g>
`),this._setSVGBgOverlayColor(O,"overlay"),this._setSVGBgOverlayImage(O,"overlayImage",M),O.push("</svg>"),O.join("")},_setSVGPreamble:function(k,M){M.suppressPreamble||k.push('<?xml version="1.0" encoding="',M.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(k,M){var O=M.width||this.width,V=M.height||this.height,W,J='viewBox="0 0 '+this.width+" "+this.height+'" ',Q=e.Object.NUM_FRACTION_DIGITS;M.viewBox?J='viewBox="'+M.viewBox.x+" "+M.viewBox.y+" "+M.viewBox.width+" "+M.viewBox.height+'" ':this.svgViewportTransformation&&(W=this.viewportTransform,J='viewBox="'+_(-W[4]/W[0],Q)+" "+_(-W[5]/W[3],Q)+" "+_(this.width/W[0],Q)+" "+_(this.height/W[3],Q)+'" '),k.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',O,'" ','height="',V,'" ',J,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(M),`</defs>
`)},createSVGClipPathMarkup:function(k){var M=this.clipPath;return M?(M.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+M.clipPathId+`" >
`+this.clipPath.toClipPathSVG(k.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var k=this,M=["background","overlay"].map(function(O){var V=k[O+"Color"];if(V&&V.toLive){var W=k[O+"Vpt"],J=k.viewportTransform,Q={width:k.width/(W?J[0]:1),height:k.height/(W?J[3]:1)};return V.toSVG(Q,{additionalTransform:W?e.util.matrixToSVG(J):""})}});return M.join("")},createSVGFontFacesMarkup:function(){var k="",M={},O,V,W,J,Q,Z,ie,Se,xe,le=e.fontPaths,Ee=[];for(this._objects.forEach(function Ae(pt){Ee.push(pt),pt._objects&&pt._objects.forEach(Ae)}),Se=0,xe=Ee.length;Se<xe;Se++)if(O=Ee[Se],V=O.fontFamily,!(O.type.indexOf("text")===-1||M[V]||!le[V])&&(M[V]=!0,!!O.styles)){W=O.styles;for(Q in W){J=W[Q];for(ie in J)Z=J[ie],V=Z.fontFamily,!M[V]&&le[V]&&(M[V]=!0)}}for(var me in M)k+=[`		@font-face {
`,"			font-family: '",me,`';
`,"			src: url('",le[me],`');
`,`		}
`].join("");return k&&(k=['	<style type="text/css">',`<![CDATA[
`,k,"]]>",`</style>
`].join("")),k},_setSVGObjects:function(k,M){var O,V,W,J=this._objects;for(V=0,W=J.length;V<W;V++)O=J[V],!O.excludeFromExport&&this._setSVGObject(k,O,M)},_setSVGObject:function(k,M,O){k.push(M.toSVG(O))},_setSVGBgOverlayImage:function(k,M,O){this[M]&&!this[M].excludeFromExport&&this[M].toSVG&&k.push(this[M].toSVG(O))},_setSVGBgOverlayColor:function(k,M){var O=this[M+"Color"],V=this.viewportTransform,W=this.width,J=this.height;if(!!O)if(O.toLive){var Q=O.repeat,Z=e.util.invertTransform(V),ie=this[M+"Vpt"],Se=ie?e.util.matrixToSVG(Z):"";k.push('<rect transform="'+Se+" translate(",W/2,",",J/2,')"',' x="',O.offsetX-W/2,'" y="',O.offsetY-J/2,'" ','width="',Q==="repeat-y"||Q==="no-repeat"?O.source.width:W,'" height="',Q==="repeat-x"||Q==="no-repeat"?O.source.height:J,'" fill="url(#SVGID_'+O.id+')"',`></rect>
`)}else k.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',O,'"',`></rect>
`)},sendToBack:function(k){if(!k)return this;var M=this._activeObject,O,V,W;if(k===M&&k.type==="activeSelection")for(W=M._objects,O=W.length;O--;)V=W[O],g(this._objects,V),this._objects.unshift(V);else g(this._objects,k),this._objects.unshift(k);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(k){if(!k)return this;var M=this._activeObject,O,V,W;if(k===M&&k.type==="activeSelection")for(W=M._objects,O=0;O<W.length;O++)V=W[O],g(this._objects,V),this._objects.push(V);else g(this._objects,k),this._objects.push(k);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(k,M){if(!k)return this;var O=this._activeObject,V,W,J,Q,Z,ie=0;if(k===O&&k.type==="activeSelection")for(Z=O._objects,V=0;V<Z.length;V++)W=Z[V],J=this._objects.indexOf(W),J>0+ie&&(Q=J-1,g(this._objects,W),this._objects.splice(Q,0,W)),ie++;else J=this._objects.indexOf(k),J!==0&&(Q=this._findNewLowerIndex(k,J,M),g(this._objects,k),this._objects.splice(Q,0,k));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(k,M,O){var V,W;if(O)for(V=M,W=M-1;W>=0;--W){var J=k.intersectsWithObject(this._objects[W])||k.isContainedWithinObject(this._objects[W])||this._objects[W].isContainedWithinObject(k);if(J){V=W;break}}else V=M-1;return V},bringForward:function(k,M){if(!k)return this;var O=this._activeObject,V,W,J,Q,Z,ie=0;if(k===O&&k.type==="activeSelection")for(Z=O._objects,V=Z.length;V--;)W=Z[V],J=this._objects.indexOf(W),J<this._objects.length-1-ie&&(Q=J+1,g(this._objects,W),this._objects.splice(Q,0,W)),ie++;else J=this._objects.indexOf(k),J!==this._objects.length-1&&(Q=this._findNewUpperIndex(k,J,M),g(this._objects,k),this._objects.splice(Q,0,k));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(k,M,O){var V,W,J;if(O)for(V=M,W=M+1,J=this._objects.length;W<J;++W){var Q=k.intersectsWithObject(this._objects[W])||k.isContainedWithinObject(this._objects[W])||this._objects[W].isContainedWithinObject(k);if(Q){V=W;break}}else V=M+1;return V},moveTo:function(k,M){return g(this._objects,k),this._objects.splice(M,0,k),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(k){k.dispose&&k.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),o(e.StaticCanvas.prototype,e.Observable),o(e.StaticCanvas.prototype,e.Collection),o(e.StaticCanvas.prototype,e.DataURLExporter),o(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(k){var M=C();if(!M||!M.getContext)return null;var O=M.getContext("2d");if(!O)return null;switch(k){case"setLineDash":return typeof O.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var k=x(this.lowerCanvasEl);return k&&k.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(k){var M=x(this.lowerCanvasEl);return M&&M.createJPEGStream(k)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(o){o.strokeStyle=this.color,o.lineWidth=this.width,o.lineCap=this.strokeLineCap,o.miterLimit=this.strokeMiterLimit,o.lineJoin=this.strokeLineJoin,o.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(o){var c=this.canvas.viewportTransform;o.save(),o.transform(c[0],c[1],c[2],c[3],c[4],c[5])},_setShadow:function(){if(!!this.shadow){var o=this.canvas,c=this.shadow,g=o.contextTop,_=o.getZoom();o&&o._isRetinaScaling()&&(_*=e.devicePixelRatio),g.shadowColor=c.color,g.shadowBlur=c.blur*_,g.shadowOffsetX=c.offsetX*_,g.shadowOffsetY=c.offsetY*_}},needsFullRender:function(){var o=new e.Color(this.color);return o.getAlpha()<1||!!this.shadow},_resetShadow:function(){var o=this.canvas.contextTop;o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0},_isOutSideCanvas:function(o){return o.x<0||o.x>this.canvas.getWidth()||o.y<0||o.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(o){this.canvas=o,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(o,c,g){var _=c.midPointFrom(g);return o.quadraticCurveTo(c.x,c.y,_.x,_.y),_},onMouseDown:function(o,c){!this.canvas._isMainEvent(c.e)||(this.drawStraightLine=c.e[this.straightLineKey],this._prepareForDrawing(o),this._captureDrawingPath(o),this._render())},onMouseMove:function(o,c){if(!!this.canvas._isMainEvent(c.e)&&(this.drawStraightLine=c.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o))&&this._captureDrawingPath(o)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var g=this._points,_=g.length,v=this.canvas.contextTop;this._saveAndTransform(v),this.oldEnd&&(v.beginPath(),v.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(v,g[_-2],g[_-1],!0),v.stroke(),v.restore()}},onMouseUp:function(o){return this.canvas._isMainEvent(o.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(o){var c=new e.Point(o.x,o.y);this._reset(),this._addPoint(c),this.canvas.contextTop.moveTo(c.x,c.y)},_addPoint:function(o){return this._points.length>1&&o.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(o),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(o){var c=new e.Point(o.x,o.y);return this._addPoint(c)},_render:function(o){var c,g,_=this._points[0],v=this._points[1];if(o=o||this.canvas.contextTop,this._saveAndTransform(o),o.beginPath(),this._points.length===2&&_.x===v.x&&_.y===v.y){var w=this.width/1e3;_=new e.Point(_.x,_.y),v=new e.Point(v.x,v.y),_.x-=w,v.x+=w}for(o.moveTo(_.x,_.y),c=1,g=this._points.length;c<g;c++)this._drawSegment(o,_,v),_=this._points[c],v=this._points[c+1];o.lineTo(_.x,_.y),o.stroke(),o.restore()},convertPointsToSVGPath:function(o){var c=this.width/1e3;return e.util.getSmoothPathFromPoints(o,c)},_isEmptySVGPath:function(o){var c=e.util.joinPath(o);return c==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(o){var c=new e.Path(o,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,c.shadow=new e.Shadow(this.shadow)),c},decimatePoints:function(o,c){if(o.length<=2)return o;var g=this.canvas.getZoom(),_=Math.pow(c/g,2),v,w=o.length-1,x=o[0],C=[x],T;for(v=1;v<w-1;v++)T=Math.pow(x.x-o[v].x,2)+Math.pow(x.y-o[v].y,2),T>=_&&(x=o[v],C.push(x));return C.push(o[w]),C},_finalizeAndAddPath:function(){var o=this.canvas.contextTop;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var c=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(c)){this.canvas.requestRenderAll();return}var g=this.createPath(c);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.requestRenderAll(),g.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:g})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(o){this.canvas=o,this.points=[]},drawDot:function(o){var c=this.addPoint(o),g=this.canvas.contextTop;this._saveAndTransform(g),this.dot(g,c),g.restore()},dot:function(o,c){o.fillStyle=c.fill,o.beginPath(),o.arc(c.x,c.y,c.radius,0,Math.PI*2,!1),o.closePath(),o.fill()},onMouseDown:function(o){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(o)},_render:function(){var o=this.canvas.contextTop,c,g,_=this.points;for(this._saveAndTransform(o),c=0,g=_.length;c<g;c++)this.dot(o,_[c]);o.restore()},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(o),this._render()):this.drawDot(o))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove,c,g;this.canvas.renderOnAddRemove=!1;var _=[];for(c=0,g=this.points.length;c<g;c++){var v=this.points[c],w=new e.Circle({radius:v.radius,left:v.x,top:v.y,originX:"center",originY:"center",fill:v.fill});this.shadow&&(w.shadow=new e.Shadow(this.shadow)),_.push(w)}var x=new e.Group(_);x.canvas=this.canvas,this.canvas.fire("before:path:created",{path:x}),this.canvas.add(x),this.canvas.fire("path:created",{path:x}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},addPoint:function(o){var c=new e.Point(o.x,o.y),g=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,_=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return c.radius=g,c.fill=_,this.points.push(c),c}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(o){this.canvas=o,this.sprayChunks=[]},onMouseDown:function(o){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(o),this.render(this.sprayChunkPoints)},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.addSprayChunk(o),this.render(this.sprayChunkPoints))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],g=0,_=this.sprayChunks.length;g<_;g++)for(var v=this.sprayChunks[g],w=0,x=v.length;w<x;w++){var C=new e.Rect({width:v[w].width,height:v[w].width,left:v[w].x+1,top:v[w].y+1,originX:"center",originY:"center",fill:this.color});c.push(C)}this.optimizeOverlapping&&(c=this._getOptimizedRects(c));var T=new e.Group(c);this.shadow&&T.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:T}),this.canvas.add(T),this.canvas.fire("path:created",{path:T}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},_getOptimizedRects:function(o){var c={},g,_,v;for(_=0,v=o.length;_<v;_++)g=o[_].left+""+o[_].top,c[g]||(c[g]=o[_]);var w=[];for(g in c)w.push(c[g]);return w},render:function(o){var c=this.canvas.contextTop,g,_;for(c.fillStyle=this.color,this._saveAndTransform(c),g=0,_=o.length;g<_;g++){var v=o[g];typeof v.opacity<"u"&&(c.globalAlpha=v.opacity),c.fillRect(v.x,v.y,v.width,v.width)}c.restore()},_render:function(){var o=this.canvas.contextTop,c,g;for(o.fillStyle=this.color,this._saveAndTransform(o),c=0,g=this.sprayChunks.length;c<g;c++)this.render(this.sprayChunks[c]);o.restore()},addSprayChunk:function(o){this.sprayChunkPoints=[];var c,g,_,v=this.width/2,w;for(w=0;w<this.density;w++){c=e.util.getRandomInt(o.x-v,o.x+v),g=e.util.getRandomInt(o.y-v,o.y+v),this.dotWidthVariance?_=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):_=this.dotWidth;var x=new e.Point(c,g);x.width=_,this.randomOpacity&&(x.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(x)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var o=20,c=5,g=e.util.createCanvasElement(),_=g.getContext("2d");return g.width=g.height=o+c,_.fillStyle=this.color,_.beginPath(),_.arc(o/2,o/2,o/2,0,Math.PI*2,!1),_.closePath(),_.fill(),g},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(o){return o.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(o){this.callSuper("_setBrushStyles",o),o.strokeStyle=this.getPattern(o)},createPath:function(o){var c=this.callSuper("createPath",o),g=c._getLeftTopCoords().scalarAdd(c.strokeWidth/2);return c.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-g.x,offsetY:-g.y}),c}}),function(){var o=e.util.getPointer,c=e.util.degreesToRadians,g=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(v,w){w||(w={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(v,w),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var v=this.getActiveObjects(),w,x,C;if(v.length>0&&!this.preserveObjectStacking){x=[],C=[];for(var T=0,k=this._objects.length;T<k;T++)w=this._objects[T],v.indexOf(w)===-1?x.push(w):C.push(w);v.length>1&&(this._activeObject._objects=C),x.push.apply(x,C)}else x=this._objects;return x},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var v=this.contextContainer;return this.renderCanvas(v,this._chooseObjectsToRender()),this},renderTopLayer:function(v){v.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(v),this.contextTopDirty=!0),v.restore()},renderTop:function(){var v=this.contextTop;return this.clearContext(v),this.renderTopLayer(v),this.fire("after:render"),this},_normalizePointer:function(v,w){var x=v.calcTransformMatrix(),C=e.util.invertTransform(x),T=this.restorePointerVpt(w);return e.util.transformPoint(T,C)},isTargetTransparent:function(v,w,x){if(v.shouldCache()&&v._cacheCanvas&&v!==this._activeObject){var C=this._normalizePointer(v,{x:w,y:x}),T=Math.max(v.cacheTranslationX+C.x*v.zoomX,0),k=Math.max(v.cacheTranslationY+C.y*v.zoomY,0),W=e.util.isTransparent(v._cacheContext,Math.round(T),Math.round(k),this.targetFindTolerance);return W}var M=this.contextCache,O=v.selectionBackgroundColor,V=this.viewportTransform;v.selectionBackgroundColor="",this.clearContext(M),M.save(),M.transform(V[0],V[1],V[2],V[3],V[4],V[5]),v.render(M),M.restore(),v.selectionBackgroundColor=O;var W=e.util.isTransparent(M,w,x,this.targetFindTolerance);return W},_isSelectionKeyPressed:function(v){var w=!1;return Array.isArray(this.selectionKey)?w=!!this.selectionKey.find(function(x){return v[x]===!0}):w=v[this.selectionKey],w},_shouldClearSelection:function(v,w){var x=this.getActiveObjects(),C=this._activeObject;return!w||w&&C&&x.length>1&&x.indexOf(w)===-1&&C!==w&&!this._isSelectionKeyPressed(v)||w&&!w.evented||w&&!w.selectable&&C&&C!==w},_shouldCenterTransform:function(v,w,x){if(!!v){var C;return w==="scale"||w==="scaleX"||w==="scaleY"||w==="resizing"?C=this.centeredScaling||v.centeredScaling:w==="rotate"&&(C=this.centeredRotation||v.centeredRotation),C?!x:x}},_getOriginFromCorner:function(v,w){var x={x:v.originX,y:v.originY};return w==="ml"||w==="tl"||w==="bl"?x.x="right":(w==="mr"||w==="tr"||w==="br")&&(x.x="left"),w==="tl"||w==="mt"||w==="tr"?x.y="bottom":(w==="bl"||w==="mb"||w==="br")&&(x.y="top"),x},_getActionFromCorner:function(v,w,x,C){if(!w||!v)return"drag";var T=C.controls[w];return T.getActionName(x,T,C)},_setupCurrentTransform:function(v,w,x){if(!!w){var C=this.getPointer(v),T=w.__corner,k=w.controls[T],M=x&&T?k.getActionHandler(v,w,k):e.controlsUtils.dragHandler,O=this._getActionFromCorner(x,T,v,w),V=this._getOriginFromCorner(w,T),W=v[this.centeredKey],J={target:w,action:O,actionHandler:M,corner:T,scaleX:w.scaleX,scaleY:w.scaleY,skewX:w.skewX,skewY:w.skewY,offsetX:C.x-w.left,offsetY:C.y-w.top,originX:V.x,originY:V.y,ex:C.x,ey:C.y,lastX:C.x,lastY:C.y,theta:c(w.angle),width:w.width*w.scaleX,shiftKey:v.shiftKey,altKey:W,original:e.util.saveObjectTransform(w)};this._shouldCenterTransform(w,O,W)&&(J.originX="center",J.originY="center"),J.original.originX=V.x,J.original.originY=V.y,this._currentTransform=J,this._beforeTransform(v)}},setCursor:function(v){this.upperCanvasEl.style.cursor=v},_drawSelection:function(v){var w=this._groupSelector,x=new e.Point(w.ex,w.ey),C=e.util.transformPoint(x,this.viewportTransform),T=new e.Point(w.ex+w.left,w.ey+w.top),k=e.util.transformPoint(T,this.viewportTransform),M=Math.min(C.x,k.x),O=Math.min(C.y,k.y),V=Math.max(C.x,k.x),W=Math.max(C.y,k.y),J=this.selectionLineWidth/2;this.selectionColor&&(v.fillStyle=this.selectionColor,v.fillRect(M,O,V-M,W-O)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(v.lineWidth=this.selectionLineWidth,v.strokeStyle=this.selectionBorderColor,M+=J,O+=J,V-=J,W-=J,e.Object.prototype._setLineDash.call(this,v,this.selectionDashArray),v.strokeRect(M,O,V-M,W-O))},findTarget:function(v,w){if(!this.skipTargetFind){var x=!0,C=this.getPointer(v,x),T=this._activeObject,k=this.getActiveObjects(),M,O,V=g(v),W=k.length>1&&!w||k.length===1;if(this.targets=[],W&&T._findTargetCorner(C,V)||k.length>1&&!w&&T===this._searchPossibleTargets([T],C))return T;if(k.length===1&&T===this._searchPossibleTargets([T],C))if(this.preserveObjectStacking)M=T,O=this.targets,this.targets=[];else return T;var J=this._searchPossibleTargets(this._objects,C);return v[this.altSelectionKey]&&J&&M&&J!==M&&(J=M,this.targets=O),J}},_checkTarget:function(v,w,x){if(w&&w.visible&&w.evented&&w.containsPoint(v))if((this.perPixelTargetFind||w.perPixelTargetFind)&&!w.isEditing){var C=this.isTargetTransparent(w,x.x,x.y);if(!C)return!0}else return!0},_searchPossibleTargets:function(v,w){for(var x,C=v.length,T;C--;){var k=v[C],M=k.group?this._normalizePointer(k.group,w):w;if(this._checkTarget(M,k,w)){x=v[C],x.subTargetCheck&&x instanceof e.Group&&(T=this._searchPossibleTargets(x._objects,w),T&&this.targets.push(T));break}}return x},restorePointerVpt:function(v){return e.util.transformPoint(v,e.util.invertTransform(this.viewportTransform))},getPointer:function(v,w){if(this._absolutePointer&&!w)return this._absolutePointer;if(this._pointer&&w)return this._pointer;var x=o(v),C=this.upperCanvasEl,T=C.getBoundingClientRect(),k=T.width||0,M=T.height||0,O;(!k||!M)&&("top"in T&&"bottom"in T&&(M=Math.abs(T.top-T.bottom)),"right"in T&&"left"in T&&(k=Math.abs(T.right-T.left))),this.calcOffset(),x.x=x.x-this._offset.left,x.y=x.y-this._offset.top,w||(x=this.restorePointerVpt(x));var V=this.getRetinaScaling();return V!==1&&(x.x/=V,x.y/=V),k===0||M===0?O={width:1,height:1}:O={width:C.width/k,height:C.height/M},{x:x.x*O.width,y:x.y*O.height}},_createUpperCanvas:function(){var v=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),w=this.lowerCanvasEl,x=this.upperCanvasEl;x?x.className="":(x=this._createCanvasElement(),this.upperCanvasEl=x),e.util.addClass(x,"upper-canvas "+v),this.wrapperEl.appendChild(x),this._copyCanvasStyle(w,x),this._applyCanvasStyle(x),this.contextTop=x.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(v){var w=this.width||v.width,x=this.height||v.height;e.util.setStyle(v,{position:"absolute",width:w+"px",height:x+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),v.width=w,v.height=x,e.util.makeElementUnselectable(v)},_copyCanvasStyle:function(v,w){w.style.cssText=v.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var v=this._activeObject;return v?v.type==="activeSelection"&&v._objects?v._objects.slice(0):[v]:[]},_onObjectRemoved:function(v){v===this._activeObject&&(this.fire("before:selection:cleared",{target:v}),this._discardActiveObject(),this.fire("selection:cleared",{target:v}),v.fire("deselected")),v===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",v)},_fireSelectionEvents:function(v,w){var x=!1,C=this.getActiveObjects(),T=[],k=[];v.forEach(function(M){C.indexOf(M)===-1&&(x=!0,M.fire("deselected",{e:w,target:M}),k.push(M))}),C.forEach(function(M){v.indexOf(M)===-1&&(x=!0,M.fire("selected",{e:w,target:M}),T.push(M))}),v.length>0&&C.length>0?x&&this.fire("selection:updated",{e:w,selected:T,deselected:k}):C.length>0?this.fire("selection:created",{e:w,selected:T}):v.length>0&&this.fire("selection:cleared",{e:w,deselected:k})},setActiveObject:function(v,w){var x=this.getActiveObjects();return this._setActiveObject(v,w),this._fireSelectionEvents(x,w),this},_setActiveObject:function(v,w){return this._activeObject===v||!this._discardActiveObject(w,v)||v.onSelect({e:w})?!1:(this._activeObject=v,!0)},_discardActiveObject:function(v,w){var x=this._activeObject;if(x){if(x.onDeselect({e:v,object:w}))return!1;this._activeObject=null}return!0},discardActiveObject:function(v){var w=this.getActiveObjects(),x=this.getActiveObject();return w.length&&this.fire("before:selection:cleared",{target:x,e:v}),this._discardActiveObject(v),this._fireSelectionEvents(w,v),this},dispose:function(){var v=this.wrapperEl;return this.removeListeners(),v.removeChild(this.upperCanvasEl),v.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(w){e.util.cleanUpJsdomNode(this[w]),this[w]=void 0}.bind(this)),v.parentNode&&v.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(v){var w=this._activeObject;w&&w._renderControls(v)},_toObject:function(v,w,x){var C=this._realizeGroupTransformOnObject(v),T=this.callSuper("_toObject",v,w,x);return this._unwindGroupTransformOnObject(v,C),T},_realizeGroupTransformOnObject:function(v){if(v.group&&v.group.type==="activeSelection"&&this._activeObject===v.group){var w=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],x={};return w.forEach(function(C){x[C]=v[C]}),e.util.addTransformToObject(v,this._activeObject.calcOwnMatrix()),x}else return null},_unwindGroupTransformOnObject:function(v,w){w&&v.set(w)},_setSVGObject:function(v,w,x){var C=this._realizeGroupTransformOnObject(w);this.callSuper("_setSVGObject",v,w,x),this._unwindGroupTransformOnObject(w,C)},setViewportTransform:function(v){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,v)}});for(var _ in e.StaticCanvas)_!=="prototype"&&(e.Canvas[_]=e.StaticCanvas[_])}(),function(){var o=e.util.addListener,c=e.util.removeListener,g=3,_=2,v=1,w={passive:!1};function x(C,T){return C.button&&C.button===T-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(o,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(C,T){var k=this.upperCanvasEl,M=this._getEventPrefix();C(e.window,"resize",this._onResize),C(k,M+"down",this._onMouseDown),C(k,M+"move",this._onMouseMove,w),C(k,M+"out",this._onMouseOut),C(k,M+"enter",this._onMouseEnter),C(k,"wheel",this._onMouseWheel),C(k,"contextmenu",this._onContextMenu),C(k,"dblclick",this._onDoubleClick),C(k,"dragover",this._onDragOver),C(k,"dragenter",this._onDragEnter),C(k,"dragleave",this._onDragLeave),C(k,"drop",this._onDrop),this.enablePointerEvents||C(k,"touchstart",this._onTouchStart,w),typeof eventjs<"u"&&T in eventjs&&(eventjs[T](k,"gesture",this._onGesture),eventjs[T](k,"drag",this._onDrag),eventjs[T](k,"orientation",this._onOrientationChange),eventjs[T](k,"shake",this._onShake),eventjs[T](k,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var C=this._getEventPrefix();c(e.document,C+"up",this._onMouseUp),c(e.document,"touchend",this._onTouchEnd,w),c(e.document,C+"move",this._onMouseMove,w),c(e.document,"touchmove",this._onMouseMove,w)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(C,T){this.__onTransformGesture&&this.__onTransformGesture(C,T)},_onDrag:function(C,T){this.__onDrag&&this.__onDrag(C,T)},_onMouseWheel:function(C){this.__onMouseWheel(C)},_onMouseOut:function(C){var T=this._hoveredTarget;this.fire("mouse:out",{target:T,e:C}),this._hoveredTarget=null,T&&T.fire("mouseout",{e:C});var k=this;this._hoveredTargets.forEach(function(M){k.fire("mouse:out",{target:T,e:C}),M&&T.fire("mouseout",{e:C})}),this._hoveredTargets=[]},_onMouseEnter:function(C){!this._currentTransform&&!this.findTarget(C)&&(this.fire("mouse:over",{target:null,e:C}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(C,T){this.__onOrientationChange&&this.__onOrientationChange(C,T)},_onShake:function(C,T){this.__onShake&&this.__onShake(C,T)},_onLongPress:function(C,T){this.__onLongPress&&this.__onLongPress(C,T)},_onDragOver:function(C){C.preventDefault();var T=this._simpleEventHandler("dragover",C);this._fireEnterLeaveEvents(T,C)},_onDrop:function(C){return this._simpleEventHandler("drop:before",C),this._simpleEventHandler("drop",C)},_onContextMenu:function(C){return this.stopContextMenu&&(C.stopPropagation(),C.preventDefault()),!1},_onDoubleClick:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"dblclick"),this._resetTransformEventData(C)},getPointerId:function(C){var T=C.changedTouches;return T?T[0]&&T[0].identifier:this.enablePointerEvents?C.pointerId:-1},_isMainEvent:function(C){return C.isPrimary===!0?!0:C.isPrimary===!1?!1:C.type==="touchend"&&C.touches.length===0?!0:C.changedTouches?C.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(C){C.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(C)),this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,k=this._getEventPrefix();o(e.document,"touchend",this._onTouchEnd,w),o(e.document,"touchmove",this._onMouseMove,w),c(T,k+"down",this._onMouseDown)},_onMouseDown:function(C){this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,k=this._getEventPrefix();c(T,k+"move",this._onMouseMove,w),o(e.document,k+"up",this._onMouseUp),o(e.document,k+"move",this._onMouseMove,w)},_onTouchEnd:function(C){if(!(C.touches.length>0)){this.__onMouseUp(C),this._resetTransformEventData(),this.mainTouchId=null;var T=this._getEventPrefix();c(e.document,"touchend",this._onTouchEnd,w),c(e.document,"touchmove",this._onMouseMove,w);var k=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){o(k.upperCanvasEl,T+"down",k._onMouseDown),k._willAddMouseDown=0},400)}},_onMouseUp:function(C){this.__onMouseUp(C),this._resetTransformEventData();var T=this.upperCanvasEl,k=this._getEventPrefix();this._isMainEvent(C)&&(c(e.document,k+"up",this._onMouseUp),c(e.document,k+"move",this._onMouseMove,w),o(T,k+"move",this._onMouseMove,w))},_onMouseMove:function(C){!this.allowTouchScrolling&&C.preventDefault&&C.preventDefault(),this.__onMouseMove(C)},_onResize:function(){this.calcOffset()},_shouldRender:function(C){var T=this._activeObject;return!!T!=!!C||T&&C&&T!==C?!0:(T&&T.isEditing,!1)},__onMouseUp:function(C){var T,k=this._currentTransform,M=this._groupSelector,O=!1,V=!M||M.left===0&&M.top===0;if(this._cacheTransformEventData(C),T=this._target,this._handleEvent(C,"up:before"),x(C,g)){this.fireRightClick&&this._handleEvent(C,"up",g,V);return}if(x(C,_)){this.fireMiddleClick&&this._handleEvent(C,"up",_,V),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(C);return}if(!!this._isMainEvent(C)){if(k&&(this._finalizeCurrentTransform(C),O=k.actionPerformed),!V){var W=T===this._activeObject;this._maybeGroupObjects(C),O||(O=this._shouldRender(T)||!W&&T===this._activeObject)}var J,Q;if(T){if(J=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C)),T.selectable&&T!==this._activeObject&&T.activeOn==="up")this.setActiveObject(T,C),O=!0;else{var Z=T.controls[J],ie=Z&&Z.getMouseUpHandler(C,T,Z);ie&&(Q=this.getPointer(C),ie(C,k,Q.x,Q.y))}T.isMoving=!1}if(k&&(k.target!==T||k.corner!==J)){var Se=k.target&&k.target.controls[k.corner],xe=Se&&Se.getMouseUpHandler(C,T,Z);Q=Q||this.getPointer(C),xe&&xe(C,k,Q.x,Q.y)}this._setCursorFromEvent(C,T),this._handleEvent(C,"up",v,V),this._groupSelector=null,this._currentTransform=null,T&&(T.__corner=0),O?this.requestRenderAll():V||this.renderTop()}},_simpleEventHandler:function(C,T){var k=this.findTarget(T),M=this.targets,O={e:T,target:k,subTargets:M};if(this.fire(C,O),k&&k.fire(C,O),!M)return k;for(var V=0;V<M.length;V++)M[V].fire(C,O);return k},_handleEvent:function(C,T,k,M){var O=this._target,V=this.targets||[],W={e:C,target:O,subTargets:V,button:k||v,isClick:M||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};T==="up"&&(W.currentTarget=this.findTarget(C),W.currentSubTargets=this.targets),this.fire("mouse:"+T,W),O&&O.fire("mouse"+T,W);for(var J=0;J<V.length;J++)V[J].fire("mouse"+T,W)},_finalizeCurrentTransform:function(C){var T=this._currentTransform,k=T.target,M={e:C,target:k,transform:T,action:T.action};k._scaling&&(k._scaling=!1),k.setCoords(),(T.actionPerformed||this.stateful&&k.hasStateChanged())&&this._fire("modified",M)},_onMouseDownInDrawingMode:function(C){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(C).requestRenderAll();var T=this.getPointer(C);this.freeDrawingBrush.onMouseDown(T,{e:C,pointer:T}),this._handleEvent(C,"down")},_onMouseMoveInDrawingMode:function(C){if(this._isCurrentlyDrawing){var T=this.getPointer(C);this.freeDrawingBrush.onMouseMove(T,{e:C,pointer:T})}this.setCursor(this.freeDrawingCursor),this._handleEvent(C,"move")},_onMouseUpInDrawingMode:function(C){var T=this.getPointer(C);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:C,pointer:T}),this._handleEvent(C,"up")},__onMouseDown:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"down:before");var T=this._target;if(x(C,g)){this.fireRightClick&&this._handleEvent(C,"down",g);return}if(x(C,_)){this.fireMiddleClick&&this._handleEvent(C,"down",_);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(C);return}if(!!this._isMainEvent(C)&&!this._currentTransform){var k=this._pointer;this._previousPointer=k;var M=this._shouldRender(T),O=this._shouldGroup(C,T);if(this._shouldClearSelection(C,T)?this.discardActiveObject(C):O&&(this._handleGrouping(C,T),T=this._activeObject),this.selection&&(!T||!T.selectable&&!T.isEditing&&T!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),T){var V=T===this._activeObject;T.selectable&&T.activeOn==="down"&&this.setActiveObject(T,C);var W=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C));if(T.__corner=W,T===this._activeObject&&(W||!O)){this._setupCurrentTransform(C,T,V);var J=T.controls[W],k=this.getPointer(C),Q=J&&J.getMouseDownHandler(C,T,J);Q&&Q(C,this._currentTransform,k.x,k.y)}}this._handleEvent(C,"down"),(M||O)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(C){this._resetTransformEventData(),this._pointer=this.getPointer(C,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(C)||null},_beforeTransform:function(C){var T=this._currentTransform;this.stateful&&T.target.saveState(),this.fire("before:transform",{e:C,transform:T})},__onMouseMove:function(C){this._handleEvent(C,"move:before"),this._cacheTransformEventData(C);var T,k;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(C);return}if(!!this._isMainEvent(C)){var M=this._groupSelector;M?(k=this._absolutePointer,M.left=k.x-M.ex,M.top=k.y-M.ey,this.renderTop()):this._currentTransform?this._transformObject(C):(T=this.findTarget(C)||null,this._setCursorFromEvent(C,T),this._fireOverOutEvents(T,C)),this._handleEvent(C,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(C,T){var k=this._hoveredTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:k,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var W=0;W<V;W++)this.fireSyntheticInOutEvents(O[W],T,{oldTarget:M[W],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=C,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(C,T){var k=this._draggedoverTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:k,evtOut:"dragleave",evtIn:"dragenter"});for(var W=0;W<V;W++)this.fireSyntheticInOutEvents(O[W],T,{oldTarget:M[W],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=C},fireSyntheticInOutEvents:function(C,T,k){var M,O,V=k.oldTarget,W,J,Q=V!==C,Z=k.canvasEvtIn,ie=k.canvasEvtOut;Q&&(M={e:T,target:C,previousTarget:V},O={e:T,target:V,nextTarget:C}),J=C&&Q,W=V&&Q,W&&(ie&&this.fire(ie,O),V.fire(k.evtOut,O)),J&&(Z&&this.fire(Z,M),C.fire(k.evtIn,M))},__onMouseWheel:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"wheel"),this._resetTransformEventData()},_transformObject:function(C){var T=this.getPointer(C),k=this._currentTransform;k.reset=!1,k.shiftKey=C.shiftKey,k.altKey=C[this.centeredKey],this._performTransformAction(C,k,T),k.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(C,T,k){var M=k.x,O=k.y,V=T.action,W=!1,J=T.actionHandler;J&&(W=J(C,T,M,O)),V==="drag"&&W&&(T.target.isMoving=!0,this.setCursor(T.target.moveCursor||this.moveCursor)),T.actionPerformed=T.actionPerformed||W},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(C,T){if(!T)return this.setCursor(this.defaultCursor),!1;var k=T.hoverCursor||this.hoverCursor,M=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,O=(!M||!M.contains(T))&&T._findTargetCorner(this.getPointer(C,!0));O?this.setCursor(this.getCornerCursor(O,T,C)):(T.subTargetCheck&&this.targets.concat().reverse().map(function(V){k=V.hoverCursor||k}),this.setCursor(k))},getCornerCursor:function(C,T,k){var M=T.controls[C];return M.cursorStyleHandler(k,M,T)}})}(),function(){var o=Math.min,c=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(g,_){var v=this._activeObject;return v&&this._isSelectionKeyPressed(g)&&_&&_.selectable&&this.selection&&(v!==_||v.type==="activeSelection")&&!_.onSelect({e:g})},_handleGrouping:function(g,_){var v=this._activeObject;v.__corner||_===v&&(_=this.findTarget(g,!0),!_||!_.selectable)||(v&&v.type==="activeSelection"?this._updateActiveSelection(_,g):this._createActiveSelection(_,g))},_updateActiveSelection:function(g,_){var v=this._activeObject,w=v._objects.slice(0);v.contains(g)?(v.removeWithUpdate(g),this._hoveredTarget=g,this._hoveredTargets=this.targets.concat(),v.size()===1&&this._setActiveObject(v.item(0),_)):(v.addWithUpdate(g),this._hoveredTarget=v,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(w,_)},_createActiveSelection:function(g,_){var v=this.getActiveObjects(),w=this._createGroup(g);this._hoveredTarget=w,this._setActiveObject(w,_),this._fireSelectionEvents(v,_)},_createGroup:function(g){var _=this._objects,v=_.indexOf(this._activeObject)<_.indexOf(g),w=v?[this._activeObject,g]:[g,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(w,{canvas:this})},_groupSelectedObjects:function(g){var _=this._collectObjects(g),v;_.length===1?this.setActiveObject(_[0],g):_.length>1&&(v=new e.ActiveSelection(_.reverse(),{canvas:this}),this.setActiveObject(v,g))},_collectObjects:function(g){for(var _=[],v,w=this._groupSelector.ex,x=this._groupSelector.ey,C=w+this._groupSelector.left,T=x+this._groupSelector.top,k=new e.Point(o(w,C),o(x,T)),M=new e.Point(c(w,C),c(x,T)),O=!this.selectionFullyContained,V=w===C&&x===T,W=this._objects.length;W--&&(v=this._objects[W],!(!(!v||!v.selectable||!v.visible)&&(O&&v.intersectsWithRect(k,M,!0)||v.isContainedWithinRect(k,M,!0)||O&&v.containsPoint(k,null,!0)||O&&v.containsPoint(M,null,!0))&&(_.push(v),V))););return _.length>1&&(_=_.filter(function(J){return!J.onSelect({e:g})})),_},_maybeGroupObjects:function(g){this.selection&&this._groupSelector&&this._groupSelectedObjects(g),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(o){o||(o={});var c=o.format||"png",g=o.quality||1,_=(o.multiplier||1)*(o.enableRetinaScaling?this.getRetinaScaling():1),v=this.toCanvasElement(_,o);return e.util.toDataURL(v,c,g)},toCanvasElement:function(o,c){o=o||1,c=c||{};var g=(c.width||this.width)*o,_=(c.height||this.height)*o,v=this.getZoom(),w=this.width,x=this.height,C=v*o,T=this.viewportTransform,k=(T[4]-(c.left||0))*o,M=(T[5]-(c.top||0))*o,O=this.interactive,V=[C,0,0,C,k,M],W=this.enableRetinaScaling,J=e.util.createCanvasElement(),Q=this.contextTop;return J.width=g,J.height=_,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=V,this.width=g,this.height=_,this.calcViewportBoundaries(),this.renderCanvas(J.getContext("2d"),this._objects),this.viewportTransform=T,this.width=w,this.height=x,this.calcViewportBoundaries(),this.interactive=O,this.enableRetinaScaling=W,this.contextTop=Q,J}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(o,c,g){if(!!o){var _=typeof o=="string"?JSON.parse(o):e.util.object.clone(o),v=this,w=_.clipPath,x=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete _.clipPath,this._enlivenObjects(_.objects,function(C){v.clear(),v._setBgOverlay(_,function(){w?v._enlivenObjects([w],function(T){v.clipPath=T[0],v.__setupCanvas.call(v,_,C,x,c)}):v.__setupCanvas.call(v,_,C,x,c)})},g),this}},__setupCanvas:function(o,c,g,_){var v=this;c.forEach(function(w,x){v.insertAt(w,x)}),this.renderOnAddRemove=g,delete o.objects,delete o.backgroundImage,delete o.overlayImage,delete o.background,delete o.overlay,this._setOptions(o),this.renderAll(),_&&_()},_setBgOverlay:function(o,c){var g={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!o.backgroundImage&&!o.overlayImage&&!o.background&&!o.overlay){c&&c();return}var _=function(){g.backgroundImage&&g.overlayImage&&g.backgroundColor&&g.overlayColor&&c&&c()};this.__setBgOverlay("backgroundImage",o.backgroundImage,g,_),this.__setBgOverlay("overlayImage",o.overlayImage,g,_),this.__setBgOverlay("backgroundColor",o.background,g,_),this.__setBgOverlay("overlayColor",o.overlay,g,_)},__setBgOverlay:function(o,c,g,_){var v=this;if(!c){g[o]=!0,_&&_();return}o==="backgroundImage"||o==="overlayImage"?e.util.enlivenObjects([c],function(w){v[o]=w[0],g[o]=!0,_&&_()}):this["set"+e.util.string.capitalize(o,!0)](c,function(){g[o]=!0,_&&_()})},_enlivenObjects:function(o,c,g){if(!o||o.length===0){c&&c([]);return}e.util.enlivenObjects(o,function(_){c&&c(_)},null,g)},_toDataURL:function(o,c){this.clone(function(g){c(g.toDataURL(o))})},_toDataURLWithMultiplier:function(o,c,g){this.clone(function(_){g(_.toDataURLWithMultiplier(o,c))})},clone:function(o,c){var g=JSON.stringify(this.toJSON(c));this.cloneWithoutData(function(_){_.loadFromJSON(g,function(){o&&o(_)})})},cloneWithoutData:function(o){var c=e.util.createCanvasElement();c.width=this.width,c.height=this.height;var g=new e.Canvas(c);this.backgroundImage?(g.setBackgroundImage(this.backgroundImage.src,function(){g.renderAll(),o&&o(g)}),g.backgroundImageOpacity=this.backgroundImageOpacity,g.backgroundImageStretch=this.backgroundImageStretch):o&&o(g)}}),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.util.object.clone,v=c.util.toFixed,w=c.util.string.capitalize,x=c.util.degreesToRadians,C=!c.isLikelyNode,T=2;c.Object||(c.Object=c.util.createClass(c.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:C,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(k){k&&this.setOptions(k)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=c.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(k){var M=c.perfLimitSizeTotal,O=k.width,V=k.height,W=c.maxCacheSideLimit,J=c.minCacheSideLimit;if(O<=W&&V<=W&&O*V<=M)return O<J&&(k.width=J),V<J&&(k.height=J),k;var Q=O/V,Z=c.util.limitDimsByArea(Q,M),ie=c.util.capValue,Se=ie(J,Z.x,W),xe=ie(J,Z.y,W);return O>Se&&(k.zoomX/=O/Se,k.width=Se,k.capped=!0),V>xe&&(k.zoomY/=V/xe,k.height=xe,k.capped=!0),k},_getCacheCanvasDimensions:function(){var k=this.getTotalObjectScaling(),M=this._getTransformedDimensions(0,0),O=M.x*k.scaleX/this.scaleX,V=M.y*k.scaleY/this.scaleY;return{width:O+T,height:V+T,zoomX:k.scaleX,zoomY:k.scaleY,x:O,y:V}},_updateCacheCanvas:function(){var k=this.canvas;if(this.noScaleCache&&k&&k._currentTransform){var M=k._currentTransform.target,O=k._currentTransform.action;if(this===M&&O.slice&&O.slice(0,5)==="scale")return!1}var V=this._cacheCanvas,W=this._limitCacheSize(this._getCacheCanvasDimensions()),J=c.minCacheSideLimit,Q=W.width,Z=W.height,ie,Se,xe=W.zoomX,le=W.zoomY,Ee=Q!==this.cacheWidth||Z!==this.cacheHeight,me=this.zoomX!==xe||this.zoomY!==le,Ae=Ee||me,pt=0,rt=0,Pt=!1;if(Ee){var We=this._cacheCanvas.width,be=this._cacheCanvas.height,Le=Q>We||Z>be,Ue=(Q<We*.9||Z<be*.9)&&We>J&&be>J;Pt=Le||Ue,Le&&!W.capped&&(Q>J||Z>J)&&(pt=Q*.1,rt=Z*.1)}return this instanceof c.Text&&this.path&&(Ae=!0,Pt=!0,pt+=this.getHeightOfLine(0)*this.zoomX,rt+=this.getHeightOfLine(0)*this.zoomY),Ae?(Pt?(V.width=Math.ceil(Q+pt),V.height=Math.ceil(Z+rt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,V.width,V.height)),ie=W.x/2,Se=W.y/2,this.cacheTranslationX=Math.round(V.width/2-ie)+ie,this.cacheTranslationY=Math.round(V.height/2-Se)+Se,this.cacheWidth=Q,this.cacheHeight=Z,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(xe,le),this.zoomX=xe,this.zoomY=le,!0):!1},setOptions:function(k){this._setOptions(k),this._initGradient(k.fill,"fill"),this._initGradient(k.stroke,"stroke"),this._initPattern(k.fill,"fill"),this._initPattern(k.stroke,"stroke")},transform:function(k){var M=this.group&&!this.group._transformDone||this.group&&this.canvas&&k===this.canvas.contextTop,O=this.calcTransformMatrix(!M);k.transform(O[0],O[1],O[2],O[3],O[4],O[5])},toObject:function(k){var M=c.Object.NUM_FRACTION_DIGITS,O={type:this.type,version:c.version,originX:this.originX,originY:this.originY,left:v(this.left,M),top:v(this.top,M),width:v(this.width,M),height:v(this.height,M),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:v(this.strokeWidth,M),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:v(this.strokeMiterLimit,M),scaleX:v(this.scaleX,M),scaleY:v(this.scaleY,M),angle:v(this.angle,M),flipX:this.flipX,flipY:this.flipY,opacity:v(this.opacity,M),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:v(this.skewX,M),skewY:v(this.skewY,M)};return this.clipPath&&!this.clipPath.excludeFromExport&&(O.clipPath=this.clipPath.toObject(k),O.clipPath.inverted=this.clipPath.inverted,O.clipPath.absolutePositioned=this.clipPath.absolutePositioned),c.util.populateWithProperties(this,O,k),this.includeDefaultValues||(O=this._removeDefaultValues(O)),O},toDatalessObject:function(k){return this.toObject(k)},_removeDefaultValues:function(k){var M=c.util.getKlass(k.type).prototype,O=M.stateProperties;return O.forEach(function(V){V==="left"||V==="top"||(k[V]===M[V]&&delete k[V],Array.isArray(k[V])&&Array.isArray(M[V])&&k[V].length===0&&M[V].length===0&&delete k[V])}),k},toString:function(){return"#<fabric."+w(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var k=c.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(k.scaleX),scaleY:Math.abs(k.scaleY)}},getTotalObjectScaling:function(){var k=this.getObjectScaling(),M=k.scaleX,O=k.scaleY;if(this.canvas){var V=this.canvas.getZoom(),W=this.canvas.getRetinaScaling();M*=V*W,O*=V*W}return{scaleX:M,scaleY:O}},getObjectOpacity:function(){var k=this.opacity;return this.group&&(k*=this.group.getObjectOpacity()),k},_set:function(k,M){var O=k==="scaleX"||k==="scaleY",V=this[k]!==M,W=!1;return O&&(M=this._constrainScale(M)),k==="scaleX"&&M<0?(this.flipX=!this.flipX,M*=-1):k==="scaleY"&&M<0?(this.flipY=!this.flipY,M*=-1):k==="shadow"&&M&&!(M instanceof c.Shadow)?M=new c.Shadow(M):k==="dirty"&&this.group&&this.group.set("dirty",M),this[k]=M,V&&(W=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(k)>-1?(this.dirty=!0,W&&this.group.set("dirty",!0)):W&&this.stateProperties.indexOf(k)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:c.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(k){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(k.save(),this._setupCompositeOperation(k),this.drawSelectionBackground(k),this.transform(k),this._setOpacity(k),this._setShadow(k,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(k)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(k),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),k.restore())},renderCache:function(k){k=k||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,k.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(k,M){if(k.save(),M.inverted?k.globalCompositeOperation="destination-out":k.globalCompositeOperation="destination-in",M.absolutePositioned){var O=c.util.invertTransform(this.calcTransformMatrix());k.transform(O[0],O[1],O[2],O[3],O[4],O[5])}M.transform(k),k.scale(1/M.zoomX,1/M.zoomY),k.drawImage(M._cacheCanvas,-M.cacheTranslationX,-M.cacheTranslationY),k.restore()},drawObject:function(k,M){var O=this.fill,V=this.stroke;M?(this.fill="black",this.stroke="",this._setClippingProperties(k)):this._renderBackground(k),this._render(k),this._drawClipPath(k,this.clipPath),this.fill=O,this.stroke=V},_drawClipPath:function(k,M){!M||(M.canvas=this.canvas,M.shouldCache(),M._transformDone=!0,M.renderCache({forClipping:!0}),this.drawClipPathOnCache(k,M))},drawCacheOnCanvas:function(k){k.scale(1/this.zoomX,1/this.zoomY),k.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(k){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!k&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!k){var M=this.cacheWidth/this.zoomX,O=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-M/2,-O/2,M,O)}return!0}return!1},_renderBackground:function(k){if(!!this.backgroundColor){var M=this._getNonTransformedDimensions();k.fillStyle=this.backgroundColor,k.fillRect(-M.x/2,-M.y/2,M.x,M.y),this._removeShadow(k)}},_setOpacity:function(k){this.group&&!this.group._transformDone?k.globalAlpha=this.getObjectOpacity():k.globalAlpha*=this.opacity},_setStrokeStyles:function(k,M){var O=M.stroke;O&&(k.lineWidth=M.strokeWidth,k.lineCap=M.strokeLineCap,k.lineDashOffset=M.strokeDashOffset,k.lineJoin=M.strokeLineJoin,k.miterLimit=M.strokeMiterLimit,O.toLive?O.gradientUnits==="percentage"||O.gradientTransform||O.patternTransform?this._applyPatternForTransformedGradient(k,O):(k.strokeStyle=O.toLive(k,this),this._applyPatternGradientTransform(k,O)):k.strokeStyle=M.stroke)},_setFillStyles:function(k,M){var O=M.fill;O&&(O.toLive?(k.fillStyle=O.toLive(k,this),this._applyPatternGradientTransform(k,M.fill)):k.fillStyle=O)},_setClippingProperties:function(k){k.globalAlpha=1,k.strokeStyle="transparent",k.fillStyle="#000000"},_setLineDash:function(k,M){!M||M.length===0||(1&M.length&&M.push.apply(M,M),k.setLineDash(M))},_renderControls:function(k,M){var O=this.getViewportTransform(),V=this.calcTransformMatrix(),W,J,Q;M=M||{},J=typeof M.hasBorders<"u"?M.hasBorders:this.hasBorders,Q=typeof M.hasControls<"u"?M.hasControls:this.hasControls,V=c.util.multiplyTransformMatrices(O,V),W=c.util.qrDecompose(V),k.save(),k.translate(W.translateX,W.translateY),k.lineWidth=1*this.borderScaleFactor,this.group||(k.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(W.angle-=180),k.rotate(x(this.group?W.angle:this.angle)),M.forActiveSelection||this.group?J&&this.drawBordersInGroup(k,W,M):J&&this.drawBorders(k,M),Q&&this.drawControls(k,M),k.restore()},_setShadow:function(k){if(!!this.shadow){var M=this.shadow,O=this.canvas,V,W=O&&O.viewportTransform[0]||1,J=O&&O.viewportTransform[3]||1;M.nonScaling?V={scaleX:1,scaleY:1}:V=this.getObjectScaling(),O&&O._isRetinaScaling()&&(W*=c.devicePixelRatio,J*=c.devicePixelRatio),k.shadowColor=M.color,k.shadowBlur=M.blur*c.browserShadowBlurConstant*(W+J)*(V.scaleX+V.scaleY)/4,k.shadowOffsetX=M.offsetX*W*V.scaleX,k.shadowOffsetY=M.offsetY*J*V.scaleY}},_removeShadow:function(k){!this.shadow||(k.shadowColor="",k.shadowBlur=k.shadowOffsetX=k.shadowOffsetY=0)},_applyPatternGradientTransform:function(k,M){if(!M||!M.toLive)return{offsetX:0,offsetY:0};var O=M.gradientTransform||M.patternTransform,V=-this.width/2+M.offsetX||0,W=-this.height/2+M.offsetY||0;return M.gradientUnits==="percentage"?k.transform(this.width,0,0,this.height,V,W):k.transform(1,0,0,1,V,W),O&&k.transform(O[0],O[1],O[2],O[3],O[4],O[5]),{offsetX:V,offsetY:W}},_renderPaintInOrder:function(k){this.paintFirst==="stroke"?(this._renderStroke(k),this._renderFill(k)):(this._renderFill(k),this._renderStroke(k))},_render:function(){},_renderFill:function(k){!this.fill||(k.save(),this._setFillStyles(k,this),this.fillRule==="evenodd"?k.fill("evenodd"):k.fill(),k.restore())},_renderStroke:function(k){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(k),k.save(),this.strokeUniform&&this.group){var M=this.getObjectScaling();k.scale(1/M.scaleX,1/M.scaleY)}else this.strokeUniform&&k.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(k,this.strokeDashArray),this._setStrokeStyles(k,this),k.stroke(),k.restore()}},_applyPatternForTransformedGradient:function(k,M){var O=this._limitCacheSize(this._getCacheCanvasDimensions()),V=c.util.createCanvasElement(),W,J=this.canvas.getRetinaScaling(),Q=O.x/this.scaleX/J,Z=O.y/this.scaleY/J;V.width=Q,V.height=Z,W=V.getContext("2d"),W.beginPath(),W.moveTo(0,0),W.lineTo(Q,0),W.lineTo(Q,Z),W.lineTo(0,Z),W.closePath(),W.translate(Q/2,Z/2),W.scale(O.zoomX/this.scaleX/J,O.zoomY/this.scaleY/J),this._applyPatternGradientTransform(W,M),W.fillStyle=M.toLive(k),W.fill(),k.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),k.scale(J*this.scaleX/O.zoomX,J*this.scaleY/O.zoomY),k.strokeStyle=W.createPattern(V,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var k=c.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",k.scaleX),this.set("scaleY",k.scaleY),this.angle=k.angle,this.skewX=k.skewX,this.skewY=0}},_removeTransformMatrix:function(k){var M=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),M=c.util.transformPoint(M,this.transformMatrix)),this.transformMatrix=null,k&&(this.scaleX*=k.scaleX,this.scaleY*=k.scaleY,this.cropX=k.cropX,this.cropY=k.cropY,M.x+=k.offsetLeft,M.y+=k.offsetTop,this.width=k.width,this.height=k.height),this.setPositionByOrigin(M,"center","center")},clone:function(k,M){var O=this.toObject(M);this.constructor.fromObject?this.constructor.fromObject(O,k):c.Object._fromObject("Object",O,k)},cloneAsImage:function(k,M){var O=this.toCanvasElement(M);return k&&k(new c.Image(O)),this},toCanvasElement:function(k){k||(k={});var M=c.util,O=M.saveObjectTransform(this),V=this.group,W=this.shadow,J=Math.abs,Q=(k.multiplier||1)*(k.enableRetinaScaling?c.devicePixelRatio:1);delete this.group,k.withoutTransform&&M.resetObjectTransform(this),k.withoutShadow&&(this.shadow=null);var Z=c.util.createCanvasElement(),ie=this.getBoundingRect(!0,!0),Se=this.shadow,xe,le={x:0,y:0},Ee,me,Ae;Se&&(Ee=Se.blur,Se.nonScaling?xe={scaleX:1,scaleY:1}:xe=this.getObjectScaling(),le.x=2*Math.round(J(Se.offsetX)+Ee)*J(xe.scaleX),le.y=2*Math.round(J(Se.offsetY)+Ee)*J(xe.scaleY)),me=ie.width+le.x,Ae=ie.height+le.y,Z.width=Math.ceil(me),Z.height=Math.ceil(Ae);var pt=new c.StaticCanvas(Z,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});k.format==="jpeg"&&(pt.backgroundColor="#fff"),this.setPositionByOrigin(new c.Point(pt.width/2,pt.height/2),"center","center");var rt=this.canvas;pt.add(this);var Pt=pt.toCanvasElement(Q||1,k);return this.shadow=W,this.set("canvas",rt),V&&(this.group=V),this.set(O).setCoords(),pt._objects=[],pt.dispose(),pt=null,Pt},toDataURL:function(k){return k||(k={}),c.util.toDataURL(this.toCanvasElement(k),k.format||"png",k.quality||1)},isType:function(k){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===k},complexity:function(){return 1},toJSON:function(k){return this.toObject(k)},rotate:function(k){var M=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return M&&this._setOriginToCenter(),this.set("angle",k),M&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(k,M){M=M||this.canvas.getPointer(k);var O=new c.Point(M.x,M.y),V=this._getLeftTopCoords();return this.angle&&(O=c.util.rotatePoint(O,V,x(-this.angle))),{x:O.x-V.x,y:O.y-V.y}},_setupCompositeOperation:function(k){this.globalCompositeOperation&&(k.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){c.runningAnimations&&c.runningAnimations.cancelByTarget(this)}}),c.util.createAccessors&&c.util.createAccessors(c.Object),g(c.Object.prototype,c.Observable),c.Object.NUM_FRACTION_DIGITS=2,c.Object.ENLIVEN_PROPS=["clipPath"],c.Object._fromObject=function(k,M,O,V){var W=c[k];M=_(M,!0),c.util.enlivenPatterns([M.fill,M.stroke],function(J){typeof J[0]<"u"&&(M.fill=J[0]),typeof J[1]<"u"&&(M.stroke=J[1]),c.util.enlivenObjectEnlivables(M,M,function(){var Q=V?new W(M[V],M):new W(M);O&&O(Q)})})},c.Object.__uid=0)}(i),function(){var o=e.util.degreesToRadians,c={left:-.5,center:0,right:.5},g={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(_,v,w,x,C){var T=_.x,k=_.y,M,O,V;return typeof v=="string"?v=c[v]:v-=.5,typeof x=="string"?x=c[x]:x-=.5,M=x-v,typeof w=="string"?w=g[w]:w-=.5,typeof C=="string"?C=g[C]:C-=.5,O=C-w,(M||O)&&(V=this._getTransformedDimensions(),T=_.x+M*V.x,k=_.y+O*V.y),new e.Point(T,k)},translateToCenterPoint:function(_,v,w){var x=this.translateToGivenOrigin(_,v,w,"center","center");return this.angle?e.util.rotatePoint(x,_,o(this.angle)):x},translateToOriginPoint:function(_,v,w){var x=this.translateToGivenOrigin(_,"center","center",v,w);return this.angle?e.util.rotatePoint(x,_,o(this.angle)):x},getCenterPoint:function(){var _=new e.Point(this.left,this.top);return this.translateToCenterPoint(_,this.originX,this.originY)},getPointByOrigin:function(_,v){var w=this.getCenterPoint();return this.translateToOriginPoint(w,_,v)},toLocalPoint:function(_,v,w){var x=this.getCenterPoint(),C,T;return typeof v<"u"&&typeof w<"u"?C=this.translateToGivenOrigin(x,"center","center",v,w):C=new e.Point(this.left,this.top),T=new e.Point(_.x,_.y),this.angle&&(T=e.util.rotatePoint(T,x,-o(this.angle))),T.subtractEquals(C)},setPositionByOrigin:function(_,v,w){var x=this.translateToCenterPoint(_,v,w),C=this.translateToOriginPoint(x,this.originX,this.originY);this.set("left",C.x),this.set("top",C.y)},adjustPosition:function(_){var v=o(this.angle),w=this.getScaledWidth(),x=e.util.cos(v)*w,C=e.util.sin(v)*w,T,k;typeof this.originX=="string"?T=c[this.originX]:T=this.originX-.5,typeof _=="string"?k=c[_]:k=_-.5,this.left+=x*(k-T),this.top+=C*(k-T),this.setCoords(),this.originX=_},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var _=this.getCenterPoint();this.originX="center",this.originY="center",this.left=_.x,this.top=_.y},_resetOrigin:function(){var _=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=_.x,this.top=_.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function o(w){return[new e.Point(w.tl.x,w.tl.y),new e.Point(w.tr.x,w.tr.y),new e.Point(w.br.x,w.br.y),new e.Point(w.bl.x,w.bl.y)]}var c=e.util,g=c.degreesToRadians,_=c.multiplyTransformMatrices,v=c.transformPoint;c.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(w,x){return x?w?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),w?this.aCoords:this.lineCoords)},getCoords:function(w,x){return o(this._getCoords(w,x))},intersectsWithRect:function(w,x,C,T){var k=this.getCoords(C,T),M=e.Intersection.intersectPolygonRectangle(k,w,x);return M.status==="Intersection"},intersectsWithObject:function(w,x,C){var T=e.Intersection.intersectPolygonPolygon(this.getCoords(x,C),w.getCoords(x,C));return T.status==="Intersection"||w.isContainedWithinObject(this,x,C)||this.isContainedWithinObject(w,x,C)},isContainedWithinObject:function(w,x,C){for(var T=this.getCoords(x,C),k=x?w.aCoords:w.lineCoords,M=0,O=w._getImageLines(k);M<4;M++)if(!w.containsPoint(T[M],O))return!1;return!0},isContainedWithinRect:function(w,x,C,T){var k=this.getBoundingRect(C,T);return k.left>=w.x&&k.left+k.width<=x.x&&k.top>=w.y&&k.top+k.height<=x.y},containsPoint:function(w,M,C,T){var k=this._getCoords(C,T),M=M||this._getImageLines(k),O=this._findCrossPoints(w,M);return O!==0&&O%2===1},isOnScreen:function(w){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br,T=this.getCoords(!0,w);return T.some(function(k){return k.x<=C.x&&k.x>=x.x&&k.y<=C.y&&k.y>=x.y})||this.intersectsWithRect(x,C,!0,w)?!0:this._containsCenterOfCanvas(x,C,w)},_containsCenterOfCanvas:function(w,x,C){var T={x:(w.x+x.x)/2,y:(w.y+x.y)/2};return!!this.containsPoint(T,null,!0,C)},isPartiallyOnScreen:function(w){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br;if(this.intersectsWithRect(x,C,!0,w))return!0;var T=this.getCoords(!0,w).every(function(k){return(k.x>=C.x||k.x<=x.x)&&(k.y>=C.y||k.y<=x.y)});return T&&this._containsCenterOfCanvas(x,C,w)},_getImageLines:function(w){var x={topline:{o:w.tl,d:w.tr},rightline:{o:w.tr,d:w.br},bottomline:{o:w.br,d:w.bl},leftline:{o:w.bl,d:w.tl}};return x},_findCrossPoints:function(w,x){var C,T,k,M,O,V=0,W;for(var J in x)if(W=x[J],!(W.o.y<w.y&&W.d.y<w.y)&&!(W.o.y>=w.y&&W.d.y>=w.y)&&(W.o.x===W.d.x&&W.o.x>=w.x?O=W.o.x:(C=0,T=(W.d.y-W.o.y)/(W.d.x-W.o.x),k=w.y-C*w.x,M=W.o.y-T*W.o.x,O=-(k-M)/(C-T)),O>=w.x&&(V+=1),V===2))break;return V},getBoundingRect:function(w,x){var C=this.getCoords(w,x);return c.makeBoundingBoxFromPoints(C)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(w){return Math.abs(w)<this.minScaleLimit?w<0?-this.minScaleLimit:this.minScaleLimit:w===0?1e-4:w},scale:function(w){return this._set("scaleX",w),this._set("scaleY",w),this.setCoords()},scaleToWidth:function(w,x){var C=this.getBoundingRect(x).width/this.getScaledWidth();return this.scale(w/this.width/C)},scaleToHeight:function(w,x){var C=this.getBoundingRect(x).height/this.getScaledHeight();return this.scale(w/this.height/C)},calcLineCoords:function(){var w=this.getViewportTransform(),x=this.padding,C=g(this.angle),T=c.cos(C),k=c.sin(C),M=T*x,O=k*x,V=M+O,W=M-O,J=this.calcACoords(),Q={tl:v(J.tl,w),tr:v(J.tr,w),bl:v(J.bl,w),br:v(J.br,w)};return x&&(Q.tl.x-=W,Q.tl.y-=V,Q.tr.x+=V,Q.tr.y-=W,Q.bl.x-=V,Q.bl.y+=W,Q.br.x+=W,Q.br.y+=V),Q},calcOCoords:function(){var w=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),C=this.getViewportTransform(),T=_(C,x),k=_(T,w),k=_(k,[1/C[0],0,0,1/C[3],0,0]),M=this._calculateCurrentDimensions(),O={};return this.forEachControl(function(V,W,J){O[W]=V.positionHandler(M,k,J)}),O},calcACoords:function(){var w=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),C=_(x,w),T=this._getTransformedDimensions(),k=T.x/2,M=T.y/2;return{tl:v({x:-k,y:-M},C),tr:v({x:k,y:-M},C),bl:v({x:-k,y:M},C),br:v({x:k,y:M},C)}},setCoords:function(w){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),w?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return c.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var w=this.getCenterPoint();return[1,0,0,1,w.x,w.y]},transformMatrixKey:function(w){var x="_",C="";return!w&&this.group&&(C=this.group.transformMatrixKey(w)+x),C+this.top+x+this.left+x+this.scaleX+x+this.scaleY+x+this.skewX+x+this.skewY+x+this.angle+x+this.originX+x+this.originY+x+this.width+x+this.height+x+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(w){var x=this.calcOwnMatrix();if(w||!this.group)return x;var C=this.transformMatrixKey(w),T=this.matrixCache||(this.matrixCache={});return T.key===C?T.value:(this.group&&(x=_(this.group.calcTransformMatrix(!1),x)),T.key=C,T.value=x,x)},calcOwnMatrix:function(){var w=this.transformMatrixKey(!0),x=this.ownMatrixCache||(this.ownMatrixCache={});if(x.key===w)return x.value;var C=this._calcTranslateMatrix(),T={angle:this.angle,translateX:C[4],translateY:C[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return x.key=w,x.value=c.composeMatrix(T),x.value},_getNonTransformedDimensions:function(){var w=this.strokeWidth,x=this.width+w,C=this.height+w;return{x,y:C}},_getTransformedDimensions:function(w,x){typeof w>"u"&&(w=this.skewX),typeof x>"u"&&(x=this.skewY);var C,T,k,M=w===0&&x===0;if(this.strokeUniform?(T=this.width,k=this.height):(C=this._getNonTransformedDimensions(),T=C.x,k=C.y),M)return this._finalizeDimensions(T*this.scaleX,k*this.scaleY);var O=c.sizeAfterTransform(T,k,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:w,skewY:x});return this._finalizeDimensions(O.x,O.y)},_finalizeDimensions:function(w,x){return this.strokeUniform?{x:w+this.strokeWidth,y:x+this.strokeWidth}:{x:w,y:x}},_calculateCurrentDimensions:function(){var w=this.getViewportTransform(),x=this._getTransformedDimensions(),C=v(x,w,!0);return C.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(o){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,o):this.canvas&&this.canvas.sendBackwards(this,o),this},bringForward:function(o){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,o):this.canvas&&this.canvas.bringForward(this,o),this},moveTo:function(o){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,o):this.canvas&&this.canvas.moveTo(this,o),this}}),function(){function o(g,_){if(_){if(_.toLive)return g+": url(#SVGID_"+_.id+"); ";var v=new e.Color(_),w=g+": "+v.toRgb()+"; ",x=v.getAlpha();return x!==1&&(w+=g+"-opacity: "+x.toString()+"; "),w}else return g+": none; "}var c=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(g){var _=this.fillRule?this.fillRule:"nonzero",v=this.strokeWidth?this.strokeWidth:"0",w=this.strokeDashArray?this.strokeDashArray.join(" "):"none",x=this.strokeDashOffset?this.strokeDashOffset:"0",C=this.strokeLineCap?this.strokeLineCap:"butt",T=this.strokeLineJoin?this.strokeLineJoin:"miter",k=this.strokeMiterLimit?this.strokeMiterLimit:"4",M=typeof this.opacity<"u"?this.opacity:"1",O=this.visible?"":" visibility: hidden;",V=g?"":this.getSvgFilter(),W=o("fill",this.fill),J=o("stroke",this.stroke);return[J,"stroke-width: ",v,"; ","stroke-dasharray: ",w,"; ","stroke-linecap: ",C,"; ","stroke-dashoffset: ",x,"; ","stroke-linejoin: ",T,"; ","stroke-miterlimit: ",k,"; ",W,"fill-rule: ",_,"; ","opacity: ",M,";",V,O].join("")},getSvgSpanStyles:function(g,_){var v="; ",x=g.fontFamily?"font-family: "+(g.fontFamily.indexOf("'")===-1&&g.fontFamily.indexOf('"')===-1?"'"+g.fontFamily+"'":g.fontFamily)+v:"",w=g.strokeWidth?"stroke-width: "+g.strokeWidth+v:"",x=x,C=g.fontSize?"font-size: "+g.fontSize+"px"+v:"",T=g.fontStyle?"font-style: "+g.fontStyle+v:"",k=g.fontWeight?"font-weight: "+g.fontWeight+v:"",M=g.fill?o("fill",g.fill):"",O=g.stroke?o("stroke",g.stroke):"",V=this.getSvgTextDecoration(g),W=g.deltaY?"baseline-shift: "+-g.deltaY+"; ":"";return V&&(V="text-decoration: "+V+v),[O,w,x,C,T,k,V,M,W,_?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(g){return["overline","underline","line-through"].filter(function(_){return g[_.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(g,_){var v=g?this.calcTransformMatrix():this.calcOwnMatrix(),w='transform="'+e.util.matrixToSVG(v);return w+(_||"")+'" '},_setSVGBg:function(g){if(this.backgroundColor){var _=e.Object.NUM_FRACTION_DIGITS;g.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',c(-this.width/2,_),'" y="',c(-this.height/2,_),'" width="',c(this.width,_),'" height="',c(this.height,_),`"></rect>
`)}},toSVG:function(g){return this._createBaseSVGMarkup(this._toSVG(g),{reviver:g})},toClipPathSVG:function(g){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(g),{reviver:g})},_createBaseClipPathSVGMarkup:function(g,_){_=_||{};var v=_.reviver,w=_.additionalTransform||"",x=[this.getSvgTransform(!0,w),this.getSvgCommons()].join(""),C=g.indexOf("COMMON_PARTS");return g[C]=x,v?v(g.join("")):g.join("")},_createBaseSVGMarkup:function(g,_){_=_||{};var v=_.noStyle,w=_.reviver,x=v?"":'style="'+this.getSvgStyles()+'" ',C=_.withShadow?'style="'+this.getSvgFilter()+'" ':"",T=this.clipPath,k=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",M=T&&T.absolutePositioned,O=this.stroke,V=this.fill,W=this.shadow,J,Q=[],Z,ie=g.indexOf("COMMON_PARTS"),Se=_.additionalTransform;return T&&(T.clipPathId="CLIPPATH_"+e.Object.__uid++,Z='<clipPath id="'+T.clipPathId+`" >
`+T.toClipPathSVG(w)+`</clipPath>
`),M&&Q.push("<g ",C,this.getSvgCommons(),` >
`),Q.push("<g ",this.getSvgTransform(!1),M?"":C+this.getSvgCommons(),` >
`),J=[x,k,v?"":this.addPaintOrder()," ",Se?'transform="'+Se+'" ':""].join(""),g[ie]=J,V&&V.toLive&&Q.push(V.toSVG(this)),O&&O.toLive&&Q.push(O.toSVG(this)),W&&Q.push(W.toSVG(this)),T&&Q.push(Z),Q.push(g.join("")),Q.push(`</g>
`),M&&Q.push(`</g>
`),w?w(Q.join("")):Q.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var o=e.util.object.extend,c="stateProperties";function g(v,w,x){var C={},T=!0;x.forEach(function(k){C[k]=v[k]}),o(v[w],C,T)}function _(v,w,x){if(v===w)return!0;if(Array.isArray(v)){if(!Array.isArray(w)||v.length!==w.length)return!1;for(var C=0,T=v.length;C<T;C++)if(!_(v[C],w[C]))return!1;return!0}else if(v&&typeof v=="object"){var k=Object.keys(v),M;if(!w||typeof w!="object"||!x&&k.length!==Object.keys(w).length)return!1;for(var C=0,T=k.length;C<T;C++)if(M=k[C],!(M==="canvas"||M==="group")&&!_(v[M],w[M]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(v){v=v||c;var w="_"+v;return Object.keys(this[w]).length<this[v].length?!0:!_(this[w],this,!0)},saveState:function(v){var w=v&&v.propertySet||c,x="_"+w;return this[x]?(g(this,x,this[w]),v&&v.stateProperties&&g(this,x,v.stateProperties),this):this.setupState(v)},setupState:function(v){v=v||{};var w=v.propertySet||c;return v.propertySet=w,this["_"+w]={},this.saveState(v),this}})}(),function(){var o=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(c,g){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var _=c.x,v=c.y,w,x,C=Object.keys(this.oCoords),T=C.length-1,k;for(this.__corner=0;T>=0;T--)if(k=C[T],!!this.isControlVisible(k)&&(x=this._getImageLines(g?this.oCoords[k].touchCorner:this.oCoords[k].corner),w=this._findCrossPoints({x:_,y:v},x),w!==0&&w%2===1))return this.__corner=k,k;return!1},forEachControl:function(c){for(var g in this.controls)c(this.controls[g],g,this)},_setCornerCoords:function(){var c=this.oCoords;for(var g in c){var _=this.controls[g];c[g].corner=_.calcCornerCoords(this.angle,this.cornerSize,c[g].x,c[g].y,!1),c[g].touchCorner=_.calcCornerCoords(this.angle,this.touchCornerSize,c[g].x,c[g].y,!0)}},drawSelectionBackground:function(c){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;c.save();var g=this.getCenterPoint(),_=this._calculateCurrentDimensions(),v=this.canvas.viewportTransform;return c.translate(g.x,g.y),c.scale(1/v[0],1/v[3]),c.rotate(o(this.angle)),c.fillStyle=this.selectionBackgroundColor,c.fillRect(-_.x/2,-_.y/2,_.x,_.y),c.restore(),this},drawBorders:function(c,g){g=g||{};var _=this._calculateCurrentDimensions(),v=this.borderScaleFactor,w=_.x+v,x=_.y+v,C=typeof g.hasControls<"u"?g.hasControls:this.hasControls,T=!1;return c.save(),c.strokeStyle=g.borderColor||this.borderColor,this._setLineDash(c,g.borderDashArray||this.borderDashArray),c.strokeRect(-w/2,-x/2,w,x),C&&(c.beginPath(),this.forEachControl(function(k,M,O){k.withConnection&&k.getVisibility(O,M)&&(T=!0,c.moveTo(k.x*w,k.y*x),c.lineTo(k.x*w+k.offsetX,k.y*x+k.offsetY))}),T&&c.stroke()),c.restore(),this},drawBordersInGroup:function(c,g,_){_=_||{};var v=e.util.sizeAfterTransform(this.width,this.height,g),w=this.strokeWidth,x=this.strokeUniform,C=this.borderScaleFactor,T=v.x+w*(x?this.canvas.getZoom():g.scaleX)+C,k=v.y+w*(x?this.canvas.getZoom():g.scaleY)+C;return c.save(),this._setLineDash(c,_.borderDashArray||this.borderDashArray),c.strokeStyle=_.borderColor||this.borderColor,c.strokeRect(-T/2,-k/2,T,k),c.restore(),this},drawControls:function(c,g){g=g||{},c.save();var _=this.canvas.getRetinaScaling(),v,w;return c.setTransform(_,0,0,_,0,0),c.strokeStyle=c.fillStyle=g.cornerColor||this.cornerColor,this.transparentCorners||(c.strokeStyle=g.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(c,g.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(v=this.group.calcTransformMatrix()),this.forEachControl(function(x,C,T){w=T.oCoords[C],x.getVisibility(T,C)&&(v&&(w=e.util.transformPoint(w,v)),x.render(c,w.x,w.y,g,T))}),c.restore(),this},isControlVisible:function(c){return this.controls[c]&&this.controls[c].getVisibility(this,c)},setControlVisible:function(c,g){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[c]=g,this},setControlsVisibility:function(c){c||(c={});for(var g in c)this.setControlVisible(g,c[g]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(o,c){c=c||{};var g=function(){},_=c.onComplete||g,v=c.onChange||g,w=this;return e.util.animate({target:this,startValue:o.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(x){o.set("left",x),w.requestRenderAll(),v()},onComplete:function(){o.setCoords(),_()}})},fxCenterObjectV:function(o,c){c=c||{};var g=function(){},_=c.onComplete||g,v=c.onChange||g,w=this;return e.util.animate({target:this,startValue:o.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(x){o.set("top",x),w.requestRenderAll(),v()},onComplete:function(){o.setCoords(),_()}})},fxRemove:function(o,c){c=c||{};var g=function(){},_=c.onComplete||g,v=c.onChange||g,w=this;return e.util.animate({target:this,startValue:o.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(x){o.set("opacity",x),w.requestRenderAll(),v()},onComplete:function(){w.remove(o),_()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var o=[],c,g,_=[];for(c in arguments[0])o.push(c);for(var v=0,w=o.length;v<w;v++)c=o[v],g=v!==w-1,_.push(this._animate(c,arguments[0][c],arguments[1],g));return _}else return this._animate.apply(this,arguments)},_animate:function(o,c,g,_){var v=this,w;c=c.toString(),g?g=e.util.object.clone(g):g={},~o.indexOf(".")&&(w=o.split("."));var x=v.colorProperties.indexOf(o)>-1||w&&v.colorProperties.indexOf(w[1])>-1,C=w?this.get(w[0])[w[1]]:this.get(o);"from"in g||(g.from=C),x||(~c.indexOf("=")?c=C+parseFloat(c.replace("=","")):c=parseFloat(c));var T={target:this,startValue:g.from,endValue:c,byValue:g.by,easing:g.easing,duration:g.duration,abort:g.abort&&function(k,M,O){return g.abort.call(v,k,M,O)},onChange:function(k,M,O){w?v[w[0]][w[1]]=k:v.set(o,k),!_&&g.onChange&&g.onChange(k,M,O)},onComplete:function(k,M,O){_||(v.setCoords(),g.onComplete&&g.onComplete(k,M,O))}};return x?e.util.animateColor(T.startValue,T.endValue,T.duration,T):e.util.animate(T)}}),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.util.object.clone,v={x1:1,x2:1,y1:1,y2:1};if(c.Line){c.warn("fabric.Line is already defined");return}c.Line=c.util.createClass(c.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:c.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(x,C){x||(x=[0,0,0,0]),this.callSuper("initialize",C),this.set("x1",x[0]),this.set("y1",x[1]),this.set("x2",x[2]),this.set("y2",x[3]),this._setWidthHeight(C)},_setWidthHeight:function(x){x||(x={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in x?x.left:this._getLeftToOriginX(),this.top="top"in x?x.top:this._getTopToOriginY()},_set:function(x,C){return this.callSuper("_set",x,C),typeof v[x]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:w({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:w({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(x){x.beginPath();var C=this.calcLinePoints();x.moveTo(C.x1,C.y1),x.lineTo(C.x2,C.y2),x.lineWidth=this.strokeWidth;var T=x.strokeStyle;x.strokeStyle=this.stroke||x.fillStyle,this.stroke&&this._renderStroke(x),x.strokeStyle=T},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(x){return g(this.callSuper("toObject",x),this.calcLinePoints())},_getNonTransformedDimensions:function(){var x=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(x.y-=this.strokeWidth),this.height===0&&(x.x-=this.strokeWidth)),x},calcLinePoints:function(){var x=this.x1<=this.x2?-1:1,C=this.y1<=this.y2?-1:1,T=x*this.width*.5,k=C*this.height*.5,M=x*this.width*-.5,O=C*this.height*-.5;return{x1:T,x2:M,y1:k,y2:O}},_toSVG:function(){var x=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',x.x1,'" y1="',x.y1,'" x2="',x.x2,'" y2="',x.y2,`" />
`]}}),c.Line.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),c.Line.fromElement=function(x,C,T){T=T||{};var k=c.parseAttributes(x,c.Line.ATTRIBUTE_NAMES),M=[k.x1||0,k.y1||0,k.x2||0,k.y2||0];C(new c.Line(M,g(k,T)))},c.Line.fromObject=function(x,C){function T(M){delete M.points,C&&C(M)}var k=_(x,!0);k.points=[x.x1,x.y1,x.x2,x.y2],c.Object._fromObject("Line",k,T,"points")};function w(x,C){var T=x.origin,k=x.axis1,M=x.axis2,O=x.dimension,V=C.nearest,W=C.center,J=C.farthest;return function(){switch(this.get(T)){case V:return Math.min(this.get(k),this.get(M));case W:return Math.min(this.get(k),this.get(M))+.5*this.get(O);case J:return Math.max(this.get(k),this.get(M))}}}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.degreesToRadians;if(c.Circle){c.warn("fabric.Circle is already defined.");return}c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:c.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(v,w){return this.callSuper("_set",v,w),v==="radius"&&this.setRadius(w),this},toObject:function(v){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(v))},_toSVG:function(){var v,w=0,x=0,C=(this.endAngle-this.startAngle)%360;if(C===0)v=["<circle ","COMMON_PARTS",'cx="'+w+'" cy="'+x+'" ','r="',this.radius,`" />
`];else{var T=g(this.startAngle),k=g(this.endAngle),M=this.radius,O=c.util.cos(T)*M,V=c.util.sin(T)*M,W=c.util.cos(k)*M,J=c.util.sin(k)*M,Q=C>180?"1":"0";v=['<path d="M '+O+" "+V," A "+M+" "+M," 0 ",+Q+" 1"," "+W+" "+J,'" ',"COMMON_PARTS",` />
`]}return v},_render:function(v){v.beginPath(),v.arc(0,0,this.radius,g(this.startAngle),g(this.endAngle),!1),this._renderPaintInOrder(v)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(v){return this.radius=v,this.set("width",v*2).set("height",v*2)}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),c.Circle.fromElement=function(v,w){var x=c.parseAttributes(v,c.Circle.ATTRIBUTE_NAMES);if(!_(x))throw new Error("value of `r` attribute is required and can not be negative");x.left=(x.left||0)-x.radius,x.top=(x.top||0)-x.radius,w(new c.Circle(x))};function _(v){return"radius"in v&&v.radius>=0}c.Circle.fromObject=function(v,w){c.Object._fromObject("Circle",v,w)}}(i),function(o){var c=o.fabric||(o.fabric={});if(c.Triangle){c.warn("fabric.Triangle is already defined");return}c.Triangle=c.util.createClass(c.Object,{type:"triangle",width:100,height:100,_render:function(g){var _=this.width/2,v=this.height/2;g.beginPath(),g.moveTo(-_,v),g.lineTo(0,-v),g.lineTo(_,v),g.closePath(),this._renderPaintInOrder(g)},_toSVG:function(){var g=this.width/2,_=this.height/2,v=[-g+" "+_,"0 "+-_,g+" "+_].join(",");return["<polygon ","COMMON_PARTS",'points="',v,'" />']}}),c.Triangle.fromObject=function(g,_){return c.Object._fromObject("Triangle",g,_)}}(i),function(o){var c=o.fabric||(o.fabric={}),g=Math.PI*2;if(c.Ellipse){c.warn("fabric.Ellipse is already defined.");return}c.Ellipse=c.util.createClass(c.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(_){this.callSuper("initialize",_),this.set("rx",_&&_.rx||0),this.set("ry",_&&_.ry||0)},_set:function(_,v){switch(this.callSuper("_set",_,v),_){case"rx":this.rx=v,this.set("width",v*2);break;case"ry":this.ry=v,this.set("height",v*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(_){return this.callSuper("toObject",["rx","ry"].concat(_))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(_){_.beginPath(),_.save(),_.transform(1,0,0,this.ry/this.rx,0,0),_.arc(0,0,this.rx,0,g,!1),_.restore(),this._renderPaintInOrder(_)}}),c.Ellipse.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),c.Ellipse.fromElement=function(_,v){var w=c.parseAttributes(_,c.Ellipse.ATTRIBUTE_NAMES);w.left=(w.left||0)-w.rx,w.top=(w.top||0)-w.ry,v(new c.Ellipse(w))},c.Ellipse.fromObject=function(_,v){c.Object._fromObject("Ellipse",_,v)}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend;if(c.Rect){c.warn("fabric.Rect is already defined");return}c.Rect=c.util.createClass(c.Object,{stateProperties:c.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(_){this.callSuper("initialize",_),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(_){var v=this.rx?Math.min(this.rx,this.width/2):0,w=this.ry?Math.min(this.ry,this.height/2):0,x=this.width,C=this.height,T=-this.width/2,k=-this.height/2,M=v!==0||w!==0,O=1-.5522847498;_.beginPath(),_.moveTo(T+v,k),_.lineTo(T+x-v,k),M&&_.bezierCurveTo(T+x-O*v,k,T+x,k+O*w,T+x,k+w),_.lineTo(T+x,k+C-w),M&&_.bezierCurveTo(T+x,k+C-O*w,T+x-O*v,k+C,T+x-v,k+C),_.lineTo(T+v,k+C),M&&_.bezierCurveTo(T+O*v,k+C,T,k+C-O*w,T,k+C-w),_.lineTo(T,k+w),M&&_.bezierCurveTo(T,k+O*w,T+O*v,k,T+v,k),_.closePath(),this._renderPaintInOrder(_)},toObject:function(_){return this.callSuper("toObject",["rx","ry"].concat(_))},_toSVG:function(){var _=-this.width/2,v=-this.height/2;return["<rect ","COMMON_PARTS",'x="',_,'" y="',v,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),c.Rect.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),c.Rect.fromElement=function(_,v,w){if(!_)return v(null);w=w||{};var x=c.parseAttributes(_,c.Rect.ATTRIBUTE_NAMES);x.left=x.left||0,x.top=x.top||0,x.height=x.height||0,x.width=x.width||0;var C=new c.Rect(g(w?c.util.object.clone(w):{},x));C.visible=C.visible&&C.width>0&&C.height>0,v(C)},c.Rect.fromObject=function(_,v){return c.Object._fromObject("Rect",_,v)}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.util.array.min,v=c.util.array.max,w=c.util.toFixed,x=c.util.projectStrokeOnPoints;if(c.Polyline){c.warn("fabric.Polyline is already defined");return}c.Polyline=c.util.createClass(c.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:c.Object.prototype.cacheProperties.concat("points"),initialize:function(C,T){T=T||{},this.points=C||[],this.callSuper("initialize",T),this._setPositionDimensions(T)},_projectStrokeOnPoints:function(){return x(this.points,this,!0)},_setPositionDimensions:function(C){var T=this._calcDimensions(C),k,M=this.exactBoundingBox?this.strokeWidth:0;this.width=T.width-M,this.height=T.height-M,C.fromSVG||(k=this.translateToGivenOrigin({x:T.left-this.strokeWidth/2+M/2,y:T.top-this.strokeWidth/2+M/2},"left","top",this.originX,this.originY)),typeof C.left>"u"&&(this.left=C.fromSVG?T.left:k.x),typeof C.top>"u"&&(this.top=C.fromSVG?T.top:k.y),this.pathOffset={x:T.left+this.width/2+M/2,y:T.top+this.height/2+M/2}},_calcDimensions:function(){var C=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,T=_(C,"x")||0,k=_(C,"y")||0,M=v(C,"x")||0,O=v(C,"y")||0,V=M-T,W=O-k;return{left:T,top:k,width:V,height:W}},toObject:function(C){return g(this.callSuper("toObject",C),{points:this.points.concat()})},_toSVG:function(){for(var C=[],T=this.pathOffset.x,k=this.pathOffset.y,M=c.Object.NUM_FRACTION_DIGITS,O=0,V=this.points.length;O<V;O++)C.push(w(this.points[O].x-T,M),",",w(this.points[O].y-k,M)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',C.join(""),`" />
`]},commonRender:function(C){var T,k=this.points.length,M=this.pathOffset.x,O=this.pathOffset.y;if(!k||isNaN(this.points[k-1].y))return!1;C.beginPath(),C.moveTo(this.points[0].x-M,this.points[0].y-O);for(var V=0;V<k;V++)T=this.points[V],C.lineTo(T.x-M,T.y-O);return!0},_render:function(C){!this.commonRender(C)||this._renderPaintInOrder(C)},complexity:function(){return this.get("points").length}}),c.Polyline.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polyline.fromElementGenerator=function(C){return function(T,k,M){if(!T)return k(null);M||(M={});var O=c.parsePointsAttribute(T.getAttribute("points")),V=c.parseAttributes(T,c[C].ATTRIBUTE_NAMES);V.fromSVG=!0,k(new c[C](O,g(V,M)))}},c.Polyline.fromElement=c.Polyline.fromElementGenerator("Polyline"),c.Polyline.fromObject=function(C,T){return c.Object._fromObject("Polyline",C,T,"points")}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.projectStrokeOnPoints;if(c.Polygon){c.warn("fabric.Polygon is already defined");return}c.Polygon=c.util.createClass(c.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return g(this.points,this)},_render:function(_){!this.commonRender(_)||(_.closePath(),this._renderPaintInOrder(_))}}),c.Polygon.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polygon.fromElement=c.Polyline.fromElementGenerator("Polygon"),c.Polygon.fromObject=function(_,v){c.Object._fromObject("Polygon",_,v,"points")}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.array.min,_=c.util.array.max,v=c.util.object.extend,w=c.util.object.clone,x=c.util.toFixed;if(c.Path){c.warn("fabric.Path is already defined");return}c.Path=c.util.createClass(c.Object,{type:"path",path:null,cacheProperties:c.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:c.Object.prototype.stateProperties.concat("path"),initialize:function(C,T){T=w(T||{}),delete T.path,this.callSuper("initialize",T),this._setPath(C||[],T)},_setPath:function(C,T){this.path=c.util.makePathSimpler(Array.isArray(C)?C:c.util.parsePath(C)),c.Polyline.prototype._setPositionDimensions.call(this,T||{})},_renderPathCommands:function(C){var T,k=0,M=0,O=0,V=0,W=0,J=0,Q=-this.pathOffset.x,Z=-this.pathOffset.y;C.beginPath();for(var ie=0,Se=this.path.length;ie<Se;++ie)switch(T=this.path[ie],T[0]){case"L":O=T[1],V=T[2],C.lineTo(O+Q,V+Z);break;case"M":O=T[1],V=T[2],k=O,M=V,C.moveTo(O+Q,V+Z);break;case"C":O=T[5],V=T[6],W=T[3],J=T[4],C.bezierCurveTo(T[1]+Q,T[2]+Z,W+Q,J+Z,O+Q,V+Z);break;case"Q":C.quadraticCurveTo(T[1]+Q,T[2]+Z,T[3]+Q,T[4]+Z),O=T[3],V=T[4],W=T[1],J=T[2];break;case"z":case"Z":O=k,V=M,C.closePath();break}},_render:function(C){this._renderPathCommands(C),this._renderPaintInOrder(C)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(C){return v(this.callSuper("toObject",C),{path:this.path.map(function(T){return T.slice()})})},toDatalessObject:function(C){var T=this.toObject(["sourcePath"].concat(C));return T.sourcePath&&delete T.path,T},_toSVG:function(){var C=c.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',C,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var C=c.Object.NUM_FRACTION_DIGITS;return" translate("+x(-this.pathOffset.x,C)+", "+x(-this.pathOffset.y,C)+")"},toClipPathSVG:function(C){var T=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},toSVG:function(C){var T=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var C=[],T=[],k,M=0,O=0,V=0,W=0,J,Q=0,Z=this.path.length;Q<Z;++Q){switch(k=this.path[Q],k[0]){case"L":V=k[1],W=k[2],J=[];break;case"M":V=k[1],W=k[2],M=V,O=W,J=[];break;case"C":J=c.util.getBoundsOfCurve(V,W,k[1],k[2],k[3],k[4],k[5],k[6]),V=k[5],W=k[6];break;case"Q":J=c.util.getBoundsOfCurve(V,W,k[1],k[2],k[1],k[2],k[3],k[4]),V=k[3],W=k[4];break;case"z":case"Z":V=M,W=O;break}J.forEach(function(Ae){C.push(Ae.x),T.push(Ae.y)}),C.push(V),T.push(W)}var ie=g(C)||0,Se=g(T)||0,xe=_(C)||0,le=_(T)||0,Ee=xe-ie,me=le-Se;return{left:ie,top:Se,width:Ee,height:me}}}),c.Path.fromObject=function(C,T){if(typeof C.sourcePath=="string"){var k=C.sourcePath;c.loadSVGFromURL(k,function(M){var O=M[0];O.setOptions(C),C.clipPath?c.util.enlivenObjects([C.clipPath],function(V){O.clipPath=V[0],T&&T(O)}):T&&T(O)})}else c.Object._fromObject("Path",C,T,"path")},c.Path.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["d"]),c.Path.fromElement=function(C,T,k){var M=c.parseAttributes(C,c.Path.ATTRIBUTE_NAMES);M.fromSVG=!0,T(new c.Path(M.d,v(M,k)))}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.array.min,_=c.util.array.max;c.Group||(c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(v,w,x){w=w||{},this._objects=[],x&&this.callSuper("initialize",w),this._objects=v||[];for(var C=this._objects.length;C--;)this._objects[C].group=this;if(x)this._updateObjectsACoords();else{var T=w&&w.centerPoint;w.originX!==void 0&&(this.originX=w.originX),w.originY!==void 0&&(this.originY=w.originY),T||this._calcBounds(),this._updateObjectsCoords(T),delete w.centerPoint,this.callSuper("initialize",w)}this.setCoords()},_updateObjectsACoords:function(){for(var v=!0,w=this._objects.length;w--;)this._objects[w].setCoords(v)},_updateObjectsCoords:function(w){for(var w=w||this.getCenterPoint(),x=this._objects.length;x--;)this._updateObjectCoords(this._objects[x],w)},_updateObjectCoords:function(v,w){var x=v.left,C=v.top,T=!0;v.set({left:x-w.x,top:C-w.y}),v.group=this,v.setCoords(T)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(v){var w=!!this.group;return this._restoreObjectsState(),c.util.resetObjectTransform(this),v&&(w&&c.util.removeTransformFromObject(v,this.group.calcTransformMatrix()),this._objects.push(v),v.group=this,v._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,w?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(v){return this._restoreObjectsState(),c.util.resetObjectTransform(this),this.remove(v),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(v){this.dirty=!0,v.group=this,v._set("canvas",this.canvas)},_onObjectRemoved:function(v){this.dirty=!0,delete v.group},_set:function(v,w){var x=this._objects.length;if(this.useSetOnGroup)for(;x--;)this._objects[x].setOnGroup(v,w);if(v==="canvas")for(;x--;)this._objects[x]._set(v,w);c.Object.prototype._set.call(this,v,w)},toObject:function(v){var w=this.includeDefaultValues,x=this._objects.filter(function(T){return!T.excludeFromExport}).map(function(T){var k=T.includeDefaultValues;T.includeDefaultValues=w;var M=T.toObject(v);return T.includeDefaultValues=k,M}),C=c.Object.prototype.toObject.call(this,v);return C.objects=x,C},toDatalessObject:function(v){var w,x=this.sourcePath;if(x)w=x;else{var C=this.includeDefaultValues;w=this._objects.map(function(k){var M=k.includeDefaultValues;k.includeDefaultValues=C;var O=k.toDatalessObject(v);return k.includeDefaultValues=M,O})}var T=c.Object.prototype.toDatalessObject.call(this,v);return T.objects=w,T},render:function(v){this._transformDone=!0,this.callSuper("render",v),this._transformDone=!1},shouldCache:function(){var v=c.Object.prototype.shouldCache.call(this);if(v){for(var w=0,x=this._objects.length;w<x;w++)if(this._objects[w].willDrawShadow())return this.ownCaching=!1,!1}return v},willDrawShadow:function(){if(c.Object.prototype.willDrawShadow.call(this))return!0;for(var v=0,w=this._objects.length;v<w;v++)if(this._objects[v].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(v){for(var w=0,x=this._objects.length;w<x;w++)this._objects[w].render(v);this._drawClipPath(v,this.clipPath)},isCacheDirty:function(v){if(this.callSuper("isCacheDirty",v))return!0;if(!this.statefullCache)return!1;for(var w=0,x=this._objects.length;w<x;w++)if(this._objects[w].isCacheDirty(!0)){if(this._cacheCanvas){var C=this.cacheWidth/this.zoomX,T=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-C/2,-T/2,C,T)}return!0}return!1},_restoreObjectsState:function(){var v=this.calcOwnMatrix();return this._objects.forEach(function(w){c.util.addTransformToObject(w,v),delete w.group,w.setCoords()}),this},destroy:function(){return this._objects.forEach(function(v){v.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(v){v.dispose&&v.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var v=this._objects,w=this.canvas;this._objects=[];var x=this.toObject();delete x.objects;var C=new c.ActiveSelection([]);return C.set(x),C.type="activeSelection",w.remove(this),v.forEach(function(T){T.group=C,T.dirty=!0,w.add(T)}),C.canvas=w,C._objects=v,w._activeObject=C,C.setCoords(),C}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var v=!0;return this.forEachObject(function(w){w.setCoords(v)}),this},_calcBounds:function(v){for(var w=[],x=[],C,T,k,M=["tr","br","bl","tl"],O=0,V=this._objects.length,W,J=M.length;O<V;++O){for(C=this._objects[O],k=C.calcACoords(),W=0;W<J;W++)T=M[W],w.push(k[T].x),x.push(k[T].y);C.aCoords=k}this._getBounds(w,x,v)},_getBounds:function(v,w,x){var C=new c.Point(g(v),g(w)),T=new c.Point(_(v),_(w)),k=C.y||0,M=C.x||0,O=T.x-C.x||0,V=T.y-C.y||0;this.width=O,this.height=V,x||this.setPositionByOrigin({x:M,y:k},"left","top")},_toSVG:function(v){for(var w=["<g ","COMMON_PARTS",` >
`],x=0,C=this._objects.length;x<C;x++)w.push("		",this._objects[x].toSVG(v));return w.push(`</g>
`),w},getSvgStyles:function(){var v=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",w=this.visible?"":" visibility: hidden;";return[v,this.getSvgFilter(),w].join("")},toClipPathSVG:function(v){for(var w=[],x=0,C=this._objects.length;x<C;x++)w.push("	",this._objects[x].toClipPathSVG(v));return this._createBaseClipPathSVGMarkup(w,{reviver:v})}}),c.Group.fromObject=function(v,w){var x=v.objects,C=c.util.object.clone(v,!0);if(delete C.objects,typeof x=="string"){c.loadSVGFromURL(x,function(T){var k=c.util.groupSVGElements(T,v,x),M=C.clipPath;delete C.clipPath,k.set(C),M?c.util.enlivenObjects([M],function(O){k.clipPath=O[0],w&&w(k)}):w&&w(k)});return}c.util.enlivenObjects(x,function(T){c.util.enlivenObjectEnlivables(v,C,function(){w&&w(new c.Group(T,C,!0))})})})}(i),function(o){var c=o.fabric||(o.fabric={});c.ActiveSelection||(c.ActiveSelection=c.util.createClass(c.Group,{type:"activeSelection",initialize:function(g,_){_=_||{},this._objects=g||[];for(var v=this._objects.length;v--;)this._objects[v].group=this;_.originX&&(this.originX=_.originX),_.originY&&(this.originY=_.originY),this._calcBounds(),this._updateObjectsCoords(),c.Object.prototype.initialize.call(this,_),this.setCoords()},toGroup:function(){var g=this._objects.concat();this._objects=[];var _=c.Object.prototype.toObject.call(this),v=new c.Group([]);if(delete _.type,v.set(_),g.forEach(function(x){x.canvas.remove(x),x.group=v}),v._objects=g,!this.canvas)return v;var w=this.canvas;return w.add(v),w._activeObject=v,v.setCoords(),v},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(g,_,v){g.save(),g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",g,_),v=v||{},typeof v.hasControls>"u"&&(v.hasControls=!1),v.forActiveSelection=!0;for(var w=0,x=this._objects.length;w<x;w++)this._objects[w]._renderControls(g,v);g.restore()}}),c.ActiveSelection.fromObject=function(g,_){c.util.enlivenObjects(g.objects,function(v){delete g.objects,_&&_(new c.ActiveSelection(v,g,!0))})})}(i),function(o){var c=e.util.object.extend;if(o.fabric||(o.fabric={}),o.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(g,_){_||(_={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",_),this._initElement(g,_)},getElement:function(){return this._element||{}},setElement:function(g,_){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=g,this._originalElement=g,this._initConfig(_),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(g){var _=e.filterBackend;_&&_.evictCachesForKey&&_.evictCachesForKey(g)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(g){e.util.cleanUpJsdomNode(this[g]),this[g]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var g=this.getElement();return{width:g.naturalWidth||g.width,height:g.naturalHeight||g.height}},_stroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){var _=this.width/2,v=this.height/2;g.beginPath(),g.moveTo(-_,-v),g.lineTo(_,-v),g.lineTo(_,v),g.lineTo(-_,v),g.lineTo(-_,-v),g.closePath()}},toObject:function(g){var _=[];this.filters.forEach(function(w){w&&_.push(w.toObject())});var v=c(this.callSuper("toObject",["cropX","cropY"].concat(g)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:_});return this.resizeFilter&&(v.resizeFilter=this.resizeFilter.toObject()),v},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var g=[],_=[],v,w=this._element,x=-this.width/2,C=-this.height/2,T="",k="";if(!w)return[];if(this.hasCrop()){var M=e.Object.__uid++;g.push('<clipPath id="imageCrop_'+M+`">
`,'	<rect x="'+x+'" y="'+C+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),T=' clip-path="url(#imageCrop_'+M+')" '}if(this.imageSmoothing||(k='" image-rendering="optimizeSpeed'),_.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',x-this.cropX,'" y="',C-this.cropY,'" width="',w.width||w.naturalWidth,'" height="',w.height||w.height,k,'"',T,`></image>
`),this.stroke||this.strokeDashArray){var O=this.fill;this.fill=null,v=["	<rect ",'x="',x,'" y="',C,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=O}return this.paintFirst!=="fill"?g=g.concat(v,_):g=g.concat(_,v),g},getSrc:function(g){var _=g?this._element:this._originalElement;return _?_.toDataURL?_.toDataURL():this.srcFromAttribute?_.getAttribute("src"):_.src:this.src||""},setSrc:function(g,_,v){return e.util.loadImage(g,function(w,x){this.setElement(w,v),this._setWidthHeight(),_&&_(this,x)},this,v&&v.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var g=this.resizeFilter,_=this.minimumScaleTrigger,v=this.getTotalObjectScaling(),w=v.scaleX,x=v.scaleY,C=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!g||w>_&&x>_){this._element=C,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=w,this._lastScaleY=x;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var T=e.util.createCanvasElement(),k=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,M=C.width,O=C.height;T.width=M,T.height=O,this._element=T,this._lastScaleX=g.scaleX=w,this._lastScaleY=g.scaleY=x,e.filterBackend.applyFilters([g],C,M,O,this._element,k),this._filterScalingX=T.width/this._originalElement.width,this._filterScalingY=T.height/this._originalElement.height},applyFilters:function(g){if(g=g||this.filters||[],g=g.filter(function(C){return C&&!C.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),g.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var _=this._originalElement,v=_.naturalWidth||_.width,w=_.naturalHeight||_.height;if(this._element===this._originalElement){var x=e.util.createCanvasElement();x.width=v,x.height=w,this._element=x,this._filteredEl=x}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,v,w),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(g,this._originalElement,v,w,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(g){e.util.setImageSmoothing(g,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(g),this._renderPaintInOrder(g)},drawCacheOnCanvas:function(g){e.util.setImageSmoothing(g,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,g)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(g){var _=this._element;if(!!_){var v=this._filterScalingX,w=this._filterScalingY,x=this.width,C=this.height,T=Math.min,k=Math.max,M=k(this.cropX,0),O=k(this.cropY,0),V=_.naturalWidth||_.width,W=_.naturalHeight||_.height,J=M*v,Q=O*w,Z=T(x*v,V-J),ie=T(C*w,W-Q),Se=-x/2,xe=-C/2,le=T(x,V/v-M),Ee=T(C,W/w-O);_&&g.drawImage(_,J,Q,Z,ie,Se,xe,le,Ee)}},_needsResize:function(){var g=this.getTotalObjectScaling();return g.scaleX!==this._lastScaleX||g.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(g,_){this.setElement(e.util.getById(g),_),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(g){g||(g={}),this.setOptions(g),this._setWidthHeight(g)},_initFilters:function(g,_){g&&g.length?e.util.enlivenObjects(g,function(v){_&&_(v)},"fabric.Image.filters"):_&&_()},_setWidthHeight:function(g){g||(g={});var _=this.getElement();this.width=g.width||_.naturalWidth||_.width||0,this.height=g.height||_.naturalHeight||_.height||0},parsePreserveAspectRatioAttribute:function(){var g=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),_=this._element.width,v=this._element.height,w=1,x=1,C=0,T=0,k=0,M=0,O,V=this.width,W=this.height,J={width:V,height:W};return g&&(g.alignX!=="none"||g.alignY!=="none")?(g.meetOrSlice==="meet"&&(w=x=e.util.findScaleToFit(this._element,J),O=(V-_*w)/2,g.alignX==="Min"&&(C=-O),g.alignX==="Max"&&(C=O),O=(W-v*x)/2,g.alignY==="Min"&&(T=-O),g.alignY==="Max"&&(T=O)),g.meetOrSlice==="slice"&&(w=x=e.util.findScaleToCover(this._element,J),O=_-V/w,g.alignX==="Mid"&&(k=O/2),g.alignX==="Max"&&(k=O),O=v-W/x,g.alignY==="Mid"&&(M=O/2),g.alignY==="Max"&&(M=O),_=V/w,v=W/x)):(w=V/_,x=W/v),{width:_,height:v,scaleX:w,scaleY:x,offsetLeft:C,offsetTop:T,cropX:k,cropY:M}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(g,_){var v=e.util.object.clone(g);e.util.loadImage(v.src,function(w,x){if(x){_&&_(null,!0);return}e.Image.prototype._initFilters.call(v,v.filters,function(C){v.filters=C||[],e.Image.prototype._initFilters.call(v,[v.resizeFilter],function(T){v.resizeFilter=T[0],e.util.enlivenObjectEnlivables(v,v,function(){var k=new e.Image(w,v);_(k,!1)})})})},null,v.crossOrigin)},e.Image.fromURL=function(g,_,v){e.util.loadImage(g,function(w,x){_&&_(new e.Image(w,v),x)},null,v&&v.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(g,_,v){var w=e.parseAttributes(g,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(w["xlink:href"],_,c(v?e.util.object.clone(v):{},w))}}(i),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var o=this.angle%360;return o>0?Math.round((o-1)/90)*90:Math.round(o/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(o){o=o||{};var c=function(){},g=o.onComplete||c,_=o.onChange||c,v=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(w){v.rotate(w),_()},onComplete:function(){v.setCoords(),g()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(o){return o.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(o){return o.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function o(g,_){var v="precision "+_+` float;
void main(){}`,w=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(w,v),g.compileShader(w),!!g.getShaderParameter(w,g.COMPILE_STATUS)}e.isWebglSupported=function(g){if(e.isLikelyNode)return!1;g=g||e.WebglFilterBackend.prototype.tileSize;var _=document.createElement("canvas"),v=_.getContext("webgl")||_.getContext("experimental-webgl"),w=!1;if(v){e.maxTextureSize=v.getParameter(v.MAX_TEXTURE_SIZE),w=e.maxTextureSize>=g;for(var x=["highp","mediump","lowp"],C=0;C<3;C++)if(o(v,x[C])){e.webGlPrecision=x[C];break}}return this.isSupported=w,w},e.WebglFilterBackend=c;function c(g){g&&g.tileSize&&(this.tileSize=g.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}c.prototype={tileSize:2048,resources:{},setupGLContext:function(g,_){this.dispose(),this.createWebGLCanvas(g,_),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(g,_)},chooseFastestCopyGLTo2DMethod:function(g,_){var v=typeof window.performance<"u",w;try{new ImageData(1,1),w=!0}catch{w=!1}var x=typeof ArrayBuffer<"u",C=typeof Uint8ClampedArray<"u";if(!!(v&&w&&x&&C)){var T=e.util.createCanvasElement(),k=new ArrayBuffer(g*_*4);if(e.forceGLPutImageData){this.imageBuffer=k,this.copyGLTo2D=p;return}var M={imageBuffer:k,destinationWidth:g,destinationHeight:_,targetCanvas:T},O,V,W;T.width=g,T.height=_,O=window.performance.now(),u.call(M,this.gl,M),V=window.performance.now()-O,O=window.performance.now(),p.call(M,this.gl,M),W=window.performance.now()-O,V>W?(this.imageBuffer=k,this.copyGLTo2D=p):this.copyGLTo2D=u}},createWebGLCanvas:function(g,_){var v=e.util.createCanvasElement();v.width=g,v.height=_;var w={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},x=v.getContext("webgl",w);x||(x=v.getContext("experimental-webgl",w)),x&&(x.clearColor(0,0,0,0),this.canvas=v,this.gl=x)},applyFilters:function(g,_,v,w,x,C){var T=this.gl,k;C&&(k=this.getCachedTexture(C,_));var M={originalWidth:_.width||_.originalWidth,originalHeight:_.height||_.originalHeight,sourceWidth:v,sourceHeight:w,destinationWidth:v,destinationHeight:w,context:T,sourceTexture:this.createTexture(T,v,w,!k&&_),targetTexture:this.createTexture(T,v,w),originalTexture:k||this.createTexture(T,v,w,!k&&_),passes:g.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:x},O=T.createFramebuffer();return T.bindFramebuffer(T.FRAMEBUFFER,O),g.forEach(function(V){V&&V.applyTo(M)}),l(M),this.copyGLTo2D(T,M),T.bindTexture(T.TEXTURE_2D,null),T.deleteTexture(M.sourceTexture),T.deleteTexture(M.targetTexture),T.deleteFramebuffer(O),x.getContext("2d").setTransform(1,0,0,1,0,0),M},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(g,_,v,w){var x=g.createTexture();return g.bindTexture(g.TEXTURE_2D,x),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),w?g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,w):g.texImage2D(g.TEXTURE_2D,0,g.RGBA,_,v,0,g.RGBA,g.UNSIGNED_BYTE,null),x},getCachedTexture:function(g,_){if(this.textureCache[g])return this.textureCache[g];var v=this.createTexture(this.gl,_.width,_.height,_);return this.textureCache[g]=v,v},evictCachesForKey:function(g){this.textureCache[g]&&(this.gl.deleteTexture(this.textureCache[g]),delete this.textureCache[g])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var g=this.gl,_={renderer:"",vendor:""};if(!g)return _;var v=g.getExtension("WEBGL_debug_renderer_info");if(v){var w=g.getParameter(v.UNMASKED_RENDERER_WEBGL),x=g.getParameter(v.UNMASKED_VENDOR_WEBGL);w&&(_.renderer=w.toLowerCase()),x&&(_.vendor=x.toLowerCase())}return this.gpuInfo=_,_}}}();function l(o){var c=o.targetCanvas,g=c.width,_=c.height,v=o.destinationWidth,w=o.destinationHeight;(g!==v||_!==w)&&(c.width=v,c.height=w)}function u(o,c){var g=o.canvas,_=c.targetCanvas,v=_.getContext("2d");v.translate(0,_.height),v.scale(1,-1);var w=g.height-_.height;v.drawImage(g,0,w,_.width,_.height,0,0,_.width,_.height)}function p(o,c){var g=c.targetCanvas,_=g.getContext("2d"),v=c.destinationWidth,w=c.destinationHeight,x=v*w*4,C=new Uint8Array(this.imageBuffer,0,x),T=new Uint8ClampedArray(this.imageBuffer,0,x);o.readPixels(0,0,v,w,o.RGBA,o.UNSIGNED_BYTE,C);var k=new ImageData(T,v,w);_.putImageData(k,0,0)}(function(){var o=function(){};e.Canvas2dFilterBackend=c;function c(){}c.prototype={evictCachesForKey:o,dispose:o,clearWebGLCaches:o,resources:{},applyFilters:function(g,_,v,w,x){var C=x.getContext("2d");C.drawImage(_,0,0,v,w);var T=C.getImageData(0,0,v,w),k=C.getImageData(0,0,v,w),M={sourceWidth:v,sourceHeight:w,imageData:T,originalEl:_,originalImageData:k,canvasEl:x,ctx:C,filterBackend:this};return g.forEach(function(O){O.applyTo(M)}),(M.imageData.width!==v||M.imageData.height!==w)&&(x.width=M.imageData.width,x.height=M.imageData.height),C.putImageData(M.imageData,0,0),M}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(o){o&&this.setOptions(o)},setOptions:function(o){for(var c in o)this[c]=o[c]},createProgram:function(o,c,g){c=c||this.fragmentSource,g=g||this.vertexSource,e.webGlPrecision!=="highp"&&(c=c.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var _=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(_,g),o.compileShader(_),!o.getShaderParameter(_,o.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+o.getShaderInfoLog(_));var v=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(v,c),o.compileShader(v),!o.getShaderParameter(v,o.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+o.getShaderInfoLog(v));var w=o.createProgram();if(o.attachShader(w,_),o.attachShader(w,v),o.linkProgram(w),!o.getProgramParameter(w,o.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+o.getProgramInfoLog(w));var x=this.getAttributeLocations(o,w),C=this.getUniformLocations(o,w)||{};return C.uStepW=o.getUniformLocation(w,"uStepW"),C.uStepH=o.getUniformLocation(w,"uStepH"),{program:w,attributeLocations:x,uniformLocations:C}},getAttributeLocations:function(o,c){return{aPosition:o.getAttribLocation(c,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(o,c,g){var _=c.aPosition,v=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,v),o.enableVertexAttribArray(_),o.vertexAttribPointer(_,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,g,o.STATIC_DRAW)},_setupFrameBuffer:function(o){var c=o.context,g,_;o.passes>1?(g=o.destinationWidth,_=o.destinationHeight,(o.sourceWidth!==g||o.sourceHeight!==_)&&(c.deleteTexture(o.targetTexture),o.targetTexture=o.filterBackend.createTexture(c,g,_)),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o.targetTexture,0)):(c.bindFramebuffer(c.FRAMEBUFFER,null),c.finish())},_swapTextures:function(o){o.passes--,o.pass++;var c=o.targetTexture;o.targetTexture=o.sourceTexture,o.sourceTexture=c},isNeutralState:function(){var o=this.mainParameter,c=e.Image.filters[this.type].prototype;if(o)if(Array.isArray(c[o])){for(var g=c[o].length;g--;)if(this[o][g]!==c[o][g])return!1;return!0}else return c[o]===this[o];else return!1},applyTo:function(o){o.webgl?(this._setupFrameBuffer(o),this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},retrieveShader:function(o){return o.programCache.hasOwnProperty(this.type)||(o.programCache[this.type]=this.createProgram(o.context)),o.programCache[this.type]},applyToWebGL:function(o){var c=o.context,g=this.retrieveShader(o);o.pass===0&&o.originalTexture?c.bindTexture(c.TEXTURE_2D,o.originalTexture):c.bindTexture(c.TEXTURE_2D,o.sourceTexture),c.useProgram(g.program),this.sendAttributeData(c,g.attributeLocations,o.aPosition),c.uniform1f(g.uniformLocations.uStepW,1/o.sourceWidth),c.uniform1f(g.uniformLocations.uStepH,1/o.sourceHeight),this.sendUniformData(c,g.uniformLocations),c.viewport(0,0,o.destinationWidth,o.destinationHeight),c.drawArrays(c.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(o,c,g){o.activeTexture(g),o.bindTexture(o.TEXTURE_2D,c),o.activeTexture(o.TEXTURE0)},unbindAdditionalTexture:function(o,c){o.activeTexture(c),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(o){this[this.mainParameter]=o},sendUniformData:function(){},createHelpLayer:function(o){if(!o.helpLayer){var c=document.createElement("canvas");c.width=o.sourceWidth,c.height=o.sourceHeight,o.helpLayer=c}},toObject:function(){var o={type:this.type},c=this.mainParameter;return c&&(o[c]=this[c]),o},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(o,c){var g=new e.Image.filters[o.type](o);return c&&c(g),g},function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.ColorMatrix=_(g.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(v){this.callSuper("initialize",v),this.matrix=this.matrix.slice(0)},applyTo2d:function(v){var w=v.imageData,x=w.data,C=x.length,T=this.matrix,k,M,O,V,W,J=this.colorsOnly;for(W=0;W<C;W+=4)k=x[W],M=x[W+1],O=x[W+2],J?(x[W]=k*T[0]+M*T[1]+O*T[2]+T[4]*255,x[W+1]=k*T[5]+M*T[6]+O*T[7]+T[9]*255,x[W+2]=k*T[10]+M*T[11]+O*T[12]+T[14]*255):(V=x[W+3],x[W]=k*T[0]+M*T[1]+O*T[2]+V*T[3]+T[4]*255,x[W+1]=k*T[5]+M*T[6]+O*T[7]+V*T[8]+T[9]*255,x[W+2]=k*T[10]+M*T[11]+O*T[12]+V*T[13]+T[14]*255,x[W+3]=k*T[15]+M*T[16]+O*T[17]+V*T[18]+T[19]*255)},getUniformLocations:function(v,w){return{uColorMatrix:v.getUniformLocation(w,"uColorMatrix"),uConstants:v.getUniformLocation(w,"uConstants")}},sendUniformData:function(v,w){var x=this.matrix,C=[x[0],x[1],x[2],x[3],x[5],x[6],x[7],x[8],x[10],x[11],x[12],x[13],x[15],x[16],x[17],x[18]],T=[x[4],x[9],x[14],x[19]];v.uniformMatrix4fv(w.uColorMatrix,!1,C),v.uniform4fv(w.uConstants,T)}}),c.Image.filters.ColorMatrix.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Brightness=_(g.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(v){if(this.brightness!==0){var w=v.imageData,x=w.data,C,T=x.length,k=Math.round(this.brightness*255);for(C=0;C<T;C+=4)x[C]=x[C]+k,x[C+1]=x[C+1]+k,x[C+2]=x[C+2]+k}},getUniformLocations:function(v,w){return{uBrightness:v.getUniformLocation(w,"uBrightness")}},sendUniformData:function(v,w){v.uniform1f(w.uBrightness,this.brightness)}}),c.Image.filters.Brightness.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.Image.filters,v=c.util.createClass;_.Convolute=v(_.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(w){var x=Math.sqrt(this.matrix.length),C=this.type+"_"+x+"_"+(this.opaque?1:0),T=this.fragmentSource[C];return w.programCache.hasOwnProperty(C)||(w.programCache[C]=this.createProgram(w.context,T)),w.programCache[C]},applyTo2d:function(w){var x=w.imageData,C=x.data,T=this.matrix,k=Math.round(Math.sqrt(T.length)),M=Math.floor(k/2),O=x.width,V=x.height,W=w.ctx.createImageData(O,V),J=W.data,Q=this.opaque?1:0,Z,ie,Se,xe,le,Ee,me,Ae,pt,rt,Pt,We,be;for(Pt=0;Pt<V;Pt++)for(rt=0;rt<O;rt++){for(le=(Pt*O+rt)*4,Z=0,ie=0,Se=0,xe=0,be=0;be<k;be++)for(We=0;We<k;We++)me=Pt+be-M,Ee=rt+We-M,!(me<0||me>=V||Ee<0||Ee>=O)&&(Ae=(me*O+Ee)*4,pt=T[be*k+We],Z+=C[Ae]*pt,ie+=C[Ae+1]*pt,Se+=C[Ae+2]*pt,Q||(xe+=C[Ae+3]*pt));J[le]=Z,J[le+1]=ie,J[le+2]=Se,Q?J[le+3]=C[le+3]:J[le+3]=xe}w.imageData=W},getUniformLocations:function(w,x){return{uMatrix:w.getUniformLocation(x,"uMatrix"),uOpaque:w.getUniformLocation(x,"uOpaque"),uHalfSize:w.getUniformLocation(x,"uHalfSize"),uSize:w.getUniformLocation(x,"uSize")}},sendUniformData:function(w,x){w.uniform1fv(x.uMatrix,this.matrix)},toObject:function(){return g(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),c.Image.filters.Convolute.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Grayscale=_(g.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(v){var w=v.imageData,x=w.data,C,T=x.length,k,M=this.mode;for(C=0;C<T;C+=4)M==="average"?k=(x[C]+x[C+1]+x[C+2])/3:M==="lightness"?k=(Math.min(x[C],x[C+1],x[C+2])+Math.max(x[C],x[C+1],x[C+2]))/2:M==="luminosity"&&(k=.21*x[C]+.72*x[C+1]+.07*x[C+2]),x[C]=k,x[C+1]=k,x[C+2]=k},retrieveShader:function(v){var w=this.type+"_"+this.mode;if(!v.programCache.hasOwnProperty(w)){var x=this.fragmentSource[this.mode];v.programCache[w]=this.createProgram(v.context,x)}return v.programCache[w]},getUniformLocations:function(v,w){return{uMode:v.getUniformLocation(w,"uMode")}},sendUniformData:function(v,w){var x=1;v.uniform1i(w.uMode,x)},isNeutralState:function(){return!1}}),c.Image.filters.Grayscale.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Invert=_(g.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(v){var w=v.imageData,x=w.data,C,T=x.length;for(C=0;C<T;C+=4)x[C]=255-x[C],x[C+1]=255-x[C+1],x[C+2]=255-x[C+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(v,w){return{uInvert:v.getUniformLocation(w,"uInvert")}},sendUniformData:function(v,w){v.uniform1i(w.uInvert,this.invert)}}),c.Image.filters.Invert.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.Image.filters,v=c.util.createClass;_.Noise=v(_.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(w){if(this.noise!==0){var x=w.imageData,C=x.data,T,k=C.length,M=this.noise,O;for(T=0,k=C.length;T<k;T+=4)O=(.5-Math.random())*M,C[T]+=O,C[T+1]+=O,C[T+2]+=O}},getUniformLocations:function(w,x){return{uNoise:w.getUniformLocation(x,"uNoise"),uSeed:w.getUniformLocation(x,"uSeed")}},sendUniformData:function(w,x){w.uniform1f(x.uNoise,this.noise/255),w.uniform1f(x.uSeed,Math.random())},toObject:function(){return g(this.callSuper("toObject"),{noise:this.noise})}}),c.Image.filters.Noise.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Pixelate=_(g.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(v){var w=v.imageData,x=w.data,C=w.height,T=w.width,k,M,O,V,W,J,Q,Z,ie,Se,xe;for(M=0;M<C;M+=this.blocksize)for(O=0;O<T;O+=this.blocksize)for(k=M*4*T+O*4,V=x[k],W=x[k+1],J=x[k+2],Q=x[k+3],Se=Math.min(M+this.blocksize,C),xe=Math.min(O+this.blocksize,T),Z=M;Z<Se;Z++)for(ie=O;ie<xe;ie++)k=Z*4*T+ie*4,x[k]=V,x[k+1]=W,x[k+2]=J,x[k+3]=Q},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(v,w){return{uBlocksize:v.getUniformLocation(w,"uBlocksize"),uStepW:v.getUniformLocation(w,"uStepW"),uStepH:v.getUniformLocation(w,"uStepH")}},sendUniformData:function(v,w){v.uniform1f(w.uBlocksize,this.blocksize)}}),c.Image.filters.Pixelate.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.extend,_=c.Image.filters,v=c.util.createClass;_.RemoveColor=v(_.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(w){var x=w.imageData,C=x.data,T,k=this.distance*255,M,O,V,W=new c.Color(this.color).getSource(),J=[W[0]-k,W[1]-k,W[2]-k],Q=[W[0]+k,W[1]+k,W[2]+k];for(T=0;T<C.length;T+=4)M=C[T],O=C[T+1],V=C[T+2],M>J[0]&&O>J[1]&&V>J[2]&&M<Q[0]&&O<Q[1]&&V<Q[2]&&(C[T+3]=0)},getUniformLocations:function(w,x){return{uLow:w.getUniformLocation(x,"uLow"),uHigh:w.getUniformLocation(x,"uHigh")}},sendUniformData:function(w,x){var C=new c.Color(this.color).getSource(),T=parseFloat(this.distance),k=[0+C[0]/255-T,0+C[1]/255-T,0+C[2]/255-T,1],M=[C[0]/255+T,C[1]/255+T,C[2]/255+T,1];w.uniform4fv(x.uLow,k),w.uniform4fv(x.uHigh,M)},toObject:function(){return g(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),c.Image.filters.RemoveColor.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass,v={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var w in v)g[w]=_(g.ColorMatrix,{type:w,matrix:v[w],mainParameter:!1,colorsOnly:!0}),c.Image.filters[w].fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric,g=c.Image.filters,_=c.util.createClass;g.BlendColor=_(g.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(v){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[v]+`}
}`},retrieveShader:function(v){var w=this.type+"_"+this.mode,x;return v.programCache.hasOwnProperty(w)||(x=this.buildSource(this.mode),v.programCache[w]=this.createProgram(v.context,x)),v.programCache[w]},applyTo2d:function(v){var w=v.imageData,x=w.data,C=x.length,T,k,M,O,V,W,J,Q=1-this.alpha;J=new c.Color(this.color).getSource(),T=J[0]*this.alpha,k=J[1]*this.alpha,M=J[2]*this.alpha;for(var Z=0;Z<C;Z+=4)switch(O=x[Z],V=x[Z+1],W=x[Z+2],this.mode){case"multiply":x[Z]=O*T/255,x[Z+1]=V*k/255,x[Z+2]=W*M/255;break;case"screen":x[Z]=255-(255-O)*(255-T)/255,x[Z+1]=255-(255-V)*(255-k)/255,x[Z+2]=255-(255-W)*(255-M)/255;break;case"add":x[Z]=O+T,x[Z+1]=V+k,x[Z+2]=W+M;break;case"diff":case"difference":x[Z]=Math.abs(O-T),x[Z+1]=Math.abs(V-k),x[Z+2]=Math.abs(W-M);break;case"subtract":x[Z]=O-T,x[Z+1]=V-k,x[Z+2]=W-M;break;case"darken":x[Z]=Math.min(O,T),x[Z+1]=Math.min(V,k),x[Z+2]=Math.min(W,M);break;case"lighten":x[Z]=Math.max(O,T),x[Z+1]=Math.max(V,k),x[Z+2]=Math.max(W,M);break;case"overlay":x[Z]=T<128?2*O*T/255:255-2*(255-O)*(255-T)/255,x[Z+1]=k<128?2*V*k/255:255-2*(255-V)*(255-k)/255,x[Z+2]=M<128?2*W*M/255:255-2*(255-W)*(255-M)/255;break;case"exclusion":x[Z]=T+O-2*T*O/255,x[Z+1]=k+V-2*k*V/255,x[Z+2]=M+W-2*M*W/255;break;case"tint":x[Z]=T+O*Q,x[Z+1]=k+V*Q,x[Z+2]=M+W*Q}},getUniformLocations:function(v,w){return{uColor:v.getUniformLocation(w,"uColor")}},sendUniformData:function(v,w){var x=new c.Color(this.color).getSource();x[0]=this.alpha*x[0]/255,x[1]=this.alpha*x[1]/255,x[2]=this.alpha*x[2]/255,x[3]=this.alpha,v.uniform4fv(w.uColor,x)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendColor.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric,g=c.Image.filters,_=c.util.createClass;g.BlendImage=_(g.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(v){var w=this.type+"_"+this.mode,x=this.fragmentSource[this.mode];return v.programCache.hasOwnProperty(w)||(v.programCache[w]=this.createProgram(v.context,x)),v.programCache[w]},applyToWebGL:function(v){var w=v.context,x=this.createTexture(v.filterBackend,this.image);this.bindAdditionalTexture(w,x,w.TEXTURE1),this.callSuper("applyToWebGL",v),this.unbindAdditionalTexture(w,w.TEXTURE1)},createTexture:function(v,w){return v.getCachedTexture(w.cacheKey,w._element)},calculateMatrix:function(){var v=this.image,w=v._element.width,x=v._element.height;return[1/v.scaleX,0,0,0,1/v.scaleY,0,-v.left/w,-v.top/x,1]},applyTo2d:function(v){var w=v.imageData,x=v.filterBackend.resources,C=w.data,T=C.length,k=w.width,M=w.height,O,V,W,J,Q,Z,ie,Se,xe,le,Ee=this.image,me;x.blendImage||(x.blendImage=c.util.createCanvasElement()),xe=x.blendImage,le=xe.getContext("2d"),xe.width!==k||xe.height!==M?(xe.width=k,xe.height=M):le.clearRect(0,0,k,M),le.setTransform(Ee.scaleX,0,0,Ee.scaleY,Ee.left,Ee.top),le.drawImage(Ee._element,0,0,k,M),me=le.getImageData(0,0,k,M).data;for(var Ae=0;Ae<T;Ae+=4)switch(Q=C[Ae],Z=C[Ae+1],ie=C[Ae+2],Se=C[Ae+3],O=me[Ae],V=me[Ae+1],W=me[Ae+2],J=me[Ae+3],this.mode){case"multiply":C[Ae]=Q*O/255,C[Ae+1]=Z*V/255,C[Ae+2]=ie*W/255,C[Ae+3]=Se*J/255;break;case"mask":C[Ae+3]=J;break}},getUniformLocations:function(v,w){return{uTransformMatrix:v.getUniformLocation(w,"uTransformMatrix"),uImage:v.getUniformLocation(w,"uImage")}},sendUniformData:function(v,w){var x=this.calculateMatrix();v.uniform1i(w.uImage,1),v.uniformMatrix3fv(w.uTransformMatrix,!1,x)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendImage.fromObject=function(v,w){c.Image.fromObject(v.image,function(x){var C=c.util.object.clone(v);C.image=x,w(new c.Image.filters.BlendImage(C))})}}(i),function(o){var c=o.fabric||(o.fabric={}),g=Math.pow,_=Math.floor,v=Math.sqrt,w=Math.abs,x=Math.round,C=Math.sin,T=Math.ceil,k=c.Image.filters,M=c.util.createClass;k.Resize=M(k.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(O,V){return{uDelta:O.getUniformLocation(V,"uDelta"),uTaps:O.getUniformLocation(V,"uTaps")}},sendUniformData:function(O,V){O.uniform2fv(V.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),O.uniform1fv(V.uTaps,this.taps)},retrieveShader:function(O){var V=this.getFilterWindow(),W=this.type+"_"+V;if(!O.programCache.hasOwnProperty(W)){var J=this.generateShader(V);O.programCache[W]=this.createProgram(O.context,J)}return O.programCache[W]},getFilterWindow:function(){var O=this.tempScale;return Math.ceil(this.lanczosLobes/O)},getTaps:function(){for(var O=this.lanczosCreate(this.lanczosLobes),V=this.tempScale,W=this.getFilterWindow(),J=new Array(W),Q=1;Q<=W;Q++)J[Q-1]=O(Q*V);return J},generateShader:function(J){for(var V=new Array(J),W=this.fragmentSourceTOP,J,Q=1;Q<=J;Q++)V[Q-1]=Q+".0 * uDelta";return W+="uniform float uTaps["+J+`];
`,W+=`void main() {
`,W+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,W+=`  float sum = 1.0;
`,V.forEach(function(Z,ie){W+="  color += texture2D(uTexture, vTexCoord + "+Z+") * uTaps["+ie+`];
`,W+="  color += texture2D(uTexture, vTexCoord - "+Z+") * uTaps["+ie+`];
`,W+="  sum += 2.0 * uTaps["+ie+`];
`}),W+=`  gl_FragColor = color / sum;
`,W+="}",W},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(O){O.webgl?(O.passes++,this.width=O.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=O.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),O.destinationWidth=this.dW,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceWidth=O.destinationWidth,this.height=O.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),O.destinationHeight=this.dH,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceHeight=O.destinationHeight):this.applyTo2d(O)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(O){return function(V){if(V>=O||V<=-O)return 0;if(V<11920929e-14&&V>-11920929e-14)return 1;V*=Math.PI;var W=V/O;return C(V)/V*C(W)/W}},applyTo2d:function(O){var V=O.imageData,W=this.scaleX,J=this.scaleY;this.rcpScaleX=1/W,this.rcpScaleY=1/J;var Q=V.width,Z=V.height,ie=x(Q*W),Se=x(Z*J),xe;this.resizeType==="sliceHack"?xe=this.sliceByTwo(O,Q,Z,ie,Se):this.resizeType==="hermite"?xe=this.hermiteFastResize(O,Q,Z,ie,Se):this.resizeType==="bilinear"?xe=this.bilinearFiltering(O,Q,Z,ie,Se):this.resizeType==="lanczos"&&(xe=this.lanczosResize(O,Q,Z,ie,Se)),O.imageData=xe},sliceByTwo:function(O,V,W,J,Q){var Z=O.imageData,ie=.5,Se=!1,xe=!1,le=V*ie,Ee=W*ie,me=c.filterBackend.resources,Ae,pt,rt=0,Pt=0,We=V,be=0;for(me.sliceByTwo||(me.sliceByTwo=document.createElement("canvas")),Ae=me.sliceByTwo,(Ae.width<V*1.5||Ae.height<W)&&(Ae.width=V*1.5,Ae.height=W),pt=Ae.getContext("2d"),pt.clearRect(0,0,V*1.5,W),pt.putImageData(Z,0,0),J=_(J),Q=_(Q);!Se||!xe;)V=le,W=Ee,J<_(le*ie)?le=_(le*ie):(le=J,Se=!0),Q<_(Ee*ie)?Ee=_(Ee*ie):(Ee=Q,xe=!0),pt.drawImage(Ae,rt,Pt,V,W,We,be,le,Ee),rt=We,Pt=be,be+=Ee;return pt.getImageData(rt,Pt,J,Q)},lanczosResize:function(O,V,W,J,Q){function Z(Ue){var ce,Ie,de,ge,Re,Ze,ut,Xe,$e,Dt,ni;for(be.x=(Ue+.5)*Ee,Le.x=_(be.x),ce=0;ce<Q;ce++){for(be.y=(ce+.5)*me,Le.y=_(be.y),Re=0,Ze=0,ut=0,Xe=0,$e=0,Ie=Le.x-rt;Ie<=Le.x+rt;Ie++)if(!(Ie<0||Ie>=V)){Dt=_(1e3*w(Ie-be.x)),We[Dt]||(We[Dt]={});for(var mt=Le.y-Pt;mt<=Le.y+Pt;mt++)mt<0||mt>=W||(ni=_(1e3*w(mt-be.y)),We[Dt][ni]||(We[Dt][ni]=le(v(g(Dt*Ae,2)+g(ni*pt,2))/1e3)),de=We[Dt][ni],de>0&&(ge=(mt*V+Ie)*4,Re+=de,Ze+=de*ie[ge],ut+=de*ie[ge+1],Xe+=de*ie[ge+2],$e+=de*ie[ge+3]))}ge=(ce*J+Ue)*4,xe[ge]=Ze/Re,xe[ge+1]=ut/Re,xe[ge+2]=Xe/Re,xe[ge+3]=$e/Re}return++Ue<J?Z(Ue):Se}var ie=O.imageData.data,Se=O.ctx.createImageData(J,Q),xe=Se.data,le=this.lanczosCreate(this.lanczosLobes),Ee=this.rcpScaleX,me=this.rcpScaleY,Ae=2/this.rcpScaleX,pt=2/this.rcpScaleY,rt=T(Ee*this.lanczosLobes/2),Pt=T(me*this.lanczosLobes/2),We={},be={},Le={};return Z(0)},bilinearFiltering:function(O,V,W,J,Q){var Z,ie,Se,xe,le,Ee,me,Ae,pt,rt,Pt,We,be=0,Le,Ue=this.rcpScaleX,ce=this.rcpScaleY,Ie=4*(V-1),de=O.imageData,ge=de.data,Re=O.ctx.createImageData(J,Q),Ze=Re.data;for(me=0;me<Q;me++)for(Ae=0;Ae<J;Ae++)for(le=_(Ue*Ae),Ee=_(ce*me),pt=Ue*Ae-le,rt=ce*me-Ee,Le=4*(Ee*V+le),Pt=0;Pt<4;Pt++)Z=ge[Le+Pt],ie=ge[Le+4+Pt],Se=ge[Le+Ie+Pt],xe=ge[Le+Ie+4+Pt],We=Z*(1-pt)*(1-rt)+ie*pt*(1-rt)+Se*rt*(1-pt)+xe*pt*rt,Ze[be++]=We;return Re},hermiteFastResize:function(O,V,W,J,Q){for(var Z=this.rcpScaleX,ie=this.rcpScaleY,Se=T(Z/2),xe=T(ie/2),le=O.imageData,Ee=le.data,me=O.ctx.createImageData(J,Q),Ae=me.data,pt=0;pt<Q;pt++)for(var rt=0;rt<J;rt++){for(var Pt=(rt+pt*J)*4,We=0,be=0,Le=0,Ue=0,ce=0,Ie=0,de=0,ge=(pt+.5)*ie,Re=_(pt*ie);Re<(pt+1)*ie;Re++)for(var Ze=w(ge-(Re+.5))/xe,ut=(rt+.5)*Z,Xe=Ze*Ze,$e=_(rt*Z);$e<(rt+1)*Z;$e++){var Dt=w(ut-($e+.5))/Se,ni=v(Xe+Dt*Dt);ni>1&&ni<-1||(We=2*ni*ni*ni-3*ni*ni+1,We>0&&(Dt=4*($e+Re*V),de+=We*Ee[Dt+3],Le+=We,Ee[Dt+3]<255&&(We=We*Ee[Dt+3]/250),Ue+=We*Ee[Dt],ce+=We*Ee[Dt+1],Ie+=We*Ee[Dt+2],be+=We))}Ae[Pt]=Ue/be,Ae[Pt+1]=ce/be,Ae[Pt+2]=Ie/be,Ae[Pt+3]=de/Le}return me},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),c.Image.filters.Resize.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Contrast=_(g.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(v){if(this.contrast!==0){var w=v.imageData,x,T,C=w.data,T=C.length,k=Math.floor(this.contrast*255),M=259*(k+255)/(255*(259-k));for(x=0;x<T;x+=4)C[x]=M*(C[x]-128)+128,C[x+1]=M*(C[x+1]-128)+128,C[x+2]=M*(C[x+2]-128)+128}},getUniformLocations:function(v,w){return{uContrast:v.getUniformLocation(w,"uContrast")}},sendUniformData:function(v,w){v.uniform1f(w.uContrast,this.contrast)}}),c.Image.filters.Contrast.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Saturation=_(g.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(v){if(this.saturation!==0){var w=v.imageData,x=w.data,C=x.length,T=-this.saturation,k,M;for(k=0;k<C;k+=4)M=Math.max(x[k],x[k+1],x[k+2]),x[k]+=M!==x[k]?(M-x[k])*T:0,x[k+1]+=M!==x[k+1]?(M-x[k+1])*T:0,x[k+2]+=M!==x[k+2]?(M-x[k+2])*T:0}},getUniformLocations:function(v,w){return{uSaturation:v.getUniformLocation(w,"uSaturation")}},sendUniformData:function(v,w){v.uniform1f(w.uSaturation,-this.saturation)}}),c.Image.filters.Saturation.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Vibrance=_(g.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(v){if(this.vibrance!==0){var w=v.imageData,x=w.data,C=x.length,T=-this.vibrance,k,M,O,V;for(k=0;k<C;k+=4)M=Math.max(x[k],x[k+1],x[k+2]),O=(x[k]+x[k+1]+x[k+2])/3,V=Math.abs(M-O)*2/255*T,x[k]+=M!==x[k]?(M-x[k])*V:0,x[k+1]+=M!==x[k+1]?(M-x[k+1])*V:0,x[k+2]+=M!==x[k+2]?(M-x[k+2])*V:0}},getUniformLocations:function(v,w){return{uVibrance:v.getUniformLocation(w,"uVibrance")}},sendUniformData:function(v,w){v.uniform1f(w.uVibrance,-this.vibrance)}}),c.Image.filters.Vibrance.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Blur=_(g.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(v){v.webgl?(this.aspectRatio=v.sourceWidth/v.sourceHeight,v.passes++,this._setupFrameBuffer(v),this.horizontal=!0,this.applyToWebGL(v),this._swapTextures(v),this._setupFrameBuffer(v),this.horizontal=!1,this.applyToWebGL(v),this._swapTextures(v)):this.applyTo2d(v)},applyTo2d:function(v){v.imageData=this.simpleBlur(v)},simpleBlur:function(v){var w=v.filterBackend.resources,x,C,T=v.imageData.width,k=v.imageData.height;w.blurLayer1||(w.blurLayer1=c.util.createCanvasElement(),w.blurLayer2=c.util.createCanvasElement()),x=w.blurLayer1,C=w.blurLayer2,(x.width!==T||x.height!==k)&&(C.width=x.width=T,C.height=x.height=k);var M=x.getContext("2d"),O=C.getContext("2d"),V=15,W,J,Q,Z,ie=this.blur*.06*.5;for(M.putImageData(v.imageData,0,0),O.clearRect(0,0,T,k),Z=-V;Z<=V;Z++)W=(Math.random()-.5)/4,J=Z/V,Q=ie*J*T+W,O.globalAlpha=1-Math.abs(J),O.drawImage(x,Q,W),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);for(Z=-V;Z<=V;Z++)W=(Math.random()-.5)/4,J=Z/V,Q=ie*J*k+W,O.globalAlpha=1-Math.abs(J),O.drawImage(x,W,Q),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);v.ctx.drawImage(x,0,0);var Se=v.ctx.getImageData(0,0,x.width,x.height);return M.globalAlpha=1,M.clearRect(0,0,x.width,x.height),Se},getUniformLocations:function(v,w){return{delta:v.getUniformLocation(w,"uDelta")}},sendUniformData:function(v,w){var x=this.chooseRightDelta();v.uniform2fv(w.delta,x)},chooseRightDelta:function(){var v=1,w=[0,0],x;return this.horizontal?this.aspectRatio>1&&(v=1/this.aspectRatio):this.aspectRatio<1&&(v=this.aspectRatio),x=v*this.blur*.12,this.horizontal?w[0]=x:w[1]=x,w}}),g.Blur.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Gamma=_(g.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(v){this.gamma=[1,1,1],g.BaseFilter.prototype.initialize.call(this,v)},applyTo2d:function(v){var w=v.imageData,x=w.data,C=this.gamma,T=x.length,k=1/C[0],M=1/C[1],O=1/C[2],V;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),V=0,T=256;V<T;V++)this.rVals[V]=Math.pow(V/255,k)*255,this.gVals[V]=Math.pow(V/255,M)*255,this.bVals[V]=Math.pow(V/255,O)*255;for(V=0,T=x.length;V<T;V+=4)x[V]=this.rVals[x[V]],x[V+1]=this.gVals[x[V+1]],x[V+2]=this.bVals[x[V+2]]},getUniformLocations:function(v,w){return{uGamma:v.getUniformLocation(w,"uGamma")}},sendUniformData:function(v,w){v.uniform3fv(w.uGamma,this.gamma)}}),c.Image.filters.Gamma.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.Composed=_(g.BaseFilter,{type:"Composed",subFilters:[],initialize:function(v){this.callSuper("initialize",v),this.subFilters=this.subFilters.slice(0)},applyTo:function(v){v.passes+=this.subFilters.length-1,this.subFilters.forEach(function(w){w.applyTo(v)})},toObject:function(){return c.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(v){return v.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(v){return!v.isNeutralState()})}}),c.Image.filters.Composed.fromObject=function(v,w){var x=v.subFilters||[],C=x.map(function(k){return new c.Image.filters[k.type](k)}),T=new c.Image.filters.Composed({subFilters:C});return w&&w(T),T}}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.Image.filters,_=c.util.createClass;g.HueRotation=_(g.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var v=this.rotation*Math.PI,w=c.util.cos(v),x=c.util.sin(v),C=1/3,T=Math.sqrt(C)*x,k=1-w;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=w+k/3,this.matrix[1]=C*k-T,this.matrix[2]=C*k+T,this.matrix[5]=C*k+T,this.matrix[6]=w+C*k,this.matrix[7]=C*k-T,this.matrix[10]=C*k-T,this.matrix[11]=C*k+T,this.matrix[12]=w+C*k},isNeutralState:function(v){return this.calculateMatrix(),g.BaseFilter.prototype.isNeutralState.call(this,v)},applyTo:function(v){this.calculateMatrix(),g.BaseFilter.prototype.applyTo.call(this,v)}}),c.Image.filters.HueRotation.fromObject=c.Image.filters.BaseFilter.fromObject}(i),function(o){var c=o.fabric||(o.fabric={}),g=c.util.object.clone;if(c.Text){c.warn("fabric.Text is already defined");return}var _="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:c.Object.prototype.stateProperties.concat(_),cacheProperties:c.Object.prototype.cacheProperties.concat(_),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(v,w){this.styles=w?w.styles||{}:{},this.text=v,this.__skipDimension=!0,this.callSuper("initialize",w),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var v=this.path;v&&(v.segmentsInfo=c.util.getPathSegmentsInfo(v.path))},getMeasuringContext:function(){return c._measuringContext||(c._measuringContext=this.canvas&&this.canvas.contextCache||c.util.createCanvasElement().getContext("2d")),c._measuringContext},_splitText:function(){var v=this._splitTextIntoLines(this.text);return this.textLines=v.lines,this._textLines=v.graphemeLines,this._unwrappedTextLines=v._unwrappedLines,this._text=v.graphemeText,v},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var v,w,x,C,T,k,M,O=0,V=this._textLines.length;O<V;O++)if(!(this.textAlign!=="justify"&&(O===V-1||this.isEndOfWrapping(O)))&&(C=0,T=this._textLines[O],w=this.getLineWidth(O),w<this.width&&(M=this.textLines[O].match(this._reSpacesAndTabs)))){x=M.length,v=(this.width-w)/x;for(var W=0,J=T.length;W<=J;W++)k=this.__charBounds[O][W],this._reSpaceAndTab.test(T[W])?(k.width+=v,k.kernedWidth+=v,k.left+=C,C+=v):k.left+=C}},isEndOfWrapping:function(v){return v===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var v=this.callSuper("_getCacheCanvasDimensions"),w=this.fontSize;return v.width+=w*v.zoomX,v.height+=w*v.zoomY,v},_render:function(v){var w=this.path;w&&!w.isNotVisible()&&w._render(v),this._setTextStyles(v),this._renderTextLinesBackground(v),this._renderTextDecoration(v,"underline"),this._renderText(v),this._renderTextDecoration(v,"overline"),this._renderTextDecoration(v,"linethrough")},_renderText:function(v){this.paintFirst==="stroke"?(this._renderTextStroke(v),this._renderTextFill(v)):(this._renderTextFill(v),this._renderTextStroke(v))},_setTextStyles:function(v,w,x){if(v.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":v.textBaseline="middle";break;case"ascender":v.textBaseline="top";break;case"descender":v.textBaseline="bottom";break}v.font=this._getFontDeclaration(w,x)},calcTextWidth:function(){for(var v=this.getLineWidth(0),w=1,x=this._textLines.length;w<x;w++){var C=this.getLineWidth(w);C>v&&(v=C)}return v},_renderTextLine:function(v,w,x,C,T,k){this._renderChars(v,w,x,C,T,k)},_renderTextLinesBackground:function(v){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var w,x,C=v.fillStyle,T,k,M=this._getLeftOffset(),O=this._getTopOffset(),V=0,W=0,J,Q,Z=this.path,ie,Se=0,xe=this._textLines.length;Se<xe;Se++){if(w=this.getHeightOfLine(Se),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Se)){O+=w;continue}T=this._textLines[Se],x=this._getLineLeftOffset(Se),W=0,V=0,k=this.getValueOfPropertyAt(Se,0,"textBackgroundColor");for(var le=0,Ee=T.length;le<Ee;le++)J=this.__charBounds[Se][le],Q=this.getValueOfPropertyAt(Se,le,"textBackgroundColor"),Z?(v.save(),v.translate(J.renderLeft,J.renderTop),v.rotate(J.angle),v.fillStyle=Q,Q&&v.fillRect(-J.width/2,-w/this.lineHeight*(1-this._fontSizeFraction),J.width,w/this.lineHeight),v.restore()):Q!==k?(ie=M+x+V,this.direction==="rtl"&&(ie=this.width-ie-W),v.fillStyle=k,k&&v.fillRect(ie,O,W,w/this.lineHeight),V=J.left,W=J.width,k=Q):W+=J.kernedWidth;Q&&!Z&&(ie=M+x+V,this.direction==="rtl"&&(ie=this.width-ie-W),v.fillStyle=Q,v.fillRect(ie,O,W,w/this.lineHeight)),O+=w}v.fillStyle=C,this._removeShadow(v)}},getFontCache:function(v){var w=v.fontFamily.toLowerCase();c.charWidthsCache[w]||(c.charWidthsCache[w]={});var x=c.charWidthsCache[w],C=v.fontStyle.toLowerCase()+"_"+(v.fontWeight+"").toLowerCase();return x[C]||(x[C]={}),x[C]},_measureChar:function(v,w,x,C){var T=this.getFontCache(w),k=this._getFontDeclaration(w),M=this._getFontDeclaration(C),O=x+v,V=k===M,W,J,Q,Z=w.fontSize/this.CACHE_FONT_SIZE,ie;if(x&&T[x]!==void 0&&(Q=T[x]),T[v]!==void 0&&(ie=W=T[v]),V&&T[O]!==void 0&&(J=T[O],ie=J-Q),W===void 0||Q===void 0||J===void 0){var Se=this.getMeasuringContext();this._setTextStyles(Se,w,!0)}return W===void 0&&(ie=W=Se.measureText(v).width,T[v]=W),Q===void 0&&V&&x&&(Q=Se.measureText(x).width,T[x]=Q),V&&J===void 0&&(J=Se.measureText(O).width,T[O]=J,ie=J-Q),{width:W*Z,kernedWidth:ie*Z}},getHeightOfChar:function(v,w){return this.getValueOfPropertyAt(v,w,"fontSize")},measureLine:function(v){var w=this._measureLine(v);return this.charSpacing!==0&&(w.width-=this._getWidthOfCharSpacing()),w.width<0&&(w.width=0),w},_measureLine:function(v){var w=0,x,C,T=this._textLines[v],k,M,O=0,V=new Array(T.length),W=0,J,Q,Z=this.path,ie=this.pathSide==="right";for(this.__charBounds[v]=V,x=0;x<T.length;x++)C=T[x],M=this._getGraphemeBox(C,v,x,k),V[x]=M,w+=M.kernedWidth,k=C;if(V[x]={left:M?M.left+M.width:0,width:0,kernedWidth:0,height:this.fontSize},Z){switch(Q=Z.segmentsInfo[Z.segmentsInfo.length-1].length,J=c.util.getPointOnPath(Z.path,0,Z.segmentsInfo),J.x+=Z.pathOffset.x,J.y+=Z.pathOffset.y,this.textAlign){case"left":W=ie?Q-w:0;break;case"center":W=(Q-w)/2;break;case"right":W=ie?0:Q-w;break}for(W+=this.pathStartOffset*(ie?-1:1),x=ie?T.length-1:0;ie?x>=0:x<T.length;ie?x--:x++)M=V[x],W>Q?W%=Q:W<0&&(W+=Q),this._setGraphemeOnPath(W,M,J),W+=M.kernedWidth}return{width:w,numOfSpaces:O}},_setGraphemeOnPath:function(v,w,x){var C=v+w.kernedWidth/2,T=this.path,k=c.util.getPointOnPath(T.path,C,T.segmentsInfo);w.renderLeft=k.x-x.x,w.renderTop=k.y-x.y,w.angle=k.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(v,w,x,C,T){var k=this.getCompleteStyleDeclaration(w,x),M=C?this.getCompleteStyleDeclaration(w,x-1):{},O=this._measureChar(v,k,C,M),V=O.kernedWidth,W=O.width,J;this.charSpacing!==0&&(J=this._getWidthOfCharSpacing(),W+=J,V+=J);var Q={width:W,left:0,height:k.fontSize,kernedWidth:V,deltaY:k.deltaY};if(x>0&&!T){var Z=this.__charBounds[w][x-1];Q.left=Z.left+Z.width+O.kernedWidth-O.width}return Q},getHeightOfLine:function(v){if(this.__lineHeights[v])return this.__lineHeights[v];for(var w=this._textLines[v],x=this.getHeightOfChar(v,0),C=1,T=w.length;C<T;C++)x=Math.max(this.getHeightOfChar(v,C),x);return this.__lineHeights[v]=x*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var v,w=0,x=0,C=this._textLines.length;x<C;x++)v=this.getHeightOfLine(x),w+=x===C-1?v/this.lineHeight:v;return w},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(v,w){v.save();for(var x=0,C=this._getLeftOffset(),T=this._getTopOffset(),k=0,M=this._textLines.length;k<M;k++){var O=this.getHeightOfLine(k),V=O/this.lineHeight,W=this._getLineLeftOffset(k);this._renderTextLine(w,v,this._textLines[k],C+W,T+x+V,k),x+=O}v.restore()},_renderTextFill:function(v){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(v,"fillText")},_renderTextStroke:function(v){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(v),v.save(),this._setLineDash(v,this.strokeDashArray),v.beginPath(),this._renderTextCommon(v,"strokeText"),v.closePath(),v.restore())},_renderChars:function(v,w,x,C,T,k){var M=this.getHeightOfLine(k),O=this.textAlign.indexOf("justify")!==-1,V,W,J="",Q,Z=0,ie,Se=this.path,xe=!O&&this.charSpacing===0&&this.isEmptyStyles(k)&&!Se,le=this.direction==="ltr",Ee=this.direction==="ltr"?1:-1,me,Ae=w.canvas.getAttribute("dir");if(w.save(),Ae!==this.direction&&(w.canvas.setAttribute("dir",le?"ltr":"rtl"),w.direction=le?"ltr":"rtl",w.textAlign=le?"left":"right"),T-=M*this._fontSizeFraction/this.lineHeight,xe){this._renderChar(v,w,k,0,x.join(""),C,T,M),w.restore();return}for(var pt=0,rt=x.length-1;pt<=rt;pt++)ie=pt===rt||this.charSpacing||Se,J+=x[pt],Q=this.__charBounds[k][pt],Z===0?(C+=Ee*(Q.kernedWidth-Q.width),Z+=Q.width):Z+=Q.kernedWidth,O&&!ie&&this._reSpaceAndTab.test(x[pt])&&(ie=!0),ie||(V=V||this.getCompleteStyleDeclaration(k,pt),W=this.getCompleteStyleDeclaration(k,pt+1),ie=c.util.hasStyleChanged(V,W,!1)),ie&&(Se?(w.save(),w.translate(Q.renderLeft,Q.renderTop),w.rotate(Q.angle),this._renderChar(v,w,k,pt,J,-Z/2,0,M),w.restore()):(me=C,this._renderChar(v,w,k,pt,J,me,T,M)),J="",V=W,C+=Ee*Z,Z=0);w.restore()},_applyPatternGradientTransformText:function(v){var w=c.util.createCanvasElement(),x,C=this.width+this.strokeWidth,T=this.height+this.strokeWidth;return w.width=C,w.height=T,x=w.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(C,0),x.lineTo(C,T),x.lineTo(0,T),x.closePath(),x.translate(C/2,T/2),x.fillStyle=v.toLive(x),this._applyPatternGradientTransform(x,v),x.fill(),x.createPattern(w,"no-repeat")},handleFiller:function(v,w,x){var C,T;return x.toLive?x.gradientUnits==="percentage"||x.gradientTransform||x.patternTransform?(C=-this.width/2,T=-this.height/2,v.translate(C,T),v[w]=this._applyPatternGradientTransformText(x),{offsetX:C,offsetY:T}):(v[w]=x.toLive(v,this),this._applyPatternGradientTransform(v,x)):(v[w]=x,{offsetX:0,offsetY:0})},_setStrokeStyles:function(v,w){return v.lineWidth=w.strokeWidth,v.lineCap=this.strokeLineCap,v.lineDashOffset=this.strokeDashOffset,v.lineJoin=this.strokeLineJoin,v.miterLimit=this.strokeMiterLimit,this.handleFiller(v,"strokeStyle",w.stroke)},_setFillStyles:function(v,w){return this.handleFiller(v,"fillStyle",w.fill)},_renderChar:function(v,w,x,C,T,k,M){var O=this._getStyleDeclaration(x,C),V=this.getCompleteStyleDeclaration(x,C),W=v==="fillText"&&V.fill,J=v==="strokeText"&&V.stroke&&V.strokeWidth,Q,Z;!J&&!W||(w.save(),W&&(Q=this._setFillStyles(w,V)),J&&(Z=this._setStrokeStyles(w,V)),w.font=this._getFontDeclaration(V),O&&O.textBackgroundColor&&this._removeShadow(w),O&&O.deltaY&&(M+=O.deltaY),W&&w.fillText(T,k-Q.offsetX,M-Q.offsetY),J&&w.strokeText(T,k-Z.offsetX,M-Z.offsetY),w.restore())},setSuperscript:function(v,w){return this._setScript(v,w,this.superscript)},setSubscript:function(v,w){return this._setScript(v,w,this.subscript)},_setScript:function(v,w,x){var C=this.get2DCursorLocation(v,!0),T=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"fontSize"),k=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"deltaY"),M={fontSize:T*x.size,deltaY:k+T*x.baseline};return this.setSelectionStyles(M,v,w),this},_getLineLeftOffset:function(v){var w=this.getLineWidth(v),x=this.width-w,C=this.textAlign,T=this.direction,M,k=0,M=this.isEndOfWrapping(v);return C==="justify"||C==="justify-center"&&!M||C==="justify-right"&&!M||C==="justify-left"&&!M?0:(C==="center"&&(k=x/2),C==="right"&&(k=x),C==="justify-center"&&(k=x/2),C==="justify-right"&&(k=x),T==="rtl"&&(k-=x),k)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var v=this._forceClearCache;return v||(v=this.hasStateChanged("_dimensionAffectingProps")),v&&(this.dirty=!0,this._forceClearCache=!1),v},getLineWidth:function(v){if(this.__lineWidths[v]!==void 0)return this.__lineWidths[v];var w=this.measureLine(v),x=w.width;return this.__lineWidths[v]=x,x},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(v,w,x){var C=this._getStyleDeclaration(v,w);return C&&typeof C[x]<"u"?C[x]:this[x]},_renderTextDecoration:function(v,w){if(!(!this[w]&&!this.styleHas(w))){for(var x,C,T,k,M,O,V,W,J=this._getLeftOffset(),Q=this._getTopOffset(),Z,ie,Se,xe,le,Ee,me,Ae,pt=this.path,rt=this._getWidthOfCharSpacing(),Pt=this.offsets[w],We=0,be=this._textLines.length;We<be;We++){if(x=this.getHeightOfLine(We),!this[w]&&!this.styleHas(w,We)){Q+=x;continue}V=this._textLines[We],Ee=x/this.lineHeight,k=this._getLineLeftOffset(We),ie=0,Se=0,W=this.getValueOfPropertyAt(We,0,w),Ae=this.getValueOfPropertyAt(We,0,"fill"),Z=Q+Ee*(1-this._fontSizeFraction),C=this.getHeightOfChar(We,0),M=this.getValueOfPropertyAt(We,0,"deltaY");for(var Le=0,Ue=V.length;Le<Ue;Le++)if(xe=this.__charBounds[We][Le],le=this.getValueOfPropertyAt(We,Le,w),me=this.getValueOfPropertyAt(We,Le,"fill"),T=this.getHeightOfChar(We,Le),O=this.getValueOfPropertyAt(We,Le,"deltaY"),pt&&le&&me)v.save(),v.fillStyle=Ae,v.translate(xe.renderLeft,xe.renderTop),v.rotate(xe.angle),v.fillRect(-xe.kernedWidth/2,Pt*T+O,xe.kernedWidth,this.fontSize/15),v.restore();else if((le!==W||me!==Ae||T!==C||O!==M)&&Se>0){var ce=J+k+ie;this.direction==="rtl"&&(ce=this.width-ce-Se),W&&Ae&&(v.fillStyle=Ae,v.fillRect(ce,Z+Pt*C+M,Se,this.fontSize/15)),ie=xe.left,Se=xe.width,W=le,Ae=me,C=T,M=O}else Se+=xe.kernedWidth;var ce=J+k+ie;this.direction==="rtl"&&(ce=this.width-ce-Se),v.fillStyle=me,le&&me&&v.fillRect(ce,Z+Pt*C+M,Se-rt,this.fontSize/15),Q+=x}this._removeShadow(v)}},_getFontDeclaration:function(v,w){var x=v||this,C=this.fontFamily,T=c.Text.genericFonts.indexOf(C.toLowerCase())>-1,k=C===void 0||C.indexOf("'")>-1||C.indexOf(",")>-1||C.indexOf('"')>-1||T?x.fontFamily:'"'+x.fontFamily+'"';return[c.isLikelyNode?x.fontWeight:x.fontStyle,c.isLikelyNode?x.fontStyle:x.fontWeight,w?this.CACHE_FONT_SIZE+"px":x.fontSize+"px",k].join(" ")},render:function(v){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",v))},_splitTextIntoLines:function(v){for(var w=v.split(this._reNewline),x=new Array(w.length),C=[`
`],T=[],k=0;k<w.length;k++)x[k]=c.util.string.graphemeSplit(w[k]),T=T.concat(x[k],C);return T.pop(),{_unwrappedLines:x,lines:w,graphemeText:T,graphemeLines:x}},toObject:function(v){var w=_.concat(v),x=this.callSuper("toObject",w);return x.styles=c.util.stylesToArray(this.styles,this.text),x.path&&(x.path=this.path.toObject()),x},set:function(v,w){this.callSuper("set",v,w);var x=!1,C=!1;if(typeof v=="object")for(var T in v)T==="path"&&this.setPathInfo(),x=x||this._dimensionAffectingProps.indexOf(T)!==-1,C=C||T==="path";else x=this._dimensionAffectingProps.indexOf(v)!==-1,C=v==="path";return C&&this.setPathInfo(),x&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),c.Text.DEFAULT_SVG_FONT_SIZE=16,c.Text.fromElement=function(v,w,x){if(!v)return w(null);var C=c.parseAttributes(v,c.Text.ATTRIBUTE_NAMES),T=C.textAnchor||"left";if(x=c.util.object.extend(x?g(x):{},C),x.top=x.top||0,x.left=x.left||0,C.textDecoration){var k=C.textDecoration;k.indexOf("underline")!==-1&&(x.underline=!0),k.indexOf("overline")!==-1&&(x.overline=!0),k.indexOf("line-through")!==-1&&(x.linethrough=!0),delete x.textDecoration}"dx"in C&&(x.left+=C.dx),"dy"in C&&(x.top+=C.dy),"fontSize"in x||(x.fontSize=c.Text.DEFAULT_SVG_FONT_SIZE);var M="";"textContent"in v?M=v.textContent:"firstChild"in v&&v.firstChild!==null&&"data"in v.firstChild&&v.firstChild.data!==null&&(M=v.firstChild.data),M=M.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var O=x.strokeWidth;x.strokeWidth=0;var V=new c.Text(M,x),W=V.getScaledHeight()/V.height,J=(V.height+V.strokeWidth)*V.lineHeight-V.height,Q=J*W,Z=V.getScaledHeight()+Q,ie=0;T==="center"&&(ie=V.getScaledWidth()/2),T==="right"&&(ie=V.getScaledWidth()),V.set({left:V.left-ie,top:V.top-(Z-V.fontSize*(.07+V._fontSizeFraction))/V.lineHeight,strokeWidth:typeof O<"u"?O:1}),w(V)},c.Text.fromObject=function(v,w){var x=g(v),C=v.path;return delete x.path,c.Object._fromObject("Text",x,function(T){T.styles=c.util.stylesFromArray(v.styles,v.text),C?c.Object._fromObject("Path",C,function(k){T.set("path",k),w(T)},"path"):w(T)},"text")},c.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],c.util.createAccessors&&c.util.createAccessors(c.Text)}(i),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(o){if(!this.styles||typeof o<"u"&&!this.styles[o])return!0;var c=typeof o>"u"?this.styles:{line:this.styles[o]};for(var g in c)for(var _ in c[g])for(var v in c[g][_])return!1;return!0},styleHas:function(o,c){if(!this.styles||!o||o===""||typeof c<"u"&&!this.styles[c])return!1;var g=typeof c>"u"?this.styles:{0:this.styles[c]};for(var _ in g)for(var v in g[_])if(typeof g[_][v][o]<"u")return!0;return!1},cleanStyle:function(o){if(!this.styles||!o||o==="")return!1;var c=this.styles,g=0,_,v,w=!0,x=0,C;for(var T in c){_=0;for(var k in c[T]){var C=c[T][k],M=C.hasOwnProperty(o);g++,M?(v?C[o]!==v&&(w=!1):v=C[o],C[o]===this[o]&&delete C[o]):w=!1,Object.keys(C).length!==0?_++:delete c[T][k]}_===0&&delete c[T]}for(var O=0;O<this._textLines.length;O++)x+=this._textLines[O].length;w&&g===x&&(this[o]=v,this.removeStyle(o))},removeStyle:function(o){if(!(!this.styles||!o||o==="")){var c=this.styles,g,_,v;for(_ in c){g=c[_];for(v in g)delete g[v][o],Object.keys(g[v]).length===0&&delete g[v];Object.keys(g).length===0&&delete c[_]}}},_extendStyles:function(o,c){var g=this.get2DCursorLocation(o);this._getLineStyle(g.lineIndex)||this._setLineStyle(g.lineIndex),this._getStyleDeclaration(g.lineIndex,g.charIndex)||this._setStyleDeclaration(g.lineIndex,g.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(g.lineIndex,g.charIndex),c)},get2DCursorLocation:function(o,c){typeof o>"u"&&(o=this.selectionStart);for(var g=c?this._unwrappedTextLines:this._textLines,_=g.length,v=0;v<_;v++){if(o<=g[v].length)return{lineIndex:v,charIndex:o};o-=g[v].length+this.missingNewlineOffset(v)}return{lineIndex:v-1,charIndex:g[v-1].length<o?g[v-1].length:o}},getSelectionStyles:function(o,c,g){typeof o>"u"&&(o=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||o);for(var _=[],v=o;v<c;v++)_.push(this.getStyleAtPosition(v,g));return _},getStyleAtPosition:function(o,c){var g=this.get2DCursorLocation(o),_=c?this.getCompleteStyleDeclaration(g.lineIndex,g.charIndex):this._getStyleDeclaration(g.lineIndex,g.charIndex);return _||{}},setSelectionStyles:function(o,c,g){typeof c>"u"&&(c=this.selectionStart||0),typeof g>"u"&&(g=this.selectionEnd||c);for(var _=c;_<g;_++)this._extendStyles(_,o);return this._forceClearCache=!0,this},_getStyleDeclaration:function(o,c){var g=this.styles&&this.styles[o];return g?g[c]:null},getCompleteStyleDeclaration:function(o,c){for(var g=this._getStyleDeclaration(o,c)||{},_={},v,w=0;w<this._styleProperties.length;w++)v=this._styleProperties[w],_[v]=typeof g[v]>"u"?this[v]:g[v];return _},_setStyleDeclaration:function(o,c,g){this.styles[o][c]=g},_deleteStyleDeclaration:function(o,c){delete this.styles[o][c]},_getLineStyle:function(o){return!!this.styles[o]},_setLineStyle:function(o){this.styles[o]={}},_deleteLineStyle:function(o){delete this.styles[o]}})}(),function(){function o(c){c.textDecoration&&(c.textDecoration.indexOf("underline")>-1&&(c.underline=!0),c.textDecoration.indexOf("line-through")>-1&&(c.linethrough=!0),c.textDecoration.indexOf("overline")>-1&&(c.overline=!0),delete c.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(c,g){this.callSuper("initialize",c,g),this.initBehavior()},setSelectionStart:function(c){c=Math.max(c,0),this._updateAndFire("selectionStart",c)},setSelectionEnd:function(c){c=Math.min(c,this.text.length),this._updateAndFire("selectionEnd",c)},_updateAndFire:function(c,g){this[c]!==g&&(this._fireSelectionChanged(),this[c]=g),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(c){this.clearContextTop(),this.callSuper("render",c),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(c){this.callSuper("_render",c)},clearContextTop:function(c){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var g=this.canvas.contextTop,_=this.canvas.viewportTransform;g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this.transform(g),this._clearTextArea(g),c||g.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this._getCursorBoundaries(),g=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(c,g):this.renderSelection(c,g),g.restore()}},_clearTextArea:function(c){var g=this.width+4,_=this.height+4;c.clearRect(-g/2,-_/2,g,_)},_getCursorBoundaries:function(c){typeof c>"u"&&(c=this.selectionStart);var g=this._getLeftOffset(),_=this._getTopOffset(),v=this._getCursorBoundariesOffsets(c);return{left:g,top:_,leftOffset:v.left,topOffset:v.top}},_getCursorBoundariesOffsets:function(c){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var g,_,v,w=0,x=0,C,T=this.get2DCursorLocation(c);v=T.charIndex,_=T.lineIndex;for(var k=0;k<_;k++)w+=this.getHeightOfLine(k);g=this._getLineLeftOffset(_);var M=this.__charBounds[_][v];return M&&(x=M.left),this.charSpacing!==0&&v===this._textLines[_].length&&(x-=this._getWidthOfCharSpacing()),C={top:w,left:g+(x>0?x:0)},this.direction==="rtl"&&(C.left*=-1),this.cursorOffsetCache=C,this.cursorOffsetCache},renderCursor:function(c,g){var _=this.get2DCursorLocation(),v=_.lineIndex,w=_.charIndex>0?_.charIndex-1:0,x=this.getValueOfPropertyAt(v,w,"fontSize"),C=this.scaleX*this.canvas.getZoom(),T=this.cursorWidth/C,k=c.topOffset,M=this.getValueOfPropertyAt(v,w,"deltaY");k+=(1-this._fontSizeFraction)*this.getHeightOfLine(v)/this.lineHeight-x*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(c,g),g.fillStyle=this.cursorColor||this.getValueOfPropertyAt(v,w,"fill"),g.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,g.fillRect(c.left+c.leftOffset-T/2,k+c.top+M,T,x)},renderSelection:function(c,g){for(var _=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,v=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,w=this.textAlign.indexOf("justify")!==-1,x=this.get2DCursorLocation(_),C=this.get2DCursorLocation(v),T=x.lineIndex,k=C.lineIndex,M=x.charIndex<0?0:x.charIndex,O=C.charIndex<0?0:C.charIndex,V=T;V<=k;V++){var W=this._getLineLeftOffset(V)||0,J=this.getHeightOfLine(V),Q=0,Z=0,ie=0;if(V===T&&(Z=this.__charBounds[T][M].left),V>=T&&V<k)ie=w&&!this.isEndOfWrapping(V)?this.width:this.getLineWidth(V)||5;else if(V===k)if(O===0)ie=this.__charBounds[k][O].left;else{var Se=this._getWidthOfCharSpacing();ie=this.__charBounds[k][O-1].left+this.__charBounds[k][O-1].width-Se}Q=J,(this.lineHeight<1||V===k&&this.lineHeight>1)&&(J/=this.lineHeight);var xe=c.left+W+Z,le=ie-Z,Ee=J,me=0;this.inCompositionMode?(g.fillStyle=this.compositionColor||"black",Ee=1,me=J):g.fillStyle=this.selectionColor,this.direction==="rtl"&&(xe=this.width-xe-le),g.fillRect(xe,c.top+c.topOffset+me,le,Ee),c.topOffset+=Q}},getCurrentCharFontSize:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fontSize")},getCurrentCharColor:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fill")},_getCurrentCharIndex:function(){var c=this.get2DCursorLocation(this.selectionStart,!0),g=c.charIndex>0?c.charIndex-1:0;return{l:c.lineIndex,c:g}}}),e.IText.fromObject=function(c,g){var _=e.util.stylesFromArray(c.styles,c.text),v=Object.assign({},c,{styles:_});if(o(v),v.styles)for(var w in v.styles)for(var x in v.styles[w])o(v.styles[w][x]);e.Object._fromObject("IText",v,g,"text")}}(),function(){var o=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var c=this;this.on("added",function(){var g=c.canvas;g&&(g._hasITextHandlers||(g._hasITextHandlers=!0,c._initCanvasHandlers(g)),g._iTextInstances=g._iTextInstances||[],g._iTextInstances.push(c))})},initRemovedHandler:function(){var c=this;this.on("removed",function(){var g=c.canvas;g&&(g._iTextInstances=g._iTextInstances||[],e.util.removeFromArray(g._iTextInstances,c),g._iTextInstances.length===0&&(g._hasITextHandlers=!1,c._removeCanvasHandlers(g)))})},_initCanvasHandlers:function(c){c._mouseUpITextHandler=function(){c._iTextInstances&&c._iTextInstances.forEach(function(g){g.__isMousedown=!1})},c.on("mouse:up",c._mouseUpITextHandler)},_removeCanvasHandlers:function(c){c.off("mouse:up",c._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(c,g,_,v){var w;return w={isAborted:!1,abort:function(){this.isAborted=!0}},c.animate("_currentCursorOpacity",g,{duration:_,onComplete:function(){w.isAborted||c[v]()},onChange:function(){c.canvas&&c.selectionStart===c.selectionEnd&&c.renderCursorOrSelection()},abort:function(){return w.isAborted}}),w},_onTickComplete:function(){var c=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){c._currentTickCompleteState=c._animateCursor(c,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(c){var g=this,_=c?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){g._tick()},_)},abortCursorAnimation:function(){var c=this._currentTickState||this._currentTickCompleteState,g=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,c&&g&&g.clearContext(g.contextTop||g.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(c){var g=0,_=c-1;if(this._reSpace.test(this._text[_]))for(;this._reSpace.test(this._text[_]);)g++,_--;for(;/\S/.test(this._text[_])&&_>-1;)g++,_--;return c-g},findWordBoundaryRight:function(c){var g=0,_=c;if(this._reSpace.test(this._text[_]))for(;this._reSpace.test(this._text[_]);)g++,_++;for(;/\S/.test(this._text[_])&&_<this._text.length;)g++,_++;return c+g},findLineBoundaryLeft:function(c){for(var g=0,_=c-1;!/\n/.test(this._text[_])&&_>-1;)g++,_--;return c-g},findLineBoundaryRight:function(c){for(var g=0,_=c;!/\n/.test(this._text[_])&&_<this._text.length;)g++,_++;return c+g},searchWordBoundary:function(c,g){for(var _=this._text,v=this._reSpace.test(_[c])?c-1:c,w=_[v],x=e.reNonWord;!x.test(w)&&v>0&&v<_.length;)v+=g,w=_[v];return x.test(w)&&(v+=g===1?0:1),v},selectWord:function(c){c=c||this.selectionStart;var g=this.searchWordBoundary(c,-1),_=this.searchWordBoundary(c,1);this.selectionStart=g,this.selectionEnd=_,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(c){c=c||this.selectionStart;var g=this.findLineBoundaryLeft(c),_=this.findLineBoundaryRight(c);return this.selectionStart=g,this.selectionEnd=_,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(c){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(c),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(c){c._iTextInstances&&c._iTextInstances.forEach(function(g){g.selected=!1,g.isEditing&&g.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(c){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var g=this.getSelectionStartFromPointer(c.e),_=this.selectionStart,v=this.selectionEnd;(g!==this.__selectionStartOnMouseDown||_===v)&&(_===g||v===g)||(g>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=g):(this.selectionStart=g,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==_||this.selectionEnd!==v)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(c,g,_){var v=_.slice(0,c),w=e.util.string.graphemeSplit(v).length;if(c===g)return{selectionStart:w,selectionEnd:w};var x=_.slice(c,g),C=e.util.string.graphemeSplit(x).length;return{selectionStart:w,selectionEnd:w+C}},fromGraphemeToStringSelection:function(c,g,_){var v=_.slice(0,c),w=v.join("").length;if(c===g)return{selectionStart:w,selectionEnd:w};var x=_.slice(c,g),C=x.join("").length;return{selectionStart:w,selectionEnd:w+C}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var c=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=c.selectionStart,this.hiddenTextarea.selectionEnd=c.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var c=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=c.selectionEnd,this.inCompositionMode||(this.selectionStart=c.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var c=this._calcTextareaPosition();this.hiddenTextarea.style.left=c.left,this.hiddenTextarea.style.top=c.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var c=this.inCompositionMode?this.compositionStart:this.selectionStart,g=this._getCursorBoundaries(c),_=this.get2DCursorLocation(c),v=_.lineIndex,w=_.charIndex,x=this.getValueOfPropertyAt(v,w,"fontSize")*this.lineHeight,C=g.leftOffset,T=this.calcTransformMatrix(),k={x:g.left+C,y:g.top+g.topOffset+x},M=this.canvas.getRetinaScaling(),O=this.canvas.upperCanvasEl,V=O.width/M,W=O.height/M,J=V-x,Q=W-x,Z=O.clientWidth/V,ie=O.clientHeight/W;return k=e.util.transformPoint(k,T),k=e.util.transformPoint(k,this.canvas.viewportTransform),k.x*=Z,k.y*=ie,k.x<0&&(k.x=0),k.x>J&&(k.x=J),k.y<0&&(k.y=0),k.y>Q&&(k.y=Q),k.x+=this.canvas._offset.left,k.y+=this.canvas._offset.top,{left:k.x+"px",top:k.y+"px",fontSize:x+"px",charHeight:x}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var c=this._textBeforeEdit!==this.text,g=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,g&&(g.blur&&g.blur(),g.parentNode&&g.parentNode.removeChild(g)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),c&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),c&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var c in this.styles)this._textLines[c]||delete this.styles[c]},removeStyleFromTo:function(c,g){var _=this.get2DCursorLocation(c,!0),v=this.get2DCursorLocation(g,!0),w=_.lineIndex,x=_.charIndex,C=v.lineIndex,T=v.charIndex,k,M;if(w!==C){if(this.styles[w])for(k=x;k<this._unwrappedTextLines[w].length;k++)delete this.styles[w][k];if(this.styles[C])for(k=T;k<this._unwrappedTextLines[C].length;k++)M=this.styles[C][k],M&&(this.styles[w]||(this.styles[w]={}),this.styles[w][x+k-T]=M);for(k=w+1;k<=C;k++)delete this.styles[k];this.shiftLineStyles(C,w-C)}else if(this.styles[w]){M=this.styles[w];var O=T-x,V,W;for(k=x;k<T;k++)delete M[k];for(W in this.styles[w])V=parseInt(W,10),V>=T&&(M[V-O]=M[W],delete M[W])}},shiftLineStyles:function(c,g){var _=o(this.styles);for(var v in this.styles){var w=parseInt(v,10);w>c&&(this.styles[w+g]=_[w],_[w-g]||delete this.styles[w])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(c,g,_,v){var w,x={},C=!1,T=this._unwrappedTextLines[c].length===g;_||(_=1),this.shiftLineStyles(c,_),this.styles[c]&&(w=this.styles[c][g===0?g:g-1]);for(var k in this.styles[c]){var M=parseInt(k,10);M>=g&&(C=!0,x[M-g]=this.styles[c][k],T&&g===0||delete this.styles[c][k])}var O=!1;for(C&&!T&&(this.styles[c+_]=x,O=!0),O&&_--;_>0;)v&&v[_-1]?this.styles[c+_]={0:o(v[_-1])}:w?this.styles[c+_]={0:o(w)}:delete this.styles[c+_],_--;this._forceClearCache=!0},insertCharStyleObject:function(c,g,_,v){this.styles||(this.styles={});var w=this.styles[c],x=w?o(w):{};_||(_=1);for(var C in x){var T=parseInt(C,10);T>=g&&(w[T+_]=x[T],x[T-_]||delete w[T])}if(this._forceClearCache=!0,v){for(;_--;)!Object.keys(v[_]).length||(this.styles[c]||(this.styles[c]={}),this.styles[c][g+_]=o(v[_]));return}if(!!w)for(var k=w[g?g-1:1];k&&_--;)this.styles[c][g+_]=o(k)},insertNewStyleBlock:function(c,g,_){for(var v=this.get2DCursorLocation(g,!0),w=[0],x=0,C=0;C<c.length;C++)c[C]===`
`?(x++,w[x]=0):w[x]++;w[0]>0&&(this.insertCharStyleObject(v.lineIndex,v.charIndex,w[0],_),_=_&&_.slice(w[0]+1)),x&&this.insertNewlineStyleObject(v.lineIndex,v.charIndex+w[0],x);for(var C=1;C<x;C++)w[C]>0?this.insertCharStyleObject(v.lineIndex+C,0,w[C],_):_&&this.styles[v.lineIndex+C]&&_[0]&&(this.styles[v.lineIndex+C][0]=_[0]),_=_&&_.slice(w[C]+1);w[C]>0&&this.insertCharStyleObject(v.lineIndex+C,0,w[C],_)},setSelectionStartEndWithShift:function(c,g,_){_<=c?(g===c?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=c),this.selectionStart=_):_>c&&_<g?this._selectionDirection==="right"?this.selectionEnd=_:this.selectionStart=_:(g===c?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=g),this.selectionEnd=_)},setSelectionInBoundaries:function(){var c=this.text.length;this.selectionStart>c?this.selectionStart=c:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>c?this.selectionEnd=c:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(o){if(!!this.canvas){this.__newClickTime=+new Date;var c=o.pointer;this.isTripleClick(c)&&(this.fire("tripleclick",o),this._stopEvent(o.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=c,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(o){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===o.x&&this.__lastPointer.y===o.y},_stopEvent:function(o){o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(o){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(o.e))},tripleClickHandler:function(o){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(o.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(o.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(o){if(this.__isMousedown=!1,!(!this.editable||this.group||o.transform&&o.transform.actionPerformed||o.e.button&&o.e.button!==1)){if(this.canvas){var c=this.canvas._activeObject;if(c&&c!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(o.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(o){var c=this.getSelectionStartFromPointer(o),g=this.selectionStart,_=this.selectionEnd;o.shiftKey?this.setSelectionStartEndWithShift(g,_,c):(this.selectionStart=c,this.selectionEnd=c),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(o){for(var c=this.getLocalPointer(o),g=0,_=0,v=0,w=0,x=0,C,T,k=0,M=this._textLines.length;k<M&&v<=c.y;k++)v+=this.getHeightOfLine(k)*this.scaleY,x=k,k>0&&(w+=this._textLines[k-1].length+this.missingNewlineOffset(k-1));C=this._getLineLeftOffset(x),_=C*this.scaleX,T=this._textLines[x],this.direction==="rtl"&&(c.x=this.width*this.scaleX-c.x+_);for(var O=0,V=T.length;O<V&&(g=_,_+=this.__charBounds[x][O].kernedWidth*this.scaleX,_<=c.x);O++)w++;return this._getNewSelectionStartFromOffset(c,g,_,w,V)},_getNewSelectionStartFromOffset:function(o,c,g,_,v){var w=o.x-c,x=g-o.x,C=x>w||x<0?0:1,T=_+C;return this.flipX&&(T=v-T),T>this._text.length&&(T=this._text.length),T}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var o=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+o.top+"; left: "+o.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+o.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(o){if(!!this.isEditing){var c=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(o.keyCode in c)this[c[o.keyCode]](o);else if(o.keyCode in this.ctrlKeysMapDown&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapDown[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),o.keyCode>=33&&o.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(o){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(o.keyCode in this.ctrlKeysMapUp&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapUp[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(o){var c=this.fromPaste;if(this.fromPaste=!1,o&&o.stopPropagation(),!!this.isEditing){var g=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,_=this._text.length,v=g.length,w,x,C=v-_,T=this.selectionStart,k=this.selectionEnd,M=T!==k,O,V,W;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var J=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),Q=T>J.selectionStart;M?(w=this._text.slice(T,k),C+=k-T):v<_&&(Q?w=this._text.slice(k+C,k):w=this._text.slice(T,T-C)),x=g.slice(J.selectionEnd-C,J.selectionEnd),w&&w.length&&(x.length&&(O=this.getSelectionStyles(T,T+1,!1),O=x.map(function(){return O[0]})),M?(V=T,W=k):Q?(V=k-w.length,W=k):(V=k,W=k+w.length),this.removeStyleFromTo(V,W)),x.length&&(c&&x.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(O=e.copiedTextStyle),this.insertNewStyleBlock(x,T,O)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(o){this.compositionStart=o.target.selectionStart,this.compositionEnd=o.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(o){return o&&o.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(o,c){var g=this._getLineLeftOffset(o),_;return c>0&&(_=this.__charBounds[o][c-1],g+=_.left+_.width),g},getDownCursorOffset:function(o,c){var g=this._getSelectionForOffset(o,c),_=this.get2DCursorLocation(g),v=_.lineIndex;if(v===this._textLines.length-1||o.metaKey||o.keyCode===34)return this._text.length-g;var w=_.charIndex,x=this._getWidthBeforeCursor(v,w),C=this._getIndexOnLine(v+1,x),T=this._textLines[v].slice(w);return T.length+C+1+this.missingNewlineOffset(v)},_getSelectionForOffset:function(o,c){return o.shiftKey&&this.selectionStart!==this.selectionEnd&&c?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(o,c){var g=this._getSelectionForOffset(o,c),_=this.get2DCursorLocation(g),v=_.lineIndex;if(v===0||o.metaKey||o.keyCode===33)return-g;var w=_.charIndex,x=this._getWidthBeforeCursor(v,w),C=this._getIndexOnLine(v-1,x),T=this._textLines[v].slice(0,w),k=this.missingNewlineOffset(v-1);return-this._textLines[v-1].length+C-T.length+(1-k)},_getIndexOnLine:function(o,c){for(var g=this._textLines[o],_=this._getLineLeftOffset(o),v=_,w=0,x,C,T=0,k=g.length;T<k;T++)if(x=this.__charBounds[o][T].width,v+=x,v>c){C=!0;var M=v-x,O=v,V=Math.abs(M-c),W=Math.abs(O-c);w=W<V?T:T-1;break}return C||(w=g.length-1),w},moveCursorDown:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",o)},moveCursorUp:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",o)},_moveCursorUpOrDown:function(o,c){var g="get"+o+"CursorOffset",_=this[g](c,this._selectionDirection==="right");c.shiftKey?this.moveCursorWithShift(_):this.moveCursorWithoutShift(_),_!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(o){var c=this._selectionDirection==="left"?this.selectionStart+o:this.selectionEnd+o;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,c),o!==0},moveCursorWithoutShift:function(o){return o<0?(this.selectionStart+=o,this.selectionEnd=this.selectionStart):(this.selectionEnd+=o,this.selectionStart=this.selectionEnd),o!==0},moveCursorLeft:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",o)},_move:function(o,c,g){var _;if(o.altKey)_=this["findWordBoundary"+g](this[c]);else if(o.metaKey||o.keyCode===35||o.keyCode===36)_=this["findLineBoundary"+g](this[c]);else return this[c]+=g==="Left"?-1:1,!0;if(typeof _<"u"&&this[c]!==_)return this[c]=_,!0},_moveLeft:function(o,c){return this._move(o,c,"Left")},_moveRight:function(o,c){return this._move(o,c,"Right")},moveCursorLeftWithoutShift:function(o){var c=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(c=this._moveLeft(o,"selectionStart")),this.selectionEnd=this.selectionStart,c},moveCursorLeftWithShift:function(o){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(o,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(o,"selectionStart")},moveCursorRight:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",o)},_moveCursorLeftOrRight:function(o,c){var g="moveCursor"+o+"With";this._currentCursorOpacity=1,c.shiftKey?g+="Shift":g+="outShift",this[g](c)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(o){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(o,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(o,"selectionEnd")},moveCursorRightWithoutShift:function(o){var c=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(c=this._moveRight(o,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,c},removeChars:function(o,c){typeof c>"u"&&(c=o+1),this.removeStyleFromTo(o,c),this._text.splice(o,c-o),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(o,c,g,_){typeof _>"u"&&(_=g),_>g&&this.removeStyleFromTo(g,_);var v=e.util.string.graphemeSplit(o);this.insertNewStyleBlock(v,g,c),this._text=[].concat(this._text.slice(0,g),v,this._text.slice(_)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var o=e.util.toFixed,c=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var g=this._getSVGLeftTopOffsets(),_=this._getSVGTextAndBg(g.textTop,g.textLeft);return this._wrapSVGTextAndBg(_)},toSVG:function(g){return this._createBaseSVGMarkup(this._toSVG(),{reviver:g,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(g){var _=!0,v=this.getSvgTextDecoration(this);return[g.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",v?'text-decoration="'+v+'" ':"",'style="',this.getSvgStyles(_),'"',this.addPaintOrder()," >",g.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(g,_){var v=[],w=[],x=g,C;this._setSVGBg(w);for(var T=0,k=this._textLines.length;T<k;T++)C=this._getLineLeftOffset(T),(this.textBackgroundColor||this.styleHas("textBackgroundColor",T))&&this._setSVGTextLineBg(w,T,_+C,x),this._setSVGTextLineText(v,T,_+C,x),x+=this.getHeightOfLine(T);return{textSpans:v,textBgRects:w}},_createTextCharSpan:function(g,_,v,w){var x=g!==g.trim()||g.match(c),C=this.getSvgSpanStyles(_,x),T=C?'style="'+C+'"':"",k=_.deltaY,M="",O=e.Object.NUM_FRACTION_DIGITS;return k&&(M=' dy="'+o(k,O)+'" '),['<tspan x="',o(v,O),'" y="',o(w,O),'" ',M,T,">",e.util.string.escapeXml(g),"</tspan>"].join("")},_setSVGTextLineText:function(g,_,v,w){var x=this.getHeightOfLine(_),C=this.textAlign.indexOf("justify")!==-1,T,k,M="",O,V,W=0,J=this._textLines[_],Q;w+=x*(1-this._fontSizeFraction)/this.lineHeight;for(var Z=0,ie=J.length-1;Z<=ie;Z++)Q=Z===ie||this.charSpacing,M+=J[Z],O=this.__charBounds[_][Z],W===0?(v+=O.kernedWidth-O.width,W+=O.width):W+=O.kernedWidth,C&&!Q&&this._reSpaceAndTab.test(J[Z])&&(Q=!0),Q||(T=T||this.getCompleteStyleDeclaration(_,Z),k=this.getCompleteStyleDeclaration(_,Z+1),Q=e.util.hasStyleChanged(T,k,!0)),Q&&(V=this._getStyleDeclaration(_,Z)||{},g.push(this._createTextCharSpan(M,V,v,w)),M="",T=k,v+=W,W=0)},_pushTextBgRect:function(g,_,v,w,x,C){var T=e.Object.NUM_FRACTION_DIGITS;g.push("		<rect ",this._getFillAttributes(_),' x="',o(v,T),'" y="',o(w,T),'" width="',o(x,T),'" height="',o(C,T),`"></rect>
`)},_setSVGTextLineBg:function(g,_,v,w){for(var x=this._textLines[_],C=this.getHeightOfLine(_)/this.lineHeight,T=0,k=0,M,O,V=this.getValueOfPropertyAt(_,0,"textBackgroundColor"),W=0,J=x.length;W<J;W++)M=this.__charBounds[_][W],O=this.getValueOfPropertyAt(_,W,"textBackgroundColor"),O!==V?(V&&this._pushTextBgRect(g,V,v+k,w,T,C),k=M.left,T=M.width,V=O):T+=M.kernedWidth;O&&this._pushTextBgRect(g,O,v+k,w,T,C)},_getFillAttributes:function(g){var _=g&&typeof g=="string"?new e.Color(g):"";return!_||!_.getSource()||_.getAlpha()===1?'fill="'+g+'"':'opacity="'+_.getAlpha()+'" fill="'+_.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(g){for(var _=0,v=0,w=0;w<g;w++)_+=this.getHeightOfLine(w);return v=this.getHeightOfLine(w),{lineTop:_,offset:(this._fontSizeMult-this._fontSizeFraction)*v/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(g){var _=e.Object.prototype.getSvgStyles.call(this,g);return _+" white-space: pre;"}})}(),function(o){var c=o.fabric||(o.fabric={});c.Textbox=c.util.createClass(c.IText,c.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:c.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(g){for(var _=0,v=0,w=0,x={},C=0;C<g.graphemeLines.length;C++)g.graphemeText[w]===`
`&&C>0?(v=0,w++,_++):!this.splitByGrapheme&&this._reSpaceAndTab.test(g.graphemeText[w])&&C>0&&(v++,w++),x[C]={line:_,offset:v},w+=g.graphemeLines[C].length,v+=g.graphemeLines[C].length;return x},styleHas:function(g,_){if(this._styleMap&&!this.isWrapping){var v=this._styleMap[_];v&&(_=v.line)}return c.Text.prototype.styleHas.call(this,g,_)},isEmptyStyles:function(g){if(!this.styles)return!0;var _=0,v=g+1,w,x,C=!1,T=this._styleMap[g],k=this._styleMap[g+1];T&&(g=T.line,_=T.offset),k&&(v=k.line,C=v===g,w=k.offset),x=typeof g>"u"?this.styles:{line:this.styles[g]};for(var M in x)for(var O in x[M])if(O>=_&&(!C||O<w))for(var V in x[M][O])return!1;return!0},_getStyleDeclaration:function(g,_){if(this._styleMap&&!this.isWrapping){var v=this._styleMap[g];if(!v)return null;g=v.line,_=v.offset+_}return this.callSuper("_getStyleDeclaration",g,_)},_setStyleDeclaration:function(g,_,v){var w=this._styleMap[g];g=w.line,_=w.offset+_,this.styles[g][_]=v},_deleteStyleDeclaration:function(g,_){var v=this._styleMap[g];g=v.line,_=v.offset+_,delete this.styles[g][_]},_getLineStyle:function(g){var _=this._styleMap[g];return!!this.styles[_.line]},_setLineStyle:function(g){var _=this._styleMap[g];this.styles[_.line]={}},_wrapText:function(g,_){var v=[],w;for(this.isWrapping=!0,w=0;w<g.length;w++)v=v.concat(this._wrapLine(g[w],w,_));return this.isWrapping=!1,v},_measureWord:function(g,_,v){var w=0,x,C=!0;v=v||0;for(var T=0,k=g.length;T<k;T++){var M=this._getGraphemeBox(g[T],_,T+v,x,C);w+=M.kernedWidth,x=g[T]}return w},_wrapLine:function(g,_,v,xe){var x=0,C=this.splitByGrapheme,T=[],k=[],M=C?c.util.string.graphemeSplit(g):g.split(this._wordJoiners),O="",V=0,W=C?"":" ",J=0,Q=0,Z=0,ie=!0,Se=this._getWidthOfCharSpacing(),xe=xe||0;M.length===0&&M.push([]),v-=xe;for(var le=0;le<M.length;le++)O=C?M[le]:c.util.string.graphemeSplit(M[le]),J=this._measureWord(O,_,V),V+=O.length,x+=Q+J-Se,x>v&&!ie?(T.push(k),k=[],x=J,ie=!0):x+=Se,!ie&&!C&&k.push(W),k=k.concat(O),Q=C?0:this._measureWord([W],_,V),V++,ie=!1,J>Z&&(Z=J);return le&&T.push(k),Z+xe>this.dynamicMinWidth&&(this.dynamicMinWidth=Z-Se+xe),T},isEndOfWrapping:function(g){return!this._styleMap[g+1]||this._styleMap[g+1].line!==this._styleMap[g].line},missingNewlineOffset:function(g){return this.splitByGrapheme?this.isEndOfWrapping(g)?1:0:1},_splitTextIntoLines:function(g){for(var _=c.Text.prototype._splitTextIntoLines.call(this,g),v=this._wrapText(_.lines,this.width),w=new Array(v.length),x=0;x<v.length;x++)w[x]=v[x].join("");return _.lines=w,_.graphemeLines=v,_},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var g={};for(var _ in this._styleMap)this._textLines[_]&&(g[this._styleMap[_].line]=1);for(var _ in this.styles)g[_]||delete this.styles[_]},toObject:function(g){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(g))}}),c.Textbox.fromObject=function(g,_){var v=c.util.stylesFromArray(g.styles,g.text),w=Object.assign({},g,{styles:v});return c.Object._fromObject("Textbox",w,_,"text")}}(i),function(){var o=e.controlsUtils,c=o.scaleSkewCursorStyleHandler,g=o.scaleCursorStyleHandler,_=o.scalingEqually,v=o.scalingYOrSkewingX,w=o.scalingXOrSkewingY,x=o.scaleOrSkewActionName,C=e.Object.prototype.controls;if(C.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:c,actionHandler:w,getActionName:x}),C.mr=new e.Control({x:.5,y:0,cursorStyleHandler:c,actionHandler:w,getActionName:x}),C.mb=new e.Control({x:0,y:.5,cursorStyleHandler:c,actionHandler:v,getActionName:x}),C.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:c,actionHandler:v,getActionName:x}),C.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:g,actionHandler:_}),C.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:g,actionHandler:_}),C.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:g,actionHandler:_}),C.br=new e.Control({x:.5,y:.5,cursorStyleHandler:g,actionHandler:_}),C.mtr=new e.Control({x:0,y:-.5,actionHandler:o.rotationWithSnapping,cursorStyleHandler:o.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var T=e.Textbox.prototype.controls={};T.mtr=C.mtr,T.tr=C.tr,T.br=C.br,T.tl=C.tl,T.bl=C.bl,T.mt=C.mt,T.mb=C.mb,T.mr=new e.Control({x:.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:c,actionName:"resizing"}),T.ml=new e.Control({x:-.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:c,actionName:"resizing"})}}()})(ig);const Jc={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},nd={in:"in",mm:"mm"},rd={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},od={Landscape:"landscape",Portrait:"portrait"},Kd={72:72,96:96,200:200,300:300,400:400};class _k{generate(e,t=rd.A4,n=300,l=Jc.PNG.toString(),u=nd.mm){this.map=e,this.width=t[0],this.height=t[1],this.dpi=n,this.format=l,this.unit=u;const p=this,o=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return p.dpi/96}});const c=document.createElement("div");c.className="hidden-map",document.body.appendChild(c);const g=document.createElement("div");g.style.width=this.toPixels(this.width),g.style.height=this.toPixels(this.height),c.appendChild(g);const _=this.map.getStyle();if(_&&_.sources){const w=_.sources;Object.keys(w).forEach(x=>{const C=w[x];Object.keys(C).forEach(T=>{C[T]||delete C[T]})})}const v=new tc.exports.Map({container:g,style:_,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});v.once("idle",()=>{var C;const w=v.getCanvas(),x=`map.${p.format}`;switch(p.format){case Jc.PNG:p.toPNG(w,x);break;case Jc.JPEG:p.toJPEG(w,x);break;case Jc.PDF:p.toPDF(v,x);break;case Jc.SVG:p.toSVG(w,x);break;default:console.error(`Invalid file format: ${p.format}`);break}v.remove(),(C=c.parentNode)==null||C.removeChild(c),Object.defineProperty(window,"devicePixelRatio",{get(){return o}})})}toPNG(e,t){e.toBlob(n=>{sw.exports.saveAs(n,t)})}toJPEG(e,t){const n=e.toDataURL("image/jpeg",.85),l=document.createElement("a");l.href=n,l.download=t,l.click(),l.remove()}toPDF(e,t){const n=e.getCanvas(),l=new Br({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});l.addImage(n.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:p}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${u}, ${p}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(t)}toSVG(e,t){const n=e.toDataURL("image/png");ig.fabric.Image.fromURL(n,l=>{const u=new ig.fabric.Canvas("canvas"),p=Number(this.toPixels(this.width,this.dpi).replace("px","")),o=Number(this.toPixels(this.height,this.dpi).replace("px",""));l.scaleToWidth(p),l.scaleToHeight(o),u.add(l);const c=u.toSVG({x:0,y:0,width:p,height:o,viewBox:{x:0,y:0,width:p,height:o}}),g=document.createElement("a");g.href=`data:application/xml,${encodeURIComponent(c)}`,g.download=t,g.click(),g.remove()})}toPixels(e,t=96){return this.unit===nd.mm&&(t/=25.4),`${t*e}px`}toBlob(e){const t=atob(e.replace(/^.*,/,"")),n=new Uint8Array(t.length);for(let u=0;u<t.length;u+=1)n[u]=t.charCodeAt(u);return new Blob([n.buffer],{type:"image/png"})}}const vk=Object.freeze(Object.defineProperty({__proto__:null,Format:Jc,Unit:nd,Size:rd,PageOrientation:od,DPI:Kd,default:_k},Symbol.toStringTag,{value:"Module"}));class bk{constructor(e){var p,o,c;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const t=(p=this.map)==null?void 0:p.getCanvas().clientWidth,n=(o=this.map)==null?void 0:o.getCanvas().clientHeight,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.style.position="absolute",l.style.top="0px",l.style.left="0px",l.setAttribute("width",`${t}px`),l.setAttribute("height",`${n}px`);const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("style","fill:#888888;stroke-width:0"),u.setAttribute("fill-opacity","0.5"),l.append(u),(c=this.map)==null||c.getCanvasContainer().appendChild(l),this.svgCanvas=l,this.svgPath=u}mapResize(){this.generateCutOut()}updateArea(e,t){this.width=e,this.height=t,this.unit=nd.mm,this.generateCutOut()}generateCutOut(){var g,_;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const e=this.toPixels(this.width),t=this.toPixels(this.height),n=(g=this.map)==null?void 0:g.getCanvas().clientWidth,l=(_=this.map)==null?void 0:_.getCanvas().clientHeight,u=n/2-e/2,p=u+e,o=l/2-t/2,c=o+t;this.svgCanvas.setAttribute("width",`${n}px`),this.svgCanvas.setAttribute("height",`${l}px`),this.svgPath.setAttribute("d",`M 0 0 L ${n} 0 L ${n} ${l} L 0 ${l} M ${u} ${o} L ${u} ${c} L ${p} ${c} L ${p} ${o}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e,t=96){return this.unit===nd.mm&&(t/=25.4),t*e}}const Fu=Sl(null),Jd=Sl(null),Td=Sl(null),Zm=Sl(null),Ld=Sl(null),Pd=Sl("Measure"),ng=Sl([]);function hv(i,e,t){const n=i.slice();return n[21]=e[t],n}function fv(i,e,t){const n=i.slice();return n[21]=e[t],n}function dv(i,e,t){const n=i.slice();return n[21]=e[t],n}function pv(i,e,t){const n=i.slice();return n[21]=e[t],n}function wk(i){let e;return{c(){e=gn("print")},l(t){e=yn(t,"print")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function xk(i){let e;return{c(){e=gn("Export")},l(t){e=yn(t,"Export")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Ak(i){let e=i[21]+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function mv(i){let e,t;return e=new sd({props:{value:rd[i[21]],$$slots:{default:[Ak]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Sk(i){let e,t,n=Object.keys(rd),l=[];for(let p=0;p<n.length;p+=1)l[p]=mv(pv(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&0){n=Object.keys(rd);let c;for(c=0;c<n.length;c+=1){const g=pv(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=mv(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function kk(i){let e;return{c(){e=gn("description")},l(t){e=yn(t,"description")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Ck(i){let e,t;return e=new R1({props:{class:"material-icons",slot:"leadingIcon",$$slots:{default:[kk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Ek(i){let e=i[21]+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function gv(i){let e,t;return e=new sd({props:{value:od[i[21]],$$slots:{default:[Ek]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Ik(i){let e,t,n=Object.keys(od),l=[];for(let p=0;p<n.length;p+=1)l[p]=gv(dv(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&0){n=Object.keys(od);let c;for(c=0;c<n.length;c+=1){const g=dv(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=gv(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function Tk(i){let e;return{c(){e=gn("screen_rotation")},l(t){e=yn(t,"screen_rotation")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Lk(i){let e,t;return e=new R1({props:{class:"material-icons",slot:"leadingIcon",$$slots:{default:[Tk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Pk(i){let e=i[21]+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function yv(i){let e,t;return e=new sd({props:{value:Jc[i[21]],$$slots:{default:[Pk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Mk(i){let e,t,n=Object.keys(Jc),l=[];for(let p=0;p<n.length;p+=1)l[p]=yv(fv(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&0){n=Object.keys(Jc);let c;for(c=0;c<n.length;c+=1){const g=fv(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=yv(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function Dk(i){let e;return{c(){e=gn("picture_as_pdf")},l(t){e=yn(t,"picture_as_pdf")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Ok(i){let e,t;return e=new R1({props:{class:"material-icons",slot:"leadingIcon",$$slots:{default:[Dk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Fk(i){let e=i[21]+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function _v(i){let e,t;return e=new sd({props:{value:Kd[i[21]],$$slots:{default:[Fk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Rk(i){let e,t,n=Object.keys(Kd),l=[];for(let p=0;p<n.length;p+=1)l[p]=_v(hv(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&0){n=Object.keys(Kd);let c;for(c=0;c<n.length;c+=1){const g=hv(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=_v(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function Bk(i){let e;return{c(){e=gn("high_quality")},l(t){e=yn(t,"high_quality")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function zk(i){let e,t;return e=new R1({props:{class:"material-icons",slot:"leadingIcon",$$slots:{default:[Bk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Nk(i){let e,t,n,l,u,p,o,c,g,_,v,w,x;function C(Q){i[8](Q)}let T={label:"Paper Size",$$slots:{leadingIcon:[Ck],default:[Sk]},$$scope:{ctx:i}};i[0]!==void 0&&(T.value=i[0]),t=new z0({props:T}),pn.push(()=>To(t,"value",C));function k(Q){i[9](Q)}let M={label:"Page Orientation",$$slots:{leadingIcon:[Lk],default:[Ik]},$$scope:{ctx:i}};i[1]!==void 0&&(M.value=i[1]),u=new z0({props:M}),pn.push(()=>To(u,"value",k));function O(Q){i[10](Q)}let V={label:"Format",$$slots:{leadingIcon:[Ok],default:[Mk]},$$scope:{ctx:i}};i[4]!==void 0&&(V.value=i[4]),c=new z0({props:V}),pn.push(()=>To(c,"value",O));function W(Q){i[11](Q)}let J={label:"DPI",$$slots:{leadingIcon:[zk],default:[Rk]},$$scope:{ctx:i}};return i[3]!==void 0&&(J.value=i[3]),v=new z0({props:J}),pn.push(()=>To(v,"value",W)),{c(){e=Li("div"),xi(t.$$.fragment),l=$i(),xi(u.$$.fragment),o=$i(),xi(c.$$.fragment),_=$i(),xi(v.$$.fragment),this.h()},l(Q){e=Pi(Q,"DIV",{style:!0});var Z=Ti(e);Ci(t.$$.fragment,Z),l=en(Z),Ci(u.$$.fragment,Z),o=en(Z),Ci(c.$$.fragment,Z),_=en(Z),Ci(v.$$.fragment,Z),Z.forEach(Oe),this.h()},h(){Ia(e,"margin","1em"),Ia(e,"display","flex"),Ia(e,"flex-direction","column"),Ia(e,"align-items","flex-end")},m(Q,Z){wt(Q,e,Z),Ai(t,e,null),Xi(e,l),Ai(u,e,null),Xi(e,o),Ai(c,e,null),Xi(e,_),Ai(v,e,null),x=!0},p(Q,Z){const ie={};Z&1073741824&&(ie.$$scope={dirty:Z,ctx:Q}),!n&&Z&1&&(n=!0,ie.value=Q[0],Lo(()=>n=!1)),t.$set(ie);const Se={};Z&1073741824&&(Se.$$scope={dirty:Z,ctx:Q}),!p&&Z&2&&(p=!0,Se.value=Q[1],Lo(()=>p=!1)),u.$set(Se);const xe={};Z&1073741824&&(xe.$$scope={dirty:Z,ctx:Q}),!g&&Z&16&&(g=!0,xe.value=Q[4],Lo(()=>g=!1)),c.$set(xe);const le={};Z&1073741824&&(le.$$scope={dirty:Z,ctx:Q}),!w&&Z&8&&(w=!0,le.value=Q[3],Lo(()=>w=!1)),v.$set(le)},i(Q){x||(tt(t.$$.fragment,Q),tt(u.$$.fragment,Q),tt(c.$$.fragment,Q),tt(v.$$.fragment,Q),x=!0)},o(Q){ct(t.$$.fragment,Q),ct(u.$$.fragment,Q),ct(c.$$.fragment,Q),ct(v.$$.fragment,Q),x=!1},d(Q){Q&&Oe(e),Si(t),Si(u),Si(c),Si(v)}}}function jk(i){let e;return{c(){e=gn("cancel")},l(t){e=yn(t,"cancel")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Uk(i){let e;return{c(){e=gn("Cancel")},l(t){e=yn(t,"Cancel")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Vk(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[jk]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[Uk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&1073741824&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&1073741824&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function qk(i){let e,t;return e=new Ru({props:{style:"margin-top: 1em;",variant:"raised",$$slots:{default:[Vk]},$$scope:{ctx:i}}}),e.$on("click",i[12]),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Hk(i){let e;return{c(){e=gn("file_download")},l(t){e=yn(t,"file_download")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Gk(i){let e;return{c(){e=gn("Export")},l(t){e=yn(t,"Export")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Wk(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[Hk]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[Gk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&1073741824&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&1073741824&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function Xk(i){let e,t;return e=new Ru({props:{style:"margin-top: 1em;",variant:"raised",$$slots:{default:[Wk]},$$scope:{ctx:i}}}),e.$on("click",i[13]),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&1073741824&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function Yk(i){let e,t,n,l,u,p,o,c,g;return e=new U4({props:{id:"mandatory-title",$$slots:{default:[xk]},$$scope:{ctx:i}}}),n=new V4({props:{id:"mandatory-content",$$slots:{default:[Nk]},$$scope:{ctx:i}}}),p=new H2({props:{$$slots:{default:[qk]},$$scope:{ctx:i}}}),c=new H2({props:{$$slots:{default:[Xk]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment),l=$i(),u=Li("div"),xi(p.$$.fragment),o=$i(),xi(c.$$.fragment),this.h()},l(_){Ci(e.$$.fragment,_),t=en(_),Ci(n.$$.fragment,_),l=en(_),u=Pi(_,"DIV",{style:!0});var v=Ti(u);Ci(p.$$.fragment,v),o=en(v),Ci(c.$$.fragment,v),v.forEach(Oe),this.h()},h(){Ia(u,"margin","1em"),Ia(u,"display","flex"),Ia(u,"flex-direction","row"),Ia(u,"align-items","flex-end")},m(_,v){Ai(e,_,v),wt(_,t,v),Ai(n,_,v),wt(_,l,v),wt(_,u,v),Ai(p,u,null),Xi(u,o),Ai(c,u,null),g=!0},p(_,v){const w={};v&1073741824&&(w.$$scope={dirty:v,ctx:_}),e.$set(w);const x={};v&1073741851&&(x.$$scope={dirty:v,ctx:_}),n.$set(x);const C={};v&1073741824&&(C.$$scope={dirty:v,ctx:_}),p.$set(C);const T={};v&1073741824&&(T.$$scope={dirty:v,ctx:_}),c.$set(T)},i(_){g||(tt(e.$$.fragment,_),tt(n.$$.fragment,_),tt(p.$$.fragment,_),tt(c.$$.fragment,_),g=!0)},o(_){ct(e.$$.fragment,_),ct(n.$$.fragment,_),ct(p.$$.fragment,_),ct(c.$$.fragment,_),g=!1},d(_){Si(e,_),_&&Oe(t),Si(n,_),_&&Oe(l),_&&Oe(u),Si(p),Si(c)}}}function Zk(i){let e,t,n,l,u;e=new Rh({props:{class:"material-icons","aria-label":"Print",$$slots:{default:[wk]},$$scope:{ctx:i}}}),e.$on("click",i[6]);function p(c){i[14](c)}let o={"aria-labelledby":"mandatory-title","aria-describedby":"mandatory-content",$$slots:{default:[Yk]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.open=i[2]),n=new j4({props:o}),pn.push(()=>To(n,"open",p)),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(c){Ci(e.$$.fragment,c),t=en(c),Ci(n.$$.fragment,c)},m(c,g){Ai(e,c,g),wt(c,t,g),Ai(n,c,g),u=!0},p(c,[g]){const _={};g&1073741824&&(_.$$scope={dirty:g,ctx:c}),e.$set(_);const v={};g&1073741851&&(v.$$scope={dirty:g,ctx:c}),!l&&g&4&&(l=!0,v.open=c[2],Lo(()=>l=!1)),n.$set(v)},i(c){u||(tt(e.$$.fragment,c),tt(n.$$.fragment,c),u=!0)},o(c){ct(e.$$.fragment,c),ct(n.$$.fragment,c),u=!1},d(c){Si(e,c),c&&Oe(t),Si(n,c)}}}function Kk(i,e,t){let n;Vo(i,Fu,ie=>t(17,n=ie));let l,u,p=rd.A4,o=Kd[96],c=Jc.PNG,g=od.Landscape,_=!1;ws(async()=>{const{default:ie}=await v1(()=>Promise.resolve().then(()=>vk),void 0,import.meta.url);l=new ie});const v=()=>{let ie=[p[0],p[1]];return g!==od.Landscape&&(ie=ie.reverse()),ie},w=()=>{const ie=v();l.generate(n,ie,o,c,nd.mm),C(!1),t(2,_=!1)},x=()=>{t(2,_=!0),C(!0)},C=ie=>{ie===!1?u!==void 0&&(u.destroy(),u=void 0):(u=new bk(n),T())},T=()=>{if(u===void 0)return;const ie=v();u.updateArea(ie[0],ie[1])},k=()=>{C(!1),t(2,_=!1)};function M(ie){p=ie,t(0,p)}function O(ie){g=ie,t(1,g)}function V(ie){c=ie,t(4,c)}function W(ie){o=ie,t(3,o)}const J=()=>{k()},Q=()=>{w()};function Z(ie){_=ie,t(2,_)}return i.$$.update=()=>{i.$$.dirty&1&&T(),i.$$.dirty&2&&T(),i.$$.dirty&4&&(_||C(!1))},[p,g,_,o,c,w,x,k,M,O,V,W,J,Q,Z]}class Jk extends fr{constructor(e){super(),dr(this,e,Kk,Zk,hr,{})}}const Qk=async i=>{if("clipboard"in navigator)await navigator.clipboard.writeText(i);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=i,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},$k=(i,e)=>{async function t(){if(e)try{await Qk(e),i.dispatchEvent(new CustomEvent("svelte-copy",{detail:e}))}catch(n){i.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:n}))}}return i.addEventListener("click",t,!0),{update:n=>e=n,destroy:()=>i.removeEventListener("click",t,!0)}};function eC(i){let e;return{c(){e=gn("share")},l(t){e=yn(t,"share")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function tC(i){let e;return{c(){e=gn("URL to share")},l(t){e=yn(t,"URL to share")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function iC(i){let e;return{c(){e=gn("content_copy")},l(t){e=yn(t,"content_copy")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function nC(i){let e;return{c(){e=gn(i[1])},l(t){e=yn(t,i[1])},m(t,n){wt(t,e,n)},p(t,n){n&2&&bs(e,t[1])},d(t){t&&Oe(e)}}}function rC(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[iC]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[nC]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&4096&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&4098&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function oC(i){let e,t,n,l,u,p,o,c,g;return u=new Ru({props:{style:"margin-left: 0.5em;width:100px;",variant:"raised",$$slots:{default:[rC]},$$scope:{ctx:i}}}),u.$on("click",i[3]),{c(){e=Li("div"),t=Li("input"),n=$i(),l=Li("div"),xi(u.$$.fragment),this.h()},l(_){e=Pi(_,"DIV",{class:!0});var v=Ti(e);t=Pi(v,"INPUT",{class:!0,type:!0,placeholder:!0}),n=en(v),l=Pi(v,"DIV",{});var w=Ti(l);Ci(u.$$.fragment,w),w.forEach(Oe),v.forEach(Oe),this.h()},h(){hi(t,"class","input copy-text svelte-1e1qrwu"),hi(t,"type","text"),hi(t,"placeholder","URL to share"),t.readOnly=!0,hi(e,"class","copy-control svelte-1e1qrwu")},m(_,v){wt(_,e,v),Xi(e,t),td(t,i[2]),Xi(e,n),Xi(e,l),Ai(u,l,null),o=!0,c||(g=[Vn(t,"input",i[5]),Gn(p=$k.call(null,l,i[2]))],c=!0)},p(_,v){v&4&&t.value!==_[2]&&td(t,_[2]);const w={};v&4098&&(w.$$scope={dirty:v,ctx:_}),u.$set(w),p&&Zr(p.update)&&v&4&&p.update.call(null,_[2])},i(_){o||(tt(u.$$.fragment,_),o=!0)},o(_){ct(u.$$.fragment,_),o=!1},d(_){_&&Oe(e),Si(u),c=!1,bo(g)}}}function sC(i){let e;return{c(){e=gn("cancel")},l(t){e=yn(t,"cancel")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function aC(i){let e;return{c(){e=gn("Cancel")},l(t){e=yn(t,"Cancel")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function lC(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[sC]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[aC]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&4096&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&4096&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function uC(i){let e,t;return e=new Ru({props:{style:"margin-top: 1em;",variant:"raised",$$slots:{default:[lC]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&4096&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function cC(i){let e,t,n,l,u,p,o;return e=new U4({props:{id:"mandatory-title",$$slots:{default:[tC]},$$scope:{ctx:i}}}),n=new V4({props:{id:"mandatory-content",$$slots:{default:[oC]},$$scope:{ctx:i}}}),p=new H2({props:{$$slots:{default:[uC]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment),l=$i(),u=Li("div"),xi(p.$$.fragment)},l(c){Ci(e.$$.fragment,c),t=en(c),Ci(n.$$.fragment,c),l=en(c),u=Pi(c,"DIV",{});var g=Ti(u);Ci(p.$$.fragment,g),g.forEach(Oe)},m(c,g){Ai(e,c,g),wt(c,t,g),Ai(n,c,g),wt(c,l,g),wt(c,u,g),Ai(p,u,null),o=!0},p(c,g){const _={};g&4096&&(_.$$scope={dirty:g,ctx:c}),e.$set(_);const v={};g&4102&&(v.$$scope={dirty:g,ctx:c}),n.$set(v);const w={};g&4097&&(w.$$scope={dirty:g,ctx:c}),p.$set(w)},i(c){o||(tt(e.$$.fragment,c),tt(n.$$.fragment,c),tt(p.$$.fragment,c),o=!0)},o(c){ct(e.$$.fragment,c),ct(n.$$.fragment,c),ct(p.$$.fragment,c),o=!1},d(c){Si(e,c),c&&Oe(t),Si(n,c),c&&Oe(l),c&&Oe(u),Si(p)}}}function hC(i){let e,t,n,l,u;e=new Rh({props:{class:"material-icons","aria-label":"Share",$$slots:{default:[eC]},$$scope:{ctx:i}}}),e.$on("click",i[4]);function p(c){i[7](c)}let o={"aria-labelledby":"mandatory-title","aria-describedby":"mandatory-content",$$slots:{default:[cC]},$$scope:{ctx:i}};return i[0]!==void 0&&(o.open=i[0]),n=new j4({props:o}),pn.push(()=>To(n,"open",p)),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(c){Ci(e.$$.fragment,c),t=en(c),Ci(n.$$.fragment,c)},m(c,g){Ai(e,c,g),wt(c,t,g),Ai(n,c,g),u=!0},p(c,[g]){const _={};g&4096&&(_.$$scope={dirty:g,ctx:c}),e.$set(_);const v={};g&4103&&(v.$$scope={dirty:g,ctx:c}),!l&&g&1&&(l=!0,v.open=c[0],Lo(()=>l=!1)),n.$set(v)},i(c){u||(tt(e.$$.fragment,c),tt(n.$$.fragment,c),u=!0)},o(c){ct(e.$$.fragment,c),ct(n.$$.fragment,c),u=!1},d(c){Si(e,c),c&&Oe(t),Si(n,c)}}}function fC(i,e,t){let n,l,u,p;Vo(i,Jd,T=>t(8,l=T)),Vo(i,Fu,T=>t(9,u=T)),Vo(i,Gx,T=>t(10,p=T));let o,c="Copy";const g=()=>{t(1,c="copied"),setTimeout(()=>{t(1,c="Copy")},2e3)},_=()=>{if(!u)return;const T=`${p.url.protocol}//${p.url.host}`,k=`#${u.getZoom().toFixed(2)}`,M=`/${u.getCenter().lat.toFixed(6)}`,O=`/${u.getCenter().lng.toFixed(6)}`,V=u.getBearing()!==0?`/${u.getBearing().toFixed(1)}`:"",W=u.getPitch()!==0?`/${u.getPitch().toFixed()}`:"",J=`/?style=${l.title}`;return t(2,n=`${T}${J}${k}${M}${O}${V}${W}`),n},v=()=>t(0,o=!0);function w(){n=this.value,t(2,n)}const x=()=>{t(0,o=!1)};function C(T){o=T,t(0,o)}return i.$$.update=()=>{i.$$.dirty&1&&o===!0&&_()},t(2,n=_()),[o,c,n,g,v,w,x,C]}class dC extends fr{constructor(e){super(),dr(this,e,fC,hC,hr,{})}}function pC(i){let e;return{c(){e=Li("link"),this.h()},l(t){e=Pi(t,"LINK",{rel:!0,href:!0}),this.h()},h(){hi(e,"rel","stylesheet"),hi(e,"href",kr.basePath+"/smui.css")},m(t,n){wt(t,e,n)},p:Co,d(t){t&&Oe(e)}}}function mC(i){let e,t,n;return{c(){e=Li("link"),t=$i(),n=Li("link"),this.h()},l(l){e=Pi(l,"LINK",{rel:!0,href:!0,media:!0}),t=en(l),n=Pi(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){hi(e,"rel","stylesheet"),hi(e,"href",kr.basePath+"/smui.css"),hi(e,"media","print"),hi(n,"rel","stylesheet"),hi(n,"href",kr.basePath+"/smui-dark.css"),hi(n,"media","screen")},m(l,u){wt(l,e,u),wt(l,t,u),wt(l,n,u)},p:Co,d(l){l&&Oe(e),l&&Oe(t),l&&Oe(n)}}}function gC(i){let e,t,n;return{c(){e=Li("link"),t=$i(),n=Li("link"),this.h()},l(l){e=Pi(l,"LINK",{rel:!0,href:!0,media:!0}),t=en(l),n=Pi(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){hi(e,"rel","stylesheet"),hi(e,"href",kr.basePath+"/smui.css"),hi(e,"media","(prefers-color-scheme: light)"),hi(n,"rel","stylesheet"),hi(n,"href",kr.basePath+"/smui-dark.css"),hi(n,"media","screen and (prefers-color-scheme: dark)")},m(l,u){wt(l,e,u),wt(l,t,u),wt(l,n,u)},p:Co,d(l){l&&Oe(e),l&&Oe(t),l&&Oe(n)}}}function yC(i){let e;return{c(){e=gn("close")},l(t){e=yn(t,"close")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function _C(i){let e;return{c(){e=gn("menu")},l(t){e=yn(t,"menu")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function vC(i){let e;function t(u,p){return u[0]?yC:_C}let n=t(i),l=n(i);return{c(){l.c(),e=hn()},l(u){l.l(u),e=hn()},m(u,p){l.m(u,p),wt(u,e,p)},p(u,p){n!==(n=t(u))&&(l.d(1),l=n(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function bC(i){let e=kr.title+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function wC(i){let e,t,n,l,u,p,o,c;return e=new Rh({props:{class:"material-icons",$$slots:{default:[vC]},$$scope:{ctx:i}}}),e.$on("click",i[6]),o=new u8({props:{$$slots:{default:[bC]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),n=Li("a"),l=Li("img"),p=$i(),xi(o.$$.fragment),this.h()},l(g){Ci(e.$$.fragment,g),t=en(g),n=Pi(g,"A",{href:!0});var _=Ti(n);l=Pi(_,"IMG",{src:!0,alt:!0,class:!0}),_.forEach(Oe),p=en(g),Ci(o.$$.fragment,g),this.h()},h(){C4(l.src,u=kr.logo)||hi(l,"src",u),hi(l,"alt","logo"),hi(l,"class","logo svelte-1cnjkz4"),hi(n,"href",kr.url)},m(g,_){Ai(e,g,_),wt(g,t,_),wt(g,n,_),Xi(n,l),wt(g,p,_),Ai(o,g,_),c=!0},p(g,_){const v={};_&257&&(v.$$scope={dirty:_,ctx:g}),e.$set(v);const w={};_&256&&(w.$$scope={dirty:_,ctx:g}),o.$set(w)},i(g){c||(tt(e.$$.fragment,g),tt(o.$$.fragment,g),c=!0)},o(g){ct(e.$$.fragment,g),ct(o.$$.fragment,g),c=!1},d(g){Si(e,g),g&&Oe(t),g&&Oe(n),g&&Oe(p),Si(o,g)}}}function xC(i){let e;return{c(){e=gn(i[3])},l(t){e=yn(t,i[3])},m(t,n){wt(t,e,n)},p(t,n){n&8&&bs(e,t[3])},d(t){t&&Oe(e)}}}function AC(i){let e,t,n,l,u,p;return e=new dC({}),n=new Jk({}),u=new Rh({props:{"aria-label":i[4],class:"material-icons",title:i[4],$$slots:{default:[xC]},$$scope:{ctx:i}}}),u.$on("click",i[5]),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment),l=$i(),xi(u.$$.fragment)},l(o){Ci(e.$$.fragment,o),t=en(o),Ci(n.$$.fragment,o),l=en(o),Ci(u.$$.fragment,o)},m(o,c){Ai(e,o,c),wt(o,t,c),Ai(n,o,c),wt(o,l,c),Ai(u,o,c),p=!0},p(o,c){const g={};c&16&&(g["aria-label"]=o[4]),c&16&&(g.title=o[4]),c&264&&(g.$$scope={dirty:c,ctx:o}),u.$set(g)},i(o){p||(tt(e.$$.fragment,o),tt(n.$$.fragment,o),tt(u.$$.fragment,o),p=!0)},o(o){ct(e.$$.fragment,o),ct(n.$$.fragment,o),ct(u.$$.fragment,o),p=!1},d(o){Si(e,o),o&&Oe(t),Si(n,o),o&&Oe(l),Si(u,o)}}}function SC(i){let e,t,n,l,u,p;return e=new d_({props:{$$slots:{default:[wC]},$$scope:{ctx:i}}}),u=new d_({props:{align:"end",toolbar:!0,$$slots:{default:[AC]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),n=Li("section"),l=$i(),xi(u.$$.fragment)},l(o){Ci(e.$$.fragment,o),t=en(o),n=Pi(o,"SECTION",{}),Ti(n).forEach(Oe),l=en(o),Ci(u.$$.fragment,o)},m(o,c){Ai(e,o,c),wt(o,t,c),wt(o,n,c),wt(o,l,c),Ai(u,o,c),p=!0},p(o,c){const g={};c&257&&(g.$$scope={dirty:c,ctx:o}),e.$set(g);const _={};c&280&&(_.$$scope={dirty:c,ctx:o}),u.$set(_)},i(o){p||(tt(e.$$.fragment,o),tt(u.$$.fragment,o),p=!0)},o(o){ct(e.$$.fragment,o),ct(u.$$.fragment,o),p=!1},d(o){Si(e,o),o&&Oe(t),o&&Oe(n),o&&Oe(l),Si(u,o)}}}function kC(i){let e,t;return e=new o8({props:{$$slots:{default:[SC]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&281&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function CC(i){let e,t,n,l,u,p;function o(v,w){return v[1]===void 0?gC:v[1]?mC:pC}let c=o(i),g=c(i),_={variant:"fixed",$$slots:{default:[kC]},$$scope:{ctx:i}};return n=new a6({props:_}),i[7](n),u=new p8({props:{topAppBar:i[2]}}),{c(){g.c(),e=hn(),t=$i(),xi(n.$$.fragment),l=$i(),xi(u.$$.fragment)},l(v){const w=Vx('[data-svelte="svelte-7r4yyr"]',document.head);g.l(w),e=hn(),w.forEach(Oe),t=en(v),Ci(n.$$.fragment,v),l=en(v),Ci(u.$$.fragment,v)},m(v,w){g.m(document.head,null),Xi(document.head,e),wt(v,t,w),Ai(n,v,w),wt(v,l,w),Ai(u,v,w),p=!0},p(v,[w]){c===(c=o(v))&&g?g.p(v,w):(g.d(1),g=c(v),g&&(g.c(),g.m(e.parentNode,e)));const x={};w&281&&(x.$$scope={dirty:w,ctx:v}),n.$set(x);const C={};w&4&&(C.topAppBar=v[2]),u.$set(C)},i(v){p||(tt(n.$$.fragment,v),tt(u.$$.fragment,v),p=!0)},o(v){ct(n.$$.fragment,v),ct(u.$$.fragment,v),p=!1},d(v){g.d(v),Oe(e),v&&Oe(t),i[7](null),Si(n,v),v&&Oe(l),Si(u,v)}}}function EC(i,e,t){let n,l,{drawerOpen:u=!1}=e,p,o;ws(async()=>{t(1,p=window.matchMedia("(prefers-color-scheme: dark)").matches)});const c=()=>{t(0,u=!1),t(1,p=!p)},g=()=>t(0,u=!u);function _(v){pn[v?"unshift":"push"](()=>{o=v,t(2,o)})}return i.$$set=v=>{"drawerOpen"in v&&t(0,u=v.drawerOpen)},i.$$.update=()=>{i.$$.dirty&2&&t(4,n=`switch to ${p?"light":"dark"} mode`),i.$$.dirty&2&&t(3,l=p?"light_mode":"dark_mode")},[u,p,o,l,n,c,g,_]}class IC extends fr{constructor(e){super(),dr(this,e,EC,CC,hr,{drawerOpen:0})}}const uw={name:"SplitterContext"};function TC(i){let e,t,n,l;return{c(){e=Li("div"),t=Li("div"),this.h()},l(u){e=Pi(u,"DIV",{class:!0,tabindex:!0});var p=Ti(e);t=Pi(p,"DIV",{class:!0,style:!0}),Ti(t).forEach(Oe),p.forEach(Oe),this.h()},h(){hi(t,"class","line svelte-16wga0t"),hi(t,"style",i[3]),hi(e,"class",n=_1(i[2])+" svelte-16wga0t"),hi(e,"tabindex","0"),Dh(()=>i[13].call(e))},m(u,p){wt(u,e,p),Xi(e,t),l=Fd(e,i[13].bind(e))},p(u,[p]){p&8&&hi(t,"style",u[3]),p&4&&n!==(n=_1(u[2])+" svelte-16wga0t")&&hi(e,"class",n)},i:Co,o:Co,d(u){u&&Oe(e),l()}}}function LC(i,e,t){let n,l,u,p,o,c,g,{color:_="silver"}=e,{hoverColor:v="gray"}=e,{dragColor:w="black"}=e,x=es(uw);Vo(i,x,M=>t(12,g=M));let C,T;function k(){C=this.clientWidth,T=this.clientHeight,t(0,C),t(1,T)}return i.$$set=M=>{"color"in M&&t(5,_=M.color),"hoverColor"in M&&t(6,v=M.hoverColor),"dragColor"in M&&t(7,w=M.dragColor)},i.$$.update=()=>{i.$$.dirty&4096&&t(10,n=g.dragging),i.$$.dirty&4096&&t(8,l=g.horizontal),i.$$.dirty&259&&t(11,u=l?T:C),i.$$.dirty&3296&&t(9,p={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":n?w:_,"--splitter-line-hover-color":n?w:v}),i.$$.dirty&512&&t(3,o=Object.entries(p).map(([M,O])=>`${M}:${O}`).join(";")),i.$$.dirty&256&&t(2,c=l?"splitter horizontal":"splitter vertical")},[C,T,c,o,x,_,v,w,l,p,n,u,g,k]}class PC extends fr{constructor(e){super(),dr(this,e,LC,TC,hr,{color:5,hoverColor:6,dragColor:7})}}const MC=i=>({}),vv=i=>({}),DC=i=>({}),bv=i=>({}),OC=i=>({}),wv=i=>({});function FC(i){let e,t;return e=new PC({}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function RC(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C;const T=i[33].primary,k=nr(T,i,i[32],wv),M=i[33].splitter,O=nr(M,i,i[32],bv),V=O||FC(),W=i[33].secondary,J=nr(W,i,i[32],vv);return{c(){e=Li("div"),t=Li("div"),k&&k.c(),l=$i(),u=Li("div"),V&&V.c(),o=$i(),c=Li("div"),J&&J.c(),this.h()},l(Q){e=Pi(Q,"DIV",{class:!0,style:!0});var Z=Ti(e);t=Pi(Z,"DIV",{class:!0});var ie=Ti(t);k&&k.l(ie),ie.forEach(Oe),l=en(Z),u=Pi(Z,"DIV",{class:!0});var Se=Ti(u);V&&V.l(Se),Se.forEach(Oe),o=en(Z),c=Pi(Z,"DIV",{class:!0});var xe=Ti(c);J&&J.l(xe),xe.forEach(Oe),Z.forEach(Oe),this.h()},h(){hi(t,"class","primary svelte-603y9m"),Dh(()=>i[34].call(t)),hi(u,"class","splitter svelte-603y9m"),Dh(()=>i[35].call(u)),hi(c,"class","secondary svelte-603y9m"),Dh(()=>i[36].call(c)),hi(e,"class",_=_1(i[8])+" svelte-603y9m"),hi(e,"style",i[9]),Dh(()=>i[37].call(e))},m(Q,Z){wt(Q,e,Z),Xi(e,t),k&&k.m(t,null),n=Fd(t,i[34].bind(t)),Xi(e,l),Xi(e,u),V&&V.m(u,null),p=Fd(u,i[35].bind(u)),Xi(e,o),Xi(e,c),J&&J.m(c,null),g=Fd(c,i[36].bind(c)),v=Fd(e,i[37].bind(e)),w=!0,x||(C=[Vn(u,"pointerdown",i[10]),Vn(u,"pointermove",i[11]),Vn(u,"pointerup",i[12]),Vn(u,"dblclick",i[13]),Vn(u,"keydown",i[14])],x=!0)},p(Q,Z){k&&k.p&&(!w||Z[1]&2)&&rr(k,T,Q,Q[32],w?sr(T,Q[32],Z,OC):or(Q[32]),wv),O&&O.p&&(!w||Z[1]&2)&&rr(O,M,Q,Q[32],w?sr(M,Q[32],Z,DC):or(Q[32]),bv),J&&J.p&&(!w||Z[1]&2)&&rr(J,W,Q,Q[32],w?sr(W,Q[32],Z,MC):or(Q[32]),vv),(!w||Z[0]&256&&_!==(_=_1(Q[8])+" svelte-603y9m"))&&hi(e,"class",_),(!w||Z[0]&512)&&hi(e,"style",Q[9])},i(Q){w||(tt(k,Q),tt(V,Q),tt(J,Q),w=!0)},o(Q){ct(k,Q),ct(V,Q),ct(J,Q),w=!1},d(Q){Q&&Oe(e),k&&k.d(Q),n(),V&&V.d(Q),p(),J&&J.d(Q),g(),v(),x=!1,bo(C)}}}function BC(i,e,t){let n,l,u,p,o,c,g,_,v,{$$slots:w={},$$scope:x}=e,{horizontal:C=!1}=e,{initialPrimarySize:T="50%"}=e,{minPrimarySize:k="0"}=e,{minSecondarySize:M="0"}=e,{splitterSize:O="7px"}=e,{resetOnDoubleClick:V=!0}=e,W,J,Q,Z,ie,Se,xe,le;const Ee=$e=>Math.max(0,Math.min($e,100));let me,Ae,pt,rt=!1;const Pt=()=>o,We=$e=>{t(23,me=Ee($e))},be=Sl({horizontal:C,dragging:rt});Fo(uw,be);const Le=O1(),Ue=$e=>{$e.currentTarget.setPointerCapture($e.pointerId),Ae=C?$e.clientY:$e.clientX,pt=l,t(24,rt=!0)},ce=$e=>{if($e.currentTarget.hasPointerCapture($e.pointerId)){const Dt=C?$e.clientY:$e.clientX;let ni=pt+(Dt-Ae);ni=Math.max(0,Math.min(ni,n));const mt=ni/n*100;t(23,me=mt)}},Ie=$e=>{$e.currentTarget.releasePointerCapture($e.pointerId),t(24,rt=!1)},de=()=>{V&&t(23,me=void 0)},ge=$e=>{const Dt=me||o;if(!$e.ctrlKey&&!$e.shiftKey&&!$e.altKey){switch($e.code){case"Space":t(23,me=void 0);return}if(C)switch($e.code){case"ArrowUp":t(23,me=Ee(Dt-1));return;case"ArrowDown":t(23,me=Ee(Dt+1));return}else switch($e.code){case"ArrowLeft":t(23,me=Ee(Dt-1));return;case"ArrowRight":t(23,me=Ee(Dt+1));return}}};function Re(){Q=this.clientWidth,Z=this.clientHeight,t(2,Q),t(3,Z)}function Ze(){ie=this.clientWidth,Se=this.clientHeight,t(4,ie),t(5,Se)}function ut(){xe=this.clientWidth,le=this.clientHeight,t(6,xe),t(7,le)}function Xe(){W=this.clientWidth,J=this.clientHeight,t(0,W),t(1,J)}return i.$$set=$e=>{"horizontal"in $e&&t(15,C=$e.horizontal),"initialPrimarySize"in $e&&t(16,T=$e.initialPrimarySize),"minPrimarySize"in $e&&t(17,k=$e.minPrimarySize),"minSecondarySize"in $e&&t(18,M=$e.minSecondarySize),"splitterSize"in $e&&t(19,O=$e.splitterSize),"resetOnDoubleClick"in $e&&t(20,V=$e.resetOnDoubleClick),"$$scope"in $e&&t(32,x=$e.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32771&&t(26,n=C?J:W),i.$$.dirty[0]&32780&&t(27,l=C?Z:Q),i.$$.dirty[0]&32816&&t(31,u=C?Se:ie),i.$$.dirty[0]&32960&&t(30,p=C?le:xe),i.$$.dirty[0]&201326592|i.$$.dirty[1]&1&&t(25,o=Ee(Math.ceil((l-u)/(n-u)*100))),i.$$.dirty[0]&16809984&&be.set({horizontal:C,dragging:rt}),i.$$.dirty[0]&1258291200|i.$$.dirty[1]&1&&Le("changed",{percent:o,primarySize:l,splitterSize:u,secondarySize:p,dragging:rt}),i.$$.dirty[0]&8454144&&t(29,c=me!==void 0?`${me}%`:T),i.$$.dirty[0]&537788416&&t(28,g={"--primary-size":`${c}`,"--min-primary-size":`${k}`,"--min-secondary-size":`${M}`,"--splitter-size":`${O}`}),i.$$.dirty[0]&268435456&&t(9,_=Object.entries(g).map(([$e,Dt])=>`${$e}:${Dt}`).join(";")),i.$$.dirty[0]&32768&&t(8,v=C?"split horizontal":"split vertical")},[W,J,Q,Z,ie,Se,xe,le,v,_,Ue,ce,Ie,de,ge,C,T,k,M,O,V,Pt,We,me,rt,o,n,l,g,c,p,u,x,w,Re,Ze,ut,Xe]}class zC extends fr{constructor(e){super(),dr(this,e,BC,RC,hr,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}class cw{constructor(){this.STYLE_PATHNAME="style"}getUrl(){const e=window.location,t=new URL(e.href);return t.hash=e.hash,t}updateUrl(e){history.replaceState("","",e.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(e){const t=this.getUrl();t.searchParams.set(this.STYLE_PATHNAME,e),this.updateUrl(t)}delete(){const e=this.getUrl();e.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(e)}getMatchedStyleByTitle(e,t){for(const n of e)if(n.title===t)return n}getMatchedStyleByUrl(e,t){for(const n of e)if(n.uri===t)return n}}function xv(i,e,t){const n=i.slice();return n[7]=e[t],n}function Av(i){let e,t=i[7].title+"",n;return{c(){e=Li("option"),n=gn(t),this.h()},l(l){e=Pi(l,"OPTION",{});var u=Ti(e);n=yn(u,t),u.forEach(Oe),this.h()},h(){e.__value=i[7].uri,e.value=e.__value},m(l,u){wt(l,e,u),Xi(e,n)},p:Co,d(l){l&&Oe(e)}}}function NC(i){let e,t,n,l,u=kr.styles,p=[];for(let o=0;o<u.length;o+=1)p[o]=Av(xv(i,u,o));return{c(){e=Li("div"),t=Li("select");for(let o=0;o<p.length;o+=1)p[o].c();this.h()},l(o){e=Pi(o,"DIV",{class:!0});var c=Ti(e);t=Pi(c,"SELECT",{});var g=Ti(t);for(let _=0;_<p.length;_+=1)p[_].l(g);g.forEach(Oe),c.forEach(Oe),this.h()},h(){i[0]===void 0&&Dh(()=>i[2].call(t)),hi(e,"class","select is-link is-fullwidth mt-1")},m(o,c){wt(o,e,c),Xi(e,t);for(let g=0;g<p.length;g+=1)p[g].m(t,null);id(t,i[0]),n||(l=Vn(t,"change",i[2]),n=!0)},p(o,[c]){if(c&0){u=kr.styles;let g;for(g=0;g<u.length;g+=1){const _=xv(o,u,g);p[g]?p[g].p(_,c):(p[g]=Av(_),p[g].c(),p[g].m(t,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=u.length}c&1&&id(t,o[0])},i:Co,o:Co,d(o){o&&Oe(e),sl(p,o),n=!1,l()}}}function jC(i,e,t){let n,l;Vo(i,Jd,_=>t(1,n=_)),Vo(i,Fu,_=>t(3,l=_));const u=O1();let p=n.uri;const o=()=>{!l||p!==n.uri&&(l.setStyle(p),l.on("styledata",()=>{const _=new cw,v=_.getMatchedStyleByUrl(kr.styles,p);v?(_.set(v.title),Jd.update(()=>v)):_.delete(),u("change")}))},c=()=>{p!==n.uri&&t(0,p=n.uri)};function g(){p=U2(this),t(0,p)}return i.$$.update=()=>{i.$$.dirty&1&&o(),i.$$.dirty&2&&c()},[p,n,g]}class UC extends fr{constructor(e){super(),dr(this,e,jC,NC,hr,{})}}var VC=8,qC={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},HC={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},GC=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],WC={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},XC={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},YC={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},ZC={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},KC={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},JC={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},QC={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},$C=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],eE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},tE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},iE={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},nE={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},rE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},oE={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},sE={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},aE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},lE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},uE={type:"array",value:"*",doc:"A filter selects specific features from a layer."},cE={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},hE={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},fE={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},dE={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},pE={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},mE={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},gE={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},yE={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},_E={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},vE={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},bE={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},wE={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},xE={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},AE={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},SE=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],kE={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},CE={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},EE={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},IE={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},TE={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},LE={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},PE={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ME={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},DE={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},OE={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},FE={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},RE={$version:VC,$root:qC,sources:HC,source:GC,source_vector:WC,source_raster:XC,source_raster_dem:YC,source_geojson:ZC,source_video:KC,source_image:JC,layer:QC,layout:$C,layout_background:eE,layout_sky:tE,layout_fill:iE,layout_circle:nE,layout_heatmap:rE,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0"}},"property-type":"constant"}},layout_line:oE,layout_symbol:sE,layout_raster:aE,layout_hillshade:lE,filter:uE,filter_symbol:cE,filter_fill:hE,filter_line:fE,filter_circle:dE,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:pE,filter_operator:mE,geometry_type:gE,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:yE,expression:_E,expression_name:vE,fog:bE,light:wE,projection:xE,terrain:AE,paint:SE,paint_fill:kE,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of ambient occlusion (AO) shading. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The radius of ambient occlusion (AO) shading, in meters. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to hight of one floor and brings the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:CE,paint_circle:EE,paint_heatmap:IE,paint_symbol:TE,paint_raster:LE,paint_hillshade:PE,paint_background:ME,paint_sky:DE,transition:OE,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:FE},Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j1(i){var e={exports:{}};return i(e,e.exports),e.exports}function BE(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */j1(function(i,e){(function(t){var n=e&&!e.nodeType&&e,l=i&&!i.nodeType&&i,u=typeof Km=="object"&&Km;(u.global===u||u.window===u||u.self===u)&&(t=u);var p,o=2147483647,c=36,g=1,_=26,v=38,w=700,x=72,C=128,T="-",k=/^xn--/,M=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},W=c-g,J=Math.floor,Q=String.fromCharCode,Z;function ie(Le){throw RangeError(V[Le])}function Se(Le,Ue){for(var ce=Le.length,Ie=[];ce--;)Ie[ce]=Ue(Le[ce]);return Ie}function xe(Le,Ue){var ce=Le.split("@"),Ie="";ce.length>1&&(Ie=ce[0]+"@",Le=ce[1]),Le=Le.replace(O,".");var de=Le.split("."),ge=Se(de,Ue).join(".");return Ie+ge}function le(Le){for(var Ue=[],ce=0,Ie=Le.length,de,ge;ce<Ie;)de=Le.charCodeAt(ce++),de>=55296&&de<=56319&&ce<Ie?(ge=Le.charCodeAt(ce++),(ge&64512)==56320?Ue.push(((de&1023)<<10)+(ge&1023)+65536):(Ue.push(de),ce--)):Ue.push(de);return Ue}function Ee(Le){return Se(Le,function(Ue){var ce="";return Ue>65535&&(Ue-=65536,ce+=Q(Ue>>>10&1023|55296),Ue=56320|Ue&1023),ce+=Q(Ue),ce}).join("")}function me(Le){return Le-48<10?Le-22:Le-65<26?Le-65:Le-97<26?Le-97:c}function Ae(Le,Ue){return Le+22+75*(Le<26)-((Ue!=0)<<5)}function pt(Le,Ue,ce){var Ie=0;for(Le=ce?J(Le/w):Le>>1,Le+=J(Le/Ue);Le>W*_>>1;Ie+=c)Le=J(Le/W);return J(Ie+(W+1)*Le/(Le+v))}function rt(Le){var Ue=[],ce=Le.length,Ie,de=0,ge=C,Re=x,Ze,ut,Xe,$e,Dt,ni,mt,At,xt;for(Ze=Le.lastIndexOf(T),Ze<0&&(Ze=0),ut=0;ut<Ze;++ut)Le.charCodeAt(ut)>=128&&ie("not-basic"),Ue.push(Le.charCodeAt(ut));for(Xe=Ze>0?Ze+1:0;Xe<ce;){for($e=de,Dt=1,ni=c;Xe>=ce&&ie("invalid-input"),mt=me(Le.charCodeAt(Xe++)),(mt>=c||mt>J((o-de)/Dt))&&ie("overflow"),de+=mt*Dt,At=ni<=Re?g:ni>=Re+_?_:ni-Re,!(mt<At);ni+=c)xt=c-At,Dt>J(o/xt)&&ie("overflow"),Dt*=xt;Ie=Ue.length+1,Re=pt(de-$e,Ie,$e==0),J(de/Ie)>o-ge&&ie("overflow"),ge+=J(de/Ie),de%=Ie,Ue.splice(de++,0,ge)}return Ee(Ue)}function Pt(Le){var Ue,ce,Ie,de,ge,Re,Ze,ut,Xe,$e,Dt,ni=[],mt,At,xt,Qe;for(Le=le(Le),mt=Le.length,Ue=C,ce=0,ge=x,Re=0;Re<mt;++Re)Dt=Le[Re],Dt<128&&ni.push(Q(Dt));for(Ie=de=ni.length,de&&ni.push(T);Ie<mt;){for(Ze=o,Re=0;Re<mt;++Re)Dt=Le[Re],Dt>=Ue&&Dt<Ze&&(Ze=Dt);for(At=Ie+1,Ze-Ue>J((o-ce)/At)&&ie("overflow"),ce+=(Ze-Ue)*At,Ue=Ze,Re=0;Re<mt;++Re)if(Dt=Le[Re],Dt<Ue&&++ce>o&&ie("overflow"),Dt==Ue){for(ut=ce,Xe=c;$e=Xe<=ge?g:Xe>=ge+_?_:Xe-ge,!(ut<$e);Xe+=c)Qe=ut-$e,xt=c-$e,ni.push(Q(Ae($e+Qe%xt,0))),ut=J(Qe/xt);ni.push(Q(Ae(ut,0))),ge=pt(ce,At,Ie==de),ce=0,++Ie}++ce,++Ue}return ni.join("")}function We(Le){return xe(Le,function(Ue){return k.test(Ue)?rt(Ue.slice(4).toLowerCase()):Ue})}function be(Le){return xe(Le,function(Ue){return M.test(Ue)?"xn--"+Pt(Ue):Ue})}if(p={version:"1.3.2",ucs2:{decode:le,encode:Ee},decode:rt,encode:Pt,toASCII:be,toUnicode:We},n&&l)if(i.exports==n)l.exports=p;else for(Z in p)p.hasOwnProperty(Z)&&(n[Z]=p[Z]);else t.punycode=p})(Km)});function zE(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var NE=function(i,e,t,n){e=e||"&",t=t||"=";var l={};if(typeof i!="string"||i.length===0)return l;var u=/\+/g;i=i.split(e);var p=1e3;n&&typeof n.maxKeys=="number"&&(p=n.maxKeys);var o=i.length;p>0&&o>p&&(o=p);for(var c=0;c<o;++c){var g=i[c].replace(u,"%20"),_=g.indexOf(t),v,w,x,C;_>=0?(v=g.substr(0,_),w=g.substr(_+1)):(v=g,w=""),x=decodeURIComponent(v),C=decodeURIComponent(w),zE(l,x)?Array.isArray(l[x])?l[x].push(C):l[x]=[l[x],C]:l[x]=C}return l},Md=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},jE=function(i,e,t,n){return e=e||"&",t=t||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(l){var u=encodeURIComponent(Md(l))+t;return Array.isArray(i[l])?i[l].map(function(p){return u+encodeURIComponent(Md(p))}).join(e):u+encodeURIComponent(Md(i[l]))}).join(e):n?encodeURIComponent(Md(n))+t+encodeURIComponent(Md(i)):""};j1(function(i,e){e.decode=e.parse=NE,e.encode=e.stringify=jE});function hw(i,...e){for(const t of e)for(const n in t)i[n]=t[n];return i}class UE extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Qc=UE;class Tg{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,l]of t)this.bindings[n]=l}concat(e){return new Tg(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var VE=Tg;const U1={kind:"null"},Rn={kind:"number"},ho={kind:"string"},oo={kind:"boolean"},Oh={kind:"color"},Y0={kind:"object"},so={kind:"value"},qE={kind:"error"},V1={kind:"collator"},q1={kind:"formatted"},ap={kind:"resolvedImage"};function ic(i,e){return{kind:"array",itemType:i,N:e}}function Fs(i){if(i.kind==="array"){const e=Fs(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const HE=[U1,Rn,ho,oo,Oh,q1,Y0,ic(so),ap];function Qd(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Qd(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const t of HE)if(!Qd(t,e))return null}}return`Expected ${Fs(i)} but found ${Fs(e)} instead.`}function Lg(i,e){return e.some(t=>t.kind===i.kind)}function $d(i,e){return e.some(t=>t==="null"?i===null:t==="array"?Array.isArray(i):t==="object"?i&&!Array.isArray(i)&&typeof i=="object":t===typeof i)}var GE=j1(function(i,e){var t={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(g){return g=Math.round(g),g<0?0:g>255?255:g}function l(g){return g<0?0:g>1?1:g}function u(g){return g[g.length-1]==="%"?n(parseFloat(g)/100*255):n(parseInt(g))}function p(g){return g[g.length-1]==="%"?l(parseFloat(g)/100):l(parseFloat(g))}function o(g,_,v){return v<0?v+=1:v>1&&(v-=1),v*6<1?g+(_-g)*v*6:v*2<1?_:v*3<2?g+(_-g)*(2/3-v)*6:g}function c(g){var _=g.replace(/ /g,"").toLowerCase();if(_ in t)return t[_].slice();if(_[0]==="#"){if(_.length===4){var v=parseInt(_.substr(1),16);return v>=0&&v<=4095?[(v&3840)>>4|(v&3840)>>8,v&240|(v&240)>>4,v&15|(v&15)<<4,1]:null}else if(_.length===7){var v=parseInt(_.substr(1),16);return v>=0&&v<=16777215?[(v&16711680)>>16,(v&65280)>>8,v&255,1]:null}return null}var w=_.indexOf("("),x=_.indexOf(")");if(w!==-1&&x+1===_.length){var C=_.substr(0,w),T=_.substr(w+1,x-(w+1)).split(","),k=1;switch(C){case"rgba":if(T.length!==4)return null;k=p(T.pop());case"rgb":return T.length!==3?null:[u(T[0]),u(T[1]),u(T[2]),k];case"hsla":if(T.length!==4)return null;k=p(T.pop());case"hsl":if(T.length!==3)return null;var M=(parseFloat(T[0])%360+360)%360/360,O=p(T[1]),V=p(T[2]),W=V<=.5?V*(O+1):V+O-V*O,J=V*2-W;return[n(o(J,W,M+1/3)*255),n(o(J,W,M)*255),n(o(J,W,M-1/3)*255),k];default:return null}}return null}try{e.parseCSSColor=c}catch{}});class lu{constructor(e,t,n,l=1){this.r=e,this.g=t,this.b=n,this.a=l}static parse(e){if(!e)return;if(e instanceof lu)return e;if(typeof e!="string")return;const t=GE.parseCSSColor(e);if(!!t)return new lu(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,n,l]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${l})`}toArray(){const{r:e,g:t,b:n,a:l}=this;return l===0?[0,0,0,0]:[e*255/l,t*255/l,n*255/l,l]}toArray01(){const{r:e,g:t,b:n,a:l}=this;return l===0?[0,0,0,0]:[e/l,t/l,n/l,l]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:l}=this;return[e,t,n,l]}}lu.black=new lu(0,0,0,1);lu.white=new lu(1,1,1,1);lu.transparent=new lu(0,0,0,0);lu.red=new lu(1,0,0,1);lu.blue=new lu(0,0,1,1);var rl=lu;class Pg{constructor(e,t,n){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class rg{constructor(e,t,n,l,u){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=l,this.textColor=u}}class Ic{constructor(e){this.sections=e}static fromString(e){return new Ic([new rg(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Ic?e:Ic.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Bh{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Bh({name:e,available:!1}):null}serialize(){return["image",this.name]}}function fw(i,e,t,n){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[i,e,t,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[i,e,t,n]:[i,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function S1(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof rl)return!0;if(i instanceof Pg)return!0;if(i instanceof Ic)return!0;if(i instanceof Bh)return!0;if(Array.isArray(i)){for(const e of i)if(!S1(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!S1(i[e]))return!1;return!0}else return!1}function Ta(i){if(i===null)return U1;if(typeof i=="string")return ho;if(typeof i=="boolean")return oo;if(typeof i=="number")return Rn;if(i instanceof rl)return Oh;if(i instanceof Pg)return V1;if(i instanceof Ic)return q1;if(i instanceof Bh)return ap;if(Array.isArray(i)){const e=i.length;let t;for(const n of i){const l=Ta(n);if(!t)t=l;else{if(t===l)continue;t=so;break}}return ic(t||so,e)}else return Y0}function Ud(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof rl||i instanceof Ic||i instanceof Bh?i.toString():JSON.stringify(i)}class Mg{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!S1(e[1]))return t.error("invalid value");const n=e[1];let l=Ta(n);const u=t.expectedType;return l.kind==="array"&&l.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(l=u),new Mg(l,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof rl?["rgba"].concat(this.value.toArray()):this.value instanceof Ic?this.value.serialize():this.value}}var k1=Mg;class WE{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var ol=WE;const Jm={string:ho,number:Rn,boolean:oo,object:Y0};class Dg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=1,l;const u=e[0];if(u==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in Jm)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=Jm[g],n++}else o=so;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],n++}l=ic(o,c)}else l=Jm[u];const p=[];for(;n<e.length;n++){const o=t.parse(e[n],n,so);if(!o)return null;p.push(o)}return new Dg(l,p)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(Qd(this.type,Ta(n))){if(t===this.args.length-1)throw new ol(`Expected value to be of type ${Fs(this.type)}, but found ${Fs(Ta(n))} instead.`)}else return n}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){t.push(n.kind);const l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(n=>n.serialize()))}}var Mh=Dg;class H1{constructor(e){this.type=q1,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");const l=[];let u=!1;for(let p=1;p<=e.length-1;++p){const o=e[p];if(u&&typeof o=="object"&&!Array.isArray(o)){u=!1;let c=null;if(o["font-scale"]&&(c=t.parse(o["font-scale"],1,Rn),!c))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,ic(ho)),!g))return null;let _=null;if(o["text-color"]&&(_=t.parse(o["text-color"],1,Oh),!_))return null;const v=l[l.length-1];v.scale=c,v.font=g,v.textColor=_}else{const c=t.parse(e[p],1,so);if(!c)return null;const g=c.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,l.push({content:c,scale:null,font:null,textColor:null})}}return new H1(l)}evaluate(e){const t=n=>{const l=n.content.evaluate(e);return Ta(l)===ap?new rg("",l,null,null,null):new rg(Ud(l),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)};return new Ic(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class G1{constructor(e){this.type=ap,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ho);return n?new G1(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Bh.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const XE={"to-boolean":oo,"to-color":Oh,"to-number":Rn,"to-string":ho};class Og{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");const l=XE[n],u=[];for(let p=1;p<e.length;p++){const o=t.parse(e[p],p,so);if(!o)return null;u.push(o)}return new Og(l,u)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let t,n;for(const l of this.args){if(t=l.evaluate(e),n=null,t instanceof rl)return t;if(typeof t=="string"){const u=e.parseColor(t);if(u)return u}else if(Array.isArray(t)&&(t.length<3||t.length>4?n=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:n=fw(t[0],t[1],t[2],t[3]),!n))return new rl(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ol(n||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const n of this.args){if(t=n.evaluate(e),t===null)return 0;const l=Number(t);if(!isNaN(l))return l}throw new ol(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Ic.fromString(Ud(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Bh.fromString(Ud(this.args[0].evaluate(e))):Ud(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new H1([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new G1(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var j0=Og;const YE=["Unknown","Point","LineString","Polygon"];class ZE{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?YE[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:l}=this.featureTileCoord,u=n*t-e[0],p=l*t-e[1],o=this.featureDistanceData.bearing[0],c=this.featureDistanceData.bearing[1];return o*u+c*p}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=rl.parse(e)),t}}var dw=ZE;class U0{constructor(e,t,n,l){this.name=e,this.type=t,this._evaluate=n,this.args=l}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const n=e[0],l=U0.definitions[n];if(!l)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(l)?l[0]:l.type,p=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,o=p.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let c=null;for(const[g,_]of o){c=new _w(t.registry,t.path,null,t.scope);const v=[];let w=!1;for(let x=1;x<e.length;x++){const C=e[x],T=Array.isArray(g)?g[x-1]:g.type,k=c.parse(C,1+v.length,T);if(!k){w=!0;break}v.push(k)}if(!w){if(Array.isArray(g)&&g.length!==v.length){c.error(`Expected ${g.length} arguments, but found ${v.length} instead.`);continue}for(let x=0;x<v.length;x++){const C=Array.isArray(g)?g[x]:g.type,T=v[x];c.concat(x+1).checkSubtype(C,T.type)}if(c.errors.length===0)return new U0(n,u,_,v)}}if(o.length===1)t.errors.push(...c.errors);else{const _=(o.length?o:p).map(([w])=>KE(w)).join(" | "),v=[];for(let w=1;w<e.length;w++){const x=t.parse(e[w],1+v.length);if(!x)return null;v.push(Fs(x.type))}t.error(`Expected arguments of type ${_}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){U0.definitions=t;for(const n in t)e[n]=U0}}function KE(i){return Array.isArray(i)?`(${i.map(Fs).join(", ")})`:`(${Fs(i.type)}...)`}var ad=U0;class W1{constructor(e,t,n){this.type=V1,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");const l=t.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,oo);if(!l)return null;const u=t.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,oo);if(!u)return null;let p=null;return n.locale&&(p=t.parse(n.locale,1,ho),!p)?null:new W1(l,u,p)}evaluate(e){return new Pg(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const df=8192;function Fg(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function JE(i){return(180+i)/360}function QE(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function C1(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function $E(i,e){const t=JE(i[0]),n=QE(i[1]),l=Math.pow(2,e.z);return[Math.round(t*l*df),Math.round(n*l*df)]}function eI(i,e,t){const n=i[0]-e[0],l=i[1]-e[1],u=i[0]-t[0],p=i[1]-t[1];return n*p-u*l===0&&n*u<=0&&l*p<=0}function tI(i,e,t){return e[1]>i[1]!=t[1]>i[1]&&i[0]<(t[0]-e[0])*(i[1]-e[1])/(t[1]-e[1])+e[0]}function Rg(i,e){let t=!1;for(let n=0,l=e.length;n<l;n++){const u=e[n];for(let p=0,o=u.length;p<o-1;p++){if(eI(i,u[p],u[p+1]))return!1;tI(i,u[p],u[p+1])&&(t=!t)}}return t}function iI(i,e){for(let t=0;t<e.length;t++)if(Rg(i,e[t]))return!0;return!1}function nI(i,e){return i[0]*e[1]-i[1]*e[0]}function Sv(i,e,t,n){const l=i[0]-t[0],u=i[1]-t[1],p=e[0]-t[0],o=e[1]-t[1],c=n[0]-t[0],g=n[1]-t[1],_=l*g-c*u,v=p*g-c*o;return _>0&&v<0||_<0&&v>0}function rI(i,e,t,n){const l=[e[0]-i[0],e[1]-i[1]],u=[n[0]-t[0],n[1]-t[1]];return nI(u,l)===0?!1:!!(Sv(i,e,t,n)&&Sv(t,n,i,e))}function oI(i,e,t){for(const n of t)for(let l=0;l<n.length-1;++l)if(rI(i,e,n[l],n[l+1]))return!0;return!1}function pw(i,e){for(let t=0;t<i.length;++t)if(!Rg(i[t],e))return!1;for(let t=0;t<i.length-1;++t)if(oI(i[t],i[t+1],e))return!1;return!0}function sI(i,e){for(let t=0;t<e.length;t++)if(pw(i,e[t]))return!0;return!1}function Bg(i,e,t){const n=[];for(let l=0;l<i.length;l++){const u=[];for(let p=0;p<i[l].length;p++){const o=$E(i[l][p],t);Fg(e,o),u.push(o)}n.push(u)}return n}function mw(i,e,t){const n=[];for(let l=0;l<i.length;l++){const u=Bg(i[l],e,t);n.push(u)}return n}function gw(i,e,t,n){if(i[0]<t[0]||i[0]>t[2]){const l=n*.5;let u=i[0]-t[0]>l?-n:t[0]-i[0]>l?n:0;u===0&&(u=i[0]-t[2]>l?-n:t[2]-i[0]>l?n:0),i[0]+=u}Fg(e,i)}function aI(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function kv(i,e,t,n){const l=Math.pow(2,n.z)*df,u=[n.x*df,n.y*df],p=[];if(!i)return p;for(const o of i)for(const c of o){const g=[c.x+u[0],c.y+u[1]];gw(g,e,t,l),p.push(g)}return p}function Cv(i,e,t,n){const l=Math.pow(2,n.z)*df,u=[n.x*df,n.y*df],p=[];if(!i)return p;for(const o of i){const c=[];for(const g of o){const _=[g.x+u[0],g.y+u[1]];Fg(e,_),c.push(_)}p.push(c)}if(e[2]-e[0]<=l/2){aI(e);for(const o of p)for(const c of o)gw(c,e,t,l)}return p}function lI(i,e){const t=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=Bg(e.coordinates,n,l),p=kv(i.geometry(),t,n,l);if(!C1(t,n))return!1;for(const o of p)if(!Rg(o,u))return!1}if(e.type==="MultiPolygon"){const u=mw(e.coordinates,n,l),p=kv(i.geometry(),t,n,l);if(!C1(t,n))return!1;for(const o of p)if(!iI(o,u))return!1}return!0}function uI(i,e){const t=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=Bg(e.coordinates,n,l),p=Cv(i.geometry(),t,n,l);if(!C1(t,n))return!1;for(const o of p)if(!pw(o,u))return!1}if(e.type==="MultiPolygon"){const u=mw(e.coordinates,n,l),p=Cv(i.geometry(),t,n,l);if(!C1(t,n))return!1;for(const o of p)if(!sI(o,u))return!1}return!0}class Vd{constructor(e,t){this.type=oo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(S1(e[1])){const n=e[1];if(n.type==="FeatureCollection")for(let l=0;l<n.features.length;++l){const u=n.features[l].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Vd(n,n.features[l].geometry)}else if(n.type==="Feature"){const l=n.geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new Vd(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Vd(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return lI(e,this.geometries);if(e.geometryType()==="LineString")return uI(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var zg=Vd;function Ng(i){if(i instanceof ad){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof zg)return!1;let e=!0;return i.eachChild(t=>{e&&!Ng(t)&&(e=!1)}),e}function jg(i){if(i instanceof ad&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(t=>{e&&!jg(t)&&(e=!1)}),e}function Ug(i,e){if(i instanceof ad&&e.indexOf(i.name)>=0)return!1;let t=!0;return i.eachChild(n=>{t&&!Ug(n,e)&&(t=!1)}),t}class Vg{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Vg(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var yw=Vg;class qg{constructor(e,t=[],n,l=new VE,u=[]){this.registry=e,this.path=t,this.key=t.map(p=>`[${p}]`).join(""),this.scope=l,this.errors=u,this.expectedType=n}parse(e,t,n,l,u={}){return t?this.concat(t,n,l)._parse(e,u):this._parse(e,u)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(l,u,p){return p==="assert"?new Mh(u,[l]):p==="coerce"?new j0(u,[l]):l}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=e[0];if(typeof l!="string")return this.error(`Expression name must be a string, but found ${typeof l} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[l];if(u){let p=u.parse(e,this);if(!p)return null;if(this.expectedType){const o=this.expectedType,c=p.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&c.kind==="value")p=n(p,o,t.typeAnnotation||"assert");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(c.kind==="value"||c.kind==="string"))p=n(p,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,c))return null}if(!(p instanceof k1)&&p.type.kind!=="resolvedImage"&&og(p)){const o=new dw;try{p=new k1(p.type,p.evaluate(o))}catch(c){return this.error(c.message),null}}return p}return this.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const l=typeof e=="number"?this.path.concat(e):this.path,u=n?this.scope.concat(n):this.scope;return new qg(this.registry,l,t||null,u,this.errors)}error(e,...t){const n=`${this.key}${t.map(l=>`[${l}]`).join("")}`;this.errors.push(new Qc(n,e))}checkSubtype(e,t){const n=Qd(e,t);return n&&this.error(n),n}}var _w=qg;function og(i){if(i instanceof yw)return og(i.boundExpression);if(i instanceof ad&&i.name==="error")return!1;if(i instanceof W1)return!1;if(i instanceof zg)return!1;const e=i instanceof j0||i instanceof Mh;let t=!0;return i.eachChild(n=>{e?t=t&&og(n):t=t&&n instanceof k1}),t?Ng(i)&&Ug(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function X1(i,e){const t=i.length-1;let n=0,l=t,u=0,p,o;for(;n<=l;)if(u=Math.floor((n+l)/2),p=i[u],o=i[u+1],p<=e){if(u===t||e<o)return u;n=u+1}else if(p>e)l=u-1;else throw new ol("Input is not a number.");return 0}class Hg{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[l,u]of n)this.labels.push(l),this.outputs.push(u)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,Rn);if(!n)return null;const l=[];let u=null;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(let p=1;p<e.length;p+=2){const o=p===1?-1/0:e[p],c=e[p+1],g=p,_=p+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(l.length&&l[l.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const v=t.parse(c,_,u);if(!v)return null;u=u||v.type,l.push([o,v])}return new Hg(u,n,l)}evaluate(e){const t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return n[0].evaluate(e);const u=t.length;if(l>=t[u-1])return n[u-1].evaluate(e);const p=X1(t,l);return n[p].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var vw=Hg,cI=ld;function ld(i,e,t,n){this.cx=3*i,this.bx=3*(t-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=t,this.p2y=n}ld.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};ld.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};ld.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};ld.prototype.solveCurveX=function(i,e){typeof e>"u"&&(e=1e-6);var t,n,l,u,p;for(l=i,p=0;p<8;p++){if(u=this.sampleCurveX(l)-i,Math.abs(u)<e)return l;var o=this.sampleCurveDerivativeX(l);if(Math.abs(o)<1e-6)break;l=l-u/o}if(t=0,n=1,l=i,l<t)return t;if(l>n)return n;for(;t<n;){if(u=this.sampleCurveX(l),Math.abs(u-i)<e)return l;i>u?t=l:n=l,l=(n-t)*.5+t}return l};ld.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};function Du(i,e,t){return i*(1-t)+e*t}function hI(i,e,t){return new rl(Du(i.r,e.r,t),Du(i.g,e.g,t),Du(i.b,e.b,t),Du(i.a,e.a,t))}function fI(i,e,t){return i.map((n,l)=>Du(n,e[l],t))}var bw=Object.freeze({__proto__:null,number:Du,color:hI,array:fI});const ww=.95047,xw=1,Aw=1.08883,Sw=4/29,Z0=6/29,kw=3*Z0*Z0,dI=Z0*Z0*Z0,pI=Math.PI/180,mI=180/Math.PI;function Qm(i){return i>dI?Math.pow(i,1/3):i/kw+Sw}function $m(i){return i>Z0?i*i*i:kw*(i-Sw)}function e2(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function t2(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Cw(i){const e=t2(i.r),t=t2(i.g),n=t2(i.b),l=Qm((.4124564*e+.3575761*t+.1804375*n)/ww),u=Qm((.2126729*e+.7151522*t+.072175*n)/xw),p=Qm((.0193339*e+.119192*t+.9503041*n)/Aw);return{l:116*u-16,a:500*(l-u),b:200*(u-p),alpha:i.a}}function Ew(i){let e=(i.l+16)/116,t=isNaN(i.a)?e:e+i.a/500,n=isNaN(i.b)?e:e-i.b/200;return e=xw*$m(e),t=ww*$m(t),n=Aw*$m(n),new rl(e2(3.2404542*t-1.5371385*e-.4985314*n),e2(-.969266*t+1.8760108*e+.041556*n),e2(.0556434*t-.2040259*e+1.0572252*n),i.alpha)}function gI(i,e,t){return{l:Du(i.l,e.l,t),a:Du(i.a,e.a,t),b:Du(i.b,e.b,t),alpha:Du(i.alpha,e.alpha,t)}}function yI(i){const{l:e,a:t,b:n}=Cw(i),l=Math.atan2(n,t)*mI;return{h:l<0?l+360:l,c:Math.sqrt(t*t+n*n),l:e,alpha:i.a}}function _I(i){const e=i.h*pI,t=i.c,n=i.l;return Ew({l:n,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:i.alpha})}function vI(i,e,t){const n=e-i;return i+t*(n>180||n<-180?n-360*Math.round(n/360):n)}function bI(i,e,t){return{h:vI(i.h,e.h,t),c:Du(i.c,e.c,t),l:Du(i.l,e.l,t),alpha:Du(i.alpha,e.alpha,t)}}const Rd={forward:Cw,reverse:Ew,interpolate:gI},Bd={forward:yI,reverse:_I,interpolate:bI};var Iw=Object.freeze({__proto__:null,lab:Rd,hcl:Bd});class E1{constructor(e,t,n,l,u){this.type=e,this.operator=t,this.interpolation=n,this.input=l,this.labels=[],this.outputs=[];for(const[p,o]of u)this.labels.push(p),this.outputs.push(o)}static interpolationFactor(e,t,n,l){let u=0;if(e.name==="exponential")u=i2(t,e.base,n,l);else if(e.name==="linear")u=i2(t,1,n,l);else if(e.name==="cubic-bezier"){const p=e.controlPoints;u=new cI(p[0],p[1],p[2],p[3]).solve(i2(t,1,n,l))}return u}static parse(e,t){let[n,l,u,...p]=e;if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){const g=l[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:g}}else if(l[0]==="cubic-bezier"){const g=l.slice(1);if(g.length!==4||g.some(_=>typeof _!="number"||_<0||_>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(l[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(u=t.parse(u,2,Rn),!u)return null;const o=[];let c=null;n==="interpolate-hcl"||n==="interpolate-lab"?c=Oh:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let g=0;g<p.length;g+=2){const _=p[g],v=p[g+1],w=g+3,x=g+4;if(typeof _!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(o.length&&o[o.length-1][0]>=_)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',w);const C=t.parse(v,x,c);if(!C)return null;c=c||C.type,o.push([_,C])}return c.kind!=="number"&&c.kind!=="color"&&!(c.kind==="array"&&c.itemType.kind==="number"&&typeof c.N=="number")?t.error(`Type ${Fs(c)} is not interpolatable.`):new E1(c,n,l,u,o)}evaluate(e){const t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return n[0].evaluate(e);const u=t.length;if(l>=t[u-1])return n[u-1].evaluate(e);const p=X1(t,l),o=t[p],c=t[p+1],g=E1.interpolationFactor(this.interpolation,l,o,c),_=n[p].evaluate(e),v=n[p+1].evaluate(e);return this.operator==="interpolate"?bw[this.type.kind.toLowerCase()](_,v,g):this.operator==="interpolate-hcl"?Bd.reverse(Bd.interpolate(Bd.forward(_),Bd.forward(v),g)):Rd.reverse(Rd.interpolate(Rd.forward(_),Rd.forward(v),g))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}function i2(i,e,t,n){const l=n-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}var Fh=E1;class I1{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const l=t.expectedType;l&&l.kind!=="value"&&(n=l);const u=[];for(const o of e.slice(1)){const c=t.parse(o,1+u.length,n,void 0,{typeAnnotation:"omit"});if(!c)return null;n=n||c.type,u.push(c)}return l&&u.some(o=>Qd(l,o.type))?new I1(so,u):new I1(n,u)}evaluate(e){let t=null,n=0,l;for(const u of this.args){if(n++,t=u.evaluate(e),t&&t instanceof Bh&&!t.available&&(l||(l=t),t=null,n===this.args.length))return l;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Tw=I1;class Gg{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let u=1;u<e.length-1;u+=2){const p=e[u];if(typeof p!="string")return t.error(`Expected string, but found ${typeof p} instead.`,u);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);const o=t.parse(e[u+1],u+1);if(!o)return null;n.push([p,o])}const l=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return l?new Gg(n,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var Lw=Gg;class Wg{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Rn),l=t.parse(e[2],2,ic(t.expectedType||so));if(!n||!l)return null;const u=l.type;return new Wg(u.itemType,n,l)}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new ol(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new ol(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new ol(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var wI=Wg;class Xg{constructor(e,t){this.type=oo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,so),l=t.parse(e[2],2,so);return!n||!l?null:Lg(n.type,[oo,ho,Rn,U1,so])?new Xg(n,l):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fs(n.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!$d(t,["boolean","string","number","null"]))throw new ol(`Expected first argument to be of type boolean, string, number or null, but found ${Fs(Ta(t))} instead.`);if(!$d(n,["string","array"]))throw new ol(`Expected second argument to be of type array or string, but found ${Fs(Ta(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var xI=Xg;class T1{constructor(e,t,n){this.type=Rn,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,so),l=t.parse(e[2],2,so);if(!n||!l)return null;if(!Lg(n.type,[oo,ho,Rn,U1,so]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fs(n.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,Rn);return u?new T1(n,l,u):null}else return new T1(n,l)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!$d(t,["boolean","string","number","null"]))throw new ol(`Expected first argument to be of type boolean, string, number or null, but found ${Fs(Ta(t))} instead.`);if(!$d(n,["string","array"]))throw new ol(`Expected second argument to be of type array or string, but found ${Fs(Ta(n))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(e);return n.indexOf(t,l)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var AI=T1;class Yg{constructor(e,t,n,l,u,p){this.inputType=e,this.type=t,this.input=n,this.cases=l,this.outputs=u,this.otherwise=p}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let n,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);const u={},p=[];for(let g=2;g<e.length-1;g+=2){let _=e[g];const v=e[g+1];Array.isArray(_)||(_=[_]);const w=t.concat(g);if(_.length===0)return w.error("Expected at least one branch label.");for(const C of _){if(typeof C!="number"&&typeof C!="string")return w.error("Branch labels must be numbers or strings.");if(typeof C=="number"&&Math.abs(C)>Number.MAX_SAFE_INTEGER)return w.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof C=="number"&&Math.floor(C)!==C)return w.error("Numeric branch labels must be integer values.");if(!n)n=Ta(C);else if(w.checkSubtype(n,Ta(C)))return null;if(typeof u[String(C)]<"u")return w.error("Branch labels must be unique.");u[String(C)]=p.length}const x=t.parse(v,g,l);if(!x)return null;l=l||x.type,p.push(x)}const o=t.parse(e[1],1,so);if(!o)return null;const c=t.parse(e[e.length-1],e.length-1,l);return!c||o.type.kind!=="value"&&t.concat(1).checkSubtype(n,o.type)?null:new Yg(n,l,o,u,p,c)}evaluate(e){const t=this.input.evaluate(e);return(Ta(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],l={};for(const p of t){const o=l[this.cases[p]];o===void 0?(l[this.cases[p]]=n.length,n.push([this.cases[p],[p]])):n[o][1].push(p)}const u=p=>this.inputType.kind==="number"?Number(p):p;for(const[p,o]of n)o.length===1?e.push(u(o[0])):e.push(o.map(u)),e.push(this.outputs[p].serialize());return e.push(this.otherwise.serialize()),e}}var SI=Yg;class Zg{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);const l=[];for(let p=1;p<e.length-1;p+=2){const o=t.parse(e[p],p,oo);if(!o)return null;const c=t.parse(e[p+1],p+1,n);if(!c)return null;l.push([o,c]),n=n||c.type}const u=t.parse(e[e.length-1],e.length-1,n);return u?new Zg(n,l,u):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var kI=Zg;class L1{constructor(e,t,n,l){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=l}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,so),l=t.parse(e[2],2,Rn);if(!n||!l)return null;if(!Lg(n.type,[ic(so),ho,so]))return t.error(`Expected first argument to be of type array or string, but found ${Fs(n.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,Rn);return u?new L1(n.type,n,l,u):null}else return new L1(n.type,n,l)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!$d(t,["string","array"]))throw new ol(`Expected first argument to be of type array or string, but found ${Fs(Ta(t))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(e);return t.slice(n,l)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var CI=L1;function Ev(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function EI(i,e,t){return e===t}function II(i,e,t){return e!==t}function TI(i,e,t){return e<t}function LI(i,e,t){return e>t}function PI(i,e,t){return e<=t}function MI(i,e,t){return e>=t}function Pw(i,e,t,n){return n.compare(e,t)===0}function DI(i,e,t,n){return!Pw(i,e,t,n)}function OI(i,e,t,n){return n.compare(e,t)<0}function FI(i,e,t,n){return n.compare(e,t)>0}function RI(i,e,t,n){return n.compare(e,t)<=0}function BI(i,e,t,n){return n.compare(e,t)>=0}function ud(i,e,t){const n=i!=="=="&&i!=="!=";return class Mw{constructor(u,p,o){this.type=oo,this.lhs=u,this.rhs=p,this.collator=o,this.hasUntypedArgument=u.type.kind==="value"||p.type.kind==="value"}static parse(u,p){if(u.length!==3&&u.length!==4)return p.error("Expected two or three arguments.");const o=u[0];let c=p.parse(u[1],1,so);if(!c)return null;if(!Ev(o,c.type))return p.concat(1).error(`"${o}" comparisons are not supported for type '${Fs(c.type)}'.`);let g=p.parse(u[2],2,so);if(!g)return null;if(!Ev(o,g.type))return p.concat(2).error(`"${o}" comparisons are not supported for type '${Fs(g.type)}'.`);if(c.type.kind!==g.type.kind&&c.type.kind!=="value"&&g.type.kind!=="value")return p.error(`Cannot compare types '${Fs(c.type)}' and '${Fs(g.type)}'.`);n&&(c.type.kind==="value"&&g.type.kind!=="value"?c=new Mh(g.type,[c]):c.type.kind!=="value"&&g.type.kind==="value"&&(g=new Mh(c.type,[g])));let _=null;if(u.length===4){if(c.type.kind!=="string"&&g.type.kind!=="string"&&c.type.kind!=="value"&&g.type.kind!=="value")return p.error("Cannot use collator to compare non-string types.");if(_=p.parse(u[3],3,V1),!_)return null}return new Mw(c,g,_)}evaluate(u){const p=this.lhs.evaluate(u),o=this.rhs.evaluate(u);if(n&&this.hasUntypedArgument){const c=Ta(p),g=Ta(o);if(c.kind!==g.kind||!(c.kind==="string"||c.kind==="number"))throw new ol(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${c.kind}, ${g.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const c=Ta(p),g=Ta(o);if(c.kind!=="string"||g.kind!=="string")return e(u,p,o)}return this.collator?t(u,p,o,this.collator.evaluate(u)):e(u,p,o)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[i];return this.eachChild(p=>{u.push(p.serialize())}),u}}}const zI=ud("==",EI,Pw),NI=ud("!=",II,DI),jI=ud("<",TI,OI),UI=ud(">",LI,FI),VI=ud("<=",PI,RI),qI=ud(">=",MI,BI);class Kg{constructor(e,t,n,l,u,p){this.type=ho,this.number=e,this.locale=t,this.currency=n,this.unit=l,this.minFractionDigits=u,this.maxFractionDigits=p}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Rn);if(!n)return null;const l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");let u=null;if(l.locale&&(u=t.parse(l.locale,1,ho),!u))return null;let p=null;if(l.currency&&(p=t.parse(l.currency,1,ho),!p))return null;let o=null;if(l.unit&&(o=t.parse(l.unit,1,ho),!o))return null;let c=null;if(l["min-fraction-digits"]&&(c=t.parse(l["min-fraction-digits"],1,Rn),!c))return null;let g=null;return l["max-fraction-digits"]&&(g=t.parse(l["max-fraction-digits"],1,Rn),!g)?null:new Kg(n,u,p,o,c,g)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Jg{constructor(e){this.type=Rn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Fs(n.type)} instead.`):new Jg(n):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new ol(`Expected value to be of type string or array, but found ${Fs(Ta(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var HI=Jg;const Dw={"==":zI,"!=":NI,">":UI,"<":jI,">=":qI,"<=":VI,array:Mh,at:wI,boolean:Mh,case:kI,coalesce:Tw,collator:W1,format:H1,image:G1,in:xI,"index-of":AI,interpolate:Fh,"interpolate-hcl":Fh,"interpolate-lab":Fh,length:HI,let:Lw,literal:k1,match:SI,number:Mh,"number-format":Kg,object:Mh,slice:CI,step:vw,string:Mh,"to-boolean":j0,"to-color":j0,"to-number":j0,"to-string":j0,var:yw,within:zg};function Iv(i,[e,t,n,l]){e=e.evaluate(i),t=t.evaluate(i),n=n.evaluate(i);const u=l?l.evaluate(i):1,p=fw(e,t,n,u);if(p)throw new ol(p);return new rl(e/255*u,t/255*u,n/255*u,u)}function Tv(i,e){return i in e}function n2(i,e){const t=e[i];return typeof t>"u"?null:t}function GI(i,e,t,n){for(;t<=n;){const l=t+n>>1;if(e[l]===i)return!0;e[l]>i?n=l-1:t=l+1}return!1}function Uf(i){return{type:i}}ad.register(Dw,{error:[qE,[ho],(i,[e])=>{throw new ol(e.evaluate(i))}],typeof:[ho,[so],(i,[e])=>Fs(Ta(e.evaluate(i)))],"to-rgba":[ic(Rn,4),[Oh],(i,[e])=>e.evaluate(i).toArray()],rgb:[Oh,[Rn,Rn,Rn],Iv],rgba:[Oh,[Rn,Rn,Rn,Rn],Iv],has:{type:oo,overloads:[[[ho],(i,[e])=>Tv(e.evaluate(i),i.properties())],[[ho,Y0],(i,[e,t])=>Tv(e.evaluate(i),t.evaluate(i))]]},get:{type:so,overloads:[[[ho],(i,[e])=>n2(e.evaluate(i),i.properties())],[[ho,Y0],(i,[e,t])=>n2(e.evaluate(i),t.evaluate(i))]]},"feature-state":[so,[ho],(i,[e])=>n2(e.evaluate(i),i.featureState||{})],properties:[Y0,[],i=>i.properties()],"geometry-type":[ho,[],i=>i.geometryType()],id:[so,[],i=>i.id()],zoom:[Rn,[],i=>i.globals.zoom],pitch:[Rn,[],i=>i.globals.pitch||0],"distance-from-center":[Rn,[],i=>i.distanceFromCenter()],"heatmap-density":[Rn,[],i=>i.globals.heatmapDensity||0],"line-progress":[Rn,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[Rn,[],i=>i.globals.skyRadialProgress||0],accumulated:[so,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Rn,Uf(Rn),(i,e)=>{let t=0;for(const n of e)t+=n.evaluate(i);return t}],"*":[Rn,Uf(Rn),(i,e)=>{let t=1;for(const n of e)t*=n.evaluate(i);return t}],"-":{type:Rn,overloads:[[[Rn,Rn],(i,[e,t])=>e.evaluate(i)-t.evaluate(i)],[[Rn],(i,[e])=>-e.evaluate(i)]]},"/":[Rn,[Rn,Rn],(i,[e,t])=>e.evaluate(i)/t.evaluate(i)],"%":[Rn,[Rn,Rn],(i,[e,t])=>e.evaluate(i)%t.evaluate(i)],ln2:[Rn,[],()=>Math.LN2],pi:[Rn,[],()=>Math.PI],e:[Rn,[],()=>Math.E],"^":[Rn,[Rn,Rn],(i,[e,t])=>Math.pow(e.evaluate(i),t.evaluate(i))],sqrt:[Rn,[Rn],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[Rn,[Rn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[Rn,[Rn],(i,[e])=>Math.log(e.evaluate(i))],log2:[Rn,[Rn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[Rn,[Rn],(i,[e])=>Math.sin(e.evaluate(i))],cos:[Rn,[Rn],(i,[e])=>Math.cos(e.evaluate(i))],tan:[Rn,[Rn],(i,[e])=>Math.tan(e.evaluate(i))],asin:[Rn,[Rn],(i,[e])=>Math.asin(e.evaluate(i))],acos:[Rn,[Rn],(i,[e])=>Math.acos(e.evaluate(i))],atan:[Rn,[Rn],(i,[e])=>Math.atan(e.evaluate(i))],min:[Rn,Uf(Rn),(i,e)=>Math.min(...e.map(t=>t.evaluate(i)))],max:[Rn,Uf(Rn),(i,e)=>Math.max(...e.map(t=>t.evaluate(i)))],abs:[Rn,[Rn],(i,[e])=>Math.abs(e.evaluate(i))],round:[Rn,[Rn],(i,[e])=>{const t=e.evaluate(i);return t<0?-Math.round(-t):Math.round(t)}],floor:[Rn,[Rn],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[Rn,[Rn],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[oo,[ho,so],(i,[e,t])=>i.properties()[e.value]===t.value],"filter-id-==":[oo,[so],(i,[e])=>i.id()===e.value],"filter-type-==":[oo,[ho],(i,[e])=>i.geometryType()===e.value],"filter-<":[oo,[ho,so],(i,[e,t])=>{const n=i.properties()[e.value],l=t.value;return typeof n==typeof l&&n<l}],"filter-id-<":[oo,[so],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t<n}],"filter->":[oo,[ho,so],(i,[e,t])=>{const n=i.properties()[e.value],l=t.value;return typeof n==typeof l&&n>l}],"filter-id->":[oo,[so],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t>n}],"filter-<=":[oo,[ho,so],(i,[e,t])=>{const n=i.properties()[e.value],l=t.value;return typeof n==typeof l&&n<=l}],"filter-id-<=":[oo,[so],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t<=n}],"filter->=":[oo,[ho,so],(i,[e,t])=>{const n=i.properties()[e.value],l=t.value;return typeof n==typeof l&&n>=l}],"filter-id->=":[oo,[so],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t>=n}],"filter-has":[oo,[so],(i,[e])=>e.value in i.properties()],"filter-has-id":[oo,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[oo,[ic(ho)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[oo,[ic(so)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[oo,[ho,ic(so)],(i,[e,t])=>t.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[oo,[ho,ic(so)],(i,[e,t])=>GI(i.properties()[e.value],t.value,0,t.value.length-1)],all:{type:oo,overloads:[[[oo,oo],(i,[e,t])=>e.evaluate(i)&&t.evaluate(i)],[Uf(oo),(i,e)=>{for(const t of e)if(!t.evaluate(i))return!1;return!0}]]},any:{type:oo,overloads:[[[oo,oo],(i,[e,t])=>e.evaluate(i)||t.evaluate(i)],[Uf(oo),(i,e)=>{for(const t of e)if(t.evaluate(i))return!0;return!1}]]},"!":[oo,[oo],(i,[e])=>!e.evaluate(i)],"is-supported-script":[oo,[ho],(i,[e])=>{const t=i.globals&&i.globals.isSupportedScript;return t?t(e.evaluate(i)):!0}],upcase:[ho,[ho],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[ho,[ho],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[ho,Uf(so),(i,e)=>e.map(t=>Ud(t.evaluate(i))).join("")],"resolved-locale":[ho,[V1],(i,[e])=>e.evaluate(i).resolvedLocale()]});var Ow=Dw;function sg(i){return{result:"success",value:i}}function R0(i){return{result:"error",value:i}}function WI(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function XI(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Fw(i){return!!i.expression&&i.expression.interpolated}function Qg(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function $g(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function YI(i){return i}function ey(i,e){const t=e.type==="color",n=i.stops&&typeof i.stops[0][0]=="object",l=n||i.property!==void 0,u=n||!l,p=i.type||(Fw(e)?"exponential":"interval");if(t&&(i=hw({},i),i.stops&&(i.stops=i.stops.map(_=>[_[0],rl.parse(_[1])])),i.default?i.default=rl.parse(i.default):i.default=rl.parse(e.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Iw[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let o,c,g;if(p==="exponential")o=Lv;else if(p==="interval")o=KI;else if(p==="categorical"){o=ZI,c=Object.create(null);for(const _ of i.stops)c[_[0]]=_[1];g=typeof i.stops[0][0]}else if(p==="identity")o=JI;else throw new Error(`Unknown function type "${p}"`);if(n){const _={},v=[];for(let C=0;C<i.stops.length;C++){const T=i.stops[C],k=T[0].zoom;_[k]===void 0&&(_[k]={zoom:k,type:i.type,property:i.property,default:i.default,stops:[]},v.push(k)),_[k].stops.push([T[0].value,T[1]])}const w=[];for(const C of v)w.push([_[C].zoom,ey(_[C],e)]);const x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:Fh.interpolationFactor.bind(void 0,x),zoomStops:w.map(C=>C[0]),evaluate({zoom:C},T){return Lv({stops:w,base:i.base},e,C).evaluate(C,T)}}}else if(u){const _=p==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:_,interpolationFactor:Fh.interpolationFactor.bind(void 0,_),zoomStops:i.stops.map(v=>v[0]),evaluate:({zoom:v})=>o(i,e,v,c,g)}}else return{kind:"source",evaluate(_,v){const w=v&&v.properties?v.properties[i.property]:void 0;return w===void 0?lp(i.default,e.default):o(i,e,w,c,g)}}}function lp(i,e,t){if(i!==void 0)return i;if(e!==void 0)return e;if(t!==void 0)return t}function ZI(i,e,t,n,l){const u=typeof t===l?n[t]:void 0;return lp(u,i.default,e.default)}function KI(i,e,t){if(Qg(t)!=="number")return lp(i.default,e.default);const n=i.stops.length;if(n===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[n-1][0])return i.stops[n-1][1];const l=X1(i.stops.map(u=>u[0]),t);return i.stops[l][1]}function Lv(i,e,t){const n=i.base!==void 0?i.base:1;if(Qg(t)!=="number")return lp(i.default,e.default);const l=i.stops.length;if(l===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[l-1][0])return i.stops[l-1][1];const u=X1(i.stops.map(_=>_[0]),t),p=QI(t,n,i.stops[u][0],i.stops[u+1][0]),o=i.stops[u][1],c=i.stops[u+1][1];let g=bw[e.type]||YI;if(i.colorSpace&&i.colorSpace!=="rgb"){const _=Iw[i.colorSpace];g=(v,w)=>_.reverse(_.interpolate(_.forward(v),_.forward(w),p))}return typeof o.evaluate=="function"?{evaluate(..._){const v=o.evaluate.apply(void 0,_),w=c.evaluate.apply(void 0,_);if(!(v===void 0||w===void 0))return g(v,w,p)}}:g(o,c,p)}function JI(i,e,t){return e.type==="color"?t=rl.parse(t):e.type==="formatted"?t=Ic.fromString(t.toString()):e.type==="resolvedImage"?t=Bh.fromString(t.toString()):Qg(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0),lp(t,i.default,e.default)}function QI(i,e,t,n){const l=n-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}class Rw{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new dw,this._defaultValue=t?tT(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,n,l,u,p,o,c){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=p,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=c||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,l,u,p,o,c){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=p||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=c||null;try{const g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!==g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new ol(`Expected value to be one of ${Object.keys(this._enumValues).map(_=>JSON.stringify(_)).join(", ")}, but found ${JSON.stringify(g)} instead.`);return g}catch(g){return this._warningHistory[g.message]||(this._warningHistory[g.message]=!0,typeof console<"u"&&console.warn(g.message)),this._defaultValue}}}function Bw(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Ow}function zw(i,e){const t=new _w(Ow,[],e?eT(e):void 0),n=t.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?sg(new Rw(n,e)):R0(t.errors)}class ag{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!jg(t.expression)}evaluateWithoutErrorHandling(e,t,n,l,u,p){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,l,u,p)}evaluate(e,t,n,l,u,p){return this._styleExpression.evaluate(e,t,n,l,u,p)}}class lg{constructor(e,t,n,l){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!jg(t.expression),this.interpolationType=l}evaluateWithoutErrorHandling(e,t,n,l,u,p){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,l,u,p)}evaluate(e,t,n,l,u,p){return this._styleExpression.evaluate(e,t,n,l,u,p)}interpolationFactor(e,t,n){return this.interpolationType?Fh.interpolationFactor(this.interpolationType,e,t,n):0}}function Nw(i,e){if(i=zw(i,e),i.result==="error")return i;const t=i.value.expression,n=Ng(t);if(!n&&!WI(e))return R0([new Qc("","data expressions not supported")]);const l=Ug(t,["zoom","pitch","distance-from-center"]);if(!l&&!XI(e))return R0([new Qc("","zoom expressions not supported")]);const u=c1(t);if(!u&&!l)return R0([new Qc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof Qc)return R0([u]);if(u instanceof Fh&&!Fw(e))return R0([new Qc("",'"interpolate" expressions cannot be used with this property')]);if(!u)return sg(n?new ag("constant",i.value):new ag("source",i.value));const p=u instanceof Fh?u.interpolation:void 0;return sg(n?new lg("camera",i.value,u.labels,p):new lg("composite",i.value,u.labels,p))}class Y1{constructor(e,t){this._parameters=e,this._specification=t,hw(this,ey(this._parameters,this._specification))}static deserialize(e){return new Y1(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function $I(i,e){if($g(i))return new Y1(i,e);if(Bw(i)){const t=Nw(i,e);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return t.value}else{let t=i;return typeof i=="string"&&e.type==="color"&&(t=rl.parse(i)),{kind:"constant",evaluate:()=>t}}}function c1(i){let e=null;if(i instanceof Lw)e=c1(i.result);else if(i instanceof Tw){for(const t of i.args)if(e=c1(t),e)break}else(i instanceof vw||i instanceof Fh)&&i.input instanceof ad&&i.input.name==="zoom"&&(e=i);return e instanceof Qc||i.eachChild(t=>{const n=c1(t);n instanceof Qc?e=n:!e&&n?e=new Qc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new Qc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function eT(i){const e={color:Oh,string:ho,number:Rn,enum:ho,boolean:oo,formatted:q1,resolvedImage:ap};return i.type==="array"?ic(e[i.value]||so,i.length):e[i.type]}function tT(i){return i.type==="color"&&($g(i.default)||Array.isArray(i.default))?new rl(0,0,0,0):i.type==="color"?rl.parse(i.default)||null:i.default===void 0?null:i.default}function ep(i){return typeof i=="object"?["literal",i]:i}function iT(i,e){let t=i.stops;if(!t)return nT(i,e);const n=t&&typeof t[0][0]=="object",l=n||i.property!==void 0,u=n||!l;return t=t.map(p=>!l&&e.tokens&&typeof p[1]=="string"?[p[0],aT(p[1])]:[p[0],ep(p[1])]),n?rT(i,e,t):u?sT(i,e,t):ug(i,e,t)}function nT(i,e){const t=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,i.default];{const n=[e.type==="color"?"to-color":e.type,t,ep(i.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}}function ty(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function rT(i,e,t){const n={},l={},u=[];for(let o=0;o<t.length;o++){const c=t[o],g=c[0].zoom;n[g]===void 0&&(n[g]={zoom:g,type:i.type,property:i.property,default:i.default},l[g]=[],u.push(g)),l[g].push([c[0].value,c[1]])}if(ny({},e)==="exponential"){const o=[ty(i),["linear"],["zoom"]];for(const c of u){const g=ug(n[c],e,l[c]);K0(o,c,g,!1)}return o}else{const o=["step",["zoom"]];for(const c of u){const g=ug(n[c],e,l[c]);K0(o,c,g,!0)}return iy(o),o}}function oT(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function Pv(i,e){const t=ep(oT(i.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function ug(i,e,t){const n=ny(i,e),l=["get",i.property];if(n==="categorical"&&typeof t[0][0]=="boolean"){const u=["case"];for(const p of t)u.push(["==",l,p[0]],p[1]);return u.push(Pv(i,e)),u}else if(n==="categorical"){const u=["match",l];for(const p of t)K0(u,p[0],p[1],!1);return u.push(Pv(i,e)),u}else if(n==="interval"){const u=["step",["number",l]];for(const p of t)K0(u,p[0],p[1],!0);return iy(u),i.default===void 0?u:["case",["==",["typeof",l],"number"],u,ep(i.default)]}else if(n==="exponential"){const u=i.base!==void 0?i.base:1,p=[ty(i),u===1?["linear"]:["exponential",u],["number",l]];for(const o of t)K0(p,o[0],o[1],!1);return i.default===void 0?p:["case",["==",["typeof",l],"number"],p,ep(i.default)]}else throw new Error(`Unknown property function type ${n}`)}function sT(i,e,t,n=["zoom"]){const l=ny(i,e);let u,p=!1;if(l==="interval")u=["step",n],p=!0;else if(l==="exponential"){const o=i.base!==void 0?i.base:1;u=[ty(i),o===1?["linear"]:["exponential",o],n]}else throw new Error(`Unknown zoom function type "${l}"`);for(const o of t)K0(u,o[0],o[1],p);return iy(u),u}function iy(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function K0(i,e,t,n){i.length>3&&e===i[i.length-2]||(n&&i.length===2||i.push(e),i.push(t))}function ny(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function aT(i){const e=["concat"],t=/{([^{}]+)}/g;let n=0;for(let l=t.exec(i);l!==null;l=t.exec(i)){const u=i.slice(n,t.lastIndex-l[0].length);n=t.lastIndex,u.length>0&&e.push(u),e.push(["get",l[1]])}if(e.length===1)return i;if(n<i.length)e.push(i.slice(n));else if(e.length===2)return["to-string",e[1]];return e}function jw(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!jw(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}j1(function(i,e){var t=function(){var n=function(M,O,V,W){for(V=V||{},W=M.length;W--;V[M[W]]=O);return V},l=[1,12],u=[1,13],p=[1,9],o=[1,10],c=[1,11],g=[1,14],_=[1,15],v=[14,18,22,24],w=[18,22],x=[22,24],C={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(O,V,W,J,Q,Z,ie){var Se=Z.length-1;switch(Q){case 1:this.$=new String(O.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(O),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=Z[Se-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=Z[Se-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[Z[Se-2],Z[Se]];break;case 16:this.$={},this.$[Z[Se][0]]=Z[Se][1];break;case 17:this.$=Z[Se-2],Z[Se-2][Z[Se][0]]=Z[Se][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[Z[Se]];break;case 21:this.$=Z[Se-2],Z[Se-2].push(Z[Se]);break}},table:[{3:5,4:l,5:6,6:u,7:3,8:p,9:4,10:o,11:c,12:1,13:2,15:7,16:8,17:g,23:_},{1:[3]},{14:[1,16]},n(v,[2,7]),n(v,[2,8]),n(v,[2,9]),n(v,[2,10]),n(v,[2,11]),n(v,[2,12]),n(v,[2,3]),n(v,[2,4]),n(v,[2,5]),n([14,18,21,22,24],[2,1]),n(v,[2,2]),{3:20,4:l,18:[1,17],19:18,20:19},{3:5,4:l,5:6,6:u,7:3,8:p,9:4,10:o,11:c,13:23,15:7,16:8,17:g,23:_,24:[1,21],25:22},{1:[2,6]},n(v,[2,13]),{18:[1,24],22:[1,25]},n(w,[2,16]),{21:[1,26]},n(v,[2,18]),{22:[1,28],24:[1,27]},n(x,[2,20]),n(v,[2,14]),{3:20,4:l,20:29},{3:5,4:l,5:6,6:u,7:3,8:p,9:4,10:o,11:c,13:30,15:7,16:8,17:g,23:_},n(v,[2,19]),{3:5,4:l,5:6,6:u,7:3,8:p,9:4,10:o,11:c,13:31,15:7,16:8,17:g,23:_},n(w,[2,17]),n(w,[2,15]),n(x,[2,21])],defaultActions:{16:[2,6]},parseError:function(O,V){if(V.recoverable)this.trace(O);else throw new Error(O)},parse:function(O){var V=this,W=[0],J=[null],Q=[],Z=this.table,ie="",Se=0,xe=0,le=2,Ee=1,me=Q.slice.call(arguments,1),Ae=Object.create(this.lexer),pt={yy:{}};for(var rt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,rt)&&(pt.yy[rt]=this.yy[rt]);Ae.setInput(O,pt.yy),pt.yy.lexer=Ae,pt.yy.parser=this,typeof Ae.yylloc>"u"&&(Ae.yylloc={});var Pt=Ae.yylloc;Q.push(Pt);var We=Ae.options&&Ae.options.ranges;typeof pt.yy.parseError=="function"?this.parseError=pt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function be(){var $e;return $e=Ae.lex()||Ee,typeof $e!="number"&&($e=V.symbols_[$e]||$e),$e}for(var Le,Ue,ce,Ie,de={},ge,Re,Ze,ut;;){if(Ue=W[W.length-1],this.defaultActions[Ue]?ce=this.defaultActions[Ue]:((Le===null||typeof Le>"u")&&(Le=be()),ce=Z[Ue]&&Z[Ue][Le]),typeof ce>"u"||!ce.length||!ce[0]){var Xe="";ut=[];for(ge in Z[Ue])this.terminals_[ge]&&ge>le&&ut.push("'"+this.terminals_[ge]+"'");Ae.showPosition?Xe="Parse error on line "+(Se+1)+`:
`+Ae.showPosition()+`
Expecting `+ut.join(", ")+", got '"+(this.terminals_[Le]||Le)+"'":Xe="Parse error on line "+(Se+1)+": Unexpected "+(Le==Ee?"end of input":"'"+(this.terminals_[Le]||Le)+"'"),this.parseError(Xe,{text:Ae.match,token:this.terminals_[Le]||Le,line:Ae.yylineno,loc:Pt,expected:ut})}if(ce[0]instanceof Array&&ce.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ue+", token: "+Le);switch(ce[0]){case 1:W.push(Le),J.push(Ae.yytext),Q.push(Ae.yylloc),W.push(ce[1]),Le=null,xe=Ae.yyleng,ie=Ae.yytext,Se=Ae.yylineno,Pt=Ae.yylloc;break;case 2:if(Re=this.productions_[ce[1]][1],de.$=J[J.length-Re],de._$={first_line:Q[Q.length-(Re||1)].first_line,last_line:Q[Q.length-1].last_line,first_column:Q[Q.length-(Re||1)].first_column,last_column:Q[Q.length-1].last_column},We&&(de._$.range=[Q[Q.length-(Re||1)].range[0],Q[Q.length-1].range[1]]),Ie=this.performAction.apply(de,[ie,xe,Se,pt.yy,ce[1],J,Q].concat(me)),typeof Ie<"u")return Ie;Re&&(W=W.slice(0,-1*Re*2),J=J.slice(0,-1*Re),Q=Q.slice(0,-1*Re)),W.push(this.productions_[ce[1]][0]),J.push(de.$),Q.push(de._$),Ze=Z[W[W.length-2]][W[W.length-1]],W.push(Ze);break;case 3:return!0}}return!0}},T=function(){var M={EOF:1,parseError:function(V,W){if(this.yy.parser)this.yy.parser.parseError(V,W);else throw new Error(V)},setInput:function(O,V){return this.yy=V||this.yy||{},this._input=O,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var V=O.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),O},unput:function(O){var V=O.length,W=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var J=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),W.length-1&&(this.yylineno-=W.length-1);var Q=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:W?(W.length===J.length?this.yylloc.first_column:0)+J[J.length-W.length].length-W[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[Q[0],Q[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(O){this.unput(this.match.slice(O))},pastInput:function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var O=this.match;return O.length<20&&(O+=this._input.substr(0,20-O.length)),(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var O=this.pastInput(),V=new Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+V+"^"},test_match:function(O,V){var W,J,Q;if(this.options.backtrack_lexer&&(Q={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Q.yylloc.range=this.yylloc.range.slice(0))),J=O[0].match(/(?:\r\n?|\n).*/g),J&&(this.yylineno+=J.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:J?J[J.length-1].length-J[J.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+O[0].length},this.yytext+=O[0],this.match+=O[0],this.matches=O,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(O[0].length),this.matched+=O[0],W=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),W)return W;if(this._backtrack){for(var Z in Q)this[Z]=Q[Z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var O,V,W,J;this._more||(this.yytext="",this.match="");for(var Q=this._currentRules(),Z=0;Z<Q.length;Z++)if(W=this._input.match(this.rules[Q[Z]]),W&&(!V||W[0].length>V[0].length)){if(V=W,J=Z,this.options.backtrack_lexer){if(O=this.test_match(W,Q[Z]),O!==!1)return O;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(O=this.test_match(V,Q[J]),O!==!1?O:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(V,W,J,Q){switch(J){case 0:break;case 1:return 6;case 2:return W.yytext=W.yytext.substr(1,W.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return M}();C.lexer=T;function k(){this.yy={}}return k.prototype=C,C.Parser=k,new k}();typeof BE<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})});const lT={StyleExpression:Rw,isExpression:Bw,isExpressionFilter:jw,createExpression:zw,createPropertyExpression:Nw,normalizePropertyExpression:$I,ZoomConstantExpression:ag,ZoomDependentExpression:lg,StylePropertyFunction:Y1},uT={convertFunction:iT,createFunction:ey,isFunction:$g};function cT(i){var e=i.expr,t=i.layer,n=Math.min(e(t,"paint","circle-radius"),8),l=Math.min(e(t,"paint","circle-stroke-width"),4),u=e(t,"paint","circle-color"),p=e(t,"paint","circle-opacity"),o=e(t,"paint","circle-stroke-color"),c=e(t,"paint","circle-stroke-opacity"),g=n-l/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(t,"paint","circle-blur")*g+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:p,r:g}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:c,r:n,"stroke-width":l,stroke:o}}]}}function hT(i){var e=i.expr,t=i.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,i.image)(e(t,"paint","fill-pattern"))+")",backgroundColor:e(t,"paint","fill-color"),opacity:e(t,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function fT(i){var e=i.layer,t=i.expr,n=(0,i.image)(t(e,"paint","line-pattern")),l={stroke:n?"url(#img1)":t(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(t(e,"paint","line-width"),8)),strokeOpacity:t(e,"paint","line-opacity")},u=l.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:l.strokeWidth,height:l.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:n,x:0,y:0,width:l.strokeWidth,height:l.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:l,stroke:l.stroke,d:"M0 20 L 20 0"}}]}}function dT(i){return function(o){var c=o.image,g=(0,o.expr)(o.layer,"layout","icon-image");if(!g)return null;var _=c(g);return _?{element:"div",attributes:{style:{backgroundImage:"url("+_+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(i)||(l=(t=(e=i).expr)(n=e.layer,"paint","text-color"),u=t(n,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:p="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:t(n,"paint","text-halo-color"),"stroke-width":2*t(n,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:p,fill:"white"}},{element:"path",attributes:{key:"l3",d:p,fill:l,opacity:u}}]});var e,t,n,l,u,p}var pT=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function mT(i){var e,t=i.sprite,n=i.layer,l={circle:cT,symbol:dT,line:fT,fill:hT}[n.type],u=(e=i.zoom,function(p,o,c){var g=function(C){var T=pT.find(function(k){return C.startsWith(k[0])});return T?T[1]||T[0]:null}(c),_=RE[o+"_"+g][c];if(!p[o])return _.default;var v=p[o][c];if(v===void 0)return _.default;if(typeof v=="object"){var w;if(!(w=Array.isArray(v)?lT.createExpression(v).value:uT.createFunction(v,_)).evaluate)return null;var x=w.evaluate({zoom:e},{});return x?x.name||x:null}return v});return l?l({layer:n,expr:u,image:function(p){if(t&&t.json){var o=t.json[p];if(o)return c=t.image,_=(g=o).x,v=g.y,w=g.width,x=g.height,(C=document.createElement("canvas")).width=2*w,C.height=2*x,C.getContext("2d").drawImage(c,2*_,2*v,2*w,2*x,0,0,2*w,2*x),C.toDataURL()}var c,g,_,v,w,x,C;return null}}):null}function gT(i){let e,t=i[0].innerHTML+"";return{c(){e=Li("div"),this.h()},l(n){e=Pi(n,"DIV",{class:!0});var l=Ti(e);l.forEach(Oe),this.h()},h(){hi(e,"class","legend svelte-1dizgfa")},m(n,l){wt(n,e,l),e.innerHTML=t},p(n,[l]){l&1&&t!==(t=n[0].innerHTML+"")&&(e.innerHTML=t)},i:Co,o:Co,d(n){n&&Oe(e)}}}function yT(i,e,t){let{map:n}=e,{layer:l}=e,{spriteLoader:u}=e,p=document.createElement("div");const o=async()=>{const c=n.getZoom(),g=mT({zoom:c,layer:l});if(t(0,p.innerText="",p),g){let v,w,x;switch(g.element){case"div":if(g.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(g.attributes.style.backgroundImage)){var _=document.createElement("img");_.src=g.attributes.style.backgroundImage.replace("url(","").replace(")",""),_.alt=l.id,_.style.cssText="height: 24px;",p.appendChild(_)}v=document.createElement("div"),v.style.height="24px",v.style.width="50px",v.style.backgroundColor=g.attributes.style.backgroundColor,v.style.backgroundPosition=g.attributes.style.backgroundPosition,v.style.backgroundSize=g.attributes.style.backgroundSize,v.style.backgroundRepeat=g.attributes.style.backgroundRepeat,v.style.opacity=g.attributes.style.opacity,p.appendChild(v);break;case"svg":if(u&&(x=u.getIconDataUrl(l),x)){const C=document.createElement("img");C.src=x,C.alt=l.id,C.style.cssText="height: 24px;",p.appendChild(C);break}w=document.createElementNS("http://www.w3.org/2000/svg","svg"),w.style.cssText="height: 24px;",w.setAttributeNS(null,"version","1.1"),Object.keys(g.attributes).forEach(C=>{w.setAttribute(C,g.attributes[C]);let T=document.createElementNS("http://www.w3.org/2000/svg","g");g.children.forEach(k=>{var M=document.createElementNS("http://www.w3.org/2000/svg",k.element);Object.keys(k.attributes).forEach(O=>{M.setAttributeNS(null,O,k.attributes[O])}),T.appendChild(M)}),w.appendChild(T)}),p.appendChild(w);break;default:console.log(g.element);return}}else{const v=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=document.createElementNS("http://www.w3.org/2000/svg","path"),x=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("fill","none"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("stroke","black"),v.classList.add("post-icon"),w.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),w.setAttribute("stroke-linecap","round"),w.setAttribute("stroke-linejoin","round"),w.setAttribute("stroke-width","2"),x.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),x.setAttribute("stroke-linecap","round"),x.setAttribute("stroke-linejoin","round"),x.setAttribute("stroke-width","2"),v.appendChild(w),v.appendChild(x),p.appendChild(v)}};return n.on("moveend",o),n.on("zoom",o),i.$$set=c=>{"map"in c&&t(1,n=c.map),"layer"in c&&t(2,l=c.layer),"spriteLoader"in c&&t(3,u=c.spriteLoader)},i.$$.update=()=>{i.$$.dirty&4&&o()},[p,n,l,u]}class _T extends fr{constructor(e){super(),dr(this,e,yT,gT,hr,{map:1,layer:2,spriteLoader:3})}}const Xp=parseFloat;function cg(i,e=";"){let t;if(Array.isArray(i))t=i.filter(n=>n);else{t=[];for(const n in i)i[n]&&t.push(`${n}:${i[n]}`)}return t.join(e)}function vT(i,e,t,n){let l,u;const p="1em";let o,c,g,_="-.125em";const v="visible";return n&&(g="center",u="1.25em"),t&&(l=t),e&&(e=="lg"?(c="1.33333em",o=".75em",_="-.225em"):e=="xs"?c=".75em":e=="sm"?c=".875em":c=e.replace("x","em")),cg([cg({float:l,width:u,height:p,"line-height":o,"font-size":c,"text-align":g,"vertical-align":_,"transform-origin":"center",overflow:v}),i])}function bT(i,e,t,n,l,u=1,p="",o=""){let c=1,g=1;return l&&(l=="horizontal"?c=-1:l=="vertical"?g=-1:c=g=-1),cg([`translate(${Xp(e)*u}${p},${Xp(t)*u}${p})`,`scale(${c*Xp(i)},${g*Xp(i)})`,n&&`rotate(${n}${o})`]," ")}function Mv(i){let e,t,n,l,u,p,o,c;function g(w,x){return typeof w[10][4]=="string"?xT:wT}let _=g(i),v=_(i);return{c(){e=rh("svg"),t=rh("g"),n=rh("g"),v.c(),this.h()},l(w){e=oh(w,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var x=Ti(e);t=oh(x,"g",{transform:!0,"transform-origin":!0});var C=Ti(t);n=oh(C,"g",{transform:!0});var T=Ti(n);v.l(T),T.forEach(Oe),C.forEach(Oe),x.forEach(Oe),this.h()},h(){hi(n,"transform",i[12]),hi(t,"transform",l="translate("+i[10][0]/2+" "+i[10][1]/2+")"),hi(t,"transform-origin",u=i[10][0]/4+" 0"),hi(e,"id",p=i[1]||void 0),hi(e,"class",o="svelte-fa "+i[0]+" svelte-1cj2gr0"),hi(e,"style",i[11]),hi(e,"viewBox",c="0 0 "+i[10][0]+" "+i[10][1]),hi(e,"aria-hidden","true"),hi(e,"role","img"),hi(e,"xmlns","http://www.w3.org/2000/svg"),ih(e,"pulse",i[4]),ih(e,"spin",i[3])},m(w,x){wt(w,e,x),Xi(e,t),Xi(t,n),v.m(n,null)},p(w,x){_===(_=g(w))&&v?v.p(w,x):(v.d(1),v=_(w),v&&(v.c(),v.m(n,null))),x&4096&&hi(n,"transform",w[12]),x&1024&&l!==(l="translate("+w[10][0]/2+" "+w[10][1]/2+")")&&hi(t,"transform",l),x&1024&&u!==(u=w[10][0]/4+" 0")&&hi(t,"transform-origin",u),x&2&&p!==(p=w[1]||void 0)&&hi(e,"id",p),x&1&&o!==(o="svelte-fa "+w[0]+" svelte-1cj2gr0")&&hi(e,"class",o),x&2048&&hi(e,"style",w[11]),x&1024&&c!==(c="0 0 "+w[10][0]+" "+w[10][1])&&hi(e,"viewBox",c),x&17&&ih(e,"pulse",w[4]),x&9&&ih(e,"spin",w[3])},d(w){w&&Oe(e),v.d()}}}function wT(i){let e,t,n,l,u,p,o,c,g,_;return{c(){e=rh("path"),p=rh("path"),this.h()},l(v){e=oh(v,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Ti(e).forEach(Oe),p=oh(v,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Ti(p).forEach(Oe),this.h()},h(){hi(e,"d",t=i[10][4][0]),hi(e,"fill",n=i[6]||i[2]||"currentColor"),hi(e,"fill-opacity",l=i[9]!=!1?i[7]:i[8]),hi(e,"transform",u="translate("+i[10][0]/-2+" "+i[10][1]/-2+")"),hi(p,"d",o=i[10][4][1]),hi(p,"fill",c=i[5]||i[2]||"currentColor"),hi(p,"fill-opacity",g=i[9]!=!1?i[8]:i[7]),hi(p,"transform",_="translate("+i[10][0]/-2+" "+i[10][1]/-2+")")},m(v,w){wt(v,e,w),wt(v,p,w)},p(v,w){w&1024&&t!==(t=v[10][4][0])&&hi(e,"d",t),w&68&&n!==(n=v[6]||v[2]||"currentColor")&&hi(e,"fill",n),w&896&&l!==(l=v[9]!=!1?v[7]:v[8])&&hi(e,"fill-opacity",l),w&1024&&u!==(u="translate("+v[10][0]/-2+" "+v[10][1]/-2+")")&&hi(e,"transform",u),w&1024&&o!==(o=v[10][4][1])&&hi(p,"d",o),w&36&&c!==(c=v[5]||v[2]||"currentColor")&&hi(p,"fill",c),w&896&&g!==(g=v[9]!=!1?v[8]:v[7])&&hi(p,"fill-opacity",g),w&1024&&_!==(_="translate("+v[10][0]/-2+" "+v[10][1]/-2+")")&&hi(p,"transform",_)},d(v){v&&Oe(e),v&&Oe(p)}}}function xT(i){let e,t,n,l;return{c(){e=rh("path"),this.h()},l(u){e=oh(u,"path",{d:!0,fill:!0,transform:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"d",t=i[10][4]),hi(e,"fill",n=i[2]||i[5]||"currentColor"),hi(e,"transform",l="translate("+i[10][0]/-2+" "+i[10][1]/-2+")")},m(u,p){wt(u,e,p)},p(u,p){p&1024&&t!==(t=u[10][4])&&hi(e,"d",t),p&36&&n!==(n=u[2]||u[5]||"currentColor")&&hi(e,"fill",n),p&1024&&l!==(l="translate("+u[10][0]/-2+" "+u[10][1]/-2+")")&&hi(e,"transform",l)},d(u){u&&Oe(e)}}}function AT(i){let e,t=i[10][4]&&Mv(i);return{c(){t&&t.c(),e=hn()},l(n){t&&t.l(n),e=hn()},m(n,l){t&&t.m(n,l),wt(n,e,l)},p(n,[l]){n[10][4]?t?t.p(n,l):(t=Mv(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Co,o:Co,d(n){t&&t.d(n),n&&Oe(e)}}}function ST(i,e,t){let{class:n=""}=e,{id:l=""}=e,{style:u=""}=e,{icon:p}=e,{size:o=""}=e,{color:c=""}=e,{fw:g=!1}=e,{pull:_=""}=e,{scale:v=1}=e,{translateX:w=0}=e,{translateY:x=0}=e,{rotate:C=""}=e,{flip:T=!1}=e,{spin:k=!1}=e,{pulse:M=!1}=e,{primaryColor:O=""}=e,{secondaryColor:V=""}=e,{primaryOpacity:W=1}=e,{secondaryOpacity:J=.4}=e,{swapOpacity:Q=!1}=e,Z,ie,Se;return i.$$set=xe=>{"class"in xe&&t(0,n=xe.class),"id"in xe&&t(1,l=xe.id),"style"in xe&&t(13,u=xe.style),"icon"in xe&&t(14,p=xe.icon),"size"in xe&&t(15,o=xe.size),"color"in xe&&t(2,c=xe.color),"fw"in xe&&t(16,g=xe.fw),"pull"in xe&&t(17,_=xe.pull),"scale"in xe&&t(18,v=xe.scale),"translateX"in xe&&t(19,w=xe.translateX),"translateY"in xe&&t(20,x=xe.translateY),"rotate"in xe&&t(21,C=xe.rotate),"flip"in xe&&t(22,T=xe.flip),"spin"in xe&&t(3,k=xe.spin),"pulse"in xe&&t(4,M=xe.pulse),"primaryColor"in xe&&t(5,O=xe.primaryColor),"secondaryColor"in xe&&t(6,V=xe.secondaryColor),"primaryOpacity"in xe&&t(7,W=xe.primaryOpacity),"secondaryOpacity"in xe&&t(8,J=xe.secondaryOpacity),"swapOpacity"in xe&&t(9,Q=xe.swapOpacity)},i.$$.update=()=>{i.$$.dirty&16384&&t(10,Z=p&&p.icon||[0,0,"",[],""]),i.$$.dirty&237568&&t(11,ie=vT(u,o,_,g)),i.$$.dirty&8126464&&t(12,Se=bT(v,w,x,C,T,512))},[n,l,c,k,M,O,V,W,J,Q,Z,ie,Se,u,p,o,g,_,v,w,x,C,T]}class ry extends fr{constructor(e){super(),dr(this,e,ST,AT,hr,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}var Uw={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e="fas",t="eye",n=576,l=512,u=[128065],p="f06e",o="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z";i.definition={prefix:e,iconName:t,icon:[n,l,u,p,o]},i.faEye=i.definition,i.prefix=e,i.iconName=t,i.width=n,i.height=l,i.ligatures=u,i.unicode=p,i.svgPathData=o,i.aliases=u})(Uw);var Vw={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e="fas",t="eye-slash",n=640,l=512,u=[],p="f070",o="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z";i.definition={prefix:e,iconName:t,icon:[n,l,u,p,o]},i.faEyeSlash=i.definition,i.prefix=e,i.iconName=t,i.width=n,i.height=l,i.ligatures=u,i.unicode=p,i.svgPathData=o,i.aliases=u})(Vw);function kT(i){let e,t;return e=new ry({props:{icon:Vw.faEyeSlash,scale:1}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p:Co,i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function CT(i){let e,t;return e=new ry({props:{icon:Uw.faEye,scale:1}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p:Co,i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function ET(i){let e,t,n,l,u,p,o,c,g,_,v=(i[3]&&i[3][i[1].id]?i[3][i[1].id]:i[1].id)+"",w,x,C,T;const k=[CT,kT],M=[];function O(V,W){return V[4]?0:1}return l=O(i),u=M[l]=k[l](i),c=new _T({props:{map:i[0],layer:i[1],spriteLoader:i[2]}}),{c(){e=Li("div"),t=Li("div"),n=Li("button"),u.c(),p=$i(),o=Li("div"),xi(c.$$.fragment),g=$i(),_=Li("div"),w=gn(v),this.h()},l(V){e=Pi(V,"DIV",{class:!0});var W=Ti(e);t=Pi(W,"DIV",{class:!0});var J=Ti(t);n=Pi(J,"BUTTON",{class:!0});var Q=Ti(n);u.l(Q),Q.forEach(Oe),J.forEach(Oe),p=en(W),o=Pi(W,"DIV",{class:!0});var Z=Ti(o);Ci(c.$$.fragment,Z),Z.forEach(Oe),g=en(W),_=Pi(W,"DIV",{class:!0});var ie=Ti(_);w=yn(ie,v),ie.forEach(Oe),W.forEach(Oe),this.h()},h(){hi(n,"class","button is-text is-narrow"),hi(t,"class","column .is-marginless is-paddingless"),hi(o,"class","column is-narrow .is-marginless is-paddingless"),hi(_,"class","column is-narrow .is-marginless pl-2 has-text-left"),hi(e,"class","columns is-vcentered is-mobile")},m(V,W){wt(V,e,W),Xi(e,t),Xi(t,n),M[l].m(n,null),Xi(e,p),Xi(e,o),Ai(c,o,null),Xi(e,g),Xi(e,_),Xi(_,w),x=!0,C||(T=Vn(n,"click",i[5]),C=!0)},p(V,[W]){let J=l;l=O(V),l===J?M[l].p(V,W):(Sr(),ct(M[J],1,1,()=>{M[J]=null}),Ar(),u=M[l],u?u.p(V,W):(u=M[l]=k[l](V),u.c()),tt(u,1),u.m(n,null));const Q={};W&1&&(Q.map=V[0]),W&2&&(Q.layer=V[1]),W&4&&(Q.spriteLoader=V[2]),c.$set(Q),(!x||W&10)&&v!==(v=(V[3]&&V[3][V[1].id]?V[3][V[1].id]:V[1].id)+"")&&bs(w,v)},i(V){x||(tt(u),tt(c.$$.fragment,V),x=!0)},o(V){ct(u),ct(c.$$.fragment,V),x=!1},d(V){V&&Oe(e),M[l].d(),Si(c),C=!1,T()}}}function IT(i,e,t){const n=O1();let{map:l}=e,{layer:u}=e,{spriteLoader:p}=e,{relativeLayers:o={}}=e,g=(u.layout&&u.layout.visibility?u.layout.visibility:void 0)!=="none";const _=()=>{l.setLayoutProperty(u.id,"visibility",g===!0?"visible":"none"),n("visibilityChanged",{layer:u})},v=()=>t(4,g=!g);return i.$$set=w=>{"map"in w&&t(0,l=w.map),"layer"in w&&t(1,u=w.layer),"spriteLoader"in w&&t(2,p=w.spriteLoader),"relativeLayers"in w&&t(3,o=w.relativeLayers)},i.$$.update=()=>{i.$$.dirty&16&&_()},[l,u,p,o,g,v]}class Z1 extends fr{constructor(e){super(),dr(this,e,IT,ET,hr,{map:0,layer:1,spriteLoader:2,relativeLayers:3})}}class TT{constructor(e){Fm(this,"spriteUrl");Fm(this,"sprite");this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let t=!1;const n=new Promise((l,u)=>{const p=new Image;p.crossOrigin="Anonymous",p.onload=()=>{t||l(p)},p.onerror=o=>{t||u(o)},p.src=e});return n.cancel=()=>{t=!0},n}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){var n;let t;if(e.layout&&e.layout["icon-image"]){let l=e.layout["icon-image"];if(Array.isArray(l)&&(l=l[l.length-1]),(n=this.sprite)!=null&&n.json){let u;Object.keys(this.sprite.json).forEach(p=>{p===l&&(u=this.sprite.json[p])}),u&&(t=this.extractPartOfImage(this.sprite.image,u))}}return t}extractPartOfImage(e,t){const l=document.createElement("canvas");return l.width=t.width*1,l.height=t.height*1,l.getContext("2d").drawImage(e,t.x*1,t.y*1,t.width*1,t.height*1,0,0,t.width*1,t.height*1),l.toDataURL()}}function Dv(i,e,t){const n=i.slice();return n[14]=e[t],n}function Ov(i){let e,t,n,l,u,p,o;return{c(){e=Li("li"),t=Li("a"),n=Li("span"),l=gn("Show related"),this.h()},l(c){e=Pi(c,"LI",{class:!0});var g=Ti(e);t=Pi(g,"A",{});var _=Ti(t);n=Pi(_,"SPAN",{});var v=Ti(n);l=yn(v,"Show related"),v.forEach(Oe),_.forEach(Oe),g.forEach(Oe),this.h()},h(){hi(e,"class",u=i[4]?"is-active":"")},m(c,g){wt(c,e,g),Xi(e,t),Xi(t,n),Xi(n,l),p||(o=Vn(e,"click",i[10]),p=!0)},p(c,g){g&16&&u!==(u=c[4]?"is-active":"")&&hi(e,"class",u)},d(c){c&&Oe(e),p=!1,o()}}}function Fv(i){let e=i[1],t,n,l=jv(i);return{c(){l.c(),t=hn()},l(u){l.l(u),t=hn()},m(u,p){l.m(u,p),wt(u,t,p),n=!0},p(u,p){p&2&&hr(e,e=u[1])?(Sr(),ct(l,1,1,Co),Ar(),l=jv(u),l.c(),tt(l,1),l.m(t.parentNode,t)):l.p(u,p)},i(u){n||(tt(l),n=!0)},o(u){ct(l),n=!1},d(u){u&&Oe(t),l.d(u)}}}function LT(i){let e,t,n;return t=new Z1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Li("a"),xi(t.$$.fragment),this.h()},l(l){e=Pi(l,"A",{class:!0});var u=Ti(e);Ci(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){hi(e,"class","panel-block")},m(l,u){wt(l,e,u),Ai(t,e,null),n=!0},p(l,u){const p={};u&1&&(p.map=l[0]),u&128&&(p.layer=l[14]),u&32&&(p.spriteLoader=l[5]),u&4&&(p.relativeLayers=l[2]),t.$set(p)},i(l){n||(tt(t.$$.fragment,l),n=!0)},o(l){ct(t.$$.fragment,l),n=!1},d(l){l&&Oe(e),Si(t)}}}function PT(i){let e,t,n=i[2][i[14].id]&&Rv(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?n?(n.p(l,u),u&132&&tt(n,1)):(n=Rv(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function MT(i){let e,t,n=i[6][i[14].id]&&Bv(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,u){l[6][l[14].id]?n?(n.p(l,u),u&192&&tt(n,1)):(n=Bv(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function Rv(i){let e,t,n;return t=new Z1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Li("a"),xi(t.$$.fragment),this.h()},l(l){e=Pi(l,"A",{class:!0});var u=Ti(e);Ci(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){hi(e,"class","panel-block")},m(l,u){wt(l,e,u),Ai(t,e,null),n=!0},p(l,u){const p={};u&1&&(p.map=l[0]),u&128&&(p.layer=l[14]),u&32&&(p.spriteLoader=l[5]),u&4&&(p.relativeLayers=l[2]),t.$set(p)},i(l){n||(tt(t.$$.fragment,l),n=!0)},o(l){ct(t.$$.fragment,l),n=!1},d(l){l&&Oe(e),Si(t)}}}function Bv(i){let e,t,n,l;const u=[OT,DT],p=[];function o(c,g){return c[4]===!0?0:1}return e=o(i),t=p[e]=u[e](i),{c(){t.c(),n=hn()},l(c){t.l(c),n=hn()},m(c,g){p[e].m(c,g),wt(c,n,g),l=!0},p(c,g){let _=e;e=o(c),e===_?p[e].p(c,g):(Sr(),ct(p[_],1,1,()=>{p[_]=null}),Ar(),t=p[e],t?t.p(c,g):(t=p[e]=u[e](c),t.c()),tt(t,1),t.m(n.parentNode,n))},i(c){l||(tt(t),l=!0)},o(c){ct(t),l=!1},d(c){p[e].d(c),c&&Oe(n)}}}function DT(i){let e,t,n;return t=new Z1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Li("a"),xi(t.$$.fragment),this.h()},l(l){e=Pi(l,"A",{class:!0});var u=Ti(e);Ci(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){hi(e,"class","panel-block")},m(l,u){wt(l,e,u),Ai(t,e,null),n=!0},p(l,u){const p={};u&1&&(p.map=l[0]),u&128&&(p.layer=l[14]),u&32&&(p.spriteLoader=l[5]),u&4&&(p.relativeLayers=l[2]),t.$set(p)},i(l){n||(tt(t.$$.fragment,l),n=!0)},o(l){ct(t.$$.fragment,l),n=!1},d(l){l&&Oe(e),Si(t)}}}function OT(i){let e,t,n=i[2][i[14].id]&&zv(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?n?(n.p(l,u),u&132&&tt(n,1)):(n=zv(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function zv(i){let e,t,n;return t=new Z1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Li("a"),xi(t.$$.fragment),this.h()},l(l){e=Pi(l,"A",{class:!0});var u=Ti(e);Ci(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){hi(e,"class","panel-block")},m(l,u){wt(l,e,u),Ai(t,e,null),n=!0},p(l,u){const p={};u&1&&(p.map=l[0]),u&128&&(p.layer=l[14]),u&32&&(p.spriteLoader=l[5]),u&4&&(p.relativeLayers=l[2]),t.$set(p)},i(l){n||(tt(t.$$.fragment,l),n=!0)},o(l){ct(t.$$.fragment,l),n=!1},d(l){l&&Oe(e),Si(t)}}}function Nv(i){let e,t,n,l;const u=[MT,PT,LT],p=[];function o(c,g){return c[3]===!0?0:c[4]===!0?1:2}return e=o(i),t=p[e]=u[e](i),{c(){t.c(),n=hn()},l(c){t.l(c),n=hn()},m(c,g){p[e].m(c,g),wt(c,n,g),l=!0},p(c,g){let _=e;e=o(c),e===_?p[e].p(c,g):(Sr(),ct(p[_],1,1,()=>{p[_]=null}),Ar(),t=p[e],t?t.p(c,g):(t=p[e]=u[e](c),t.c()),tt(t,1),t.m(n.parentNode,n))},i(c){l||(tt(t),l=!0)},o(c){ct(t),l=!1},d(c){p[e].d(c),c&&Oe(n)}}}function jv(i){let e,t,n=i[7],l=[];for(let p=0;p<n.length;p+=1)l[p]=Nv(Dv(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&509){n=p[7];let c;for(c=0;c<n.length;c+=1){const g=Dv(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=Nv(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function FT(i){let e,t,n,l,u,p,o,c,g,_=i[2]&&Object.keys(i[2]).length>0,v,w,x,C,T,k=_&&Ov(i),M=i[5]&&Fv(i);return{c(){e=Li("nav"),t=Li("div"),n=Li("ul"),l=Li("li"),u=Li("a"),p=Li("span"),o=gn("Show rendered"),g=$i(),k&&k.c(),v=$i(),w=Li("nav"),M&&M.c(),this.h()},l(O){e=Pi(O,"NAV",{class:!0});var V=Ti(e);t=Pi(V,"DIV",{class:!0});var W=Ti(t);n=Pi(W,"UL",{});var J=Ti(n);l=Pi(J,"LI",{class:!0});var Q=Ti(l);u=Pi(Q,"A",{});var Z=Ti(u);p=Pi(Z,"SPAN",{});var ie=Ti(p);o=yn(ie,"Show rendered"),ie.forEach(Oe),Z.forEach(Oe),Q.forEach(Oe),g=en(J),k&&k.l(J),J.forEach(Oe),W.forEach(Oe),v=en(V),w=Pi(V,"NAV",{class:!0});var Se=Ti(w);M&&M.l(Se),Se.forEach(Oe),V.forEach(Oe),this.h()},h(){hi(l,"class",c=i[3]?"is-active":""),hi(t,"class","tabs is-toggle is-fullwidth m-2 legend-header"),hi(w,"class","panel legend-content svelte-1j7rc7q"),hi(e,"class","panel")},m(O,V){wt(O,e,V),Xi(e,t),Xi(t,n),Xi(n,l),Xi(l,u),Xi(u,p),Xi(p,o),Xi(n,g),k&&k.m(n,null),Xi(e,v),Xi(e,w),M&&M.m(w,null),x=!0,C||(T=Vn(l,"click",i[9]),C=!0)},p(O,[V]){(!x||V&8&&c!==(c=O[3]?"is-active":""))&&hi(l,"class",c),V&4&&(_=O[2]&&Object.keys(O[2]).length>0),_?k?k.p(O,V):(k=Ov(O),k.c(),k.m(n,null)):k&&(k.d(1),k=null),O[5]?M?(M.p(O,V),V&32&&tt(M,1)):(M=Fv(O),M.c(),tt(M,1),M.m(w,null)):M&&(Sr(),ct(M,1,1,()=>{M=null}),Ar())},i(O){x||(tt(M),x=!0)},o(O){ct(M),x=!1},d(O){O&&Oe(e),k&&k.d(),M&&M.d(),C=!1,T()}}}function RT(i,e,t){let n,{map:l}=e,{style:u}=e,p=!0,o=!0,c,g={},{relativeLayers:_={}}=e,v={};const w=async()=>{if(!l||!u)return;const M=u.sprite;!M||(t(5,c=new TT(M)),await c.load(),x())},x=()=>{!l||!u||setTimeout(()=>{if(t(6,g={}),p===!0){const M=l.queryRenderedFeatures();n.forEach(O=>{(M.filter(W=>W.layer.id===O.id).length>0||v[O.id])&&t(6,g[O.id]=O,g)})}else n.forEach(M=>{t(6,g[M.id]=M,g)});Object.keys(v).length>0&&t(7,n=l.getStyle().layers)},500)},C=M=>{var V,W;const O=M.detail.layer;((V=O.layout)==null?void 0:V.visibility)===void 0||((W=O.layout)==null?void 0:W.visibility)==="none"?v[O.id]=O:v[O.id]&&delete v[O.id]},T=()=>t(3,p=!p),k=()=>t(4,o=!o);return i.$$set=M=>{"map"in M&&t(0,l=M.map),"style"in M&&t(1,u=M.style),"relativeLayers"in M&&t(2,_=M.relativeLayers)},i.$$.update=()=>{i.$$.dirty&2&&t(7,n=u?u.layers:[]),i.$$.dirty&5&&(l&&(l.on("moveend",x),l.on("styledata",x),l.on("load",()=>{x()})),_&&Object.keys(_).length===0&&t(4,o=!1)),i.$$.dirty&8&&x(),i.$$.dirty&16&&x(),i.$$.dirty&2&&w()},[l,u,_,p,o,c,g,n,C,T,k]}class BT extends fr{constructor(e){super(),dr(this,e,RT,FT,hr,{map:0,style:1,relativeLayers:2})}}function Uv(i){let e,t,n,l,u,p,o,c;n=new UC({}),n.$on("change",i[4]);function g(w){i[5](w)}function _(w){i[6](w)}let v={relativeLayers:i[3]};return i[1]!==void 0&&(v.map=i[1]),i[2]!==void 0&&(v.style=i[2]),u=new BT({props:v}),pn.push(()=>To(u,"map",g)),pn.push(()=>To(u,"style",_)),{c(){e=Li("nav"),t=Li("div"),xi(n.$$.fragment),l=$i(),xi(u.$$.fragment),this.h()},l(w){e=Pi(w,"NAV",{class:!0});var x=Ti(e);t=Pi(x,"DIV",{class:!0});var C=Ti(t);Ci(n.$$.fragment,C),C.forEach(Oe),l=en(x),Ci(u.$$.fragment,x),x.forEach(Oe),this.h()},h(){hi(t,"class","panel-header m-1 p-0"),hi(e,"class","panel")},m(w,x){wt(w,e,x),Xi(e,t),Ai(n,t,null),Xi(e,l),Ai(u,e,null),c=!0},p(w,x){const C={};x&8&&(C.relativeLayers=w[3]),!p&&x&2&&(p=!0,C.map=w[1],Lo(()=>p=!1)),!o&&x&4&&(o=!0,C.style=w[2],Lo(()=>o=!1)),u.$set(C)},i(w){c||(tt(n.$$.fragment,w),tt(u.$$.fragment,w),c=!0)},o(w){ct(n.$$.fragment,w),ct(u.$$.fragment,w),c=!1},d(w){w&&Oe(e),Si(n),Si(u)}}}function zT(i){let e,t,n=i[0]&&Uv(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,[u]){l[0]?n?(n.p(l,u),u&1&&tt(n,1)):(n=Uv(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function NT(i,e,t){let n;Vo(i,Fu,_=>t(1,n=_));let l,u={},{isLayersTabVisible:p=!1}=e;kr.legend&&kr.legend.targets&&(u=kr.legend.targets);const o=()=>{!n||t(2,l=n.getStyle())};function c(_){n=_,Fu.set(n)}function g(_){l=_,t(2,l),t(1,n)}return i.$$set=_=>{"isLayersTabVisible"in _&&t(0,p=_.isLayersTabVisible)},i.$$.update=()=>{i.$$.dirty&2&&n&&n.on("load",()=>{t(2,l=n.getStyle())})},[p,n,l,u,o,c,g]}class jT extends fr{constructor(e){super(),dr(this,e,NT,zT,hr,{isLayersTabVisible:0})}}const{Marker:UT}=lw,J0={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},Mu={Time:"time",Distance:"distance"};class VT{constructor(e,t,n){this.contourSources=[],this.contourLayers=[],this.contourMaker=void 0,this.contours=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}],this.map=e,this.url=t,n&&(this.contours=n)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(e=>{var t;(t=this.map)==null||t.removeLayer(e)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(e=>{var t;(t=this.map)==null||t.removeSource(e)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(e,t,n,l,u){this.clearFeatures();let p=JSON.parse(JSON.stringify(this.contours));u&&(p=u),p.forEach(c=>{n===Mu.Time?delete c.distance:delete c.time});let o="km";return n===Mu.Time&&(o="min"),new Promise((c,g)=>{const _={locations:[{lat:t,lon:e}],costing:l,contours:p,polygons:!0},v=`${this.url}/isochrone?json=${JSON.stringify(_)}`;fetch(v).then(w=>w.json()).then(w=>{w.features.forEach(x=>{var T,k,M,O;const C=`isochrone-${x.properties.contour}-${n}`;(T=this.map)==null||T.addSource(C,{type:"geojson",data:x}),this.contourSources.push(C),(k=this.map)==null||k.addLayer({id:`pg-${C}-${n}`,type:"fill",source:C,layout:{},paint:{"fill-color":x.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${C}-${n}`),(M=this.map)==null||M.addLayer({id:`ls-${C}-${n}`,type:"line",source:C,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":x.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${C}-${n}`),(O=this.map)==null||O.addLayer({id:`symbol-${C}-${n}`,type:"symbol",source:C,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${o}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${C}-${n}`)}),this.map&&(this.contourMaker=new UT().setLngLat([e,t]).addTo(this.map)),c()}).catch(w=>g(w))})}getContoursOption(){return this.contours}}function qT(i){let e,t,n,l,u,p;const o=i[13].default,c=nr(o,i,i[12],null);let g=[{class:t=Hn({[i[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":i[2],"smui-accordion--with-open-dialog":i[4]})},i[10]],_={};for(let v=0;v<g.length;v+=1)_=Ni(_,g[v]);return{c(){e=Li("div"),c&&c.c(),this.h()},l(v){e=Pi(v,"DIV",{class:!0});var w=Ti(e);c&&c.l(w),w.forEach(Oe),this.h()},h(){Un(e,_)},m(v,w){wt(v,e,w),c&&c.m(e,null),i[14](e),l=!0,u||(p=[Gn(n=go.call(null,e,i[0])),Gn(i[5].call(null,e)),Vn(e,"SMUIAccordionPanel:mount",i[6]),Vn(e,"SMUIAccordionPanel:unmount",i[7]),Vn(e,"SMUIAccordionPanel:activate",i[8]),Vn(e,"SMUIAccordionPanel:opening",i[9]),Vn(e,"SMUIDialog:opening",i[15],!0),Vn(e,"SMUIDialog:closed",i[16],!0)],u=!0)},p(v,[w]){c&&c.p&&(!l||w&4096)&&rr(c,o,v,v[12],l?sr(o,v[12],w,null):or(v[12]),null),Un(e,_=cr(g,[(!l||w&22&&t!==(t=Hn({[v[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":v[2],"smui-accordion--with-open-dialog":v[4]})))&&{class:t},w&1024&&v[10]])),n&&Zr(n.update)&&w&1&&n.update.call(null,v[0])},i(v){l||(tt(c,v),l=!0)},o(v){ct(c,v),l=!1},d(v){v&&Oe(e),c&&c.d(v),i[14](null),u=!1,bo(p)}}}function HT(i,e,t){const n=["use","class","multiple","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{multiple:_=!1}=e,v,w=new Set,x=!1;function C(Q){const Z=Q.detail;if(Q.stopPropagation(),!_&&Z.open){const ie=Array.from(w).find(Se=>Se.open);ie&&ie.setOpen(!1)}w.add(Z)}function T(Q){const Z=Q.detail;!w.has(Z)||(Q.stopPropagation(),w.delete(Z))}function k(Q){const{accessor:Z}=Q.detail;if(!!w.has(Z)){if(!_&&!Z.open){const ie=Array.from(w).find(Se=>Se.open);ie&&ie.setOpen(!1)}Z.setOpen(!Z.open)}}function M(Q){const{accessor:Z}=Q.detail;!w.has(Z)||_||Array.from(w).filter(Se=>Se!==Z&&Se.open).forEach(Se=>Se.setOpen(!1))}function O(){return v}function V(Q){pn[Q?"unshift":"push"](()=>{v=Q,t(3,v)})}const W=()=>t(4,x=!0),J=()=>t(4,x=!1);return i.$$set=Q=>{e=Ni(Ni({},e),$r(Q)),t(10,l=On(e,n)),"use"in Q&&t(0,c=Q.use),"class"in Q&&t(1,g=Q.class),"multiple"in Q&&t(2,_=Q.multiple),"$$scope"in Q&&t(12,p=Q.$$scope)},[c,g,_,v,x,o,C,T,k,M,l,O,p,u,V,W,J]}class GT extends fr{constructor(e){super(),dr(this,e,HT,qT,hr,{use:0,class:1,multiple:2,getElement:11})}get getElement(){return this.$$.ctx[11]}}function WT(i){let e,t,n,l,u,p;const o=i[12].default,c=nr(o,i,i[11],null);let g=[{class:t=Hn({[i[1]]:!0,"smui-paper":!0,"smui-paper--raised":i[2]==="raised","smui-paper--unelevated":i[2]==="unelevated","smui-paper--outlined":i[2]==="outlined",["smui-paper--elevation-z"+i[5]]:i[5]!==0&&i[2]==="raised","smui-paper--rounded":!i[3],["smui-paper--color-"+i[4]]:i[4]!=="default","smui-paper-transition":i[6]})},i[9]],_={};for(let v=0;v<g.length;v+=1)_=Ni(_,g[v]);return{c(){e=Li("div"),c&&c.c(),this.h()},l(v){e=Pi(v,"DIV",{class:!0});var w=Ti(e);c&&c.l(w),w.forEach(Oe),this.h()},h(){Un(e,_)},m(v,w){wt(v,e,w),c&&c.m(e,null),i[13](e),l=!0,u||(p=[Gn(n=go.call(null,e,i[0])),Gn(i[8].call(null,e))],u=!0)},p(v,[w]){c&&c.p&&(!l||w&2048)&&rr(c,o,v,v[11],l?sr(o,v[11],w,null):or(v[11]),null),Un(e,_=cr(g,[(!l||w&126&&t!==(t=Hn({[v[1]]:!0,"smui-paper":!0,"smui-paper--raised":v[2]==="raised","smui-paper--unelevated":v[2]==="unelevated","smui-paper--outlined":v[2]==="outlined",["smui-paper--elevation-z"+v[5]]:v[5]!==0&&v[2]==="raised","smui-paper--rounded":!v[3],["smui-paper--color-"+v[4]]:v[4]!=="default","smui-paper-transition":v[6]})))&&{class:t},w&512&&v[9]])),n&&Zr(n.update)&&w&1&&n.update.call(null,v[0])},i(v){l||(tt(c,v),l=!0)},o(v){ct(c,v),l=!1},d(v){v&&Oe(e),c&&c.d(v),i[13](null),u=!1,bo(p)}}}function XT(i,e,t){const n=["use","class","variant","square","color","elevation","transition","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const o=io(to());let{use:c=[]}=e,{class:g=""}=e,{variant:_="raised"}=e,{square:v=!1}=e,{color:w="default"}=e,{elevation:x=1}=e,{transition:C=!1}=e,T;function k(){return T}function M(O){pn[O?"unshift":"push"](()=>{T=O,t(7,T)})}return i.$$set=O=>{e=Ni(Ni({},e),$r(O)),t(9,l=On(e,n)),"use"in O&&t(0,c=O.use),"class"in O&&t(1,g=O.class),"variant"in O&&t(2,_=O.variant),"square"in O&&t(3,v=O.square),"color"in O&&t(4,w=O.color),"elevation"in O&&t(5,x=O.elevation),"transition"in O&&t(6,C=O.transition),"$$scope"in O&&t(11,p=O.$$scope)},[c,g,_,v,w,x,C,T,o,l,k,p,u,M]}class YT extends fr{constructor(e){super(),dr(this,e,XT,WT,hr,{use:0,class:1,variant:2,square:3,color:4,elevation:5,transition:6,getElement:10})}get getElement(){return this.$$.ctx[10]}}const K1=da({class:"smui-paper__content",component:vf});da({class:"smui-paper__title",component:$6});da({class:"smui-paper__subtitle",component:e8});function ZT(i){let e;const t=i[23].default,n=nr(t,i,i[25],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&33554432)&&rr(n,t,l,l[25],e?sr(t,l[25],u,null):or(l[25]),null)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function KT(i){let e,t;const n=[{use:i[11]},{class:Hn({[i[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":i[0],"smui-accordion__panel--opened":i[10],"smui-accordion__panel--disabled":i[5],"smui-accordion__panel--non-interactive":i[6],"smui-accordion__panel--raised":i[2]==="raised","smui-accordion__panel--extend":i[7],["smui-accordion__panel--elevation-z"+(i[7]&&i[0]?i[8]:i[4])]:i[4]!==0&&i[2]==="raised"||i[8]!==0&&i[2]==="raised"&&i[7]&&i[0]})},{color:i[3]},{variant:i[2]==="raised"?"unelevated":i[2]},i[16]];let l={$$slots:{default:[ZT]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new YT({props:l}),i[24](e),e.$on("SMUIAccordionHeader:activate",i[15]),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,[p]){const o=p&69119?cr(n,[p&2048&&{use:u[11]},p&1527&&{class:Hn({[u[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":u[0],"smui-accordion__panel--opened":u[10],"smui-accordion__panel--disabled":u[5],"smui-accordion__panel--non-interactive":u[6],"smui-accordion__panel--raised":u[2]==="raised","smui-accordion__panel--extend":u[7],["smui-accordion__panel--elevation-z"+(u[7]&&u[0]?u[8]:u[4])]:u[4]!==0&&u[2]==="raised"||u[8]!==0&&u[2]==="raised"&&u[7]&&u[0]})},p&8&&{color:u[3]},p&4&&{variant:u[2]==="raised"?"unelevated":u[2]},p&65536&&fo(u[16])]):{};p&33554432&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[24](null),Si(e,u)}}}function JT(i,e,t){let n;const l=["use","class","variant","color","elevation","open","disabled","nonInteractive","extend","extendedElevation","isOpen","setOpen","getElement"];let u=On(e,l),p,o,c,{$$slots:g={},$$scope:_}=e;const v=io(to());let{use:w=[]}=e,{class:x=""}=e,{variant:C="raised"}=e,{color:T="default"}=e,{elevation:k=1}=e,{open:M=!1}=e,{disabled:O=!1}=e,{nonInteractive:V=!1}=e,{extend:W=!1}=e,{extendedElevation:J=3}=e,Q,Z,ie=M;const Se=Sl(O);Vo(i,Se,We=>t(28,c=We)),Fo("SMUI:accordion:panel:disabled",Se);const xe=Sl(V);Vo(i,xe,We=>t(27,o=We)),Fo("SMUI:accordion:panel:nonInteractive",xe);const le=Sl(M);Vo(i,le,We=>t(26,p=We)),Fo("SMUI:accordion:panel:open",le);let Ee=M;ws(()=>(t(21,Z={get open(){return M},setOpen:pt}),Array.from(rt().children).forEach(We=>{We.classList.contains("smui-paper__content")&&We.setAttribute("aria-hidden",M?"false":"true")}),Qr(rt(),"SMUIAccordionPanel:mount",Z),()=>{Qr(rt(),"SMUIAccordionPanel:unmount",Z)}));function me(We){We.stopPropagation(),!(O||V)&&Qr(rt(),"SMUIAccordionPanel:activate",{accessor:Z,event:We})}function Ae(){return M}function pt(We){t(0,M=We)}function rt(){return Q.getElement()}function Pt(We){pn[We?"unshift":"push"](()=>{Q=We,t(9,Q)})}return i.$$set=We=>{e=Ni(Ni({},e),$r(We)),t(16,u=On(e,l)),"use"in We&&t(17,w=We.use),"class"in We&&t(1,x=We.class),"variant"in We&&t(2,C=We.variant),"color"in We&&t(3,T=We.color),"elevation"in We&&t(4,k=We.elevation),"open"in We&&t(0,M=We.open),"disabled"in We&&t(5,O=We.disabled),"nonInteractive"in We&&t(6,V=We.nonInteractive),"extend"in We&&t(7,W=We.extend),"extendedElevation"in We&&t(8,J=We.extendedElevation),"$$scope"in We&&t(25,_=We.$$scope)},i.$$.update=()=>{i.$$.dirty&131072&&t(11,n=[v,...w]),i.$$.dirty&32&&Ea(Se,c=O,c),i.$$.dirty&64&&Ea(xe,o=V,o),i.$$.dirty&1&&Ea(le,p=M,p),i.$$.dirty&6291457&&Ee!==M&&(t(22,Ee=M),Array.from(rt().children).forEach(We=>{if(We.classList.contains("smui-paper__content")){const be=We;if(M){be.classList.add("smui-accordion__content--no-transition"),be.classList.add("smui-accordion__content--force-open");const{height:Le}=be.getBoundingClientRect();be.classList.remove("smui-accordion__content--force-open"),be.getBoundingClientRect(),be.classList.remove("smui-accordion__content--no-transition"),be.style.height=Le+"px",be.addEventListener("transitionend",()=>{be&&(be.style.height=""),t(10,ie=M),Qr(rt(),"SMUIAccordionPanel:opened",{accessor:Z})},{once:!0})}else be.style.height=be.getBoundingClientRect().height+"px",be.getBoundingClientRect(),requestAnimationFrame(()=>{be&&(be.style.height=""),Qr(rt(),"SMUIAccordionPanel:closed",{accessor:Z})}),t(10,ie=!1);be.setAttribute("aria-hidden",M?"false":"true")}}),Qr(rt(),M?"SMUIAccordionPanel:opening":"SMUIAccordionPanel:closing",{accessor:Z}))},[M,x,C,T,k,O,V,W,J,Q,ie,n,Se,xe,le,me,u,w,Ae,pt,rt,Z,Ee,g,Pt,_]}class QT extends fr{constructor(e){super(),dr(this,e,JT,KT,hr,{use:17,class:1,variant:2,color:3,elevation:4,open:0,disabled:5,nonInteractive:6,extend:7,extendedElevation:8,isOpen:18,setOpen:19,getElement:20})}get isOpen(){return this.$$.ctx[18]}get setOpen(){return this.$$.ctx[19]}get getElement(){return this.$$.ctx[20]}}const $T=i=>({}),Vv=i=>({}),e7=i=>({}),qv=i=>({});function Hv(i){let e;return{c(){e=Li("div"),this.h()},l(t){e=Pi(t,"DIV",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","smui-accordion__header__ripple")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function Gv(i){let e,t;const n=i[23].description,l=nr(n,i,i[22],qv);return{c(){e=Li("div"),l&&l.c(),this.h()},l(u){e=Pi(u,"DIV",{class:!0});var p=Ti(e);l&&l.l(p),p.forEach(Oe),this.h()},h(){hi(e,"class","smui-accordion__header__description")},m(u,p){wt(u,e,p),l&&l.m(e,null),t=!0},p(u,p){l&&l.p&&(!t||p&4194304)&&rr(l,n,u,u[22],t?sr(n,u[22],p,e7):or(u[22]),qv)},i(u){t||(tt(l,u),t=!0)},o(u){ct(l,u),t=!1},d(u){u&&Oe(e),l&&l.d(u)}}}function Wv(i){let e,t;const n=i[23].icon,l=nr(n,i,i[22],Vv);return{c(){e=Li("div"),l&&l.c(),this.h()},l(u){e=Pi(u,"DIV",{class:!0});var p=Ti(e);l&&l.l(p),p.forEach(Oe),this.h()},h(){hi(e,"class","smui-accordion__header__icon")},m(u,p){wt(u,e,p),l&&l.m(e,null),t=!0},p(u,p){l&&l.p&&(!t||p&4194304)&&rr(l,n,u,u[22],t?sr(n,u[22],p,$T):or(u[22]),Vv)},i(u){t||(tt(l,u),t=!0)},o(u){ct(l,u),t=!1},d(u){u&&Oe(e),l&&l.d(u)}}}function t7(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C,T,k=i[3]&&Hv();const M=i[23].default,O=nr(M,i,i[22],null);let V=i[20].description&&Gv(i),W=i[20].icon&&Wv(i),J=[{class:o=Hn({[i[1]]:!0,"smui-accordion__header":!0,...i[5]})},{style:c=Object.entries(i[6]).map(Xv).concat([i[2]]).join(" ")},{role:"button"},{tabindex:g=i[7]?-1:0},{"aria-expanded":_=i[9]?"true":"false"},i[19]],Q={};for(let Z=0;Z<J.length;Z+=1)Q=Ni(Q,J[Z]);return{c(){e=Li("div"),k&&k.c(),t=$i(),n=Li("div"),O&&O.c(),u=$i(),V&&V.c(),p=$i(),W&&W.c(),this.h()},l(Z){e=Pi(Z,"DIV",{class:!0,style:!0,role:!0,tabindex:!0,"aria-expanded":!0});var ie=Ti(e);k&&k.l(ie),t=en(ie),n=Pi(ie,"DIV",{class:!0});var Se=Ti(n);O&&O.l(Se),Se.forEach(Oe),u=en(ie),V&&V.l(ie),p=en(ie),W&&W.l(ie),ie.forEach(Oe),this.h()},h(){hi(n,"class",l=Hn({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":i[20].description})),Un(e,Q)},m(Z,ie){wt(Z,e,ie),k&&k.m(e,null),Xi(e,t),Xi(e,n),O&&O.m(n,null),Xi(e,u),V&&V.m(e,null),Xi(e,p),W&&W.m(e,null),i[24](e),x=!0,C||(T=[Gn(v=go.call(null,e,i[0])),Gn(i[10].call(null,e)),Gn(w=lh.call(null,e,{ripple:i[3],unbounded:!1,surface:!i[7],disabled:i[8]||i[7],addClass:i[16],removeClass:i[17],addStyle:i[18]})),Vn(e,"click",i[14]),Vn(e,"keydown",i[15])],C=!0)},p(Z,[ie]){Z[3]?k||(k=Hv(),k.c(),k.m(e,t)):k&&(k.d(1),k=null),O&&O.p&&(!x||ie&4194304)&&rr(O,M,Z,Z[22],x?sr(M,Z[22],ie,null):or(Z[22]),null),(!x||ie&1048576&&l!==(l=Hn({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":Z[20].description})))&&hi(n,"class",l),Z[20].description?V?(V.p(Z,ie),ie&1048576&&tt(V,1)):(V=Gv(Z),V.c(),tt(V,1),V.m(e,p)):V&&(Sr(),ct(V,1,1,()=>{V=null}),Ar()),Z[20].icon?W?(W.p(Z,ie),ie&1048576&&tt(W,1)):(W=Wv(Z),W.c(),tt(W,1),W.m(e,null)):W&&(Sr(),ct(W,1,1,()=>{W=null}),Ar()),Un(e,Q=cr(J,[(!x||ie&34&&o!==(o=Hn({[Z[1]]:!0,"smui-accordion__header":!0,...Z[5]})))&&{class:o},(!x||ie&68&&c!==(c=Object.entries(Z[6]).map(Xv).concat([Z[2]]).join(" ")))&&{style:c},{role:"button"},(!x||ie&128&&g!==(g=Z[7]?-1:0))&&{tabindex:g},(!x||ie&512&&_!==(_=Z[9]?"true":"false"))&&{"aria-expanded":_},ie&524288&&Z[19]])),v&&Zr(v.update)&&ie&1&&v.update.call(null,Z[0]),w&&Zr(w.update)&&ie&392&&w.update.call(null,{ripple:Z[3],unbounded:!1,surface:!Z[7],disabled:Z[8]||Z[7],addClass:Z[16],removeClass:Z[17],addStyle:Z[18]})},i(Z){x||(tt(O,Z),tt(V),tt(W),x=!0)},o(Z){ct(O,Z),ct(V),ct(W),x=!1},d(Z){Z&&Oe(e),k&&k.d(),O&&O.d(Z),V&&V.d(),W&&W.d(),i[24](null),C=!1,bo(T)}}}const Xv=([i,e])=>`${i}: ${e};`;function i7(i,e,t){const n=["use","class","style","ripple","getElement"];let l=On(e,n),u,p,o,{$$slots:c={},$$scope:g}=e;const _=Sg(c),v=io(to());let{use:w=[]}=e,{class:x=""}=e,{style:C=""}=e,{ripple:T=!0}=e,k,M={},O={};const V=es("SMUI:accordion:panel:disabled");Vo(i,V,me=>t(8,p=me));const W=es("SMUI:accordion:panel:nonInteractive");Vo(i,W,me=>t(7,u=me));const J=es("SMUI:accordion:panel:open");Vo(i,J,me=>t(9,o=me));function Q(me){me=me,me.button===0&&Qr(le(),"SMUIAccordionHeader:activate",{event:me})}function Z(me){me=me,me.key==="Enter"&&Qr(le(),"SMUIAccordionHeader:activate",{event:me})}function ie(me){M[me]||t(5,M[me]=!0,M)}function Se(me){(!(me in M)||M[me])&&t(5,M[me]=!1,M)}function xe(me,Ae){O[me]!=Ae&&(Ae===""||Ae==null?(delete O[me],t(6,O)):t(6,O[me]=Ae,O))}function le(){return k}function Ee(me){pn[me?"unshift":"push"](()=>{k=me,t(4,k)})}return i.$$set=me=>{e=Ni(Ni({},e),$r(me)),t(19,l=On(e,n)),"use"in me&&t(0,w=me.use),"class"in me&&t(1,x=me.class),"style"in me&&t(2,C=me.style),"ripple"in me&&t(3,T=me.ripple),"$$scope"in me&&t(22,g=me.$$scope)},[w,x,C,T,k,M,O,u,p,o,v,V,W,J,Q,Z,ie,Se,xe,l,_,le,g,c,Ee]}class n7 extends fr{constructor(e){super(),dr(this,e,i7,t7,hr,{use:0,class:1,style:2,ripple:3,getElement:21})}get getElement(){return this.$$.ctx[21]}}const Yp=QT,J1=n7;var qw={exports:{}},oy={exports:{}},Hw=function(e,t){return function(){for(var l=new Array(arguments.length),u=0;u<l.length;u++)l[u]=arguments[u];return e.apply(t,l)}},r7=Hw,r0=Object.prototype.toString;function sy(i){return r0.call(i)==="[object Array]"}function hg(i){return typeof i>"u"}function o7(i){return i!==null&&!hg(i)&&i.constructor!==null&&!hg(i.constructor)&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function s7(i){return r0.call(i)==="[object ArrayBuffer]"}function a7(i){return typeof FormData<"u"&&i instanceof FormData}function l7(i){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&i.buffer instanceof ArrayBuffer,e}function u7(i){return typeof i=="string"}function c7(i){return typeof i=="number"}function Gw(i){return i!==null&&typeof i=="object"}function h1(i){if(r0.call(i)!=="[object Object]")return!1;var e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function h7(i){return r0.call(i)==="[object Date]"}function f7(i){return r0.call(i)==="[object File]"}function d7(i){return r0.call(i)==="[object Blob]"}function Ww(i){return r0.call(i)==="[object Function]"}function p7(i){return Gw(i)&&Ww(i.pipe)}function m7(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}function g7(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function y7(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ay(i,e){if(!(i===null||typeof i>"u"))if(typeof i!="object"&&(i=[i]),sy(i))for(var t=0,n=i.length;t<n;t++)e.call(null,i[t],t,i);else for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.call(null,i[l],l,i)}function fg(){var i={};function e(l,u){h1(i[u])&&h1(l)?i[u]=fg(i[u],l):h1(l)?i[u]=fg({},l):sy(l)?i[u]=l.slice():i[u]=l}for(var t=0,n=arguments.length;t<n;t++)ay(arguments[t],e);return i}function _7(i,e,t){return ay(e,function(l,u){t&&typeof l=="function"?i[u]=r7(l,t):i[u]=l}),i}function v7(i){return i.charCodeAt(0)===65279&&(i=i.slice(1)),i}var Bu={isArray:sy,isArrayBuffer:s7,isBuffer:o7,isFormData:a7,isArrayBufferView:l7,isString:u7,isNumber:c7,isObject:Gw,isPlainObject:h1,isUndefined:hg,isDate:h7,isFile:f7,isBlob:d7,isFunction:Ww,isStream:p7,isURLSearchParams:m7,isStandardBrowserEnv:y7,forEach:ay,merge:fg,extend:_7,trim:g7,stripBOM:v7},C0=Bu;function Yv(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Xw=function(e,t,n){if(!t)return e;var l;if(n)l=n(t);else if(C0.isURLSearchParams(t))l=t.toString();else{var u=[];C0.forEach(t,function(c,g){c===null||typeof c>"u"||(C0.isArray(c)?g=g+"[]":c=[c],C0.forEach(c,function(v){C0.isDate(v)?v=v.toISOString():C0.isObject(v)&&(v=JSON.stringify(v)),u.push(Yv(g)+"="+Yv(v))}))}),l=u.join("&")}if(l){var p=e.indexOf("#");p!==-1&&(e=e.slice(0,p)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e},b7=Bu;function Q1(){this.handlers=[]}Q1.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Q1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Q1.prototype.forEach=function(e){b7.forEach(this.handlers,function(n){n!==null&&e(n)})};var w7=Q1,x7=Bu,A7=function(e,t){x7.forEach(e,function(l,u){u!==t&&u.toUpperCase()===t.toUpperCase()&&(e[t]=l,delete e[u])})},Yw=function(e,t,n,l,u){return e.config=t,n&&(e.code=n),e.request=l,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},r2,Zv;function Zw(){if(Zv)return r2;Zv=1;var i=Yw;return r2=function(t,n,l,u,p){var o=new Error(t);return i(o,n,l,u,p)},r2}var o2,Kv;function S7(){if(Kv)return o2;Kv=1;var i=Zw();return o2=function(t,n,l){var u=l.config.validateStatus;!l.status||!u||u(l.status)?t(l):n(i("Request failed with status code "+l.status,l.config,null,l.request,l))},o2}var s2,Jv;function k7(){if(Jv)return s2;Jv=1;var i=Bu;return s2=i.isStandardBrowserEnv()?function(){return{write:function(n,l,u,p,o,c){var g=[];g.push(n+"="+encodeURIComponent(l)),i.isNumber(u)&&g.push("expires="+new Date(u).toGMTString()),i.isString(p)&&g.push("path="+p),i.isString(o)&&g.push("domain="+o),c===!0&&g.push("secure"),document.cookie=g.join("; ")},read:function(n){var l=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),s2}var a2,Qv;function C7(){return Qv||(Qv=1,a2=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),a2}var l2,$v;function E7(){return $v||($v=1,l2=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),l2}var u2,eb;function I7(){if(eb)return u2;eb=1;var i=C7(),e=E7();return u2=function(n,l){return n&&!i(l)?e(n,l):l},u2}var c2,tb;function T7(){if(tb)return c2;tb=1;var i=Bu,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return c2=function(n){var l={},u,p,o;return n&&i.forEach(n.split(`
`),function(g){if(o=g.indexOf(":"),u=i.trim(g.substr(0,o)).toLowerCase(),p=i.trim(g.substr(o+1)),u){if(l[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?l[u]=(l[u]?l[u]:[]).concat([p]):l[u]=l[u]?l[u]+", "+p:p}}),l},c2}var h2,ib;function L7(){if(ib)return h2;ib=1;var i=Bu;return h2=i.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),l;function u(p){var o=p;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return l=u(window.location.href),function(o){var c=i.isString(o)?u(o):o;return c.protocol===l.protocol&&c.host===l.host}}():function(){return function(){return!0}}(),h2}var f2,nb;function rb(){if(nb)return f2;nb=1;var i=Bu,e=S7(),t=k7(),n=Xw,l=I7(),u=T7(),p=L7(),o=Zw();return f2=function(g){return new Promise(function(v,w){var x=g.data,C=g.headers,T=g.responseType;i.isFormData(x)&&delete C["Content-Type"];var k=new XMLHttpRequest;if(g.auth){var M=g.auth.username||"",O=g.auth.password?unescape(encodeURIComponent(g.auth.password)):"";C.Authorization="Basic "+btoa(M+":"+O)}var V=l(g.baseURL,g.url);k.open(g.method.toUpperCase(),n(V,g.params,g.paramsSerializer),!0),k.timeout=g.timeout;function W(){if(!!k){var Q="getAllResponseHeaders"in k?u(k.getAllResponseHeaders()):null,Z=!T||T==="text"||T==="json"?k.responseText:k.response,ie={data:Z,status:k.status,statusText:k.statusText,headers:Q,config:g,request:k};e(v,w,ie),k=null}}if("onloadend"in k?k.onloadend=W:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(W)},k.onabort=function(){!k||(w(o("Request aborted",g,"ECONNABORTED",k)),k=null)},k.onerror=function(){w(o("Network Error",g,null,k)),k=null},k.ontimeout=function(){var Z="timeout of "+g.timeout+"ms exceeded";g.timeoutErrorMessage&&(Z=g.timeoutErrorMessage),w(o(Z,g,g.transitional&&g.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k)),k=null},i.isStandardBrowserEnv()){var J=(g.withCredentials||p(V))&&g.xsrfCookieName?t.read(g.xsrfCookieName):void 0;J&&(C[g.xsrfHeaderName]=J)}"setRequestHeader"in k&&i.forEach(C,function(Z,ie){typeof x>"u"&&ie.toLowerCase()==="content-type"?delete C[ie]:k.setRequestHeader(ie,Z)}),i.isUndefined(g.withCredentials)||(k.withCredentials=!!g.withCredentials),T&&T!=="json"&&(k.responseType=g.responseType),typeof g.onDownloadProgress=="function"&&k.addEventListener("progress",g.onDownloadProgress),typeof g.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",g.onUploadProgress),g.cancelToken&&g.cancelToken.promise.then(function(Z){!k||(k.abort(),w(Z),k=null)}),x||(x=null),k.send(x)})},f2}var il=Bu,ob=A7,P7=Yw,M7={"Content-Type":"application/x-www-form-urlencoded"};function sb(i,e){!il.isUndefined(i)&&il.isUndefined(i["Content-Type"])&&(i["Content-Type"]=e)}function D7(){var i;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(i=rb()),i}function O7(i,e,t){if(il.isString(i))try{return(e||JSON.parse)(i),il.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}var $1={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:D7(),transformRequest:[function(e,t){return ob(t,"Accept"),ob(t,"Content-Type"),il.isFormData(e)||il.isArrayBuffer(e)||il.isBuffer(e)||il.isStream(e)||il.isFile(e)||il.isBlob(e)?e:il.isArrayBufferView(e)?e.buffer:il.isURLSearchParams(e)?(sb(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):il.isObject(e)||t&&t["Content-Type"]==="application/json"?(sb(t,"application/json"),O7(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,l=t&&t.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||l&&il.isString(e)&&e.length)try{return JSON.parse(e)}catch(p){if(u)throw p.name==="SyntaxError"?P7(p,this,"E_JSON_PARSE"):p}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};$1.headers={common:{Accept:"application/json, text/plain, */*"}};il.forEach(["delete","get","head"],function(e){$1.headers[e]={}});il.forEach(["post","put","patch"],function(e){$1.headers[e]=il.merge(M7)});var ly=$1,F7=Bu,R7=ly,B7=function(e,t,n){var l=this||R7;return F7.forEach(n,function(p){e=p.call(l,e,t)}),e},d2,ab;function Kw(){return ab||(ab=1,d2=function(e){return!!(e&&e.__CANCEL__)}),d2}var lb=Bu,p2=B7,z7=Kw(),N7=ly;function m2(i){i.cancelToken&&i.cancelToken.throwIfRequested()}var j7=function(e){m2(e),e.headers=e.headers||{},e.data=p2.call(e,e.data,e.headers,e.transformRequest),e.headers=lb.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),lb.forEach(["delete","get","head","post","put","patch","common"],function(l){delete e.headers[l]});var t=e.adapter||N7.adapter;return t(e).then(function(l){return m2(e),l.data=p2.call(e,l.data,l.headers,e.transformResponse),l},function(l){return z7(l)||(m2(e),l&&l.response&&(l.response.data=p2.call(e,l.response.data,l.response.headers,e.transformResponse))),Promise.reject(l)})},Al=Bu,Jw=function(e,t){t=t||{};var n={},l=["url","method","data"],u=["headers","auth","proxy","params"],p=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function c(w,x){return Al.isPlainObject(w)&&Al.isPlainObject(x)?Al.merge(w,x):Al.isPlainObject(x)?Al.merge({},x):Al.isArray(x)?x.slice():x}function g(w){Al.isUndefined(t[w])?Al.isUndefined(e[w])||(n[w]=c(void 0,e[w])):n[w]=c(e[w],t[w])}Al.forEach(l,function(x){Al.isUndefined(t[x])||(n[x]=c(void 0,t[x]))}),Al.forEach(u,g),Al.forEach(p,function(x){Al.isUndefined(t[x])?Al.isUndefined(e[x])||(n[x]=c(void 0,e[x])):n[x]=c(void 0,t[x])}),Al.forEach(o,function(x){x in t?n[x]=c(e[x],t[x]):x in e&&(n[x]=c(void 0,e[x]))});var _=l.concat(u).concat(p).concat(o),v=Object.keys(e).concat(Object.keys(t)).filter(function(x){return _.indexOf(x)===-1});return Al.forEach(v,g),n};const U7="axios",V7="0.21.4",q7="Promise based HTTP client for the browser and node.js",H7="index.js",G7={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},W7={type:"git",url:"https://github.com/axios/axios.git"},X7=["xhr","http","ajax","promise","node"],Y7="Matt Zabriskie",Z7="MIT",K7={url:"https://github.com/axios/axios/issues"},J7="https://axios-http.com",Q7={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},$7={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},eL="dist/axios.min.js",tL="dist/axios.min.js",iL="./index.d.ts",nL={"follow-redirects":"^1.14.0"},rL=[{path:"./dist/axios.min.js",threshold:"5kB"}],oL={name:U7,version:V7,description:q7,main:H7,scripts:G7,repository:W7,keywords:X7,author:Y7,license:Z7,bugs:K7,homepage:J7,devDependencies:Q7,browser:$7,jsdelivr:eL,unpkg:tL,typings:iL,dependencies:nL,bundlesize:rL};var Qw=oL,uy={};["object","boolean","number","function","string","symbol"].forEach(function(i,e){uy[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});var ub={},sL=Qw.version.split(".");function $w(i,e){for(var t=e?e.split("."):sL,n=i.split("."),l=0;l<3;l++){if(t[l]>n[l])return!0;if(t[l]<n[l])return!1}return!1}uy.transitional=function(e,t,n){var l=t&&$w(t);function u(p,o){return"[Axios v"+Qw.version+"] Transitional option '"+p+"'"+o+(n?". "+n:"")}return function(p,o,c){if(e===!1)throw new Error(u(o," has been removed in "+t));return l&&!ub[o]&&(ub[o]=!0,console.warn(u(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(p,o,c):!0}};function aL(i,e,t){if(typeof i!="object")throw new TypeError("options must be an object");for(var n=Object.keys(i),l=n.length;l-- >0;){var u=n[l],p=e[u];if(p){var o=i[u],c=o===void 0||p(o,u,i);if(c!==!0)throw new TypeError("option "+u+" must be "+c);continue}if(t!==!0)throw Error("Unknown option "+u)}}var lL={isOlderVersion:$w,assertOptions:aL,validators:uy},e3=Bu,uL=Xw,cb=w7,hb=j7,em=Jw,t3=lL,E0=t3.validators;function up(i){this.defaults=i,this.interceptors={request:new cb,response:new cb}}up.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=em(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&t3.assertOptions(t,{silentJSONParsing:E0.transitional(E0.boolean,"1.0.0"),forcedJSONParsing:E0.transitional(E0.boolean,"1.0.0"),clarifyTimeoutError:E0.transitional(E0.boolean,"1.0.0")},!1);var n=[],l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(l=l&&w.synchronous,n.unshift(w.fulfilled,w.rejected))});var u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});var p;if(!l){var o=[hb,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(u),p=Promise.resolve(e);o.length;)p=p.then(o.shift(),o.shift());return p}for(var c=e;n.length;){var g=n.shift(),_=n.shift();try{c=g(c)}catch(v){_(v);break}}try{p=hb(c)}catch(v){return Promise.reject(v)}for(;u.length;)p=p.then(u.shift(),u.shift());return p};up.prototype.getUri=function(e){return e=em(this.defaults,e),uL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};e3.forEach(["delete","get","head","options"],function(e){up.prototype[e]=function(t,n){return this.request(em(n||{},{method:e,url:t,data:(n||{}).data}))}});e3.forEach(["post","put","patch"],function(e){up.prototype[e]=function(t,n,l){return this.request(em(l||{},{method:e,url:t,data:n}))}});var cL=up,g2,fb;function i3(){if(fb)return g2;fb=1;function i(e){this.message=e}return i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,g2=i,g2}var y2,db;function hL(){if(db)return y2;db=1;var i=i3();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(p){n=p});var l=this;t(function(p){l.reason||(l.reason=new i(p),n(l.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var n,l=new e(function(p){n=p});return{token:l,cancel:n}},y2=e,y2}var _2,pb;function fL(){return pb||(pb=1,_2=function(e){return function(n){return e.apply(null,n)}}),_2}var v2,mb;function dL(){return mb||(mb=1,v2=function(e){return typeof e=="object"&&e.isAxiosError===!0}),v2}var gb=Bu,pL=Hw,f1=cL,mL=Jw,gL=ly;function n3(i){var e=new f1(i),t=pL(f1.prototype.request,e);return gb.extend(t,f1.prototype,e),gb.extend(t,e),t}var Lc=n3(gL);Lc.Axios=f1;Lc.create=function(e){return n3(mL(Lc.defaults,e))};Lc.Cancel=i3();Lc.CancelToken=hL();Lc.isCancel=Kw();Lc.all=function(e){return Promise.all(e)};Lc.spread=fL();Lc.isAxiosError=dL();oy.exports=Lc;oy.exports.default=Lc;(function(i){i.exports=oy.exports})(qw);const yL=pk(qw.exports);var zh={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(u,p){return Object.prototype.hasOwnProperty.call(u,p)}i.assign=function(u){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var o=p.shift();if(!!o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var c in o)t(o,c)&&(u[c]=o[c])}}return u},i.shrinkBuf=function(u,p){return u.length===p?u:u.subarray?u.subarray(0,p):(u.length=p,u)};var n={arraySet:function(u,p,o,c,g){if(p.subarray&&u.subarray){u.set(p.subarray(o,o+c),g);return}for(var _=0;_<c;_++)u[g+_]=p[o+_]},flattenChunks:function(u){var p,o,c,g,_,v;for(c=0,p=0,o=u.length;p<o;p++)c+=u[p].length;for(v=new Uint8Array(c),g=0,p=0,o=u.length;p<o;p++)_=u[p],v.set(_,g),g+=_.length;return v}},l={arraySet:function(u,p,o,c,g){for(var _=0;_<c;_++)u[g+_]=p[o+_]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(e)})(zh);var cp={},ch={},cd={},_L=zh,vL=4,yb=0,_b=1,bL=2;function hd(i){for(var e=i.length;--e>=0;)i[e]=0}var wL=0,r3=1,xL=2,AL=3,SL=258,cy=29,hp=256,tp=hp+1+cy,Q0=30,hy=19,o3=2*tp+1,Xf=15,b2=16,kL=7,fy=256,s3=16,a3=17,l3=18,dg=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],CL=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u3=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],EL=512,Lh=new Array((tp+2)*2);hd(Lh);var qd=new Array(Q0*2);hd(qd);var ip=new Array(EL);hd(ip);var np=new Array(SL-AL+1);hd(np);var dy=new Array(cy);hd(dy);var P1=new Array(Q0);hd(P1);function w2(i,e,t,n,l){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=l,this.has_stree=i&&i.length}var c3,h3,f3;function x2(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function d3(i){return i<256?ip[i]:ip[256+(i>>>7)]}function rp(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function au(i,e,t){i.bi_valid>b2-t?(i.bi_buf|=e<<i.bi_valid&65535,rp(i,i.bi_buf),i.bi_buf=e>>b2-i.bi_valid,i.bi_valid+=t-b2):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function $c(i,e,t){au(i,t[e*2],t[e*2+1])}function p3(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function IL(i){i.bi_valid===16?(rp(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function TL(i,e){var t=e.dyn_tree,n=e.max_code,l=e.stat_desc.static_tree,u=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length,g,_,v,w,x,C,T=0;for(w=0;w<=Xf;w++)i.bl_count[w]=0;for(t[i.heap[i.heap_max]*2+1]=0,g=i.heap_max+1;g<o3;g++)_=i.heap[g],w=t[t[_*2+1]*2+1]+1,w>c&&(w=c,T++),t[_*2+1]=w,!(_>n)&&(i.bl_count[w]++,x=0,_>=o&&(x=p[_-o]),C=t[_*2],i.opt_len+=C*(w+x),u&&(i.static_len+=C*(l[_*2+1]+x)));if(T!==0){do{for(w=c-1;i.bl_count[w]===0;)w--;i.bl_count[w]--,i.bl_count[w+1]+=2,i.bl_count[c]--,T-=2}while(T>0);for(w=c;w!==0;w--)for(_=i.bl_count[w];_!==0;)v=i.heap[--g],!(v>n)&&(t[v*2+1]!==w&&(i.opt_len+=(w-t[v*2+1])*t[v*2],t[v*2+1]=w),_--)}}function m3(i,e,t){var n=new Array(Xf+1),l=0,u,p;for(u=1;u<=Xf;u++)n[u]=l=l+t[u-1]<<1;for(p=0;p<=e;p++){var o=i[p*2+1];o!==0&&(i[p*2]=p3(n[o]++,o))}}function LL(){var i,e,t,n,l,u=new Array(Xf+1);for(t=0,n=0;n<cy-1;n++)for(dy[n]=t,i=0;i<1<<dg[n];i++)np[t++]=n;for(np[t-1]=n,l=0,n=0;n<16;n++)for(P1[n]=l,i=0;i<1<<d1[n];i++)ip[l++]=n;for(l>>=7;n<Q0;n++)for(P1[n]=l<<7,i=0;i<1<<d1[n]-7;i++)ip[256+l++]=n;for(e=0;e<=Xf;e++)u[e]=0;for(i=0;i<=143;)Lh[i*2+1]=8,i++,u[8]++;for(;i<=255;)Lh[i*2+1]=9,i++,u[9]++;for(;i<=279;)Lh[i*2+1]=7,i++,u[7]++;for(;i<=287;)Lh[i*2+1]=8,i++,u[8]++;for(m3(Lh,tp+1,u),i=0;i<Q0;i++)qd[i*2+1]=5,qd[i*2]=p3(i,5);c3=new w2(Lh,dg,hp+1,tp,Xf),h3=new w2(qd,d1,0,Q0,Xf),f3=new w2(new Array(0),CL,0,hy,kL)}function g3(i){var e;for(e=0;e<tp;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Q0;e++)i.dyn_dtree[e*2]=0;for(e=0;e<hy;e++)i.bl_tree[e*2]=0;i.dyn_ltree[fy*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function y3(i){i.bi_valid>8?rp(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function PL(i,e,t,n){y3(i),n&&(rp(i,t),rp(i,~t)),_L.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function vb(i,e,t,n){var l=e*2,u=t*2;return i[l]<i[u]||i[l]===i[u]&&n[e]<=n[t]}function A2(i,e,t){for(var n=i.heap[t],l=t<<1;l<=i.heap_len&&(l<i.heap_len&&vb(e,i.heap[l+1],i.heap[l],i.depth)&&l++,!vb(e,n,i.heap[l],i.depth));)i.heap[t]=i.heap[l],t=l,l<<=1;i.heap[t]=n}function bb(i,e,t){var n,l,u=0,p,o;if(i.last_lit!==0)do n=i.pending_buf[i.d_buf+u*2]<<8|i.pending_buf[i.d_buf+u*2+1],l=i.pending_buf[i.l_buf+u],u++,n===0?$c(i,l,e):(p=np[l],$c(i,p+hp+1,e),o=dg[p],o!==0&&(l-=dy[p],au(i,l,o)),n--,p=d3(n),$c(i,p,t),o=d1[p],o!==0&&(n-=P1[p],au(i,n,o)));while(u<i.last_lit);$c(i,fy,e)}function pg(i,e){var t=e.dyn_tree,n=e.stat_desc.static_tree,l=e.stat_desc.has_stree,u=e.stat_desc.elems,p,o,c=-1,g;for(i.heap_len=0,i.heap_max=o3,p=0;p<u;p++)t[p*2]!==0?(i.heap[++i.heap_len]=c=p,i.depth[p]=0):t[p*2+1]=0;for(;i.heap_len<2;)g=i.heap[++i.heap_len]=c<2?++c:0,t[g*2]=1,i.depth[g]=0,i.opt_len--,l&&(i.static_len-=n[g*2+1]);for(e.max_code=c,p=i.heap_len>>1;p>=1;p--)A2(i,t,p);g=u;do p=i.heap[1],i.heap[1]=i.heap[i.heap_len--],A2(i,t,1),o=i.heap[1],i.heap[--i.heap_max]=p,i.heap[--i.heap_max]=o,t[g*2]=t[p*2]+t[o*2],i.depth[g]=(i.depth[p]>=i.depth[o]?i.depth[p]:i.depth[o])+1,t[p*2+1]=t[o*2+1]=g,i.heap[1]=g++,A2(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],TL(i,e),m3(t,c,i.bl_count)}function wb(i,e,t){var n,l=-1,u,p=e[0*2+1],o=0,c=7,g=4;for(p===0&&(c=138,g=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)u=p,p=e[(n+1)*2+1],!(++o<c&&u===p)&&(o<g?i.bl_tree[u*2]+=o:u!==0?(u!==l&&i.bl_tree[u*2]++,i.bl_tree[s3*2]++):o<=10?i.bl_tree[a3*2]++:i.bl_tree[l3*2]++,o=0,l=u,p===0?(c=138,g=3):u===p?(c=6,g=3):(c=7,g=4))}function xb(i,e,t){var n,l=-1,u,p=e[0*2+1],o=0,c=7,g=4;for(p===0&&(c=138,g=3),n=0;n<=t;n++)if(u=p,p=e[(n+1)*2+1],!(++o<c&&u===p)){if(o<g)do $c(i,u,i.bl_tree);while(--o!==0);else u!==0?(u!==l&&($c(i,u,i.bl_tree),o--),$c(i,s3,i.bl_tree),au(i,o-3,2)):o<=10?($c(i,a3,i.bl_tree),au(i,o-3,3)):($c(i,l3,i.bl_tree),au(i,o-11,7));o=0,l=u,p===0?(c=138,g=3):u===p?(c=6,g=3):(c=7,g=4)}}function ML(i){var e;for(wb(i,i.dyn_ltree,i.l_desc.max_code),wb(i,i.dyn_dtree,i.d_desc.max_code),pg(i,i.bl_desc),e=hy-1;e>=3&&i.bl_tree[u3[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function DL(i,e,t,n){var l;for(au(i,e-257,5),au(i,t-1,5),au(i,n-4,4),l=0;l<n;l++)au(i,i.bl_tree[u3[l]*2+1],3);xb(i,i.dyn_ltree,e-1),xb(i,i.dyn_dtree,t-1)}function OL(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return yb;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return _b;for(t=32;t<hp;t++)if(i.dyn_ltree[t*2]!==0)return _b;return yb}var Ab=!1;function FL(i){Ab||(LL(),Ab=!0),i.l_desc=new x2(i.dyn_ltree,c3),i.d_desc=new x2(i.dyn_dtree,h3),i.bl_desc=new x2(i.bl_tree,f3),i.bi_buf=0,i.bi_valid=0,g3(i)}function _3(i,e,t,n){au(i,(wL<<1)+(n?1:0),3),PL(i,e,t,!0)}function RL(i){au(i,r3<<1,3),$c(i,fy,Lh),IL(i)}function BL(i,e,t,n){var l,u,p=0;i.level>0?(i.strm.data_type===bL&&(i.strm.data_type=OL(i)),pg(i,i.l_desc),pg(i,i.d_desc),p=ML(i),l=i.opt_len+3+7>>>3,u=i.static_len+3+7>>>3,u<=l&&(l=u)):l=u=t+5,t+4<=l&&e!==-1?_3(i,e,t,n):i.strategy===vL||u===l?(au(i,(r3<<1)+(n?1:0),3),bb(i,Lh,qd)):(au(i,(xL<<1)+(n?1:0),3),DL(i,i.l_desc.max_code+1,i.d_desc.max_code+1,p+1),bb(i,i.dyn_ltree,i.dyn_dtree)),g3(i),n&&y3(i)}function zL(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(np[t]+hp+1)*2]++,i.dyn_dtree[d3(e)*2]++),i.last_lit===i.lit_bufsize-1}cd._tr_init=FL;cd._tr_stored_block=_3;cd._tr_flush_block=BL;cd._tr_tally=zL;cd._tr_align=RL;function NL(i,e,t,n){for(var l=i&65535|0,u=i>>>16&65535|0,p=0;t!==0;){p=t>2e3?2e3:t,t-=p;do l=l+e[n++]|0,u=u+l|0;while(--p);l%=65521,u%=65521}return l|u<<16|0}var v3=NL;function jL(){for(var i,e=[],t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var UL=jL();function VL(i,e,t,n){var l=UL,u=n+t;i^=-1;for(var p=n;p<u;p++)i=i>>>8^l[(i^e[p])&255];return i^-1}var b3=VL,py={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jl=zh,nc=cd,w3=v3,sf=b3,qL=py,o0=0,HL=1,GL=3,pf=4,Sb=5,eh=0,kb=1,rc=-2,WL=-3,S2=-5,XL=-1,YL=1,Zp=2,ZL=3,KL=4,JL=0,QL=2,tm=8,$L=9,e9=15,t9=8,i9=29,n9=256,mg=n9+1+i9,r9=30,o9=19,s9=2*mg+1,a9=15,Mo=3,hf=258,Tc=hf+Mo+1,l9=32,im=42,gg=69,p1=73,m1=91,g1=103,Yf=113,zd=666,Ca=1,fp=2,Qf=3,fd=4,u9=3;function ff(i,e){return i.msg=qL[e],e}function Cb(i){return(i<<1)-(i>4?9:0)}function uf(i){for(var e=i.length;--e>=0;)i[e]=0}function af(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(jl.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function nl(i,e){nc._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,af(i.strm)}function Xo(i,e){i.pending_buf[i.pending++]=e}function Dd(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function c9(i,e,t,n){var l=i.avail_in;return l>n&&(l=n),l===0?0:(i.avail_in-=l,jl.arraySet(e,i.input,i.next_in,l,t),i.state.wrap===1?i.adler=w3(i.adler,e,l,t):i.state.wrap===2&&(i.adler=sf(i.adler,e,l,t)),i.next_in+=l,i.total_in+=l,l)}function x3(i,e){var t=i.max_chain_length,n=i.strstart,l,u,p=i.prev_length,o=i.nice_match,c=i.strstart>i.w_size-Tc?i.strstart-(i.w_size-Tc):0,g=i.window,_=i.w_mask,v=i.prev,w=i.strstart+hf,x=g[n+p-1],C=g[n+p];i.prev_length>=i.good_match&&(t>>=2),o>i.lookahead&&(o=i.lookahead);do if(l=e,!(g[l+p]!==C||g[l+p-1]!==x||g[l]!==g[n]||g[++l]!==g[n+1])){n+=2,l++;do;while(g[++n]===g[++l]&&g[++n]===g[++l]&&g[++n]===g[++l]&&g[++n]===g[++l]&&g[++n]===g[++l]&&g[++n]===g[++l]&&g[++n]===g[++l]&&g[++n]===g[++l]&&n<w);if(u=hf-(w-n),n=w-hf,u>p){if(i.match_start=e,p=u,u>=o)break;x=g[n+p-1],C=g[n+p]}}while((e=v[e&_])>c&&--t!==0);return p<=i.lookahead?p:i.lookahead}function $f(i){var e=i.w_size,t,n,l,u,p;do{if(u=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-Tc)){jl.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,n=i.hash_size,t=n;do l=i.head[--t],i.head[t]=l>=e?l-e:0;while(--n);n=e,t=n;do l=i.prev[--t],i.prev[t]=l>=e?l-e:0;while(--n);u+=e}if(i.strm.avail_in===0)break;if(n=c9(i.strm,i.window,i.strstart+i.lookahead,u),i.lookahead+=n,i.lookahead+i.insert>=Mo)for(p=i.strstart-i.insert,i.ins_h=i.window[p],i.ins_h=(i.ins_h<<i.hash_shift^i.window[p+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[p+Mo-1])&i.hash_mask,i.prev[p&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=p,p++,i.insert--,!(i.lookahead+i.insert<Mo)););}while(i.lookahead<Tc&&i.strm.avail_in!==0)}function h9(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if($f(i),i.lookahead===0&&e===o0)return Ca;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var n=i.block_start+t;if((i.strstart===0||i.strstart>=n)&&(i.lookahead=i.strstart-n,i.strstart=n,nl(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-Tc&&(nl(i,!1),i.strm.avail_out===0))return Ca}return i.insert=0,e===pf?(nl(i,!0),i.strm.avail_out===0?Qf:fd):(i.strstart>i.block_start&&(nl(i,!1),i.strm.avail_out===0),Ca)}function k2(i,e){for(var t,n;;){if(i.lookahead<Tc){if($f(i),i.lookahead<Tc&&e===o0)return Ca;if(i.lookahead===0)break}if(t=0,i.lookahead>=Mo&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-Tc&&(i.match_length=x3(i,t)),i.match_length>=Mo)if(n=nc._tr_tally(i,i.strstart-i.match_start,i.match_length-Mo),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Mo){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else n=nc._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(nl(i,!1),i.strm.avail_out===0))return Ca}return i.insert=i.strstart<Mo-1?i.strstart:Mo-1,e===pf?(nl(i,!0),i.strm.avail_out===0?Qf:fd):i.last_lit&&(nl(i,!1),i.strm.avail_out===0)?Ca:fp}function I0(i,e){for(var t,n,l;;){if(i.lookahead<Tc){if($f(i),i.lookahead<Tc&&e===o0)return Ca;if(i.lookahead===0)break}if(t=0,i.lookahead>=Mo&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Mo-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-Tc&&(i.match_length=x3(i,t),i.match_length<=5&&(i.strategy===YL||i.match_length===Mo&&i.strstart-i.match_start>4096)&&(i.match_length=Mo-1)),i.prev_length>=Mo&&i.match_length<=i.prev_length){l=i.strstart+i.lookahead-Mo,n=nc._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Mo),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=l&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Mo-1,i.strstart++,n&&(nl(i,!1),i.strm.avail_out===0))return Ca}else if(i.match_available){if(n=nc._tr_tally(i,0,i.window[i.strstart-1]),n&&nl(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Ca}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=nc._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Mo-1?i.strstart:Mo-1,e===pf?(nl(i,!0),i.strm.avail_out===0?Qf:fd):i.last_lit&&(nl(i,!1),i.strm.avail_out===0)?Ca:fp}function f9(i,e){for(var t,n,l,u,p=i.window;;){if(i.lookahead<=hf){if($f(i),i.lookahead<=hf&&e===o0)return Ca;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Mo&&i.strstart>0&&(l=i.strstart-1,n=p[l],n===p[++l]&&n===p[++l]&&n===p[++l])){u=i.strstart+hf;do;while(n===p[++l]&&n===p[++l]&&n===p[++l]&&n===p[++l]&&n===p[++l]&&n===p[++l]&&n===p[++l]&&n===p[++l]&&l<u);i.match_length=hf-(u-l),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Mo?(t=nc._tr_tally(i,1,i.match_length-Mo),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=nc._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(nl(i,!1),i.strm.avail_out===0))return Ca}return i.insert=0,e===pf?(nl(i,!0),i.strm.avail_out===0?Qf:fd):i.last_lit&&(nl(i,!1),i.strm.avail_out===0)?Ca:fp}function d9(i,e){for(var t;;){if(i.lookahead===0&&($f(i),i.lookahead===0)){if(e===o0)return Ca;break}if(i.match_length=0,t=nc._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(nl(i,!1),i.strm.avail_out===0))return Ca}return i.insert=0,e===pf?(nl(i,!0),i.strm.avail_out===0?Qf:fd):i.last_lit&&(nl(i,!1),i.strm.avail_out===0)?Ca:fp}function Xc(i,e,t,n,l){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=l}var V0;V0=[new Xc(0,0,0,0,h9),new Xc(4,4,8,4,k2),new Xc(4,5,16,8,k2),new Xc(4,6,32,32,k2),new Xc(4,4,16,16,I0),new Xc(8,16,32,32,I0),new Xc(8,16,128,128,I0),new Xc(8,32,128,256,I0),new Xc(32,128,258,1024,I0),new Xc(32,258,258,4096,I0)];function p9(i){i.window_size=2*i.w_size,uf(i.head),i.max_lazy_match=V0[i.level].max_lazy,i.good_match=V0[i.level].good_length,i.nice_match=V0[i.level].nice_length,i.max_chain_length=V0[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Mo-1,i.match_available=0,i.ins_h=0}function m9(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new jl.Buf16(s9*2),this.dyn_dtree=new jl.Buf16((2*r9+1)*2),this.bl_tree=new jl.Buf16((2*o9+1)*2),uf(this.dyn_ltree),uf(this.dyn_dtree),uf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new jl.Buf16(a9+1),this.heap=new jl.Buf16(2*mg+1),uf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new jl.Buf16(2*mg+1),uf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A3(i){var e;return!i||!i.state?ff(i,rc):(i.total_in=i.total_out=0,i.data_type=QL,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?im:Yf,i.adler=e.wrap===2?0:1,e.last_flush=o0,nc._tr_init(e),eh)}function S3(i){var e=A3(i);return e===eh&&p9(i.state),e}function g9(i,e){return!i||!i.state||i.state.wrap!==2?rc:(i.state.gzhead=e,eh)}function k3(i,e,t,n,l,u){if(!i)return rc;var p=1;if(e===XL&&(e=6),n<0?(p=0,n=-n):n>15&&(p=2,n-=16),l<1||l>$L||t!==tm||n<8||n>15||e<0||e>9||u<0||u>KL)return ff(i,rc);n===8&&(n=9);var o=new m9;return i.state=o,o.strm=i,o.wrap=p,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=l+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Mo-1)/Mo),o.window=new jl.Buf8(o.w_size*2),o.head=new jl.Buf16(o.hash_size),o.prev=new jl.Buf16(o.w_size),o.lit_bufsize=1<<l+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new jl.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=(1+2)*o.lit_bufsize,o.level=e,o.strategy=u,o.method=t,S3(i)}function y9(i,e){return k3(i,e,tm,e9,t9,JL)}function _9(i,e){var t,n,l,u;if(!i||!i.state||e>Sb||e<0)return i?ff(i,rc):rc;if(n=i.state,!i.output||!i.input&&i.avail_in!==0||n.status===zd&&e!==pf)return ff(i,i.avail_out===0?S2:rc);if(n.strm=i,t=n.last_flush,n.last_flush=e,n.status===im)if(n.wrap===2)i.adler=0,Xo(n,31),Xo(n,139),Xo(n,8),n.gzhead?(Xo(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Xo(n,n.gzhead.time&255),Xo(n,n.gzhead.time>>8&255),Xo(n,n.gzhead.time>>16&255),Xo(n,n.gzhead.time>>24&255),Xo(n,n.level===9?2:n.strategy>=Zp||n.level<2?4:0),Xo(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Xo(n,n.gzhead.extra.length&255),Xo(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(i.adler=sf(i.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=gg):(Xo(n,0),Xo(n,0),Xo(n,0),Xo(n,0),Xo(n,0),Xo(n,n.level===9?2:n.strategy>=Zp||n.level<2?4:0),Xo(n,u9),n.status=Yf);else{var p=tm+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=Zp||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,p|=o<<6,n.strstart!==0&&(p|=l9),p+=31-p%31,n.status=Yf,Dd(n,p),n.strstart!==0&&(Dd(n,i.adler>>>16),Dd(n,i.adler&65535)),i.adler=1}if(n.status===gg)if(n.gzhead.extra){for(l=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>l&&(i.adler=sf(i.adler,n.pending_buf,n.pending-l,l)),af(i),l=n.pending,n.pending===n.pending_buf_size));)Xo(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>l&&(i.adler=sf(i.adler,n.pending_buf,n.pending-l,l)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=p1)}else n.status=p1;if(n.status===p1)if(n.gzhead.name){l=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>l&&(i.adler=sf(i.adler,n.pending_buf,n.pending-l,l)),af(i),l=n.pending,n.pending===n.pending_buf_size)){u=1;break}n.gzindex<n.gzhead.name.length?u=n.gzhead.name.charCodeAt(n.gzindex++)&255:u=0,Xo(n,u)}while(u!==0);n.gzhead.hcrc&&n.pending>l&&(i.adler=sf(i.adler,n.pending_buf,n.pending-l,l)),u===0&&(n.gzindex=0,n.status=m1)}else n.status=m1;if(n.status===m1)if(n.gzhead.comment){l=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>l&&(i.adler=sf(i.adler,n.pending_buf,n.pending-l,l)),af(i),l=n.pending,n.pending===n.pending_buf_size)){u=1;break}n.gzindex<n.gzhead.comment.length?u=n.gzhead.comment.charCodeAt(n.gzindex++)&255:u=0,Xo(n,u)}while(u!==0);n.gzhead.hcrc&&n.pending>l&&(i.adler=sf(i.adler,n.pending_buf,n.pending-l,l)),u===0&&(n.status=g1)}else n.status=g1;if(n.status===g1&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&af(i),n.pending+2<=n.pending_buf_size&&(Xo(n,i.adler&255),Xo(n,i.adler>>8&255),i.adler=0,n.status=Yf)):n.status=Yf),n.pending!==0){if(af(i),i.avail_out===0)return n.last_flush=-1,eh}else if(i.avail_in===0&&Cb(e)<=Cb(t)&&e!==pf)return ff(i,S2);if(n.status===zd&&i.avail_in!==0)return ff(i,S2);if(i.avail_in!==0||n.lookahead!==0||e!==o0&&n.status!==zd){var c=n.strategy===Zp?d9(n,e):n.strategy===ZL?f9(n,e):V0[n.level].func(n,e);if((c===Qf||c===fd)&&(n.status=zd),c===Ca||c===Qf)return i.avail_out===0&&(n.last_flush=-1),eh;if(c===fp&&(e===HL?nc._tr_align(n):e!==Sb&&(nc._tr_stored_block(n,0,0,!1),e===GL&&(uf(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),af(i),i.avail_out===0))return n.last_flush=-1,eh}return e!==pf?eh:n.wrap<=0?kb:(n.wrap===2?(Xo(n,i.adler&255),Xo(n,i.adler>>8&255),Xo(n,i.adler>>16&255),Xo(n,i.adler>>24&255),Xo(n,i.total_in&255),Xo(n,i.total_in>>8&255),Xo(n,i.total_in>>16&255),Xo(n,i.total_in>>24&255)):(Dd(n,i.adler>>>16),Dd(n,i.adler&65535)),af(i),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?eh:kb)}function v9(i){var e;return!i||!i.state?rc:(e=i.state.status,e!==im&&e!==gg&&e!==p1&&e!==m1&&e!==g1&&e!==Yf&&e!==zd?ff(i,rc):(i.state=null,e===Yf?ff(i,WL):eh))}function b9(i,e){var t=e.length,n,l,u,p,o,c,g,_;if(!i||!i.state||(n=i.state,p=n.wrap,p===2||p===1&&n.status!==im||n.lookahead))return rc;for(p===1&&(i.adler=w3(i.adler,e,t,0)),n.wrap=0,t>=n.w_size&&(p===0&&(uf(n.head),n.strstart=0,n.block_start=0,n.insert=0),_=new jl.Buf8(n.w_size),jl.arraySet(_,e,t-n.w_size,n.w_size,0),e=_,t=n.w_size),o=i.avail_in,c=i.next_in,g=i.input,i.avail_in=t,i.next_in=0,i.input=e,$f(n);n.lookahead>=Mo;){l=n.strstart,u=n.lookahead-(Mo-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[l+Mo-1])&n.hash_mask,n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--u);n.strstart=l,n.lookahead=Mo-1,$f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Mo-1,n.match_available=0,i.next_in=c,i.input=g,i.avail_in=o,n.wrap=p,eh}ch.deflateInit=y9;ch.deflateInit2=k3;ch.deflateReset=S3;ch.deflateResetKeep=A3;ch.deflateSetHeader=g9;ch.deflate=_9;ch.deflateEnd=v9;ch.deflateSetDictionary=b9;ch.deflateInfo="pako deflate (from Nodeca project)";var s0={},nm=zh,C3=!0,E3=!0;try{String.fromCharCode.apply(null,[0])}catch{C3=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E3=!1}var op=new nm.Buf8(256);for(var of=0;of<256;of++)op[of]=of>=252?6:of>=248?5:of>=240?4:of>=224?3:of>=192?2:1;op[254]=op[254]=1;s0.string2buf=function(i){var e,t,n,l,u,p=i.length,o=0;for(l=0;l<p;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<p&&(n=i.charCodeAt(l+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),l++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new nm.Buf8(o),u=0,l=0;u<o;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<p&&(n=i.charCodeAt(l+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),l++)),t<128?e[u++]=t:t<2048?(e[u++]=192|t>>>6,e[u++]=128|t&63):t<65536?(e[u++]=224|t>>>12,e[u++]=128|t>>>6&63,e[u++]=128|t&63):(e[u++]=240|t>>>18,e[u++]=128|t>>>12&63,e[u++]=128|t>>>6&63,e[u++]=128|t&63);return e};function I3(i,e){if(e<65534&&(i.subarray&&E3||!i.subarray&&C3))return String.fromCharCode.apply(null,nm.shrinkBuf(i,e));for(var t="",n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t}s0.buf2binstring=function(i){return I3(i,i.length)};s0.binstring2buf=function(i){for(var e=new nm.Buf8(i.length),t=0,n=e.length;t<n;t++)e[t]=i.charCodeAt(t);return e};s0.buf2string=function(i,e){var t,n,l,u,p=e||i.length,o=new Array(p*2);for(n=0,t=0;t<p;){if(l=i[t++],l<128){o[n++]=l;continue}if(u=op[l],u>4){o[n++]=65533,t+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&t<p;)l=l<<6|i[t++]&63,u--;if(u>1){o[n++]=65533;continue}l<65536?o[n++]=l:(l-=65536,o[n++]=55296|l>>10&1023,o[n++]=56320|l&1023)}return I3(o,n)};s0.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+op[i[t]]>e?t:e};function w9(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var T3=w9,Hd=ch,Gd=zh,yg=s0,_g=py,x9=T3,L3=Object.prototype.toString,A9=0,C2=4,$0=0,Eb=1,Ib=2,S9=-1,k9=0,C9=8;function e0(i){if(!(this instanceof e0))return new e0(i);this.options=Gd.assign({level:S9,method:C9,chunkSize:16384,windowBits:15,memLevel:8,strategy:k9,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x9,this.strm.avail_out=0;var t=Hd.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==$0)throw new Error(_g[t]);if(e.header&&Hd.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=yg.string2buf(e.dictionary):L3.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=Hd.deflateSetDictionary(this.strm,n),t!==$0)throw new Error(_g[t]);this._dict_set=!0}}e0.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,l,u;if(this.ended)return!1;u=e===~~e?e:e===!0?C2:A9,typeof i=="string"?t.input=yg.string2buf(i):L3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Gd.Buf8(n),t.next_out=0,t.avail_out=n),l=Hd.deflate(t,u),l!==Eb&&l!==$0)return this.onEnd(l),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(u===C2||u===Ib))&&(this.options.to==="string"?this.onData(yg.buf2binstring(Gd.shrinkBuf(t.output,t.next_out))):this.onData(Gd.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&l!==Eb);return u===C2?(l=Hd.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===$0):(u===Ib&&(this.onEnd($0),t.avail_out=0),!0)};e0.prototype.onData=function(i){this.chunks.push(i)};e0.prototype.onEnd=function(i){i===$0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function my(i,e){var t=new e0(e);if(t.push(i,!0),t.err)throw t.msg||_g[t.err];return t.result}function E9(i,e){return e=e||{},e.raw=!0,my(i,e)}function I9(i,e){return e=e||{},e.gzip=!0,my(i,e)}cp.Deflate=e0;cp.deflate=my;cp.deflateRaw=E9;cp.gzip=I9;var dp={},Dc={},Kp=30,T9=12,L9=function(e,t){var n,l,u,p,o,c,g,_,v,w,x,C,T,k,M,O,V,W,J,Q,Z,ie,Se,xe,le;n=e.state,l=e.next_in,xe=e.input,u=l+(e.avail_in-5),p=e.next_out,le=e.output,o=p-(t-e.avail_out),c=p+(e.avail_out-257),g=n.dmax,_=n.wsize,v=n.whave,w=n.wnext,x=n.window,C=n.hold,T=n.bits,k=n.lencode,M=n.distcode,O=(1<<n.lenbits)-1,V=(1<<n.distbits)-1;e:do{T<15&&(C+=xe[l++]<<T,T+=8,C+=xe[l++]<<T,T+=8),W=k[C&O];t:for(;;){if(J=W>>>24,C>>>=J,T-=J,J=W>>>16&255,J===0)le[p++]=W&65535;else if(J&16){Q=W&65535,J&=15,J&&(T<J&&(C+=xe[l++]<<T,T+=8),Q+=C&(1<<J)-1,C>>>=J,T-=J),T<15&&(C+=xe[l++]<<T,T+=8,C+=xe[l++]<<T,T+=8),W=M[C&V];i:for(;;){if(J=W>>>24,C>>>=J,T-=J,J=W>>>16&255,J&16){if(Z=W&65535,J&=15,T<J&&(C+=xe[l++]<<T,T+=8,T<J&&(C+=xe[l++]<<T,T+=8)),Z+=C&(1<<J)-1,Z>g){e.msg="invalid distance too far back",n.mode=Kp;break e}if(C>>>=J,T-=J,J=p-o,Z>J){if(J=Z-J,J>v&&n.sane){e.msg="invalid distance too far back",n.mode=Kp;break e}if(ie=0,Se=x,w===0){if(ie+=_-J,J<Q){Q-=J;do le[p++]=x[ie++];while(--J);ie=p-Z,Se=le}}else if(w<J){if(ie+=_+w-J,J-=w,J<Q){Q-=J;do le[p++]=x[ie++];while(--J);if(ie=0,w<Q){J=w,Q-=J;do le[p++]=x[ie++];while(--J);ie=p-Z,Se=le}}}else if(ie+=w-J,J<Q){Q-=J;do le[p++]=x[ie++];while(--J);ie=p-Z,Se=le}for(;Q>2;)le[p++]=Se[ie++],le[p++]=Se[ie++],le[p++]=Se[ie++],Q-=3;Q&&(le[p++]=Se[ie++],Q>1&&(le[p++]=Se[ie++]))}else{ie=p-Z;do le[p++]=le[ie++],le[p++]=le[ie++],le[p++]=le[ie++],Q-=3;while(Q>2);Q&&(le[p++]=le[ie++],Q>1&&(le[p++]=le[ie++]))}}else if((J&64)===0){W=M[(W&65535)+(C&(1<<J)-1)];continue i}else{e.msg="invalid distance code",n.mode=Kp;break e}break}}else if((J&64)===0){W=k[(W&65535)+(C&(1<<J)-1)];continue t}else if(J&32){n.mode=T9;break e}else{e.msg="invalid literal/length code",n.mode=Kp;break e}break}}while(l<u&&p<c);Q=T>>3,l-=Q,T-=Q<<3,C&=(1<<T)-1,e.next_in=l,e.next_out=p,e.avail_in=l<u?5+(u-l):5-(l-u),e.avail_out=p<c?257+(c-p):257-(p-c),n.hold=C,n.bits=T},Tb=zh,T0=15,Lb=852,Pb=592,Mb=0,E2=1,Db=2,P9=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],M9=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],D9=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],O9=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],F9=function(e,t,n,l,u,p,o,c){var g=c.bits,_=0,v=0,w=0,x=0,C=0,T=0,k=0,M=0,O=0,V=0,W,J,Q,Z,ie,Se=null,xe=0,le,Ee=new Tb.Buf16(T0+1),me=new Tb.Buf16(T0+1),Ae=null,pt=0,rt,Pt,We;for(_=0;_<=T0;_++)Ee[_]=0;for(v=0;v<l;v++)Ee[t[n+v]]++;for(C=g,x=T0;x>=1&&Ee[x]===0;x--);if(C>x&&(C=x),x===0)return u[p++]=1<<24|64<<16|0,u[p++]=1<<24|64<<16|0,c.bits=1,0;for(w=1;w<x&&Ee[w]===0;w++);for(C<w&&(C=w),M=1,_=1;_<=T0;_++)if(M<<=1,M-=Ee[_],M<0)return-1;if(M>0&&(e===Mb||x!==1))return-1;for(me[1]=0,_=1;_<T0;_++)me[_+1]=me[_]+Ee[_];for(v=0;v<l;v++)t[n+v]!==0&&(o[me[t[n+v]]++]=v);if(e===Mb?(Se=Ae=o,le=19):e===E2?(Se=P9,xe-=257,Ae=M9,pt-=257,le=256):(Se=D9,Ae=O9,le=-1),V=0,v=0,_=w,ie=p,T=C,k=0,Q=-1,O=1<<C,Z=O-1,e===E2&&O>Lb||e===Db&&O>Pb)return 1;for(;;){rt=_-k,o[v]<le?(Pt=0,We=o[v]):o[v]>le?(Pt=Ae[pt+o[v]],We=Se[xe+o[v]]):(Pt=32+64,We=0),W=1<<_-k,J=1<<T,w=J;do J-=W,u[ie+(V>>k)+J]=rt<<24|Pt<<16|We|0;while(J!==0);for(W=1<<_-1;V&W;)W>>=1;if(W!==0?(V&=W-1,V+=W):V=0,v++,--Ee[_]===0){if(_===x)break;_=t[n+o[v]]}if(_>C&&(V&Z)!==Q){for(k===0&&(k=C),ie+=w,T=_-k,M=1<<T;T+k<x&&(M-=Ee[T+k],!(M<=0));)T++,M<<=1;if(O+=1<<T,e===E2&&O>Lb||e===Db&&O>Pb)return 1;Q=V&Z,u[Q]=C<<24|T<<16|ie-p|0}}return V!==0&&(u[ie+V]=_-k<<24|64<<16|0),c.bits=C,0},Ou=zh,vg=v3,Yc=b3,R9=L9,Wd=F9,B9=0,P3=1,M3=2,Ob=4,z9=5,Jp=6,t0=0,N9=1,j9=2,oc=-2,D3=-3,O3=-4,U9=-5,Fb=8,F3=1,Rb=2,Bb=3,zb=4,Nb=5,jb=6,Ub=7,Vb=8,qb=9,Hb=10,M1=11,Th=12,I2=13,Gb=14,T2=15,Wb=16,Xb=17,Yb=18,Zb=19,Qp=20,$p=21,Kb=22,Jb=23,Qb=24,$b=25,e5=26,L2=27,t5=28,i5=29,Os=30,R3=31,V9=32,q9=852,H9=592,G9=15,W9=G9;function n5(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function X9(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ou.Buf16(320),this.work=new Ou.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function B3(i){var e;return!i||!i.state?oc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=F3,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Ou.Buf32(q9),e.distcode=e.distdyn=new Ou.Buf32(H9),e.sane=1,e.back=-1,t0)}function z3(i){var e;return!i||!i.state?oc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,B3(i))}function N3(i,e){var t,n;return!i||!i.state||(n=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?oc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,z3(i))}function j3(i,e){var t,n;return i?(n=new X9,i.state=n,n.window=null,t=N3(i,e),t!==t0&&(i.state=null),t):oc}function Y9(i){return j3(i,W9)}var r5=!0,P2,M2;function Z9(i){if(r5){var e;for(P2=new Ou.Buf32(512),M2=new Ou.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Wd(P3,i.lens,0,288,P2,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Wd(M3,i.lens,0,32,M2,0,i.work,{bits:5}),r5=!1}i.lencode=P2,i.lenbits=9,i.distcode=M2,i.distbits=5}function U3(i,e,t,n){var l,u=i.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Ou.Buf8(u.wsize)),n>=u.wsize?(Ou.arraySet(u.window,e,t-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>n&&(l=n),Ou.arraySet(u.window,e,t-n,l,u.wnext),n-=l,n?(Ou.arraySet(u.window,e,t-n,n,0),u.wnext=n,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0}function K9(i,e){var t,n,l,u,p,o,c,g,_,v,w,x,C,T,k=0,M,O,V,W,J,Q,Z,ie,Se=new Ou.Buf8(4),xe,le,Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return oc;t=i.state,t.mode===Th&&(t.mode=I2),p=i.next_out,l=i.output,c=i.avail_out,u=i.next_in,n=i.input,o=i.avail_in,g=t.hold,_=t.bits,v=o,w=c,ie=t0;e:for(;;)switch(t.mode){case F3:if(t.wrap===0){t.mode=I2;break}for(;_<16;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(t.wrap&2&&g===35615){t.check=0,Se[0]=g&255,Se[1]=g>>>8&255,t.check=Yc(t.check,Se,2,0),g=0,_=0,t.mode=Rb;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((g&255)<<8)+(g>>8))%31){i.msg="incorrect header check",t.mode=Os;break}if((g&15)!==Fb){i.msg="unknown compression method",t.mode=Os;break}if(g>>>=4,_-=4,Z=(g&15)+8,t.wbits===0)t.wbits=Z;else if(Z>t.wbits){i.msg="invalid window size",t.mode=Os;break}t.dmax=1<<Z,i.adler=t.check=1,t.mode=g&512?Hb:Th,g=0,_=0;break;case Rb:for(;_<16;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(t.flags=g,(t.flags&255)!==Fb){i.msg="unknown compression method",t.mode=Os;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Os;break}t.head&&(t.head.text=g>>8&1),t.flags&512&&(Se[0]=g&255,Se[1]=g>>>8&255,t.check=Yc(t.check,Se,2,0)),g=0,_=0,t.mode=Bb;case Bb:for(;_<32;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}t.head&&(t.head.time=g),t.flags&512&&(Se[0]=g&255,Se[1]=g>>>8&255,Se[2]=g>>>16&255,Se[3]=g>>>24&255,t.check=Yc(t.check,Se,4,0)),g=0,_=0,t.mode=zb;case zb:for(;_<16;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}t.head&&(t.head.xflags=g&255,t.head.os=g>>8),t.flags&512&&(Se[0]=g&255,Se[1]=g>>>8&255,t.check=Yc(t.check,Se,2,0)),g=0,_=0,t.mode=Nb;case Nb:if(t.flags&1024){for(;_<16;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}t.length=g,t.head&&(t.head.extra_len=g),t.flags&512&&(Se[0]=g&255,Se[1]=g>>>8&255,t.check=Yc(t.check,Se,2,0)),g=0,_=0}else t.head&&(t.head.extra=null);t.mode=jb;case jb:if(t.flags&1024&&(x=t.length,x>o&&(x=o),x&&(t.head&&(Z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Ou.arraySet(t.head.extra,n,u,x,Z)),t.flags&512&&(t.check=Yc(t.check,n,x,u)),o-=x,u+=x,t.length-=x),t.length))break e;t.length=0,t.mode=Ub;case Ub:if(t.flags&2048){if(o===0)break e;x=0;do Z=n[u+x++],t.head&&Z&&t.length<65536&&(t.head.name+=String.fromCharCode(Z));while(Z&&x<o);if(t.flags&512&&(t.check=Yc(t.check,n,x,u)),o-=x,u+=x,Z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Vb;case Vb:if(t.flags&4096){if(o===0)break e;x=0;do Z=n[u+x++],t.head&&Z&&t.length<65536&&(t.head.comment+=String.fromCharCode(Z));while(Z&&x<o);if(t.flags&512&&(t.check=Yc(t.check,n,x,u)),o-=x,u+=x,Z)break e}else t.head&&(t.head.comment=null);t.mode=qb;case qb:if(t.flags&512){for(;_<16;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(g!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Os;break}g=0,_=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Th;break;case Hb:for(;_<32;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}i.adler=t.check=n5(g),g=0,_=0,t.mode=M1;case M1:if(t.havedict===0)return i.next_out=p,i.avail_out=c,i.next_in=u,i.avail_in=o,t.hold=g,t.bits=_,j9;i.adler=t.check=1,t.mode=Th;case Th:if(e===z9||e===Jp)break e;case I2:if(t.last){g>>>=_&7,_-=_&7,t.mode=L2;break}for(;_<3;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}switch(t.last=g&1,g>>>=1,_-=1,g&3){case 0:t.mode=Gb;break;case 1:if(Z9(t),t.mode=Qp,e===Jp){g>>>=2,_-=2;break e}break;case 2:t.mode=Xb;break;case 3:i.msg="invalid block type",t.mode=Os}g>>>=2,_-=2;break;case Gb:for(g>>>=_&7,_-=_&7;_<32;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if((g&65535)!==(g>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Os;break}if(t.length=g&65535,g=0,_=0,t.mode=T2,e===Jp)break e;case T2:t.mode=Wb;case Wb:if(x=t.length,x){if(x>o&&(x=o),x>c&&(x=c),x===0)break e;Ou.arraySet(l,n,u,x,p),o-=x,u+=x,c-=x,p+=x,t.length-=x;break}t.mode=Th;break;case Xb:for(;_<14;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(t.nlen=(g&31)+257,g>>>=5,_-=5,t.ndist=(g&31)+1,g>>>=5,_-=5,t.ncode=(g&15)+4,g>>>=4,_-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Os;break}t.have=0,t.mode=Yb;case Yb:for(;t.have<t.ncode;){for(;_<3;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}t.lens[Ee[t.have++]]=g&7,g>>>=3,_-=3}for(;t.have<19;)t.lens[Ee[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,xe={bits:t.lenbits},ie=Wd(B9,t.lens,0,19,t.lencode,0,t.work,xe),t.lenbits=xe.bits,ie){i.msg="invalid code lengths set",t.mode=Os;break}t.have=0,t.mode=Zb;case Zb:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[g&(1<<t.lenbits)-1],M=k>>>24,O=k>>>16&255,V=k&65535,!(M<=_);){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(V<16)g>>>=M,_-=M,t.lens[t.have++]=V;else{if(V===16){for(le=M+2;_<le;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(g>>>=M,_-=M,t.have===0){i.msg="invalid bit length repeat",t.mode=Os;break}Z=t.lens[t.have-1],x=3+(g&3),g>>>=2,_-=2}else if(V===17){for(le=M+3;_<le;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}g>>>=M,_-=M,Z=0,x=3+(g&7),g>>>=3,_-=3}else{for(le=M+7;_<le;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}g>>>=M,_-=M,Z=0,x=11+(g&127),g>>>=7,_-=7}if(t.have+x>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Os;break}for(;x--;)t.lens[t.have++]=Z}}if(t.mode===Os)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Os;break}if(t.lenbits=9,xe={bits:t.lenbits},ie=Wd(P3,t.lens,0,t.nlen,t.lencode,0,t.work,xe),t.lenbits=xe.bits,ie){i.msg="invalid literal/lengths set",t.mode=Os;break}if(t.distbits=6,t.distcode=t.distdyn,xe={bits:t.distbits},ie=Wd(M3,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,xe),t.distbits=xe.bits,ie){i.msg="invalid distances set",t.mode=Os;break}if(t.mode=Qp,e===Jp)break e;case Qp:t.mode=$p;case $p:if(o>=6&&c>=258){i.next_out=p,i.avail_out=c,i.next_in=u,i.avail_in=o,t.hold=g,t.bits=_,R9(i,w),p=i.next_out,l=i.output,c=i.avail_out,u=i.next_in,n=i.input,o=i.avail_in,g=t.hold,_=t.bits,t.mode===Th&&(t.back=-1);break}for(t.back=0;k=t.lencode[g&(1<<t.lenbits)-1],M=k>>>24,O=k>>>16&255,V=k&65535,!(M<=_);){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(O&&(O&240)===0){for(W=M,J=O,Q=V;k=t.lencode[Q+((g&(1<<W+J)-1)>>W)],M=k>>>24,O=k>>>16&255,V=k&65535,!(W+M<=_);){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}g>>>=W,_-=W,t.back+=W}if(g>>>=M,_-=M,t.back+=M,t.length=V,O===0){t.mode=e5;break}if(O&32){t.back=-1,t.mode=Th;break}if(O&64){i.msg="invalid literal/length code",t.mode=Os;break}t.extra=O&15,t.mode=Kb;case Kb:if(t.extra){for(le=t.extra;_<le;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}t.length+=g&(1<<t.extra)-1,g>>>=t.extra,_-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Jb;case Jb:for(;k=t.distcode[g&(1<<t.distbits)-1],M=k>>>24,O=k>>>16&255,V=k&65535,!(M<=_);){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if((O&240)===0){for(W=M,J=O,Q=V;k=t.distcode[Q+((g&(1<<W+J)-1)>>W)],M=k>>>24,O=k>>>16&255,V=k&65535,!(W+M<=_);){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}g>>>=W,_-=W,t.back+=W}if(g>>>=M,_-=M,t.back+=M,O&64){i.msg="invalid distance code",t.mode=Os;break}t.offset=V,t.extra=O&15,t.mode=Qb;case Qb:if(t.extra){for(le=t.extra;_<le;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}t.offset+=g&(1<<t.extra)-1,g>>>=t.extra,_-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Os;break}t.mode=$b;case $b:if(c===0)break e;if(x=w-c,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Os;break}x>t.wnext?(x-=t.wnext,C=t.wsize-x):C=t.wnext-x,x>t.length&&(x=t.length),T=t.window}else T=l,C=p-t.offset,x=t.length;x>c&&(x=c),c-=x,t.length-=x;do l[p++]=T[C++];while(--x);t.length===0&&(t.mode=$p);break;case e5:if(c===0)break e;l[p++]=t.length,c--,t.mode=$p;break;case L2:if(t.wrap){for(;_<32;){if(o===0)break e;o--,g|=n[u++]<<_,_+=8}if(w-=c,i.total_out+=w,t.total+=w,w&&(i.adler=t.check=t.flags?Yc(t.check,l,w,p-w):vg(t.check,l,w,p-w)),w=c,(t.flags?g:n5(g))!==t.check){i.msg="incorrect data check",t.mode=Os;break}g=0,_=0}t.mode=t5;case t5:if(t.wrap&&t.flags){for(;_<32;){if(o===0)break e;o--,g+=n[u++]<<_,_+=8}if(g!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Os;break}g=0,_=0}t.mode=i5;case i5:ie=N9;break e;case Os:ie=D3;break e;case R3:return O3;case V9:default:return oc}return i.next_out=p,i.avail_out=c,i.next_in=u,i.avail_in=o,t.hold=g,t.bits=_,(t.wsize||w!==i.avail_out&&t.mode<Os&&(t.mode<L2||e!==Ob))&&U3(i,i.output,i.next_out,w-i.avail_out),v-=i.avail_in,w-=i.avail_out,i.total_in+=v,i.total_out+=w,t.total+=w,t.wrap&&w&&(i.adler=t.check=t.flags?Yc(t.check,l,w,i.next_out-w):vg(t.check,l,w,i.next_out-w)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Th?128:0)+(t.mode===Qp||t.mode===T2?256:0),(v===0&&w===0||e===Ob)&&ie===t0&&(ie=U9),ie}function J9(i){if(!i||!i.state)return oc;var e=i.state;return e.window&&(e.window=null),i.state=null,t0}function Q9(i,e){var t;return!i||!i.state||(t=i.state,(t.wrap&2)===0)?oc:(t.head=e,e.done=!1,t0)}function $9(i,e){var t=e.length,n,l,u;return!i||!i.state||(n=i.state,n.wrap!==0&&n.mode!==M1)?oc:n.mode===M1&&(l=1,l=vg(l,e,t,0),l!==n.check)?D3:(u=U3(i,e,t,t),u?(n.mode=R3,O3):(n.havedict=1,t0))}Dc.inflateReset=z3;Dc.inflateReset2=N3;Dc.inflateResetKeep=B3;Dc.inflateInit=Y9;Dc.inflateInit2=j3;Dc.inflate=K9;Dc.inflateEnd=J9;Dc.inflateGetHeader=Q9;Dc.inflateSetDictionary=$9;Dc.inflateInfo="pako inflate (from Nodeca project)";var V3={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function eP(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var tP=eP,ed=Dc,Xd=zh,y1=s0,ta=V3,bg=py,iP=T3,nP=tP,q3=Object.prototype.toString;function i0(i){if(!(this instanceof i0))return new i0(i);this.options=Xd.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iP,this.strm.avail_out=0;var t=ed.inflateInit2(this.strm,e.windowBits);if(t!==ta.Z_OK)throw new Error(bg[t]);if(this.header=new nP,ed.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=y1.string2buf(e.dictionary):q3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ed.inflateSetDictionary(this.strm,e.dictionary),t!==ta.Z_OK)))throw new Error(bg[t])}i0.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,l=this.options.dictionary,u,p,o,c,g,_=!1;if(this.ended)return!1;p=e===~~e?e:e===!0?ta.Z_FINISH:ta.Z_NO_FLUSH,typeof i=="string"?t.input=y1.binstring2buf(i):q3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Xd.Buf8(n),t.next_out=0,t.avail_out=n),u=ed.inflate(t,ta.Z_NO_FLUSH),u===ta.Z_NEED_DICT&&l&&(u=ed.inflateSetDictionary(this.strm,l)),u===ta.Z_BUF_ERROR&&_===!0&&(u=ta.Z_OK,_=!1),u!==ta.Z_STREAM_END&&u!==ta.Z_OK)return this.onEnd(u),this.ended=!0,!1;t.next_out&&(t.avail_out===0||u===ta.Z_STREAM_END||t.avail_in===0&&(p===ta.Z_FINISH||p===ta.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=y1.utf8border(t.output,t.next_out),c=t.next_out-o,g=y1.buf2string(t.output,o),t.next_out=c,t.avail_out=n-c,c&&Xd.arraySet(t.output,t.output,o,c,0),this.onData(g)):this.onData(Xd.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(_=!0)}while((t.avail_in>0||t.avail_out===0)&&u!==ta.Z_STREAM_END);return u===ta.Z_STREAM_END&&(p=ta.Z_FINISH),p===ta.Z_FINISH?(u=ed.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===ta.Z_OK):(p===ta.Z_SYNC_FLUSH&&(this.onEnd(ta.Z_OK),t.avail_out=0),!0)};i0.prototype.onData=function(i){this.chunks.push(i)};i0.prototype.onEnd=function(i){i===ta.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Xd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function gy(i,e){var t=new i0(e);if(t.push(i,!0),t.err)throw t.msg||bg[t.err];return t.result}function rP(i,e){return e=e||{},e.raw=!0,gy(i,e)}dp.Inflate=i0;dp.inflate=gy;dp.inflateRaw=rP;dp.ungzip=gy;var oP=zh.assign,sP=cp,aP=dp,lP=V3,H3={};oP(H3,sP,aP,lP);var uP=H3,cP=function(){function i(e){var t=this;this.decode=function(){var x=new Uint8Array(t.width*t.height*4),C=t.decodePixels();return t.copyImageDataToBuffer(x,C),x},this.copyImageDataToBuffer=function(x,C){var T=t.colors,k,M=t.hasAlphaChannel;t.palette.length&&(k=t.decodePalette(),T=4,M=!0);var O=x,V=O.length,W=k||C,J=0,Q=0;if(T===1)for(;J<V;){var Z=k?C[J/4]*4:Q,ie=W[Z++];O[J++]=ie,O[J++]=ie,O[J++]=ie,O[J++]=M?W[Z++]:255,Q=Z}else for(;J<V;){var Z=k?C[J/4]*4:Q;O[J++]=W[Z++],O[J++]=W[Z++],O[J++]=W[Z++],O[J++]=M?W[Z++]:255,Q=Z}},this.decodePixels=function(){for(var x=uP.inflate(t.imgData),C=t.pixelBitlength/8,T=C*t.width,k=new Uint8Array(T*t.height),M=x.length,O=0,V=0,W=0;V<M;){switch(x[V++]){case 0:{for(var J=0;J<T;J++)k[W++]=x[V++];break}case 1:{for(var J=0;J<T;J++){var Q=x[V++],Z=J<C?0:k[W-C];k[W++]=(Q+Z)%256}break}case 2:{for(var J=0;J<T;J++){var Q=x[V++],ie=(J-J%C)/C,Se=(O-1)*T+ie*C+J%C,xe=O&&k[Se];k[W++]=(xe+Q)%256}break}case 3:{for(var J=0;J<T;J++){var Q=x[V++],ie=(J-J%C)/C,Z=J<C?0:k[W-C],Se=(O-1)*T+ie*C+J%C,xe=O&&k[Se];k[W++]=(Q+Math.floor((Z+xe)/2))%256}break}case 4:{for(var J=0;J<T;J++){var Q=x[V++],ie=(J-J%C)/C,Z=J<C?0:k[W-C],xe=void 0,le=void 0;if(O===0)xe=le=0;else{var Ee=(O-1)*T+ie*C+J%C,me=(O-1)*T+(ie-1)*C+J%C;xe=k[Ee],le=ie&&k[me]}var Ae=Z+xe-le,pt=Math.abs(Ae-Z),rt=Math.abs(Ae-xe),Pt=Math.abs(Ae-le),We=void 0;pt<=rt&&pt<=Pt?We=Z:rt<=Pt?We=xe:We=le,k[W++]=(Q+We)%256}break}default:throw new Error("Invalid filter algorithm: "+x[V-1])}O++}return k},this.read=function(x){for(var C=[],T=0;T<x;T++)C[T]=t.data[t.pos++];return C},this.readUInt32=function(){var x=t.data[t.pos++]<<24,C=t.data[t.pos++]<<16,T=t.data[t.pos++]<<8,k=t.data[t.pos++];return x|C|T|k},this.decodePalette=function(){for(var x=t.palette,C=t.transparency.indexed||[],T=new Uint8Array(C.length+x.length),k=0,M=0,O=0;O<x.length;O++){T[k++]=x[O],T[k++]=x[O+1],T[k++]=x[O+2];var V=C[M++];T[k++]=V!==void 0?V:255}return T},this.data=e,this.pos=8,this.palette=[];var n=[];for(this.transparency={},this.text={};;){for(var l=this.readUInt32(),u="",p=0;p<4;p++)u+=String.fromCharCode(this.data[this.pos++]);switch(u){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(l);break}case"IDAT":{for(var p=0;p<l;p++)n.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{this.transparency.indexed=this.read(l);var o=255-this.transparency.indexed.length;if(o>0)for(var p=0;p<255;p++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(l)[0];break}case 2:{this.transparency.rgb=this.read(l);break}}break}case"tEXt":{var c=this.read(l),g=c.indexOf(0),_=String.fromCharCode.apply(String,c.slice(0,g));this.text[_]=String.fromCharCode.apply(String,c.slice(g+1));break}case"IEND":{var v={0:1,3:1,4:1,2:3,6:3};this.colors=v[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);var w=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*w,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(n);return}default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return i.load=function(e){return new i(e)},i}();const wg=";base64,",hP=i=>i.indexOf(wg)>-1,fP=i=>{const e=i.indexOf(wg)+wg.length,t=i.substring(e),n=window.atob(t),l=n.length,u=new Uint8Array(new ArrayBuffer(l));for(let p=0;p<l;p++)u[p]=n.charCodeAt(p);return u};async function dP(){const i=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],e=n=>new Promise((l,u)=>{var p=document.createElement("img");p.onerror=o=>l(!1),p.onload=()=>l(!0),p.src=n});return(await Promise.all(i.map(e))).every(n=>!!n)}class pP extends Error{}async function G3(i){return new Promise((e,t)=>{const n=new XMLHttpRequest;n.open("GET",i),n.responseType="arraybuffer";const l=()=>{t(new pP(`failed to load binary data, code "${n.status}" from "${i}"`))};n.onerror=l,n.onreadystatechange=()=>{n.readyState==4&&(n.status==200?e(new Uint8Array(n.response)):l())},n.send()})}function mP(){var i=typeof i<"u"?i:{},e=function(){function U(){}function $(pi,mi){return function(){pi.apply(mi,arguments)}}function ye(pi){if(!(this instanceof ye))throw new TypeError("Promises must be constructed via new");if(typeof pi!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],yi(pi,this)}function De(pi,mi){for(;pi._state===3;)pi=pi._value;if(pi._state===0){pi._deferreds.push(mi);return}pi._handled=!0,ye._immediateFn(function(){var ri=pi._state===1?mi.onFulfilled:mi.onRejected;if(ri===null){(pi._state===1?ot:It)(mi.promise,pi._value);return}var qi;try{qi=ri(pi._value)}catch(sn){It(mi.promise,sn);return}ot(mi.promise,qi)})}function ot(pi,mi){try{if(mi===pi)throw new TypeError("A promise cannot be resolved with itself.");if(mi&&(typeof mi=="object"||typeof mi=="function")){var ri=mi.then;if(mi instanceof ye){pi._state=3,pi._value=mi,Nt(pi);return}else if(typeof ri=="function"){yi($(ri,mi),pi);return}}pi._state=1,pi._value=mi,Nt(pi)}catch(qi){It(pi,qi)}}function It(pi,mi){pi._state=2,pi._value=mi,Nt(pi)}function Nt(pi){pi._state===2&&pi._deferreds.length===0&&ye._immediateFn(function(){pi._handled||ye._unhandledRejectionFn(pi._value)});for(var mi=0,ri=pi._deferreds.length;mi<ri;mi++)De(pi,pi._deferreds[mi]);pi._deferreds=null}function Bt(pi,mi,ri){this.onFulfilled=typeof pi=="function"?pi:null,this.onRejected=typeof mi=="function"?mi:null,this.promise=ri}function yi(pi,mi){var ri=!1;try{pi(function(qi){ri||(ri=!0,ot(mi,qi))},function(qi){ri||(ri=!0,It(mi,qi))})}catch(qi){if(ri)return;ri=!0,It(mi,qi)}}return ye.prototype.catch=function(pi){return this.then(null,pi)},ye.prototype.then=function(pi,mi){var ri=new this.constructor(U);return De(this,new Bt(pi,mi,ri)),ri},ye.all=function(pi){return new ye(function(mi,ri){if(!Array.isArray(pi))return ri(new TypeError("Promise.all accepts an array"));var qi=Array.prototype.slice.call(pi);if(qi.length===0)return mi([]);var sn=qi.length;function Sn(m,Ri){try{if(Ri&&(typeof Ri=="object"||typeof Ri=="function")){var h=Ri.then;if(typeof h=="function"){h.call(Ri,function(F){Sn(m,F)},ri);return}}qi[m]=Ri,--sn===0&&mi(qi)}catch(F){ri(F)}}for(var dt=0;dt<qi.length;dt++)Sn(dt,qi[dt])})},ye.resolve=function(pi){return pi&&typeof pi=="object"&&pi.constructor===ye?pi:new ye(function(mi){mi(pi)})},ye.reject=function(pi){return new ye(function(mi,ri){ri(pi)})},ye.race=function(pi){return new ye(function(mi,ri){if(!Array.isArray(pi))return ri(new TypeError("Promise.race accepts an array"));for(var qi=0,sn=pi.length;qi<sn;qi++)ye.resolve(pi[qi]).then(mi,ri)})},ye._immediateFn=typeof setImmediate=="function"&&function(pi){setImmediate(pi)}||function(pi){setTimeout(pi,0)},ye._unhandledRejectionFn=function(mi){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",mi)},ye}(),t={},n;for(n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);var l=!0,u="";function p(U){return i.locateFile?i.locateFile(U,u):u+U}var o,c,g;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",o=function($){try{var ye=new XMLHttpRequest;return ye.open("GET",$,!1),ye.send(null),ye.responseText}catch(ot){var De=qs($);if(De)return Bo(De);throw ot}},c=function($,ye,De){var ot=new XMLHttpRequest;ot.open("GET",$,!0),ot.responseType="arraybuffer",ot.onload=function(){if(ot.status==200||ot.status==0&&ot.response){ye(ot.response);return}var Nt=qs($);if(Nt){ye(Nt.buffer);return}De()},ot.onerror=De,ot.send(null)};var _=i.print||console.log.bind(console),v=i.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);t=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var w=16;function x(U,$){return $||($=w),Math.ceil(U/$)*$}function C(U){C.shown||(C.shown={}),C.shown[U]||(C.shown[U]=1,v(U))}var T=0,k=function(U){T=U},M=function(){return T},O;i.wasmBinary&&(O=i.wasmBinary),i.noExitRuntime&&i.noExitRuntime;var V={Memory:function(U){this.buffer=new ArrayBuffer(U.initial*65536),this.grow=function($){var ye=pa($);return ye}},Table:function(U){var $=new Array(U.initial);return $.set=function(ye,De){$[ye]=De},$.get=function(ye){return $[ye]},$},Module:function(U){},Instance:function(U,$){this.exports=function(De,ot,It){function Nt(ri,qi,sn){var Sn=qi.memory,dt=It,m=new ri.Int8Array(sn),Ri=new ri.Int16Array(sn),h=new ri.Int32Array(sn),F=new ri.Uint8Array(sn),dn=new ri.Uint16Array(sn),Zn=new ri.Uint32Array(sn);new ri.Float32Array(sn);var xo=new ri.Float64Array(sn),re=ri.Math.imul;ri.Math.fround,ri.Math.abs;var Mr=ri.Math.clz32;ri.Math.min,ri.Math.max,ri.Math.floor,ri.Math.ceil,ri.Math.sqrt;var ga=qi.abort;ri.NaN,ri.Infinity;var Ga=qi.SDL_Init,Oc=qi.SDL_SetVideoMode,El=qi.SDL_CreateRGBSurface,Gs=qi.SDL_LockSurface,ac=qi.SDL_UnlockSurface,pu=qi.SDL_UpperBlit,hh=qi.SDL_Flip,mu=qi.SDL_FreeSurface,fh=qi.fd_close,zu=qi.fd_write,gu=qi.emscripten_resize_heap,yu=qi.emscripten_memcpy_big,Wl=qi.setTempRet0,_u=qi.fd_seek,Fn=5255072,Pn=0;function Nu(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0;y=h[s>>2],he=h[s+4>>2],a=h[r+2264>>2],m[a+823|0]=129,m[a+807|0]=129,m[a+791|0]=129,m[a+775|0]=129,m[a+759|0]=129,m[a+743|0]=129,m[a+727|0]=129,m[a+711|0]=129,m[a+695|0]=129,m[a+679|0]=129,m[a+663|0]=129,m[a+647|0]=129,m[a+631|0]=129,m[a+615|0]=129,m[a+599|0]=129,m[a+583|0]=129,m[a+519|0]=129,m[a+487|0]=129,m[a+455|0]=129,m[a+423|0]=129,m[a+391|0]=129,m[a+359|0]=129,m[a+327|0]=129,m[a+295|0]=129,m[a+263|0]=129,m[a+231|0]=129,m[a+199|0]=129,m[a+167|0]=129,m[a+135|0]=129,m[a+103|0]=129,m[a+71|0]=129,m[a+39|0]=129;e:{if((he|0)>=1){m[a+551|0]=129,m[a+567|0]=129,m[a+7|0]=129;break e}m[a+7|0]=2139062143,m[a+8|0]=8355711,m[a+9|0]=32639,m[a+10|0]=127,m[a+11|0]=2139062143,m[a+12|0]=8355711,m[a+13|0]=32639,m[a+14|0]=127,m[a+551|0]=2139062143,m[a+552|0]=8355711,m[a+553|0]=32639,m[a+554|0]=127,m[a+555|0]=2139062143,m[a+556|0]=8355711,m[a+557|0]=32639,m[a+558|0]=127,m[a+567|0]=2139062143,m[a+568|0]=8355711,m[a+569|0]=32639,m[a+570|0]=127,m[a+571|0]=2139062143,m[a+572|0]=8355711,m[a+573|0]=32639,m[a+574|0]=127,m[a+20|0]=2139062143,m[a+21|0]=8355711,m[a+22|0]=32639,m[a+23|0]=127,m[a+24|0]=2139062143,m[a+25|0]=8355711,m[a+26|0]=32639,m[a+27|0]=127,m[a+15|0]=2139062143,m[a+16|0]=8355711,m[a+17|0]=32639,m[a+18|0]=127,m[a+19|0]=2139062143,m[a+20|0]=8355711,m[a+21|0]=32639,m[a+22|0]=127,m[a+559|0]=127,m[a+575|0]=127}if(h[r+288>>2]>=1)for(ze=a+600|0,Ye=a+584|0,ke=a+40|0,Lt=he?5:6,Jt=y<<3,oi=y<<4,Fi=a+520|0,wi=a+8|0,yt=a+24|0,Rt=!he<<2,Ki=(he|0)<1;;){L=h[s+16>>2],te&&(y=F[a+20|0]|F[a+21|0]<<8|(F[a+22|0]<<16|F[a+23|0]<<24),m[a+4|0]=y,m[a+5|0]=y>>>8,m[a+6|0]=y>>>16,m[a+7|0]=y>>>24,y=F[a+52|0]|F[a+53|0]<<8|(F[a+54|0]<<16|F[a+55|0]<<24),m[a+36|0]=y,m[a+37|0]=y>>>8,m[a+38|0]=y>>>16,m[a+39|0]=y>>>24,y=F[a+84|0]|F[a+85|0]<<8|(F[a+86|0]<<16|F[a+87|0]<<24),m[a+68|0]=y,m[a+69|0]=y>>>8,m[a+70|0]=y>>>16,m[a+71|0]=y>>>24,y=F[a+116|0]|F[a+117|0]<<8|(F[a+118|0]<<16|F[a+119|0]<<24),m[a+100|0]=y,m[a+101|0]=y>>>8,m[a+102|0]=y>>>16,m[a+103|0]=y>>>24,y=F[a+148|0]|F[a+149|0]<<8|(F[a+150|0]<<16|F[a+151|0]<<24),m[a+132|0]=y,m[a+133|0]=y>>>8,m[a+134|0]=y>>>16,m[a+135|0]=y>>>24,y=F[a+180|0]|F[a+181|0]<<8|(F[a+182|0]<<16|F[a+183|0]<<24),m[a+164|0]=y,m[a+165|0]=y>>>8,m[a+166|0]=y>>>16,m[a+167|0]=y>>>24,y=F[a+212|0]|F[a+213|0]<<8|(F[a+214|0]<<16|F[a+215|0]<<24),m[a+196|0]=y,m[a+197|0]=y>>>8,m[a+198|0]=y>>>16,m[a+199|0]=y>>>24,y=F[a+244|0]|F[a+245|0]<<8|(F[a+246|0]<<16|F[a+247|0]<<24),m[a+228|0]=y,m[a+229|0]=y>>>8,m[a+230|0]=y>>>16,m[a+231|0]=y>>>24,y=F[a+276|0]|F[a+277|0]<<8|(F[a+278|0]<<16|F[a+279|0]<<24),m[a+260|0]=y,m[a+261|0]=y>>>8,m[a+262|0]=y>>>16,m[a+263|0]=y>>>24,y=F[a+308|0]|F[a+309|0]<<8|(F[a+310|0]<<16|F[a+311|0]<<24),m[a+292|0]=y,m[a+293|0]=y>>>8,m[a+294|0]=y>>>16,m[a+295|0]=y>>>24,y=F[a+340|0]|F[a+341|0]<<8|(F[a+342|0]<<16|F[a+343|0]<<24),m[a+324|0]=y,m[a+325|0]=y>>>8,m[a+326|0]=y>>>16,m[a+327|0]=y>>>24,y=F[a+372|0]|F[a+373|0]<<8|(F[a+374|0]<<16|F[a+375|0]<<24),m[a+356|0]=y,m[a+357|0]=y>>>8,m[a+358|0]=y>>>16,m[a+359|0]=y>>>24,y=F[a+404|0]|F[a+405|0]<<8|(F[a+406|0]<<16|F[a+407|0]<<24),m[a+388|0]=y,m[a+389|0]=y>>>8,m[a+390|0]=y>>>16,m[a+391|0]=y>>>24,y=F[a+436|0]|F[a+437|0]<<8|(F[a+438|0]<<16|F[a+439|0]<<24),m[a+420|0]=y,m[a+421|0]=y>>>8,m[a+422|0]=y>>>16,m[a+423|0]=y>>>24,y=F[a+468|0]|F[a+469|0]<<8|(F[a+470|0]<<16|F[a+471|0]<<24),m[a+452|0]=y,m[a+453|0]=y>>>8,m[a+454|0]=y>>>16,m[a+455|0]=y>>>24,y=F[a+500|0]|F[a+501|0]<<8|(F[a+502|0]<<16|F[a+503|0]<<24),m[a+484|0]=y,m[a+485|0]=y>>>8,m[a+486|0]=y>>>16,m[a+487|0]=y>>>24,y=F[a+532|0]|F[a+533|0]<<8|(F[a+534|0]<<16|F[a+535|0]<<24),m[a+516|0]=y,m[a+517|0]=y>>>8,m[a+518|0]=y>>>16,m[a+519|0]=y>>>24,y=F[a+556|0]|F[a+557|0]<<8|(F[a+558|0]<<16|F[a+559|0]<<24),m[a+548|0]=y,m[a+549|0]=y>>>8,m[a+550|0]=y>>>16,m[a+551|0]=y>>>24,y=F[a+572|0]|F[a+573|0]<<8|(F[a+574|0]<<16|F[a+575|0]<<24),m[a+564|0]=y,m[a+565|0]=y>>>8,m[a+566|0]=y>>>16,m[a+567|0]=y>>>24,y=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),m[a+580|0]=y,m[a+581|0]=y>>>8,m[a+582|0]=y>>>16,m[a+583|0]=y>>>24,y=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),m[a+596|0]=y,m[a+597|0]=y>>>8,m[a+598|0]=y>>>16,m[a+599|0]=y>>>24,y=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),m[a+612|0]=y,m[a+613|0]=y>>>8,m[a+614|0]=y>>>16,m[a+615|0]=y>>>24,y=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),m[a+628|0]=y,m[a+629|0]=y>>>8,m[a+630|0]=y>>>16,m[a+631|0]=y>>>24,y=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),m[a+644|0]=y,m[a+645|0]=y>>>8,m[a+646|0]=y>>>16,m[a+647|0]=y>>>24,y=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),m[a+660|0]=y,m[a+661|0]=y>>>8,m[a+662|0]=y>>>16,m[a+663|0]=y>>>24,y=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),m[a+676|0]=y,m[a+677|0]=y>>>8,m[a+678|0]=y>>>16,m[a+679|0]=y>>>24,y=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),m[a+692|0]=y,m[a+693|0]=y>>>8,m[a+694|0]=y>>>16,m[a+695|0]=y>>>24,y=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),m[a+708|0]=y,m[a+709|0]=y>>>8,m[a+710|0]=y>>>16,m[a+711|0]=y>>>24,y=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),m[a+724|0]=y,m[a+725|0]=y>>>8,m[a+726|0]=y>>>16,m[a+727|0]=y>>>24,y=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),m[a+740|0]=y,m[a+741|0]=y>>>8,m[a+742|0]=y>>>16,m[a+743|0]=y>>>24,y=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),m[a+756|0]=y,m[a+757|0]=y>>>8,m[a+758|0]=y>>>16,m[a+759|0]=y>>>24,y=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),m[a+772|0]=y,m[a+773|0]=y>>>8,m[a+774|0]=y>>>16,m[a+775|0]=y>>>24,y=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),m[a+788|0]=y,m[a+789|0]=y>>>8,m[a+790|0]=y>>>16,m[a+791|0]=y>>>24,y=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),m[a+804|0]=y,m[a+805|0]=y>>>8,m[a+806|0]=y>>>16,m[a+807|0]=y>>>24,y=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),m[a+820|0]=y,m[a+821|0]=y>>>8,m[a+822|0]=y>>>16,m[a+823|0]=y>>>24),y=h[r+2252>>2]+(te<<5)|0,E=L+re(te,800)|0,R=h[E+788>>2];e:{t:{i:{n:{if(!Ki){if(G=F[y+4|0]|F[y+5|0]<<8|(F[y+6|0]<<16|F[y+7|0]<<24),S=wi,H=F[y|0]|F[y+1|0]<<8|(F[y+2|0]<<16|F[y+3|0]<<24),m[S|0]=H,m[S+1|0]=H>>>8,m[S+2|0]=H>>>16,m[S+3|0]=H>>>24,m[S+4|0]=G,m[S+5|0]=G>>>8,m[S+6|0]=G>>>16,m[S+7|0]=G>>>24,G=F[y+12|0]|F[y+13|0]<<8|(F[y+14|0]<<16|F[y+15|0]<<24),H=F[y+8|0]|F[y+9|0]<<8|(F[y+10|0]<<16|F[y+11|0]<<24),m[S+8|0]=H,m[S+9|0]=H>>>8,m[S+10|0]=H>>>16,m[S+11|0]=H>>>24,m[S+12|0]=G,m[S+13|0]=G>>>8,m[S+14|0]=G>>>16,m[S+15|0]=G>>>24,S=F[y+20|0]|F[y+21|0]<<8|(F[y+22|0]<<16|F[y+23|0]<<24),G=F[y+16|0]|F[y+17|0]<<8|(F[y+18|0]<<16|F[y+19|0]<<24),m[a+552|0]=G,m[a+553|0]=G>>>8,m[a+554|0]=G>>>16,m[a+555|0]=G>>>24,m[a+556|0]=S,m[a+557|0]=S>>>8,m[a+558|0]=S>>>16,m[a+559|0]=S>>>24,S=F[y+28|0]|F[y+29|0]<<8|(F[y+30|0]<<16|F[y+31|0]<<24),L=F[y+24|0]|F[y+25|0]<<8|(F[y+26|0]<<16|F[y+27|0]<<24),m[a+568|0]=L,m[a+569|0]=L>>>8,m[a+570|0]=L>>>16,m[a+571|0]=L>>>24,m[a+572|0]=S,m[a+573|0]=S>>>8,m[a+574|0]=S>>>16,m[a+575|0]=S>>>24,F[E+768|0])break n;break t}if(!F[E+768|0])break t;L=h[yt>>2];break i}if((te|0)>=(h[r+288>>2]+-1|0)){L=F[y+15|0],h[yt>>2]=re(L,16843009),L=L|L<<8,L=L<<16|L;break i}L=F[y+32|0]|F[y+33|0]<<8|(F[y+34|0]<<16|F[y+35|0]<<24),h[yt>>2]=L}for(h[a+280>>2]=L,h[a+408>>2]=L,h[a+152>>2]=L,L=0;;){S=dn[(L<<1)+4880>>1]+ke|0,dt[h[(F[(E+L|0)+769|0]<<2)+10736>>2]](S),G=E+(L<<5)|0;i:{n:switch((R>>>30|0)+-1|0){case 2:dt[h[2703]](G,S,0);break i;case 1:dt[h[2704]](G,S);break i;case 0:break n;default:break i}dt[h[2706]](G,S)}if(R=R<<2,L=L+1|0,(L|0)==16)break}H=te?Rt:Lt;break e}if(L=F[E+769|0],H=te?Rt:Lt,dt[h[((L||H)<<2)+10704>>2]](ke),L=0,!R)break e;for(;;){S=E+(L<<5)|0,G=dn[(L<<1)+4880>>1]+ke|0;t:{i:switch((R>>>30|0)+-1|0){case 2:dt[h[2703]](S,G,0);break t;case 1:dt[h[2704]](S,G);break t;case 0:break i;default:break t}dt[h[2706]](S,G)}if(R=R<<2,L=L+1|0,(L|0)==16)break}}L=h[E+792>>2],S=F[E+785|0],S=((S||H)<<2)+10784|0,dt[h[S>>2]](Ye),dt[h[S>>2]](ze);e:{if(!(L&255))break e;if(S=E+512|0,L&170){dt[h[2705]](S,Ye);break e}dt[h[2707]](S,Ye)}e:{if(!(L&65280))break e;if(S=E+640|0,L&43520){dt[h[2705]](S,ze);break e}dt[h[2707]](S,ze)}for((he|0)<(h[r+292>>2]+-1|0)&&(L=Fi,S=F[L+4|0]|F[L+5|0]<<8|(F[L+6|0]<<16|F[L+7|0]<<24),E=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),m[y|0]=E,m[y+1|0]=E>>>8,m[y+2|0]=E>>>16,m[y+3|0]=E>>>24,m[y+4|0]=S,m[y+5|0]=S>>>8,m[y+6|0]=S>>>16,m[y+7|0]=S>>>24,S=F[L+12|0]|F[L+13|0]<<8|(F[L+14|0]<<16|F[L+15|0]<<24),L=F[L+8|0]|F[L+9|0]<<8|(F[L+10|0]<<16|F[L+11|0]<<24),m[y+8|0]=L,m[y+9|0]=L>>>8,m[y+10|0]=L>>>16,m[y+11|0]=L>>>24,m[y+12|0]=S,m[y+13|0]=S>>>8,m[y+14|0]=S>>>16,m[y+15|0]=S>>>24,L=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),S=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),m[y+16|0]=S,m[y+17|0]=S>>>8,m[y+18|0]=S>>>16,m[y+19|0]=S>>>24,m[y+20|0]=L,m[y+21|0]=L>>>8,m[y+22|0]=L>>>16,m[y+23|0]=L>>>24,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),S=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),m[y+24|0]=S,m[y+25|0]=S>>>8,m[y+26|0]=S>>>16,m[y+27|0]=S>>>24,m[y+28|0]=L,m[y+29|0]=L>>>8,m[y+30|0]=L>>>16,m[y+31|0]=L>>>24),on=h[r+2284>>2],G=h[r+2272>>2],H=h[r+2276>>2],y=ke,E=F[y+4|0]|F[y+5|0]<<8|(F[y+6|0]<<16|F[y+7|0]<<24),S=(h[r+2268>>2]+(te<<4)|0)+re(h[r+2280>>2],oi)|0,R=F[y|0]|F[y+1|0]<<8|(F[y+2|0]<<16|F[y+3|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[y+12|0]|F[y+13|0]<<8|(F[y+14|0]<<16|F[y+15|0]<<24),y=F[y+8|0]|F[y+9|0]<<8|(F[y+10|0]<<16|F[y+11|0]<<24),m[S+8|0]=y,m[S+9|0]=y>>>8,m[S+10|0]=y>>>16,m[S+11|0]=y>>>24,m[S+12|0]=E,m[S+13|0]=E>>>8,m[S+14|0]=E>>>16,m[S+15|0]=E>>>24,y=te<<3,vn=y+H|0,ir=y+G|0,L=1;E=(L<<5)+ke|0,G=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),y=S+re(h[r+2280>>2],L)|0,H=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),m[y|0]=H,m[y+1|0]=H>>>8,m[y+2|0]=H>>>16,m[y+3|0]=H>>>24,m[y+4|0]=G,m[y+5|0]=G>>>8,m[y+6|0]=G>>>16,m[y+7|0]=G>>>24,R=F[E+12|0]|F[E+13|0]<<8|(F[E+14|0]<<16|F[E+15|0]<<24),E=F[E+8|0]|F[E+9|0]<<8|(F[E+10|0]<<16|F[E+11|0]<<24),m[y+8|0]=E,m[y+9|0]=E>>>8,m[y+10|0]=E>>>16,m[y+11|0]=E>>>24,m[y+12|0]=R,m[y+13|0]=R>>>8,m[y+14|0]=R>>>16,m[y+15|0]=R>>>24,L=L+1|0,(L|0)!=16;);if(S=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),R=re(Jt,on),y=R+ir|0,E=F[a+584|0]|F[a+585|0]<<8|(F[a+586|0]<<16|F[a+587|0]<<24),m[y|0]=E,m[y+1|0]=E>>>8,m[y+2|0]=E>>>16,m[y+3|0]=E>>>24,m[y+4|0]=S,m[y+5|0]=S>>>8,m[y+6|0]=S>>>16,m[y+7|0]=S>>>24,L=R+vn|0,S=L,E=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),R=F[a+600|0]|F[a+601|0]<<8|(F[a+602|0]<<16|F[a+603|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),S=y+h[r+2284>>2]|0,R=F[a+616|0]|F[a+617|0]<<8|(F[a+618|0]<<16|F[a+619|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),S=L+h[r+2284>>2]|0,R=F[a+632|0]|F[a+633|0]<<8|(F[a+634|0]<<16|F[a+635|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),S=y+(h[r+2284>>2]<<1)|0,R=F[a+648|0]|F[a+649|0]<<8|(F[a+650|0]<<16|F[a+651|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),S=L+(h[r+2284>>2]<<1)|0,R=F[a+664|0]|F[a+665|0]<<8|(F[a+666|0]<<16|F[a+667|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),S=y+re(h[r+2284>>2],3)|0,R=F[a+680|0]|F[a+681|0]<<8|(F[a+682|0]<<16|F[a+683|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),S=L+re(h[r+2284>>2],3)|0,R=F[a+696|0]|F[a+697|0]<<8|(F[a+698|0]<<16|F[a+699|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),S=y+(h[r+2284>>2]<<2)|0,R=F[a+712|0]|F[a+713|0]<<8|(F[a+714|0]<<16|F[a+715|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),S=L+(h[r+2284>>2]<<2)|0,R=F[a+728|0]|F[a+729|0]<<8|(F[a+730|0]<<16|F[a+731|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),S=y+re(h[r+2284>>2],5)|0,R=F[a+744|0]|F[a+745|0]<<8|(F[a+746|0]<<16|F[a+747|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),S=L+re(h[r+2284>>2],5)|0,R=F[a+760|0]|F[a+761|0]<<8|(F[a+762|0]<<16|F[a+763|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),S=y+re(h[r+2284>>2],6)|0,R=F[a+776|0]|F[a+777|0]<<8|(F[a+778|0]<<16|F[a+779|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,E=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),S=L+re(h[r+2284>>2],6)|0,R=F[a+792|0]|F[a+793|0]<<8|(F[a+794|0]<<16|F[a+795|0]<<24),m[S|0]=R,m[S+1|0]=R>>>8,m[S+2|0]=R>>>16,m[S+3|0]=R>>>24,m[S+4|0]=E,m[S+5|0]=E>>>8,m[S+6|0]=E>>>16,m[S+7|0]=E>>>24,S=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),y=y+re(h[r+2284>>2],7)|0,E=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),m[y|0]=E,m[y+1|0]=E>>>8,m[y+2|0]=E>>>16,m[y+3|0]=E>>>24,m[y+4|0]=S,m[y+5|0]=S>>>8,m[y+6|0]=S>>>16,m[y+7|0]=S>>>24,y=L+re(h[r+2284>>2],7)|0,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),S=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),m[y|0]=S,m[y+1|0]=S>>>8,m[y+2|0]=S>>>16,m[y+3|0]=S>>>24,m[y+4|0]=L,m[y+5|0]=L>>>8,m[y+6|0]=L>>>16,m[y+7|0]=L>>>24,te=te+1|0,!((te|0)<h[r+288>>2]))break}}function Wa(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;ke=Fn-16|0,Fn=ke;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{f:{c:{if(r>>>0<=244){if(L=h[2884],R=r>>>0<11?16:r+11&-8,s=R>>>3|0,r=L>>>s|0,r&3){y=s+((r^-1)&1)|0,s=y<<3,S=h[s+11584>>2],r=S+8|0,a=h[S+8>>2],s=s+11576|0;h:{if((a|0)==(s|0)){ze=11536,Ye=Aa(-2,y)&L,h[ze>>2]=Ye;break h}h[a+12>>2]=s,h[s+8>>2]=a}s=y<<3,h[S+4>>2]=s|3,s=s+S|0,h[s+4>>2]=h[s+4>>2]|1;break e}if(he=h[2886],R>>>0<=he>>>0)break c;if(r){a=r<<s,r=2<<s,r=a&(0-r|r),s=(0-r&r)+-1|0,r=s>>>12&16,a=r,s=s>>>r|0,r=s>>>5&8,a=a|r,s=s>>>r|0,r=s>>>2&4,a=a|r,s=s>>>r|0,r=s>>>1&2,a=a|r,s=s>>>r|0,r=s>>>1&1,a=(a|r)+(s>>>r|0)|0,r=a<<3,E=h[r+11584>>2],s=h[E+8>>2],r=r+11576|0;h:{if((s|0)==(r|0)){L=Aa(-2,a)&L,h[2884]=L;break h}h[s+12>>2]=r,h[r+8>>2]=s}if(r=E+8|0,h[E+4>>2]=R|3,y=E+R|0,s=a<<3,S=s-R|0,h[y+4>>2]=S|1,h[s+E>>2]=S,he){s=he>>>3|0,a=(s<<3)+11576|0,R=h[2889],s=1<<s;h:{if(!(s&L)){h[2884]=s|L,s=a;break h}s=h[a+8>>2]}h[a+8>>2]=R,h[s+12>>2]=R,h[R+12>>2]=a,h[R+8>>2]=s}h[2889]=y,h[2886]=S;break e}if(G=h[2885],!G)break c;for(s=(G&0-G)+-1|0,r=s>>>12&16,a=r,s=s>>>r|0,r=s>>>5&8,a=a|r,s=s>>>r|0,r=s>>>2&4,a=a|r,s=s>>>r|0,r=s>>>1&2,a=a|r,s=s>>>r|0,r=s>>>1&1,s=h[((a|r)+(s>>>r|0)<<2)+11840>>2],S=(h[s+4>>2]&-8)-R|0,a=s;;){h:{if(r=h[a+16>>2],!r&&(r=h[a+20>>2],!r))break h;a=(h[r+4>>2]&-8)-R|0,y=a>>>0<S>>>0,S=y?a:S,s=y?r:s,a=r;continue}break}if(H=s+R|0,H>>>0<=s>>>0)break f;if(te=h[s+24>>2],y=h[s+12>>2],(y|0)!=(s|0)){r=h[s+8>>2],h[r+12>>2]=y,h[y+8>>2]=r;break t}if(a=s+20|0,r=h[a>>2],!r){if(r=h[s+16>>2],!r)break a;a=s+16|0}for(;E=a,y=r,a=r+20|0,r=h[a>>2],!(!r&&(a=y+16|0,r=h[y+16>>2],!r)););h[E>>2]=0;break t}if(R=-1,r>>>0>4294967231||(r=r+11|0,R=r&-8,G=h[2885],!G))break c;r=r>>>8|0,E=0;h:{if(!r||(E=31,R>>>0>16777215))break h;s=r+1048320>>>16&8,r=r<<s,S=r+520192>>>16&4,r=r<<S,a=r+245760>>>16&2,r=(r<<a>>>15|0)-(a|(s|S))|0,E=(r<<1|R>>>r+21&1)+28|0}S=0-R|0,a=h[(E<<2)+11840>>2];h:{d:{p:{if(!a){r=0;break p}for(r=0,s=R<<((E|0)==31?0:25-(E>>>1|0)|0);;){m:{if(L=(h[a+4>>2]&-8)-R|0,L>>>0>=S>>>0||(y=a,S=L,S))break m;S=0,r=a;break d}if(L=h[a+20>>2],a=h[((s>>>29&4)+a|0)+16>>2],r=L?(L|0)==(a|0)?r:L:r,s=s<<1,!a)break}}if(!(r|y)){if(r=2<<E,r=(0-r|r)&G,!r)break c;s=(r&0-r)+-1|0,r=s>>>12&16,a=r,s=s>>>r|0,r=s>>>5&8,a=a|r,s=s>>>r|0,r=s>>>2&4,a=a|r,s=s>>>r|0,r=s>>>1&2,a=a|r,s=s>>>r|0,r=s>>>1&1,r=h[((a|r)+(s>>>r|0)<<2)+11840>>2]}if(!r)break h}for(;s=(h[r+4>>2]&-8)-R|0,a=s>>>0<S>>>0,S=a?s:S,y=a?r:y,s=h[r+16>>2],s?r=s:r=h[r+20>>2],!!r;);}if(!y|S>>>0>=h[2886]-R>>>0)break c;if(E=y+R|0,E>>>0<=y>>>0)break f;if(H=h[y+24>>2],s=h[y+12>>2],(y|0)!=(s|0)){r=h[y+8>>2],h[r+12>>2]=s,h[s+8>>2]=r;break i}if(a=y+20|0,r=h[a>>2],!r){if(r=h[y+16>>2],!r)break s;a=y+16|0}for(;L=a,s=r,a=r+20|0,r=h[a>>2],!(!r&&(a=s+16|0,r=h[s+16>>2],!r)););h[L>>2]=0;break i}if(a=h[2886],a>>>0>=R>>>0){y=h[2889],s=a-R|0;c:{if(s>>>0>=16){h[2886]=s,r=y+R|0,h[2889]=r,h[r+4>>2]=s|1,h[a+y>>2]=s,h[y+4>>2]=R|3;break c}h[2889]=0,h[2886]=0,h[y+4>>2]=a|3,r=a+y|0,h[r+4>>2]=h[r+4>>2]|1}r=y+8|0;break e}if(G=h[2887],G>>>0>R>>>0){s=G-R|0,h[2887]=s,a=h[2890],r=a+R|0,h[2890]=r,h[r+4>>2]=s|1,h[a+4>>2]=R|3,r=a+8|0;break e}if(r=0,H=R+47|0,s=H,h[3002]?a=h[3004]:(h[3005]=-1,h[3006]=-1,h[3003]=4096,h[3004]=4096,h[3002]=ke+12&-16^1431655768,h[3007]=0,h[2995]=0,a=4096),E=s+a|0,L=0-a|0,a=E&L,a>>>0<=R>>>0||(S=h[2994],S&&(y=h[2992],s=y+a|0,s>>>0<=y>>>0|s>>>0>S>>>0)))break e;if(F[11980]&4)break l;c:{h:{if(y=h[2890],y)for(r=11984;;){if(s=h[r>>2],s+h[r+4>>2]>>>0>y>>>0&&s>>>0<=y>>>0)break h;if(r=h[r+8>>2],!r)break}if(s=Qa(0),(s|0)==-1||(L=a,y=h[3003],r=y+-1|0,r&s&&(L=(a-s|0)+(r+s&0-y)|0),L>>>0<=R>>>0|L>>>0>2147483646)||(S=h[2994],S&&(y=h[2992],r=y+L|0,r>>>0<=y>>>0|r>>>0>S>>>0)))break r;if(r=Qa(L),(s|0)!=(r|0))break c;break o}if(L=L&E-G,L>>>0>2147483646)break r;if(s=Qa(L),(s|0)==(h[r>>2]+h[r+4>>2]|0))break u;r=s}if(!((r|0)==-1|R+48>>>0<=L>>>0)){if(s=h[3004],s=s+(H-L|0)&0-s,s>>>0>2147483646){s=r;break o}if((Qa(s)|0)!=-1){L=s+L|0,s=r;break o}Qa(0-L|0);break r}if(s=r,(r|0)!=-1)break o;break r}ga()}y=0;break t}s=0;break i}if((s|0)!=-1)break o}h[2995]=h[2995]|4}if(a>>>0>2147483646||(s=Qa(a),r=Qa(0),s>>>0>=r>>>0|(s|0)==-1|(r|0)==-1)||(L=r-s|0,L>>>0<=R+40>>>0))break n}r=h[2992]+L|0,h[2992]=r,r>>>0>Zn[2993]&&(h[2993]=r);o:{l:{r:{if(S=h[2890],S){for(r=11984;;){if(y=h[r>>2],a=h[r+4>>2],(y+a|0)==(s|0))break r;if(r=h[r+8>>2],!r)break}break l}for(r=h[2888],s>>>0>=r>>>0&&r||(h[2888]=s),r=0,h[2997]=L,h[2996]=s,h[2892]=-1,h[2893]=h[3002],h[2999]=0;y=r<<3,a=y+11576|0,h[y+11584>>2]=a,h[y+11588>>2]=a,r=r+1|0,(r|0)!=32;);y=L+-40|0,r=s+8&7?-8-s&7:0,a=y-r|0,h[2887]=a,r=r+s|0,h[2890]=r,h[r+4>>2]=a|1,h[(s+y|0)+4>>2]=40,h[2891]=h[3006];break o}if(F[r+12|0]&8|s>>>0<=S>>>0|y>>>0>S>>>0)break l;h[r+4>>2]=a+L,r=S+8&7?-8-S&7:0,a=r+S|0,h[2890]=a,s=h[2887]+L|0,r=s-r|0,h[2887]=r,h[a+4>>2]=r|1,h[(s+S|0)+4>>2]=40,h[2891]=h[3006];break o}y=h[2888],s>>>0<y>>>0&&(h[2888]=s,y=0),a=s+L|0,r=11984;l:{r:{u:{s:{a:{f:{for(;;){if((a|0)!=h[r>>2]){if(r=h[r+8>>2],r)continue;break f}break}if(!(F[r+12|0]&8))break a}for(r=11984;;){if(a=h[r>>2],a>>>0<=S>>>0&&(E=a+h[r+4>>2]|0,E>>>0>S>>>0))break s;r=h[r+8>>2]}}if(h[r>>2]=s,h[r+4>>2]=h[r+4>>2]+L,G=(s+8&7?-8-s&7:0)+s|0,h[G+4>>2]=R|3,s=a+(a+8&7?-8-a&7:0)|0,r=(s-G|0)-R|0,E=R+G|0,(s|0)==(S|0)){h[2890]=E,r=h[2887]+r|0,h[2887]=r,h[E+4>>2]=r|1;break r}if(h[2889]==(s|0)){h[2889]=E,r=h[2886]+r|0,h[2886]=r,h[E+4>>2]=r|1,h[r+E>>2]=r;break r}if(a=h[s+4>>2],(a&3)==1){H=a&-8;a:{if(a>>>0<=255){if(S=h[s+8>>2],a=a>>>3|0,y=h[s+12>>2],(y|0)==(S|0)){ze=11536,Ye=h[2884]&Aa(-2,a),h[ze>>2]=Ye;break a}h[S+12>>2]=y,h[y+8>>2]=S;break a}te=h[s+24>>2],L=h[s+12>>2];f:{if((L|0)!=(s|0)){a=h[s+8>>2],h[a+12>>2]=L,h[L+8>>2]=a;break f}c:{if(S=s+20|0,R=h[S>>2],R||(S=s+16|0,R=h[S>>2],R))break c;L=0;break f}for(;a=S,L=R,S=L+20|0,R=h[S>>2],!(!R&&(S=L+16|0,R=h[L+16>>2],!R)););h[a>>2]=0}if(!te)break a;y=h[s+28>>2],a=(y<<2)+11840|0;f:{if(h[a>>2]==(s|0)){if(h[a>>2]=L,L)break f;ze=11540,Ye=h[2885]&Aa(-2,y),h[ze>>2]=Ye;break a}if(h[te+(h[te+16>>2]==(s|0)?16:20)>>2]=L,!L)break a}if(h[L+24>>2]=te,a=h[s+16>>2],a&&(h[L+16>>2]=a,h[a+24>>2]=L),a=h[s+20>>2],!a)break a;h[L+20>>2]=a,h[a+24>>2]=L}s=s+H|0,r=r+H|0}if(h[s+4>>2]=h[s+4>>2]&-2,h[E+4>>2]=r|1,h[r+E>>2]=r,r>>>0<=255){r=r>>>3|0,s=(r<<3)+11576|0,a=h[2884],r=1<<r;a:{if(!(a&r)){h[2884]=r|a,r=s;break a}r=h[s+8>>2]}h[s+8>>2]=E,h[r+12>>2]=E,h[E+12>>2]=s,h[E+8>>2]=r;break r}s=E,y=r>>>8|0,a=0;a:{if(!y||(a=31,r>>>0>16777215))break a;a=y,y=y+1048320>>>16&8,a=a<<y,L=a+520192>>>16&4,a=a<<L,S=a+245760>>>16&2,a=(a<<S>>>15|0)-(S|(y|L))|0,a=(a<<1|r>>>a+21&1)+28|0}h[s+28>>2]=a,h[E+16>>2]=0,h[E+20>>2]=0,L=(a<<2)+11840|0,y=h[2885],s=1<<a;a:{if(!(y&s)){h[2885]=s|y,h[L>>2]=E,h[E+24>>2]=L;break a}for(S=r<<((a|0)==31?0:25-(a>>>1|0)|0),s=h[L>>2];;){if(a=s,(h[s+4>>2]&-8)==(r|0))break u;if(s=S>>>29|0,S=S<<1,y=(a+(s&4)|0)+16|0,s=h[y>>2],!s)break}h[y>>2]=E,h[E+24>>2]=a}h[E+12>>2]=E,h[E+8>>2]=E;break r}for(y=L+-40|0,r=s+8&7?-8-s&7:0,a=y-r|0,h[2887]=a,r=r+s|0,h[2890]=r,h[r+4>>2]=a|1,h[(s+y|0)+4>>2]=40,h[2891]=h[3006],r=(E+(E+-39&7?39-E&7:0)|0)+-47|0,a=r>>>0<S+16>>>0?S:r,h[a+4>>2]=27,r=h[2999],h[a+16>>2]=h[2998],h[a+20>>2]=r,r=h[2997],h[a+8>>2]=h[2996],h[a+12>>2]=r,h[2998]=a+8,h[2997]=L,h[2996]=s,h[2999]=0,r=a+24|0;h[r+4>>2]=7,s=r+8|0,r=r+4|0,E>>>0>s>>>0;);if((a|0)==(S|0))break o;if(h[a+4>>2]=h[a+4>>2]&-2,E=a-S|0,h[S+4>>2]=E|1,h[a>>2]=E,E>>>0<=255){r=E>>>3|0,s=(r<<3)+11576|0,a=h[2884],r=1<<r;s:{if(!(a&r)){h[2884]=r|a,r=s;break s}r=h[s+8>>2]}h[s+8>>2]=S,h[r+12>>2]=S,h[S+12>>2]=s,h[S+8>>2]=r;break o}h[S+16>>2]=0,h[S+20>>2]=0,r=S,a=E>>>8|0,s=0;s:{if(!a||(s=31,E>>>0>16777215))break s;s=a,a=a+1048320>>>16&8,s=s<<a,L=s+520192>>>16&4,s=s<<L,y=s+245760>>>16&2,s=(s<<y>>>15|0)-(y|(a|L))|0,s=(s<<1|E>>>s+21&1)+28|0}h[r+28>>2]=s,y=(s<<2)+11840|0,a=h[2885],r=1<<s;s:{if(!(a&r)){h[2885]=r|a,h[y>>2]=S,h[S+24>>2]=y;break s}for(r=E<<((s|0)==31?0:25-(s>>>1|0)|0),s=h[y>>2];;){if(a=s,(E|0)==(h[s+4>>2]&-8))break l;if(s=r>>>29|0,r=r<<1,y=(a+(s&4)|0)+16|0,s=h[y>>2],!s)break}h[y>>2]=S,h[S+24>>2]=a}h[S+12>>2]=S,h[S+8>>2]=S;break o}r=h[a+8>>2],h[r+12>>2]=E,h[a+8>>2]=E,h[E+24>>2]=0,h[E+12>>2]=a,h[E+8>>2]=r}r=G+8|0;break e}r=h[a+8>>2],h[r+12>>2]=S,h[a+8>>2]=S,h[S+24>>2]=0,h[S+12>>2]=a,h[S+8>>2]=r}if(r=h[2887],r>>>0<=R>>>0)break n;s=r-R|0,h[2887]=s,a=h[2890],r=a+R|0,h[2890]=r,h[r+4>>2]=s|1,h[a+4>>2]=R|3,r=a+8|0;break e}h[2865]=48,r=0;break e}i:{if(!H)break i;a=h[y+28>>2],r=(a<<2)+11840|0;n:{if(h[r>>2]==(y|0)){if(h[r>>2]=s,s)break n;G=Aa(-2,a)&G,h[2885]=G;break i}if(h[H+(h[H+16>>2]==(y|0)?16:20)>>2]=s,!s)break i}if(h[s+24>>2]=H,r=h[y+16>>2],r&&(h[s+16>>2]=r,h[r+24>>2]=s),r=h[y+20>>2],!r)break i;h[s+20>>2]=r,h[r+24>>2]=s}i:{if(S>>>0<=15){r=S+R|0,h[y+4>>2]=r|3,r=r+y|0,h[r+4>>2]=h[r+4>>2]|1;break i}if(h[y+4>>2]=R|3,h[E+4>>2]=S|1,h[S+E>>2]=S,S>>>0<=255){r=S>>>3|0,s=(r<<3)+11576|0,a=h[2884],r=1<<r;n:{if(!(a&r)){h[2884]=r|a,r=s;break n}r=h[s+8>>2]}h[s+8>>2]=E,h[r+12>>2]=E,h[E+12>>2]=s,h[E+8>>2]=r;break i}r=E,a=S>>>8|0,s=0;n:{if(!a||(s=31,S>>>0>16777215))break n;s=a,a=a+1048320>>>16&8,s=s<<a,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(a|R))|0,s=(s<<1|S>>>s+21&1)+28|0}h[r+28>>2]=s,h[E+16>>2]=0,h[E+20>>2]=0,a=(s<<2)+11840|0;n:{r=1<<s;o:{if(!(r&G)){h[2885]=r|G,h[a>>2]=E,h[E+24>>2]=a;break o}for(r=S<<((s|0)==31?0:25-(s>>>1|0)|0),R=h[a>>2];;){if(s=R,(h[s+4>>2]&-8)==(S|0))break n;if(a=r>>>29|0,r=r<<1,a=(s+(a&4)|0)+16|0,R=h[a>>2],!R)break}h[a>>2]=E,h[E+24>>2]=s}h[E+12>>2]=E,h[E+8>>2]=E;break i}r=h[s+8>>2],h[r+12>>2]=E,h[s+8>>2]=E,h[E+24>>2]=0,h[E+12>>2]=s,h[E+8>>2]=r}r=y+8|0;break e}t:{if(!te)break t;a=h[s+28>>2],r=(a<<2)+11840|0;i:{if(h[r>>2]==(s|0)){if(h[r>>2]=y,y)break i;ze=11540,Ye=Aa(-2,a)&G,h[ze>>2]=Ye;break t}if(h[(h[te+16>>2]==(s|0)?16:20)+te>>2]=y,!y)break t}if(h[y+24>>2]=te,r=h[s+16>>2],r&&(h[y+16>>2]=r,h[r+24>>2]=y),r=h[s+20>>2],!r)break t;h[y+20>>2]=r,h[r+24>>2]=y}t:{if(S>>>0<=15){r=S+R|0,h[s+4>>2]=r|3,r=r+s|0,h[r+4>>2]=h[r+4>>2]|1;break t}if(h[s+4>>2]=R|3,h[H+4>>2]=S|1,h[S+H>>2]=S,he){r=he>>>3|0,a=(r<<3)+11576|0,y=h[2889],r=1<<r;i:{if(!(r&L)){h[2884]=r|L,r=a;break i}r=h[a+8>>2]}h[a+8>>2]=y,h[r+12>>2]=y,h[y+12>>2]=a,h[y+8>>2]=r}h[2889]=H,h[2886]=S}r=s+8|0}return Fn=ke+16|0,r|0}function ya(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0;if(h[s+288>>2]>=1)for(Ki=s+2248|0;;){if(H=h[s+2244>>2],he=h[s+2304>>2],E=0,h[s+108>>2]){R=h[r+4>>2],S=F[s+904|0],y=h[r+8>>2];e:{if((y|0)>-1)break e;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,y=y+24|0,h[r+8>>2]=y,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Pr(r),y=h[r+8>>2]}L=r,te=y,E=h[r>>2],G=E>>>y|0,S=re(S,R)>>>8|0;e:{if(G>>>0>S>>>0){E=((S^-1)<<y)+E|0,h[r>>2]=E,R=R-S|0;break e}R=S+1|0}a=Mr(R)^24,y=te-a|0,h[L+8>>2]=y,L=(R<<a)+-1|0,h[r+4>>2]=L;e:{if(G>>>0<=S>>>0){R=F[s+905|0];t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){S=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=E;break t}Pr(r),E=h[r>>2],y=h[r+8>>2]}S=E>>>y|0,a=re(L,R)>>>8|0;t:{if(S>>>0>a>>>0){h[r>>2]=((a^-1)<<y)+E,L=L-a|0;break t}L=a+1|0}E=S>>>0>a>>>0,a=Mr(L)^24,y=y-a|0,a=L<<a;break e}R=F[s+906|0];t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){S=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=E;break t}Pr(r),E=h[r>>2],y=h[r+8>>2]}a=y,G=a,S=re(L,R)>>>8|0;t:{if(E>>>a>>>0>S>>>0){h[r>>2]=((S^-1)<<y)+E,E=3,L=L-S|0;break t}E=2,L=S+1|0}a=Mr(L)^24,y=G-a|0,a=L<<a}h[r+8>>2]=y,h[r+4>>2]=a+-1}he=he+re(ke,800)|0,m[he+798|0]=E;e:{if(!h[s+2236>>2]){y=h[r+8>>2],R=h[r+4>>2];break e}S=h[r+4>>2],E=F[s+2240|0],y=h[r+8>>2];t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,y=y+24|0,h[r+8>>2]=y,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Pr(r),y=h[r+8>>2]}L=r,te=y,R=h[r>>2],G=R>>>y|0,E=re(S,E)>>>8|0;t:{if(G>>>0>E>>>0){h[r>>2]=R+((E^-1)<<y),S=S-E|0;break t}S=E+1|0}a=Mr(S)^24,y=te-a|0,h[L+8>>2]=y,R=(S<<a)+-1|0,h[r+4>>2]=R,m[he+797|0]=G>>>0>E>>>0}e:{if((y|0)>-1)break e;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,y=y+24|0,h[r+8>>2]=y,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Pr(r),y=h[r+8>>2]}H=H+(ke<<2)|0,L=r,te=y,E=h[r>>2],S=re(R,145)>>>8|0,G=E>>>y>>>0<=S>>>0;e:{if(!G){E=((S^-1)<<y)+E|0,h[r>>2]=E,S=R-S|0;break e}S=S+1|0}a=Mr(S)^24,y=te-a|0,h[L+8>>2]=y,R=(S<<a)+-1|0,h[r+4>>2]=R,m[he+768|0]=G;e:{if(!G){t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=E;break t}Pr(r),E=h[r>>2],y=h[r+8>>2]}L=r,te=y,S=re(R,156)>>>8|0,G=E>>>y>>>0<=S>>>0;t:{if(!G){E=((S^-1)<<y)+E|0,h[r>>2]=E,S=R-S|0;break t}S=S+1|0}a=Mr(S)^24,y=te-a|0,h[L+8>>2]=y,L=(S<<a)+-1|0,h[r+4>>2]=L;t:{if(!G){i:{if((y|0)>-1)break i;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){S=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=E;break i}Pr(r),E=h[r>>2],y=h[r+8>>2]}a=y,R=a,S=L>>>1&16777215;i:{if(E>>>a>>>0>S>>>0){h[r>>2]=((S^-1)<<y)+E,E=1,L=L-S|0;break i}E=3,L=S+1|0}a=Mr(L)^24,y=R-a|0,a=L<<a;break t}i:{if((y|0)>-1)break i;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){S=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=E;break i}Pr(r),E=h[r>>2],y=h[r+8>>2]}a=y,R=a,S=re(L,163)>>>8|0;i:{if(E>>>a>>>0>S>>>0){h[r>>2]=((S^-1)<<y)+E,E=2,L=L-S|0;break i}E=0,L=S+1|0}a=Mr(L)^24,y=R-a|0,a=L<<a}h[r+8>>2]=y,h[r+4>>2]=a+-1,m[he+769|0]=E,a=re(E,16843009),m[H|0]=a,m[H+1|0]=a>>>8,m[H+2|0]=a>>>16,m[H+3|0]=a>>>24,y=Ki,m[y|0]=a,m[y+1|0]=a>>>8,m[y+2|0]=a>>>16,m[y+3|0]=a>>>24;break e}for(L=he+769|0,ze=0;;){for(Rt=(s+ze|0)+2248|0,y=F[Rt|0],Ye=0;;){Jt=re(y,9),oi=H+Ye|0,Fi=re(F[oi|0],90),S=F[Jt+(Fi+3504|0)|0],G=h[r+4>>2],y=h[r+8>>2];t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){E=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,y=y+24|0,h[r+8>>2]=y,h[r>>2]=h[r>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}Pr(r),y=h[r+8>>2]}te=r,Lt=y,R=h[r>>2],yt=R>>>y|0,S=re(S,G)>>>8|0;t:{if(yt>>>0>S>>>0){R=((S^-1)<<y)+R|0,h[r>>2]=R,G=G-S|0;break t}G=S+1|0}if(a=Mr(G)^24,y=Lt-a|0,h[te+8>>2]=y,a=(G<<a)+-1|0,h[r+4>>2]=a,S=yt>>>0>S>>>0,E=m[S+4416|0],41706>>>S&1)for(;;){yt=F[((Fi+3504|0)+Jt|0)+E|0];t:{if((y|0)>-1)break t;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){G=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=S+3,R=R<<24|(G>>>8&65280|(G<<8&16711680|G<<24))>>>8,h[r>>2]=R;break t}Pr(r),R=h[r>>2],y=h[r+8>>2]}S=E<<1,te=r,Lt=y,wi=R>>>y|0,G=re(a,yt)>>>8|0;t:{if(wi>>>0>G>>>0){R=((G^-1)<<y)+R|0,h[r>>2]=R,a=a-G|0;break t}a=G+1|0}if(E=Mr(a)^24,y=Lt-E|0,h[te+8>>2]=y,a=(a<<E)+-1|0,h[r+4>>2]=a,S=S|wi>>>0>G>>>0,E=m[S+4416|0],!(41706>>>S&1))break}if(y=0-E|0,m[oi|0]=y,Ye=Ye+1|0,(Ye|0)==4)break}if(a=L,L=F[H|0]|F[H+1|0]<<8|(F[H+2|0]<<16|F[H+3|0]<<24),m[a|0]=L,m[a+1|0]=L>>>8,m[a+2|0]=L>>>16,m[a+3|0]=L>>>24,m[Rt|0]=y,L=a+4|0,ze=ze+1|0,(ze|0)==4)break}}R=h[r+4>>2],y=h[r+8>>2];e:{if((y|0)>-1)break e;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,y=y+24|0,h[r+8>>2]=y,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Pr(r),y=h[r+8>>2]}L=r,G=y,E=h[r>>2],S=re(R,142)>>>8|0,H=E>>>y>>>0<=S>>>0;e:{if(!H){E=((S^-1)<<y)+E|0,h[r>>2]=E,S=R-S|0;break e}S=S+1|0}a=Mr(S)^24,y=G-a|0,h[L+8>>2]=y,R=(S<<a)+-1|0,h[r+4>>2]=R,a=0;e:{if(H)break e;t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=E;break t}Pr(r),E=h[r>>2],y=h[r+8>>2]}L=r,G=y,S=re(R,114)>>>8|0,H=E>>>y>>>0<=S>>>0;t:{if(!H){E=((S^-1)<<y)+E|0,h[r>>2]=E,S=R-S|0;break t}S=S+1|0}if(a=Mr(S)^24,y=G-a|0,h[L+8>>2]=y,S=(S<<a)+-1|0,h[r+4>>2]=S,a=2,H)break e;t:{if((y|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),y=y+24|0,h[r+8>>2]=y,h[r+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=E;break t}Pr(r),E=h[r>>2],y=h[r+8>>2]}a=re(S,183)>>>8|0;t:{if(E>>>y>>>0>a>>>0){h[r>>2]=((a^-1)<<y)+E,E=S-a|0,a=1;break t}E=a+1|0,a=3}S=y,y=Mr(E)^24,h[r+8>>2]=S-y,h[r+4>>2]=(E<<y)+-1}if(m[he+785|0]=a,ke=ke+1|0,!((ke|0)<h[s+288>>2]))break}return!h[s+36>>2]}function Xl(r,s,a,y,S,E){var L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0,_s=0,Sa=0,yl=0,Ju=0,Jh=0;ir=r+124|0,L=h[r+112>>2],Ye=(L|0)/(a|0)|0,ze=r+24|0,Er=(re(a,y)<<2)+s|0,y=(L<<2)+s|0;e:{t:{yt=re(a,S);i:{if((L|0)>=(yt|0))break i;for(ke=yt<<2,Rt=L-re(a,Ye)|0,_s=h[r+148>>2],yt=0,vn=h[r+120>>2],on=(vn|0)>0?ir:0,Sa=h[r+56>>2]?Ye:16777216,yl=vn+280|0,Ju=s+ke|0,he=h[r+168>>2],L=h[r+152>>2],L&&(yt=h[h[r+160>>2]+(re(h[r+156>>2],Ye>>L)+(Rt>>L)<<2)>>2]),Jt=he+re(yt,548)|0,Jh=r+136|0,wi=r- -64|0,yt=y;;){(Ye|0)>=(Sa|0)&&(L=h[ze+4>>2],h[wi>>2]=h[ze>>2],h[wi+4>>2]=L,L=h[ze+28>>2],h[wi+24>>2]=h[ze+24>>2],h[wi+28>>2]=L,L=h[ze+20>>2],h[wi+16>>2]=h[ze+16>>2],h[wi+20>>2]=L,L=h[ze+12>>2],h[wi+8>>2]=h[ze+8>>2],h[wi+12>>2]=L,h[r+96>>2]=y-s>>2,h[r+120>>2]>=1&&g0(ir,Jh),Sa=Ye+8|0);n:{o:{l:{if(!(Rt&_s)){L=h[r+168>>2],G=h[r+152>>2],he=0;r:{if(!G)break r;he=h[h[r+160>>2]+(re(h[r+156>>2],Ye>>G)+(Rt>>G)<<2)>>2]}Jt=L+re(he,548)|0}if(h[Jt+28>>2]){H=h[Jt+24>>2];break l}h[r+44>>2]>=32&&Ce(ze);r:{if(h[Jt+32>>2]){L=h[r+28>>2],H=h[r+44>>2],R=H&63,G=R&31,Lt=h[r+24>>2],ke=(((32<=(R&63)>>>0?L>>>G|0:((1<<G)-1&L)<<32-G|Lt>>>G)&63)<<3)+Jt|0,G=h[ke+36>>2],he=H+G|0,H=h[ke+40>>2];u:{if((G|0)<=255){h[r+44>>2]=he,h[y>>2]=H,H=0;break u}h[r+44>>2]=he+-256}if(h[r+48>>2]|(h[r+44>>2]>64?h[r+40>>2]==h[r+36>>2]:0))break i;if(H)break r;break o}if(ke=r,L=h[r+28>>2],H=h[r+44>>2],te=H&63,G=te&31,Lt=h[r+24>>2],R=h[Jt>>2]+(((32<=(te&63)>>>0?L>>>G|0:((1<<G)-1&L)<<32-G|Lt>>>G)&255)<<2)|0,G=F[R|0],G>>>0>=9&&(H=H+8|0,h[r+44>>2]=H,he=(dn[R+2>>1]<<2)+R|0,oi=H&63,R=oi&31,R=he+(((-1<<G+-8^-1)&(32<=(oi&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Lt>>>R))<<2)|0,G=F[R|0]),h[ke+44>>2]=(G&255)+H,h[r+48>>2])break i;H=dn[R+2>>1]}if(h[r+44>>2]>64&&h[r+40>>2]==h[r+36>>2])break i;if((H|0)<=255){if(h[Jt+20>>2]){H=h[Jt+24>>2]|H<<8;break l}if(ke=r,R=h[r+44>>2],oi=R&63,he=oi&31,te=h[Jt+4>>2]+(((32<=(oi&63)>>>0?L>>>he|0:((1<<he)-1&L)<<32-he|Lt>>>he)&255)<<2)|0,G=F[te|0],G>>>0>=9&&(R=R+8|0,h[r+44>>2]=R,he=(dn[te+2>>1]<<2)+te|0,Ki=R&63,te=Ki&31,te=he+(((-1<<G+-8^-1)&(32<=(Ki&63)>>>0?L>>>te|0:((1<<te)-1&L)<<32-te|Lt>>>te))<<2)|0,G=F[te|0]),R=(G&255)+R|0,h[ke+44>>2]=R,oi=dn[te+2>>1],(R|0)>=32&&(Ce(ze),Lt=h[r+24>>2],R=h[r+44>>2],L=h[r+28>>2]),Ki=R&63,he=Ki&31,te=h[Jt+8>>2]+(((32<=(Ki&63)>>>0?L>>>he|0:((1<<he)-1&L)<<32-he|Lt>>>he)&255)<<2)|0,G=F[te|0],G>>>0>=9&&(R=R+8|0,h[r+44>>2]=R,he=(dn[te+2>>1]<<2)+te|0,Fi=R&63,te=Fi&31,te=he+(((-1<<G+-8^-1)&(32<=Fi>>>0?L>>>te|0:((1<<te)-1&L)<<32-te|Lt>>>te))<<2)|0,G=F[te|0]),R=(G&255)+R|0,h[ke+44>>2]=R,Ki=dn[te+2>>1],he=r,Fi=R&63,ke=Fi&31,te=h[Jt+12>>2]+(((32<=Fi>>>0?L>>>ke|0:((1<<ke)-1&L)<<32-ke|Lt>>>ke)&255)<<2)|0,G=F[te|0],G>>>0>=9&&(R=R+8|0,h[r+44>>2]=R,Fi=(dn[te+2>>1]<<2)+te|0,te=R&63,ke=te&31,te=Fi+(((-1<<G+-8^-1)&(32<=(te&63)>>>0?L>>>ke|0:((1<<ke)-1&L)<<32-ke|Lt>>>ke))<<2)|0,G=F[te|0]),L=(G&255)+R|0,h[he+44>>2]=L,h[r+48>>2]||(G=dn[te+2>>1],h[r+40>>2]==h[r+36>>2]&&(L|0)>=65))break i;H=Ki|(oi<<16|H<<8)|G<<24;break l}r:{u:{if((H|0)<=279){he=H+-256|0,(H|0)>=260&&(L=H+-258>>1,he=no(ze,L)+((he&1|2)<<L)|0,Lt=h[ze>>2],L=h[ze+4>>2]),ke=r,H=h[r+44>>2],oi=H&63,R=oi&31,R=h[Jt+16>>2]+(((32<=(oi&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Lt>>>R)&255)<<2)|0,G=F[R|0],G>>>0>=9&&(H=H+8|0,h[r+44>>2]=H,Fi=(dn[R+2>>1]<<2)+R|0,te=H&63,R=te&31,R=Fi+(((-1<<G+-8^-1)&(32<=(te&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Lt>>>R))<<2)|0,G=F[R|0]),L=(G&255)+H|0,h[ke+44>>2]=L,H=dn[R+2>>1],(L|0)>=32&&Ce(ze),H>>>0>=4&&(L=H+-2>>1,H=no(ze,L)+((H&1|2)<<L)|0);s:{if((H+1|0)>=121){L=H+-119|0;break s}L=F[H+1264|0],L=(re(L>>>4|0,a)-(L&15)|0)+8|0,L=(L|0)>1?L:1}if(h[r+48>>2]|(h[r+44>>2]>64?h[r+40>>2]==h[r+36>>2]:0))break i;if(y-s>>2<(L|0)||(ke=he+1|0,Er-y>>2<(ke|0)))break t;if(R=y-(L<<2)|0,!(y&3|(ke|0)<4|(L|0)>2)){s:{if((L|0)==1){H=h[R>>2],G=H,L=G,Lt=L;break s}L=h[R+4>>2],Lt=h[R>>2],H=Lt}s:{if(!(y&4)){he=ke,G=y;break s}h[y>>2]=H,Lt=xp(Lt,L),L=Pn,R=R+4|0,G=y+4|0}for(H=he>>>1|0,te=H>>>0>1?H:1,H=0;oi=G+(H<<3)|0,h[oi>>2]=Lt,h[oi+4>>2]=L,H=H+1|0,(te|0)!=(H|0););if(!(he&1))break r;L=te<<3,h[L+G>>2]=h[L+R>>2];break r}if((L|0)>=(ke|0))break u;if(H=0,(ke|0)<=0)break r;for(;L=H<<2,h[L+y>>2]=h[L+R>>2],L=(H|0)!=(he|0),H=H+1|0,!!L;);break r}if((H|0)>=(yl|0))break t;if(G=H+-280|0,L=h[on>>2],yt>>>0<y>>>0)for(;he=h[yt>>2],h[L+(re(he,506832829)>>>h[on+4>>2]<<2)>>2]=he,yt=yt+4|0,yt>>>0<y>>>0;);H=h[L+(G<<2)>>2];break l}Wr(y,R,ke<<2)}if(Rt=ke+Rt|0,(Rt|0)>=(a|0))for(;Rt=Rt-a|0,L=Ye,Ye=L+1|0,Ye&15|(!E|(L|0)>=(S|0))||dt[E|0](r,Ye),(Rt|0)>=(a|0););if(he=ke<<2,Rt&_s){L=h[r+168>>2],G=h[r+152>>2],ke=0;r:{if(!G)break r;ke=h[h[r+160>>2]+(re(h[r+156>>2],Ye>>G)+(Rt>>G)<<2)>>2]}Jt=L+re(ke,548)|0}if(y=y+he|0,(vn|0)<1|yt>>>0>=y>>>0)break n;for(L=h[on>>2];G=h[yt>>2],h[L+(re(G,506832829)>>>h[on+4>>2]<<2)>>2]=G,yt=yt+4|0,yt>>>0<y>>>0;);break n}h[y>>2]=H}if(L=y+4|0,Rt=Rt+1|0,(Rt|0)<(a|0)){y=L;break n}if(G=Ye+1|0,G&15|(!E|(Ye|0)>=(S|0))||dt[E|0](r,G),Rt=0,!((vn|0)<1|yt>>>0>=L>>>0)){for(he=h[on>>2];Ye=h[yt>>2],h[he+(re(Ye,506832829)>>>h[on+4>>2]<<2)>>2]=Ye,ke=yt>>>0<y>>>0,Ye=yt+4|0,yt=Ye,!!ke;);yt=Ye}y=L,Ye=G}if(!(y>>>0<Ju>>>0))break}}L=r,a=1;i:{if(h[r+48>>2]||(a=0,h[r+40>>2]!=h[r+36>>2]))break i;a=h[r+44>>2]>64}if(h[L+48>>2]=a,!(!h[r+56>>2]|(!a|y>>>0>=Er>>>0))){if(h[r>>2]=5,s=h[r+68>>2],h[ze>>2]=h[r+64>>2],h[ze+4>>2]=s,s=h[r+92>>2],h[ze+24>>2]=h[r+88>>2],h[ze+28>>2]=s,s=h[r+84>>2],h[ze+16>>2]=h[r+80>>2],h[ze+20>>2]=s,s=h[r+76>>2],h[ze+8>>2]=h[r+72>>2],h[ze+12>>2]=s,h[r+112>>2]=h[r+96>>2],s=1,h[r+120>>2]<1)break e;return g0(r+136|0,ir),1}if(a)break t;return E&&dt[E|0](r,(Ye|0)>(S|0)?S:Ye),h[r>>2]=0,h[r+112>>2]=y-s>>2,1}h[r>>2]=3,s=0}return s}function _a(r){r=r|0;var s=0,a=0;a=yr(F[r+31|0],0,16843009,16843009),s=a,m[r+32|0]=s,m[r+33|0]=s>>>8,m[r+34|0]=s>>>16,m[r+35|0]=s>>>24,s=Pn,m[r+36|0]=s,m[r+37|0]=s>>>8,m[r+38|0]=s>>>16,m[r+39|0]=s>>>24,m[r+40|0]=a,m[r+41|0]=a>>>8,m[r+42|0]=a>>>16,m[r+43|0]=a>>>24,m[r+44|0]=s,m[r+45|0]=s>>>8,m[r+46|0]=s>>>16,m[r+47|0]=s>>>24,a=yr(F[r+63|0],0,16843009,16843009),s=a,m[r+64|0]=s,m[r+65|0]=s>>>8,m[r+66|0]=s>>>16,m[r+67|0]=s>>>24,s=Pn,m[r+68|0]=s,m[r+69|0]=s>>>8,m[r+70|0]=s>>>16,m[r+71|0]=s>>>24,m[r+72|0]=a,m[r+73|0]=a>>>8,m[r+74|0]=a>>>16,m[r+75|0]=a>>>24,m[r+76|0]=s,m[r+77|0]=s>>>8,m[r+78|0]=s>>>16,m[r+79|0]=s>>>24,a=yr(F[r+95|0],0,16843009,16843009),s=a,m[r+96|0]=s,m[r+97|0]=s>>>8,m[r+98|0]=s>>>16,m[r+99|0]=s>>>24,s=Pn,m[r+100|0]=s,m[r+101|0]=s>>>8,m[r+102|0]=s>>>16,m[r+103|0]=s>>>24,m[r+104|0]=a,m[r+105|0]=a>>>8,m[r+106|0]=a>>>16,m[r+107|0]=a>>>24,m[r+108|0]=s,m[r+109|0]=s>>>8,m[r+110|0]=s>>>16,m[r+111|0]=s>>>24,a=yr(F[r+127|0],0,16843009,16843009),s=a,m[r+128|0]=s,m[r+129|0]=s>>>8,m[r+130|0]=s>>>16,m[r+131|0]=s>>>24,s=Pn,m[r+132|0]=s,m[r+133|0]=s>>>8,m[r+134|0]=s>>>16,m[r+135|0]=s>>>24,m[r+136|0]=a,m[r+137|0]=a>>>8,m[r+138|0]=a>>>16,m[r+139|0]=a>>>24,m[r+140|0]=s,m[r+141|0]=s>>>8,m[r+142|0]=s>>>16,m[r+143|0]=s>>>24,a=yr(F[r+159|0],0,16843009,16843009),s=a,m[r+168|0]=s,m[r+169|0]=s>>>8,m[r+170|0]=s>>>16,m[r+171|0]=s>>>24,s=Pn,m[r+172|0]=s,m[r+173|0]=s>>>8,m[r+174|0]=s>>>16,m[r+175|0]=s>>>24,m[r+160|0]=a,m[r+161|0]=a>>>8,m[r+162|0]=a>>>16,m[r+163|0]=a>>>24,m[r+164|0]=s,m[r+165|0]=s>>>8,m[r+166|0]=s>>>16,m[r+167|0]=s>>>24,a=yr(F[r+-1|0],0,16843009,16843009),s=a,m[r|0]=s,m[r+1|0]=s>>>8,m[r+2|0]=s>>>16,m[r+3|0]=s>>>24,s=Pn,m[r+4|0]=s,m[r+5|0]=s>>>8,m[r+6|0]=s>>>16,m[r+7|0]=s>>>24,m[r+8|0]=a,m[r+9|0]=a>>>8,m[r+10|0]=a>>>16,m[r+11|0]=a>>>24,m[r+12|0]=s,m[r+13|0]=s>>>8,m[r+14|0]=s>>>16,m[r+15|0]=s>>>24,a=yr(F[r+191|0],0,16843009,16843009),s=a,m[r+200|0]=s,m[r+201|0]=s>>>8,m[r+202|0]=s>>>16,m[r+203|0]=s>>>24,s=Pn,m[r+204|0]=s,m[r+205|0]=s>>>8,m[r+206|0]=s>>>16,m[r+207|0]=s>>>24,m[r+192|0]=a,m[r+193|0]=a>>>8,m[r+194|0]=a>>>16,m[r+195|0]=a>>>24,m[r+196|0]=s,m[r+197|0]=s>>>8,m[r+198|0]=s>>>16,m[r+199|0]=s>>>24,a=yr(F[r+223|0],0,16843009,16843009),s=a,m[r+232|0]=s,m[r+233|0]=s>>>8,m[r+234|0]=s>>>16,m[r+235|0]=s>>>24,s=Pn,m[r+236|0]=s,m[r+237|0]=s>>>8,m[r+238|0]=s>>>16,m[r+239|0]=s>>>24,m[r+224|0]=a,m[r+225|0]=a>>>8,m[r+226|0]=a>>>16,m[r+227|0]=a>>>24,m[r+228|0]=s,m[r+229|0]=s>>>8,m[r+230|0]=s>>>16,m[r+231|0]=s>>>24,a=yr(F[r+255|0],0,16843009,16843009),s=a,m[r+264|0]=s,m[r+265|0]=s>>>8,m[r+266|0]=s>>>16,m[r+267|0]=s>>>24,s=Pn,m[r+268|0]=s,m[r+269|0]=s>>>8,m[r+270|0]=s>>>16,m[r+271|0]=s>>>24,m[r+256|0]=a,m[r+257|0]=a>>>8,m[r+258|0]=a>>>16,m[r+259|0]=a>>>24,m[r+260|0]=s,m[r+261|0]=s>>>8,m[r+262|0]=s>>>16,m[r+263|0]=s>>>24,a=yr(F[r+287|0],0,16843009,16843009),s=a,m[r+296|0]=s,m[r+297|0]=s>>>8,m[r+298|0]=s>>>16,m[r+299|0]=s>>>24,s=Pn,m[r+300|0]=s,m[r+301|0]=s>>>8,m[r+302|0]=s>>>16,m[r+303|0]=s>>>24,m[r+288|0]=a,m[r+289|0]=a>>>8,m[r+290|0]=a>>>16,m[r+291|0]=a>>>24,m[r+292|0]=s,m[r+293|0]=s>>>8,m[r+294|0]=s>>>16,m[r+295|0]=s>>>24,a=yr(F[r+319|0],0,16843009,16843009),s=a,m[r+328|0]=s,m[r+329|0]=s>>>8,m[r+330|0]=s>>>16,m[r+331|0]=s>>>24,s=Pn,m[r+332|0]=s,m[r+333|0]=s>>>8,m[r+334|0]=s>>>16,m[r+335|0]=s>>>24,m[r+320|0]=a,m[r+321|0]=a>>>8,m[r+322|0]=a>>>16,m[r+323|0]=a>>>24,m[r+324|0]=s,m[r+325|0]=s>>>8,m[r+326|0]=s>>>16,m[r+327|0]=s>>>24,a=yr(F[r+351|0],0,16843009,16843009),s=a,m[r+360|0]=s,m[r+361|0]=s>>>8,m[r+362|0]=s>>>16,m[r+363|0]=s>>>24,s=Pn,m[r+364|0]=s,m[r+365|0]=s>>>8,m[r+366|0]=s>>>16,m[r+367|0]=s>>>24,m[r+352|0]=a,m[r+353|0]=a>>>8,m[r+354|0]=a>>>16,m[r+355|0]=a>>>24,m[r+356|0]=s,m[r+357|0]=s>>>8,m[r+358|0]=s>>>16,m[r+359|0]=s>>>24,a=yr(F[r+383|0],0,16843009,16843009),s=a,m[r+392|0]=s,m[r+393|0]=s>>>8,m[r+394|0]=s>>>16,m[r+395|0]=s>>>24,s=Pn,m[r+396|0]=s,m[r+397|0]=s>>>8,m[r+398|0]=s>>>16,m[r+399|0]=s>>>24,m[r+384|0]=a,m[r+385|0]=a>>>8,m[r+386|0]=a>>>16,m[r+387|0]=a>>>24,m[r+388|0]=s,m[r+389|0]=s>>>8,m[r+390|0]=s>>>16,m[r+391|0]=s>>>24,a=yr(F[r+415|0],0,16843009,16843009),s=a,m[r+424|0]=s,m[r+425|0]=s>>>8,m[r+426|0]=s>>>16,m[r+427|0]=s>>>24,s=Pn,m[r+428|0]=s,m[r+429|0]=s>>>8,m[r+430|0]=s>>>16,m[r+431|0]=s>>>24,m[r+416|0]=a,m[r+417|0]=a>>>8,m[r+418|0]=a>>>16,m[r+419|0]=a>>>24,m[r+420|0]=s,m[r+421|0]=s>>>8,m[r+422|0]=s>>>16,m[r+423|0]=s>>>24,a=yr(F[r+447|0],0,16843009,16843009),s=a,m[r+456|0]=s,m[r+457|0]=s>>>8,m[r+458|0]=s>>>16,m[r+459|0]=s>>>24,s=Pn,m[r+460|0]=s,m[r+461|0]=s>>>8,m[r+462|0]=s>>>16,m[r+463|0]=s>>>24,m[r+448|0]=a,m[r+449|0]=a>>>8,m[r+450|0]=a>>>16,m[r+451|0]=a>>>24,m[r+452|0]=s,m[r+453|0]=s>>>8,m[r+454|0]=s>>>16,m[r+455|0]=s>>>24,a=yr(F[r+479|0],0,16843009,16843009),s=a,m[r+488|0]=s,m[r+489|0]=s>>>8,m[r+490|0]=s>>>16,m[r+491|0]=s>>>24,s=Pn,m[r+492|0]=s,m[r+493|0]=s>>>8,m[r+494|0]=s>>>16,m[r+495|0]=s>>>24,m[r+480|0]=a,m[r+481|0]=a>>>8,m[r+482|0]=a>>>16,m[r+483|0]=a>>>24,m[r+484|0]=s,m[r+485|0]=s>>>8,m[r+486|0]=s>>>16,m[r+487|0]=s>>>24}function Ao(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;R=h[r+4>>2],E=F[s+3|0],a=h[r+8>>2];e:{if((a|0)>-1)break e;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){L=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),h[r+12>>2]=S+3,a=a+24|0,h[r+8>>2]=a,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Pr(r),a=h[r+8>>2]}L=r,H=a,y=h[r>>2],G=y>>>a|0,E=re(E,R)>>>8|0;e:{if(G>>>0>E>>>0){y=((E^-1)<<a)+y|0,h[r>>2]=y,R=R-E|0;break e}R=E+1|0}S=Mr(R)^24,a=H-S|0,h[L+8>>2]=a,R=(R<<S)+-1|0,h[r+4>>2]=R;e:{if(G>>>0<=E>>>0){E=F[s+4|0];t:{if((a|0)>-1)break t;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){L=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=S+3,y=y<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}L=r,H=a,E=re(E,R)>>>8|0,G=y>>>a>>>0<=E>>>0;t:{if(!G){y=((E^-1)<<a)+y|0,h[r>>2]=y,E=R-E|0;break t}E=E+1|0}if(S=Mr(E)^24,a=H-S|0,h[L+8>>2]=a,R=(E<<S)+-1|0,h[r+4>>2]=R,E=2,G)break e;L=F[s+5|0];t:{if((a|0)>-1)break t;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}H=r,S=a,E=re(L,R)>>>8|0;t:{if(y>>>a>>>0>E>>>0){h[r>>2]=((E^-1)<<a)+y,L=4,a=R-E|0;break t}L=3,a=E+1|0}return s=Mr(a)^24,h[H+8>>2]=S-s,h[r+4>>2]=(a<<s)+-1,L}E=F[s+6|0];t:{if((a|0)>-1)break t;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){L=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=S+3,y=y<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}L=r,H=a,G=y>>>a|0,E=re(E,R)>>>8|0;t:{if(G>>>0>E>>>0){y=((E^-1)<<a)+y|0,h[r>>2]=y,R=R-E|0;break t}R=E+1|0}if(S=Mr(R)^24,a=H-S|0,h[L+8>>2]=a,R=(R<<S)+-1|0,h[r+4>>2]=R,G>>>0<=E>>>0){L=F[s+7|0];t:{if((a|0)>-1)break t;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}H=r,S=a,G=y>>>a|0,L=re(L,R)>>>8|0;t:{if(G>>>0>L>>>0){y=((L^-1)<<a)+y|0,h[r>>2]=y,E=R-L|0;break t}E=L+1|0}if(s=Mr(E)^24,a=S-s|0,h[H+8>>2]=a,R=(E<<s)+-1|0,h[r+4>>2]=R,G>>>0<=L>>>0){t:{if((a|0)>-1)break t;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}s=re(R,159)>>>8|0;t:{if(y>>>a>>>0>s>>>0){h[r>>2]=((s^-1)<<a)+y,y=R-s|0,s=6;break t}y=s+1|0,s=5}return E=a,a=Mr(y)^24,h[r+8>>2]=E-a,h[r+4>>2]=(y<<a)+-1,s}t:{if((a|0)>-1)break t;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}H=r,S=a,L=re(R,165)>>>8|0;t:{if(y>>>a>>>0>L>>>0){y=((L^-1)<<a)+y|0,h[r>>2]=y,E=9,L=R-L|0;break t}E=7,L=L+1|0}s=Mr(L)^24,a=S-s|0,h[H+8>>2]=a,R=(L<<s)+-1|0,h[r+4>>2]=R;t:{if((a|0)>-1)break t;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}H=r,S=a,G=y>>>a|0,L=re(R,145)>>>8|0;t:{if(G>>>0>L>>>0){h[r>>2]=((L^-1)<<a)+y,a=R-L|0;break t}a=L+1|0}return s=Mr(a)^24,h[H+8>>2]=S-s,h[r+4>>2]=(a<<s)+-1,(G>>>0>L>>>0)+E|0}E=F[s+8|0];t:{if((a|0)>-1)break t;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){L=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=S+3,y=y<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}L=r,H=a,te=y>>>a|0,G=re(E,R)>>>8|0;t:{if(te>>>0>G>>>0){y=((G^-1)<<a)+y|0,h[r>>2]=y,he=10,E=R-G|0;break t}he=9,E=G+1|0}S=Mr(E)^24,a=H-S|0,h[L+8>>2]=a,E=(E<<S)+-1|0,h[r+4>>2]=E,L=F[s+he|0];t:{if((a|0)>-1)break t;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break t}Pr(r),y=h[r>>2],a=h[r+8>>2]}H=r,S=a,R=y>>>a|0,L=re(L,E)>>>8|0;t:{if(R>>>0>L>>>0){y=((L^-1)<<a)+y|0,h[r>>2]=y,E=E-L|0;break t}E=L+1|0}s=Mr(E)^24,a=S-s|0,h[H+8>>2]=a,E=(E<<s)+-1|0,h[r+4>>2]=E,he=(te>>>0>G>>>0)<<1|R>>>0>L>>>0,L=h[(he<<2)+10160>>2],s=F[L|0];t:{if(!s){R=0;break t}for(R=0;;){G=s&255;i:{if((a|0)>-1)break i;if(s=h[r+12>>2],s>>>0<Zn[r+20>>2]){S=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=s+3,y=y<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,h[r>>2]=y;break i}Pr(r),y=h[r>>2],a=h[r+8>>2]}H=r,S=a,te=y>>>a|0,G=re(E,G)>>>8|0;i:{if(te>>>0>G>>>0){y=((G^-1)<<a)+y|0,h[r>>2]=y,E=E-G|0;break i}E=G+1|0}if(s=Mr(E)^24,a=S-s|0,h[H+8>>2]=a,E=(E<<s)+-1|0,h[r+4>>2]=E,R=R<<1|te>>>0>G>>>0,s=F[L+1|0],L=L+1|0,!s)break}}E=(8<<he|3)+R|0}return E}function se(r){r=r|0,m[r|0]=-2139062144,m[r+1|0]=8421504,m[r+2|0]=32896,m[r+3|0]=128,m[r+4|0]=-2139062144,m[r+5|0]=8421504,m[r+6|0]=32896,m[r+7|0]=128,m[r+32|0]=-2139062144,m[r+33|0]=8421504,m[r+34|0]=32896,m[r+35|0]=128,m[r+36|0]=-2139062144,m[r+37|0]=8421504,m[r+38|0]=32896,m[r+39|0]=128,m[r+64|0]=-2139062144,m[r+65|0]=8421504,m[r+66|0]=32896,m[r+67|0]=128,m[r+68|0]=-2139062144,m[r+69|0]=8421504,m[r+70|0]=32896,m[r+71|0]=128,m[r+96|0]=-2139062144,m[r+97|0]=8421504,m[r+98|0]=32896,m[r+99|0]=128,m[r+100|0]=-2139062144,m[r+101|0]=8421504,m[r+102|0]=32896,m[r+103|0]=128,m[r+128|0]=-2139062144,m[r+129|0]=8421504,m[r+130|0]=32896,m[r+131|0]=128,m[r+132|0]=-2139062144,m[r+133|0]=8421504,m[r+134|0]=32896,m[r+135|0]=128,m[r+160|0]=-2139062144,m[r+161|0]=8421504,m[r+162|0]=32896,m[r+163|0]=128,m[r+164|0]=-2139062144,m[r+165|0]=8421504,m[r+166|0]=32896,m[r+167|0]=128,m[r+192|0]=-2139062144,m[r+193|0]=8421504,m[r+194|0]=32896,m[r+195|0]=128,m[r+196|0]=-2139062144,m[r+197|0]=8421504,m[r+198|0]=32896,m[r+199|0]=128,m[r+224|0]=-2139062144,m[r+225|0]=8421504,m[r+226|0]=32896,m[r+227|0]=128,m[r+228|0]=-2139062144,m[r+229|0]=8421504,m[r+230|0]=32896,m[r+231|0]=128,m[r+256|0]=-2139062144,m[r+257|0]=8421504,m[r+258|0]=32896,m[r+259|0]=128,m[r+260|0]=-2139062144,m[r+261|0]=8421504,m[r+262|0]=32896,m[r+263|0]=128,m[r+8|0]=-2139062144,m[r+9|0]=8421504,m[r+10|0]=32896,m[r+11|0]=128,m[r+12|0]=-2139062144,m[r+13|0]=8421504,m[r+14|0]=32896,m[r+15|0]=128,m[r+40|0]=-2139062144,m[r+41|0]=8421504,m[r+42|0]=32896,m[r+43|0]=128,m[r+44|0]=-2139062144,m[r+45|0]=8421504,m[r+46|0]=32896,m[r+47|0]=128,m[r+72|0]=-2139062144,m[r+73|0]=8421504,m[r+74|0]=32896,m[r+75|0]=128,m[r+76|0]=-2139062144,m[r+77|0]=8421504,m[r+78|0]=32896,m[r+79|0]=128,m[r+104|0]=-2139062144,m[r+105|0]=8421504,m[r+106|0]=32896,m[r+107|0]=128,m[r+108|0]=-2139062144,m[r+109|0]=8421504,m[r+110|0]=32896,m[r+111|0]=128,m[r+136|0]=-2139062144,m[r+137|0]=8421504,m[r+138|0]=32896,m[r+139|0]=128,m[r+140|0]=-2139062144,m[r+141|0]=8421504,m[r+142|0]=32896,m[r+143|0]=128,m[r+168|0]=-2139062144,m[r+169|0]=8421504,m[r+170|0]=32896,m[r+171|0]=128,m[r+172|0]=-2139062144,m[r+173|0]=8421504,m[r+174|0]=32896,m[r+175|0]=128,m[r+200|0]=-2139062144,m[r+201|0]=8421504,m[r+202|0]=32896,m[r+203|0]=128,m[r+204|0]=-2139062144,m[r+205|0]=8421504,m[r+206|0]=32896,m[r+207|0]=128,m[r+232|0]=-2139062144,m[r+233|0]=8421504,m[r+234|0]=32896,m[r+235|0]=128,m[r+236|0]=-2139062144,m[r+237|0]=8421504,m[r+238|0]=32896,m[r+239|0]=128,m[r+264|0]=-2139062144,m[r+265|0]=8421504,m[r+266|0]=32896,m[r+267|0]=128,m[r+268|0]=-2139062144,m[r+269|0]=8421504,m[r+270|0]=32896,m[r+271|0]=128,m[r+296|0]=-2139062144,m[r+297|0]=8421504,m[r+298|0]=32896,m[r+299|0]=128,m[r+300|0]=-2139062144,m[r+301|0]=8421504,m[r+302|0]=32896,m[r+303|0]=128,m[r+288|0]=-2139062144,m[r+289|0]=8421504,m[r+290|0]=32896,m[r+291|0]=128,m[r+292|0]=-2139062144,m[r+293|0]=8421504,m[r+294|0]=32896,m[r+295|0]=128,m[r+328|0]=-2139062144,m[r+329|0]=8421504,m[r+330|0]=32896,m[r+331|0]=128,m[r+332|0]=-2139062144,m[r+333|0]=8421504,m[r+334|0]=32896,m[r+335|0]=128,m[r+320|0]=-2139062144,m[r+321|0]=8421504,m[r+322|0]=32896,m[r+323|0]=128,m[r+324|0]=-2139062144,m[r+325|0]=8421504,m[r+326|0]=32896,m[r+327|0]=128,m[r+360|0]=-2139062144,m[r+361|0]=8421504,m[r+362|0]=32896,m[r+363|0]=128,m[r+364|0]=-2139062144,m[r+365|0]=8421504,m[r+366|0]=32896,m[r+367|0]=128,m[r+352|0]=-2139062144,m[r+353|0]=8421504,m[r+354|0]=32896,m[r+355|0]=128,m[r+356|0]=-2139062144,m[r+357|0]=8421504,m[r+358|0]=32896,m[r+359|0]=128,m[r+392|0]=-2139062144,m[r+393|0]=8421504,m[r+394|0]=32896,m[r+395|0]=128,m[r+396|0]=-2139062144,m[r+397|0]=8421504,m[r+398|0]=32896,m[r+399|0]=128,m[r+384|0]=-2139062144,m[r+385|0]=8421504,m[r+386|0]=32896,m[r+387|0]=128,m[r+388|0]=-2139062144,m[r+389|0]=8421504,m[r+390|0]=32896,m[r+391|0]=128,m[r+424|0]=-2139062144,m[r+425|0]=8421504,m[r+426|0]=32896,m[r+427|0]=128,m[r+428|0]=-2139062144,m[r+429|0]=8421504,m[r+430|0]=32896,m[r+431|0]=128,m[r+416|0]=-2139062144,m[r+417|0]=8421504,m[r+418|0]=32896,m[r+419|0]=128,m[r+420|0]=-2139062144,m[r+421|0]=8421504,m[r+422|0]=32896,m[r+423|0]=128,m[r+456|0]=-2139062144,m[r+457|0]=8421504,m[r+458|0]=32896,m[r+459|0]=128,m[r+460|0]=-2139062144,m[r+461|0]=8421504,m[r+462|0]=32896,m[r+463|0]=128,m[r+448|0]=-2139062144,m[r+449|0]=8421504,m[r+450|0]=32896,m[r+451|0]=128,m[r+452|0]=-2139062144,m[r+453|0]=8421504,m[r+454|0]=32896,m[r+455|0]=128,m[r+488|0]=-2139062144,m[r+489|0]=8421504,m[r+490|0]=32896,m[r+491|0]=128,m[r+492|0]=-2139062144,m[r+493|0]=8421504,m[r+494|0]=32896,m[r+495|0]=128,m[r+480|0]=-2139062144,m[r+481|0]=8421504,m[r+482|0]=32896,m[r+483|0]=128,m[r+484|0]=-2139062144,m[r+485|0]=8421504,m[r+486|0]=32896,m[r+487|0]=128}function je(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0;s=r,E=s+-32|0,y=E,S=F[y+4|0]|F[y+5|0]<<8|(F[y+6|0]<<16|F[y+7|0]<<24),r=F[y|0]|F[y+1|0]<<8|(F[y+2|0]<<16|F[y+3|0]<<24),a=r,m[s|0]=a,m[s+1|0]=a>>>8,m[s+2|0]=a>>>16,m[s+3|0]=a>>>24,m[s+4|0]=S,m[s+5|0]=S>>>8,m[s+6|0]=S>>>16,m[s+7|0]=S>>>24,m[s+32|0]=a,m[s+33|0]=a>>>8,m[s+34|0]=a>>>16,m[s+35|0]=a>>>24,m[s+36|0]=S,m[s+37|0]=S>>>8,m[s+38|0]=S>>>16,m[s+39|0]=S>>>24,m[s+64|0]=a,m[s+65|0]=a>>>8,m[s+66|0]=a>>>16,m[s+67|0]=a>>>24,m[s+68|0]=S,m[s+69|0]=S>>>8,m[s+70|0]=S>>>16,m[s+71|0]=S>>>24,m[s+96|0]=a,m[s+97|0]=a>>>8,m[s+98|0]=a>>>16,m[s+99|0]=a>>>24,m[s+100|0]=S,m[s+101|0]=S>>>8,m[s+102|0]=S>>>16,m[s+103|0]=S>>>24,m[s+128|0]=a,m[s+129|0]=a>>>8,m[s+130|0]=a>>>16,m[s+131|0]=a>>>24,m[s+132|0]=S,m[s+133|0]=S>>>8,m[s+134|0]=S>>>16,m[s+135|0]=S>>>24,m[s+160|0]=a,m[s+161|0]=a>>>8,m[s+162|0]=a>>>16,m[s+163|0]=a>>>24,m[s+164|0]=S,m[s+165|0]=S>>>8,m[s+166|0]=S>>>16,m[s+167|0]=S>>>24,m[s+192|0]=a,m[s+193|0]=a>>>8,m[s+194|0]=a>>>16,m[s+195|0]=a>>>24,m[s+196|0]=S,m[s+197|0]=S>>>8,m[s+198|0]=S>>>16,m[s+199|0]=S>>>24,m[s+224|0]=a,m[s+225|0]=a>>>8,m[s+226|0]=a>>>16,m[s+227|0]=a>>>24,m[s+228|0]=S,m[s+229|0]=S>>>8,m[s+230|0]=S>>>16,m[s+231|0]=S>>>24,S=y+8|0,y=F[S+4|0]|F[S+5|0]<<8|(F[S+6|0]<<16|F[S+7|0]<<24),r=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),a=r,m[s+8|0]=a,m[s+9|0]=a>>>8,m[s+10|0]=a>>>16,m[s+11|0]=a>>>24,m[s+12|0]=y,m[s+13|0]=y>>>8,m[s+14|0]=y>>>16,m[s+15|0]=y>>>24,m[s+40|0]=a,m[s+41|0]=a>>>8,m[s+42|0]=a>>>16,m[s+43|0]=a>>>24,m[s+44|0]=y,m[s+45|0]=y>>>8,m[s+46|0]=y>>>16,m[s+47|0]=y>>>24,m[s+72|0]=a,m[s+73|0]=a>>>8,m[s+74|0]=a>>>16,m[s+75|0]=a>>>24,m[s+76|0]=y,m[s+77|0]=y>>>8,m[s+78|0]=y>>>16,m[s+79|0]=y>>>24,m[s+104|0]=a,m[s+105|0]=a>>>8,m[s+106|0]=a>>>16,m[s+107|0]=a>>>24,m[s+108|0]=y,m[s+109|0]=y>>>8,m[s+110|0]=y>>>16,m[s+111|0]=y>>>24,m[s+136|0]=a,m[s+137|0]=a>>>8,m[s+138|0]=a>>>16,m[s+139|0]=a>>>24,m[s+140|0]=y,m[s+141|0]=y>>>8,m[s+142|0]=y>>>16,m[s+143|0]=y>>>24,m[s+168|0]=a,m[s+169|0]=a>>>8,m[s+170|0]=a>>>16,m[s+171|0]=a>>>24,m[s+172|0]=y,m[s+173|0]=y>>>8,m[s+174|0]=y>>>16,m[s+175|0]=y>>>24,m[s+200|0]=a,m[s+201|0]=a>>>8,m[s+202|0]=a>>>16,m[s+203|0]=a>>>24,m[s+204|0]=y,m[s+205|0]=y>>>8,m[s+206|0]=y>>>16,m[s+207|0]=y>>>24,m[s+232|0]=a,m[s+233|0]=a>>>8,m[s+234|0]=a>>>16,m[s+235|0]=a>>>24,m[s+236|0]=y,m[s+237|0]=y>>>8,m[s+238|0]=y>>>16,m[s+239|0]=y>>>24,y=F[S+4|0]|F[S+5|0]<<8|(F[S+6|0]<<16|F[S+7|0]<<24),L=y,a=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),m[s+264|0]=a,m[s+265|0]=a>>>8,m[s+266|0]=a>>>16,m[s+267|0]=a>>>24,m[s+268|0]=y,m[s+269|0]=y>>>8,m[s+270|0]=y>>>16,m[s+271|0]=y>>>24,y=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),r=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),E=r,m[s+256|0]=E,m[s+257|0]=E>>>8,m[s+258|0]=E>>>16,m[s+259|0]=E>>>24,m[s+260|0]=y,m[s+261|0]=y>>>8,m[s+262|0]=y>>>16,m[s+263|0]=y>>>24,m[s+296|0]=a,m[s+297|0]=a>>>8,m[s+298|0]=a>>>16,m[s+299|0]=a>>>24,m[s+300|0]=L,m[s+301|0]=L>>>8,m[s+302|0]=L>>>16,m[s+303|0]=L>>>24,m[s+288|0]=E,m[s+289|0]=E>>>8,m[s+290|0]=E>>>16,m[s+291|0]=E>>>24,m[s+292|0]=y,m[s+293|0]=y>>>8,m[s+294|0]=y>>>16,m[s+295|0]=y>>>24,m[s+328|0]=a,m[s+329|0]=a>>>8,m[s+330|0]=a>>>16,m[s+331|0]=a>>>24,m[s+332|0]=L,m[s+333|0]=L>>>8,m[s+334|0]=L>>>16,m[s+335|0]=L>>>24,m[s+320|0]=E,m[s+321|0]=E>>>8,m[s+322|0]=E>>>16,m[s+323|0]=E>>>24,m[s+324|0]=y,m[s+325|0]=y>>>8,m[s+326|0]=y>>>16,m[s+327|0]=y>>>24,m[s+360|0]=a,m[s+361|0]=a>>>8,m[s+362|0]=a>>>16,m[s+363|0]=a>>>24,m[s+364|0]=L,m[s+365|0]=L>>>8,m[s+366|0]=L>>>16,m[s+367|0]=L>>>24,m[s+352|0]=E,m[s+353|0]=E>>>8,m[s+354|0]=E>>>16,m[s+355|0]=E>>>24,m[s+356|0]=y,m[s+357|0]=y>>>8,m[s+358|0]=y>>>16,m[s+359|0]=y>>>24,m[s+384|0]=E,m[s+385|0]=E>>>8,m[s+386|0]=E>>>16,m[s+387|0]=E>>>24,m[s+388|0]=y,m[s+389|0]=y>>>8,m[s+390|0]=y>>>16,m[s+391|0]=y>>>24,m[s+392|0]=a,m[s+393|0]=a>>>8,m[s+394|0]=a>>>16,m[s+395|0]=a>>>24,m[s+396|0]=L,m[s+397|0]=L>>>8,m[s+398|0]=L>>>16,m[s+399|0]=L>>>24,m[s+424|0]=a,m[s+425|0]=a>>>8,m[s+426|0]=a>>>16,m[s+427|0]=a>>>24,m[s+428|0]=L,m[s+429|0]=L>>>8,m[s+430|0]=L>>>16,m[s+431|0]=L>>>24,m[s+416|0]=E,m[s+417|0]=E>>>8,m[s+418|0]=E>>>16,m[s+419|0]=E>>>24,m[s+420|0]=y,m[s+421|0]=y>>>8,m[s+422|0]=y>>>16,m[s+423|0]=y>>>24,m[s+448|0]=E,m[s+449|0]=E>>>8,m[s+450|0]=E>>>16,m[s+451|0]=E>>>24,m[s+452|0]=y,m[s+453|0]=y>>>8,m[s+454|0]=y>>>16,m[s+455|0]=y>>>24,m[s+456|0]=a,m[s+457|0]=a>>>8,m[s+458|0]=a>>>16,m[s+459|0]=a>>>24,m[s+460|0]=L,m[s+461|0]=L>>>8,m[s+462|0]=L>>>16,m[s+463|0]=L>>>24,m[s+488|0]=a,m[s+489|0]=a>>>8,m[s+490|0]=a>>>16,m[s+491|0]=a>>>24,m[s+492|0]=L,m[s+493|0]=L>>>8,m[s+494|0]=L>>>16,m[s+495|0]=L>>>24,m[s+480|0]=E,m[s+481|0]=E>>>8,m[s+482|0]=E>>>16,m[s+483|0]=E>>>24,m[s+484|0]=y,m[s+485|0]=y>>>8,m[s+486|0]=y>>>16,m[s+487|0]=y>>>24}function kt(r,s,a,y,S){var E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0;E=Fn-80|0,Fn=E,h[E+76>>2]=s,oi=E+55|0,Lt=E+56|0,s=0;e:{t:for(;;){i:{if((ze|0)<0)break i;if((s|0)>(2147483647-ze|0)){h[2865]=61,ze=-1;break i}ze=s+ze|0}i:{n:{o:{if(G=h[E+76>>2],s=G,L=F[s|0],L)for(;;){l:{L=L&255;r:{if(!L){L=s;break r}if((L|0)!=37)break l;for(L=s;;){if(F[s+1|0]!=37)break r;if(R=s+2|0,h[E+76>>2]=R,L=L+1|0,H=F[s+2|0],s=R,(H|0)!=37)break}}if(s=L-G|0,r&&Zh(r,G,s),s)continue t;L=E,R=!Mf(m[h[E+76>>2]+1|0]),s=h[E+76>>2];r:{if(!(R|F[s+2|0]!=36)){yt=m[s+1|0]+-48|0,Rt=1,s=s+3|0;break r}yt=-1,s=s+1|0}h[L+76>>2]=s,te=0,Ye=m[s|0],R=Ye+-32|0;r:{if(R>>>0>31){L=s;break r}if(L=s,R=1<<R,!(R&75913))break r;for(;;){if(L=s+1|0,h[E+76>>2]=L,te=R|te,Ye=m[s+1|0],R=Ye+-32|0,R>>>0>=32)break r;if(s=L,R=1<<R,!(R&75913))break}}r:{if((Ye|0)==42){R=E;u:{s:{if(!Mf(m[L+1|0])||(s=h[E+76>>2],F[s+2|0]!=36))break s;h[((m[s+1|0]<<2)+S|0)+-192>>2]=10,he=h[((m[s+1|0]<<3)+y|0)+-384>>2],Rt=1,s=s+3|0;break u}if(Rt)break o;Rt=0,he=0,r&&(s=h[a>>2],h[a>>2]=s+4,he=h[s>>2]),s=h[E+76>>2]+1|0}if(h[R+76>>2]=s,(he|0)>-1)break r;he=0-he|0,te=te|8192;break r}if(he=Qs(E+76|0),(he|0)<0)break o;s=h[E+76>>2]}H=-1;r:{if(F[s|0]!=46)break r;if(F[s+1|0]==42){u:{if(!Mf(m[s+2|0])||(s=h[E+76>>2],F[s+3|0]!=36))break u;h[((m[s+2|0]<<2)+S|0)+-192>>2]=10,H=h[((m[s+2|0]<<3)+y|0)+-384>>2],s=s+4|0,h[E+76>>2]=s;break r}if(Rt)break o;r?(s=h[a>>2],h[a>>2]=s+4,H=h[s>>2]):H=0,s=h[E+76>>2]+2|0,h[E+76>>2]=s;break r}h[E+76>>2]=s+1,H=Qs(E+76|0),s=h[E+76>>2]}for(L=0;;){if(Jt=L,ke=-1,m[s|0]+-65>>>0>57)break e;if(Ye=s+1|0,h[E+76>>2]=Ye,L=m[s|0],s=Ye,L=F[(L+re(Jt,58)|0)+9599|0],!(L+-1>>>0<8))break}r:{u:{if((L|0)!=19){if(!L)break e;if((yt|0)>=0){h[(yt<<2)+S>>2]=L,s=(yt<<3)+y|0,L=h[s+4>>2],h[E+64>>2]=h[s>>2],h[E+68>>2]=L;break u}if(!r)break i;Su(E- -64|0,L,a),Ye=h[E+76>>2];break r}if((yt|0)>-1)break e}if(s=0,!r)continue t}R=te&-65537,L=te&8192?R:te,ke=0,yt=9644,te=Lt;r:{u:{s:{a:{f:{c:{h:{d:{p:{m:{_:{v:{b:{g:{w:{y:switch(s=m[Ye+-1|0],s=Jt&&(s&15)==3?s&-33:s,s+-88|0){case 11:break r;case 9:case 13:case 14:case 15:break u;case 27:break h;case 12:case 17:break m;case 23:break _;case 0:case 32:break v;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break n;default:break y}y:switch(s+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break n;default:break y}if((s|0)==83)break c;break n}s=h[E+64>>2],G=h[E+68>>2],yt=9644;break p}s=0;g:switch(Jt&255){case 0:h[h[E+64>>2]>>2]=ze;continue t;case 1:h[h[E+64>>2]>>2]=ze;continue t;case 2:L=h[E+64>>2],h[L>>2]=ze,h[L+4>>2]=ze>>31;continue t;case 3:Ri[h[E+64>>2]>>1]=ze;continue t;case 4:m[h[E+64>>2]]=ze;continue t;case 6:h[h[E+64>>2]>>2]=ze;continue t;case 7:break g;default:continue t}L=h[E+64>>2],h[L>>2]=ze,h[L+4>>2]=ze>>31;continue t}H=H>>>0>8?H:8,L=L|8,s=120}if(G=yh(h[E+64>>2],h[E+68>>2],Lt,s&32),!(L&8)|!(h[E+64>>2]|h[E+68>>2]))break d;yt=(s>>>4|0)+9644|0,ke=2;break d}if(G=c0(h[E+64>>2],h[E+68>>2],Lt),!(L&8))break d;s=Lt-G|0,H=(H|0)>(s|0)?H:s+1|0;break d}if(R=h[E+68>>2],G=R,s=h[E+64>>2],(R|0)<-1||(R|0)<=-1){G=0-(G+(0<s>>>0)|0)|0,s=0-s|0,h[E+64>>2]=s,h[E+68>>2]=G,ke=1,yt=9644;break p}if(L&2048){ke=1,yt=9645;break p}ke=L&1,yt=ke?9646:9644}G=Zi(s,G,Lt)}if(L=(H|0)>-1?L&-65537:L,s=h[E+64>>2],R=h[E+68>>2],!(!!(s|R)|H)){H=0,G=Lt;break n}s=!(s|R)+(Lt-G|0)|0,H=(H|0)>(s|0)?H:s;break n}s=h[E+64>>2],G=s||9654,s=vi(G,H),te=s||H+G|0,L=R,H=s?s-G|0:H;break n}if(R=h[E+64>>2],H)break a;s=0,Uo(r,32,he,0,L);break s}h[E+12>>2]=0,h[E+8>>2]=h[E+64>>2],h[E+64>>2]=E+8,H=-1,R=E+8|0}s=0;a:{for(;;){if(G=h[R>>2],!G)break a;if(G=_p(E+4|0,G),te=(G|0)<0,!(te|G>>>0>H-s>>>0)){if(R=R+4|0,s=s+G|0,H>>>0>s>>>0)continue;break a}break}if(ke=-1,te)break e}if(Uo(r,32,he,s,L),!s){s=0;break s}for(Ye=0,R=h[E+64>>2];;){if(G=h[R>>2],!G||(G=_p(E+4|0,G),Ye=G+Ye|0,(Ye|0)>(s|0)))break s;if(Zh(r,E+4|0,G),R=R+4|0,!(Ye>>>0<s>>>0))break}}Uo(r,32,he,s,L^8192),s=(he|0)>(s|0)?he:s;continue t}s=dt[0](r,xo[E+64>>3],he,H,L,s)|0;continue t}m[E+55|0]=h[E+64>>2],H=1,G=oi,L=R;break n}R=s+1|0,h[E+76>>2]=R,L=F[s+1|0],s=R}if(ke=ze,r)break e;if(!Rt)break i;for(s=1;;){if(r=h[(s<<2)+S>>2],r){if(Su((s<<3)+y|0,r,a),ke=1,s=s+1|0,(s|0)!=10)continue;break e}break}if(ke=1,s>>>0>=10)break e;for(;;){if(h[(s<<2)+S>>2])break o;if(s=s+1|0,(s|0)==10)break}break e}ke=-1;break e}te=te-G|0,H=(H|0)<(te|0)?te:H,R=H+ke|0,s=(he|0)<(R|0)?R:he,Uo(r,32,s,R,L),Zh(r,yt,ke),Uo(r,48,s,R,L^65536),Uo(r,48,H,te,0),Zh(r,G,te),Uo(r,32,s,R,L^8192);continue}break}ke=0}return Fn=E+80|0,ke}function Wt(r){r=r|0;var s=0,a=0;s=r,r=yr((F[s+-17|0]+(F[s+-18|0]+(F[s+-19|0]+(F[s+-20|0]+(F[s+-21|0]+(F[s+-22|0]+(F[s+-23|0]+(F[s+-24|0]+(F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[s|0]=r,m[s+1|0]=r>>>8,m[s+2|0]=r>>>16,m[s+3|0]=r>>>24,a=Pn,m[s+4|0]=a,m[s+5|0]=a>>>8,m[s+6|0]=a>>>16,m[s+7|0]=a>>>24,m[s+8|0]=r,m[s+9|0]=r>>>8,m[s+10|0]=r>>>16,m[s+11|0]=r>>>24,m[s+12|0]=a,m[s+13|0]=a>>>8,m[s+14|0]=a>>>16,m[s+15|0]=a>>>24,m[s+40|0]=r,m[s+41|0]=r>>>8,m[s+42|0]=r>>>16,m[s+43|0]=r>>>24,m[s+44|0]=a,m[s+45|0]=a>>>8,m[s+46|0]=a>>>16,m[s+47|0]=a>>>24,m[s+32|0]=r,m[s+33|0]=r>>>8,m[s+34|0]=r>>>16,m[s+35|0]=r>>>24,m[s+36|0]=a,m[s+37|0]=a>>>8,m[s+38|0]=a>>>16,m[s+39|0]=a>>>24,m[s+72|0]=r,m[s+73|0]=r>>>8,m[s+74|0]=r>>>16,m[s+75|0]=r>>>24,m[s+76|0]=a,m[s+77|0]=a>>>8,m[s+78|0]=a>>>16,m[s+79|0]=a>>>24,m[s+64|0]=r,m[s+65|0]=r>>>8,m[s+66|0]=r>>>16,m[s+67|0]=r>>>24,m[s+68|0]=a,m[s+69|0]=a>>>8,m[s+70|0]=a>>>16,m[s+71|0]=a>>>24,m[s+104|0]=r,m[s+105|0]=r>>>8,m[s+106|0]=r>>>16,m[s+107|0]=r>>>24,m[s+108|0]=a,m[s+109|0]=a>>>8,m[s+110|0]=a>>>16,m[s+111|0]=a>>>24,m[s+96|0]=r,m[s+97|0]=r>>>8,m[s+98|0]=r>>>16,m[s+99|0]=r>>>24,m[s+100|0]=a,m[s+101|0]=a>>>8,m[s+102|0]=a>>>16,m[s+103|0]=a>>>24,m[s+136|0]=r,m[s+137|0]=r>>>8,m[s+138|0]=r>>>16,m[s+139|0]=r>>>24,m[s+140|0]=a,m[s+141|0]=a>>>8,m[s+142|0]=a>>>16,m[s+143|0]=a>>>24,m[s+128|0]=r,m[s+129|0]=r>>>8,m[s+130|0]=r>>>16,m[s+131|0]=r>>>24,m[s+132|0]=a,m[s+133|0]=a>>>8,m[s+134|0]=a>>>16,m[s+135|0]=a>>>24,m[s+168|0]=r,m[s+169|0]=r>>>8,m[s+170|0]=r>>>16,m[s+171|0]=r>>>24,m[s+172|0]=a,m[s+173|0]=a>>>8,m[s+174|0]=a>>>16,m[s+175|0]=a>>>24,m[s+160|0]=r,m[s+161|0]=r>>>8,m[s+162|0]=r>>>16,m[s+163|0]=r>>>24,m[s+164|0]=a,m[s+165|0]=a>>>8,m[s+166|0]=a>>>16,m[s+167|0]=a>>>24,m[s+200|0]=r,m[s+201|0]=r>>>8,m[s+202|0]=r>>>16,m[s+203|0]=r>>>24,m[s+204|0]=a,m[s+205|0]=a>>>8,m[s+206|0]=a>>>16,m[s+207|0]=a>>>24,m[s+192|0]=r,m[s+193|0]=r>>>8,m[s+194|0]=r>>>16,m[s+195|0]=r>>>24,m[s+196|0]=a,m[s+197|0]=a>>>8,m[s+198|0]=a>>>16,m[s+199|0]=a>>>24,m[s+232|0]=r,m[s+233|0]=r>>>8,m[s+234|0]=r>>>16,m[s+235|0]=r>>>24,m[s+236|0]=a,m[s+237|0]=a>>>8,m[s+238|0]=a>>>16,m[s+239|0]=a>>>24,m[s+224|0]=r,m[s+225|0]=r>>>8,m[s+226|0]=r>>>16,m[s+227|0]=r>>>24,m[s+228|0]=a,m[s+229|0]=a>>>8,m[s+230|0]=a>>>16,m[s+231|0]=a>>>24,m[s+264|0]=r,m[s+265|0]=r>>>8,m[s+266|0]=r>>>16,m[s+267|0]=r>>>24,m[s+268|0]=a,m[s+269|0]=a>>>8,m[s+270|0]=a>>>16,m[s+271|0]=a>>>24,m[s+256|0]=r,m[s+257|0]=r>>>8,m[s+258|0]=r>>>16,m[s+259|0]=r>>>24,m[s+260|0]=a,m[s+261|0]=a>>>8,m[s+262|0]=a>>>16,m[s+263|0]=a>>>24,m[s+296|0]=r,m[s+297|0]=r>>>8,m[s+298|0]=r>>>16,m[s+299|0]=r>>>24,m[s+300|0]=a,m[s+301|0]=a>>>8,m[s+302|0]=a>>>16,m[s+303|0]=a>>>24,m[s+288|0]=r,m[s+289|0]=r>>>8,m[s+290|0]=r>>>16,m[s+291|0]=r>>>24,m[s+292|0]=a,m[s+293|0]=a>>>8,m[s+294|0]=a>>>16,m[s+295|0]=a>>>24,m[s+328|0]=r,m[s+329|0]=r>>>8,m[s+330|0]=r>>>16,m[s+331|0]=r>>>24,m[s+332|0]=a,m[s+333|0]=a>>>8,m[s+334|0]=a>>>16,m[s+335|0]=a>>>24,m[s+320|0]=r,m[s+321|0]=r>>>8,m[s+322|0]=r>>>16,m[s+323|0]=r>>>24,m[s+324|0]=a,m[s+325|0]=a>>>8,m[s+326|0]=a>>>16,m[s+327|0]=a>>>24,m[s+360|0]=r,m[s+361|0]=r>>>8,m[s+362|0]=r>>>16,m[s+363|0]=r>>>24,m[s+364|0]=a,m[s+365|0]=a>>>8,m[s+366|0]=a>>>16,m[s+367|0]=a>>>24,m[s+352|0]=r,m[s+353|0]=r>>>8,m[s+354|0]=r>>>16,m[s+355|0]=r>>>24,m[s+356|0]=a,m[s+357|0]=a>>>8,m[s+358|0]=a>>>16,m[s+359|0]=a>>>24,m[s+392|0]=r,m[s+393|0]=r>>>8,m[s+394|0]=r>>>16,m[s+395|0]=r>>>24,m[s+396|0]=a,m[s+397|0]=a>>>8,m[s+398|0]=a>>>16,m[s+399|0]=a>>>24,m[s+384|0]=r,m[s+385|0]=r>>>8,m[s+386|0]=r>>>16,m[s+387|0]=r>>>24,m[s+388|0]=a,m[s+389|0]=a>>>8,m[s+390|0]=a>>>16,m[s+391|0]=a>>>24,m[s+424|0]=r,m[s+425|0]=r>>>8,m[s+426|0]=r>>>16,m[s+427|0]=r>>>24,m[s+428|0]=a,m[s+429|0]=a>>>8,m[s+430|0]=a>>>16,m[s+431|0]=a>>>24,m[s+416|0]=r,m[s+417|0]=r>>>8,m[s+418|0]=r>>>16,m[s+419|0]=r>>>24,m[s+420|0]=a,m[s+421|0]=a>>>8,m[s+422|0]=a>>>16,m[s+423|0]=a>>>24,m[s+456|0]=r,m[s+457|0]=r>>>8,m[s+458|0]=r>>>16,m[s+459|0]=r>>>24,m[s+460|0]=a,m[s+461|0]=a>>>8,m[s+462|0]=a>>>16,m[s+463|0]=a>>>24,m[s+448|0]=r,m[s+449|0]=r>>>8,m[s+450|0]=r>>>16,m[s+451|0]=r>>>24,m[s+452|0]=a,m[s+453|0]=a>>>8,m[s+454|0]=a>>>16,m[s+455|0]=a>>>24,m[s+488|0]=r,m[s+489|0]=r>>>8,m[s+490|0]=r>>>16,m[s+491|0]=r>>>24,m[s+492|0]=a,m[s+493|0]=a>>>8,m[s+494|0]=a>>>16,m[s+495|0]=a>>>24,m[s+480|0]=r,m[s+481|0]=r>>>8,m[s+482|0]=r>>>16,m[s+483|0]=r>>>24,m[s+484|0]=a,m[s+485|0]=a>>>8,m[s+486|0]=a>>>16,m[s+487|0]=a>>>24}function li(r){r=r|0;var s=0,a=0;s=r,r=yr((F[s+479|0]+(F[s+447|0]+(F[s+415|0]+(F[s+383|0]+(F[s+351|0]+(F[s+319|0]+(F[s+287|0]+(F[s+255|0]+(F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[s|0]=r,m[s+1|0]=r>>>8,m[s+2|0]=r>>>16,m[s+3|0]=r>>>24,a=Pn,m[s+4|0]=a,m[s+5|0]=a>>>8,m[s+6|0]=a>>>16,m[s+7|0]=a>>>24,m[s+8|0]=r,m[s+9|0]=r>>>8,m[s+10|0]=r>>>16,m[s+11|0]=r>>>24,m[s+12|0]=a,m[s+13|0]=a>>>8,m[s+14|0]=a>>>16,m[s+15|0]=a>>>24,m[s+40|0]=r,m[s+41|0]=r>>>8,m[s+42|0]=r>>>16,m[s+43|0]=r>>>24,m[s+44|0]=a,m[s+45|0]=a>>>8,m[s+46|0]=a>>>16,m[s+47|0]=a>>>24,m[s+32|0]=r,m[s+33|0]=r>>>8,m[s+34|0]=r>>>16,m[s+35|0]=r>>>24,m[s+36|0]=a,m[s+37|0]=a>>>8,m[s+38|0]=a>>>16,m[s+39|0]=a>>>24,m[s+72|0]=r,m[s+73|0]=r>>>8,m[s+74|0]=r>>>16,m[s+75|0]=r>>>24,m[s+76|0]=a,m[s+77|0]=a>>>8,m[s+78|0]=a>>>16,m[s+79|0]=a>>>24,m[s+64|0]=r,m[s+65|0]=r>>>8,m[s+66|0]=r>>>16,m[s+67|0]=r>>>24,m[s+68|0]=a,m[s+69|0]=a>>>8,m[s+70|0]=a>>>16,m[s+71|0]=a>>>24,m[s+104|0]=r,m[s+105|0]=r>>>8,m[s+106|0]=r>>>16,m[s+107|0]=r>>>24,m[s+108|0]=a,m[s+109|0]=a>>>8,m[s+110|0]=a>>>16,m[s+111|0]=a>>>24,m[s+96|0]=r,m[s+97|0]=r>>>8,m[s+98|0]=r>>>16,m[s+99|0]=r>>>24,m[s+100|0]=a,m[s+101|0]=a>>>8,m[s+102|0]=a>>>16,m[s+103|0]=a>>>24,m[s+136|0]=r,m[s+137|0]=r>>>8,m[s+138|0]=r>>>16,m[s+139|0]=r>>>24,m[s+140|0]=a,m[s+141|0]=a>>>8,m[s+142|0]=a>>>16,m[s+143|0]=a>>>24,m[s+128|0]=r,m[s+129|0]=r>>>8,m[s+130|0]=r>>>16,m[s+131|0]=r>>>24,m[s+132|0]=a,m[s+133|0]=a>>>8,m[s+134|0]=a>>>16,m[s+135|0]=a>>>24,m[s+168|0]=r,m[s+169|0]=r>>>8,m[s+170|0]=r>>>16,m[s+171|0]=r>>>24,m[s+172|0]=a,m[s+173|0]=a>>>8,m[s+174|0]=a>>>16,m[s+175|0]=a>>>24,m[s+160|0]=r,m[s+161|0]=r>>>8,m[s+162|0]=r>>>16,m[s+163|0]=r>>>24,m[s+164|0]=a,m[s+165|0]=a>>>8,m[s+166|0]=a>>>16,m[s+167|0]=a>>>24,m[s+200|0]=r,m[s+201|0]=r>>>8,m[s+202|0]=r>>>16,m[s+203|0]=r>>>24,m[s+204|0]=a,m[s+205|0]=a>>>8,m[s+206|0]=a>>>16,m[s+207|0]=a>>>24,m[s+192|0]=r,m[s+193|0]=r>>>8,m[s+194|0]=r>>>16,m[s+195|0]=r>>>24,m[s+196|0]=a,m[s+197|0]=a>>>8,m[s+198|0]=a>>>16,m[s+199|0]=a>>>24,m[s+232|0]=r,m[s+233|0]=r>>>8,m[s+234|0]=r>>>16,m[s+235|0]=r>>>24,m[s+236|0]=a,m[s+237|0]=a>>>8,m[s+238|0]=a>>>16,m[s+239|0]=a>>>24,m[s+224|0]=r,m[s+225|0]=r>>>8,m[s+226|0]=r>>>16,m[s+227|0]=r>>>24,m[s+228|0]=a,m[s+229|0]=a>>>8,m[s+230|0]=a>>>16,m[s+231|0]=a>>>24,m[s+264|0]=r,m[s+265|0]=r>>>8,m[s+266|0]=r>>>16,m[s+267|0]=r>>>24,m[s+268|0]=a,m[s+269|0]=a>>>8,m[s+270|0]=a>>>16,m[s+271|0]=a>>>24,m[s+256|0]=r,m[s+257|0]=r>>>8,m[s+258|0]=r>>>16,m[s+259|0]=r>>>24,m[s+260|0]=a,m[s+261|0]=a>>>8,m[s+262|0]=a>>>16,m[s+263|0]=a>>>24,m[s+296|0]=r,m[s+297|0]=r>>>8,m[s+298|0]=r>>>16,m[s+299|0]=r>>>24,m[s+300|0]=a,m[s+301|0]=a>>>8,m[s+302|0]=a>>>16,m[s+303|0]=a>>>24,m[s+288|0]=r,m[s+289|0]=r>>>8,m[s+290|0]=r>>>16,m[s+291|0]=r>>>24,m[s+292|0]=a,m[s+293|0]=a>>>8,m[s+294|0]=a>>>16,m[s+295|0]=a>>>24,m[s+328|0]=r,m[s+329|0]=r>>>8,m[s+330|0]=r>>>16,m[s+331|0]=r>>>24,m[s+332|0]=a,m[s+333|0]=a>>>8,m[s+334|0]=a>>>16,m[s+335|0]=a>>>24,m[s+320|0]=r,m[s+321|0]=r>>>8,m[s+322|0]=r>>>16,m[s+323|0]=r>>>24,m[s+324|0]=a,m[s+325|0]=a>>>8,m[s+326|0]=a>>>16,m[s+327|0]=a>>>24,m[s+360|0]=r,m[s+361|0]=r>>>8,m[s+362|0]=r>>>16,m[s+363|0]=r>>>24,m[s+364|0]=a,m[s+365|0]=a>>>8,m[s+366|0]=a>>>16,m[s+367|0]=a>>>24,m[s+352|0]=r,m[s+353|0]=r>>>8,m[s+354|0]=r>>>16,m[s+355|0]=r>>>24,m[s+356|0]=a,m[s+357|0]=a>>>8,m[s+358|0]=a>>>16,m[s+359|0]=a>>>24,m[s+392|0]=r,m[s+393|0]=r>>>8,m[s+394|0]=r>>>16,m[s+395|0]=r>>>24,m[s+396|0]=a,m[s+397|0]=a>>>8,m[s+398|0]=a>>>16,m[s+399|0]=a>>>24,m[s+384|0]=r,m[s+385|0]=r>>>8,m[s+386|0]=r>>>16,m[s+387|0]=r>>>24,m[s+388|0]=a,m[s+389|0]=a>>>8,m[s+390|0]=a>>>16,m[s+391|0]=a>>>24,m[s+424|0]=r,m[s+425|0]=r>>>8,m[s+426|0]=r>>>16,m[s+427|0]=r>>>24,m[s+428|0]=a,m[s+429|0]=a>>>8,m[s+430|0]=a>>>16,m[s+431|0]=a>>>24,m[s+416|0]=r,m[s+417|0]=r>>>8,m[s+418|0]=r>>>16,m[s+419|0]=r>>>24,m[s+420|0]=a,m[s+421|0]=a>>>8,m[s+422|0]=a>>>16,m[s+423|0]=a>>>24,m[s+456|0]=r,m[s+457|0]=r>>>8,m[s+458|0]=r>>>16,m[s+459|0]=r>>>24,m[s+460|0]=a,m[s+461|0]=a>>>8,m[s+462|0]=a>>>16,m[s+463|0]=a>>>24,m[s+448|0]=r,m[s+449|0]=r>>>8,m[s+450|0]=r>>>16,m[s+451|0]=r>>>24,m[s+452|0]=a,m[s+453|0]=a>>>8,m[s+454|0]=a>>>16,m[s+455|0]=a>>>24,m[s+488|0]=r,m[s+489|0]=r>>>8,m[s+490|0]=r>>>16,m[s+491|0]=r>>>24,m[s+492|0]=a,m[s+493|0]=a>>>8,m[s+494|0]=a>>>16,m[s+495|0]=a>>>24,m[s+480|0]=r,m[s+481|0]=r>>>8,m[s+482|0]=r>>>16,m[s+483|0]=r>>>24,m[s+484|0]=a,m[s+485|0]=a>>>8,m[s+486|0]=a>>>16,m[s+487|0]=a>>>24}function Yi(r){r=r|0;var s=0,a=0;for(a=16;a=F[(r+s|0)+-32|0]+(F[((s<<5)+r|0)+-1|0]+a|0)|0,s=s+1|0,(s|0)!=16;);s=r,r=yr(a>>>5&255,0,16843009,16843009),a=r,m[s+8|0]=a,m[s+9|0]=a>>>8,m[s+10|0]=a>>>16,m[s+11|0]=a>>>24,r=Pn,m[s+12|0]=r,m[s+13|0]=r>>>8,m[s+14|0]=r>>>16,m[s+15|0]=r>>>24,m[s|0]=a,m[s+1|0]=a>>>8,m[s+2|0]=a>>>16,m[s+3|0]=a>>>24,m[s+4|0]=r,m[s+5|0]=r>>>8,m[s+6|0]=r>>>16,m[s+7|0]=r>>>24,m[s+32|0]=a,m[s+33|0]=a>>>8,m[s+34|0]=a>>>16,m[s+35|0]=a>>>24,m[s+36|0]=r,m[s+37|0]=r>>>8,m[s+38|0]=r>>>16,m[s+39|0]=r>>>24,m[s+40|0]=a,m[s+41|0]=a>>>8,m[s+42|0]=a>>>16,m[s+43|0]=a>>>24,m[s+44|0]=r,m[s+45|0]=r>>>8,m[s+46|0]=r>>>16,m[s+47|0]=r>>>24,m[s+64|0]=a,m[s+65|0]=a>>>8,m[s+66|0]=a>>>16,m[s+67|0]=a>>>24,m[s+68|0]=r,m[s+69|0]=r>>>8,m[s+70|0]=r>>>16,m[s+71|0]=r>>>24,m[s+72|0]=a,m[s+73|0]=a>>>8,m[s+74|0]=a>>>16,m[s+75|0]=a>>>24,m[s+76|0]=r,m[s+77|0]=r>>>8,m[s+78|0]=r>>>16,m[s+79|0]=r>>>24,m[s+96|0]=a,m[s+97|0]=a>>>8,m[s+98|0]=a>>>16,m[s+99|0]=a>>>24,m[s+100|0]=r,m[s+101|0]=r>>>8,m[s+102|0]=r>>>16,m[s+103|0]=r>>>24,m[s+104|0]=a,m[s+105|0]=a>>>8,m[s+106|0]=a>>>16,m[s+107|0]=a>>>24,m[s+108|0]=r,m[s+109|0]=r>>>8,m[s+110|0]=r>>>16,m[s+111|0]=r>>>24,m[s+128|0]=a,m[s+129|0]=a>>>8,m[s+130|0]=a>>>16,m[s+131|0]=a>>>24,m[s+132|0]=r,m[s+133|0]=r>>>8,m[s+134|0]=r>>>16,m[s+135|0]=r>>>24,m[s+136|0]=a,m[s+137|0]=a>>>8,m[s+138|0]=a>>>16,m[s+139|0]=a>>>24,m[s+140|0]=r,m[s+141|0]=r>>>8,m[s+142|0]=r>>>16,m[s+143|0]=r>>>24,m[s+160|0]=a,m[s+161|0]=a>>>8,m[s+162|0]=a>>>16,m[s+163|0]=a>>>24,m[s+164|0]=r,m[s+165|0]=r>>>8,m[s+166|0]=r>>>16,m[s+167|0]=r>>>24,m[s+168|0]=a,m[s+169|0]=a>>>8,m[s+170|0]=a>>>16,m[s+171|0]=a>>>24,m[s+172|0]=r,m[s+173|0]=r>>>8,m[s+174|0]=r>>>16,m[s+175|0]=r>>>24,m[s+192|0]=a,m[s+193|0]=a>>>8,m[s+194|0]=a>>>16,m[s+195|0]=a>>>24,m[s+196|0]=r,m[s+197|0]=r>>>8,m[s+198|0]=r>>>16,m[s+199|0]=r>>>24,m[s+200|0]=a,m[s+201|0]=a>>>8,m[s+202|0]=a>>>16,m[s+203|0]=a>>>24,m[s+204|0]=r,m[s+205|0]=r>>>8,m[s+206|0]=r>>>16,m[s+207|0]=r>>>24,m[s+232|0]=a,m[s+233|0]=a>>>8,m[s+234|0]=a>>>16,m[s+235|0]=a>>>24,m[s+236|0]=r,m[s+237|0]=r>>>8,m[s+238|0]=r>>>16,m[s+239|0]=r>>>24,m[s+224|0]=a,m[s+225|0]=a>>>8,m[s+226|0]=a>>>16,m[s+227|0]=a>>>24,m[s+228|0]=r,m[s+229|0]=r>>>8,m[s+230|0]=r>>>16,m[s+231|0]=r>>>24,m[s+264|0]=a,m[s+265|0]=a>>>8,m[s+266|0]=a>>>16,m[s+267|0]=a>>>24,m[s+268|0]=r,m[s+269|0]=r>>>8,m[s+270|0]=r>>>16,m[s+271|0]=r>>>24,m[s+256|0]=a,m[s+257|0]=a>>>8,m[s+258|0]=a>>>16,m[s+259|0]=a>>>24,m[s+260|0]=r,m[s+261|0]=r>>>8,m[s+262|0]=r>>>16,m[s+263|0]=r>>>24,m[s+296|0]=a,m[s+297|0]=a>>>8,m[s+298|0]=a>>>16,m[s+299|0]=a>>>24,m[s+300|0]=r,m[s+301|0]=r>>>8,m[s+302|0]=r>>>16,m[s+303|0]=r>>>24,m[s+288|0]=a,m[s+289|0]=a>>>8,m[s+290|0]=a>>>16,m[s+291|0]=a>>>24,m[s+292|0]=r,m[s+293|0]=r>>>8,m[s+294|0]=r>>>16,m[s+295|0]=r>>>24,m[s+328|0]=a,m[s+329|0]=a>>>8,m[s+330|0]=a>>>16,m[s+331|0]=a>>>24,m[s+332|0]=r,m[s+333|0]=r>>>8,m[s+334|0]=r>>>16,m[s+335|0]=r>>>24,m[s+320|0]=a,m[s+321|0]=a>>>8,m[s+322|0]=a>>>16,m[s+323|0]=a>>>24,m[s+324|0]=r,m[s+325|0]=r>>>8,m[s+326|0]=r>>>16,m[s+327|0]=r>>>24,m[s+360|0]=a,m[s+361|0]=a>>>8,m[s+362|0]=a>>>16,m[s+363|0]=a>>>24,m[s+364|0]=r,m[s+365|0]=r>>>8,m[s+366|0]=r>>>16,m[s+367|0]=r>>>24,m[s+352|0]=a,m[s+353|0]=a>>>8,m[s+354|0]=a>>>16,m[s+355|0]=a>>>24,m[s+356|0]=r,m[s+357|0]=r>>>8,m[s+358|0]=r>>>16,m[s+359|0]=r>>>24,m[s+392|0]=a,m[s+393|0]=a>>>8,m[s+394|0]=a>>>16,m[s+395|0]=a>>>24,m[s+396|0]=r,m[s+397|0]=r>>>8,m[s+398|0]=r>>>16,m[s+399|0]=r>>>24,m[s+384|0]=a,m[s+385|0]=a>>>8,m[s+386|0]=a>>>16,m[s+387|0]=a>>>24,m[s+388|0]=r,m[s+389|0]=r>>>8,m[s+390|0]=r>>>16,m[s+391|0]=r>>>24,m[s+424|0]=a,m[s+425|0]=a>>>8,m[s+426|0]=a>>>16,m[s+427|0]=a>>>24,m[s+428|0]=r,m[s+429|0]=r>>>8,m[s+430|0]=r>>>16,m[s+431|0]=r>>>24,m[s+416|0]=a,m[s+417|0]=a>>>8,m[s+418|0]=a>>>16,m[s+419|0]=a>>>24,m[s+420|0]=r,m[s+421|0]=r>>>8,m[s+422|0]=r>>>16,m[s+423|0]=r>>>24,m[s+456|0]=a,m[s+457|0]=a>>>8,m[s+458|0]=a>>>16,m[s+459|0]=a>>>24,m[s+460|0]=r,m[s+461|0]=r>>>8,m[s+462|0]=r>>>16,m[s+463|0]=r>>>24,m[s+448|0]=a,m[s+449|0]=a>>>8,m[s+450|0]=a>>>16,m[s+451|0]=a>>>24,m[s+452|0]=r,m[s+453|0]=r>>>8,m[s+454|0]=r>>>16,m[s+455|0]=r>>>24,m[s+488|0]=a,m[s+489|0]=a>>>8,m[s+490|0]=a>>>16,m[s+491|0]=a>>>24,m[s+492|0]=r,m[s+493|0]=r>>>8,m[s+494|0]=r>>>16,m[s+495|0]=r>>>24,m[s+480|0]=a,m[s+481|0]=a>>>8,m[s+482|0]=a>>>16,m[s+483|0]=a>>>24,m[s+484|0]=r,m[s+485|0]=r>>>8,m[s+486|0]=r>>>16,m[s+487|0]=r>>>24}function cn(r,s,a,y,S){var E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0,_s=0,Sa=0,yl=0,Ju=0,Jh=0;Jt=Fn-16|0,Fn=Jt,yt=y+120|0,he=y+24|0;e:{t:{i:{n:{o:{l:{r:{if(!a)break r;for(;;){if(!no(he,1))break r;if(E=h[y+176>>2],Ye=no(he,2),H=h[y+260>>2],R=1<<Ye,H&R)break l;h[y+260>>2]=R|H,E=re(E,20)+y|0,te=E+196|0,h[te>>2]=0,H=E+192|0,h[H>>2]=s,R=E+188|0,h[R>>2]=r,h[E+180>>2]=Ye,ke=1,h[y+176>>2]=h[y+176>>2]+1;u:switch(Ye|0){case 0:case 1:if(wi=E,E=no(he,3)+2|0,h[wi+184>>2]=E,wi=h[R>>2],R=-1<<E^-1,cn(wi+R>>>E|0,R+h[H>>2]>>>E|0,0,y,te))continue;break l;case 3:L=no(he,8)+1|0,r=0;s:{if((L|0)>16||(r=1,(L|0)>4))break s;r=(L|0)>2?2:3}if(H=h[R>>2],R=E+184|0,h[R>>2]=r,!cn(L,1,0,y,te))break l;if(Ye=(H+(1<<r)|0)+-1|0,E=1<<(8>>>h[R>>2]),G=Ms(E,0,4),G){if(H=h[te>>2],h[G>>2]=h[H>>2],ke=4,(L|0)>=2)for(R=L<<2,ke=(R|0)>5?R:5,L=4;R=L+G|0,m[R|0]=F[R+-4|0]+F[L+H|0],L=L+1|0,(ke|0)!=(L|0););R=E<<2,(R|0)>(ke|0)&&Qo(G+ke|0,0,R-ke|0),Rr(h[te>>2]),h[te>>2]=G}r=Ye>>>r|0,ke=(G|0)!=0;break;default:break u}if(!ke)break}break l}r:{if(!no(he,1)||(oi=no(he,4),oi+-1>>>0<11))break r;h[y>>2]=3,L=0;break n}h[Jt+12>>2]=0;r:{u:{s:{if(!a){Ye=1,R=1;break s}if(Ye=1,R=1,!no(he,1))break s;if(Fi=1,E=no(he,3)+2|0,R=1<<E,H=(R+r|0)+-1>>>E|0,R=(s+R|0)+-1>>>E|0,!cn(H,R,0,y,Jt+12|0))break u;if(h[y+152>>2]=E,Lt=re(R,H),(Lt|0)>=1)for(L=0,R=h[Jt+12>>2];H=R+(L<<2)|0,E=F[H+1|0]|F[H+2|0]<<8,h[H>>2]=E,Ye=(E|0)<(Ye|0)?Ye:E+1|0,L=L+1|0,(Lt|0)!=(L|0););if(!((Ye|0)>1e3|(Ye|0)>(re(r,s)|0))){R=Ye;break s}if(vn=Ms(Ye,0,4),!vn){h[y>>2]=1,vn=0;break u}if(he=Qo(vn,255,Ye<<2),(Lt|0)<1){R=0;break s}for(L=0,te=h[Jt+12>>2],R=0;G=te+(L<<2)|0,H=he+(h[G>>2]<<2)|0,E=h[H>>2],(E|0)==-1&&(h[H>>2]=R,E=R,R=E+1|0),h[G>>2]=E,L=L+1|0,(Lt|0)!=(L|0););}if(h[y+48>>2]){Fi=1;break u}if(Fi=1,Jh=1<<oi,Ju=(oi|0)>0?Jh+280|0:280,ke=iu((Ju|0)>256?Ju:256,0,4),Ki=re(dn[(oi<<1)+1184>>1],R),Ki=Ms(Ki,Ki>>31,4),yl=Ms(R,R>>31,548),!(!yl|(!Ki|!ke))){for(H=Ki;;){L=ir;s:{a:{if(!vn||(L=h[(ir<<2)+vn>>2],(L|0)!=-1))break a;if(Fi=1,!aa(Ju,y,ke,0)||!aa(256,y,ke,0)||!aa(256,y,ke,0)||!aa(256,y,ke,0))break r;if(aa(40,y,ke,0))break s;break r}for(ze=re(L,548)+yl|0,Fi=1,Rt=0,Er=0,on=1,_s=0;;){if(h[(Rt<<2)+ze>>2]=H,Lt=dn[(Rt<<1)+1208>>1]+((oi|0)>0?Rt?0:Jh:0)|0,E=aa(Lt,y,ke,H),!E)break r;a:{if(!on){on=0;break a}if(!(Rt&2147483643))break a;on=!F[H|0]}if(he=E<<2,te=F[H|0],Rt>>>0<=3){if(L=h[ke>>2],E=1,(Lt|0)>=2)for(;G=h[(E<<2)+ke>>2],L=(G|0)>(L|0)?G:L,E=E+1|0,(Lt|0)!=(E|0););Er=L+Er|0}if(H=H+he|0,_s=te+_s|0,Rt=Rt+1|0,(Rt|0)==5)break}h[ze+28>>2]=0,h[ze+20>>2]=on;a:{if(!on||(L=dn[h[ze+8>>2]+2>>1]|dn[h[ze+4>>2]+2>>1]<<16|dn[h[ze+12>>2]+2>>1]<<24,h[ze+24>>2]=L,_s)||(E=dn[h[ze>>2]+2>>1],E>>>0>255))break a;h[ze+28>>2]=1,h[ze+24>>2]=L|E<<8,h[ze+32>>2]=0;break s}if(h[ze+32>>2]=(Er|0)<6,(Er|0)>5)break s;for(Fi=ze+12|0,on=ze+8|0,Er=ze+4|0,_s=h[ze>>2],L=0;;){te=(L<<3)+ze|0,Sa=te+36|0,E=_s+(L<<2)|0,G=dn[E>>1]|dn[E+2>>1]<<16,E=G>>>16|0;a:{if(E>>>0>=256){h[Sa>>2]=G&255|256,h[te+40>>2]=E;break a}G=G&255,h[Sa>>2]=G,Rt=te+40|0,Lt=E<<8,h[Rt>>2]=Lt,he=L>>>G|0,E=h[Er>>2]+(he<<2)|0,te=F[E+2|0]|F[E+3|0]<<8,wi=G,G=F[E|0],E=wi+G|0,h[Sa>>2]=E,Lt=Lt|te<<16,h[Rt>>2]=Lt,he=he>>>G|0,te=h[on>>2]+(he<<2)|0,G=F[te+2|0]|F[te+3|0]<<8,wi=E,E=F[te|0],te=wi+E|0,h[Sa>>2]=te,G=G|Lt,h[Rt>>2]=G,he=h[Fi>>2]+(he>>>E<<2)|0,E=F[he+2|0]|F[he+3|0]<<8,h[Sa>>2]=te+F[he|0],h[Rt>>2]=G|E<<24}if(L=L+1|0,(L|0)==64)break}}if(ir=ir+1|0,(ir|0)==(Ye|0))break}ir=h[Jt+12>>2],h[y+172>>2]=Ki,h[y+168>>2]=yl,h[y+164>>2]=R,h[y+160>>2]=ir,Fi=0;break r}h[y>>2]=1;break r}ke=0}if(Rr(ke),Rr(vn),!Fi)break o;Rr(h[Jt+12>>2]),Rr(Ki),Df(yl)}h[y>>2]=3,L=0;break n}o:{if((oi|0)>=1){if(h[y+120>>2]=1<<oi,nu(y+124|0,oi))break o;h[y>>2]=1,L=0;break n}h[yt>>2]=0}if(h[y+104>>2]=s,h[y+100>>2]=r,R=h[y+152>>2],h[y+148>>2]=R?-1<<R^-1:-1,h[y+156>>2]=((1<<R)+r|0)+-1>>>R,a){h[y+4>>2]=1,L=0;break i}if(L=Ms(yr(r,r>>31,s,s>>31),Pn,4),!L){h[y>>2]=1,L=0;break n}if(!Xl(y,L,r,s,s,0))break n;if(!h[y+48>>2])break i}Rr(L),L=0;break t}if(S&&(h[S>>2]=L),h[y+112>>2]=0,L=1,a)break e}Rr(h[y+160>>2]),Rr(h[y+172>>2]),Df(h[y+168>>2]),wc(y+124|0),wc(y+136|0),h[yt+48>>2]=0,h[yt+52>>2]=0,h[yt+40>>2]=0,h[yt+44>>2]=0,h[yt+32>>2]=0,h[yt+36>>2]=0,h[yt+24>>2]=0,h[yt+28>>2]=0,h[yt+16>>2]=0,h[yt+20>>2]=0,h[yt+8>>2]=0,h[yt+12>>2]=0,h[yt>>2]=0,h[yt+4>>2]=0}return Fn=Jt+16|0,L}function Xn(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;he=F[r|0],te=F[a|0],ke=F[y|0],ze=F[S|0],Lt=F[E|0],m[L|0]=255,he=re(he,19077)>>>8|0,ze=ze|Lt<<16,te=te|ke<<16,ke=(ze+re(te,3)|0)+131074|0,Lt=ke>>>2&255,Rt=he+(re(Lt,33050)>>>8|0)|0,H=Rt+-17685|0,m[L+3|0]=H>>>0<16384?H>>>6|0:Rt>>>0<17685?0:255,ke=ke>>>18&255,Rt=he+(re(ke,26149)>>>8|0)|0,H=Rt+-14234|0,m[L+1|0]=H>>>0<16384?H>>>6|0:Rt>>>0<14234?0:255,he=he-(re(Lt,6419)>>>8|0)-(re(ke,13320)>>>8)|0,ke=he+8708|0,m[L+2|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255,s&&(he=F[s|0],m[R|0]=255,he=re(he,19077)>>>8|0,ke=(re(ze,3)+te|0)+131074|0,Lt=ke>>>2&255,Rt=he+(re(Lt,33050)>>>8|0)|0,H=Rt+-17685|0,m[R+3|0]=H>>>0<16384?H>>>6|0:Rt>>>0<17685?0:255,ke=ke>>>18&255,Rt=he+(re(ke,26149)>>>8|0)|0,H=Rt+-14234|0,m[R+1|0]=H>>>0<16384?H>>>6|0:Rt>>>0<14234?0:255,he=he-(re(Lt,6419)>>>8|0)-(re(ke,13320)>>>8)|0,ke=he+8708|0,m[R+2|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255),Rt=G+-1|0;e:{if((G|0)<3){he=ze,ke=te;break e}for(he=Rt>>1,Er=(he|0)>1?he:1,Lt=1;vn=Lt<<1,oi=vn+-1|0,Ye=F[oi+r|0],ke=F[a+Lt|0],Jt=F[y+Lt|0],he=F[S+Lt|0],on=F[E+Lt|0],ir=oi<<2,H=ir+L|0,m[H|0]=255,he=he|on<<16,ke=ke|Jt<<16,on=ze+ke|0,Jt=(he+(on+te|0)|0)+524296|0,Ye=re(Ye,19077)>>>8|0,on=Jt+(on<<1)>>>3|0,Fi=on+te|0,wi=Fi>>>1&255,Ki=Ye+(re(wi,33050)>>>8|0)|0,yt=Ki+-17685|0,m[H+3|0]=yt>>>0<16384?yt>>>6|0:Ki>>>0<17685?0:255,Fi=Fi>>>17&255,Ki=Ye+(re(Fi,26149)>>>8|0)|0,yt=Ki+-14234|0,m[H+1|0]=yt>>>0<16384?yt>>>6|0:Ki>>>0<14234?0:255,yt=H,H=Ye-(re(wi,6419)>>>8|0)-(re(Fi,13320)>>>8)|0,Ye=H+8708|0,m[yt+2|0]=Ye>>>0<16384?Ye>>>6|0:(H|0)<-8708?0:255,Ye=F[r+vn|0],Fi=Lt<<3,H=Fi+L|0,m[H|0]=255,Jt=Jt+(te+he<<1)>>>3|0,wi=Jt+ke|0,Ki=wi>>>1&255,te=re(Ye,19077)>>>8|0,Ye=(re(Ki,33050)>>>8|0)+te|0,yt=Ye+-17685|0,m[H+3|0]=yt>>>0<16384?yt>>>6|0:Ye>>>0<17685?0:255,Ye=wi>>>17&255,wi=te+(re(Ye,26149)>>>8|0)|0,yt=wi+-14234|0,m[H+1|0]=yt>>>0<16384?yt>>>6|0:wi>>>0<14234?0:255,yt=H,te=te-(re(Ki,6419)>>>8|0)-(re(Ye,13320)>>>8)|0,H=te+8708|0,m[yt+2|0]=H>>>0<16384?H>>>6|0:(te|0)<-8708?0:255,s&&(H=F[s+oi|0],te=R+ir|0,m[te|0]=255,oi=ze+Jt|0,Jt=oi>>>1&255,ze=re(H,19077)>>>8|0,H=(re(Jt,33050)>>>8|0)+ze|0,Ye=H+-17685|0,m[te+3|0]=Ye>>>0<16384?Ye>>>6|0:H>>>0<17685?0:255,H=oi>>>17&255,oi=ze+(re(H,26149)>>>8|0)|0,Ye=oi+-14234|0,m[te+1|0]=Ye>>>0<16384?Ye>>>6|0:oi>>>0<14234?0:255,yt=te,te=ze-(re(Jt,6419)>>>8|0)-(re(H,13320)>>>8)|0,ze=te+8708|0,m[yt+2|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255,ze=F[s+vn|0],te=R+Fi|0,m[te|0]=255,ze=re(ze,19077)>>>8|0,H=he+on|0,vn=H>>>1&255,oi=ze+(re(vn,33050)>>>8|0)|0,Jt=oi+-17685|0,m[te+3|0]=Jt>>>0<16384?Jt>>>6|0:oi>>>0<17685?0:255,H=H>>>17&255,oi=ze+(re(H,26149)>>>8|0)|0,Jt=oi+-14234|0,m[te+1|0]=Jt>>>0<16384?Jt>>>6|0:oi>>>0<14234?0:255,yt=te,te=ze-(re(vn,6419)>>>8|0)-(re(H,13320)>>>8)|0,ze=te+8708|0,m[yt+2|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255),H=(Lt|0)!=(Er|0),Lt=Lt+1|0,te=ke,ze=he,!!H;);}e:{if(G&1||(a=F[r+Rt|0],y=Rt<<2,r=y+L|0,m[r|0]=255,a=re(a,19077)>>>8|0,S=(re(ke,3)+he|0)+131074|0,E=S>>>2&255,L=a+(re(E,33050)>>>8|0)|0,G=L+-17685|0,m[r+3|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,S=S>>>18&255,L=a+(re(S,26149)>>>8|0)|0,G=L+-14234|0,m[r+1|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,L=r,r=a-(re(E,6419)>>>8|0)-(re(S,13320)>>>8)|0,a=r+8708|0,m[L+2|0]=a>>>0<16384?a>>>6|0:(r|0)<-8708?0:255,!s))break e;s=F[s+Rt|0],r=y+R|0,m[r|0]=255,s=re(s,19077)>>>8|0,a=(re(he,3)+ke|0)+131074|0,y=a>>>2&255,S=s+(re(y,33050)>>>8|0)|0,E=S+-17685|0,m[r+3|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,a=a>>>18&255,S=s+(re(a,26149)>>>8|0)|0,E=S+-14234|0,m[r+1|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,S=r,r=s-(re(y,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[S+2|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255}}function wr(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;he=F[r|0],te=F[a|0],ke=F[y|0],ze=F[S|0],Lt=F[E|0],m[L+3|0]=255,he=re(he,19077)>>>8|0,ze=ze|Lt<<16,te=te|ke<<16,ke=(ze+re(te,3)|0)+131074|0,Lt=ke>>>2&255,Rt=he+(re(Lt,33050)>>>8|0)|0,H=Rt+-17685|0,m[L+2|0]=H>>>0<16384?H>>>6|0:Rt>>>0<17685?0:255,ke=ke>>>18&255,Rt=he+(re(ke,26149)>>>8|0)|0,H=Rt+-14234|0,m[L|0]=H>>>0<16384?H>>>6|0:Rt>>>0<14234?0:255,he=he-(re(Lt,6419)>>>8|0)-(re(ke,13320)>>>8)|0,ke=he+8708|0,m[L+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255,s&&(he=F[s|0],m[R+3|0]=255,he=re(he,19077)>>>8|0,ke=(re(ze,3)+te|0)+131074|0,Lt=ke>>>2&255,Rt=he+(re(Lt,33050)>>>8|0)|0,H=Rt+-17685|0,m[R+2|0]=H>>>0<16384?H>>>6|0:Rt>>>0<17685?0:255,ke=ke>>>18&255,Rt=he+(re(ke,26149)>>>8|0)|0,H=Rt+-14234|0,m[R|0]=H>>>0<16384?H>>>6|0:Rt>>>0<14234?0:255,he=he-(re(Lt,6419)>>>8|0)-(re(ke,13320)>>>8)|0,ke=he+8708|0,m[R+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255),Rt=G+-1|0;e:{if((G|0)<3){he=ze,ke=te;break e}for(he=Rt>>1,Er=(he|0)>1?he:1,Lt=1;vn=Lt<<1,oi=vn+-1|0,Ye=F[oi+r|0],ke=F[a+Lt|0],Jt=F[y+Lt|0],he=F[S+Lt|0],on=F[E+Lt|0],ir=oi<<2,H=ir+L|0,m[H+3|0]=255,he=he|on<<16,ke=ke|Jt<<16,on=ze+ke|0,Jt=(he+(on+te|0)|0)+524296|0,Ye=re(Ye,19077)>>>8|0,on=Jt+(on<<1)>>>3|0,Fi=on+te|0,wi=Fi>>>1&255,Ki=Ye+(re(wi,33050)>>>8|0)|0,yt=Ki+-17685|0,m[H+2|0]=yt>>>0<16384?yt>>>6|0:Ki>>>0<17685?0:255,Fi=Fi>>>17&255,Ki=Ye+(re(Fi,26149)>>>8|0)|0,yt=Ki+-14234|0,m[H|0]=yt>>>0<16384?yt>>>6|0:Ki>>>0<14234?0:255,yt=H,H=Ye-(re(wi,6419)>>>8|0)-(re(Fi,13320)>>>8)|0,Ye=H+8708|0,m[yt+1|0]=Ye>>>0<16384?Ye>>>6|0:(H|0)<-8708?0:255,Ye=F[r+vn|0],Fi=Lt<<3,H=Fi+L|0,m[H+3|0]=255,Jt=Jt+(te+he<<1)>>>3|0,wi=Jt+ke|0,Ki=wi>>>1&255,te=re(Ye,19077)>>>8|0,Ye=(re(Ki,33050)>>>8|0)+te|0,yt=Ye+-17685|0,m[H+2|0]=yt>>>0<16384?yt>>>6|0:Ye>>>0<17685?0:255,Ye=wi>>>17&255,wi=te+(re(Ye,26149)>>>8|0)|0,yt=wi+-14234|0,m[H|0]=yt>>>0<16384?yt>>>6|0:wi>>>0<14234?0:255,yt=H,te=te-(re(Ki,6419)>>>8|0)-(re(Ye,13320)>>>8)|0,H=te+8708|0,m[yt+1|0]=H>>>0<16384?H>>>6|0:(te|0)<-8708?0:255,s&&(H=F[s+oi|0],te=R+ir|0,m[te+3|0]=255,oi=ze+Jt|0,Jt=oi>>>1&255,ze=re(H,19077)>>>8|0,H=(re(Jt,33050)>>>8|0)+ze|0,Ye=H+-17685|0,m[te+2|0]=Ye>>>0<16384?Ye>>>6|0:H>>>0<17685?0:255,H=oi>>>17&255,oi=ze+(re(H,26149)>>>8|0)|0,Ye=oi+-14234|0,m[te|0]=Ye>>>0<16384?Ye>>>6|0:oi>>>0<14234?0:255,yt=te,te=ze-(re(Jt,6419)>>>8|0)-(re(H,13320)>>>8)|0,ze=te+8708|0,m[yt+1|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255,ze=F[s+vn|0],te=R+Fi|0,m[te+3|0]=255,ze=re(ze,19077)>>>8|0,H=he+on|0,vn=H>>>1&255,oi=ze+(re(vn,33050)>>>8|0)|0,Jt=oi+-17685|0,m[te+2|0]=Jt>>>0<16384?Jt>>>6|0:oi>>>0<17685?0:255,H=H>>>17&255,oi=ze+(re(H,26149)>>>8|0)|0,Jt=oi+-14234|0,m[te|0]=Jt>>>0<16384?Jt>>>6|0:oi>>>0<14234?0:255,yt=te,te=ze-(re(vn,6419)>>>8|0)-(re(H,13320)>>>8)|0,ze=te+8708|0,m[yt+1|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255),H=(Lt|0)!=(Er|0),Lt=Lt+1|0,te=ke,ze=he,!!H;);}e:{if(G&1||(a=F[r+Rt|0],y=Rt<<2,r=y+L|0,m[r+3|0]=255,a=re(a,19077)>>>8|0,S=(re(ke,3)+he|0)+131074|0,E=S>>>2&255,L=a+(re(E,33050)>>>8|0)|0,G=L+-17685|0,m[r+2|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,S=S>>>18&255,L=a+(re(S,26149)>>>8|0)|0,G=L+-14234|0,m[r|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,L=r,r=a-(re(E,6419)>>>8|0)-(re(S,13320)>>>8)|0,a=r+8708|0,m[L+1|0]=a>>>0<16384?a>>>6|0:(r|0)<-8708?0:255,!s))break e;s=F[s+Rt|0],r=y+R|0,m[r+3|0]=255,s=re(s,19077)>>>8|0,a=(re(he,3)+ke|0)+131074|0,y=a>>>2&255,S=s+(re(y,33050)>>>8|0)|0,E=S+-17685|0,m[r+2|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,a=a>>>18&255,S=s+(re(a,26149)>>>8|0)|0,E=S+-14234|0,m[r|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,S=r,r=s-(re(y,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[S+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255}}function Fr(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;he=F[r|0],te=F[a|0],ke=F[y|0],ze=F[S|0],Lt=F[E|0],m[L+3|0]=255,he=re(he,19077)>>>8|0,ze=ze|Lt<<16,te=te|ke<<16,ke=(ze+re(te,3)|0)+131074|0,Lt=ke>>>18&255,Rt=he+(re(Lt,26149)>>>8|0)|0,H=Rt+-14234|0,m[L+2|0]=H>>>0<16384?H>>>6|0:Rt>>>0<14234?0:255,ke=ke>>>2&255,Rt=he+(re(ke,33050)>>>8|0)|0,H=Rt+-17685|0,m[L|0]=H>>>0<16384?H>>>6|0:Rt>>>0<17685?0:255,he=he-(re(ke,6419)>>>8|0)-(re(Lt,13320)>>>8)|0,ke=he+8708|0,m[L+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255,s&&(he=F[s|0],m[R+3|0]=255,he=re(he,19077)>>>8|0,ke=(re(ze,3)+te|0)+131074|0,Lt=ke>>>18&255,Rt=he+(re(Lt,26149)>>>8|0)|0,H=Rt+-14234|0,m[R+2|0]=H>>>0<16384?H>>>6|0:Rt>>>0<14234?0:255,ke=ke>>>2&255,Rt=he+(re(ke,33050)>>>8|0)|0,H=Rt+-17685|0,m[R|0]=H>>>0<16384?H>>>6|0:Rt>>>0<17685?0:255,he=he-(re(ke,6419)>>>8|0)-(re(Lt,13320)>>>8)|0,ke=he+8708|0,m[R+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255),Rt=G+-1|0;e:{if((G|0)<3){he=ze,ke=te;break e}for(he=Rt>>1,Er=(he|0)>1?he:1,Lt=1;vn=Lt<<1,oi=vn+-1|0,Ye=F[oi+r|0],ke=F[a+Lt|0],Jt=F[y+Lt|0],he=F[S+Lt|0],on=F[E+Lt|0],ir=oi<<2,H=ir+L|0,m[H+3|0]=255,he=he|on<<16,ke=ke|Jt<<16,on=ze+ke|0,Jt=(he+(on+te|0)|0)+524296|0,Ye=re(Ye,19077)>>>8|0,on=Jt+(on<<1)>>>3|0,Fi=on+te|0,wi=Fi>>>17&255,Ki=Ye+(re(wi,26149)>>>8|0)|0,yt=Ki+-14234|0,m[H+2|0]=yt>>>0<16384?yt>>>6|0:Ki>>>0<14234?0:255,Fi=Fi>>>1&255,Ki=Ye+(re(Fi,33050)>>>8|0)|0,yt=Ki+-17685|0,m[H|0]=yt>>>0<16384?yt>>>6|0:Ki>>>0<17685?0:255,yt=H,H=Ye-(re(Fi,6419)>>>8|0)-(re(wi,13320)>>>8)|0,Ye=H+8708|0,m[yt+1|0]=Ye>>>0<16384?Ye>>>6|0:(H|0)<-8708?0:255,Ye=F[r+vn|0],Fi=Lt<<3,H=Fi+L|0,m[H+3|0]=255,Jt=Jt+(te+he<<1)>>>3|0,wi=Jt+ke|0,Ki=wi>>>17&255,te=re(Ye,19077)>>>8|0,Ye=(re(Ki,26149)>>>8|0)+te|0,yt=Ye+-14234|0,m[H+2|0]=yt>>>0<16384?yt>>>6|0:Ye>>>0<14234?0:255,Ye=wi>>>1&255,wi=te+(re(Ye,33050)>>>8|0)|0,yt=wi+-17685|0,m[H|0]=yt>>>0<16384?yt>>>6|0:wi>>>0<17685?0:255,yt=H,te=te-(re(Ye,6419)>>>8|0)-(re(Ki,13320)>>>8)|0,H=te+8708|0,m[yt+1|0]=H>>>0<16384?H>>>6|0:(te|0)<-8708?0:255,s&&(H=F[s+oi|0],te=R+ir|0,m[te+3|0]=255,oi=ze+Jt|0,Jt=oi>>>17&255,ze=re(H,19077)>>>8|0,H=(re(Jt,26149)>>>8|0)+ze|0,Ye=H+-14234|0,m[te+2|0]=Ye>>>0<16384?Ye>>>6|0:H>>>0<14234?0:255,H=oi>>>1&255,oi=ze+(re(H,33050)>>>8|0)|0,Ye=oi+-17685|0,m[te|0]=Ye>>>0<16384?Ye>>>6|0:oi>>>0<17685?0:255,yt=te,te=ze-(re(H,6419)>>>8|0)-(re(Jt,13320)>>>8)|0,ze=te+8708|0,m[yt+1|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255,ze=F[s+vn|0],te=R+Fi|0,m[te+3|0]=255,ze=re(ze,19077)>>>8|0,H=he+on|0,vn=H>>>17&255,oi=ze+(re(vn,26149)>>>8|0)|0,Jt=oi+-14234|0,m[te+2|0]=Jt>>>0<16384?Jt>>>6|0:oi>>>0<14234?0:255,H=H>>>1&255,oi=ze+(re(H,33050)>>>8|0)|0,Jt=oi+-17685|0,m[te|0]=Jt>>>0<16384?Jt>>>6|0:oi>>>0<17685?0:255,yt=te,te=ze-(re(H,6419)>>>8|0)-(re(vn,13320)>>>8)|0,ze=te+8708|0,m[yt+1|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255),H=(Lt|0)!=(Er|0),Lt=Lt+1|0,te=ke,ze=he,!!H;);}e:{if(G&1||(a=F[r+Rt|0],y=Rt<<2,r=y+L|0,m[r+3|0]=255,a=re(a,19077)>>>8|0,S=(re(ke,3)+he|0)+131074|0,E=S>>>18&255,L=a+(re(E,26149)>>>8|0)|0,G=L+-14234|0,m[r+2|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,S=S>>>2&255,L=a+(re(S,33050)>>>8|0)|0,G=L+-17685|0,m[r|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=r,r=a-(re(S,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=r+8708|0,m[L+1|0]=a>>>0<16384?a>>>6|0:(r|0)<-8708?0:255,!s))break e;s=F[s+Rt|0],r=y+R|0,m[r+3|0]=255,s=re(s,19077)>>>8|0,a=(re(he,3)+ke|0)+131074|0,y=a>>>18&255,S=s+(re(y,26149)>>>8|0)|0,E=S+-14234|0,m[r+2|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,a=a>>>2&255,S=s+(re(a,33050)>>>8|0)|0,E=S+-17685|0,m[r|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,S=r,r=s-(re(a,6419)>>>8|0)-(re(y,13320)>>>8)|0,s=r+8708|0,m[S+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255}}function Gr(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;ke=re(F[r|0],19077)>>>8|0,ze=F[S|0]|F[E|0]<<16,H=F[a|0]|F[y|0]<<16,he=(ze+re(H,3)|0)+131074|0,Lt=he>>>2&255,he=he>>>18|0,yt=ke-(re(Lt,6419)>>>8|0)-(re(he,13320)>>>8)|0,te=yt+8708|0,yt=te>>>0<16384?te>>6:(yt|0)<-8708?0:255,he=ke+(re(he,26149)>>>8|0)|0,te=he+-14234|0,m[L|0]=yt>>>5|(te>>>0<16384?te>>>6|0:he>>>0<14234?0:248)&248,ke=ke+(re(Lt,33050)>>>8|0)|0,he=ke+-17685|0,m[L+1|0]=yt<<3&224|(he>>>0<16384?he>>>9|0:ke>>>0<17685?0:31),s&&(ke=re(F[s|0],19077)>>>8|0,he=(re(ze,3)+H|0)+131074|0,Lt=he>>>2&255,he=he>>>18|0,yt=ke-(re(Lt,6419)>>>8|0)-(re(he,13320)>>>8)|0,te=yt+8708|0,yt=te>>>0<16384?te>>6:(yt|0)<-8708?0:255,he=ke+(re(he,26149)>>>8|0)|0,te=he+-14234|0,m[R|0]=yt>>>5|(te>>>0<16384?te>>>6|0:he>>>0<14234?0:248)&248,ke=ke+(re(Lt,33050)>>>8|0)|0,he=ke+-17685|0,m[R+1|0]=yt<<3&224|(he>>>0<16384?he>>>9|0:ke>>>0<17685?0:31)),yt=G+-1|0;e:{if((G|0)<3){ke=ze,he=H;break e}for(ke=yt>>1,Er=(ke|0)>1?ke:1,Lt=1;ke=F[S+Lt|0]|F[E+Lt|0]<<16,he=F[a+Lt|0]|F[y+Lt|0]<<16,vn=he+ze|0,te=(ke+(vn+H|0)|0)+524296|0,on=Lt<<1,Rt=on+-1|0,wi=Rt<<1,Ki=wi+L|0,Ye=re(F[r+Rt|0],19077)>>>8|0,vn=te+(vn<<1)>>>3|0,oi=vn+H|0,ir=oi>>>1&255,oi=oi>>>17|0,Fi=Ye-(re(ir,6419)>>>8|0)-(re(oi,13320)>>>8)|0,Jt=Fi+8708|0,Fi=Jt>>>0<16384?Jt>>6:(Fi|0)<-8708?0:255,oi=Ye+(re(oi,26149)>>>8|0)|0,Jt=oi+-14234|0,m[Ki|0]=Fi>>>5|(Jt>>>0<16384?Jt>>>6|0:oi>>>0<14234?0:248)&248,Jt=Ki,Ye=Ye+(re(ir,33050)>>>8|0)|0,Ki=Ye+-17685|0,m[Jt+1|0]=Fi<<3&224|(Ki>>>0<16384?Ki>>>9|0:Ye>>>0<17685?0:31),Ki=Lt<<2,oi=Ki+L|0,Ye=re(F[r+on|0],19077)>>>8|0,te=te+(H+ke<<1)>>>3|0,H=te+he|0,ir=H>>>1&255,H=H>>>17|0,Fi=Ye-(re(ir,6419)>>>8|0)-(re(H,13320)>>>8)|0,Jt=Fi+8708|0,Fi=Jt>>>0<16384?Jt>>6:(Fi|0)<-8708?0:255,H=Ye+(re(H,26149)>>>8|0)|0,Jt=H+-14234|0,m[oi|0]=Fi>>>5|(Jt>>>0<16384?Jt>>>6|0:H>>>0<14234?0:248)&248,H=Ye+(re(ir,33050)>>>8|0)|0,Ye=H+-17685|0,m[oi+1|0]=Fi<<3&224|(Ye>>>0<16384?Ye>>>9|0:H>>>0<17685?0:31),s&&(Ye=R+wi|0,H=re(F[s+Rt|0],19077)>>>8|0,ze=te+ze|0,te=ze>>>1&255,ze=ze>>>17|0,Rt=H-(re(te,6419)>>>8|0)-(re(ze,13320)>>>8)|0,wi=Rt+8708|0,Rt=wi>>>0<16384?wi>>6:(Rt|0)<-8708?0:255,ze=H+(re(ze,26149)>>>8|0)|0,wi=ze+-14234|0,m[Ye|0]=Rt>>>5|(wi>>>0<16384?wi>>>6|0:ze>>>0<14234?0:248)&248,H=H+(re(te,33050)>>>8|0)|0,ze=H+-17685|0,m[Ye+1|0]=Rt<<3&224|(ze>>>0<16384?ze>>>9|0:H>>>0<17685?0:31),ze=R+Ki|0,H=re(F[s+on|0],19077)>>>8|0,te=ke+vn|0,on=te>>>1&255,te=te>>>17|0,Rt=H-(re(on,6419)>>>8|0)-(re(te,13320)>>>8)|0,Ye=Rt+8708|0,Rt=Ye>>>0<16384?Ye>>6:(Rt|0)<-8708?0:255,te=H+(re(te,26149)>>>8|0)|0,Ye=te+-14234|0,m[ze|0]=Rt>>>5|(Ye>>>0<16384?Ye>>>6|0:te>>>0<14234?0:248)&248,Jt=ze,H=H+(re(on,33050)>>>8|0)|0,ze=H+-17685|0,m[Jt+1|0]=Rt<<3&224|(ze>>>0<16384?ze>>>9|0:H>>>0<17685?0:31)),te=(Lt|0)!=(Er|0),Lt=Lt+1|0,H=he,ze=ke,!!te;);}e:{if(G&1||(a=yt<<1,y=a+L|0,r=re(F[r+yt|0],19077)>>>8|0,S=(re(he,3)+ke|0)+131074|0,E=S>>>2&255,S=S>>>18|0,L=r-(re(E,6419)>>>8|0)-(re(S,13320)>>>8)|0,G=L+8708|0,L=G>>>0<16384?G>>6:(L|0)<-8708?0:255,S=r+(re(S,26149)>>>8|0)|0,G=S+-14234|0,m[y|0]=L>>>5|(G>>>0<16384?G>>>6|0:S>>>0<14234?0:248)&248,S=y,r=r+(re(E,33050)>>>8|0)|0,y=r+-17685|0,m[S+1|0]=L<<3&224|(y>>>0<16384?y>>>9|0:r>>>0<17685?0:31),!s))break e;a=a+R|0,r=re(F[s+yt|0],19077)>>>8|0,s=(re(ke,3)+he|0)+131074|0,y=s>>>2&255,s=s>>>18|0,S=r-(re(y,6419)>>>8|0)-(re(s,13320)>>>8)|0,E=S+8708|0,S=E>>>0<16384?E>>6:(S|0)<-8708?0:255,s=r+(re(s,26149)>>>8|0)|0,E=s+-14234|0,m[a|0]=S>>>5|(E>>>0<16384?E>>>6|0:s>>>0<14234?0:248)&248,r=r+(re(y,33050)>>>8|0)|0,s=r+-17685|0,m[a+1|0]=S<<3&224|(s>>>0<16384?s>>>9|0:r>>>0<17685?0:31)}}function eo(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;he=re(F[r|0],19077)>>>8|0,ke=F[S|0]|F[E|0]<<16,H=F[a|0]|F[y|0]<<16,ze=(ke+re(H,3)|0)+131074|0,yt=ze>>>2&255,Lt=he+(re(yt,33050)>>>8|0)|0,te=Lt+-17685|0,m[L+1|0]=(te>>>0<16384?te>>>6|0:Lt>>>0<17685?0:240)|15,ze=ze>>>18|0,yt=he-(re(yt,6419)>>>8|0)-(re(ze,13320)>>>8)|0,Lt=yt+8708|0,he=he+(re(ze,26149)>>>8|0)|0,ze=he+-14234|0,m[L|0]=(Lt>>>0<16384?Lt>>>10|0:(yt|0)<-8708?0:15)|(ze>>>0<16384?ze>>>6|0:he>>>0<14234?0:240)&240,s&&(he=re(F[s|0],19077)>>>8|0,ze=(re(ke,3)+H|0)+131074|0,yt=ze>>>2&255,Lt=he+(re(yt,33050)>>>8|0)|0,te=Lt+-17685|0,m[R+1|0]=(te>>>0<16384?te>>>6|0:Lt>>>0<17685?0:240)|15,ze=ze>>>18|0,Lt=he+(re(ze,26149)>>>8|0)|0,te=Lt+-14234|0,he=he-(re(yt,6419)>>>8|0)-(re(ze,13320)>>>8)|0,ze=he+8708|0,m[R|0]=(te>>>0<16384?te>>>6|0:Lt>>>0<14234?0:240)&240|(ze>>>0<16384?ze>>>10|0:(he|0)<-8708?0:15)),Lt=G+-1|0;e:{if((G|0)<3){he=ke,ze=H;break e}for(he=Lt>>1,Er=(he|0)>1?he:1,yt=1;he=F[S+yt|0]|F[E+yt|0]<<16,ze=F[a+yt|0]|F[y+yt|0]<<16,Rt=ze+ke|0,te=(he+(Rt+H|0)|0)+524296|0,wi=yt<<1,Jt=wi+-1|0,on=Jt<<1,Ye=on+L|0,ir=te+(Rt<<1)>>>3|0,oi=ir+H|0,Fi=oi>>>1&255,Rt=re(F[r+Jt|0],19077)>>>8|0,vn=(re(Fi,33050)>>>8|0)+Rt|0,Ki=vn+-17685|0,m[Ye+1|0]=(Ki>>>0<16384?Ki>>>6|0:vn>>>0<17685?0:240)|15,Ki=Ye,Ye=oi>>>17|0,oi=Rt-(re(Fi,6419)>>>8|0)-(re(Ye,13320)>>>8)|0,Fi=oi+8708|0,Rt=Rt+(re(Ye,26149)>>>8|0)|0,Ye=Rt+-14234|0,m[Ki|0]=(Fi>>>0<16384?Fi>>>10|0:(oi|0)<-8708?0:15)|(Ye>>>0<16384?Ye>>>6|0:Rt>>>0<14234?0:240)&240,Rt=yt<<2,Ye=Rt+L|0,te=te+(H+he<<1)>>>3|0,oi=te+ze|0,Fi=oi>>>1&255,H=re(F[r+wi|0],19077)>>>8|0,vn=(re(Fi,33050)>>>8|0)+H|0,Ki=vn+-17685|0,m[Ye+1|0]=(Ki>>>0<16384?Ki>>>6|0:vn>>>0<17685?0:240)|15,Ki=Ye,Ye=oi>>>17|0,oi=H-(re(Fi,6419)>>>8|0)-(re(Ye,13320)>>>8)|0,Fi=oi+8708|0,H=H+(re(Ye,26149)>>>8|0)|0,Ye=H+-14234|0,m[Ki|0]=(Fi>>>0<16384?Fi>>>10|0:(oi|0)<-8708?0:15)|(Ye>>>0<16384?Ye>>>6|0:H>>>0<14234?0:240)&240,s&&(on=R+on|0,H=re(F[s+Jt|0],19077)>>>8|0,ke=te+ke|0,te=ke>>>1&255,Jt=H+(re(te,33050)>>>8|0)|0,Ye=Jt+-17685|0,m[on+1|0]=(Ye>>>0<16384?Ye>>>6|0:Jt>>>0<17685?0:240)|15,Ye=on,ke=ke>>>17|0,Jt=H+(re(ke,26149)>>>8|0)|0,on=Jt+-14234|0,H=H-(re(te,6419)>>>8|0)-(re(ke,13320)>>>8)|0,ke=H+8708|0,m[Ye|0]=(on>>>0<16384?on>>>6|0:Jt>>>0<14234?0:240)&240|(ke>>>0<16384?ke>>>10|0:(H|0)<-8708?0:15),ke=R+Rt|0,H=re(F[s+wi|0],19077)>>>8|0,te=he+ir|0,Jt=te>>>1&255,wi=H+(re(Jt,33050)>>>8|0)|0,Rt=wi+-17685|0,m[ke+1|0]=(Rt>>>0<16384?Rt>>>6|0:wi>>>0<17685?0:240)|15,Ye=ke,ke=te>>>17|0,te=H+(re(ke,26149)>>>8|0)|0,wi=te+-14234|0,H=H-(re(Jt,6419)>>>8|0)-(re(ke,13320)>>>8)|0,ke=H+8708|0,m[Ye|0]=(wi>>>0<16384?wi>>>6|0:te>>>0<14234?0:240)&240|(ke>>>0<16384?ke>>>10|0:(H|0)<-8708?0:15)),te=(yt|0)!=(Er|0),yt=yt+1|0,H=ze,ke=he,!!te;);}e:{if(G&1||(a=Lt<<1,y=a+L|0,r=re(F[r+Lt|0],19077)>>>8|0,S=(re(ze,3)+he|0)+131074|0,E=S>>>2&255,L=r+(re(E,33050)>>>8|0)|0,G=L+-17685|0,m[y+1|0]=(G>>>0<16384?G>>>6|0:L>>>0<17685?0:240)|15,G=y,y=S>>>18|0,S=r+(re(y,26149)>>>8|0)|0,L=S+-14234|0,r=r-(re(E,6419)>>>8|0)-(re(y,13320)>>>8)|0,y=r+8708|0,m[G|0]=(L>>>0<16384?L>>>6|0:S>>>0<14234?0:240)&240|(y>>>0<16384?y>>>10|0:(r|0)<-8708?0:15),!s))break e;a=a+R|0,r=re(F[s+Lt|0],19077)>>>8|0,y=(re(he,3)+ze|0)+131074|0,S=y>>>2&255,s=r+(re(S,33050)>>>8|0)|0,E=s+-17685|0,m[a+1|0]=(E>>>0<16384?E>>>6|0:s>>>0<17685?0:240)|15,E=a,s=y>>>18|0,a=r+(re(s,26149)>>>8|0)|0,y=a+-14234|0,r=r-(re(S,6419)>>>8|0)-(re(s,13320)>>>8)|0,s=r+8708|0,m[E|0]=(y>>>0<16384?y>>>6|0:a>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(r|0)<-8708?0:15)}}function zo(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;he=re(F[r|0],19077)>>>8|0,Ye=F[S|0]|F[E|0]<<16,te=F[a|0]|F[y|0]<<16,ke=(Ye+re(te,3)|0)+131074|0,Rt=ke>>>18|0,Lt=he+(re(Rt,26149)>>>8|0)|0,H=Lt+-14234|0,m[L|0]=H>>>0<16384?H>>>6|0:Lt>>>0<14234?0:255,ke=ke>>>2&255,Lt=he+(re(ke,33050)>>>8|0)|0,H=Lt+-17685|0,m[L+2|0]=H>>>0<16384?H>>>6|0:Lt>>>0<17685?0:255,he=he-(re(ke,6419)>>>8|0)-(re(Rt,13320)>>>8)|0,ke=he+8708|0,m[L+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255,s&&(he=re(F[s|0],19077)>>>8|0,ke=(re(Ye,3)+te|0)+131074|0,Rt=ke>>>18|0,Lt=he+(re(Rt,26149)>>>8|0)|0,H=Lt+-14234|0,m[R|0]=H>>>0<16384?H>>>6|0:Lt>>>0<14234?0:255,ke=ke>>>2&255,Lt=he+(re(ke,33050)>>>8|0)|0,H=Lt+-17685|0,m[R+2|0]=H>>>0<16384?H>>>6|0:Lt>>>0<17685?0:255,he=he-(re(ke,6419)>>>8|0)-(re(Rt,13320)>>>8)|0,ke=he+8708|0,m[R+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255),Lt=G+-1|0;e:{if((G|0)<3){he=Ye,ke=te;break e}for(he=Lt>>1,Er=(he|0)>1?he:1,Rt=1;he=F[S+Rt|0]|F[E+Rt|0]<<16,ke=F[a+Rt|0]|F[y+Rt|0]<<16,Jt=ke+Ye|0,H=(he+(Jt+te|0)|0)+524296|0,Ki=Rt<<1,oi=Ki+-1|0,on=re(oi,3),ze=on+L|0,ir=H+(Jt<<1)>>>3|0,Fi=ir+te|0,vn=Fi>>>17|0,Jt=re(F[r+oi|0],19077)>>>8|0,yt=(re(vn,26149)>>>8|0)+Jt|0,wi=yt+-14234|0,m[ze|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<14234?0:255,Fi=Fi>>>1&255,yt=Jt+(re(Fi,33050)>>>8|0)|0,wi=yt+-17685|0,m[ze+2|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<17685?0:255,yt=ze,ze=Jt-(re(Fi,6419)>>>8|0)-(re(vn,13320)>>>8)|0,Jt=ze+8708|0,m[yt+1|0]=Jt>>>0<16384?Jt>>>6|0:(ze|0)<-8708?0:255,Jt=re(Rt,6),ze=Jt+L|0,H=H+(te+he<<1)>>>3|0,Fi=H+ke|0,vn=Fi>>>1&255,te=re(F[r+Ki|0],19077)>>>8|0,yt=(re(vn,33050)>>>8|0)+te|0,wi=yt+-17685|0,m[ze+2|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<17685?0:255,Fi=Fi>>>17|0,yt=te+(re(Fi,26149)>>>8|0)|0,wi=yt+-14234|0,m[ze|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<14234?0:255,yt=ze,te=te-(re(vn,6419)>>>8|0)-(re(Fi,13320)>>>8)|0,ze=te+8708|0,m[yt+1|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255,s&&(te=R+on|0,H=H+Ye|0,ze=H>>>17|0,Ye=re(F[s+oi|0],19077)>>>8|0,oi=(re(ze,26149)>>>8|0)+Ye|0,on=oi+-14234|0,m[te|0]=on>>>0<16384?on>>>6|0:oi>>>0<14234?0:255,H=H>>>1&255,oi=Ye+(re(H,33050)>>>8|0)|0,on=oi+-17685|0,m[te+2|0]=on>>>0<16384?on>>>6|0:oi>>>0<17685?0:255,yt=te,te=Ye-(re(H,6419)>>>8|0)-(re(ze,13320)>>>8)|0,Ye=te+8708|0,m[yt+1|0]=Ye>>>0<16384?Ye>>>6|0:(te|0)<-8708?0:255,te=R+Jt|0,Ye=re(F[s+Ki|0],19077)>>>8|0,H=he+ir|0,oi=H>>>1&255,Ki=Ye+(re(oi,33050)>>>8|0)|0,ze=Ki+-17685|0,m[te+2|0]=ze>>>0<16384?ze>>>6|0:Ki>>>0<17685?0:255,H=H>>>17|0,Ki=Ye+(re(H,26149)>>>8|0)|0,ze=Ki+-14234|0,m[te|0]=ze>>>0<16384?ze>>>6|0:Ki>>>0<14234?0:255,ze=te,te=Ye-(re(oi,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ye=te+8708|0,m[ze+1|0]=Ye>>>0<16384?Ye>>>6|0:(te|0)<-8708?0:255),H=(Rt|0)!=(Er|0),Rt=Rt+1|0,te=ke,Ye=he,!!H;);}e:{if(G&1||(y=re(Lt,3),a=y+L|0,r=re(F[r+Lt|0],19077)>>>8|0,S=(re(ke,3)+he|0)+131074|0,E=S>>>18|0,L=r+(re(E,26149)>>>8|0)|0,G=L+-14234|0,m[a|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,S=S>>>2&255,L=r+(re(S,33050)>>>8|0)|0,G=L+-17685|0,m[a+2|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=a,r=r-(re(S,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=r+8708|0,m[L+1|0]=a>>>0<16384?a>>>6|0:(r|0)<-8708?0:255,!s))break e;r=y+R|0,s=re(F[s+Lt|0],19077)>>>8|0,a=(re(he,3)+ke|0)+131074|0,y=a>>>18|0,S=s+(re(y,26149)>>>8|0)|0,E=S+-14234|0,m[r|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,a=a>>>2&255,S=s+(re(a,33050)>>>8|0)|0,E=S+-17685|0,m[r+2|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,S=r,r=s-(re(a,6419)>>>8|0)-(re(y,13320)>>>8)|0,s=r+8708|0,m[S+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255}}function Go(r,s,a,y,S,E,L,R,G){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;he=re(F[r|0],19077)>>>8|0,Ye=F[S|0]|F[E|0]<<16,te=F[a|0]|F[y|0]<<16,ke=(Ye+re(te,3)|0)+131074|0,Rt=ke>>>18|0,Lt=he+(re(Rt,26149)>>>8|0)|0,H=Lt+-14234|0,m[L+2|0]=H>>>0<16384?H>>>6|0:Lt>>>0<14234?0:255,ke=ke>>>2&255,Lt=he+(re(ke,33050)>>>8|0)|0,H=Lt+-17685|0,m[L|0]=H>>>0<16384?H>>>6|0:Lt>>>0<17685?0:255,he=he-(re(ke,6419)>>>8|0)-(re(Rt,13320)>>>8)|0,ke=he+8708|0,m[L+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255,s&&(he=re(F[s|0],19077)>>>8|0,ke=(re(Ye,3)+te|0)+131074|0,Rt=ke>>>18|0,Lt=he+(re(Rt,26149)>>>8|0)|0,H=Lt+-14234|0,m[R+2|0]=H>>>0<16384?H>>>6|0:Lt>>>0<14234?0:255,ke=ke>>>2&255,Lt=he+(re(ke,33050)>>>8|0)|0,H=Lt+-17685|0,m[R|0]=H>>>0<16384?H>>>6|0:Lt>>>0<17685?0:255,he=he-(re(ke,6419)>>>8|0)-(re(Rt,13320)>>>8)|0,ke=he+8708|0,m[R+1|0]=ke>>>0<16384?ke>>>6|0:(he|0)<-8708?0:255),Lt=G+-1|0;e:{if((G|0)<3){he=Ye,ke=te;break e}for(he=Lt>>1,Er=(he|0)>1?he:1,Rt=1;he=F[S+Rt|0]|F[E+Rt|0]<<16,ke=F[a+Rt|0]|F[y+Rt|0]<<16,Jt=ke+Ye|0,H=(he+(Jt+te|0)|0)+524296|0,Ki=Rt<<1,oi=Ki+-1|0,on=re(oi,3),ze=on+L|0,ir=H+(Jt<<1)>>>3|0,Fi=ir+te|0,vn=Fi>>>17|0,Jt=re(F[r+oi|0],19077)>>>8|0,yt=(re(vn,26149)>>>8|0)+Jt|0,wi=yt+-14234|0,m[ze+2|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<14234?0:255,Fi=Fi>>>1&255,yt=Jt+(re(Fi,33050)>>>8|0)|0,wi=yt+-17685|0,m[ze|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<17685?0:255,yt=ze,ze=Jt-(re(Fi,6419)>>>8|0)-(re(vn,13320)>>>8)|0,Jt=ze+8708|0,m[yt+1|0]=Jt>>>0<16384?Jt>>>6|0:(ze|0)<-8708?0:255,Jt=re(Rt,6),ze=Jt+L|0,H=H+(te+he<<1)>>>3|0,Fi=H+ke|0,vn=Fi>>>17|0,te=re(F[r+Ki|0],19077)>>>8|0,yt=(re(vn,26149)>>>8|0)+te|0,wi=yt+-14234|0,m[ze+2|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<14234?0:255,Fi=Fi>>>1&255,yt=te+(re(Fi,33050)>>>8|0)|0,wi=yt+-17685|0,m[ze|0]=wi>>>0<16384?wi>>>6|0:yt>>>0<17685?0:255,yt=ze,te=te-(re(Fi,6419)>>>8|0)-(re(vn,13320)>>>8)|0,ze=te+8708|0,m[yt+1|0]=ze>>>0<16384?ze>>>6|0:(te|0)<-8708?0:255,s&&(te=R+on|0,H=H+Ye|0,ze=H>>>17|0,Ye=re(F[s+oi|0],19077)>>>8|0,oi=(re(ze,26149)>>>8|0)+Ye|0,on=oi+-14234|0,m[te+2|0]=on>>>0<16384?on>>>6|0:oi>>>0<14234?0:255,H=H>>>1&255,oi=Ye+(re(H,33050)>>>8|0)|0,on=oi+-17685|0,m[te|0]=on>>>0<16384?on>>>6|0:oi>>>0<17685?0:255,yt=te,te=Ye-(re(H,6419)>>>8|0)-(re(ze,13320)>>>8)|0,Ye=te+8708|0,m[yt+1|0]=Ye>>>0<16384?Ye>>>6|0:(te|0)<-8708?0:255,te=R+Jt|0,Ye=re(F[s+Ki|0],19077)>>>8|0,H=he+ir|0,oi=H>>>17|0,Ki=Ye+(re(oi,26149)>>>8|0)|0,ze=Ki+-14234|0,m[te+2|0]=ze>>>0<16384?ze>>>6|0:Ki>>>0<14234?0:255,H=H>>>1&255,Ki=Ye+(re(H,33050)>>>8|0)|0,ze=Ki+-17685|0,m[te|0]=ze>>>0<16384?ze>>>6|0:Ki>>>0<17685?0:255,ze=te,te=Ye-(re(H,6419)>>>8|0)-(re(oi,13320)>>>8)|0,Ye=te+8708|0,m[ze+1|0]=Ye>>>0<16384?Ye>>>6|0:(te|0)<-8708?0:255),H=(Rt|0)!=(Er|0),Rt=Rt+1|0,te=ke,Ye=he,!!H;);}e:{if(G&1||(y=re(Lt,3),a=y+L|0,r=re(F[r+Lt|0],19077)>>>8|0,S=(re(ke,3)+he|0)+131074|0,E=S>>>18|0,L=r+(re(E,26149)>>>8|0)|0,G=L+-14234|0,m[a+2|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,S=S>>>2&255,L=r+(re(S,33050)>>>8|0)|0,G=L+-17685|0,m[a|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=a,r=r-(re(S,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=r+8708|0,m[L+1|0]=a>>>0<16384?a>>>6|0:(r|0)<-8708?0:255,!s))break e;r=y+R|0,s=re(F[s+Lt|0],19077)>>>8|0,a=(re(he,3)+ke|0)+131074|0,y=a>>>18|0,S=s+(re(y,26149)>>>8|0)|0,E=S+-14234|0,m[r+2|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,a=a>>>2&255,S=s+(re(a,33050)>>>8|0)|0,E=S+-17685|0,m[r|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,S=r,r=s-(re(a,6419)>>>8|0)-(re(y,13320)>>>8)|0,s=r+8708|0,m[S+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255}}function Yo(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0;e:{if(!r)break e;if(h[r>>2]=0,h[r+8>>2]=5010,!s){h[r>>2]=2,h[r+4>>2]=0,h[r+8>>2]=5013;break e}if(R=h[s+60>>2],R>>>0<=3){h[r>>2]=7,h[r+4>>2]=0,h[r+8>>2]=5050;break e}if(a=h[s+64>>2],S=F[a+1|0],E=F[a+2|0],y=F[a|0],L=y>>>4&1,m[r+42|0]=L,G=y>>>1&7,m[r+41|0]=G,H=(y^-1)&1,m[r+40|0]=H,y=(y|S<<8|E<<16)>>>5|0,h[r+44>>2]=y,G>>>0>=4){h[r>>2]=3,h[r+4>>2]=0,h[r+8>>2]=5068;break e}if(!L){h[r>>2]=4,h[r+4>>2]=0,h[r+8>>2]=5099;break e}if(S=R+-3|0,E=a+3|0,H){if(S>>>0<=6){h[r>>2]=7,h[r+4>>2]=0,h[r+8>>2]=5122;break e}if(!(F[a+5|0]==42&&!(F[E|0]!=157|F[a+4|0]!=1))){h[r>>2]=3,h[r+4>>2]=0,h[r+8>>2]=5150;break e}y=F[a+6|0]|F[a+7|0]<<8&16128,Ri[r+48>>1]=y,m[r+52|0]=F[a+7|0]>>>6,S=F[a+8|0]|F[a+9|0]<<8&16128,Ri[r+50>>1]=S,E=F[a+9|0],h[r+292>>2]=S+15>>>4,h[r+288>>2]=y+15>>>4,m[r+53|0]=E>>>6,h[s+84>>2]=0,h[s+4>>2]=S,h[s>>2]=y,h[s+100>>2]=S,h[s+96>>2]=y,h[s+92>>2]=0,h[s+88>>2]=S,h[s+80>>2]=y,h[s+72>>2]=0,h[s+76>>2]=0,h[s+16>>2]=S,h[s+12>>2]=y,s=r+904|0,Ri[s>>1]=-1,m[s+2|0]=-1,h[r+120>>2]=0,h[r+112>>2]=1,h[r+116>>2]=0,h[r+104>>2]=0,h[r+108>>2]=0,S=R+-10|0,E=a+10|0,y=h[r+44>>2]}t:{if(y>>>0>S>>>0){if(s=0,h[r>>2])break t;h[r>>2]=7,h[r+4>>2]=0,h[r+8>>2]=5164;break e}a=r+12|0,Cr(a,E,y),L=h[r+44>>2],F[r+40|0]&&(he=r,ke=Ir(a,1),m[he+54|0]=ke,he=r,ke=Ir(a,1),m[he+55|0]=ke),s=Ir(a,1),h[r+104>>2]=s;i:{if(s){if(he=r,ke=Ir(a,1),h[he+108>>2]=ke,Ir(a,1)&&(he=r,ke=Ir(a,1),h[he+112>>2]=ke,s=r,Ir(a,1)?y=Us(a,7):y=0,m[s+116|0]=y,s=r,Ir(a,1)?y=Us(a,7):y=0,m[s+117|0]=y,s=r,Ir(a,1)?y=Us(a,7):y=0,m[s+118|0]=y,s=r,Ir(a,1)?y=Us(a,7):y=0,m[s+119|0]=y,s=r,Ir(a,1)?y=Us(a,6):y=0,m[s+120|0]=y,s=r,Ir(a,1)?y=Us(a,6):y=0,m[s+121|0]=y,s=r,Ir(a,1)?y=Us(a,6):y=0,m[s+122|0]=y,s=r,Ir(a,1)?y=Us(a,6):y=0,m[s+123|0]=y),!h[r+108>>2])break i;s=r,Ir(a,1)?y=Ir(a,8):y=255,m[s+904|0]=y,s=r,Ir(a,1)?y=Ir(a,8):y=255,m[s+905|0]=y,s=r,y=255;n:{if(!Ir(a,1))break n;y=Ir(a,8)}m[s+906|0]=y;break i}h[r+108>>2]=0}if(h[r+36>>2]){if(s=0,h[r>>2])break t;h[r>>2]=3,h[r+4>>2]=0,h[r+8>>2]=5185;break e}he=r,ke=Ir(a,1),h[he+56>>2]=ke,he=r,ke=Ir(a,6),h[he+60>>2]=ke,he=r- -64|0,ke=Ir(a,3),h[he>>2]=ke,s=Ir(a,1),h[r+68>>2]=s;i:{if(!s||!Ir(a,1)||(Ir(a,1)&&(he=r,ke=Us(a,6),h[he+72>>2]=ke),Ir(a,1)&&(he=r,ke=Us(a,6),h[he+76>>2]=ke),Ir(a,1)&&(he=r,ke=Us(a,6),h[he+80>>2]=ke),Ir(a,1)&&(he=r,ke=Us(a,6),h[he+84>>2]=ke),Ir(a,1)&&(he=r,ke=Us(a,6),h[he+88>>2]=ke),Ir(a,1)&&(he=r,ke=Us(a,6),h[he+92>>2]=ke),Ir(a,1)&&(he=r,ke=Us(a,6),h[he+96>>2]=ke),!Ir(a,1)))break i;he=r,ke=Us(a,6),h[he+100>>2]=ke}if(s=r,h[r+60>>2]?y=h[r+56>>2]?1:2:y=0,h[s+2308>>2]=y,h[r+36>>2]){if(s=0,h[r>>2])break t;h[r>>2]=3,h[r+4>>2]=0,h[r+8>>2]=5213;break e}H=Ir(a,2),R=-1<<H^-1,h[r+312>>2]=R,y=7;i:{if(s=S-L|0,G=re(R,3),s>>>0>=G>>>0){if(te=S+E|0,y=s-G|0,s=E+L|0,E=G+s|0,H)for(G=R>>>0>1?R:1,S=0;L=F[s|0]|F[s+1|0]<<8|F[s+2|0]<<16,L=L>>>0>y>>>0?y:L,Cr((re(S,28)+r|0)+316|0,E,L),y=y-L|0,E=E+L|0,s=s+3|0,S=S+1|0,(G|0)!=(S|0););if(Cr((re(R,28)+r|0)+316|0,E,y),y=5,E>>>0<te>>>0)break i}if(s=0,h[r>>2])break t;h[r>>2]=y,h[r+4>>2]=0,h[r+8>>2]=5240;break e}if(xu(r),!F[r+40|0]){if(s=0,h[r>>2])break t;h[r>>2]=4,h[r+4>>2]=0,h[r+8>>2]=5264;break e}Ir(a,1),Oa(a,r),h[r+4>>2]=1,s=1}return s}return 0}function Is(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0;if(S=h[r+20>>2],h[S+108>>2]<(s|0)){e:{if(!h[r+132>>2]&&(fc(),!h[r+132>>2]))break e;ke=h[S+100>>2],oi=re(ke,h[S+104>>2]),G=h[S+112>>2],r=(G|0)/(ke|0)|0,Jt=re(s,ke);t:{i:{if((G|0)>=(Jt|0)){Ye=S+48|0;break i}H=G-re(r,ke)|0,L=h[S+152>>2],E=0;n:{if(!L)break n;E=h[h[S+160>>2]+(re(h[S+156>>2],r>>L)+(H>>L)<<2)>>2]}if(Ye=S+48|0,h[Ye>>2])break i;for(Fi=h[S+148>>2],wi=h[S+16>>2],yt=S+24|0,Rt=h[S+168>>2]+re(E,548)|0;;){if(!(H&Fi)){a=h[S+168>>2],L=h[S+152>>2],E=0;n:{if(!L)break n;E=h[h[S+160>>2]+(re(h[S+156>>2],r>>L)+(H>>L)<<2)>>2]}Rt=a+re(E,548)|0}y=h[S+44>>2],(y|0)>=32&&(Ce(yt),y=h[S+44>>2]),te=S,E=h[yt+4>>2],a=E,R=y&63,L=R&31,Lt=h[yt>>2],a=h[Rt>>2]+(((32<=(R&63)>>>0?a>>>L|0:((1<<L)-1&a)<<32-L|Lt>>>L)&255)<<2)|0,L=F[a|0],L>>>0>=9&&(y=y+8|0,h[S+44>>2]=y,R=(dn[a+2>>1]<<2)+a|0,a=E,ze=y&63,he=ze&31,a=R+(((-1<<L+-8^-1)&(32<=ze>>>0?a>>>he|0:((1<<he)-1&a)<<32-he|Lt>>>he))<<2)|0,L=F[a|0]),R=(L&255)+y|0,h[te+44>>2]=R,a=dn[a+2>>1];n:{if(a>>>0<=255){if(m[G+wi|0]=a,G=G+1|0,H=H+1|0,(H|0)<(ke|0))break n;if(E=r+1|0,H=0,(r|0)>=(s|0)){r=E;break n}if(E&15){r=E;break n}B(S,E),r=E;break n}if(te=1,a>>>0>279)break t;L=a+-256|0,a>>>0>=260&&(E=a+-258>>1,L=no(yt,E)+((L&1|2)<<E)|0,Lt=h[S+24>>2],R=h[S+44>>2],E=h[S+28>>2]),he=S,a=E,ze=R&63,y=ze&31,y=h[Rt+16>>2]+(((32<=ze>>>0?a>>>y|0:((1<<y)-1&a)<<32-y|Lt>>>y)&255)<<2)|0,a=F[y|0],a>>>0>=9&&(R=R+8|0,h[S+44>>2]=R,Ki=(dn[y+2>>1]<<2)+y|0,ze=R&63,y=ze&31,y=Ki+(((-1<<a+-8^-1)&(32<=ze>>>0?E>>>y|0:((1<<y)-1&E)<<32-y|Lt>>>y))<<2)|0,a=F[y|0]),E=(a&255)+R|0,h[he+44>>2]=E,y=dn[y+2>>1],(E|0)>=32&&Ce(yt),E=L+1|0,y>>>0>=4&&(a=y+-2>>1,y=no(yt,a)+((y&1|2)<<a)|0);o:{if((y+1|0)>=121){a=y+-119|0;break o}a=F[y+1264|0],a=(re(a>>>4|0,ke)-(a&15)|0)+8|0,a=(a|0)>1?a:1}if((oi-G|0)<(E|0)|(G|0)<(a|0))break t;y=G+wi|0,R=y-a|0;o:{l:{if((E|0)<8)break l;r:{u:switch(a+-1|0){case 0:a=F[R|0],te=re(a,16843009);break r;case 1:a=F[R|0]|F[R+1|0]<<8,te=re(a,65537);break r;case 3:break u;default:break l}a=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),te=a}r:{u:{s:{if(y&3){if(m[y|0]=a,te=Aa(te,24),R=R+1|0,y=y+1|0,y&3)break s;a=L>>>2|0;break u}L=E,a=L>>>2|0;break u}for(;m[y|0]=F[R|0],he=L,L=L+-1|0,te=Aa(te,24),R=R+1|0,y=y+1|0,!!(y&3););if(a=0,(he|0)<5)break r;a=L>>2}for(he=(a|0)>1?a:1,a=0;h[(a<<2)+y>>2]=te,a=a+1|0,(he|0)!=(a|0););a=he<<2}if((a|0)>=(L|0))break o;for(;m[a+y|0]=F[a+R|0],a=a+1|0,(L|0)!=(a|0););break o}if((a|0)<(E|0)){if(a=0,(E|0)<=0)break o;for(;m[a+y|0]=F[a+R|0],te=(a|0)!=(L|0),a=a+1|0,!!te;);break o}Wr(y,R,E)}if(G=E+G|0,H=E+H|0,(H|0)>=(ke|0))for(;H=H-ke|0,E=r,r=E+1|0,r&15|(E|0)>=(s|0)||B(S,r),(H|0)>=(ke|0););if(!(H&Fi)|(G|0)>=(Jt|0))break n;a=h[S+168>>2],L=h[S+152>>2],E=0;o:{if(!L)break o;E=h[h[S+160>>2]+(re(h[S+156>>2],r>>L)+(H>>L)<<2)>>2]}Rt=a+re(E,548)|0}if(h[Ye>>2]){h[Ye>>2]=1;break i}if(y=0,y=h[S+40>>2]==h[S+36>>2]?h[S+44>>2]>64:y,h[Ye>>2]=y,(G|0)>=(Jt|0))break i;if(!!y)break}}B(S,(r|0)>(s|0)?s:r),te=0}s=Ye,E=s,r=1;t:{if(h[s>>2]||(r=0,h[S+40>>2]!=h[S+36>>2]))break t;r=h[S+44>>2]>64}return h[E>>2]=r,!r|(oi|0)<=(G|0)&&!te?(h[S+112>>2]=G,1):(h[S>>2]=r?5:3,0)}r=Xl(S,h[S+16>>2],h[S+100>>2],h[S+104>>2],s,1)}else r=1;return r}function ms(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0;oi=Fn+-64|0,Fn=oi,S=h[r+2280>>2],vn=h[r+160>>2],Lt=h[r+2268>>2],E=h[r+2284>>2],Ki=F[h[r+2308>>2]+4863|0],a=Ki>>>1|0,ze=h[r+2276>>2],Fi=h[r+2272>>2],Er=h[r+308>>2],on=h[r+164>>2],h[r+148>>2]==2&&Nu(r,r+160|0),L=re(S,vn),ir=re(S,Ki),y=re(E,vn),wi=re(a,E);e:{if(!h[r+168>>2]||(a=h[r+296>>2],(a|0)>=h[r+304>>2]))break e;for(Ye=h[r+164>>2];;){he=h[r+172>>2]+(a<<2)|0,R=F[he|0];t:{if(!R)break t;if(E=h[r+160>>2],H=h[r+2280>>2],G=(h[r+2268>>2]+(re(E,H)<<4)|0)+(a<<4)|0,h[r+2308>>2]==1){if((a|0)>=1&&dt[h[2717]](G,H,R+4|0),F[he+2|0]&&dt[h[2719]](G,H,R),E=he+2|0,(Ye|0)>=1&&dt[h[2716]](G,H,R+4|0),!F[E|0])break t;dt[h[2718]](G,H,R);break t}if(te=F[he+1|0],Rt=h[r+2284>>2],S=re(Rt,E)<<3,E=a<<3,Jt=(S+h[r+2276>>2]|0)+E|0,yt=E+(S+h[r+2272>>2]|0)|0,ke=F[he+3|0],(a|0)>=1&&(E=R+4|0,dt[h[2709]](G,H,E,te,ke),dt[h[2711]](yt,Jt,Rt,E,te,ke)),F[he+2|0]&&(dt[h[2713]](G,H,R,te,ke),dt[h[2715]](yt,Jt,Rt,R,te,ke)),S=he+2|0,(Ye|0)>=1&&(E=R+4|0,dt[h[2708]](G,H,E,te,ke),dt[h[2710]](yt,Jt,Rt,E,te,ke)),!F[S|0])break t;dt[h[2712]](G,H,R,te,ke),dt[h[2714]](yt,Jt,Rt,R,te,ke)}if(a=a+1|0,!((a|0)<h[r+304>>2]))break}}ke=L<<4,yt=Lt-ir|0,H=y<<3,Ye=ze-wi|0,Lt=Fi-wi|0;e:{if(!h[r+540>>2]||(G=h[r+296>>2],y=h[r+304>>2],(G|0)>=(y|0)))break e;for(te=r+552|0;;){if(a=h[r+176>>2]+re(G,800)|0,S=F[a+796|0],S>>>0>=4){for(ze=a+796|0,he=h[r+2284>>2],Rt=re(he,h[r+160>>2])<<3,Fi=h[r+2276>>2],E=h[r+2272>>2],R=h[r+548>>2],L=h[r+544>>2],y=0;a=te+(L<<2)|0,Jt=h[a>>2]-h[te+(R<<2)>>2]|0,h[a>>2]=Jt&2147483647,a=h[r+544>>2]+1|0,L=(a|0)==55?0:a,h[r+544>>2]=L,a=h[r+548>>2]+1|0,R=(a|0)==55?0:a,h[r+548>>2]=R,m[y+oi|0]=re(S,Jt<<1>>24)>>>8^128,y=y+1|0,(y|0)!=64;);for(S=G<<3,dt[h[2720]](oi,S+(E+Rt|0)|0,he),E=F[ze|0],R=h[r+548>>2],L=h[r+544>>2],y=0;a=te+(L<<2)|0,ze=h[a>>2]-h[te+(R<<2)>>2]|0,h[a>>2]=ze&2147483647,a=h[r+544>>2]+1|0,L=(a|0)==55?0:a,h[r+544>>2]=L,a=h[r+548>>2]+1|0,R=(a|0)==55?0:a,h[r+548>>2]=R,m[y+oi|0]=re(E,ze<<1>>24)>>>8^128,y=y+1|0,(y|0)!=64;);dt[h[2720]](oi,S+(Rt+Fi|0)|0,he),y=h[r+304>>2]}if(G=G+1|0,!((G|0)<(y|0)))break}}yt=ke+yt|0,E=H+Ye|0,ze=H+Lt|0,Fi=Er+-1|0;e:{t:{y=1;i:{if(!h[s+44>>2])break i;a=on<<4,S=a+16|0;n:{if(on){h[s+24>>2]=ze,h[s+20>>2]=yt,L=E,a=a-Ki|0;break n}h[s+20>>2]=ke+h[r+2268>>2],h[s+24>>2]=H+h[r+2272>>2],L=H+h[r+2276>>2]|0,a=0}if(h[s+28>>2]=L,L=0,h[s+104>>2]=0,y=h[s+88>>2],S=S-((on|0)>=(Fi|0)?0:Ki)|0,Ye=(S|0)>(y|0)?y:S,!(!h[r+2348>>2]|(Ye|0)<=(a|0))&&(L=Rs(r,s,a,Ye-a|0),h[s+104>>2]=L,!L))break t;if(S=h[s+84>>2],(S|0)>(a|0)){y=S-a|0,h[s+20>>2]=h[s+20>>2]+re(y,h[r+2280>>2]),a=re(h[r+2284>>2],y>>1),h[s+24>>2]=a+h[s+24>>2],h[s+28>>2]=a+h[s+28>>2];n:{if(!L){L=0;break n}L=re(y,h[s>>2])+L|0,h[s+104>>2]=L}a=S}if(y=1,(Ye|0)<=(a|0))break i;Lt=h[s+76>>2],h[s+20>>2]=Lt+h[s+20>>2],y=Lt>>1,h[s+24>>2]=y+h[s+24>>2],h[s+28>>2]=y+h[s+28>>2],L&&(h[s+104>>2]=L+Lt),h[s+8>>2]=a-S,h[s+16>>2]=Ye-a,h[s+12>>2]=h[s+80>>2]-Lt,y=dt[h[s+44>>2]](s)|0}if(h[r+156>>2]!=(vn+1|0)|(on|0)>=(Fi|0))break e;Wr(h[r+2268>>2]-ir|0,yt+(h[r+2280>>2]<<4)|0,ir),s=0-wi|0,Wr(s+h[r+2272>>2]|0,ze+(h[r+2284>>2]<<3)|0,wi),Wr(s+h[r+2276>>2]|0,E+(h[r+2284>>2]<<3)|0,wi);break e}y=$o(r,3,4912)}return Fn=oi- -64|0,y|0}function Rr(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0;e:{if(!r)break e;y=r+-8|0,a=h[r+-4>>2],r=a&-8,E=y+r|0;t:{if(a&1)break t;if(!(a&3)||(a=h[y>>2],y=y-a|0,y>>>0<Zn[2888]))break e;if(r=r+a|0,h[2889]!=(y|0)){if(a>>>0<=255){if(S=h[y+8>>2],a=a>>>3|0,s=h[y+12>>2],(s|0)==(S|0)){G=11536,H=h[2884]&Aa(-2,a),h[G>>2]=H;break t}h[S+12>>2]=s,h[s+8>>2]=S;break t}R=h[y+24>>2],a=h[y+12>>2];i:{if((a|0)!=(y|0)){s=h[y+8>>2],h[s+12>>2]=a,h[a+8>>2]=s;break i}n:{if(S=y+20|0,s=h[S>>2],s||(S=y+16|0,s=h[S>>2],s))break n;a=0;break i}for(;L=S,a=s,S=a+20|0,s=h[S>>2],!(!s&&(S=a+16|0,s=h[a+16>>2],!s)););h[L>>2]=0}if(!R)break t;S=h[y+28>>2],s=(S<<2)+11840|0;i:{if(h[s>>2]==(y|0)){if(h[s>>2]=a,a)break i;G=11540,H=h[2885]&Aa(-2,S),h[G>>2]=H;break t}if(h[R+(h[R+16>>2]==(y|0)?16:20)>>2]=a,!a)break t}if(h[a+24>>2]=R,s=h[y+16>>2],s&&(h[a+16>>2]=s,h[s+24>>2]=a),s=h[y+20>>2],!s)break t;h[a+20>>2]=s,h[s+24>>2]=a;break t}if(a=h[E+4>>2],(a&3)!=3)break t;h[2886]=r,h[E+4>>2]=a&-2,h[y+4>>2]=r|1,h[r+y>>2]=r;return}if(E>>>0<=y>>>0||(a=h[E+4>>2],!(a&1)))break e;t:{if(!(a&2)){if((E|0)==h[2890]){if(h[2890]=y,r=h[2887]+r|0,h[2887]=r,h[y+4>>2]=r|1,h[2889]!=(y|0))break e;h[2886]=0,h[2889]=0;return}if((E|0)==h[2889]){h[2889]=y,r=h[2886]+r|0,h[2886]=r,h[y+4>>2]=r|1,h[r+y>>2]=r;return}r=(a&-8)+r|0;i:{if(a>>>0<=255){if(s=h[E+8>>2],a=a>>>3|0,S=h[E+12>>2],(s|0)==(S|0)){G=11536,H=h[2884]&Aa(-2,a),h[G>>2]=H;break i}h[s+12>>2]=S,h[S+8>>2]=s;break i}R=h[E+24>>2],a=h[E+12>>2];n:{if((E|0)!=(a|0)){s=h[E+8>>2],h[s+12>>2]=a,h[a+8>>2]=s;break n}o:{if(S=E+20|0,s=h[S>>2],s||(S=E+16|0,s=h[S>>2],s))break o;a=0;break n}for(;L=S,a=s,S=a+20|0,s=h[S>>2],!(!s&&(S=a+16|0,s=h[a+16>>2],!s)););h[L>>2]=0}if(!R)break i;S=h[E+28>>2],s=(S<<2)+11840|0;n:{if((E|0)==h[s>>2]){if(h[s>>2]=a,a)break n;G=11540,H=h[2885]&Aa(-2,S),h[G>>2]=H;break i}if(h[R+((E|0)==h[R+16>>2]?16:20)>>2]=a,!a)break i}if(h[a+24>>2]=R,s=h[E+16>>2],s&&(h[a+16>>2]=s,h[s+24>>2]=a),s=h[E+20>>2],!s)break i;h[a+20>>2]=s,h[s+24>>2]=a}if(h[y+4>>2]=r|1,h[r+y>>2]=r,h[2889]!=(y|0))break t;h[2886]=r;return}h[E+4>>2]=a&-2,h[y+4>>2]=r|1,h[r+y>>2]=r}if(r>>>0<=255){r=r>>>3|0,a=(r<<3)+11576|0,s=h[2884],r=1<<r;t:{if(!(s&r)){h[2884]=r|s,r=a;break t}r=h[a+8>>2]}h[a+8>>2]=y,h[r+12>>2]=y,h[y+12>>2]=a,h[y+8>>2]=r;return}h[y+16>>2]=0,h[y+20>>2]=0,E=y,S=r>>>8|0,s=0;t:{if(!S||(s=31,r>>>0>16777215))break t;a=S,S=S+1048320>>>16&8,s=a<<S,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(S|R))|0,s=(s<<1|r>>>s+21&1)+28|0}h[E+28>>2]=s,L=(s<<2)+11840|0;t:{i:{S=h[2885],a=1<<s;n:{if(!(S&a)){h[2885]=a|S,h[L>>2]=y,h[y+24>>2]=L;break n}for(S=r<<((s|0)==31?0:25-(s>>>1|0)|0),a=h[L>>2];;){if(s=a,(h[a+4>>2]&-8)==(r|0))break i;if(a=S>>>29|0,S=S<<1,L=(s+(a&4)|0)+16|0,a=h[L>>2],!a)break}h[L>>2]=y,h[y+24>>2]=s}h[y+12>>2]=y,h[y+8>>2]=y;break t}r=h[s+8>>2],h[r+12>>2]=y,h[s+8>>2]=y,h[y+24>>2]=0,h[y+12>>2]=s,h[y+8>>2]=r}if(r=h[2892]+-1|0,h[2892]=r,r)break e;for(y=11992;r=h[y>>2],y=r+8|0,!!r;);h[2892]=-1}}function Ts(r,s,a,y,S){var E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0;R=Fn-128|0,h[R+120>>2]=0,h[R+124>>2]=0,h[R+112>>2]=0,h[R+116>>2]=0,h[R+104>>2]=0,h[R+108>>2]=0,h[R+96>>2]=0,h[R+100>>2]=0,h[R+88>>2]=0,h[R+92>>2]=0,h[R+80>>2]=0,h[R+84>>2]=0,h[R+72>>2]=0,h[R+76>>2]=0,h[R+64>>2]=0,h[R+68>>2]=0;e:{if((y|0)>=1){for(;;){if(L=h[(E<<2)+a>>2],(L|0)>15)break e;if(L=(R- -64|0)+(L<<2)|0,h[L>>2]=h[L>>2]+1,E=E+1|0,(E|0)==(y|0))break}E=h[R+64>>2]}else E=0;if((E|0)==(y|0)||(h[R+4>>2]=0,E=h[R+68>>2],(E|0)>2)||(h[R+8>>2]=E,L=h[R+72>>2],(L|0)>4)||(E=E+L|0,h[R+12>>2]=E,L=h[R+76>>2],(L|0)>8)||(E=E+L|0,h[R+16>>2]=E,L=h[R+80>>2],(L|0)>16)||(E=E+L|0,h[R+20>>2]=E,L=h[R+84>>2],(L|0)>32)||(E=E+L|0,h[R+24>>2]=E,L=h[R+88>>2],(L|0)>64)||(E=E+L|0,h[R+28>>2]=E,L=h[R+92>>2],(L|0)>128)||(E=E+L|0,h[R+32>>2]=E,L=h[R+96>>2],(L|0)>256)||(E=E+L|0,h[R+36>>2]=E,L=h[R+100>>2],(L|0)>512)||(E=E+L|0,h[R+40>>2]=E,L=h[R+104>>2],(L|0)>1024)||(E=E+L|0,h[R+44>>2]=E,L=h[R+108>>2],(L|0)>2048)||(E=E+L|0,h[R+48>>2]=E,L=h[R+112>>2],(L|0)>4096)||(E=E+L|0,h[R+52>>2]=E,L=h[R+116>>2],(L|0)>8192)||(E=E+L|0,h[R+56>>2]=E,L=h[R+120>>2],(L|0)>16384))break e;if(h[R+60>>2]=E+L,E=0,(y|0)>0)for(;;){L=h[(E<<2)+a>>2];t:{if((L|0)<1)break t;if(S){G=R+(L<<2)|0,L=h[G>>2],h[G>>2]=L+1,Ri[(L<<1)+S>>1]=E;break t}L=R+(L<<2)|0,h[L>>2]=h[L>>2]+1}if(E=E+1|0,(E|0)==(y|0))break}if(L=1<<s,yt=1,he=h[R+60>>2],(he|0)==1){if(!S)return L;for(a=dn[S>>1]<<16,E=L;s=E+-1|0,y=(s<<2)+r|0,Ri[y>>1]=a,Ri[y+2>>1]=a>>>16,y=(E|0)>1,E=s,!!y;);return L}Jt=1;t:{i:{if((s|0)<1)break i;for(ze=2,E=1;;){if(Ye=yt<<1,oi=(R- -64|0)+(E<<2)|0,y=h[oi>>2],yt=Ye-y|0,(yt|0)<0)break e;if(a=E,!(!r|(y|0)<1)){for(G=y+ke|0,Fi=a&255,te=1<<a+-1;;){for(wi=(H<<2)+r|0,y=Fi|dn[(ke<<1)+S>>1]<<16,E=L;E=E-ze|0,Lt=wi+(E<<2)|0,Ri[Lt>>1]=y,Ri[Lt+2>>1]=y>>>16,(E|0)>0;);for(y=te;E=y,y=E>>>1|0,!!(E&H););if(H=E?E+(E+-1&H)|0:H,ke=ke+1|0,(G|0)==(ke|0))break}h[oi>>2]=0,ke=G}if(Jt=Ye+Jt|0,ze=ze<<1,E=a+1|0,(s|0)==(a|0))break}if((s|0)<=14)break i;Ye=L;break t}for(vn=L+-1|0,G=s,te=-1,ze=2,he=r,Ye=L;;){if(Rt=0,oi=G,Ki=yt<<1,G=G+1|0,Lt=(R- -64|0)+(G<<2)|0,a=h[Lt>>2],yt=Ki-a|0,(yt|0)<0)break e;if(!(!r|(a|0)<1))for(wi=1<<oi,Rt=G-s|0,ir=Rt&255,Fi=1<<Rt,E=te;;){te=H&vn;i:{if((te|0)==(E|0)){te=E;break i}if(he=(L<<2)+he|0,L=Fi,E=Rt,(oi|0)<=13){E=G,y=E,a=Fi-a|0;n:{if((a|0)<1)break n;for(;;){if(y=15,E=E+1|0,(E|0)==15)break n;if(y=E,a=(a<<1)-h[(R- -64|0)+(E<<2)>>2]|0,!((a|0)>0))break}}E=y-s|0,L=1<<E}a=(te<<2)+r|0,m[a|0]=s+E,Ri[a+2>>1]=(he-r>>>2|0)-te,Ye=L+Ye|0}for(y=(H>>>s<<2)+he|0,a=ir|dn[(ke<<1)+S>>1]<<16,E=L;E=E-ze|0,on=y+(E<<2)|0,Ri[on>>1]=a,Ri[on+2>>1]=a>>>16,(E|0)>0;);for(y=wi;E=y,y=E>>>1|0,!!(E&H););if(y=h[Lt>>2],a=y+-1|0,h[Lt>>2]=a,H=E?E+(E+-1&H)|0:H,ke=ke+1|0,E=te,!((y|0)>1))break}if(Jt=Jt+Ki|0,ze=ze<<1,(G|0)==15)break}he=h[R+60>>2]}Rt=((he<<1)+-1|0)==(Jt|0)?Ye:0}return Rt}function As(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0;Rt=Fn-32|0,Fn=Rt,L=h[r+2256>>2],he=h[r+2296>>2],Jt=L+(he<<1)|0,yt=h[r+2304>>2];e:{t:{if(h[r+2236>>2]&&(a=re(he,800)+yt|0,F[a+797|0]))break t;if(S=re(he,800)+yt|0,oi=F[S+798|0],G=3,y=Qo(S,0,768),!F[y+768|0]){a=Rt,h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,h[a>>2]=0,h[a+4>>2]=0,E=L+-1|0,G=L+(he<<1)|0,H=dt[h[2661]](s,r+2032|0,F[E|0]+F[G+1|0]|0,((oi<<5)+r|0)+784|0,0,a)|0,a=(H|0)>0,m[E|0]=a,m[G+1|0]=a;i:{if((H|0)>=2){dt[h[2674]](Rt,y);break i}a=re(he,800)+yt|0,y=Ri[Rt>>1]+3>>>3|0,Ri[a+480>>1]=y,Ri[a+448>>1]=y,Ri[a+416>>1]=y,Ri[a+384>>1]=y,Ri[a+352>>1]=y,Ri[a+320>>1]=y,Ri[a+288>>1]=y,Ri[a+256>>1]=y,Ri[a+224>>1]=y,Ri[a+192>>1]=y,Ri[a+160>>1]=y,Ri[a+128>>1]=y,Ri[a+96>>1]=y,Ri[a+64>>1]=y,Ri[a+32>>1]=y,Ri[a>>1]=y}G=0,E=1}for(a=F[Jt|0]&15,y=((oi<<5)+r|0)+776|0,wi=L+-2|0,L=F[wi|0]&15,G=(re(G,68)+r|0)+1964|0;H=dt[h[2661]](s,G,(L&1)+(a&1)|0,y,E,S)|0,ke=dn[S>>1],R=(H|0)>(E|0),te=a>>>1|0,a=dt[h[2661]](s,G,R+(te&1)|0,y,E,S+32|0)|0,ze=dn[S+32>>1],Ye=(a|0)>(E|0),R=(te&126|R<<7)>>>1|0,te=dt[h[2661]](s,G,Ye+(R&1)|0,y,E,S- -64|0)|0,Ki=dn[S+64>>1],Fi=(te|0)>(E|0),Ye=(R|Ye<<7)>>>1|0,R=dt[h[2661]](s,G,Fi+(Ye&1)|0,y,E,S+96|0)|0,on=(((a|0)>3?3:(a|0)<2?(ze|0)!=0:2)|((H|0)>3?12:(H|0)<2?((ke|0)!=0)<<2:8))<<4|on<<8|((te|0)>3?12:(te|0)<2?((Ki|0)!=0)<<2:8)|((R|0)>3?3:(R|0)<2?dn[S+96>>1]!=0:2),H=(R|0)>(E|0),a=H<<3|(Ye|Fi<<7)>>>5,L=H<<7|(L&254)>>>1,S=S+128|0,Lt=Lt+1|0,(Lt|0)!=4;);for(G=r+2100|0,Lt=L>>>4|0,te=a&255,H=((oi<<5)+r|0)+792|0,L=0,a=1,E=0;y=E|4,ke=F[wi|0]>>>y|0,R=F[Jt|0]>>>y|0,y=dt[h[2661]](s,G,(ke&1)+(R&1)|0,H,0,S)|0,Ye=dn[S>>1],ze=(y|0)>0,R=dt[h[2661]](s,G,ze+(R>>>1&1)|0,H,0,S+32|0)|0,Ki=dn[S+32>>1],ke=dt[h[2661]](s,G,ze+(ke>>>1&1)|0,H,0,S- -64|0)|0,Fi=dn[S+64>>1],vn=(ke|0)>0,ir=(R|0)>0,ze=dt[h[2661]](s,G,vn+ir|0,H,0,S+96|0)|0,L=((((R|0)>3?3:(R|0)<2?(Ki|0)!=0:2)|((y|0)>3?12:(y|0)<2?((Ye|0)!=0)<<2:8))<<4|((ke|0)>3?12:(ke|0)<2?((Fi|0)!=0)<<2:8)|((ze|0)>3?3:(ze|0)<2?dn[S+96>>1]!=0:2))<<(E<<2)|L,y=(ze|0)>0,Lt=(y<<5|ir<<4)<<E|Lt,te=(y<<1|vn)<<4<<E|te,S=S+128|0,y=a,a=0,E=2,!!y;);m[Jt|0]=te,m[wi|0]=Lt,a=re(he,800)+yt|0,h[a+792>>2]=L,h[a+788>>2]=on,m[a+796|0]=L&43690?0:h[((oi<<5)+r|0)+804>>2],E=(L|on)!=0;break e}m[Jt|0]=0,m[L+-2|0]=0,F[a+768|0]||(m[(L+(he<<1)|0)+1|0]=0,m[L+-1|0]=0),a=re(he,800)+yt|0,h[a+788>>2]=0,h[a+792>>2]=0,m[a+796|0]=0}return h[r+2308>>2]>=1&&(a=h[r+2260>>2]+(h[r+2296>>2]<<2)|0,y=r,r=re(he,800)+yt|0,r=h[((y+(F[r+798|0]<<3)|0)+(F[r+768|0]<<2)|0)+2312>>2],m[a|0]=r,m[a+1|0]=r>>>8,m[a+2|0]=r>>>16,m[a+3|0]=r>>>24,m[a+2|0]=F[a+2|0]|E),Fn=Rt+32|0,!h[s+24>>2]}function Yl(r,s,a,y,S){var E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0;ze=Fn-16|0,Fn=ze,L=h[r+8>>2];e:{t:switch(h[r>>2]){case 2:dt[h[2733]](y,re(L,a-s|0),S);break e;case 0:i:{if(s){he=L+-1|0,te=S,E=s;break i}if(E=h[y>>2],E=E+-16777216&-16711936|E&16711935,h[S>>2]=E,he=L+-1|0,(L|0)>=2)for(te=S+4|0,H=y+4|0;ke=G<<2,R=h[ke+H>>2],E=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,h[te+ke>>2]=E,G=G+1|0,(he|0)!=(G|0););E=L<<2,te=E+S|0,y=y+E|0,E=1}if(H=E,(H|0)<(a|0))for(E=h[r+4>>2],Rt=1<<E,Fi=Rt+-1|0,Ye=0-Rt|0,yt=0-L|0,Lt=he+Rt>>>E|0,ke=h[r+16>>2]+(re(Lt,H>>E)<<2)|0;;){if(R=h[y>>2],he=yt<<2,E=h[he+te>>2],h[te>>2]=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,E=1,G=ke,(L|0)>=2)for(;R=E<<2,oi=R+te|0,wi=y+R|0,Jt=Rt+(E&Ye)|0,R=(Jt|0)>(L|0)?L:Jt,dt[h[(h[G>>2]>>>6&60)+10960>>2]](wi,he+oi|0,R-E|0,oi),G=G+4|0,E=R,(L|0)>(Jt|0););if(H=H+1|0,ke=Fi&H?ke:(Lt<<2)+ke|0,E=L<<2,te=E+te|0,y=y+E|0,(a|0)==(H|0))break}if(h[r+12>>2]==(a|0))break e;r=L<<2,Wr(S-r|0,(re(L,(s^-1)+a|0)<<2)+S|0,r);break e;case 1:if((a|0)<=(s|0))break e;for(E=h[r+4>>2],Ye=1<<E,yt=L&0-Ye,Lt=L-yt|0,he=Ye+-1|0,G=he+L>>>E|0,r=h[r+16>>2]+(re(G,s>>E)<<2)|0,te=(yt|0)<1;;){m[ze+10|0]=0,Ri[ze+8>>1]=0,H=(L<<2)+y|0;i:{if(te){E=r;break i}for(ke=(yt<<2)+y|0,E=r;R=h[E>>2],m[ze+8|0]=R,m[ze+10|0]=R>>>16,m[ze+9|0]=R>>>8,dt[h[2804]](ze+8|0,y,Ye,S),E=E+4|0,R=Ye<<2,S=R+S|0,y=y+R|0,y>>>0<ke>>>0;);}if(y>>>0<H>>>0&&(E=h[E>>2],m[ze+8|0]=E,m[ze+10|0]=E>>>16,m[ze+9|0]=E>>>8,dt[h[2804]](ze+8|0,y,Lt,S),E=Lt<<2,S=E+S|0,y=y+E|0),s=s+1|0,r=he&s?r:(G<<2)+r|0,(s|0)==(a|0))break}break e;case 3:break t;default:break e}if(E=h[r+4>>2],!((y|0)!=(S|0)|(E|0)<1)){if(S=a-s|0,E=re(S,(L+(1<<E)|0)+-1>>>E|0)<<2,G=((re(S,L)<<2)+y|0)-E|0,S=zc(G,y,E),te=h[r+16>>2],he=h[r+8>>2],r=h[r+4>>2],H=8>>>r|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(ke=-1<<H^-1,R=-1<<r^-1,r=(he|0)<1;;){if(E=0,S=0,!r)for(;E&R||(S=F[G+1|0],G=G+4|0),h[y>>2]=h[te+((S&ke)<<2)>>2],S=S>>>H|0,y=y+4|0,E=E+1|0,(he|0)!=(E|0););if(s=s+1|0,(a|0)==(s|0))break}break e}dt[h[2805]](S,te,y,s,a,he);break e}if(te=h[r+16>>2],H=8>>>E|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(ke=-1<<H^-1,R=-1<<E^-1,r=(L|0)<1;;){if(G=0,E=0,!r)for(;G&R||(E=F[y+1|0],y=y+4|0),h[S>>2]=h[te+((E&ke)<<2)>>2],E=E>>>H|0,S=S+4|0,G=G+1|0,(L|0)!=(G|0););if(s=s+1|0,(a|0)==(s|0))break}break e}dt[h[2805]](y,te,S,s,a,L)}Fn=ze+16|0}function Il(r,s,a,y,S,E,L,R){var G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0;he=Fn-16|0,Fn=he,h[he+12>>2]=0,h[he+8>>2]=0,Ki=R?h[R+8>>2]:0;e:{if(!r){te=7;break e}if(s>>>0<12){te=7;break e}if(H=s,G=r,Lt=Vc(G,5463),!Lt){if(te=3,(F[r+8|0]|F[r+9|0]<<8|(F[r+10|0]<<16|F[r+11|0]<<24))!=1346520407||(Ye=F[r+4|0]|F[r+5|0]<<8|(F[r+6|0]<<16|F[r+7|0]<<24),Ye+-12>>>0>4294967274))break e;if(!(!Ki|Ye>>>0<=s+-8>>>0)){te=7;break e}if(H=s+-12|0,H>>>0<8){te=7;break e}G=r+12|0}yt=Vc(G,5468);t:{if(yt){te=0;break t}if(te=3,(F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24))!=10)break e;if(H>>>0<18){te=7;break e}if(ke=1,Jt=(F[G+12|0]|F[G+13|0]<<8|F[G+14|0]<<16)+1|0,oi=(F[G+15|0]|F[G+16|0]<<8|F[G+17|0]<<16)+1|0,yr(Jt,0,oi,0),Lt|Pn)break e;te=F[G+8|0],H=H+-18|0,G=G+18|0,Fi=(te&2)>>>1|0}S&&(h[S>>2]=te>>>4&1),E&&(h[E>>2]=Fi),L&&(h[L>>2]=0),h[he+8>>2]=oi,h[he+12>>2]=Jt;t:{if(!R&&(E=0,!yt&Fi))break t;E=0;i:{if(H>>>0<4)break i;n:{if(ke|Ye|(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))!=1213221953&&yt|Lt)break n;if(H>>>0<8)break i;for(wi=22;;){if(te=3,ze=F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24),ze>>>0>4294967286||(Rt=ze+9&-2,wi=Rt+wi|0,wi>>>0>Ye>>>0&&!Lt))break e;if((F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==540561494|(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==1278758998)break n;if(H>>>0<Rt>>>0)break i;if(ke=(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==1213221953,E=ke?G+8|0:E,on=ke?ze:on,G=G+Rt|0,H=H-Rt|0,!(H>>>0>=8))break}break i}if(H>>>0<8)break i;ze=F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24);n:{if(!((F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))!=540561494&&(ze|0)!=1278758998)){if(ke=F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24),Ye>>>0>=12&&(te=3,ke>>>0>Ye+-12>>>0))break e;if(H=H+-8|0,ke>>>0>H>>>0&&Ki)break i;G=G+8|0,ze=(ze|0)==1278758998;break n}ke=H,ze=F[G|0]!=47|H>>>0<5?0:F[G+4|0]<32}if(te=3,ke>>>0>4294967286)break e;Fi|!L||(h[L>>2]=ze?2:1);n:{if(!ze){if(H>>>0<10)break i;if(Et(G,H,ke,he+12|0,he+8|0))break n;break e}if(H>>>0<5)break i;if(!Hi(G,H,he+12|0,he+8|0,S))break e}if(h[he+12>>2]!=(Jt|0)|h[he+8>>2]!=(oi|0)&&!yt)break e;if(!R)break t;h[R+8>>2]=0,h[R+12>>2]=0,h[R+4>>2]=s,h[R>>2]=r,h[R+32>>2]=ze,h[R+28>>2]=Ye,h[R+24>>2]=ke,h[R+20>>2]=on,h[R+16>>2]=E,h[R+12>>2]=G-r;break t}if(R){te=7;break e}if(te=7,yt)break e}if(S&&(h[S>>2]=h[S>>2]|(E|0)!=0),a&&(h[a>>2]=h[he+12>>2]),te=0,!y)break e;h[y>>2]=h[he+8>>2]}return Fn=he+16|0,te}function ju(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;e:{R=h[r+108>>2],a=s-R|0;t:{if((a|0)<1)break t;L=h[r+8>>2],ze=h[L>>2],y=h[r+100>>2],H=h[r+16>>2]+(re(y,R)<<2)|0,G=h[r+20>>2],he=h[r+176>>2];i:{if((he|0)>=1){if(a=he+-1|0,Yl((re(a,20)+r|0)+180|0,R,s,H,G),(he|0)<2)break i;for(;y=a+-1|0,Yl((re(y,20)+r|0)+180|0,R,s,G,G),he=(a|0)>1,a=y,!!he;);break i}if((G|0)==(H|0))break i;Wr(G,H,re(a,y)<<2)}if(R=h[L+84>>2],H=h[r+108>>2],he=(R|0)>(H|0),y=h[L+88>>2],y=(y|0)<(s|0)?y:s,a=he?R:H,(y|0)<=(a|0))break t;if(y=y-a|0,h[L+16>>2]=y,h[L+8>>2]=a-R,a=h[L+76>>2],S=h[L+80>>2]-a|0,h[L+12>>2]=S,Ye=ze<<2,ke=(a<<2)+(he?G+re(Ye,R-H|0)|0:G)|0,a=h[r+12>>2],R=h[a>>2],R>>>0>10)break e;G=h[a+20>>2],yt=h[a+16>>2]+re(G,h[r+116>>2])|0;i:{if(h[L+92>>2]){if((y|0)<1)break i;for(;;){ze=y-te|0,he=vc(h[r+268>>2],ze),a=re(te,Ye)+ke|0,_c(a,Ye,h[h[r+268>>2]+44>>2],he),te=Ss(h[r+268>>2],ze,a,Ye)+te|0,a=0,S=h[r+268>>2];n:{if(h[S+64>>2]>=h[S+56>>2])break n;for(he=re(E,G)+yt|0,H=h[S+52>>2],ze=h[S+68>>2];;){if(h[S+24>>2]>0)break n;if(Vi(S),dt[h[2662]](ze,H,1),Po(ze,H,R,he+re(a,G)|0),a=a+1|0,!(h[S+64>>2]<h[S+56>>2]))break}}if(E=a+E|0,!((te|0)<(y|0)))break}break i}if((y|0)>=1)for(a=y;Po(ke,S,R,yt),yt=G+yt|0,ke=ke+Ye|0,E=(a|0)>1,a=a+-1|0,!!E;);E=y}h[r+116>>2]=h[r+116>>2]+E}h[r+108>>2]=s;return}te=h[r+116>>2];e:{if(h[L+92>>2]){if((y|0)<1)break e;for(;;){a=y-yt|0,E=vc(h[r+268>>2],a),_c(ke,Ye,h[h[r+268>>2]+44>>2],E),ze=re(E,Ye),yt=Ss(h[r+268>>2],a,ke,Ye)+yt|0,R=0,L=h[r+268>>2];t:{if(h[L+64>>2]>=h[L+56>>2])break t;for(G=h[L+52>>2],H=h[L+68>>2],he=H+3|0,a=te;;){if(h[L+24>>2]>0)break t;if(Vi(L),dt[h[2662]](H,G,1),S=h[r+12>>2],dt[h[2860]](H,h[S+16>>2]+re(h[S+32>>2],a)|0,G),E=a>>1,dt[h[2861]](H,h[S+20>>2]+re(E,h[S+36>>2])|0,h[S+24>>2]+re(E,h[S+40>>2])|0,G,(a^-1)&1),E=h[S+28>>2],E&&dt[h[2668]](he,0,G,1,E+re(h[S+44>>2],a)|0,0)|0,R=R+1|0,a=a+1|0,!(h[L+64>>2]<h[L+56>>2]))break}}if(ke=ke+ze|0,te=te+R|0,!((yt|0)<(y|0)))break}break e}if((y|0)<1)break e;for(;;){if(dt[h[2860]](ke,h[a+16>>2]+re(h[a+32>>2],te)|0,S),E=te>>1,dt[h[2861]](ke,h[a+20>>2]+re(E,h[a+36>>2])|0,h[a+24>>2]+re(E,h[a+40>>2])|0,S,(te^-1)&1),E=h[a+28>>2],E&&dt[h[2668]](ke+3|0,0,S,1,E+re(h[a+44>>2],te)|0,0)|0,te=te+1|0,(y|0)<2)break e;y=y+-1|0,ke=ke+Ye|0,a=h[r+12>>2]}}h[r+116>>2]=te,h[r+108>>2]=s}function Da(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;s=h[r+40>>2],y=h[h[s>>2]>>2],S=y+-1|0;e:{if(S>>>0<12&&(a=0,2077>>>(S&65535)&1))break e;a=y+-7>>>0>3}h[s+40>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0;e:{if(!za(h[s+20>>2],r,a?12:11))break e;a|y+-7>>>0>3||gl(),E=s+40|0;t:{i:{n:{o:{l:{if(h[r+92>>2]){if(a=h[s>>2],R=h[a>>2],L=R+-1|0,y>>>0<=10){if(L>>>0>=12||(S=0,!(2077>>>(L&65535)&1)))break n;break i}if(L>>>0>=12||(y=0,!(2077>>>(L&65535)&1)))break l;break o}r:{if(y>>>0<=10){if(eu(),h[s+44>>2]=6,!h[r+56>>2])break r;if(S=h[r+12>>2],L=S+1|0,S=Ms(1,0,(L&-2)+S|0),h[E>>2]=S,!S)break e;h[s+4>>2]=S,r=h[r+12>>2],h[s+44>>2]=7,r=r+S|0,h[s+8>>2]=r,h[s+12>>2]=r+(L>>1),gl();break r}h[s+44>>2]=8}if(G=1,a)break e;r=9;r:switch(y+-5|0){default:r=y>>>0<11?10:11;break;case 0:case 5:break r}if(h[s+48>>2]=r,y>>>0>10)break e;break t}y=R+-7>>>0>3}if(R=h[r+100>>2],H=h[r+12>>2],te=h[r+16>>2],he=E,S=h[r+96>>2],E=S+1|0,ke=E&-2,ze=ke<<1,Ye=S<<1,yt=(ze+Ye<<2)+(y?0:S<<3)|0,L=Ms(1,0,yt+(y?283:367)|0),h[he>>2]=L,!L||(G=(L+yt|0)+31&-32,h[s+24>>2]=G,h[s+32>>2]=G+168,h[s+28>>2]=G+84,h[s+36>>2]=y?0:G+252|0,fl(G,h[r+12>>2],h[r+16>>2],h[a+16>>2],S,R,h[a+32>>2],1,L),G=H+1>>1,H=te+1>>1,E=E>>1,te=R+1>>1,L=L+(Ye<<2)|0,fl(h[s+28>>2],G,H,h[a+20>>2],E,te,h[a+36>>2],1,L),fl(h[s+32>>2],G,H,h[a+24>>2],E,te,h[a+40>>2],1,L+(ke<<2)|0),h[s+44>>2]=12,G=1,y))break e;fl(h[s+36>>2],h[r+12>>2],h[r+16>>2],h[a+28>>2],S,R,h[a+44>>2],1,L+(ze<<2)|0),h[s+48>>2]=13;break t}S=R+-7>>>0>3}if(L=h[r+100>>2],H=h[r+12>>2],te=h[r+16>>2],a=h[r+96>>2],ke=re(a,6),R=(S?ke:a<<3)<<2,he=E,ze=re(a,3),Ye=a<<2,E=R+(S?ze:Ye)|0,y=Ms(1,0,E+(S?283:367)|0),h[he>>2]=y,!y||(G=1,E=(y+E|0)+31&-32,h[s+24>>2]=E,h[s+32>>2]=E+168,h[s+28>>2]=E+84,h[s+36>>2]=S?0:E+252|0,he=E,E=y+R|0,fl(he,h[r+12>>2],h[r+16>>2],E,a,L,0,1,y),R=H+1>>1,H=te+1>>1,te=a<<1,fl(h[s+28>>2],R,H,a+E|0,a,L,0,1,y+(te<<2)|0),fl(h[s+32>>2],R,H,E+te|0,a,L,0,1,y+(Ye<<2)|0),h[s+44>>2]=14,Ka(),S))break e;fl(h[s+36>>2],h[r+12>>2],h[r+16>>2],E+ze|0,a,L,0,1,y+(ke<<2)|0),h[s+48>>2]=15,r=16;i:switch(h[h[s>>2]>>2]+-5|0){default:r=17;break;case 0:case 5:break i}h[s+52>>2]=r}fc()}return G|0}function Tl(r,s,a,y,S){var E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0,_s=0,Sa=0,yl=0;Ki=Fn-256|0,Fn=Ki,E=(S|0)/25|0;e:{if(!r|S>>>0>100|((s|0)<1|(a|0)<1)||(L=1,ir=a+-1|0,Ye=s+-1|0,S=(E<<1|1)>(s|0)?Ye>>1:E,te=(S<<1|1)>(a|0)?ir>>1:S,(te|0)<1)||(L=0,H=s<<1,E=te<<1,S=re(H,E+2|0),oi=Ms(1,0,(S+H|0)+4094|0),!oi))break e;for(Rt=0-te|0,E=E|1,ke=(re(E,s)<<1)+oi|0,G=ke-H|0,Qo(G,0,H),yt=Qo(Ki,0,256),wi=S+oi|0,Fi=re(E,E),on=255,he=255,E=r;;){for(L=0;S=F[L+E|0],m[S+yt|0]=1,ze=(R|0)<(S|0),R=ze?S:R,Er=ze?S:Er,ze=(he|0)>(S|0),he=ze?S:he,on=ze?S:on,L=L+1|0,(L|0)!=(s|0););if(E=y+E|0,Lt=Lt+1|0,(Lt|0)==(a|0))break}for(R=R-he|0,ze=262144/(Fi>>>0)|0,E=H+wi|0,L=-1,he=0,S=0;F[S+yt|0]&&(he=he+1|0,(L|0)>=0&&(L=S-L|0,R=(L|0)<(R|0)?L:R),L=S),S=S+1|0,(S|0)!=256;);for(L=R<<2,yt=re(R,12)>>2,R=L-yt|0,Fi=E+2046|0,S=1;;){Lt=S<<1,Jt=Lt+Fi|0,E=S;t:{if((S|0)<=(yt|0)||(E=0,(L|0)<=(S|0)))break t;E=(re(yt,L-S|0)|0)/(R|0)|0}if(E=E>>>2|0,Ri[Jt>>1]=E,Ri[Fi-Lt>>1]=0-E,S=S+1|0,(S|0)==1024)break}if(Ri[Fi>>1]=0,!((he|0)<3|(Rt|0)>=(a|0)))for(Lt=te^-1,he=s-te|0,yt=te+1|0,_s=te+-1|0,Sa=(H-te|0)+-2|0,yl=(Ye<<1)+ke|0,L=oi,E=r;;){if(R=0,S=0,Jt=(s|0)<1,!Jt)for(;R=F[S+E|0]+(R&65535)|0,H=S<<1,Ye=R+dn[H+G>>1]|0,vn=H+ke|0,H=L+H|0,Ri[vn>>1]=Ye-dn[H>>1],Ri[H>>1]=Ye,S=S+1|0,(S|0)!=(s|0););if(R=(Rt|0)<(ir|0)?y+E|0:E,H=(Rt|0)>-1,Ye=(s<<1)+L|0,vn=(Ye|0)==(ke|0),(Rt|0)>=(te|0)){if(S=0,(te|0)>-1){for(;Ri[(S<<1)+wi>>1]=re(ze,dn[(te-S<<1)+ke>>1]+dn[(S+_s<<1)+ke>>1]&65535)>>>16,G=(S|0)==(te|0),S=S+1|0,!G;);S=yt}if((S|0)<(he|0)){for(;Ri[(S<<1)+wi>>1]=re(ze,dn[(S+te<<1)+ke>>1]-dn[(S+Lt<<1)+ke>>1]&65535)>>>16,S=S+1|0,(he|0)!=(S|0););S=he}if((S|0)<(s|0))for(;Ri[(S<<1)+wi>>1]=re(ze,((dn[yl>>1]<<1)-dn[(Sa-S<<1)+ke>>1]|0)-dn[(S+Lt<<1)+ke>>1]&65535)>>>16,S=S+1|0,(S|0)!=(s|0););if(S=0,!Jt)for(;Jt=r+S|0,G=F[Jt|0],(Er|0)<=(G|0)|(on|0)>=(G|0)||(G=G+Ri[(dn[(S<<1)+wi>>1]-(G<<2)<<1)+Fi>>1]|0,G=(G|0)>0?G:0,m[Jt|0]=(G|0)<255?G:255),S=S+1|0,(S|0)!=(s|0););r=r+y|0}if(E=H?R:E,G=L,L=vn?oi:Ye,Rt=Rt+1|0,(Rt|0)==(a|0))break}Rr(oi),L=1}return Fn=Ki+256|0,L}function ul(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;e:{if((S|0)<=15)for(ze=h[(S<<2)+s>>2]+re(a,11)|0,a=h[r+8>>2],G=h[r+4>>2];;){L=F[ze|0];t:{if((a|0)>-1)break t;if(he=h[r+12>>2],he>>>0<Zn[r+20>>2]){R=F[he|0]|F[he+1|0]<<8|(F[he+2|0]<<16|F[he+3|0]<<24),h[r+12>>2]=he+3,a=a+24|0,h[r+8>>2]=a,h[r>>2]=h[r>>2]<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8;break t}Pr(r),a=h[r+8>>2]}ke=r,R=a,H=h[r>>2],te=H>>>a|0,L=re(L,G)>>>8|0;t:{if(te>>>0>L>>>0){H=((L^-1)<<a)+H|0,h[r>>2]=H,G=G-L|0;break t}G=L+1|0}if(he=Mr(G)^24,a=R-he|0,h[ke+8>>2]=a,G=(G<<he)+-1|0,h[r+4>>2]=G,he=S,ke=S,te>>>0<=L>>>0)break e;for(;;){L=F[ze+1|0];t:{if((a|0)>-1)break t;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){R=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=S+3,H=H<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8,h[r>>2]=H;break t}Pr(r),H=h[r>>2],a=h[r+8>>2]}ke=r,R=a,te=H>>>a|0,L=re(L,G)>>>8|0;t:{if(te>>>0>L>>>0){H=((L^-1)<<a)+H|0,h[r>>2]=H,G=G-L|0;break t}G=L+1|0}if(S=Mr(G)^24,a=R-S|0,h[ke+8>>2]=a,G=(G<<S)+-1|0,h[r+4>>2]=G,S=he+1|0,te>>>0<=L>>>0){if(ke=16,(S|0)==16)break e;ze=h[(S<<2)+s>>2],he=S;continue}break}Ye=h[(S<<2)+s>>2],te=F[ze+2|0];t:{if((a|0)>-1)break t;if(R=h[r+12>>2],R>>>0<Zn[r+20>>2]){L=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),a=a+24|0,h[r+8>>2]=a,h[r+12>>2]=R+3,H=H<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=H;break t}Pr(r),H=h[r>>2],a=h[r+8>>2]}ke=r,R=a,yt=H>>>a|0,te=re(G,te)>>>8|0;t:{if(yt>>>0>te>>>0){h[r>>2]=((te^-1)<<a)+H,a=G-te|0;break t}a=te+1|0}L=Mr(a)^24,R=R-L|0,h[ke+8>>2]=R,h[r+4>>2]=(a<<L)+-1;t:{if(yt>>>0<=te>>>0){H=1,ze=Ye+11|0;break t}H=Ao(r,ze),R=h[r+8>>2],ze=Ye+22|0}t:{if((R|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,R=R+24|0,h[r+8>>2]=R,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Pr(r),R=h[r+8>>2]}if(a=R+-1|0,h[r+8>>2]=a,G=h[r+4>>2],te=G>>>1|0,Ye=h[r>>2],L=te-(Ye>>>R|0)>>31,G=L+G|1,h[r+4>>2]=G,h[r>>2]=Ye-((L&te+1)<<R),Ri[(F[he+5328|0]<<1)+E>>1]=re(h[(((he|0)>0)<<2)+y>>2],(L^H)-L|0),!((he|0)<15))break}ke=16}return ke|0}function Uu(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;e:{if((S|0)<=15)for(ze=h[(S<<2)+s>>2]+re(a,11)|0,R=h[r+8>>2],L=h[r+4>>2];;){H=F[ze|0];t:{if((R|0)>-1)break t;if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){he=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,R=R+24|0,h[r+8>>2]=R,h[r>>2]=h[r>>2]<<24|(he>>>8&65280|(he<<8&16711680|he<<24))>>>8;break t}Pr(r),R=h[r+8>>2]}if(G=h[r>>2],a=re(L,H)>>>8|0,H=G>>>R>>>0<=a>>>0,H||(a=a+1|0,G=G-(a<<R)|0,h[r>>2]=G,a=L-a|0),a>>>0<=126&&(R=R-F[a+9056|0]|0,h[r+8>>2]=R,a=F[a+9184|0]),h[r+4>>2]=a,he=S,L=S,H)break e;for(;;){H=F[ze+1|0];t:{if((R|0)>-1)break t;if(S=h[r+12>>2],S>>>0<Zn[r+20>>2]){L=F[S|0]|F[S+1|0]<<8|(F[S+2|0]<<16|F[S+3|0]<<24),R=R+24|0,h[r+8>>2]=R,h[r+12>>2]=S+3,G=G<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,h[r>>2]=G;break t}Pr(r),G=h[r>>2],R=h[r+8>>2]}te=G>>>R|0,L=re(a,H)>>>8|0;t:{if(te>>>0<=L>>>0){a=L;break t}S=L+1|0,G=G-(S<<R)|0,h[r>>2]=G,a=a-S|0}if(a>>>0<=126&&(R=R-F[a+9056|0]|0,h[r+8>>2]=R,a=F[a+9184|0]),h[r+4>>2]=a,S=he+1|0,H=h[(S<<2)+s>>2],te>>>0<=L>>>0){if(L=16,he=S,ze=H,(S|0)!=16)continue;break e}break}ke=F[ze+2|0];t:{if((R|0)>-1)break t;if(L=h[r+12>>2],L>>>0<Zn[r+20>>2]){te=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),R=R+24|0,h[r+8>>2]=R,h[r+12>>2]=L+3,G=G<<24|(te>>>8&65280|(te<<8&16711680|te<<24))>>>8,h[r>>2]=G;break t}Pr(r),G=h[r>>2],R=h[r+8>>2]}te=r,Ye=G>>>R|0,ke=re(a,ke)>>>8|0,L=ke,Ye>>>0>L>>>0&&(L=ke+1|0,h[r>>2]=G-(L<<R),L=a-L|0),L>>>0<=126&&(R=R-F[L+9056|0]|0,h[r+8>>2]=R,L=F[L+9184|0]),h[te+4>>2]=L;t:{if(Ye>>>0<=ke>>>0){te=1,ze=H+11|0;break t}te=Ao(r,ze),R=h[r+8>>2],ze=H+22|0}t:{if((R|0)>-1){a=R;break t}if(a=h[r+12>>2],a>>>0<Zn[r+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),h[r+12>>2]=a+3,a=R+24|0,h[r+8>>2]=a,h[r>>2]=h[r>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Pr(r),a=h[r+8>>2]}if(R=a+-1|0,h[r+8>>2]=R,L=h[r+4>>2],G=L>>>1|0,ke=h[r>>2],H=G-(ke>>>a|0)>>31,L=L+H|1,h[r+4>>2]=L,h[r>>2]=ke-((H&G+1)<<a),Ri[(F[he+5328|0]<<1)+E>>1]=re(h[(((he|0)>0)<<2)+y>>2],(H^te)-H|0),!((he|0)<15))break}L=16}return L|0}function Rs(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;e:{if((a|0)<0|(y|0)<1||(G=h[s+88>>2],(a+y|0)>(G|0)))break e;te=h[s>>2];t:{i:{if(h[r+2356>>2])break i;E=h[r+2344>>2];n:{if(E)break n;if(S=iu(1,0,144),h[r+2344>>2]=S,!S)break e;if(S=h[s+88>>2],L=S,E=S>>31,S=h[s>>2],E=Ms(yr(L,E,S,S>>31),Pn,1),h[r+2360>>2]=E,!E||(h[r+2368>>2]=0,h[r+2364>>2]=E,L=h[r+2348>>2],R=h[r+2352>>2],S=h[r+2344>>2],l0(),h[S+136>>2]=E,h[S>>2]=h[s>>2],h[S+4>>2]=h[s+4>>2],R>>>0<2)||(E=F[L|0]&3,h[S+8>>2]=E,h[S+12>>2]=F[L|0]>>>2&3,H=F[L|0]>>>4&3,h[S+16>>2]=H,E>>>0>1|H>>>0>1|F[L|0]>63)||(E=R+-1|0,R=S+24|0,wp(R),Yh(0,R),h[S- -64>>2]=S,h[S+24>>2]=h[s>>2],h[S+28>>2]=h[s+4>>2],h[S+96>>2]=h[s+72>>2],h[S+100>>2]=h[s+76>>2],h[S+104>>2]=h[s+80>>2],h[S+108>>2]=h[s+84>>2],h[S+112>>2]=h[s+88>>2],h[S+8>>2]?S=Dl(S,L+1|0,E):S=E>>>0>=re(h[S+4>>2],h[S>>2])>>>0,!S))break t;if(E=h[r+2344>>2],h[E+16>>2]!=1){h[r+2372>>2]=0;break n}y=G-a|0}he=h[E+112>>2];n:{if(!h[E+8>>2]){R=h[E>>2],L=re(R,a),S=L+h[r+2364>>2]|0,G=(L+h[r+2348>>2]|0)+1|0,L=h[r+2368>>2];o:{l:{if(H=h[E+12>>2],H){if((y|0)<1)break o;if(dt[h[(H<<2)+10912>>2]](L,G,S,R),H=1,(y|0)!=1)break l;L=S;break o}if(E=0,(y|0)<=0)break o;for(;L=S,S=Wr(S,G,R),G=R+G|0,S=S+R|0,E=E+1|0,(E|0)!=(y|0););break o}for(;G=R+G|0,L=S+R|0,dt[h[(h[E+12>>2]<<2)+10912>>2]](S,G,L,R),S=L,H=H+1|0,(H|0)!=(y|0););}h[r+2368>>2]=L,y=a+y|0;break n}if(y=a+y|0,!Is(E,y))break t}n:{if((y|0)>=(he|0)){h[r+2356>>2]=1;break n}if(!h[r+2356>>2])break i}if(y=h[r+2344>>2],y&&(y0(h[y+20>>2]),h[y+20>>2]=0,Rr(y)),h[r+2344>>2]=0,y=h[r+2372>>2],(y|0)<1)break i;if(L=h[s+76>>2],S=h[s+84>>2],!Tl(L+(h[r+2364>>2]+re(S,te)|0)|0,h[s+80>>2]-L|0,h[s+88>>2]-S|0,te,y))break t}return h[r+2364>>2]+re(a,te)|0}Rr(h[r+2360>>2]),h[r+2360>>2]=0,h[r+2364>>2]=0,s=h[r+2344>>2],s&&(y0(h[s+20>>2]),h[s+20>>2]=0,Rr(s)),h[r+2344>>2]=0}return 0}function vu(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0;h[r+152>>2]=0,G=1;e:{t:{if(h[r+148>>2]>=1){if(!(dt[h[2558]](r+124|0)|0))break t;h[r+140>>2]=r+180,h[r+136>>2]=r,h[r+132>>2]=18,G=h[r+2308>>2]>0?3:2}h[r+156>>2]=G;break e}if(!$o(r,1,4941))return 0}L=h[r+288>>2],te=L<<2,a=h[r+148>>2],H=h[r+2308>>2],ke=(H|0)>0?re(te,(a|0)<1?1:2):0,ze=L<<5,yt=G<<4,Lt=re(ze,(re(yt+F[H+4863|0]|0,3)|0)/2|0),Ye=(L<<1)+2|0,Rt=re(re(L,(a|0)==2?2:1),800),E=0;e:{if(!h[r+2348>>2])break e;Jt=yr(dn[r+50>>1],0,dn[r+48>>1],0),E=Pn}oi=E,a=0,y=te,S=y+ze|0,S>>>0<y>>>0&&(a=1),y=S,S=y+Ye|0,S>>>0<y>>>0&&(a=a+1|0),y=S,S=y+ke|0,S>>>0<y>>>0&&(a=a+1|0),y=S,S=y+Rt|0,S>>>0<y>>>0&&(a=a+1|0),y=S,S=y+Lt|0,S>>>0<y>>>0&&(a=a+1|0),y=S,S=y+Jt|0,a=a+E|0,E=S,a=S>>>0<y>>>0?a+1|0:a,y=a,S=S+832|0,S>>>0<832&&(a=a+1|0);e:{if(!a&S>>>0>4294967264|a>>>0>0)break e;R=h[r+2288>>2];t:{i:{if(a=y,y=E+863|0,y>>>0<863&&(a=a+1|0),E=y,S=y,y=a,!a&S>>>0>Zn[r+2292>>2]|a>>>0>0){if(Rr(R),h[r+2292>>2]=0,R=Ms(E,y,1),h[r+2288>>2]=R,!R)break i;h[r+2292>>2]=E,H=h[r+2308>>2]}h[r+2244>>2]=R,h[r+160>>2]=0,a=R+te|0,h[r+2252>>2]=a,a=a+ze|0,he=a+2|0,h[r+2256>>2]=he,a=a+Ye|0,S=ke?a:0,h[r+2260>>2]=S,h[r+172>>2]=S,a=a+ke|0,y=h[r+148>>2],(H|0)<1|(y|0)<1||(h[r+172>>2]=S+(L<<2)),a=a+31&-32,h[r+2264>>2]=a,a=a+832|0,h[r+2304>>2]=a,h[r+176>>2]=a,(y|0)==2&&(h[r+176>>2]=a+re(L,800)),h[r+152>>2]=0,E=L<<3,h[r+2284>>2]=E,S=L<<4,h[r+2280>>2]=S,a=a+Rt|0,h[r+2364>>2]=Jt|oi?a+Lt|0:0,y=F[H+4863|0],a=a+re(y,S)|0,h[r+2268>>2]=a,y=re(E,y>>>1|0),a=y+(a+re(S,yt)|0)|0,h[r+2272>>2]=a,h[r+2276>>2]=y+(a+(re(E,G)<<3)|0),Qo(he+-2|0,0,Ye),a=h[r+2256>>2]+-2|0,m[a|0]=0,m[a+1|0]=0,h[r+2296>>2]=0,h[r+2248>>2]=0,Qo(h[r+2244>>2],0,te);break t}if(!$o(r,1,4971))break e}h[s+8>>2]=0,h[s+20>>2]=h[r+2268>>2],h[s+24>>2]=h[r+2272>>2],h[s+28>>2]=h[r+2276>>2],h[s+32>>2]=h[r+2280>>2],r=h[r+2284>>2],h[s+104>>2]=0,h[s+36>>2]=r,Ql(),he=1}return he}function Zl(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;G=Fn-16|0,Fn=G,H=2;e:{if(!y|((s|0)<1|(r|0)<1))break e;t:{if(!a)break t;i:{if(!h[a+8>>2]){S=s,E=r;break i}if(S=h[a+24>>2],(S|0)<1||(E=h[a+20>>2],(E|0)<1)||(L=h[a+16>>2],R=h[a+12>>2],(L|R)<0|((R&-2)+E|0)>(r|0)|((L&-2)+S|0)>(s|0)))break e}if(!h[a+28>>2]){s=S,r=E;break t}if(h[G+12>>2]=h[a+32>>2],h[G+8>>2]=h[a+36>>2],!it(E,S,G+12|0,G+8|0))break e;s=h[G+8>>2],r=h[G+12>>2]}if(h[y+8>>2]=s,h[y+4>>2]=r,(s|0)<1|(r|0)<1||(R=h[y>>2],R>>>0>12))break e;t:{if(h[y+80>>2]|h[y+12>>2]>0)break t;if(E=r,S=F[R+1157|0],yr(r,0,S,0),Pn)break e;L=s,ze=re(r,S),S=ze,S=yr(s,0,S,S>>31),te=Pn,H=1;i:{if(R>>>0<11){s=0,L=0,r=0;break i}E=yr(E,0,L,0),L=(R|0)==12,yt=L?E:0,he=L?Pn:0,Ye=(r+1|0)/2|0,E=Ye,s=(s+1|0)/2|0,s=yr(E,E>>31,s,s>>31),L=L?r:0,r=Pn}if(ke=s,r=r<<1|s>>>31,he=he+te|0,te=S+yt|0,te>>>0<S>>>0&&(he=he+1|0),ke=ke<<1,E=ke+te|0,r=r+he|0,r=Ms(E,E>>>0<te>>>0?r+1|0:r,1),!r)break e;if(h[y+16>>2]=r,h[y+80>>2]=r,R>>>0>=11){h[y+48>>2]=S,h[y+32>>2]=ze,h[y+52>>2]=s,h[y+36>>2]=Ye,h[y+56>>2]=s,h[y+40>>2]=Ye,r=r+S|0,h[y+20>>2]=r,h[y+24>>2]=r+s,(R|0)==12&&(h[y+28>>2]=r+ke),h[y+44>>2]=L,h[y+60>>2]=yt;break t}h[y+24>>2]=S,h[y+20>>2]=ze}if(H=Jo(y),H|!a)break e;if(!h[a+48>>2]){H=0;break e}if(r=h[y+8>>2]+-1|0,Zn[y>>2]<=10){H=0,a=y+20|0,s=h[a>>2],h[a>>2]=0-s,h[y+16>>2]=h[y+16>>2]+re(r,s);break e}if(H=0,a=y+32|0,s=h[a>>2],h[a>>2]=0-s,S=y+36|0,a=h[S>>2],h[S>>2]=0-a,E=y+40|0,S=h[E>>2],h[E>>2]=0-S,h[y+16>>2]=h[y+16>>2]+re(r,s),s=y+20|0,E=s,L=h[s>>2],s=r>>1,h[E>>2]=L+re(s,a),a=y+24|0,h[a>>2]=h[a>>2]+re(s,S),a=h[y+28>>2],!a)break e;S=y+44|0,s=h[S>>2],h[S>>2]=0-s,h[y+28>>2]=a+re(r,s)}return Fn=G+16|0,H}function Xa(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0;for(L=Fn+-64|0,S=Ri[r+16>>1],E=Ri[r>>1],R=S+E|0,a=Ri[r+8>>1],y=Ri[r+24>>1],G=((re(a,20091)>>16)+a|0)+(re(y,35468)>>16)|0,h[L+12>>2]=R-G,S=E-S|0,a=((re(a,35468)>>16)-y|0)-(re(y,20091)>>16)|0,h[L+8>>2]=S-a,h[L+4>>2]=a+S,h[L>>2]=R+G,S=Ri[r+18>>1],E=Ri[r+2>>1],R=S+E|0,a=Ri[r+10>>1],y=Ri[r+26>>1],G=((re(a,20091)>>16)+a|0)+(re(y,35468)>>16)|0,h[L+28>>2]=R-G,S=E-S|0,a=((re(a,35468)>>16)-y|0)-(re(y,20091)>>16)|0,h[L+24>>2]=S-a,h[L+20>>2]=a+S,a=R+G|0,h[L+16>>2]=a,E=Ri[r+20>>1],R=Ri[r+4>>1],G=E+R|0,y=Ri[r+12>>1],S=Ri[r+28>>1],H=((re(y,20091)>>16)+y|0)+(re(S,35468)>>16)|0,h[L+44>>2]=G-H,E=R-E|0,y=((re(y,35468)>>16)-S|0)-(re(S,20091)>>16)|0,h[L+40>>2]=E-y,h[L+36>>2]=y+E,h[L+32>>2]=G+H,S=Ri[r+22>>1],E=Ri[r+6>>1],R=S+E|0,y=Ri[r+14>>1],r=Ri[r+30>>1],G=((re(y,20091)>>16)+y|0)+(re(r,35468)>>16)|0,h[L+60>>2]=R-G,S=E-S|0,r=((re(y,35468)>>16)-r|0)-(re(r,20091)>>16)|0,h[L+56>>2]=S-r,h[L+52>>2]=r+S,h[L+48>>2]=R+G,r=L,L=0;;){if(y=h[r+48>>2],S=((re(a,20091)>>16)+a|0)+(re(y,35468)>>16)|0,E=h[r>>2]+4|0,R=h[r+32>>2],G=E+R|0,H=F[s|0]+(S+G>>3)|0,H=(H|0)>0?H:0,m[s|0]=(H|0)<255?H:255,a=((re(a,35468)>>16)-y|0)-(re(y,20091)>>16)|0,y=E-R|0,E=F[s+1|0]+(a+y>>3)|0,E=(E|0)>0?E:0,m[s+1|0]=(E|0)<255?E:255,a=F[s+2|0]+(y-a>>3)|0,a=(a|0)>0?a:0,m[s+2|0]=(a|0)<255?a:255,a=F[s+3|0]+(G-S>>3)|0,a=(a|0)>0?a:0,m[s+3|0]=(a|0)<255?a:255,L=L+1|0,(L|0)!=4){s=s+32|0,a=h[r+20>>2],r=r+4|0;continue}break}}function bu(r){r=r|0;var s=0;s=yr(F[r+31|0],0,16843009,16843009),m[r+32|0]=s,m[r+33|0]=s>>>8,m[r+34|0]=s>>>16,m[r+35|0]=s>>>24,s=Pn,m[r+36|0]=s,m[r+37|0]=s>>>8,m[r+38|0]=s>>>16,m[r+39|0]=s>>>24,s=yr(F[r+63|0],0,16843009,16843009),m[r+64|0]=s,m[r+65|0]=s>>>8,m[r+66|0]=s>>>16,m[r+67|0]=s>>>24,s=Pn,m[r+68|0]=s,m[r+69|0]=s>>>8,m[r+70|0]=s>>>16,m[r+71|0]=s>>>24,s=yr(F[r+95|0],0,16843009,16843009),m[r+96|0]=s,m[r+97|0]=s>>>8,m[r+98|0]=s>>>16,m[r+99|0]=s>>>24,s=Pn,m[r+100|0]=s,m[r+101|0]=s>>>8,m[r+102|0]=s>>>16,m[r+103|0]=s>>>24,s=yr(F[r+127|0],0,16843009,16843009),m[r+128|0]=s,m[r+129|0]=s>>>8,m[r+130|0]=s>>>16,m[r+131|0]=s>>>24,s=Pn,m[r+132|0]=s,m[r+133|0]=s>>>8,m[r+134|0]=s>>>16,m[r+135|0]=s>>>24,s=yr(F[r+159|0],0,16843009,16843009),m[r+160|0]=s,m[r+161|0]=s>>>8,m[r+162|0]=s>>>16,m[r+163|0]=s>>>24,s=Pn,m[r+164|0]=s,m[r+165|0]=s>>>8,m[r+166|0]=s>>>16,m[r+167|0]=s>>>24,s=yr(F[r+191|0],0,16843009,16843009),m[r+192|0]=s,m[r+193|0]=s>>>8,m[r+194|0]=s>>>16,m[r+195|0]=s>>>24,s=Pn,m[r+196|0]=s,m[r+197|0]=s>>>8,m[r+198|0]=s>>>16,m[r+199|0]=s>>>24,s=yr(F[r+223|0],0,16843009,16843009),m[r+224|0]=s,m[r+225|0]=s>>>8,m[r+226|0]=s>>>16,m[r+227|0]=s>>>24,s=Pn,m[r+228|0]=s,m[r+229|0]=s>>>8,m[r+230|0]=s>>>16,m[r+231|0]=s>>>24,s=yr(F[r+-1|0],0,16843009,16843009),m[r|0]=s,m[r+1|0]=s>>>8,m[r+2|0]=s>>>16,m[r+3|0]=s>>>24,s=Pn,m[r+4|0]=s,m[r+5|0]=s>>>8,m[r+6|0]=s>>>16,m[r+7|0]=s>>>24}function Bs(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0;e:{if((a|0)!=1){for(;y=F[s|0]+(F[r|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s|0]=(y|0)<255?y:255,y=F[s+1|0]+(F[r+1|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+1|0]=(y|0)<255?y:255,y=F[s+2|0]+(F[r+2|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+2|0]=(y|0)<255?y:255,y=F[s+3|0]+(F[r+3|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+3|0]=(y|0)<255?y:255,y=F[s+4|0]+(F[r+4|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+4|0]=(y|0)<255?y:255,y=F[s+5|0]+(F[r+5|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+5|0]=(y|0)<255?y:255,y=F[s+6|0]+(F[r+6|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+6|0]=(y|0)<255?y:255,y=F[s+7|0]+(F[r+7|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+7|0]=(y|0)<255?y:255,r=r+8|0,s=s+a|0,S=S+1|0,(S|0)!=8;);break e}for(S=F[s+6|0];y=F[s|0]+(F[r|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s|0]=(y|0)<255?y:255,y=F[s+1|0]+(F[r+1|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+1|0]=(y|0)<255?y:255,y=F[s+2|0]+(F[r+2|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+2|0]=(y|0)<255?y:255,y=F[s+3|0]+(F[r+3|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+3|0]=(y|0)<255?y:255,y=F[s+4|0]+(F[r+4|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+4|0]=(y|0)<255?y:255,y=F[s+5|0]+(F[r+5|0]+-120>>4)|0,y=(y|0)>0?y:0,m[s+5|0]=(y|0)<255?y:255,S=(S&255)+(F[r+6|0]+-120>>4)|0,S=(S|0)>0?S:0,m[s+6|0]=(S|0)<255?S:255,S=F[s+7|0]+(F[r+7|0]+-120>>4)|0,S=(S|0)>0?S:0,S=(S|0)<255?S:255,m[s+7|0]=S,r=r+8|0,s=s+a|0,E=E+1|0,(E|0)!=8;);}}function wu(r){r=r|0;var s=0,a=0;s=yr((F[r+223|0]+(F[r+-25|0]+(F[r+191|0]+(F[r+-26|0]+(F[r+159|0]+(F[r+-27|0]+(F[r+127|0]+(F[r+-28|0]+(F[r+95|0]+(F[r+-29|0]+(F[r+63|0]+(F[r+-30|0]+(F[r+31|0]+(F[r+-31|0]+(F[r+-32|0]+F[r+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[r+224|0]=s,m[r+225|0]=s>>>8,m[r+226|0]=s>>>16,m[r+227|0]=s>>>24,a=Pn,m[r+228|0]=a,m[r+229|0]=a>>>8,m[r+230|0]=a>>>16,m[r+231|0]=a>>>24,m[r+192|0]=s,m[r+193|0]=s>>>8,m[r+194|0]=s>>>16,m[r+195|0]=s>>>24,m[r+196|0]=a,m[r+197|0]=a>>>8,m[r+198|0]=a>>>16,m[r+199|0]=a>>>24,m[r+160|0]=s,m[r+161|0]=s>>>8,m[r+162|0]=s>>>16,m[r+163|0]=s>>>24,m[r+164|0]=a,m[r+165|0]=a>>>8,m[r+166|0]=a>>>16,m[r+167|0]=a>>>24,m[r+128|0]=s,m[r+129|0]=s>>>8,m[r+130|0]=s>>>16,m[r+131|0]=s>>>24,m[r+132|0]=a,m[r+133|0]=a>>>8,m[r+134|0]=a>>>16,m[r+135|0]=a>>>24,m[r+96|0]=s,m[r+97|0]=s>>>8,m[r+98|0]=s>>>16,m[r+99|0]=s>>>24,m[r+100|0]=a,m[r+101|0]=a>>>8,m[r+102|0]=a>>>16,m[r+103|0]=a>>>24,m[r+64|0]=s,m[r+65|0]=s>>>8,m[r+66|0]=s>>>16,m[r+67|0]=s>>>24,m[r+68|0]=a,m[r+69|0]=a>>>8,m[r+70|0]=a>>>16,m[r+71|0]=a>>>24,m[r+32|0]=s,m[r+33|0]=s>>>8,m[r+34|0]=s>>>16,m[r+35|0]=s>>>24,m[r+36|0]=a,m[r+37|0]=a>>>8,m[r+38|0]=a>>>16,m[r+39|0]=a>>>24,m[r|0]=s,m[r+1|0]=s>>>8,m[r+2|0]=s>>>16,m[r+3|0]=s>>>24,m[r+4|0]=a,m[r+5|0]=a>>>8,m[r+6|0]=a>>>16,m[r+7|0]=a>>>24}function cl(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0;e:{if(a=h[s+48>>2],!a||dt[a|0](s)|0)break e;return $o(r,6,4844),h[r>>2]}e:{t:{i:{n:{if(h[s+68>>2]){h[r+2308>>2]=0,a=0;break n}if(a=2,E=h[r+2308>>2],y=F[E+4863|0],(E|0)==2)break i;a=E}if(E=h[s+76>>2]-y|0,h[r+296>>2]=E>>4,S=h[s+84>>2]-y|0,h[r+300>>2]=S>>4,(E|0)<=-1&&(h[r+296>>2]=0),(S|0)>-1)break e;E=r+300|0;break t}h[r+296>>2]=0,E=r+300|0}h[E>>2]=0}if(y=y+15|0,E=y+h[s+88>>2]>>4,h[r+308>>2]=E,S=h[r+288>>2],s=y+h[s+80>>2]>>4,h[r+304>>2]=(s|0)>(S|0)?S:s,s=h[r+292>>2],(E|0)>(s|0)&&(h[r+308>>2]=s),(a|0)>=1)for(H=h[r+68>>2],te=h[r+104>>2],E=0;;){s=(E<<3)+r|0;e:{if(te){if(a=m[(r+E|0)+120|0],y=a,h[r+112>>2])break e;y=a+h[r+60>>2]|0;break e}y=h[r+60>>2]}a=y,L=s+2312|0,a=H?h[r+72>>2]+a|0:a;e:{if((a|0)>=1){S=(a|0)<63?a:63,a=(a|0)>0?S:0,G=s+2313|0,R=h[r+64>>2],(R|0)>=1&&(S=9-R|0,R=a>>>((R|0)>4?2:1)|0,S=(R|0)>(S|0)?S:R),S=(S|0)>1?S:1,m[G|0]=S,m[L|0]=S+(a<<1),m[s+2315|0]=(a|0)>39?2:(a|0)>14;break e}m[L|0]=0}m[s+2314|0]=0,S=s+2316|0,y=H?h[r+88>>2]+(h[r+72>>2]+y|0)|0:y,L=(y|0)>0;e:{if(!L){m[S|0]=0;break e}a=(y|0)<63?y:63,y=L?a:0,G=s+2317|0,L=h[r+64>>2],(L|0)>=1&&(a=9-L|0,L=y>>>((L|0)>4?2:1)|0,a=(L|0)>(a|0)?a:L),a=(a|0)>1?a:1,m[G|0]=a,m[S|0]=a+(y<<1),m[s+2319|0]=(y|0)>39?2:(y|0)>14}if(m[s+2318|0]=1,E=E+1|0,(E|0)==4)break}return 0}function Kl(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;y=Fn+-64|0,S=Ri[r+24>>1],a=Ri[r>>1],E=S+a|0,R=Ri[r+16>>1],G=Ri[r+8>>1],L=R+G|0,h[y+32>>2]=E-L,S=a-S|0,a=G-R|0,h[y+48>>2]=S-a,h[y+16>>2]=a+S,ke=E+L|0,h[y>>2]=ke,S=Ri[r+26>>1],a=Ri[r+2>>1],E=S+a|0,R=Ri[r+18>>1],G=Ri[r+10>>1],L=R+G|0,h[y+36>>2]=E-L,S=a-S|0,a=G-R|0,h[y+52>>2]=S-a,S=a+S|0,h[y+20>>2]=S,a=E+L|0,h[y+4>>2]=a,E=Ri[r+4>>1],R=Ri[r+28>>1],G=E-R|0,L=Ri[r+12>>1],H=Ri[r+20>>1],te=L-H|0,h[y+56>>2]=G-te,L=L+H|0,R=E+R|0,E=L+R|0,h[y+8>>2]=E,R=R-L|0,h[y+40>>2]=R,G=G+te|0,h[y+24>>2]=G,L=Ri[r+30>>1],H=Ri[r+6>>1],te=L+H|0,he=Ri[r+22>>1],ze=Ri[r+14>>1],Ye=he+ze|0,r=te+Ye|0,h[y+12>>2]=r,yt=H-L|0,he=ze-he|0,L=yt-he|0,h[y+60>>2]=L,H=te-Ye|0,h[y+44>>2]=H,te=he+yt|0,h[y+28>>2]=te,ke=ke+3|0,he=ke-r|0,ze=a-E|0,Ri[s+96>>1]=he-ze>>>3,r=r+ke|0,a=a+E|0,Ri[s+64>>1]=r-a>>>3,Ri[s+32>>1]=he+ze>>>3,Ri[s>>1]=r+a>>>3,r=h[y+16>>2]+3|0,a=r-te|0,E=S-G|0,Ri[s+224>>1]=a-E>>>3,r=r+te|0,S=S+G|0,Ri[s+192>>1]=r-S>>>3,Ri[s+160>>1]=a+E>>>3,Ri[s+128>>1]=r+S>>>3,r=h[y+32>>2]+3|0,S=r-H|0,a=h[y+36>>2],E=a-R|0,Ri[s+352>>1]=S-E>>>3,r=r+H|0,a=a+R|0,Ri[s+320>>1]=r-a>>>3,Ri[s+288>>1]=S+E>>>3,Ri[s+256>>1]=r+a>>>3,r=h[y+48>>2]+3|0,S=r-L|0,a=h[y+52>>2],y=h[y+56>>2],E=a-y|0,Ri[s+480>>1]=S-E>>>3,r=r+L|0,y=y+a|0,Ri[s+448>>1]=r-y>>>3,Ri[s+416>>1]=S+E>>>3,Ri[s+384>>1]=r+y>>>3}function Oa(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0;for(Ye=s+904|0;;){for(R=0;;){for(G=0;;){for(E=0;;){he=re(G,11),ke=re(R,33),te=re(H,264),L=F[(he+(ke+(te+1392|0)|0)|0)+E|0],yt=h[r+4>>2],a=h[r+8>>2];e:{if((a|0)>-1)break e;if(y=h[r+12>>2],y>>>0<Zn[r+20>>2]){S=F[y|0]|F[y+1|0]<<8|(F[y+2|0]<<16|F[y+3|0]<<24),h[r+12>>2]=y+3,a=a+24|0,h[r+8>>2]=a,h[r>>2]=h[r>>2]<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8;break e}Pr(r),a=h[r+8>>2]}ze=r,Lt=a,y=h[r>>2],L=re(L,yt)>>>8|0,S=y>>>a>>>0<=L>>>0;e:{if(!S){h[r>>2]=y+((L^-1)<<a),a=yt-L|0;break e}a=L+1|0}y=Mr(a)^24,h[ze+8>>2]=Lt-y,h[r+4>>2]=(a<<y)+-1,ze=(((s+te|0)+ke|0)+he|0)+E|0;e:{if(!S){a=Ir(r,8);break e}a=F[(((te+2448|0)+ke|0)+he|0)+E|0]}if(m[ze+907|0]=a,E=E+1|0,(E|0)==11)break}if(G=G+1|0,(G|0)==3)break}if(R=R+1|0,(R|0)==8)break}if(a=re(H,68)+Ye|0,S=te+Ye|0,E=S+3|0,h[a+1124>>2]=E,h[a+1120>>2]=S+234,y=S+201|0,h[a+1116>>2]=y,h[a+1112>>2]=y,h[a+1108>>2]=y,h[a+1104>>2]=y,h[a+1100>>2]=y,h[a+1096>>2]=y,h[a+1092>>2]=y,h[a+1088>>2]=y,h[a+1084>>2]=S+168,h[a+1080>>2]=S+135,h[a+1076>>2]=y,h[a+1072>>2]=S+102,h[a+1068>>2]=S+69,h[a+1064>>2]=S+36,h[a+1060>>2]=E,H=H+1|0,(H|0)==4)break}a=Ir(r,1),h[s+2236>>2]=a,a&&(Rt=s,Jt=Ir(r,8),m[Rt+2240|0]=Jt)}function Ll(r){r=r|0;var s=0,a=0;s=r,r=yr((F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[s+224|0]=r,m[s+225|0]=r>>>8,m[s+226|0]=r>>>16,m[s+227|0]=r>>>24,a=Pn,m[s+228|0]=a,m[s+229|0]=a>>>8,m[s+230|0]=a>>>16,m[s+231|0]=a>>>24,m[s+192|0]=r,m[s+193|0]=r>>>8,m[s+194|0]=r>>>16,m[s+195|0]=r>>>24,m[s+196|0]=a,m[s+197|0]=a>>>8,m[s+198|0]=a>>>16,m[s+199|0]=a>>>24,m[s+160|0]=r,m[s+161|0]=r>>>8,m[s+162|0]=r>>>16,m[s+163|0]=r>>>24,m[s+164|0]=a,m[s+165|0]=a>>>8,m[s+166|0]=a>>>16,m[s+167|0]=a>>>24,m[s+128|0]=r,m[s+129|0]=r>>>8,m[s+130|0]=r>>>16,m[s+131|0]=r>>>24,m[s+132|0]=a,m[s+133|0]=a>>>8,m[s+134|0]=a>>>16,m[s+135|0]=a>>>24,m[s+96|0]=r,m[s+97|0]=r>>>8,m[s+98|0]=r>>>16,m[s+99|0]=r>>>24,m[s+100|0]=a,m[s+101|0]=a>>>8,m[s+102|0]=a>>>16,m[s+103|0]=a>>>24,m[s+64|0]=r,m[s+65|0]=r>>>8,m[s+66|0]=r>>>16,m[s+67|0]=r>>>24,m[s+68|0]=a,m[s+69|0]=a>>>8,m[s+70|0]=a>>>16,m[s+71|0]=a>>>24,m[s+32|0]=r,m[s+33|0]=r>>>8,m[s+34|0]=r>>>16,m[s+35|0]=r>>>24,m[s+36|0]=a,m[s+37|0]=a>>>8,m[s+38|0]=a>>>16,m[s+39|0]=a>>>24,m[s|0]=r,m[s+1|0]=r>>>8,m[s+2|0]=r>>>16,m[s+3|0]=r>>>24,m[s+4|0]=a,m[s+5|0]=a>>>8,m[s+6|0]=a>>>16,m[s+7|0]=a>>>24}function Fc(r){r=r|0;var s=0,a=0;s=r,r=yr((F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[s+224|0]=r,m[s+225|0]=r>>>8,m[s+226|0]=r>>>16,m[s+227|0]=r>>>24,a=Pn,m[s+228|0]=a,m[s+229|0]=a>>>8,m[s+230|0]=a>>>16,m[s+231|0]=a>>>24,m[s+192|0]=r,m[s+193|0]=r>>>8,m[s+194|0]=r>>>16,m[s+195|0]=r>>>24,m[s+196|0]=a,m[s+197|0]=a>>>8,m[s+198|0]=a>>>16,m[s+199|0]=a>>>24,m[s+160|0]=r,m[s+161|0]=r>>>8,m[s+162|0]=r>>>16,m[s+163|0]=r>>>24,m[s+164|0]=a,m[s+165|0]=a>>>8,m[s+166|0]=a>>>16,m[s+167|0]=a>>>24,m[s+128|0]=r,m[s+129|0]=r>>>8,m[s+130|0]=r>>>16,m[s+131|0]=r>>>24,m[s+132|0]=a,m[s+133|0]=a>>>8,m[s+134|0]=a>>>16,m[s+135|0]=a>>>24,m[s+96|0]=r,m[s+97|0]=r>>>8,m[s+98|0]=r>>>16,m[s+99|0]=r>>>24,m[s+100|0]=a,m[s+101|0]=a>>>8,m[s+102|0]=a>>>16,m[s+103|0]=a>>>24,m[s+64|0]=r,m[s+65|0]=r>>>8,m[s+66|0]=r>>>16,m[s+67|0]=r>>>24,m[s+68|0]=a,m[s+69|0]=a>>>8,m[s+70|0]=a>>>16,m[s+71|0]=a>>>24,m[s+32|0]=r,m[s+33|0]=r>>>8,m[s+34|0]=r>>>16,m[s+35|0]=r>>>24,m[s+36|0]=a,m[s+37|0]=a>>>8,m[s+38|0]=a>>>16,m[s+39|0]=a>>>24,m[s|0]=r,m[s+1|0]=r>>>8,m[s+2|0]=r>>>16,m[s+3|0]=r>>>24,m[s+4|0]=a,m[s+5|0]=a>>>8,m[s+6|0]=a>>>16,m[s+7|0]=a>>>24}function Rc(r){var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;e:{t:{if(r){if(E=h[r+8>>2],te=h[E+40>>2],h[r+4>>2]){if(h[r+12>>2]=h[te>>2],!za(h[te+20>>2],E,3))return h[r>>2]=2,Wo(r),0;if(s=h[r+104>>2],a=s,S=s>>31,s=h[r+100>>2],L=yr(a,S,s,s>>31),a=Pn,G=h[E>>2],S=G,s=S>>31,s=s<<4|S>>>28,S=S<<4,H=r,R=s,s=S,S=G&65535,y=S,s=s+y|0,s>>>0<y>>>0&&(R=R+1|0),y=s+L|0,a=a+R|0,s=Ms(y,y>>>0<s>>>0?a+1|0:a,4),h[H+16>>2]=s,!s){h[r+20>>2]=0;break e}h[r+20>>2]=(s+(L<<2)|0)+(S<<2);i:{n:{if(h[E+92>>2]){if(he=h[E+100>>2],G=h[E+16>>2],S=h[E+12>>2],L=h[E+96>>2],a=L,s=a>>31,y=a,a=s,s=s<<5|y>>>27,R=a<<2|y>>>30,H=y<<5,a=y<<2,y=H+a|0,s=s+R|0,s=y>>>0<a>>>0?s+1|0:s,a=y+84|0,a>>>0<84&&(s=s+1|0),s=Ms(a,s,1),!s){h[r>>2]=1;break t}if(h[r+268>>2]=s,h[r+264>>2]=s,a=s,s=s+84|0,fl(a,S,G,s+H|0,L,he,0,4,s),h[E+92>>2])break n}if(s=h[h[r+12>>2]>>2],s+-7>>>0>3)break i}fc(),s=h[h[r+12>>2]>>2]}i:{if(s>>>0<11||(ua(),!h[h[r+12>>2]+28>>2]))break i;fc()}i:{if(!h[r+56>>2]|h[r+120>>2]<1||(s=r+136|0,h[s>>2])||nu(s,h[r+132>>2]))break i;break e}h[r+4>>2]=0}if(!Xl(r,h[r+16>>2],h[r+100>>2],h[r+104>>2],h[E+88>>2],2))break t;h[te+16>>2]=h[r+116>>2],r=1}else r=0;return r}return Wo(r),0}return h[r>>2]=1,Wo(r),0}function Pl(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0;S=Ri[r+2>>1],L=(re(S,20091)>>16)+S|0,y=Ri[r+8>>1],R=re(y,35468)>>16,E=Ri[r>>1]+4|0,a=R+E|0,r=F[s+32|0]+(L+a>>3)|0,r=(r|0)>0?r:0,m[s+32|0]=(r|0)<255?r:255,r=re(S,35468)>>16,S=F[s+33|0]+(r+a>>3)|0,S=(S|0)>0?S:0,m[s+33|0]=(S|0)<255?S:255,S=F[s+34|0]+(a-r>>3)|0,S=(S|0)>0?S:0,m[s+34|0]=(S|0)<255?S:255,a=F[s+35|0]+(a-L>>3)|0,a=(a|0)>0?a:0,m[s+35|0]=(a|0)<255?a:255,S=y+(re(y,20091)>>16)|0,a=S+E|0,y=F[s|0]+(a+L>>3)|0,y=(y|0)>0?y:0,m[s|0]=(y|0)<255?y:255,y=F[s+1|0]+(r+a>>3)|0,y=(y|0)>0?y:0,m[s+1|0]=(y|0)<255?y:255,y=F[s+2|0]+(a-r>>3)|0,y=(y|0)>0?y:0,m[s+2|0]=(y|0)<255?y:255,a=F[s+3|0]+(a-L>>3)|0,a=(a|0)>0?a:0,m[s+3|0]=(a|0)<255?a:255,a=E-R|0,y=F[s+64|0]+(a+L>>3)|0,y=(y|0)>0?y:0,m[s+64|0]=(y|0)<255?y:255,y=F[s+65|0]+(r+a>>3)|0,y=(y|0)>0?y:0,m[s+65|0]=(y|0)<255?y:255,y=F[s+66|0]+(a-r>>3)|0,y=(y|0)>0?y:0,m[s+66|0]=(y|0)<255?y:255,a=F[s+67|0]+(a-L>>3)|0,a=(a|0)>0?a:0,m[s+67|0]=(a|0)<255?a:255,E=E-S|0,a=F[s+96|0]+(E+L>>3)|0,a=(a|0)>0?a:0,m[s+96|0]=(a|0)<255?a:255,a=F[s+97|0]+(r+E>>3)|0,a=(a|0)>0?a:0,m[s+97|0]=(a|0)<255?a:255,r=F[s+98|0]+(E-r>>3)|0,r=(r|0)>0?r:0,m[s+98|0]=(r|0)<255?r:255,r=F[s+99|0]+(E-L>>3)|0,r=(r|0)>0?r:0,m[s+99|0]=(r|0)<255?r:255}function zs(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(H=S<<1&-4,H){for(H=y+H|0;R=re(F[r|0],19077)>>>8|0,E=F[a|0],G=R+(re(E,26149)>>>8|0)|0,L=G+-14234|0,te=(L>>>0<16384?L>>>6|0:G>>>0<14234?0:248)&248,G=F[s|0],E=R-(re(G,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,m[y|0]=te|E>>>5,L=E<<3&224,R=R+(re(G,33050)>>>8|0)|0,E=R+-17685|0,m[y+1|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),R=re(F[r+1|0],19077)>>>8|0,E=F[a|0],G=R+(re(E,26149)>>>8|0)|0,L=G+-14234|0,te=(L>>>0<16384?L>>>6|0:G>>>0<14234?0:248)&248,G=F[s|0],E=R-(re(G,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,m[y+2|0]=te|E>>>5,L=E<<3&224,R=R+(re(G,33050)>>>8|0)|0,E=R+-17685|0,m[y+3|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),a=a+1|0,s=s+1|0,r=r+2|0,y=y+4|0,(H|0)!=(y|0););y=H}S&1&&(r=re(F[r|0],19077)>>>8|0,a=F[a|0],S=r+(re(a,26149)>>>8|0)|0,H=S+-14234|0,H=(H>>>0<16384?H>>>6|0:S>>>0<14234?0:248)&248,s=F[s|0],a=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,S=a+8708|0,a=S>>>0<16384?S>>6:(a|0)<-8708?0:255,m[y|0]=H|a>>>5,r=r+(re(s,33050)>>>8|0)|0,s=r+-17685|0,m[y+1|0]=a<<3&224|(s>>>0<16384?s>>>9|0:r>>>0<17685?0:31))}function Fa(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(E=S<<2&-8,E){for(E=y+E|0;L=F[a|0],R=F[s|0],G=F[r|0],m[y+3|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,m[y+2|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,m[y|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,m[y+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],G=F[r+1|0],m[y+7|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,m[y+6|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,m[y+4|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,m[y+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,r=r+2|0,y=y+8|0,(E|0)!=(y|0););y=E}S&1&&(a=F[a|0],s=F[s|0],r=F[r|0],m[y+3|0]=255,r=re(r,19077)>>>8|0,S=r+(re(s,33050)>>>8|0)|0,E=S+-17685|0,m[y+2|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,S=r+(re(a,26149)>>>8|0)|0,E=S+-14234|0,m[y|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,r=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[y+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255)}function Ra(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(E=S<<2&-8,E){for(E=y+E|0;L=F[s|0],R=F[a|0],G=F[r|0],m[y+3|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,26149)>>>8|0)|0,te=H+-14234|0,m[y+2|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,H=G+(re(L,33050)>>>8|0)|0,te=H+-17685|0,m[y|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,L=G-(re(L,6419)>>>8|0)-(re(R,13320)>>>8)|0,R=L+8708|0,m[y+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[s|0],R=F[a|0],G=F[r+1|0],m[y+7|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,26149)>>>8|0)|0,te=H+-14234|0,m[y+6|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,H=G+(re(L,33050)>>>8|0)|0,te=H+-17685|0,m[y+4|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,L=G-(re(L,6419)>>>8|0)-(re(R,13320)>>>8)|0,R=L+8708|0,m[y+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,r=r+2|0,y=y+8|0,(E|0)!=(y|0););y=E}S&1&&(s=F[s|0],a=F[a|0],r=F[r|0],m[y+3|0]=255,r=re(r,19077)>>>8|0,S=r+(re(a,26149)>>>8|0)|0,E=S+-14234|0,m[y+2|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,S=r+(re(s,33050)>>>8|0)|0,E=S+-17685|0,m[y|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,r=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[y+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255)}function sa(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(E=S<<2&-8,E){for(E=y+E|0;L=F[a|0],R=F[s|0],G=F[r|0],m[y|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,m[y+3|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,m[y+1|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,m[y+2|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],G=F[r+1|0],m[y+4|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,m[y+7|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,m[y+5|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,m[y+6|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,r=r+2|0,y=y+8|0,(E|0)!=(y|0););y=E}S&1&&(a=F[a|0],s=F[s|0],r=F[r|0],m[y|0]=255,r=re(r,19077)>>>8|0,S=r+(re(s,33050)>>>8|0)|0,E=S+-17685|0,m[y+3|0]=E>>>0<16384?E>>>6|0:S>>>0<17685?0:255,S=r+(re(a,26149)>>>8|0)|0,E=S+-14234|0,m[y+1|0]=E>>>0<16384?E>>>6|0:S>>>0<14234?0:255,r=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[y+2|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255)}function hs(r){r=r|0,m[r+224|0]=-2139062144,m[r+225|0]=8421504,m[r+226|0]=32896,m[r+227|0]=128,m[r+228|0]=-2139062144,m[r+229|0]=8421504,m[r+230|0]=32896,m[r+231|0]=128,m[r+192|0]=-2139062144,m[r+193|0]=8421504,m[r+194|0]=32896,m[r+195|0]=128,m[r+196|0]=-2139062144,m[r+197|0]=8421504,m[r+198|0]=32896,m[r+199|0]=128,m[r+160|0]=-2139062144,m[r+161|0]=8421504,m[r+162|0]=32896,m[r+163|0]=128,m[r+164|0]=-2139062144,m[r+165|0]=8421504,m[r+166|0]=32896,m[r+167|0]=128,m[r+128|0]=-2139062144,m[r+129|0]=8421504,m[r+130|0]=32896,m[r+131|0]=128,m[r+132|0]=-2139062144,m[r+133|0]=8421504,m[r+134|0]=32896,m[r+135|0]=128,m[r+96|0]=-2139062144,m[r+97|0]=8421504,m[r+98|0]=32896,m[r+99|0]=128,m[r+100|0]=-2139062144,m[r+101|0]=8421504,m[r+102|0]=32896,m[r+103|0]=128,m[r+64|0]=-2139062144,m[r+65|0]=8421504,m[r+66|0]=32896,m[r+67|0]=128,m[r+68|0]=-2139062144,m[r+69|0]=8421504,m[r+70|0]=32896,m[r+71|0]=128,m[r+32|0]=-2139062144,m[r+33|0]=8421504,m[r+34|0]=32896,m[r+35|0]=128,m[r+36|0]=-2139062144,m[r+37|0]=8421504,m[r+38|0]=32896,m[r+39|0]=128,m[r|0]=-2139062144,m[r+1|0]=8421504,m[r+2|0]=32896,m[r+3|0]=128,m[r+4|0]=-2139062144,m[r+5|0]=8421504,m[r+6|0]=32896,m[r+7|0]=128}function hl(r){r=r|0;var s=0,a=0;s=r,r=s+-32|0,a=F[r|0]|F[r+1|0]<<8|(F[r+2|0]<<16|F[r+3|0]<<24),r=F[r+4|0]|F[r+5|0]<<8|(F[r+6|0]<<16|F[r+7|0]<<24),m[s+224|0]=a,m[s+225|0]=a>>>8,m[s+226|0]=a>>>16,m[s+227|0]=a>>>24,m[s+228|0]=r,m[s+229|0]=r>>>8,m[s+230|0]=r>>>16,m[s+231|0]=r>>>24,m[s+192|0]=a,m[s+193|0]=a>>>8,m[s+194|0]=a>>>16,m[s+195|0]=a>>>24,m[s+196|0]=r,m[s+197|0]=r>>>8,m[s+198|0]=r>>>16,m[s+199|0]=r>>>24,m[s+160|0]=a,m[s+161|0]=a>>>8,m[s+162|0]=a>>>16,m[s+163|0]=a>>>24,m[s+164|0]=r,m[s+165|0]=r>>>8,m[s+166|0]=r>>>16,m[s+167|0]=r>>>24,m[s+128|0]=a,m[s+129|0]=a>>>8,m[s+130|0]=a>>>16,m[s+131|0]=a>>>24,m[s+132|0]=r,m[s+133|0]=r>>>8,m[s+134|0]=r>>>16,m[s+135|0]=r>>>24,m[s+96|0]=a,m[s+97|0]=a>>>8,m[s+98|0]=a>>>16,m[s+99|0]=a>>>24,m[s+100|0]=r,m[s+101|0]=r>>>8,m[s+102|0]=r>>>16,m[s+103|0]=r>>>24,m[s+64|0]=a,m[s+65|0]=a>>>8,m[s+66|0]=a>>>16,m[s+67|0]=a>>>24,m[s+68|0]=r,m[s+69|0]=r>>>8,m[s+70|0]=r>>>16,m[s+71|0]=r>>>24,m[s+32|0]=a,m[s+33|0]=a>>>8,m[s+34|0]=a>>>16,m[s+35|0]=a>>>24,m[s+36|0]=r,m[s+37|0]=r>>>8,m[s+38|0]=r>>>16,m[s+39|0]=r>>>24,m[s|0]=a,m[s+1|0]=a>>>8,m[s+2|0]=a>>>16,m[s+3|0]=a>>>24,m[s+4|0]=r,m[s+5|0]=r>>>8,m[s+6|0]=r>>>16,m[s+7|0]=r>>>24}function Jo(r){var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0;ke=2,G=h[r>>2];e:{if(G>>>0>12)break e;L=h[r+8>>2],S=h[r+4>>2];t:{i:{if(G>>>0>=11){if(a=h[r+40>>2],y=a>>31,R=h[r+36>>2],s=R>>31,te=h[r+32>>2],E=te>>31,ze=y^a+y,a=(S+1|0)/2|0,Rt=(ze|0)>=(a|0),R=s^s+R,Jt=(R|0)>=(a|0),s=E^E+te,oi=(s|0)>=(S|0),y=S,E=L+-1|0,te=E,Ye=E>>31,H=yr(E,Ye,s,0),E=y+H|0,yt=y>>31,s=yt+Pn|0,s=E>>>0<H>>>0?s+1|0:s,he=!s&E>>>0<=Zn[r+48>>2]|s>>>0<0,s=a,L=((L+1|0)/2|0)+-1|0,E=L,H=E>>31,R=yr(E,H,R,0),L=s+R|0,Lt=s>>31,a=Lt+Pn|0,a=L>>>0<R>>>0?a+1|0:a,he=he&(!a&L>>>0<=Zn[r+52>>2]|a>>>0<0),L=yr(ze,0,E,H)+s|0,a=Lt+Pn|0,a=L>>>0<s>>>0?a+1|0:a,s=L,s=Rt&(Jt&(oi&(he&(!a&s>>>0<=Zn[r+56>>2]|a>>>0<0))))&h[r+16>>2]!=0&h[r+20>>2]!=0&h[r+24>>2]!=0,(G|0)!=12)break i;if(!h[r+28>>2]||(G=h[r+44>>2],a=G>>31,a=a^a+G,!(s&(a|0)>=(S|0))))break e;if(S=yr(a,0,te,Ye)+y|0,s=yt+Pn|0,s=S>>>0<y>>>0?s+1|0:s,y=S,!s&y>>>0<=Zn[r+60>>2]|s>>>0<0)break t;break e}if(!h[r+16>>2]||(s=h[r+20>>2],y=s>>31,s=y^s+y,y=re(F[G+1157|0],S),(s|0)<(y|0)))break e;if(S=L+-1|0,S=yr(S,S>>31,s,0),s=S+y|0,y=Pn+(y>>31)|0,y=s>>>0<S>>>0?y+1|0:y,!y&s>>>0<=Zn[r+24>>2]|y>>>0<0)break t;break e}if(!s)break e}ke=0}return ke}function Vu(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{if(L=s,L){if(S=a,!S)break a;if(E=y,!E)break s;if(E=Mr(E)-Mr(L)|0,E>>>0<=31)break u;break t}if((y|0)==1&a>>>0>=0|y>>>0>1)break t;return s=(r>>>0)/(a>>>0)|0,Pn=0,s}if(S=y,!r)break r;if(!S||S+-1&S)break l;return r=L>>>(yp(S)&31)|0,Pn=0,r}if(!(S+-1&S))break o;H=(Mr(S)+33|0)-Mr(L)|0,R=0-H|0;break i}H=E+1|0,R=63-E|0;break i}return r=(L>>>0)/(S>>>0)|0,Pn=0,r}if(E=Mr(S)-Mr(L)|0,E>>>0<31)break n;break t}if((S|0)==1)break e;return a=r,r=yp(S),y=r&31,32<=(r&63)>>>0?(E=0,r=s>>>y|0):(E=s>>>y|0,r=((1<<y)-1&s)<<32-y|a>>>y),Pn=E,r}H=E+1|0,R=63-E|0}if(S=s,L=r,E=H&63,G=E&31,32<=(E&63)>>>0?(E=0,he=S>>>G|0):(E=S>>>G|0,he=((1<<G)-1&S)<<32-G|L>>>G),r=R&63,R=r&31,32<=(r&63)>>>0?(S=L<<R,r=0):(S=(1<<R)-1&L>>>32-R|s<<R,r=L<<R),s=S,H)for(L=y+-1|0,S=a+-1|0,(S|0)!=-1&&(L=L+1|0),R=S;S=he,te=E<<1|S>>>31,E=S<<1|s>>>31,ke=te,S=te,te=E,G=L-((R>>>0<E>>>0)+S|0)|0,S=G>>31,G=G>>31,E=a&G,he=te-E|0,E=ke-((y&S)+(te>>>0<E>>>0)|0)|0,S=s<<1|r>>>31,r=ze|r<<1,s=S|Ye,ke=0,te=G&1,ze=te,H=H+-1|0,!!H;);return Pn=ke|(s<<1|r>>>31),te|r<<1}r=0,s=0}return Pn=s,r}function Ba(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(H=S<<1&-4,H){for(H=y+H|0;L=F[a|0],E=re(F[r|0],19077)>>>8|0,te=F[s|0],R=E+(re(te,33050)>>>8|0)|0,G=R+-17685|0,m[y+1|0]=(G>>>0<16384?G>>>6|0:R>>>0<17685?0:240)|15,R=E+(re(L,26149)>>>8|0)|0,G=R+-14234|0,L=E-(re(te,6419)>>>8|0)-(re(L,13320)>>>8)|0,E=L+8708|0,m[y|0]=(G>>>0<16384?G>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),L=F[a|0],E=re(F[r+1|0],19077)>>>8|0,te=F[s|0],R=E+(re(te,33050)>>>8|0)|0,G=R+-17685|0,m[y+3|0]=(G>>>0<16384?G>>>6|0:R>>>0<17685?0:240)|15,R=E+(re(L,26149)>>>8|0)|0,G=R+-14234|0,L=E-(re(te,6419)>>>8|0)-(re(L,13320)>>>8)|0,E=L+8708|0,m[y+2|0]=(G>>>0<16384?G>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),a=a+1|0,s=s+1|0,r=r+2|0,y=y+4|0,(H|0)!=(y|0););y=H}S&1&&(a=F[a|0],r=re(F[r|0],19077)>>>8|0,s=F[s|0],S=r+(re(s,33050)>>>8|0)|0,H=S+-17685|0,m[y+1|0]=(H>>>0<16384?H>>>6|0:S>>>0<17685?0:240)|15,H=y,y=r+(re(a,26149)>>>8|0)|0,S=y+-14234|0,r=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[H|0]=(S>>>0<16384?S>>>6|0:y>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(r|0)<-8708?0:15))}function aa(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;he=Fn-592|0,Fn=he,E=s+24|0,L=no(E,1),G=Qo(a,0,r<<2);e:{t:{i:{n:{if(L){if(a=no(E,1),Ye=(no(E,no(E,1)?8:1)<<2)+G|0,yt=1,h[Ye>>2]=yt,(a|0)!=1)break n;Ye=(no(E,8)<<2)+G|0,yt=1,h[Ye>>2]=yt;break n}if(te=Qo(he,0,76),L=no(E,4)+4|0,(L|0)>19)break t;if(a=0,(L|0)>0)for(;Ye=(F[a+1232|0]<<2)+te|0,yt=no(E,3),h[Ye>>2]=yt,a=a+1|0,(L|0)!=(a|0););if(!ks(te+80|0,7,te,19)||(L=r,no(E,1)&&(L=no(E,(no(E,3)<<1)+2|0)+2|0,(L|0)>(r|0))))break i;if((r|0)<1)break n;for(ke=8,a=0;;){if(!L)break n;S=h[s+44>>2],(S|0)>=32&&(Ce(E),S=h[s+44>>2]),ze=S,R=h[s+28>>2],H=S&63,S=H&31,S=(te+80|0)+(((32<=(H&63)>>>0?R>>>S|0:((1<<S)-1&R)<<32-S|h[s+24>>2]>>>S)&127)<<2)|0,h[s+44>>2]=ze+F[S|0],R=dn[S+2>>1];o:{if(R>>>0<=15){h[(a<<2)+G>>2]=R,ke=R||ke,a=a+1|0;break o}if(S=R+-16|0,H=no(E,F[S+1251|0])+F[S+1254|0]|0,S=H+a|0,(S|0)>(r|0))break i;if((H|0)<1)break o;for(R=(R|0)==16?ke:0;h[(a<<2)+G>>2]=R,a=a+1|0,(S|0)!=(a|0););a=S}if(L=L+-1|0,!((a|0)<(r|0)))break}}if(h[s+48>>2])break t;if(a=ks(y,8,G,r),a)break e;break t}h[s>>2]=3}h[s>>2]=3,a=0}return Fn=he+592|0,a}function Wr(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0;if(a>>>0>=512)return yu(r|0,s|0,a|0)|0,r|0;S=r+a|0;e:{if(!((r^s)&3)){t:{if((a|0)<1){a=r;break t}if(!(r&3)){a=r;break t}for(a=r;;){if(m[a|0]=F[s|0],s=s+1|0,a=a+1|0,a>>>0>=S>>>0)break t;if(!(a&3))break}}y=S&-4;t:{if(y>>>0<64||(E=y+-64|0,a>>>0>E>>>0))break t;for(;h[a>>2]=h[s>>2],h[a+4>>2]=h[s+4>>2],h[a+8>>2]=h[s+8>>2],h[a+12>>2]=h[s+12>>2],h[a+16>>2]=h[s+16>>2],h[a+20>>2]=h[s+20>>2],h[a+24>>2]=h[s+24>>2],h[a+28>>2]=h[s+28>>2],h[a+32>>2]=h[s+32>>2],h[a+36>>2]=h[s+36>>2],h[a+40>>2]=h[s+40>>2],h[a+44>>2]=h[s+44>>2],h[a+48>>2]=h[s+48>>2],h[a+52>>2]=h[s+52>>2],h[a+56>>2]=h[s+56>>2],h[a+60>>2]=h[s+60>>2],s=s- -64|0,a=a- -64|0,a>>>0<=E>>>0;);}if(a>>>0>=y>>>0)break e;for(;h[a>>2]=h[s>>2],s=s+4|0,a=a+4|0,a>>>0<y>>>0;);break e}if(S>>>0<4){a=r;break e}if(y=S+-4|0,y>>>0<r>>>0){a=r;break e}for(a=r;m[a|0]=F[s|0],m[a+1|0]=F[s+1|0],m[a+2|0]=F[s+2|0],m[a+3|0]=F[s+3|0],s=s+4|0,a=a+4|0,a>>>0<=y>>>0;);}if(a>>>0<S>>>0)for(;m[a|0]=F[s|0],s=s+1|0,a=a+1|0,(S|0)!=(a|0););return r|0}function va(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(L=S&-2,L){for(L=re(L,3)+y|0;R=F[a|0],E=re(F[r|0],19077)>>>8|0,te=F[s|0],G=E+(re(te,33050)>>>8|0)|0,H=G+-17685|0,m[y+2|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,G=E+(re(R,26149)>>>8|0)|0,H=G+-14234|0,m[y|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,R=E-(re(te,6419)>>>8|0)-(re(R,13320)>>>8)|0,E=R+8708|0,m[y+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[a|0],E=re(F[r+1|0],19077)>>>8|0,te=F[s|0],G=E+(re(te,33050)>>>8|0)|0,H=G+-17685|0,m[y+5|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,G=E+(re(R,26149)>>>8|0)|0,H=G+-14234|0,m[y+3|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,R=E-(re(te,6419)>>>8|0)-(re(R,13320)>>>8)|0,E=R+8708|0,m[y+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,r=r+2|0,y=y+6|0,(L|0)!=(y|0););y=L}S&1&&(a=F[a|0],r=re(F[r|0],19077)>>>8|0,s=F[s|0],S=r+(re(s,33050)>>>8|0)|0,L=S+-17685|0,m[y+2|0]=L>>>0<16384?L>>>6|0:S>>>0<17685?0:255,S=r+(re(a,26149)>>>8|0)|0,L=S+-14234|0,m[y|0]=L>>>0<16384?L>>>6|0:S>>>0<14234?0:255,r=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[y+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255)}function Ml(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(L=S&-2,L){for(L=re(L,3)+y|0;R=F[s|0],E=re(F[r|0],19077)>>>8|0,te=F[a|0],G=E+(re(te,26149)>>>8|0)|0,H=G+-14234|0,m[y+2|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,G=E+(re(R,33050)>>>8|0)|0,H=G+-17685|0,m[y|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,R=E-(re(R,6419)>>>8|0)-(re(te,13320)>>>8)|0,E=R+8708|0,m[y+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[s|0],E=re(F[r+1|0],19077)>>>8|0,te=F[a|0],G=E+(re(te,26149)>>>8|0)|0,H=G+-14234|0,m[y+5|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,G=E+(re(R,33050)>>>8|0)|0,H=G+-17685|0,m[y+3|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,R=E-(re(R,6419)>>>8|0)-(re(te,13320)>>>8)|0,E=R+8708|0,m[y+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,r=r+2|0,y=y+6|0,(L|0)!=(y|0););y=L}S&1&&(s=F[s|0],r=re(F[r|0],19077)>>>8|0,a=F[a|0],S=r+(re(a,26149)>>>8|0)|0,L=S+-14234|0,m[y+2|0]=L>>>0<16384?L>>>6|0:S>>>0<14234?0:255,S=r+(re(s,33050)>>>8|0)|0,L=S+-17685|0,m[y|0]=L>>>0<16384?L>>>6|0:S>>>0<17685?0:255,r=r-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=r+8708|0,m[y+1|0]=s>>>0<16384?s>>>6|0:(r|0)<-8708?0:255)}function qu(r,s){var a=0,y=0,S=0;e:{if(!r)break e;if(!s){if(h[r>>2])break e;return h[r>>2]=2,h[r+4>>2]=0,h[r+8>>2]=5281,0}if(!h[r+4>>2]&&!Yo(r,s))break e;t:{if(!cl(r,s)){i:{if(!vu(r,s))break i;h[r+2300>>2]=0;n:{if(h[r+308>>2]>=1)for(S=r+12|0;;){if(y=h[r+312>>2],!ya(S,r))break n;if(h[r+2296>>2]<h[r+288>>2])for(a=(re(a&y,28)+r|0)+316|0;;){if(!As(r,a)){if(a=0,h[r>>2])break i;h[r>>2]=7,h[r+4>>2]=0,h[r+8>>2]=5412;break i}if(y=h[r+2296>>2]+1|0,h[r+2296>>2]=y,!((y|0)<h[r+288>>2]))break}if(a=h[r+2256>>2]+-2|0,m[a|0]=0,m[a+1|0]=0,h[r+2296>>2]=0,h[r+2248>>2]=0,!Nc(r,s)){if(a=0,h[r>>2])break i;h[r>>2]=6,h[r+4>>2]=0,h[r+8>>2]=5447;break i}if(a=h[r+2300>>2]+1|0,h[r+2300>>2]=a,!((a|0)<h[r+308>>2]))break}o:{if(h[r+148>>2]<1||dt[h[2559]](r+124|0)|0)break o;a=0;break i}a=1;break i}if(a=0,h[r>>2])break i;h[r>>2]=7,h[r+4>>2]=0,h[r+8>>2]=5371}if(h0(r,s)&a)break t}return dt[h[2562]](r+124|0),u0(r),Rr(h[r+2288>>2]),h[r+2288>>2]=0,h[r+2292>>2]=0,h[r+12>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+4>>2]=0,0}h[r+4>>2]=0,a=1}return a}function xu(r){var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0;for(s=r+12|0,R=Ir(s,7),Ir(s,1)&&(he=Us(s,4)),Ir(s,1)&&(ke=Us(s,4)),Ir(s,1)&&(ze=Us(s,4)),Ir(s,1)&&(Ye=Us(s,4)),Ir(s,1)&&(yt=Us(s,4)),Lt=h[r+104>>2],L=r+776|0,G=L+24|0,H=L+16|0,te=L+8|0;;){e:{t:{if(Lt){s=m[(r+E|0)+116|0]+(h[r+112>>2]?0:R)|0;break t}if(s=R,!E)break t;a=h[G+4>>2],s=(E<<5)+r|0,h[s+800>>2]=h[G>>2],h[s+804>>2]=a,a=h[H+4>>2],h[s+792>>2]=h[H>>2],h[s+796>>2]=a,a=h[te+4>>2],h[s+784>>2]=h[te>>2],h[s+788>>2]=a,a=h[L+4>>2],h[s+776>>2]=h[L>>2],h[s+780>>2]=a;break e}a=(E<<5)+r|0,S=s+yt|0,h[a+800>>2]=S,y=s+Ye|0,y=(y|0)<117?y:117,h[a+792>>2]=F[((y|0)>0?y:0)+4448|0],y=(s|0)<127?s:127,h[a+780>>2]=dn[(((y|0)>0?y:0)<<1)+4576>>1],y=s+he|0,y=(y|0)<127?y:127,h[a+776>>2]=F[((y|0)>0?y:0)+4448|0],S=(S|0)<127?S:127,h[a+796>>2]=dn[(((S|0)>0?S:0)<<1)+4576>>1],S=s+ke|0,S=(S|0)<127?S:127,h[a+784>>2]=F[((S|0)>0?S:0)+4448|0]<<1,s=s+ze|0,s=(s|0)<127?s:127,s=re(dn[(((s|0)>0?s:0)<<1)+4576>>1],101581),h[a+788>>2]=s>>>0<524288?8:s>>>16|0}if(E=E+1|0,(E|0)==4)break}}function Ws(r,s,a,y,S,E,L){var R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0,_s=0,Sa=0,yl=0,Ju=0;if((y|0)>=1)for(ir=S<<1|1,Er=re(s,3),_s=0-s|0,Sa=re(s,-3),yl=0-(s<<2)|0,Rt=s<<1,Ju=0-Rt|0,Jt=h[2547],H=h[2548],oi=h[2546],te=h[2549];;){S=y,Fi=r+Ju|0,G=F[Fi|0],wi=r+s|0,Ye=F[wi|0],R=G-Ye|0,yt=r+_s|0,y=F[yt|0],ze=F[r|0];e:{if((F[R+te|0]+(F[te+(y-ze|0)|0]<<2)|0)>(ir|0)||(Ki=r+Sa|0,ke=F[Ki|0],F[te+(F[r+yl|0]-ke|0)|0]>(E|0)|F[te+(ke-G|0)|0]>(E|0))||(he=F[te+(G-y|0)|0],(he|0)>(E|0))||(on=r+Rt|0,Lt=F[on|0],F[te+(F[r+Er|0]-Lt|0)|0]>(E|0)|F[te+(Lt-Ye|0)|0]>(E|0))||(vn=F[te+(Ye-ze|0)|0],(vn|0)>(E|0)))break e;if(R=m[R+oi|0]+re(ze-y|0,3)|0,!((vn|0)<=(L|0)&&(he|0)<=(L|0))){G=m[(R+4>>3)+Jt|0],m[yt|0]=F[(m[(R+3>>3)+Jt|0]+y|0)+H|0],m[r|0]=F[(ze-G|0)+H|0];break e}he=ke,R=m[R+oi|0],ke=re(R,9)+63>>7,m[Ki|0]=F[(he+ke|0)+H|0],he=G,G=re(R,18)+63>>7,m[Fi|0]=F[(he+G|0)+H|0],he=y,y=re(R,27)+63>>7,m[yt|0]=F[(he+y|0)+H|0],m[r|0]=F[(ze-y|0)+H|0],m[wi|0]=F[(Ye-G|0)+H|0],m[on|0]=F[(Lt-ke|0)+H|0]}if(y=S+-1|0,r=r+a|0,!((S|0)>1))break}}function Dl(r,s,a){var y=0,S=0,E=0,L=0,R=0,G=0;if(y=iu(1,0,272),!y)return 0;h[y>>2]=0,h[y+4>>2]=2,mn(),E=h[r>>2],h[y+100>>2]=E,S=h[r+4>>2],h[y+8>>2]=r+24,h[y+104>>2]=S,h[r+28>>2]=S,h[r+24>>2]=E,h[r- -64>>2]=r,h[y>>2]=0,ve(y+24|0,s,a);e:{t:{i:{if(!cn(h[r>>2],h[r+4>>2],1,y,0))break i;n:{o:{if(h[y+176>>2]!=1|h[y+180>>2]!=3|h[y+120>>2]>0)break o;if(a=h[y+164>>2],(a|0)<1)break n;for(s=h[y+168>>2],S=0;;){if(E=s+re(S,548)|0,F[h[E+4>>2]]|F[h[E+8>>2]]|F[h[E+12>>2]])break o;if(S=S+1|0,(a|0)==(S|0))break}break n}if(h[r+132>>2]=0,s=h[y+104>>2],a=s,S=s>>31,s=h[y+100>>2],L=yr(a,S,s,s>>31),a=Pn,G=y,S=h[r>>2],s=S>>31,s=s<<4|S>>>28,E=S<<4,R=S&65535,S=R,E=E+S|0,E>>>0<S>>>0&&(s=s+1|0),S=E+L|0,s=s+a|0,s=Ms(S,S>>>0<E>>>0?s+1|0:s,4),h[G+16>>2]=s,s)break t;h[y+20>>2]=0,h[y>>2]=1;break i}if(h[r+132>>2]=1,h[y+20>>2]=0,s=h[y+104>>2],a=s,S=s>>31,s=h[y+100>>2],s=Ms(yr(a,S,s,s>>31),Pn,1),h[y+16>>2]=s,s)break e;h[y>>2]=1}return Wo(y),Rr(y),0}h[y+20>>2]=(s+(L<<2)|0)+(R<<2)}return h[r+20>>2]=y,1}function gs(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0;for(ke=0-s|0,te=s<<2,G=te+r|0,ze=0-(s<<1)|0,Ye=a<<1|1,r=h[2548],a=h[2547],yt=h[2546],he=h[2549];y=S+G|0,L=y+ke|0,H=F[L|0],R=F[y|0],E=F[y+ze|0]-F[s+y|0]|0,((F[he+(H-R|0)|0]<<2)+F[E+he|0]|0)<=(Ye|0)&&(E=m[E+yt|0]+re(R-H|0,3)|0,Lt=m[(E+4>>3)+a|0],m[L|0]=F[(H+m[(E+3>>3)+a|0]|0)+r|0],m[y|0]=F[(R-Lt|0)+r|0]),S=S+1|0,(S|0)!=16;);for(G=G+te|0,S=0;y=S+G|0,L=y+ke|0,H=F[L|0],R=F[y|0],E=F[y+ze|0]-F[s+y|0]|0,((F[he+(H-R|0)|0]<<2)+F[E+he|0]|0)<=(Ye|0)&&(E=m[E+yt|0]+re(R-H|0,3)|0,Lt=m[(E+4>>3)+a|0],m[L|0]=F[(H+m[(E+3>>3)+a|0]|0)+r|0],m[y|0]=F[(R-Lt|0)+r|0]),S=S+1|0,(S|0)!=16;);for(H=G+te|0,S=0;y=S+H|0,R=y+ke|0,te=F[R|0],G=F[y|0],L=F[y+ze|0]-F[s+y|0]|0,((F[he+(te-G|0)|0]<<2)+F[L+he|0]|0)<=(Ye|0)&&(L=m[L+yt|0]+re(G-te|0,3)|0,E=m[(L+4>>3)+a|0],m[R|0]=F[(te+m[(L+3>>3)+a|0]|0)+r|0],m[y|0]=F[(G-E|0)+r|0]),S=S+1|0,(S|0)!=16;);}function Cn(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;for(H=r+4|0,ke=a<<1|1,a=h[2548],te=h[2547],ze=h[2546],he=h[2549];y=H+re(s,S)|0,L=y+-1|0,R=F[L|0],G=F[y|0],E=F[y+-2|0]-F[y+1|0]|0,((F[he+(R-G|0)|0]<<2)+F[E+he|0]|0)<=(ke|0)&&(E=m[E+ze|0]+re(G-R|0,3)|0,Ye=m[(E+4>>3)+te|0],m[L|0]=F[(R+m[(E+3>>3)+te|0]|0)+a|0],m[y|0]=F[(G-Ye|0)+a|0]),S=S+1|0,(S|0)!=16;);for(H=r+8|0,S=0;y=H+re(s,S)|0,L=y+-1|0,R=F[L|0],G=F[y|0],E=F[y+-2|0]-F[y+1|0]|0,((F[he+(R-G|0)|0]<<2)+F[E+he|0]|0)<=(ke|0)&&(E=m[E+ze|0]+re(G-R|0,3)|0,Ye=m[(E+4>>3)+te|0],m[L|0]=F[(R+m[(E+3>>3)+te|0]|0)+a|0],m[y|0]=F[(G-Ye|0)+a|0]),S=S+1|0,(S|0)!=16;);for(G=r+12|0,S=0;r=G+re(s,S)|0,H=r+-1|0,y=F[H|0],R=F[r|0],L=F[r+-2|0]-F[r+1|0]|0,((F[he+(y-R|0)|0]<<2)+F[L+he|0]|0)<=(ke|0)&&(L=m[L+ze|0]+re(R-y|0,3)|0,E=m[(L+4>>3)+te|0],m[H|0]=F[(y+m[(L+3>>3)+te|0]|0)+a|0],m[r|0]=F[(R-E|0)+a|0]),S=S+1|0,(S|0)!=16;);}function No(r,s){r=r|0,s=s|0;var a=0;r=Ri[r>>1]+4>>3,a=r+F[s|0]|0,a=(a|0)>0?a:0,m[s|0]=(a|0)<255?a:255,a=r+F[s+1|0]|0,a=(a|0)>0?a:0,m[s+1|0]=(a|0)<255?a:255,a=r+F[s+2|0]|0,a=(a|0)>0?a:0,m[s+2|0]=(a|0)<255?a:255,a=r+F[s+3|0]|0,a=(a|0)>0?a:0,m[s+3|0]=(a|0)<255?a:255,a=r+F[s+32|0]|0,a=(a|0)>0?a:0,m[s+32|0]=(a|0)<255?a:255,a=r+F[s+33|0]|0,a=(a|0)>0?a:0,m[s+33|0]=(a|0)<255?a:255,a=r+F[s+34|0]|0,a=(a|0)>0?a:0,m[s+34|0]=(a|0)<255?a:255,a=r+F[s+35|0]|0,a=(a|0)>0?a:0,m[s+35|0]=(a|0)<255?a:255,a=r+F[s+64|0]|0,a=(a|0)>0?a:0,m[s+64|0]=(a|0)<255?a:255,a=r+F[s+65|0]|0,a=(a|0)>0?a:0,m[s+65|0]=(a|0)<255?a:255,a=r+F[s+66|0]|0,a=(a|0)>0?a:0,m[s+66|0]=(a|0)<255?a:255,a=r+F[s+67|0]|0,a=(a|0)>0?a:0,m[s+67|0]=(a|0)<255?a:255,a=r+F[s+96|0]|0,a=(a|0)>0?a:0,m[s+96|0]=(a|0)<255?a:255,a=r+F[s+97|0]|0,a=(a|0)>0?a:0,m[s+97|0]=(a|0)<255?a:255,a=r+F[s+98|0]|0,a=(a|0)>0?a:0,m[s+98|0]=(a|0)<255?a:255,r=r+F[s+99|0]|0,r=(r|0)>0?r:0,m[s+99|0]=(r|0)<255?r:255}function Vr(r,s,a,y,S,E,L){var R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0,wi=0,Ki=0,on=0,vn=0,ir=0,Er=0,_s=0;if((y|0)>=1)for(wi=S<<1|1,Ki=re(s,3),on=0-s|0,vn=re(s,-3),ir=0-(s<<2)|0,Rt=s<<1,Er=0-Rt|0,_s=h[2546],te=h[2548],ze=h[2547],H=h[2549];;){S=y,Jt=r+Er|0,G=F[Jt|0],oi=r+s|0,he=F[oi|0],Ye=G-he|0,Lt=r+on|0,y=F[Lt|0],ke=F[r|0];e:{if((F[Ye+H|0]+(F[H+(y-ke|0)|0]<<2)|0)>(wi|0)||(R=F[r+vn|0],F[H+(F[r+ir|0]-R|0)|0]>(E|0)|F[H+(R-G|0)|0]>(E|0))||(yt=F[H+(G-y|0)|0],(yt|0)>(E|0))||(R=F[r+Rt|0],F[H+(F[r+Ki|0]-R|0)|0]>(E|0)|F[H+(R-he|0)|0]>(E|0))||(Fi=F[H+(he-ke|0)|0],(Fi|0)>(E|0)))break e;if(R=re(ke-y|0,3),!((Fi|0)<=(L|0)&&(yt|0)<=(L|0))){G=m[Ye+_s|0]+R|0,he=m[(G+4>>3)+ze|0],m[Lt|0]=F[(m[(G+3>>3)+ze|0]+y|0)+te|0],m[r|0]=F[(ke-he|0)+te|0];break e}Ye=m[(R+3>>3)+ze|0],yt=G,G=m[(R+4>>3)+ze|0],R=G+1>>1,m[Jt|0]=F[(yt+R|0)+te|0],m[Lt|0]=F[(y+Ye|0)+te|0],m[r|0]=F[(ke-G|0)+te|0],m[oi|0]=F[(he-R|0)+te|0]}if(y=S+-1|0,r=r+a|0,!((S|0)>1))break}}function Po(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;e:{t:switch(a|0){case 0:dt[h[2734]](r,s,y);return;case 1:dt[h[2735]](r,s,y);return;case 7:dt[h[2735]](r,s,y),dt[h[2664]](y,0,s,1,0);return;case 2:dt[h[2736]](r,s,y);return;case 3:Wr(y,r,s<<2);return;case 8:R=Wr(y,r,s<<2),G=0,H=s,te=1,he=0,L=h[2664],dt[L](R|0,G|0,H|0,te|0,he|0);return;case 4:if((s|0)<1)break e;for(a=(s<<2)+r|0;s=h[r>>2],s=s<<24|s<<8&16711680|(s>>>8&65280|s>>>24),m[y|0]=s,m[y+1|0]=s>>>8,m[y+2|0]=s>>>16,m[y+3|0]=s>>>24,y=y+4|0,r=r+4|0,r>>>0<a>>>0;);break e;case 9:if((s|0)>=1)for(E=(s<<2)+r|0,a=y;S=h[r>>2],S=S<<24|S<<8&16711680|(S>>>8&65280|S>>>24),m[a|0]=S,m[a+1|0]=S>>>8,m[a+2|0]=S>>>16,m[a+3|0]=S>>>24,a=a+4|0,r=r+4|0,r>>>0<E>>>0;);dt[h[2664]](y,1,s,1,0);return;case 5:dt[h[2737]](r,s,y);return;case 10:dt[h[2737]](r,s,y),dt[h[2665]](y,s,1,0);return;case 6:break t;default:break e}dt[h[2738]](r,s,y)}}function os(r,s,a){var y=0,S=0,E=0;y=Fn-160|0,Fn=y,h[y+16>>2]=1,h[y+12>>2]=s,h[y+8>>2]=r,h[y+156>>2]=0,S=y,E=Il(r,s,0,0,0,y+156|0,0,y+8|0),h[S+48>>2]=E,!h[y+156>>2]|(h[y+48>>2]!=7?h[y+48>>2]:0)||(h[y+48>>2]=4),r=h[y+48>>2];e:{if(r)break e;wp(y+48|0),r=h[y+20>>2],h[y+112>>2]=r+h[y+8>>2],h[y+108>>2]=h[y+12>>2]-r,Yh(a,y+48|0);t:{if(!h[y+40>>2]){if(s=ko(),!s){r=1;break e}h[s+2348>>2]=h[y+24>>2],h[s+2352>>2]=h[y+28>>2];i:{if(Yo(s,y+48|0)&&(r=Zl(h[y+48>>2],h[y+52>>2],h[a+20>>2],h[a>>2]),r||(h[s+148>>2]=0,Nh(h[a+20>>2],s),r=0,qu(s,y+48|0))))break i;r=h[s>>2]}js(s);break t}s=iu(1,0,272),r=0;i:{if(!s)break i;h[s>>2]=0,h[s+4>>2]=2,mn(),r=s}if(s=r,!s){r=1;break e}i:{if(Ne(s,y+48|0)&&(r=Zl(h[y+48>>2],h[y+52>>2],h[a+20>>2],h[a>>2]),r||(r=0,Rc(s))))break i;r=h[s>>2]}y0(s)}if(r){Tf(h[a>>2]);break e}if(r=0,s=h[a+20>>2],!s|!h[s+48>>2])break e;r=Je(h[a>>2])}return Fn=y+160|0,r}function mn(){var r=0;r=h[2673],(r|0)!=h[2551]&&(h[2771]=81,h[2770]=81,h[2769]=82,h[2768]=83,h[2767]=84,h[2766]=85,h[2765]=86,h[2764]=87,h[2763]=88,h[2762]=89,h[2761]=90,h[2760]=91,h[2759]=92,h[2758]=93,h[2757]=94,h[2756]=81,h[2803]=81,h[2802]=81,h[2801]=82,h[2800]=83,h[2799]=84,h[2798]=85,h[2797]=86,h[2796]=87,h[2795]=88,h[2794]=89,h[2793]=90,h[2792]=91,h[2791]=92,h[2790]=93,h[2789]=94,h[2788]=81,h[2755]=95,h[2754]=95,h[2753]=96,h[2752]=97,h[2751]=98,h[2750]=99,h[2749]=100,h[2748]=101,h[2747]=102,h[2746]=103,h[2745]=104,h[2744]=105,h[2743]=106,h[2742]=107,h[2741]=108,h[2740]=95,h[2787]=95,h[2786]=95,h[2785]=96,h[2784]=97,h[2783]=98,h[2782]=99,h[2781]=100,h[2780]=101,h[2779]=102,h[2778]=103,h[2777]=104,h[2776]=105,h[2775]=106,h[2774]=107,h[2773]=108,h[2772]=95,h[2733]=109,h[2804]=110,h[2735]=111,h[2734]=112,h[2736]=113,h[2737]=114,h[2738]=115,h[2805]=116,h[2732]=117,h[2551]=r)}function za(r,s,a){var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0;S=Fn-16|0,Fn=S,G=h[s+4>>2],H=h[s>>2];e:{t:{if(!r){h[s+72>>2]=0,y=H,E=G;break t}if(L=h[r+8>>2],h[s+72>>2]=(L|0)>0,y=H,E=G,(L|0)<1)break t;if(L=0,y=h[r+16>>2],a=a>>>0>10,R=a?y&-2:y,E=h[r+24>>2],(R+E|0)>(G|0)||(y=h[r+12>>2],te=a?y&-2:y,y=h[r+20>>2],(E|0)<1|(te+y|0)>(H|0)|((y|0)<1|(R|te)<0)))break e}if(h[s+84>>2]=R,h[s+76>>2]=te,h[s+16>>2]=E,h[s+12>>2]=y,h[s+88>>2]=R+E,h[s+80>>2]=y+te,r){a=h[r+28>>2],h[s+92>>2]=(a|0)>0,L=1,R=1;t:{if((a|0)>=1){if(h[S+12>>2]=h[r+32>>2],h[S+8>>2]=h[r+36>>2],!it(y,E,S+12|0,S+8|0))break t;h[s+96>>2]=h[S+12>>2],h[s+100>>2]=h[S+8>>2],R=!h[s+92>>2]}if(h[s+68>>2]=h[r>>2]!=0,h[s+56>>2]=!h[r+4>>2],R)break e;r=0,r=h[s+96>>2]<((re(H,3)|0)/4|0)?h[s+100>>2]<((re(G,3)|0)/4|0):r,h[s+56>>2]=0,h[s+68>>2]=r;break e}L=0;break e}h[s+68>>2]=0,h[s+92>>2]=0,L=1,h[s+56>>2]=1}return Fn=S+16|0,L}function Hu(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;if(y=h[r+108>>2],L=s-y|0,(L|0)>=1)for(a=h[r+100>>2],H=h[r+16>>2]+(re(a,y)<<2)|0;;){R=(L|0)<16?L:16,ke=R+y|0,S=h[r+8>>2],te=h[S>>2],ze=re(te,R),he=h[S+40>>2],S=h[he+136>>2]+re(y,te)|0,G=h[r+20>>2],E=h[r+176>>2];e:{if((E|0)>=1){if(a=E+-1|0,Yl((re(a,20)+r|0)+180|0,y,ke,H,G),(E|0)<2)break e;for(;E=a+-1|0,Yl((re(E,20)+r|0)+180|0,y,ke,G,G),Ye=(a|0)>1,a=E,!!Ye;);break e}if((G|0)==(H|0))break e;Wr(G,H,re(a,R)<<2)}if(dt[h[2669]](G,S,ze),E=h[he+12>>2],E){a=h[he+140>>2];e:{if((L|0)<1)break e;if(dt[h[(E<<2)+10912>>2]](a,S,S,te),(R|0)==1){a=S;break e}for(y=y+1|0;a=S+te|0,dt[h[(h[he+12>>2]<<2)+10912>>2]](S,a,a,te),S=a,y=y+1|0,(ke|0)!=(y|0););}h[he+140>>2]=a}if(a=h[r+100>>2],H=(re(a,R)<<2)+H|0,y=ke,L=L-R|0,!((L|0)>0))break}h[r+108>>2]=s,h[r+116>>2]=s}function Gu(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0;if(L=h[r+16>>2],(L|0)<1)return 0;for(he=L+1>>1,a=h[s+24>>2];;){y=a,a=h[r+32>>2],E=Ss(y,L-R|0,h[r+20>>2]+re(a,R)|0,a),a=he-G|0,vc(h[s+28>>2],a)&&(S=h[r+36>>2],S=Ss(h[s+28>>2],a,h[r+24>>2]+re(S,G)|0,S),y=a,a=h[r+36>>2],Ss(h[s+32>>2],y,h[r+28>>2]+re(a,G)|0,a),G=S+G|0),R=E+R|0,E=h[s>>2],y=h[E>>2],S=0,a=h[s+24>>2];e:{if(h[a+64>>2]>=h[a+56>>2])break e;for(ke=h[(y<<2)+11312>>2],y=h[E+16>>2]+re(h[E+20>>2],h[s+16>>2]+H|0)|0;;){if(h[a+24>>2]>0||(te=h[s+28>>2],h[te+64>>2]>=h[te+56>>2]|h[te+24>>2]>0))break e;if(Vi(a),Vi(h[s+28>>2]),Vi(h[s+32>>2]),a=h[s+24>>2],dt[ke|0](h[a+68>>2],h[h[s+28>>2]+68>>2],h[h[s+32>>2]+68>>2],y,h[a+52>>2]),S=S+1|0,y=h[E+20>>2]+y|0,a=h[s+24>>2],!(h[a+64>>2]<h[a+56>>2]))break}}if(H=S+H|0,!((L|0)>(R|0)))break}return H|0}function Bc(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0;a=Fn-240|0,Fn=a,S=a+40|0,S?(Kh(Qo(S,0,200)+40|0),S=1):S=0;e:{if(!S){Wh(h[2536]);break e}F[10640]||(Ga(32)|0,m[10640]=1),S=a+80|0;t:{if(qr(r,s,a+40|0))break t;if(E=Oc(h[a+40>>2],h[a+44>>2],32,0)|0,!E){r=h[a+44>>2],h[a>>2]=h[a+40>>2],h[a+4>>2]=r,Ku(h[2536],1051,a),E=0;break t}if(y=El(0,h[a+40>>2],h[a+44>>2],32,255,65280,16711680,-16777216)|0,!y){r=h[a+44>>2],h[a+16>>2]=h[a+40>>2],h[a+20>>2]=r,Ku(h[2536],1092,a+16|0),y=0;break t}if(Gs(y|0)|0,h[a+80>>2]=1,h[a+84>>2]=h[y+8>>2],h[a+88>>2]=h[y+12>>2],h[a+96>>2]=h[y+20>>2],h[a+100>>2]=h[y+16>>2],L=h[y+12>>2],R=h[y+16>>2],h[a+92>>2]=1,h[a+104>>2]=re(L,R),r=Js(r,s,a+40|0),r){h[a+32>>2]=r,L=0,Ku(h[2536],1130,a+32|0);break t}if(ac(y|0),L=0,pu(y|0,0,E|0,0)|0)break t;L=!(hh(E|0)|0)}mu(y|0),mu(E|0),Tf(S)}return Fn=a+240|0,L|0}function dh(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0;if((y|0)>=2)for(L=y>>1,G=(L|0)>1?L:1,L=0;;){E=L<<3,R=h[(E|4)+r>>2],E=h[r+E>>2],H=(R>>>7&510)+(E>>>7&510)|0,te=(R>>>15&510)+(E>>>15&510)|0,E=(R<<1&510)+(E<<1&510)|0,R=((re(H,-24116)+re(te,28800)|0)+re(E,-4684)|0)+33685504>>18,E=((re(H,-19081)+re(te,-9719)|0)+re(E,28800)|0)+33685504>>18;e:{if(S){m[s+L|0]=E,m[a+L|0]=R;break e}H=s+L|0,m[H|0]=(E+F[H|0]|0)+1>>>1,E=a+L|0,m[E|0]=(R+F[E|0]|0)+1>>>1}if(L=L+1|0,(G|0)==(L|0))break}if(y&1){if(r=h[(G<<3)+r>>2],y=r>>>6&1020,L=r>>>14&1020,R=r<<2&1020,r=((re(y,-24116)+re(L,28800)|0)+re(R,-4684)|0)+33685504>>18,y=((re(y,-19081)+re(L,-9719)|0)+re(R,28800)|0)+33685504>>18,S){m[s+G|0]=y,m[a+G|0]=r;return}s=s+G|0,m[s|0]=(y+F[s|0]|0)+1>>>1,s=a+G|0,m[s|0]=(r+F[s|0]|0)+1>>>1}}function ph(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0;S=h[r+16>>2],H=h[r+12>>2],ze=(H+1|0)/2|0,te=h[s>>2],a=h[te+20>>2],L=h[r+8>>2],R=h[te+16>>2]+re(L,a)|0,he=h[(h[te>>2]<<2)+11248>>2],y=h[r+28>>2],E=h[r+24>>2],G=h[r+20>>2];e:{if(!L){dt[he|0](G,0,E,y,E,y,R,0,H),a=S;break e}dt[he|0](h[s+4>>2],G,h[s+8>>2],h[s+12>>2],E,y,R-a|0,R,H),a=S+1|0}Ye=a,ke=S+L|0;e:{if((S|0)<3){a=E,S=y;break e}for(L=L+2|0;a=h[r+32>>2],G=(a<<1)+G|0,Lt=G-a|0,yt=E,Rt=y,E=h[r+36>>2],a=yt+E|0,S=y+E|0,y=h[te+20>>2],R=(y<<1)+R|0,dt[he|0](Lt,G,yt,Rt,a,S,R-y|0,R,H),y=S,E=a,L=L+2|0,(L|0)<(ke|0););}return y=h[r+32>>2]+G|0,(h[r+84>>2]+ke|0)<h[r+88>>2]?(Wr(h[s+4>>2],y,H),Wr(h[s+8>>2],a,ze),Wr(h[s+12>>2],S,ze),Ye+-1|0):(ke&1||dt[he|0](y,0,a,S,a,S,h[te+20>>2]+R|0,0,H),Ye|0)}function Nh(r,s){var a=0,y=0,S=0;e:{if(!r)break e;a=h[r+44>>2];t:{if((a|0)<0||(y=255,(a|0)<=100&&(a=re(a,255),y=(a|0)/100|0,(a|0)<100)))break t;a=h[s+800>>2];i:{if((a|0)>=12){S=h[s+804>>2];break i}S=re(F[((a|0)>0?a:0)+4832|0],y)>>3,h[s+804>>2]=S}a=h[s+832>>2];i:{if((a|0)>=12){a=h[s+836>>2];break i}a=re(F[((a|0)>0?a:0)+4832|0],y)>>3,h[s+836>>2]=a}S=a|S,a=h[s+864>>2];i:{if((a|0)>=12){a=h[s+868>>2];break i}a=re(F[((a|0)>0?a:0)+4832|0],y)>>3,h[s+868>>2]=a}S=a|S,a=h[s+896>>2];i:{if((a|0)>=12){y=h[s+900>>2];break i}y=re(F[((a|0)>0?a:0)+4832|0],y)>>3,h[s+900>>2]=y}if(!(y|S))break t;y=s+544|0,Wr(y+8|0,9424,220),h[y>>2]=0,h[y+4>>2]=31,h[y+228>>2]=256,h[s+540>>2]=1}if(r=h[r+52>>2],h[s+2372>>2]=r,(r|0)>=101){h[s+2372>>2]=100;return}if((r|0)>-1)break e;h[s+2372>>2]=0}}function Ir(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((s|0)<1)return 0;for(a=h[r+8>>2],R=h[r+4>>2];;){e:{if((a|0)>-1)break e;if(y=h[r+12>>2],y>>>0<Zn[r+20>>2]){S=F[y|0]|F[y+1|0]<<8|(F[y+2|0]<<16|F[y+3|0]<<24),h[r+12>>2]=y+3,a=a+24|0,h[r+8>>2]=a,h[r>>2]=h[r>>2]<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8;break e}if(y>>>0<Zn[r+16>>2]){h[r+12>>2]=y+1,a=a+8|0,h[r+8>>2]=a,h[r>>2]=F[y|0]|h[r>>2]<<8;break e}if(!h[r+24>>2]){h[r+24>>2]=1,a=a+8|0,h[r+8>>2]=a,h[r>>2]=h[r>>2]<<8;break e}a=0,h[r+8>>2]=0}y=s+-1|0,te=r,he=a,E=h[r>>2],G=E>>>a|0,L=R>>>1&16777215;e:{if(G>>>0>L>>>0){h[r>>2]=E+((L^-1)<<a),E=R-L|0;break e}E=L+1|0}if(S=Mr(E)^24,a=he-S|0,h[te+8>>2]=a,R=(E<<S)+-1|0,h[r+4>>2]=R,H=(G>>>0>L>>>0)<<y|H,S=(s|0)>1,s=y,!S)break}return H}function zc(r,s,a){var y=0;e:{if((r|0)==(s|0))break e;if((s-r|0)-a>>>0<=0-(a<<1)>>>0)return Wr(r,s,a);y=(r^s)&3;t:{i:{if(r>>>0<s>>>0){if(y){y=r;break t}if(!(r&3)){y=r;break i}for(y=r;;){if(!a)break e;if(m[y|0]=F[s|0],s=s+1|0,a=a+-1|0,y=y+1|0,!(y&3))break}break i}n:{if(y)break n;if(r+a&3)for(;;){if(!a)break e;if(a=a+-1|0,y=a+r|0,m[y|0]=F[s+a|0],!(y&3))break}if(a>>>0<=3)break n;for(;a=a+-4|0,h[a+r>>2]=h[s+a>>2],a>>>0>3;);}if(!a)break e;for(;a=a+-1|0,m[a+r|0]=F[s+a|0],!!a;);break e}if(a>>>0<=3)break t;for(;h[y>>2]=h[s>>2],s=s+4|0,y=y+4|0,a=a+-4|0,a>>>0>3;);}if(!a)break e;for(;m[y|0]=F[s|0],y=y+1|0,s=s+1|0,a=a+-1|0,!!a;);}return r}function lc(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0;for(y=r+-17|0,S=r+-18|0,E=r+-19|0,L=r+-20|0,R=r+-21|0,G=r+-22|0,H=r+-23|0,te=r+-24|0,he=r+-25|0,ke=r+-26|0,ze=r+-27|0,Ye=r+-28|0,yt=r+-29|0,Lt=r+-30|0,Rt=r+-31|0,Jt=r+-32|0,oi=h[2548]-F[r+-33|0]|0;s=F[r+-1|0]+oi|0,m[r|0]=F[s+F[Jt|0]|0],m[r+1|0]=F[F[Rt|0]+s|0],m[r+2|0]=F[F[Lt|0]+s|0],m[r+3|0]=F[F[yt|0]+s|0],m[r+4|0]=F[F[Ye|0]+s|0],m[r+5|0]=F[F[ze|0]+s|0],m[r+6|0]=F[F[ke|0]+s|0],m[r+7|0]=F[F[he|0]+s|0],m[r+8|0]=F[F[te|0]+s|0],m[r+9|0]=F[F[H|0]+s|0],m[r+10|0]=F[F[G|0]+s|0],m[r+11|0]=F[F[R|0]+s|0],m[r+12|0]=F[F[L|0]+s|0],m[r+13|0]=F[F[E|0]+s|0],m[r+14|0]=F[F[S|0]+s|0],m[r+15|0]=F[F[y|0]+s|0],r=r+32|0,a=a+1|0,(a|0)!=16;);}function Qo(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0;e:{if(!a||(y=r+a|0,m[y+-1|0]=s,m[r|0]=s,a>>>0<3)||(m[y+-2|0]=s,m[r+1|0]=s,m[y+-3|0]=s,m[r+2|0]=s,a>>>0<7)||(m[y+-4|0]=s,m[r+3|0]=s,a>>>0<9)||(y=0-r&3,S=y+r|0,s=re(s&255,16843009),h[S>>2]=s,a=a-y&-4,y=a+S|0,h[y+-4>>2]=s,a>>>0<9)||(h[S+8>>2]=s,h[S+4>>2]=s,h[y+-8>>2]=s,h[y+-12>>2]=s,a>>>0<25)||(h[S+24>>2]=s,h[S+20>>2]=s,h[S+16>>2]=s,h[S+12>>2]=s,h[y+-16>>2]=s,h[y+-20>>2]=s,h[y+-24>>2]=s,h[y+-28>>2]=s,L=S&4|24,a=a-L|0,a>>>0<32))break e;for(y=s,E=s,s=S+L|0;h[s+24>>2]=E,h[s+28>>2]=y,h[s+16>>2]=E,h[s+20>>2]=y,h[s+8>>2]=E,h[s+12>>2]=y,h[s>>2]=E,h[s+4>>2]=y,s=s+32|0,a=a+-32|0,a>>>0>31;);}return r|0}function Js(r,s,a){var y=0,S=0,E=0,L=0;y=Fn-144|0,Fn=y;e:{if(!a){E=2;break e}t:{if(!r){S=2;break t}h[a>>2]=0,h[a+4>>2]=0,h[a+32>>2]=0,h[a+36>>2]=0,h[a+24>>2]=0,h[a+28>>2]=0,L=a+16|0,E=L,h[E>>2]=0,h[E+4>>2]=0,S=a+8|0,h[S>>2]=0,h[S+4>>2]=0,E=3;i:switch(S=Il(r,s,a,a+4|0,S,a+12|0,L,0),S|0){case 7:break e;case 0:break i;default:break t}if(h[y+140>>2]=0,h[y+132>>2]=0,h[y+136>>2]=0,h[y+124>>2]=0,h[y+128>>2]=0,h[y+116>>2]=0,h[y+120>>2]=0,h[y+100>>2]=0,h[y+104>>2]=0,h[y+108>>2]=0,h[y+112>>2]=0,h[y+92>>2]=0,h[y+96>>2]=0,h[y+108>>2]=a+124,S=a+40|0,h[y+88>>2]=S,pd(S,a)){Kh(y),h[y>>2]=h[a+40>>2],h[y+4>>2]=h[a>>2],h[y+8>>2]=h[a+4>>2],h[y+88>>2]=y,E=os(r,s,y+88|0),E||(E=Cu(y,S)),Tf(y);break e}E=os(r,s,y+88|0);break e}E=S}return Fn=y+144|0,E}function Zo(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0;y=Fn-32|0,Fn=y,S=h[r+28>>2],h[y+16>>2]=S,E=h[r+20>>2],h[y+28>>2]=a,h[y+24>>2]=s,s=E-S|0,h[y+20>>2]=s,S=s+a|0,H=2,s=y+16|0;e:{t:{i:{if(!Pf(zu(h[r+60>>2],y+16|0,2,y+12|0)|0))for(;;){if(E=h[y+12>>2],(E|0)==(S|0))break i;if((E|0)<=-1)break t;if(L=h[s+4>>2],R=E>>>0>L>>>0,G=(R<<3)+s|0,L=E-(R?L:0)|0,h[G>>2]=L+h[G>>2],G=(R?12:4)+s|0,h[G>>2]=h[G>>2]-L,S=S-E|0,s=R?s+8|0:s,H=H-R|0,!!Pf(zu(h[r+60>>2],s|0,H|0,y+12|0)|0))break}if(h[y+12>>2]=-1,(S|0)!=-1)break t}s=h[r+44>>2],h[r+28>>2]=s,h[r+20>>2]=s,h[r+16>>2]=s+h[r+48>>2],r=a;break e}if(h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r>>2]=h[r>>2]|32,r=0,(H|0)==2)break e;r=a-h[s+4>>2]|0}return Fn=y+32|0,r|0}function Ya(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;E=re(h[r+8>>2],h[r+52>>2]),L=h[r+80>>2],R=h[r+68>>2],s=h[r+24>>2];e:{if(!s){if((E|0)<1)break e;for(;a=yr(h[r+16>>2],0,h[(y<<2)+L>>2],0)+-2147483648|0,s=Pn,s=a>>>0<2147483648?s+1|0:s,m[y+R|0]=(s|0)>255?-1:s,y=y+1|0,(E|0)!=(y|0););break e}if(a=0-s|0,s=h[r+32>>2],s=bc(0,a,s,s>>31),(E|0)<1)break e;for(G=h[r+76>>2],H=s,te=0-s|0;s=h[r+16>>2],a=y<<2,S=yr(te,ze,h[a+L>>2],0),he=Pn,ke=s,s=S,S=yr(H,Ye,h[a+G>>2],0),a=s+S|0,s=Pn+he|0,s=a>>>0<S>>>0?s+1|0:s,S=a+-2147483648|0,a=yr(ke,0,S>>>0<2147483648?s+1|0:s,0)+-2147483648|0,s=Pn,s=a>>>0<2147483648?s+1|0:s,m[y+R|0]=(s|0)>255?-1:s,y=y+1|0,(E|0)!=(y|0););}}function uc(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0,Lt=0,Rt=0,Jt=0,oi=0,Fi=0;if((a|0)>=1)for(S=h[y+-4>>2];te=H<<2,E=te+s|0,L=h[E>>2],E=h[E+-4>>2],G=E&255,he=(L&255)-G|0,ke=(S&255)-G|0,G=ke>>31,ze=E>>>24|0,Ye=(S>>>24|0)-ze|0,yt=Ye>>31,Lt=E>>>8&255,Rt=(S>>>8&255)-Lt|0,R=Rt>>31,Jt=E>>>16&255,oi=(S>>>16&255)-Jt|0,E=oi>>31,Fi=S,S=(L>>>24|0)-ze|0,R=((((G^G+ke)+((he|0)<0?he:0-he|0)|0)+(yt^yt+Ye)|0)+((S|0)<0?S:0-S|0)|0)+(R^R+Rt)|0,S=(L>>>8&255)-Lt|0,R=(R+((S|0)<0?S:0-S|0)|0)+(E^E+oi)|0,S=(L>>>16&255)-Jt|0,S=(R+((S|0)<0?S:0-S|0)|0)<1?L:Fi,L=h[r+te>>2],S=(S&-16711936)+(L&-16711936)&-16711936|(S&16711935)+(L&16711935)&16711935,h[y+te>>2]=S,H=H+1|0,(H|0)!=(a|0););}function Au(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0;E=h[r+104>>2];e:{if(!E)break e;S=h[r+16>>2],y=h[r+8>>2],L=h[s>>2];t:{if(!h[r+56>>2]){s=y;break t}i:{if(!y){a=S+-1|0,s=0;break i}E=E-h[r>>2]|0,a=S,s=y+-1|0}if(y=y+S|0,S=h[r+84>>2],y=y+S|0,(y|0)!=h[r+88>>2]){S=a;break t}S=y-(s+S|0)|0}if((S|0)<1)break e;for(R=h[r+12>>2],he=h[L>>2],a=h[L+20>>2],H=h[L+16>>2]+re(a,s)|0,G=H+1|0,s=15;;){if(y=0,(R|0)>=1){for(;a=(y<<1)+G|0,ke=a,ze=F[a|0]&240,a=F[y+E|0]>>>4|0,m[ke|0]=ze|a,s=s&a,y=y+1|0,(R|0)!=(y|0););a=h[L+20>>2]}if(G=a+G|0,E=h[r>>2]+E|0,te=te+1|0,(te|0)==(S|0))break}if((s|0)==15|he+-7>>>0>3)break e;dt[h[2665]](H,R,S,a)}return 0}function Su(r,s,a){e:{t:{if(s>>>0>20)break t;i:switch(s+-9|0){case 0:s=h[a>>2],h[a>>2]=s+4,h[r>>2]=h[s>>2];return;case 1:s=h[a>>2],h[a>>2]=s+4,s=h[s>>2],h[r>>2]=s,h[r+4>>2]=s>>31;return;case 2:s=h[a>>2],h[a>>2]=s+4,h[r>>2]=h[s>>2],h[r+4>>2]=0;return;case 4:s=h[a>>2],h[a>>2]=s+4,s=Ri[s>>1],h[r>>2]=s,h[r+4>>2]=s>>31;return;case 5:s=h[a>>2],h[a>>2]=s+4,h[r>>2]=dn[s>>1],h[r+4>>2]=0;return;case 6:s=h[a>>2],h[a>>2]=s+4,s=m[s|0],h[r>>2]=s,h[r+4>>2]=s>>31;return;case 7:s=h[a>>2],h[a>>2]=s+4,h[r>>2]=F[s|0],h[r+4>>2]=0;return;case 3:case 8:break e;case 9:break i;default:break t}dt[0](r,a)}return}s=h[a>>2]+7&-8,h[a>>2]=s+8,a=h[s+4>>2],h[r>>2]=h[s>>2],h[r+4>>2]=a}function Jl(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0;S=h[r+16>>2],E=h[s+24>>2],a=h[h[s>>2]>>2];e:{if(a+-7>>>0>3&&!(1<<a&4154&&a>>>0<=12)||(a=h[r+104>>2],!a))break e;qc(h[r+20>>2],h[r+32>>2],a,h[r>>2],h[r+12>>2],S,0)}if((S|0)<1)return 0;for(L=S+1>>1,R=h[r+32>>2],y=h[r+20>>2],a=S;G=Ss(E,a,y,R),y=re(G,R)+y|0,H=yc(E)+H|0,a=a-G|0,(a|0)>0;);if((S|0)>=1){for(S=h[s+28>>2],E=h[r+36>>2],y=h[r+24>>2],a=L;R=Ss(S,a,y,E),yc(S),y=re(E,R)+y|0,a=a-R|0,(a|0)>0;);for(y=h[r+28>>2],s=h[s+32>>2],r=h[r+36>>2];a=Ss(s,L,y,r),yc(s),y=re(r,a)+y|0,L=L-a|0,(L|0)>0;);}return H|0}function no(r,s){var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0;e:{if(!(h[r+24>>2]|(s|0)>24)){if(a=h[r+20>>2],S=a+s|0,h[r+20>>2]=S,R=h[(s<<2)+9312>>2],L=h[r+4>>2],y=L,s=a&63,a=s&31,E=h[r>>2],H=R&(32<=(s&63)>>>0?y>>>a|0:((1<<a)-1&y)<<32-a|E>>>a),(S|0)<8)break e;for(s=h[r+16>>2],G=h[r+12>>2],R=s>>>0>G>>>0?s:G;;){t:{if((s|0)==(R|0)){s=R,y=S;break t}if(y=L,E=(y&255)<<24|E>>>8,y=y>>>8|0,L=y,h[r>>2]=E,h[r+4>>2]=y,a=F[h[r+8>>2]+s|0],y=S+-8|0,h[r+20>>2]=y,s=s+1|0,h[r+16>>2]=s,a=L|a<<24,L=a,h[r>>2]=E,h[r+4>>2]=a,a=(S|0)>15,S=y,a)continue}break}if((s|0)!=(G|0)|(y|0)<65)break e;return h[r+20>>2]=0,h[r+24>>2]=1,H}h[r+20>>2]=0,h[r+24>>2]=1}return H}function ba(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;S=re(h[r+8>>2],h[r+52>>2]),L=h[r+76>>2],R=h[r+68>>2],s=re(h[r+24>>2],h[r+16>>2]);e:{if(s){if((S|0)<1)break e;for(E=h[r+80>>2],te=0-s|0,s=0;y=h[r+20>>2],a=s<<2,G=a+L|0,he=h[G>>2],yr(h[a+E>>2],0,te,0),H=Pn,y=yr(y,0,he-H|0,0)+-2147483648|0,a=Pn,a=y>>>0<2147483648?a+1|0:a,m[s+R|0]=(a|0)>255?-1:a,h[G>>2]=H,s=s+1|0,(S|0)!=(s|0););break e}if((S|0)<1)break e;for(s=0;E=(s<<2)+L|0,y=yr(h[r+20>>2],0,h[E>>2],0)+-2147483648|0,a=Pn,a=y>>>0<2147483648?a+1|0:a,m[s+R|0]=(a|0)>255?-1:a,h[E>>2]=0,s=s+1|0,(S|0)!=(s|0););}}function jo(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0;if((a|0)>=1)for(E=h[y+-4>>2];G=R<<2,L=G+s|0,S=h[L>>2],E=((S^E)>>>1&2139062143)+(S&E)|0,S=E&255,L=h[L+-4>>2],S=((S-(L&255)|0)/2|0)+S|0,H=S>>>0<256?S:(S^-1)>>>24|0,S=E>>>24|0,S=((S-(L>>>24|0)|0)/2|0)+S|0,H=H|(S>>>0<256?S:S>>>24^-1)<<24,S=E>>>16&255,S=((S-(L>>>16&255)|0)/2|0)+S|0,E=E>>>8&255,E=((E-(L>>>8&255)|0)/2|0)+E|0,E=H|(S>>>0<256?S:(S^-1)>>>24|0)<<16|(E>>>0<256?E:(E^-1)>>>24|0)<<8,L=h[r+G>>2],E=(E&-16711936)+(L&-16711936)&-16711936|(E&16711935)+(L&16711935)&16711935,h[y+G>>2]=E,R=R+1|0,(R|0)!=(a|0););}function ku(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0;y=h[r+36>>2];e:{if(h[y+64>>2]>=h[y+56>>2])break e;E=h[r>>2],te=h[E>>2]+-7|0,S=h[E+20>>2],H=h[E+16>>2]+re(S,s)|0,R=h[y+52>>2],s=15;t:{if((a|0)<1|h[y+24>>2]>0)break t;for(G=H+1|0;;){if(Vi(y),y=0,(R|0)>=1)for(;S=(y<<1)+G|0,he=S,ke=F[S|0]&240,S=F[h[h[r+36>>2]+68>>2]+y|0]>>>4|0,m[he|0]=ke|S,s=s&S,y=y+1|0,(R|0)!=(y|0););if(S=h[E+20>>2],y=h[r+36>>2],L=L+1|0,h[y+64>>2]>=h[y+56>>2]|(L|0)>=(a|0))break t;if(G=S+G|0,!(h[y+24>>2]<=0))break}}if((s|0)==15|te>>>0>3)break e;dt[h[2665]](H,R,L,S)}return L|0}function Cu(r,s){var a=0,y=0;h[s+4>>2]=h[r+4>>2],h[s+8>>2]=h[r+8>>2],a=2;e:{if(Jo(s))break e;a=h[r+16>>2],y=h[r>>2];t:{if(y>>>0<=10){Ol(a,h[r+20>>2],h[s+16>>2],h[s+20>>2],re(h[r+4>>2],F[y+1157|0]),h[r+8>>2]);break t}if(Ol(a,h[r+32>>2],h[s+16>>2],h[s+32>>2],h[r+4>>2],h[r+8>>2]),Ol(h[r+20>>2],h[r+36>>2],h[s+20>>2],h[s+36>>2],(h[r+4>>2]+1|0)/2|0,(h[r+8>>2]+1|0)/2|0),Ol(h[r+24>>2],h[r+40>>2],h[s+24>>2],h[s+40>>2],(h[r+4>>2]+1|0)/2|0,(h[r+8>>2]+1|0)/2|0),y=h[r>>2],!(1<<y&4154&&y>>>0<=12)&&(a=0,y+-7>>>0>3))break e;Ol(h[r+28>>2],h[r+44>>2],h[s+28>>2],h[s+44>>2],h[r+4>>2],h[r+8>>2])}a=0}return a}function Nc(r,s){var a=0,y=0,S=0,E=0;e:{if(h[r+2308>>2]<1||(a=h[r+2300>>2],(a|0)<h[r+300>>2]))break e;y=(a|0)<=h[r+308>>2]}a=r+160|0;e:{if(!h[r+148>>2]){h[r+168>>2]=y,h[r+164>>2]=h[r+2300>>2],Nu(r,a),E=ms(r,s);break e}if(S=r+124|0,!(dt[h[2559]](S)&1))break e;Wr(r+180|0,s,108),h[r+168>>2]=y,h[r+160>>2]=h[r+152>>2],h[r+164>>2]=h[r+2300>>2];t:{if(h[r+148>>2]==2){s=h[r+2304>>2],a=r+176|0,h[r+2304>>2]=h[a>>2],h[a>>2]=s;break t}Nu(r,a)}return y&&(s=h[r+2260>>2],y=r+172|0,h[r+2260>>2]=h[y>>2],h[y>>2]=s),dt[h[2560]](S),s=h[r+152>>2]+1|0,h[r+152>>2]=(s|0)==h[r+156>>2]?0:s,1}return E}function jh(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0,te=0;if((a|0)>=1)for(S=h[y+-4>>2];H=G<<2,L=H+s|0,R=h[L>>2],L=h[L+-4>>2],E=((R&255)+(S&255)|0)-(L&255)|0,te=E>>>0<256?E:(E^-1)>>>24|0,E=(R>>>24)+(S>>>24)-(L>>>24)|0,te=te|(E>>>0<256?E:E>>>24^-1)<<24,E=((R>>>16&255)+(S>>>16&255)|0)-(L>>>16&255)|0,S=((R>>>8&255)+(S>>>8&255)|0)-(L>>>8&255)|0,S=te|(E>>>0<256?E:(E^-1)>>>24|0)<<16|(S>>>0<256?S:(S^-1)>>>24|0)<<8,R=h[r+H>>2],S=(S&-16711936)+(R&-16711936)&-16711936|(S&16711935)+(R&16711935)&16711935,h[y+H>>2]=S,G=G+1|0,(G|0)!=(a|0););}function fl(r,s,a,y,S,E,L,R,G){var H=0,te=0,he=0,ke=0;h[r+72>>2]=L,h[r+68>>2]=y,h[r+60>>2]=0,h[r+64>>2]=0,h[r+56>>2]=E,h[r+52>>2]=S,h[r+48>>2]=a,h[r+44>>2]=s,h[r+8>>2]=R,L=(a|0)<(E|0),h[r+4>>2]=L,H=(s|0)<(S|0),h[r>>2]=H,te=H?s+-1|0:S,h[r+40>>2]=te,y=H?S+-1|0:s,h[r+36>>2]=y,H||(he=r,ke=bc(0,1,te,te>>31),h[he+12>>2]=ke),s=E-L|0,h[r+32>>2]=s,a=a-L|0,h[r+28>>2]=a;e:{if(!L){h[r+24>>2]=a,a=re(a,y),a=bc(0,E,a,a>>31),y=Pn,h[r+20>>2]=(y|0)==1&a>>>0<0|y>>>0<1?a:0;break e}h[r+24>>2]=s,s=y}h[r+76>>2]=G,he=r,ke=bc(0,1,s,s>>31),h[he+16>>2]=ke,s=r,r=re(S,R),h[s+80>>2]=(r<<2)+G,Qo(G,0,r<<3),xa()}function Uh(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0;E=F[r+-31|0],s=E+1|0,a=F[r+-30|0],S=s+a>>>1|0,m[r+64|0]=S,R=F[r+-32|0],m[r|0]=R+s>>>1,s=F[r+-29|0],y=(s+a|0)+1>>>1|0,m[r+65|0]=y,m[r+1|0]=S,S=F[r+-28|0],L=(S+s|0)+1>>>1|0,m[r+66|0]=L,m[r+2|0]=y,m[r+3|0]=L,y=s+2|0,L=(y+E|0)+(a<<1)>>>2|0,m[r+96|0]=L,a=a+2|0,m[r+32|0]=(a+R|0)+(E<<1)>>>2,E=S+(a+(s<<1)|0)>>>2|0,m[r+97|0]=E,m[r+33|0]=L,R=F[r+-25|0],a=F[r+-26|0],s=F[r+-27|0],y=s+(y+(S<<1)|0)>>>2|0,m[r+98|0]=y,m[r+34|0]=E,m[r+99|0]=(R+(s+(a<<1)|0)|0)+2>>>2,m[r+67|0]=(a+(S+(s<<1)|0)|0)+2>>>2,m[r+35|0]=y}function dl(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0;L=F[r+63|0],y=F[r+31|0],a=(L+y|0)+1>>>1|0,m[r+98|0]=a,R=F[r+95|0],m[r+96|0]=(R+L|0)+1>>>1,m[r+64|0]=a,S=F[r+-1|0],s=S+1|0,a=F[r+-33|0],E=s+a>>>1|0,m[r+34|0]=E,s=s+y>>>1|0,m[r+66|0]=s,m[r|0]=E,m[r+32|0]=s,s=F[r+-32|0],E=S+2|0,G=s+(E+(a<<1)|0)>>>2|0,m[r+35|0]=G,H=F[r+-31|0],m[r+3|0]=(F[r+-30|0]+(s+(H<<1)|0)|0)+2>>>2,m[r+2|0]=((a+(s<<1)|0)+H|0)+2>>>2,s=S<<1,S=y+2|0,a=a+(s+S|0)>>>2|0,m[r+67|0]=a,m[r+1|0]=G,y=(L+E|0)+(y<<1)>>>2|0,m[r+99|0]=y,m[r+33|0]=a,m[r+97|0]=(S+R|0)+(L<<1)>>>2,m[r+65|0]=y}function cc(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0;y=F[r+-32|0],S=y+1|0,s=F[r+-33|0],a=S+s>>>1|0,m[r+65|0]=a,E=F[r+-31|0],L=S+E>>>1|0,m[r+66|0]=L,m[r|0]=a,S=F[r+-30|0],a=(S+E|0)+1>>>1|0,m[r+67|0]=a,m[r+1|0]=L,L=F[r+-29|0],m[r+3|0]=(L+S|0)+1>>>1,m[r+2|0]=a,a=F[r+-1|0],R=a+2|0,G=F[r+31|0],m[r+96|0]=(R+F[r+63|0]|0)+(G<<1)>>>2,R=y+(R+(s<<1)|0)>>>2|0,m[r+97|0]=R,s=s+2|0,m[r+64|0]=(s+G|0)+(a<<1)>>>2,s=(s+(y<<1)|0)+E>>>2|0,m[r+98|0]=s,m[r+32|0]=R,y=(S+(y+(E<<1)|0)|0)+2>>>2|0,m[r+99|0]=y,m[r+33|0]=s,m[r+35|0]=(L+((S<<1)+E|0)|0)+2>>>2,m[r+34|0]=y}function Qn(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;y=h[r+36>>2];e:{if(h[y+64>>2]>=h[y+56>>2])break e;E=h[r>>2],S=h[E>>2],R=(S|0)==4|(S|0)==9,he=S+-7|0,L=h[E+20>>2],G=h[E+16>>2]+re(L,s)|0,H=h[y+52>>2],S=0,s=0;t:{if((a|0)<1||(s=0,h[y+24>>2]>0))break t;for(s=(R?0:3)+G|0;;){i:{if(Vi(y),te=dt[h[2666]](h[h[r+36>>2]+68>>2],0,H,1,s,0)|te,L=h[E+20>>2],y=h[r+36>>2],S=S+1|0,h[y+64>>2]>=h[y+56>>2]|(S|0)>=(a|0))break i;if(s=s+L|0,h[y+24>>2]<=0)continue}break}s=(te|0)!=0}if(!s|he>>>0>3)break e;dt[h[2664]](G,R,H,S,L)}return S|0}function gr(r,s,a){var y=0,S=0,E=0;y=Fn-208|0,Fn=y,h[y+204>>2]=a,a=0,Qo(y+160|0,0,40),h[y+200>>2]=h[y+204>>2];e:{if((kt(0,s,y+200|0,y+80|0,y+160|0)|0)<0)break e;a=h[r+76>>2]>=0?1:a,S=h[r>>2],m[r+74|0]<=0&&(h[r>>2]=S&-33),E=S&32;t:{if(h[r+48>>2]){kt(r,s,y+200|0,y+80|0,y+160|0);break t}if(h[r+48>>2]=80,h[r+16>>2]=y+80,h[r+28>>2]=y,h[r+20>>2]=y,S=h[r+44>>2],h[r+44>>2]=y,kt(r,s,y+200|0,y+80|0,y+160|0),!S)break t;dt[h[r+36>>2]](r,0,0)|0,h[r+48>>2]=0,h[r+44>>2]=S,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0}if(h[r>>2]=E|h[r>>2],!a)break e}Fn=y+208|0}function Wu(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;S=h[s>>2],E=h[S+28>>2],G=h[s+16>>2],L=h[S+44>>2],R=E+re(G,L)|0,y=h[r+104>>2];e:{if(y){if(a=h[r+16>>2],(a|0)<1)break e;for(te=h[S+32>>2],E=h[s+36>>2],L=h[r>>2],he=h[S+16>>2],r=0;H=Ss(E,a,y,L),y=re(L,H)+y|0,r=yc(E)+r|0,a=a-H|0,(a|0)>0;);if((r|0)<1)break e;return qc(re(G,te)+he|0,h[S+32>>2],R,h[S+44>>2],h[h[s+36>>2]+52>>2],r,1),0}if(!E|(a|0)<1)break e;for(r=h[r+96>>2],y=0;R=Qo(R,255,r)+L|0,y=y+1|0,(y|0)!=(a|0););}return 0}function hc(r){r=r|0;var s=0,a=0,y=0,S=0,E=0;a=F[r+31|0],y=a+2|0,s=F[r+63|0],m[r+96|0]=F[r+95|0]+(y+(s<<1)|0)>>>2,E=a<<1,a=F[r+-1|0],S=a+2|0,s=s+(E+S|0)>>>2|0,m[r+97|0]=s,m[r+64|0]=s,s=y+(a<<1)|0,a=F[r+-33|0],s=s+a>>>2|0,m[r+98|0]=s,m[r+65|0]=s,m[r+32|0]=s,y=F[r+-32|0],s=(y+S|0)+(a<<1)>>>2|0,m[r+99|0]=s,m[r+66|0]=s,m[r+33|0]=s,m[r|0]=s,E=F[r+-29|0],s=F[r+-30|0],S=a,a=F[r+-31|0],S=((S+a|0)+(y<<1)|0)+2>>>2|0,m[r+67|0]=S,m[r+34|0]=S,m[r+1|0]=S,y=((s+y|0)+(a<<1)|0)+2>>>2|0,m[r+35|0]=y,m[r+2|0]=y,m[r+3|0]=((a+E|0)+(s<<1)|0)+2>>>2}function Ss(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;e:{if((s|0)<1)break e;for(;;){if(h[r+24>>2]<1&&h[r+64>>2]<h[r+56>>2])break e;if(h[r+4>>2]&&(te=r,he=xp(h[r+76>>2],h[r+80>>2]),h[te+76>>2]=he,h[r+80>>2]=Pn),pp(r,a),!(h[r+4>>2]|(re(h[r+52>>2],h[r+8>>2])|0)<1))for(G=h[r+76>>2],H=h[r+80>>2],S=0;L=S<<2,R=L+G|0,h[R>>2]=h[R>>2]+h[H+L>>2],S=S+1|0,(S|0)<(re(h[r+52>>2],h[r+8>>2])|0););if(h[r+60>>2]=h[r+60>>2]+1,h[r+24>>2]=h[r+24>>2]-h[r+32>>2],a=a+y|0,E=E+1|0,(E|0)==(s|0))break}E=s}return E}function Wo(r){var s=0,a=0,y=0;if(r){if(s=r+160|0,Rr(h[s>>2]),Rr(h[r+172>>2]),a=r+168|0,Df(h[a>>2]),wc(r+124|0),y=r+136|0,wc(y),h[a>>2]=0,h[a+4>>2]=0,h[s>>2]=0,h[s+4>>2]=0,h[r+152>>2]=0,h[r+156>>2]=0,h[r+144>>2]=0,h[r+148>>2]=0,h[y>>2]=0,h[y+4>>2]=0,h[r+128>>2]=0,h[r+132>>2]=0,h[r+120>>2]=0,h[r+124>>2]=0,Rr(h[r+16>>2]),s=0,h[r+16>>2]=0,h[r+176>>2]>=1)for(;a=(re(s,20)+r|0)+196|0,Rr(h[a>>2]),h[a>>2]=0,s=s+1|0,(s|0)<h[r+176>>2];);h[r+260>>2]=0,h[r+176>>2]=0,Rr(h[r+264>>2]),h[r+12>>2]=0,h[r+264>>2]=0}}function Ql(){h[2545]!=h[2673]&&(h[2703]=32,h[2674]=33,h[2706]=34,h[2704]=35,h[2705]=36,h[2707]=37,h[2708]=38,h[2712]=39,h[2709]=40,h[2710]=41,h[2714]=42,h[2716]=43,h[2717]=44,h[2718]=45,h[2719]=46,h[2713]=47,h[2711]=48,h[2715]=49,h[2690]=50,h[2688]=51,h[2686]=52,h[2685]=53,h[2684]=54,h[2693]=55,h[2692]=56,h[2691]=57,h[2689]=58,h[2687]=59,h[2682]=60,h[2681]=61,h[2680]=62,h[2679]=63,h[2678]=64,h[2677]=65,h[2676]=66,h[2702]=67,h[2701]=68,h[2700]=69,h[2699]=70,h[2698]=71,h[2697]=72,h[2696]=73,h[2720]=74,h[2545]=h[2673])}function pl(r){r=r|0;var s=0,a=0,y=0,S=0,E=0;s=F[r+-29|0],S=s+2|0,y=F[r+-31|0],a=F[r+-30|0],E=(S+y|0)+(a<<1)>>>2|0,m[r+32|0]=E,a=a+2|0,m[r|0]=(a+F[r+-32|0]|0)+(y<<1)>>>2,y=F[r+-28|0],a=y+(a+(s<<1)|0)>>>2|0,m[r+64|0]=a,m[r+1|0]=E,m[r+33|0]=a,s=S+(y<<1)|0,S=F[r+-27|0],s=s+S>>>2|0,m[r+96|0]=s,m[r+2|0]=a,m[r+65|0]=s,m[r+34|0]=s,m[r+3|0]=s,s=F[r+-26|0],y=(s+(y+(S<<1)|0)|0)+2>>>2|0,m[r+97|0]=y,a=F[r+-25|0],S=(a+(S+(s<<1)|0)|0)+2>>>2|0,m[r+98|0]=S,m[r+35|0]=y,m[r+66|0]=y,m[r+99|0]=((a+s|0)+(a<<1)|0)+2>>>2,m[r+67|0]=S}function mh(r){r=r|0;var s=0,a=0,y=0,S=0,E=0;a=F[r+63|0],s=a+2|0,E=F[r+95|0],y=re((s+E|0)+(E<<1)>>>2|0,16843009),m[r+96|0]=y,m[r+97|0]=y>>>8,m[r+98|0]=y>>>16,m[r+99|0]=y>>>24,S=F[r+31|0],y=S+2|0,a=re(E+(y+(a<<1)|0)>>>2|0,16843009),m[r+64|0]=a,m[r+65|0]=a>>>8,m[r+66|0]=a>>>16,m[r+67|0]=a>>>24,E=s,s=F[r+-1|0],S=re((E+s|0)+(S<<1)>>>2|0,16843009),m[r+32|0]=S,m[r+33|0]=S>>>8,m[r+34|0]=S>>>16,m[r+35|0]=S>>>24,s=re((F[r+-33|0]+y|0)+(s<<1)>>>2|0,16843009),m[r|0]=s,m[r+1|0]=s>>>8,m[r+2|0]=s>>>16,m[r+3|0]=s>>>24}function $l(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if(m[S|0]=F[r|0],(s|0)>=2)for(R=s+-1|0,G=S+1|0,L=r+1|0;m[E+G|0]=F[E+L|0]-F[r+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(te=y^-1,he=(s|0)<2,G=1;;){if(S=y+S|0,R=r+y|0,m[S|0]=F[R|0]-F[r|0],E=1,!he)for(;H=E+R|0,L=(F[r+E|0]+F[H+-1|0]|0)-F[R+(E+te|0)|0]|0,L=(L|0)>0?L:0,m[S+E|0]=F[H|0]-((L|0)<255?L:255),E=E+1|0,(E|0)!=(s|0););if(r=R,G=G+1|0,(G|0)==(a|0))break}}function ss(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;G=F[a+R|0],he=F[s+R|0],H=F[r+R|0],E=(R<<2)+y|0,m[E|0]=255,H=re(H,19077)>>>8|0,te=H+(re(he,33050)>>>8|0)|0,L=te+-17685|0,m[E+3|0]=L>>>0<16384?L>>>6|0:te>>>0<17685?0:255,te=H+(re(G,26149)>>>8|0)|0,L=te+-14234|0,m[E+1|0]=L>>>0<16384?L>>>6|0:te>>>0<14234?0:255,L=E,E=H-(re(he,6419)>>>8|0)-(re(G,13320)>>>8)|0,G=E+8708|0,m[L+2|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(S|0););}function ys(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;G=F[s+R|0],he=F[a+R|0],H=F[r+R|0],E=(R<<2)+y|0,m[E+3|0]=255,H=re(H,19077)>>>8|0,te=H+(re(he,26149)>>>8|0)|0,L=te+-14234|0,m[E+2|0]=L>>>0<16384?L>>>6|0:te>>>0<14234?0:255,te=H+(re(G,33050)>>>8|0)|0,L=te+-17685|0,m[E|0]=L>>>0<16384?L>>>6|0:te>>>0<17685?0:255,L=E,E=H-(re(G,6419)>>>8|0)-(re(he,13320)>>>8)|0,G=E+8708|0,m[L+1|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(S|0););}function gh(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;G=F[a+R|0],he=F[s+R|0],H=F[r+R|0],E=(R<<2)+y|0,m[E+3|0]=255,H=re(H,19077)>>>8|0,te=H+(re(he,33050)>>>8|0)|0,L=te+-17685|0,m[E+2|0]=L>>>0<16384?L>>>6|0:te>>>0<17685?0:255,te=H+(re(G,26149)>>>8|0)|0,L=te+-14234|0,m[E|0]=L>>>0<16384?L>>>6|0:te>>>0<14234?0:255,L=E,E=H-(re(he,6419)>>>8|0)-(re(G,13320)>>>8)|0,G=E+8708|0,m[L+1|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(S|0););}function la(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;H=(R<<1)+y|0,G=re(F[r+R|0],19077)>>>8|0,E=F[a+R|0],te=G+(re(E,26149)>>>8|0)|0,L=te+-14234|0,he=(L>>>0<16384?L>>>6|0:te>>>0<14234?0:248)&248,te=F[s+R|0],E=G-(re(te,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,m[H|0]=he|E>>>5,L=H,G=G+(re(te,33050)>>>8|0)|0,H=G+-17685|0,m[L+1|0]=E<<3&224|(H>>>0<16384?H>>>9|0:G>>>0<17685?0:31),R=R+1|0,(R|0)!=(S|0););}function B(r,s){var a=0,y=0,S=0,E=0,L=0;y=h[r+8>>2],L=h[y+40>>2],a=h[(Zn[L+12>>2]<2?y+84|0:r+108|0)>>2],S=h[r+108>>2],a=(S|0)<(a|0)?a:S;e:{if((a|0)>=(s|0)||(S=h[y>>2],y=h[L+136>>2]+re(S,a)|0,Ui(r+180|0,a,s,h[r+16>>2]+re(a,h[r+100>>2])|0,y),E=h[L+12>>2],!E))break e;dt[h[(E<<2)+10912>>2]](h[L+140>>2],y,y,S),E=a+1|0;t:{if((E|0)==(s|0)){a=y;break t}for(;a=y+S|0,dt[h[(h[L+12>>2]<<2)+10912>>2]](y,a,a,S),y=a,E=E+1|0,(E|0)!=(s|0););}h[L+140>>2]=a}h[r+108>>2]=s,h[r+116>>2]=s}function d(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0;if(E=h[r+8>>2],(E|0)>=1)for(te=re(h[r+52>>2],E);;){if((L|0)<(te|0))for(ke=h[r+80>>2],y=0,S=0,R=L,G=L;;){if(he=h[r+40>>2],H=0,y=h[r+36>>2]+y|0,(y|0)>=1){for(;H=F[s+G|0],S=H+S|0,a=G+E|0,G=a,y=y-he|0,(y|0)>0;);G=a}if(a=re(y,H),h[(R<<2)+ke>>2]=a+re(S,he),S=yr(h[r+12>>2],0,0-a|0,0)+-2147483648|0,a=Pn,S=S>>>0<2147483648?a+1|0:a,R=E+R|0,!((R|0)<(te|0)))break}if(L=L+1|0,(E|0)==(L|0))break}}function I(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0;a=F[r+-32|0],y=h[2548]-F[r+-33|0]|0,s=y+F[r+-1|0]|0,m[r|0]=F[a+s|0],S=F[r+-31|0],m[r+1|0]=F[s+S|0],E=F[r+-30|0],m[r+2|0]=F[s+E|0],L=F[r+-29|0],m[r+3|0]=F[s+L|0],s=y+F[r+31|0]|0,m[r+32|0]=F[s+a|0],m[r+33|0]=F[s+S|0],m[r+34|0]=F[s+E|0],m[r+35|0]=F[s+L|0],s=y+F[r+63|0]|0,m[r+64|0]=F[s+a|0],m[r+65|0]=F[s+S|0],m[r+66|0]=F[s+E|0],m[r+67|0]=F[s+L|0],s=a,a=y+F[r+95|0]|0,m[r+96|0]=F[s+a|0],m[r+97|0]=F[a+S|0],m[r+98|0]=F[a+E|0],m[r+99|0]=F[a+L|0]}function D(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;R=F[a+E|0],G=(E<<1)+y|0,L=re(F[r+E|0],19077)>>>8|0,he=F[s+E|0],H=L+(re(he,33050)>>>8|0)|0,te=H+-17685|0,m[G+1|0]=(te>>>0<16384?te>>>6|0:H>>>0<17685?0:240)|15,te=G,G=L+(re(R,26149)>>>8|0)|0,H=G+-14234|0,R=L-(re(he,6419)>>>8|0)-(re(R,13320)>>>8)|0,L=R+8708|0,m[te|0]=(H>>>0<16384?H>>>6|0:G>>>0<14234?0:240)&240|(L>>>0<16384?L>>>10|0:(R|0)<-8708?0:15),E=E+1|0,(E|0)!=(S|0););}function z(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0;S=h[r+104>>2];e:{if(!S)break e;E=h[s>>2],L=h[E>>2],G=(L|0)==4|(L|0)==9,s=h[r+16>>2],y=h[r+8>>2],H=h[r+12>>2];t:{if(!h[r+56>>2]){R=y;break t}if(y?(R=y+-1|0,S=S-h[r>>2]|0,a=s):a=s+-1|0,s=s+y|0,y=h[r+84>>2],s=s+y|0,(s|0)!=h[r+88>>2]){s=a;break t}s=s-(y+R|0)|0}if(y=h[r>>2],r=h[E+20>>2],a=h[E+16>>2]+re(r,R)|0,!(dt[h[2666]](S,y,H,s,a+(G?0:3)|0,r)|0)|L+-7>>>0>3)break e;dt[h[2664]](a,G,H,s,h[E+20>>2])}return 0}function X(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;G=F[s+L|0],R=re(L,3)+y|0,te=re(F[r+L|0],19077)>>>8|0,he=F[a+L|0],E=te+(re(he,26149)>>>8|0)|0,H=E+-14234|0,m[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=te+(re(G,33050)>>>8|0)|0,H=E+-17685|0,m[R|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=R,G=te-(re(G,6419)>>>8|0)-(re(he,13320)>>>8)|0,R=G+8708|0,m[E+1|0]=R>>>0<16384?R>>>6|0:(G|0)<-8708?0:255,L=L+1|0,(L|0)!=(S|0););}function ne(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((S|0)>=1)for(;G=F[a+L|0],R=re(L,3)+y|0,te=re(F[r+L|0],19077)>>>8|0,he=F[s+L|0],E=te+(re(he,33050)>>>8|0)|0,H=E+-17685|0,m[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=te+(re(G,26149)>>>8|0)|0,H=E+-14234|0,m[R|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=R,G=te-(re(he,6419)>>>8|0)-(re(G,13320)>>>8)|0,R=G+8708|0,m[E+1|0]=R>>>0<16384?R>>>6|0:(G|0)<-8708?0:255,L=L+1|0,(L|0)!=(S|0););}function pe(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0;return y=h[s>>2],s=h[s+-4>>2],a=s&255,S=(y&255)-a|0,E=(r&255)-a|0,a=E>>31,L=s>>>24|0,R=(r>>>24|0)-L|0,G=R>>31,H=s>>>8&255,te=(r>>>8&255)-H|0,he=te>>31,ke=s>>>16&255,ze=(r>>>16&255)-ke|0,s=ze>>31,Ye=r,r=(y>>>24|0)-L|0,a=((((a^a+E)+((S|0)<0?S:0-S|0)|0)+(G^G+R)|0)+((r|0)<0?r:0-r|0)|0)+(he^he+te)|0,r=(y>>>8&255)-H|0,s=(a+((r|0)<0?r:0-r|0)|0)+(s^s+ze)|0,r=(y>>>16&255)-ke|0,((s+((r|0)<0?r:0-r|0)|0)<1?y:Ye)|0}function _e(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;if(S=h[r+8>>2],(S|0)>=1)for(te=re(h[r+52>>2],S),he=h[r+80>>2];;){if(a=S+L|0,y=h[r+36>>2],R=F[s+L|0],E=R,E=h[r+44>>2]>=2?F[s+a|0]:E,h[(L<<2)+he>>2]=re(y,R),G=a,(a|0)<(te|0))for(;;){y=y-h[r+40>>2]|0;e:{if((y|0)>=0){H=h[r+36>>2];break e}H=h[r+36>>2],y=H+y|0,R=E,G=S+G|0,E=F[G+s|0]}if(h[(a<<2)+he>>2]=re(E,H)+re(R-E|0,y),a=a+S|0,!((a|0)<(te|0)))break}if(L=L+1|0,(L|0)==(S|0))break}}function Ce(r){var s=0,a=0,y=0,S=0,E=0,L=0,R=0;y=h[r+20>>2];e:{if((y|0)<8){s=y;break e}for(a=h[r+16>>2],s=h[r+12>>2],R=a>>>0>s>>>0?a:s;;){if((a|0)==(R|0)){s=y;break e}if(E=h[r+4>>2],S=E>>>8|0,L=(E&255)<<24|h[r>>2]>>>8,E=S,h[r>>2]=L,h[r+4>>2]=S,S=F[h[r+8>>2]+a|0],s=y+-8|0,h[r+20>>2]=s,a=a+1|0,h[r+16>>2]=a,h[r>>2]=L,h[r+4>>2]=E|S<<24,S=(y|0)>15,y=s,!S)break}}h[r+16>>2]!=h[r+12>>2]|(s|0)<65&&!h[r+24>>2]||(h[r+20>>2]=0,h[r+24>>2]=1)}function Be(r,s){e:{if(r){if(s>>>0<=127)break e;t:{if(!h[h[2607]>>2]){if((s&-128)==57216)break e;break t}if(s>>>0<=2047)return m[r+1|0]=s&63|128,m[r|0]=s>>>6|192,2;if(!((s&-8192)!=57344&&s>>>0>=55296))return m[r+2|0]=s&63|128,m[r|0]=s>>>12|224,m[r+1|0]=s>>>6&63|128,3;if(s+-65536>>>0<=1048575)return m[r+3|0]=s&63|128,m[r|0]=s>>>18|240,m[r+2|0]=s>>>6&63|128,m[r+1|0]=s>>>12&63|128,4}h[2865]=25,r=-1}else r=1;return r}return m[r|0]=s,1}function Je(r){var s=0,a=0,y=0,S=0,E=0,L=0;return r?(S=h[r+8>>2]+-1|0,Zn[r>>2]<=10?(s=r+20|0,a=h[s>>2],h[s>>2]=0-a,h[r+16>>2]=h[r+16>>2]+re(a,S),0):(s=r+32|0,a=h[s>>2],h[s>>2]=0-a,y=r+36|0,s=h[y>>2],h[y>>2]=0-s,E=r+40|0,y=h[E>>2],h[E>>2]=0-y,h[r+16>>2]=h[r+16>>2]+re(a,S),a=r+20|0,E=a,L=h[a>>2],a=S>>1,h[E>>2]=L+re(a,s),s=r+24|0,h[s>>2]=h[s>>2]+re(a,y),s=h[r+28>>2],s&&(y=r+44|0,a=h[y>>2],h[y>>2]=0-a,h[r+28>>2]=s+re(a,S)),0)):2}function st(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;for(y=r+-25|0,S=r+-26|0,E=r+-27|0,L=r+-28|0,R=r+-29|0,G=r+-30|0,H=r+-31|0,te=r+-32|0,he=h[2548]-F[r+-33|0]|0;s=F[r+-1|0]+he|0,m[r|0]=F[s+F[te|0]|0],m[r+1|0]=F[F[H|0]+s|0],m[r+2|0]=F[F[G|0]+s|0],m[r+3|0]=F[F[R|0]+s|0],m[r+4|0]=F[F[L|0]+s|0],m[r+5|0]=F[F[E|0]+s|0],m[r+6|0]=F[F[S|0]+s|0],m[r+7|0]=F[F[y|0]+s|0],r=r+32|0,a=a+1|0,(a|0)!=8;);}function Mt(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0;a=F[r+95|0],m[r+67|0]=a,m[r+66|0]=a,s=re(a,16843009),m[r+96|0]=s,m[r+97|0]=s>>>8,m[r+98|0]=s>>>16,m[r+99|0]=s>>>24,S=F[r+31|0],y=S+1|0,s=F[r+63|0],E=y+s>>>1|0,m[r+32|0]=E,L=F[r+-1|0],m[r|0]=y+L>>>1,y=(s+a|0)+1>>>1|0,m[r+64|0]=y,m[r+2|0]=E,m[r+34|0]=y,y=((a+S|0)+(s<<1)|0)+2>>>2|0,m[r+33|0]=y,s=s+2|0,m[r+1|0]=(s+L|0)+(S<<1)>>>2,a=(s+a|0)+(a<<1)>>>2|0,m[r+65|0]=a,m[r+3|0]=y,m[r+35|0]=a}function Ct(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0;if(m[S|0]=F[r|0],H=s+-1|0,L=1,(s|0)>=2)for(R=S+1|0,G=r+1|0;m[E+R|0]=F[E+G|0]-F[r+E|0],E=E+1|0,(H|0)!=(E|0););if((a|0)>=2)for(R=(s|0)<2;;){if(S=y+S|0,s=r+y|0,m[S|0]=F[s|0]-F[r|0],!R)for(r=S+1|0,G=s+1|0,E=0;m[r+E|0]=F[E+G|0]-F[s+E|0],E=E+1|0,(H|0)!=(E|0););if(r=s,L=L+1|0,(L|0)==(a|0))break}}function Tt(r){r=r|0;var s=0,a=0,y=0,S=0,E=0,L=0;a=F[r+-30|0],s=a+2|0,y=F[r+-29|0],S=F[r+-28|0]+(s+(y<<1)|0)>>>2|0,m[r+99|0]=S,E=F[r+-31|0],L=E+2|0,y=y+(L+(a<<1)|0)>>>2|0,m[r+98|0]=y,a=s,s=F[r+-32|0],a=(a+s|0)+(E<<1)>>>2|0,m[r+97|0]=a,s=(F[r+-33|0]+L|0)+(s<<1)>>>2|0,m[r+96|0]=s,m[r+67|0]=S,m[r+66|0]=y,m[r+65|0]=a,m[r+64|0]=s,m[r+35|0]=S,m[r+34|0]=y,m[r+33|0]=a,m[r+32|0]=s,m[r+3|0]=S,m[r+2|0]=y,m[r+1|0]=a,m[r|0]=s}function ei(r,s){r=r|0,s=s|0;var a=0,y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;return s=h[s>>2],H=h[s+24>>2],E=s+40|0,te=h[E>>2],y=h[s+20>>2],L=s+36|0,S=h[L>>2],a=h[s+16>>2],R=h[r+8>>2],s=h[s+32>>2],he=a+re(R,s)|0,a=s,s=h[r+12>>2],G=h[r+16>>2],Ol(h[r+20>>2],h[r+32>>2],he,a,s,G),a=S,S=R>>1,a=y+re(a,S)|0,s=(s+1|0)/2|0,y=(G+1|0)/2|0,Ol(h[r+24>>2],h[r+36>>2],a,h[L>>2],s,y),Ol(h[r+28>>2],h[r+36>>2],re(S,te)+H|0,h[E>>2],s,y),h[r+16>>2]}function ui(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0;if((y|0)>=1)for(H=s?0:3,te=(s|0)!=0,he=(a|0)<1;;){if(!he)for(ke=r+H|0,G=r+te|0,s=0;E=s<<2,L=F[E+ke|0],(L|0)!=255&&(R=E+G|0,L=re(L,32897),m[R|0]=re(L,F[R|0])>>>23,R=(E|1)+G|0,m[R|0]=re(L,F[R|0])>>>23,E=(E|2)+G|0,m[E|0]=re(L,F[E|0])>>>23),s=s+1|0,(a|0)!=(s|0););if(r=r+S|0,s=(y|0)>1,y=y+-1|0,!s)break}}function vi(r,s){var a=0;a=(s|0)!=0;e:{t:{i:{if(!s|!(r&3))break i;for(;;){if(!F[r|0])break t;if(r=r+1|0,s=s+-1|0,a=(s|0)!=0,!s)break i;if(!(r&3))break}}if(!a)break e}t:{if(!F[r|0]|s>>>0<4)break t;for(;;){if(a=h[r>>2],(a^-1)&a+-16843009&-2139062144)break t;if(r=r+4|0,s=s+-4|0,!(s>>>0>3))break}}if(!s)break e;for(;;){if(!F[r|0])return r;if(r=r+1|0,s=s+-1|0,!s)break}}return 0}function jt(r){r=r|0;var s=0;s=re((F[r+95|0]+(F[r+-29|0]+(F[r+63|0]+(F[r+-30|0]+(F[r+31|0]+(F[r+-31|0]+(F[r+-32|0]+F[r+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),m[r+96|0]=s,m[r+97|0]=s>>>8,m[r+98|0]=s>>>16,m[r+99|0]=s>>>24,m[r+64|0]=s,m[r+65|0]=s>>>8,m[r+66|0]=s>>>16,m[r+67|0]=s>>>24,m[r+32|0]=s,m[r+33|0]=s>>>8,m[r+34|0]=s>>>16,m[r+35|0]=s>>>24,m[r|0]=s,m[r+1|0]=s>>>8,m[r+2|0]=s>>>16,m[r+3|0]=s>>>24}function Oi(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0,te=0;if((a|0)>=1)for(S=h[y+-4>>2];E=G<<2,L=E+s|0,R=h[L+4>>2],te=y+E|0,H=h[L>>2],R=((R^H)>>>1&2139062143)+(R&H)|0,L=h[L+-4>>2],S=((L^S)>>>1&2139062143)+(S&L)|0,S=((R^S)>>>1&2139062143)+(S&R)|0,E=h[r+E>>2],S=(S&-16711936)+(E&-16711936)&-16711936|(S&16711935)+(E&16711935)&16711935,h[te>>2]=S,G=G+1|0,(G|0)!=(a|0););}function ki(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0,Ye=0,yt=0;for(he=0-s|0,ke=0-(s<<1)|0,ze=a<<1|1,R=h[2548],G=h[2547],Ye=h[2546],H=h[2549];a=r+S|0,te=a+he|0,E=F[te|0],L=F[a|0],y=F[a+ke|0]-F[s+a|0]|0,((F[(E-L|0)+H|0]<<2)+F[y+H|0]|0)<=(ze|0)&&(y=m[y+Ye|0]+re(L-E|0,3)|0,yt=m[(y+4>>3)+G|0],m[te|0]=F[(m[(y+3>>3)+G|0]+E|0)+R|0],m[a|0]=F[(L-yt|0)+R|0]),S=S+1|0,(S|0)!=16;);}function Wi(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((a|0)>=1)for(;E=R<<2,G=Ri[s+2>>1],H=Ri[r>>1],te=Ri[s>>1],he=Ri[r+2>>1],L=dn[E+y>>1]+(((G+re(H,9)|0)+re(te+he|0,3)|0)+8>>4)|0,L=(L|0)<1023?L:1023,Ri[S+E>>1]=(L|0)>0?L:0,L=E|2,E=dn[L+y>>1]+(((re(he,9)+te|0)+re(G+H|0,3)|0)+8>>4)|0,E=(E|0)<1023?E:1023,Ri[S+L>>1]=(E|0)>0?E:0,s=s+2|0,r=r+2|0,R=R+1|0,(R|0)!=(a|0););}function Vi(r){var s=0,a=0,y=0;if(h[r+24>>2]<=0){e:{if(h[r+4>>2]){dt[h[2808]](r);break e}if(!h[r+20>>2]){if((re(h[r+52>>2],h[r+8>>2])|0)<1)break e;for(a=h[r+76>>2];y=s<<2,m[h[r+68>>2]+s|0]=h[y+a>>2],a=h[r+76>>2],h[y+a>>2]=0,s=s+1|0,(s|0)<(re(h[r+52>>2],h[r+8>>2])|0););break e}dt[h[2809]](r)}h[r+24>>2]=h[r+24>>2]+h[r+28>>2],h[r+68>>2]=h[r+68>>2]+h[r+72>>2],h[r+64>>2]=h[r+64>>2]+1}}function ln(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0;if((y|0)>=1)for(;S=dn[r+2>>1],E=dn[r>>1],R=dn[r+4>>1],G=(re(S,-19081)+re(E,-9719)|0)+re(R,28800)|0,H=G+33685504>>18,m[s+L|0]=H>>>0<256?H:(G|0)<-33685504?-33685504:255,S=(re(S,-24116)+re(E,28800)|0)+re(R,-4684)|0,E=S+33685504>>18,m[a+L|0]=E>>>0<256?E:(S|0)<-33685504?-33685504:255,r=r+8|0,L=L+1|0,(L|0)!=(y|0););}function Ui(r,s,a,y,S){var E=0,L=0,R=0,G=0,H=0,te=0,he=0;G=h[r+16>>2],L=h[r+8>>2],r=h[r+4>>2],R=8>>>r|0;e:{if((R|0)<=7){if((s|0)>=(a|0))break e;for(H=-1<<R^-1,te=-1<<r^-1,he=(L|0)<1;;){if(E=0,r=0,!he)for(;E&te||(r=F[y|0],y=y+1|0),m[S|0]=h[((r&H)<<2)+G>>2]>>>8,r=r>>>R|0,S=S+1|0,E=E+1|0,(E|0)!=(L|0););if(s=s+1|0,(a|0)==(s|0))break}break e}dt[h[2732]](y,G,S,s,a,L)}}function Mn(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0;E=h[s>>2],a=h[E+28>>2],L=h[E+44>>2],y=a+re(L,h[r+8>>2])|0,S=h[r+16>>2],R=h[r+12>>2],s=h[r+104>>2];e:{if(s){if((S|0)<1)break e;for(a=0;y=Wr(y,s,R)+h[E+44>>2]|0,s=h[r>>2]+s|0,a=a+1|0,(S|0)!=(a|0););break e}if(!a|(S|0)<1)break e;for(s=0;y=Qo(y,255,R)+L|0,s=s+1|0,(S|0)!=(s|0););}return 0}function _n(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0,ke=0,ze=0;for(he=a<<1|1,R=h[2548],G=h[2547],ke=h[2546],H=h[2549];a=re(s,S)+r|0,te=a+-1|0,E=F[te|0],L=F[a|0],y=F[a+-2|0]-F[a+1|0]|0,((F[(E-L|0)+H|0]<<2)+F[y+H|0]|0)<=(he|0)&&(y=m[y+ke|0]+re(L-E|0,3)|0,ze=m[(y+4>>3)+G|0],m[te|0]=F[(m[(y+3>>3)+G|0]+E|0)+R|0],m[a|0]=F[(L-ze|0)+R|0]),S=S+1|0,(S|0)!=16;);}function jn(r,s){r=r|0,s=s|0;var a=0,y=0;return a=h[s>>2],r=((a^r)>>>1&2139062143)+(r&a)|0,a=r&255,s=h[s+-4>>2],a=((a-(s&255)|0)/2|0)+a|0,y=a>>>0<256?a:(a^-1)>>>24|0,a=r>>>24|0,a=((a-(s>>>24|0)|0)/2|0)+a|0,y=y|(a>>>0<256?a:a>>>24^-1)<<24,a=r>>>16&255,a=((a-(s>>>16&255)|0)/2|0)+a|0,r=r>>>8&255,r=((r-(s>>>8&255)|0)/2|0)+r|0,y|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(r>>>0<256?r:(r^-1)>>>24|0)<<8}function Cr(r,s,a){var y=0;if(h[r+24>>2]=0,h[r+8>>2]=-8,h[r>>2]=0,h[r+4>>2]=254,h[r+12>>2]=s,y=s+a|0,h[r+16>>2]=y,y=a>>>0>3?y+-3|0:s,h[r+20>>2]=y,y>>>0>s>>>0){a=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),h[r+8>>2]=16,h[r+12>>2]=s+3,h[r>>2]=(a>>>8&65280|(a<<8&16711680|a<<24))>>>8;return}if((a|0)>=1){h[r+8>>2]=0,h[r+12>>2]=s+1,h[r>>2]=F[s|0];return}h[r+24>>2]=1,h[r+8>>2]=0,h[r>>2]=0}function Lr(r,s,a){var y=0,S=0,E=0,L=0;y=h[a+16>>2];e:{if(!y){if(ls(a))break e;y=h[a+16>>2]}if(E=h[a+20>>2],y-E>>>0<s>>>0)return dt[h[a+36>>2]](a,r,s)|0;t:{if(m[a+75|0]<0)break t;for(S=s;;){if(y=S,!y)break t;if(S=y+-1|0,F[S+r|0]==10)break}if(S=dt[h[a+36>>2]](a,r,y)|0,S>>>0<y>>>0)break e;r=r+y|0,s=s-y|0,E=h[a+20>>2],L=y}Wr(E,r,s),h[a+20>>2]=h[a+20>>2]+s,S=s+L|0}return S}function j(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;if((a|0)>=1)for(te=(s|0)<1;;){if(L=0,!te)for(;S=L<<1,E=S+r|0,he=E,H=(S|1)+r|0,R=F[H|0],S=R&15,G=re(S,4369),E=F[E|0],m[he|0]=re(G,E&240|E>>>4)>>>16&240|re((E&15|E<<4)&255,G)>>>20,m[H|0]=re(R&240|R>>>4,G)>>>16&240|S,L=L+1|0,(L|0)!=(s|0););if(r=r+y|0,S=(a|0)>1,a=a+-1|0,!S)break}}function K(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0,L=0,R=0,G=0;if(m[S|0]=F[r|0],(s|0)>=2)for(R=s+-1|0,L=S+1|0,G=r+1|0;m[E+L|0]=F[E+G|0]-F[r+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(L=1;;){if(S=y+S|0,R=r+y|0,E=0,(s|0)>=1)for(;m[S+E|0]=F[E+R|0]-F[r+E|0],E=E+1|0,(E|0)!=(s|0););if(r=R,L=L+1|0,(L|0)==(a|0))break}}function ue(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0;if((s|0)>=1)for(;y=(E<<2)+r|0,S=h[y>>2],S>>>0<=4278190079&&(L=y,S>>>0>=16777216?(y=S>>>24|0,a?y=4278190080/(y>>>0)|0:y=re(y,65793),y=re(y,S>>>16&255)+8388608>>>8&16711680|(re(y,S>>>8&255)+8388608>>>16&65280|(S&-16777216|re(y,S&255)+8388608>>>24))):y=0,h[L>>2]=y),E=E+1|0,(E|0)!=(s|0););}function ve(r,s,a){var y=0,S=0,E=0,L=0,R=0,G=0,H=0,te=0,he=0;if(h[r+20>>2]=0,h[r+24>>2]=0,h[r>>2]=0,h[r+4>>2]=0,h[r+12>>2]=a,E=a>>>0<8?a:8,E)for(he=E,a=0;L=F[s+a|0],S=R<<3,y=S&31,32<=(S&63)>>>0?(S=L<<y,y=0):(S=(1<<y)-1&L>>>32-y,y=L<<y),G=y|G,H=S|H,a=a+1|0,y=R+1|0,y>>>0<1&&(te=te+1|0),R=y,!!((he|0)!=(y|0)|te););h[r+16>>2]=E,h[r>>2]=G,h[r+4>>2]=H,h[r+8>>2]=s}function Ne(r,s){var a=0,y=0,S=0;a=0;e:{if(!r)break e;if(!s)return h[r>>2]=2,0;h[r>>2]=0,h[r+8>>2]=s,a=r+24|0,ve(a,h[s+64>>2],h[s+60>>2]);t:{i:{n:{if((no(a,8)|0)!=47||(S=no(a,14),y=no(a,14),no(a,1),no(a,3)))break n;if(!h[r+48>>2])break i}h[r>>2]=3;break t}if(h[r+4>>2]=2,y=y+1|0,h[s+4>>2]=y,a=s,s=S+1|0,h[a>>2]=s,a=1,cn(s,y,1,r,0))break e}Wo(r),a=0}return a}function Ke(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;e:{if(!r){if((y|0)<1)break e;for(;S=F[s+E|0]+S|0,m[a+E|0]=S,E=E+1|0,(E|0)!=(y|0););break e}if((y|0)<1)break e;for(S=F[r|0],L=S,R=S;;){if(L=(L&255)-(R&255)|0,R=S,S=(S&255)+L|0,S=(S|0)>0?S:0,L=F[s+E|0]+((S|0)<255?S:255)|0,m[a+E|0]=L,E=E+1|0,(E|0)==(y|0))break e;S=F[r+E|0]}}}function it(r,s,a,y){var S=0,E=0,L=0,R=0;return S=h[y>>2],E=h[a>>2],E|(s|0)<1||(R=yr(S,S>>31,r,r>>31),E=s+R|0,L=Pn,L=E>>>0<R>>>0?L+1|0:L,E=E+-1|0,L=L+-1|0,E=bc(E,(E|0)!=-1?L+1|0:L,s,0)),S|(r|0)<1||(L=yr(E,E>>31,s,s>>31),S=L+r|0,s=Pn,s=S>>>0<L>>>0?s+1|0:s,S=S+-1|0,s=s+-1|0,S=bc(S,(S|0)!=-1?s+1|0:s,r,0)),r=0,(E|0)<1|(S|0)<1||(h[a>>2]=E,h[y>>2]=S,r=1),r}function at(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(S=h[y+-4>>2];E=G<<2,L=E+s|0,R=h[L+4>>2],S=((R^S)>>>1&2139062143)+(S&R)|0,R=y+E|0,L=h[L>>2],S=((L^S)>>>1&2139062143)+(S&L)|0,E=h[r+E>>2],S=(S&-16711936)+(E&-16711936)&-16711936|(S&16711935)+(E&16711935)&16711935,h[R>>2]=S,G=G+1|0,(G|0)!=(a|0););}function gt(r,s){r=r|0,s=s|0;var a=0,y=0,S=0;return y=h[s>>2],s=h[s+-4>>2],a=((y&255)+(r&255)|0)-(s&255)|0,S=a>>>0<256?a:(a^-1)>>>24|0,a=(y>>>24)+(r>>>24)-(s>>>24)|0,S=S|(a>>>0<256?a:a>>>24^-1)<<24,a=((y>>>16&255)+(r>>>16&255)|0)-(s>>>16&255)|0,r=((y>>>8&255)+(r>>>8&255)|0)-(s>>>8&255)|0,S|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(r>>>0<256?r:(r^-1)>>>24|0)<<8}function Et(r,s,a,y,S){var E=0;e:{if(!r|s>>>0<10|(F[r+3|0]!=157|F[r+4|0]!=1)||F[r+5|0]!=42||(s=F[r|0],(s&25)!=16|(s|F[r+1|0]<<8|F[r+2|0]<<16)>>>5>>>0>=a>>>0)||(s=F[r+6|0]|F[r+7|0]<<8&16128,!s)||(r=F[r+8|0]|F[r+9|0]<<8&16128,!r)||(y&&(h[y>>2]=s),E=1,!S))break e;h[S>>2]=r}return E}function ii(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0,R=0,G=0;e:{if(y=h[r+104>>2],!y|(a|0)<1)break e;for(R=h[s+16>>2]+a|0,S=h[s+36>>2];;){if(E=h[r+8>>2],L=h[S+60>>2],G=y,y=h[r>>2],Ss(S,h[r+16>>2]+(E-L|0)|0,G+re(y,L-E|0)|0,y),a=a-(dt[h[s+52>>2]](s,R-a|0,a)|0)|0,(a|0)<1)break e;y=h[r+104>>2]}}return 0}function bi(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0,te=0;if((a|0)>=1)for(G=m[r+2|0],H=m[r+1|0],te=m[r|0];E=S<<2,r=h[E+s>>2],L=r<<16>>24,R=(re(L,te)>>5)+(r>>>16|0)|0,h[y+E>>2]=r+(re(H,L)>>>5|0)+(re(R<<24>>24,G)>>>5)&255|(R<<16&16711680|r&-16711936),S=S+1|0,(S|0)!=(a|0););}function _i(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;if((a|0)>=1)for(R=s+-4|0,s=h[y+-4>>2];S=L<<2,E=h[S+R>>2],s=((E^s)>>>1&2139062143)+(s&E)|0,E=y+S|0,S=h[r+S>>2],s=(s&-16711936)+(S&-16711936)&-16711936|(s&16711935)+(S&16711935)&16711935,h[E>>2]=s,L=L+1|0,(L|0)!=(a|0););}function ci(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(;S=R<<2,E=S+s|0,L=h[E>>2],G=y+S|0,E=h[E+-4>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,S=h[r+S>>2],h[G>>2]=(L&-16711936)+(S&-16711936)&-16711936|(L&16711935)+(S&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function rn(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(;S=R<<2,E=S+s|0,L=h[E+4>>2],G=y+S|0,E=h[E>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,S=h[r+S>>2],h[G>>2]=(L&-16711936)+(S&-16711936)&-16711936|(L&16711935)+(S&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function Bi(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;if((a|0)>=1)for(S=h[y+-4>>2];E=R<<2,L=h[E+s>>2],S=((L^S)>>>1&2139062143)+(S&L)|0,L=y+E|0,E=h[r+E>>2],S=(S&-16711936)+(E&-16711936)&-16711936|(S&16711935)+(E&16711935)&16711935,h[L>>2]=S,R=R+1|0,(R|0)!=(a|0););}function qt(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0,G=0,H=0;if((y|0)>=1)for(;E=L<<1,S=E+a|0,H=S,E=dn[r+E>>1]-dn[s+E>>1]|0,S=E+dn[S>>1]|0,S=(S|0)<1023?S:1023,Ri[H>>1]=(S|0)>0?S:0,S=E>>31,E=S+E^S,S=R+E|0,S>>>0<E>>>0&&(G=G+1|0),R=S,L=L+1|0,(L|0)!=(y|0););return Pn=G,R|0}function Kt(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0,G=0,H=0,te=0;if(R=255,(y|0)>=1)for(te=(a|0)<1;;){if(L=0,!te)for(;G=F[(L<<2)+r|0],m[S+L|0]=G,R=R&G,L=L+1|0,(L|0)!=(a|0););if(S=S+E|0,r=r+s|0,H=H+1|0,(H|0)==(y|0))break}return(R&255)==255|0}function Zi(r,s,a){var y=0,S=0,E=0;e:{if((s|0)==1&r>>>0<0|s>>>0<1){y=r;break e}for(;y=bc(r,s,10,0),S=Pn,E=S,S=yr(y,S,10,0),a=a+-1|0,m[a|0]=r-S|48,S=s>>>0>9,r=y,s=E,!!S;);}if(y)for(;a=a+-1|0,r=(y>>>0)/10|0,m[a|0]=y-re(r,10)|48,s=y>>>0>9,y=r,!!s;);return a}function Qi(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0,G=0,H=0,te=0;if(R=255,(y|0)>=1)for(te=(a|0)<1;;){if(L=0,!te)for(;G=F[r+L|0],m[(L<<2)+S|0]=G,R=R&G,L=L+1|0,(L|0)!=(a|0););if(S=S+E|0,r=r+s|0,H=H+1|0,(H|0)==(y|0))break}return(R|0)!=255|0}function Hi(r,s,a,y,S){var E=0,L=0,R=0;E=Fn-32|0,Fn=E;e:{if(!r|s>>>0<5|(F[r|0]!=47|F[r+4|0]>31)||(ve(E,r,s),(no(E,8)|0)!=47)||(r=no(E,14),s=no(E,14),L=no(E,1),no(E,3)|h[E+24>>2])||(a&&(h[a>>2]=r+1),y&&(h[y>>2]=s+1),R=1,!S))break e;h[S>>2]=L}return Fn=E+32|0,R}function Tn(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;if((a|0)>=1)for(;;){S=F[s+E|0];e:{if((S|0)==255)break e;if(!S){m[r+E|0]=0;break e}L=r+E|0,R=L,y?S=4278190080/(S>>>0)|0:S=re(S,65793),m[R|0]=re(S,F[L|0])+8388608>>>24}if(E=E+1|0,(E|0)==(a|0))break}}function An(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0;e:{if(r){if((y|0)<=0)break e;for(;m[a+S|0]=F[s+S|0]+F[r+S|0],S=S+1|0,(S|0)!=(y|0););break e}if((y|0)<1)break e;for(r=0;r=F[s+S|0]+r|0,m[a+S|0]=r,S=S+1|0,(S|0)!=(y|0););}}function xr(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+-4|0,s=0;S=s<<2,E=h[S+r>>2],R=y+S|0,S=h[S+L>>2],h[R>>2]=(E&-16711936)+(S&-16711936)&-16711936|(E&16711935)+(S&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function Ln(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0,G=0;if((y|0)>=1)for(R=(a|0)<1,G=E<<2;;){if(E=0,!R)for(;h[(E<<2)+S>>2]=F[r+E|0]<<8,E=E+1|0,(E|0)!=(a|0););if(r=r+s|0,S=S+G|0,L=L+1|0,(L|0)==(y|0))break}}function vo(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0;if((y|0)<(S|0))for(R=(E|0)<1;;){if(L=0,!R)for(;h[a>>2]=h[(h[r>>2]>>>6&1020)+s>>2],a=a+4|0,r=r+4|0,L=L+1|0,(L|0)!=(E|0););if(y=y+1|0,(S|0)==(y|0))break}}function So(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+4|0,s=0;S=s<<2,E=h[S+r>>2],R=y+S|0,S=h[S+L>>2],h[R>>2]=(E&-16711936)+(S&-16711936)&-16711936|(E&16711935)+(S&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function Xr(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0;if((y|0)<(S|0))for(R=(E|0)<1;;){if(L=0,!R)for(;m[a|0]=h[(F[r|0]<<2)+s>>2]>>>8,a=a+1|0,r=r+1|0,L=L+1|0,(L|0)!=(E|0););if(y=y+1|0,(S|0)==(y|0))break}}function jr(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0,R=0;if((a|0)>=1)for(;S=E<<2,L=h[S+r>>2],R=y+S|0,S=h[s+S>>2],h[R>>2]=(L&-16711936)+(S&-16711936)&-16711936|(L&16711935)+(S&16711935)&16711935,E=E+1|0,(E|0)!=(a|0););}function mo(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0;if((a|0)>=1)for(s=h[y+-4>>2];E=S<<2,L=h[E+r>>2],s=(L&-16711936)+(s&-16711936)&-16711936|(L&16711935)+(s&16711935)&16711935,h[y+E>>2]=s,S=S+1|0,(S|0)!=(a|0););}function ko(){var r=0,s=0;r=iu(1,0,2376);e:{if(!r||(h[r>>2]=0,h[r+8>>2]=5010,dt[h[2557]](r+124|0),h[r+312>>2]=0,h[r+4>>2]=0,h[2661]))break e;t:{if(s=h[2673],!s||!(dt[s|0](2)|0))break t;return h[2661]=19,r}h[2661]=20}return r}function qr(r,s,a){var y=0,S=0;return y=2,!r|!a||(h[a>>2]=0,h[a+4>>2]=0,h[a+32>>2]=0,h[a+36>>2]=0,h[a+24>>2]=0,h[a+28>>2]=0,S=a+16|0,y=S,h[y>>2]=0,h[y+4>>2]=0,y=a+8|0,h[y>>2]=0,h[y+4>>2]=0,y=Il(r,s,a,a+4|0,y,a+12|0,S,0)),y}function Ls(r,s,a,y){var S=0,E=0,L=0,R=0,G=0,H=0;return S=a>>>16|0,E=r>>>16|0,H=re(S,E),L=a&65535,R=r&65535,G=re(L,R),E=(G>>>16|0)+re(E,L)|0,S=(E&65535)+re(S,R)|0,r=(re(s,a)+H|0)+re(r,y)+(E>>>16)+(S>>>16)|0,s=G&65535|S<<16,Pn=r,s}function Pr(r){var s=0;if(s=h[r+12>>2],s>>>0<Zn[r+16>>2]){h[r+12>>2]=s+1,h[r+8>>2]=h[r+8>>2]+8,h[r>>2]=F[s|0]|h[r>>2]<<8;return}if(!h[r+24>>2]){h[r+24>>2]=1,h[r>>2]=h[r>>2]<<8,h[r+8>>2]=h[r+8>>2]+8;return}h[r+8>>2]=0}function as(r,s){r=r|0,s=s|0;var a=0;return s=h[s>>2],a=h[s+20>>2],Hh(h[r+20>>2],h[r+32>>2],h[r+24>>2],h[r+28>>2],h[r+36>>2],re(a,h[r+8>>2])+h[s+16>>2]|0,a,h[r+12>>2],h[r+16>>2],h[(h[s>>2]<<2)+11376>>2]),h[r+16>>2]}function Ns(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0;if((a|0)>=1)for(;S=h[(y<<2)+r>>2],m[s+y|0]=((re(S&255,6420)+re(S>>>16&255,16839)|0)+re(S>>>8&255,33059)|0)+1081344>>>16,y=y+1|0,(y|0)!=(a|0););}function ao(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0;S=Fn-16|0,Fn=S;e:{if(!Pf(_u(h[r+60>>2],s|0,a|0,y&255,S+8|0)|0)){s=h[S+12>>2],r=h[S+8>>2];break e}h[S+8>>2]=-1,h[S+12>>2]=-1,s=-1,r=-1}return Fn=S+16|0,Pn=s,r|0}function fs(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0,R=0;if((y|0)>=1)for(;h[(R<<2)+E>>2]=F[a+L|0]|(F[r+L|0]<<16|F[s+L|0]<<8)|-16777216,L=S+L|0,R=R+1|0,(R|0)!=(y|0););}function Ps(r,s,a){r=r|0,s=s|0,a=a|0;var y=0,S=0,E=0,L=0;if((s|0)>=1)for(;E=y<<2,S=h[E+r>>2],L=S>>>8&255,h[a+E>>2]=(S&16711935)+(L<<16|L)&16711935|S&-16711936,y=y+1|0,(y|0)!=(s|0););}function js(r){r&&(dt[h[2562]](r+124|0),u0(r),Rr(h[r+2288>>2]),h[r+2288>>2]=0,h[r+2292>>2]=0,h[r+12>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+4>>2]=0,Rr(r))}function Uo(r,s,a,y,S){var E=0;if(E=Fn-256|0,Fn=E,!(S&73728|(a|0)<=(y|0))){if(a=a-y|0,y=a>>>0<256,Qo(E,s&255,y?a:256),!y)for(;Zh(r,E,256),a=a+-256|0,a>>>0>255;);Zh(r,E,a)}Fn=E+256|0}function wa(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((a|0)>=1)for(;m[s+y|0]=((re(F[r+2|0],16839)+re(F[r+1|0],33059)|0)+re(F[r|0],6420)|0)+1081344>>>16,r=r+3|0,y=y+1|0,(y|0)!=(a|0););}function Za(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((a|0)>=1)for(;m[s+y|0]=((re(F[r|0],16839)+re(F[r+1|0],33059)|0)+re(F[r+2|0],6420)|0)+1081344>>>16,r=r+3|0,y=y+1|0,(y|0)!=(a|0););}function Oo(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((s|0)>=1)for(y=(s<<2)+r|0;s=h[r>>2],m[a+2|0]=s,m[a+3|0]=s>>>24,m[a+1|0]=s>>>8,m[a|0]=s>>>16,a=a+4|0,r=r+4|0,r>>>0<y>>>0;);}function ks(r,s,a,y){var S=0,E=0;S=Fn-1024|0,Fn=S;e:{if(!r){y=Ts(0,s,a,y,0);break e}if((y|0)<=512){y=Ts(r,s,a,y,S);break e}if(E=Ms(y,0,2),!E){y=0;break e}y=Ts(r,s,a,y,E),Rr(E)}return Fn=S+1024|0,y}function eu(){var r=0;r=h[2673],(r|0)!=h[2555]&&(h[2854]=136,h[2853]=137,h[2852]=138,h[2851]=139,h[2850]=140,h[2849]=136,h[2848]=137,h[2847]=138,h[2846]=141,h[2845]=139,h[2844]=142,h[2555]=r)}function Ka(){var r=0;r=h[2673],(r|0)!=h[2553]&&(h[2831]=129,h[2829]=130,h[2838]=131,h[2837]=132,h[2836]=129,h[2835]=130,h[2834]=133,h[2833]=131,h[2832]=132,h[2830]=134,h[2828]=135,h[2553]=r)}function ml(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((s|0)>=1)for(y=(s<<2)+r|0;s=h[r>>2],m[a+1|0]=s>>>5&224|s>>>3&31,m[a|0]=s>>>16&248|s>>>13&7,a=a+2|0,r=r+4|0,r>>>0<y>>>0;);}function gl(){var r=0;r=h[2673],(r|0)!=h[2554]&&(h[2820]=122,h[2819]=123,h[2815]=122,h[2813]=123,h[2822]=124,h[2821]=125,h[2818]=126,h[2817]=124,h[2816]=125,h[2814]=127,h[2812]=128,h[2554]=r)}function ls(r){var s=0;return s=F[r+74|0],m[r+74|0]=s+-1|s,s=h[r>>2],s&8?(h[r>>2]=s|32,-1):(h[r+4>>2]=0,h[r+8>>2]=0,s=h[r+44>>2],h[r+28>>2]=s,h[r+20>>2]=s,h[r+16>>2]=s+h[r+48>>2],0)}function Vh(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((s|0)>=1)for(y=(s<<2)+r|0;s=h[r>>2],m[a+1|0]=s&240|s>>>28,m[a|0]=s>>>16&240|s>>>12&15,a=a+2|0,r=r+4|0,r>>>0<y>>>0;);}function a0(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0;if((a|0)>=1)for(s=0;S=s<<2,E=h[S+r>>2],h[y+S>>2]=E+-16777216&-16711936|E&16711935,s=s+1|0,(a|0)!=(s|0););}function xf(r,s){r=r|0,s=s|0,dn[r>>1]&&dt[h[2706]](r,s),dn[r+32>>1]&&dt[h[2706]](r+32|0,s+4|0),dn[r+64>>1]&&dt[h[2706]](r- -64|0,s+128|0),dn[r+96>>1]&&dt[h[2706]](r+96|0,s+132|0)}function fc(){var r=0;r=h[2673],(r|0)!=h[2544]&&(h[2663]=21,h[2662]=22,h[2665]=23,h[2670]=24,h[2664]=25,h[2666]=26,h[2667]=27,h[2668]=28,h[2669]=29,h[2671]=30,h[2672]=31,h[2544]=r)}function dc(r,s){r=r|0,s=s|0;var a=0,y=0;return a=h[s>>2],y=h[s+4>>2],a=((a^y)>>>1&2139062143)+(a&y)|0,s=h[s+-4>>2],r=((s^r)>>>1&2139062143)+(r&s)|0,((a^r)>>>1&2139062143)+(r&a)|0}function qh(r){r=r|0;var s=0,a=0,y=0;return h[r+12>>2]<1|h[r+16>>2]<1||(s=h[r+40>>2],a=dt[h[s+44>>2]](r,s)|0,y=h[s+48>>2],y&&dt[y|0](r,s,a)|0,h[s+16>>2]=h[s+16>>2]+a,s=1),s|0}function Ja(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0,L=0;if((y|0)>=1)for(;E=S<<1,L=E+a|0,Ri[L>>1]=dn[L>>1]+(dn[r+E>>1]-dn[s+E>>1]|0),S=S+1|0,(S|0)!=(y|0););}function Qa(r){var s=0,a=0;s=h[3008],a=r+3&-4,r=s+a|0;e:{if(r>>>0<=s>>>0&&(a|0)>=1||r>>>0>Sp()<<16>>>0&&!(gu(r|0)|0))break e;return h[3008]=r,s}return h[2865]=48,-1}function pc(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((s|0)>=1)for(y=(s<<2)+r|0;s=h[r>>2],m[a|0]=s,m[a+2|0]=s>>>16,m[a+1|0]=s>>>8,a=a+3|0,r=r+4|0,r>>>0<y>>>0;);}function mc(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((s|0)>=1)for(y=(s<<2)+r|0;s=h[r>>2],m[a+2|0]=s,m[a+1|0]=s>>>8,m[a|0]=s>>>16,a=a+3|0,r=r+4|0,r>>>0<y>>>0;);}function Hh(r,s,a,y,S,E,L,R,G,H){var te=0,he=0;if((G|0)>=1)for(;dt[H|0](r,a,y,E,R),he=te&1,a=he?a+S|0:a,y=he?y+S|0:y,E=E+L|0,r=r+s|0,te=te+1|0,(te|0)!=(G|0););}function jc(r,s){var a=0,y=0,S=0;a=0;e:{if(!r||(y=yr(r,0,s,0),S=Pn,a=y,(r|s)>>>0<65536))break e;a=S?-1:y}return s=a,r=Wa(s),!r|!(F[r+-4|0]&3)||Qo(r,0,s),r}function gc(r,s){r=r|0,s=s|0;var a=0,y=0,S=0;e:{if((s|0)<=0)break e;for(;;){if(F[r+a|0]==255){if(a=a+4|0,y=(s|0)<2,s=s+-1|0,!y)continue;break e}break}S=1}return S|0}function Uc(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0;var S=0,E=0;if(S=r?F[r|0]:S,(y|0)>=1)for(;S=F[s+E|0]+S|0,m[a+E|0]=S,E=E+1|0,(E|0)!=(y|0););}function yc(r){var s=0;e:{if(h[r+64>>2]>=h[r+56>>2])break e;for(;;){if(h[r+24>>2]>0)break e;if(s=s+1|0,Vi(r),!(h[r+64>>2]<h[r+56>>2]))break}}return s}function Vc(r,s){var a=0,y=0,S=0,E=0;a=4;e:{for(;;){if(y=F[r|0],S=F[s|0],(y|0)==(S|0)){if(s=s+1|0,r=r+1|0,a=a+-1|0,a)continue;break e}break}E=y-S|0}return E}function ua(){var r=0;r=h[2673],(r|0)!=h[2556]&&(h[2861]=143,h[2860]=144,h[2857]=145,h[2858]=146,h[2859]=147,h[2862]=148,h[2863]=149,h[2864]=150,h[2556]=r)}function Qs(r){var s=0,a=0,y=0;if(Mf(m[h[r>>2]]))for(;s=h[r>>2],y=m[s|0],h[r>>2]=s+1,a=(re(a,10)+y|0)+-48|0,!!Mf(m[s+1|0]););return a}function Ms(r,s,a){var y=0,S=0,E=0;e:{if(r|s&&(S=bc(2147418112,0,r,s),y=Pn,yr(a,0,r,s),!y&S>>>0<a>>>0|y>>>0<0|Pn>>>0>0))break e;E=Wa(re(r,a))}return E}function tu(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0;var E=0;E=r,r=s<<2,E=E+r|0,Vr(E,s,1,16,a,y,S),E=r+E|0,Vr(E,s,1,16,a,y,S),Vr(r+E|0,s,1,16,a,y,S)}function l0(){var r=0;r=h[2673],(r|0)!=h[2550]&&(h[2731]=75,h[2730]=76,h[2729]=77,h[2728]=0,h[2727]=78,h[2726]=79,h[2725]=80,h[2724]=0,h[2550]=r)}function iu(r,s,a){var y=0,S=0,E=0;e:{if(r|s&&(S=bc(2147418112,0,r,s),y=Pn,yr(a,0,r,s),!y&S>>>0<a>>>0|y>>>0<0|Pn>>>0>0))break e;E=jc(r,a)}return E}function u0(r){var s=0;Rr(h[r+2360>>2]),h[r+2360>>2]=0,h[r+2364>>2]=0,s=h[r+2344>>2],s&&(y0(h[s+20>>2]),h[s+20>>2]=0,Rr(s)),h[r+2344>>2]=0}function Af(r,s,a){r=r|0,s=s|0,a=a|0;var y=0;if((a|0)>=1)for(;m[s+y|0]=h[(y<<2)+r>>2]>>>8,y=y+1|0,(y|0)!=(a|0););}function yh(r,s,a,y){if(r|s)for(;a=a+-1|0,m[a|0]=F[(r&15)+10128|0]|y,r=(s&15)<<28|r>>>4,s=s>>>4|0,!!(r|s););return a}function qc(r,s,a,y,S,E,L){var R=0;if((E|0)>=1)for(;dt[h[2663]](r,a,S,L),a=a+y|0,r=r+s|0,R=R+1|0,(R|0)!=(E|0););}function Sf(r,s){r=r|0,s=s|0;for(var a=0;;){if((s|0)<1)return 0;if(s=s+-1|0,a=F[r|0],r=r+1|0,(a|0)!=255)break}return 1}function _h(r,s){r=r|0,s=s|0;var a=0;return a=h[s+4>>2],r=((a^r)>>>1&2139062143)+(r&a)|0,s=h[s>>2],((r^s)>>>1&2139062143)+(r&s)|0}function Gh(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0;var L=0;L=r,r=a<<2,Vr(L+r|0,a,1,8,y,S,E),Vr(r+s|0,a,1,8,y,S,E)}function vh(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,Vr(r+4|0,1,s,16,a,y,S),Vr(r+8|0,1,s,16,a,y,S),Vr(r+12|0,1,s,16,a,y,S)}function Ol(r,s,a,y,S,E){var L=0;if((E|0)>=1)for(;a=Wr(a,r,S)+y|0,r=r+s|0,L=(E|0)>1,E=E+-1|0,!!L;);}function c0(r,s,a){if(r|s)for(;a=a+-1|0,m[a|0]=r&7|48,r=(s&7)<<29|r>>>3,s=s>>>3|0,!!(r|s););return a}function Hc(r,s,a,y,S,E,L,R,G,H){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,R=R|0,G=G|0,H=H|0,dt[r|0](s,a,y,S,E,L,R,G,H)}function _c(r,s,a,y){var S=0;if((y|0)>=1)for(;dt[h[2662]](r,a,0),r=r+s|0,S=S+1|0,(S|0)!=(y|0););}function xa(){var r=0;r=h[2673],(r|0)!=h[2552]&&(h[2809]=118,h[2808]=119,h[2807]=120,h[2806]=121,h[2552]=r)}function nu(r,s){var a=0;return a=1<<s,a=iu(a,a>>31,4),h[r>>2]=a,a?(h[r+8>>2]=s,h[r+4>>2]=32-s,1):0}function h0(r,s){var a=0;return a=1,h[r+148>>2]>=1&&(a=dt[h[2559]](r+124|0)|0),r=h[s+52>>2],r&&dt[r|0](s),a}function kf(r){r=r|0;var s=0;s=h[r+8>>2],s&&(s=dt[s|0](h[r+12>>2],h[r+16>>2])|0,h[r+20>>2]=h[r+20>>2]|!s)}function dd(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,Vr(r+4|0,1,a,8,y,S,E),Vr(s+4|0,1,a,8,y,S,E)}function vc(r,s){var a=0;return a=h[r+24>>2],r=h[r+32>>2],r=((a+r|0)+-1|0)/(r|0)|0,(r|0)>(s|0)?s:r}function Eu(r,s,a,y,S,E,L){return r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,dt[r|0](s,a,y,S,E,L)|0}function f0(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,Ws(r,1,a,8,y,S,E),Ws(s,1,a,8,y,S,E)}function Xu(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,Ws(r,a,1,8,y,S,E),Ws(s,a,1,8,y,S,E)}function bh(r){r=r|0,h[r>>2]=0,h[r+4>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0}function Cf(r,s,a,y,S){return r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,r=dt[r|0](s,a,y,S)|0,Wl(Pn|0),r|0}function pd(r,s){var a=0;return!s|h[r+12>>2]<2|h[r>>2]+-7>>>0>3||(a=h[s+8>>2]!=0),a}function wh(r,s){return r=r|0,s=s|0,r=h[s>>2],s=h[s+-4>>2],((r^s)>>>1&2139062143)+(r&s)|0}function Ef(r,s,a,y,S,E,L){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,L=L|0,dt[r|0](s,a,y,S,E,L)}function Aa(r,s){var a=0,y=0;return a=s&31,y=(-1>>>a&r)<<a,a=r,r=0-s&31,y|(a&-1<<r)>>>r}function Iu(r,s){return r=r|0,s=s|0,r=h[s+4>>2],s=h[s>>2],((r^s)>>>1&2139062143)+(r&s)|0}function Yu(r,s){return r=r|0,s=s|0,s=h[s+-4>>2],((s^r)>>>1&2139062143)+(r&s)|0}function ru(r,s,a,y,S,E){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,E=E|0,dt[r|0](s,a,y,S,E)}function Wh(r){e:{if(h[r+76>>2]<=-1){r=Lr(1024,26,r);break e}r=Lr(1024,26,r)}}function Zu(r,s){r=r|0,s=s|0,dt[h[2703]](r,s,1),dt[h[2703]](r- -64|0,s+128|0,1)}function d0(r,s){return r=r|0,s=s|0,s=h[s>>2],((s^r)>>>1&2139062143)+(r&s)|0}function $o(r,s,a){return h[r>>2]||(h[r+8>>2]=a,h[r>>2]=s,h[r+4>>2]=0),0}function Ku(r,s,a){var y=0;y=Fn-16|0,Fn=y,h[y+12>>2]=a,gr(r,s,a),Fn=y+16|0}function Xh(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,Ws(r,1,s,16,a,y,S)}function p0(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,Ws(r,s,1,16,a,y,S)}function m0(r){return r=r|0,h[r+20>>2]=0,h[r+4>>2]||(h[r+4>>2]=1),1}function Yh(r,s){h[s+40>>2]=r,h[s+52>>2]=3,h[s+48>>2]=4,h[s+44>>2]=5}function pp(r,s){if(!h[r>>2]){dt[h[2806]](r,s);return}dt[h[2807]](r,s)}function mp(r,s,a,y,S){r=r|0,s=s|0,a=a|0,y=y|0,S=S|0,dt[r|0](s,a,y,S)}function If(r,s,a){r=r|0,s=s|0,a=a|0,Xa(r,s),a&&Xa(r+32|0,s+4|0)}function md(r,s,a,y){return r=r|0,s=s|0,a=a|0,y=y|0,dt[r|0](s,a,y)|0}function Tf(r){r&&(h[r+12>>2]<=0&&Rr(h[r+80>>2]),h[r+80>>2]=0)}function sm(r){r=r|0,r=h[r+40>>2],Rr(h[r+40>>2]),h[r+40>>2]=0}function gp(r,s,a,y){r=r|0,s=s|0,a=a|0,y=y|0,dt[r|0](s,a,y)}function Lf(r,s,a){return r=r|0,s=s|0,a=a|0,dt[r|0](s,a)|0}function yp(r){return r?31-Mr(r+-1^r)|0:32}function g0(r,s){Wr(h[s>>2],h[r>>2],4<<h[s+8>>2])}function Us(r,s){return s=Ir(r,s),Ir(r,1)?0-s|0:s}function Pf(r){return r?(h[2865]=r,-1):0}function gd(r,s,a){r=r|0,s=s|0,a=a|0,dt[r|0](s,a)}function yd(r,s){return r=r|0,s=s|0,dt[r|0](s)|0}function am(r,s){return s=s|0,h[s+-4>>2]}function _p(r,s){return r?Be(r,s):0}function Zh(r,s,a){F[r|0]&32||Lr(s,a,r)}function lm(r){return r=r|0,r=Fn-r&-16,Fn=r,r|0}function um(r,s){return s=s|0,h[s+4>>2]}function Gc(r,s){return-16777216}function bc(r,s,a,y){return r=Vu(r,s,a,y),r}function yr(r,s,a,y){return r=Ls(r,s,a,y),r}function wc(r){r&&(Rr(h[r>>2]),h[r>>2]=0)}function cm(r,s){return s=s|0,h[s>>2]}function hm(r){return r=r|0,fh(h[r+60>>2])|0}function fm(r){return r=r|0,!h[r+20>>2]|0}function vp(r,s){return r=r|0,r|0}function bp(r,s){r=r|0,s=s|0,dt[r|0](s)}function dm(r){return r=r|0,gm(r|0)|0}function Mf(r){return r+-48>>>0<10}function y0(r){r&&(Wo(r),Rr(r))}function wp(r){r&&Qo(r,0,108)}function _d(r){r=r|0,h[r+4>>2]=0}function Kh(r){r&&Qo(r,0,84)}function Df(r){r&&Rr(r)}function xp(r,s){return Pn=r,s}function pm(){return 11460}function mm(r){r=r|0,Fn=r}function Of(){return Fn|0}function Ap(){}dt[1]=Hu,dt[2]=ju,dt[3]=sm,dt[4]=Da,dt[5]=qh,dt[6]=as,dt[7]=ph,dt[8]=ei,dt[9]=Au,dt[10]=z,dt[11]=Mn,dt[12]=Jl,dt[13]=Wu,dt[14]=Gu,dt[15]=ii,dt[16]=ku,dt[17]=Qn,dt[18]=ms,dt[19]=Uu,dt[20]=ul,dt[21]=Tn,dt[22]=ue,dt[23]=j,dt[24]=fs,dt[25]=ui,dt[26]=Qi,dt[27]=Ln,dt[28]=Kt,dt[29]=Af,dt[30]=Sf,dt[31]=gc,dt[32]=If,dt[33]=Kl,dt[34]=No,dt[35]=Pl,dt[36]=Zu,dt[37]=xf,dt[38]=p0,dt[39]=tu,dt[40]=Xh,dt[41]=Xu,dt[42]=Gh,dt[43]=ki,dt[44]=_n,dt[45]=gs,dt[46]=Cn,dt[47]=vh,dt[48]=f0,dt[49]=dd,dt[50]=pl,dt[51]=hc,dt[52]=Tt,dt[53]=I,dt[54]=jt,dt[55]=Mt,dt[56]=dl,dt[57]=Uh,dt[58]=cc,dt[59]=mh,dt[60]=se,dt[61]=Wt,dt[62]=li,dt[63]=_a,dt[64]=je,dt[65]=lc,dt[66]=Yi,dt[67]=hs,dt[68]=Ll,dt[69]=Fc,dt[70]=bu,dt[71]=hl,dt[72]=st,dt[73]=wu,dt[74]=Bs,dt[75]=Ke,dt[76]=An,dt[77]=Uc,dt[78]=$l,dt[79]=K,dt[80]=Ct,dt[81]=Gc,dt[82]=jn,dt[83]=gt,dt[84]=pe,dt[85]=dc,dt[86]=Iu,dt[87]=wh,dt[88]=d0,dt[89]=Yu,dt[90]=_h,dt[91]=am,dt[92]=um,dt[93]=cm,dt[94]=vp,dt[95]=a0,dt[96]=jo,dt[97]=jh,dt[98]=uc,dt[99]=Oi,dt[100]=rn,dt[101]=ci,dt[102]=Bi,dt[103]=_i,dt[104]=at,dt[105]=xr,dt[106]=So,dt[107]=jr,dt[108]=mo,dt[109]=Ps,dt[110]=bi,dt[111]=Oo,dt[112]=mc,dt[113]=pc,dt[114]=Vh,dt[115]=ml,dt[116]=vo,dt[117]=Xr,dt[118]=ba,dt[119]=Ya,dt[120]=_e,dt[121]=d,dt[122]=Fr,dt[123]=wr,dt[124]=eo,dt[125]=Xn,dt[126]=Gr,dt[127]=Go,dt[128]=zo,dt[129]=ys,dt[130]=gh,dt[131]=D,dt[132]=ss,dt[133]=la,dt[134]=X,dt[135]=ne,dt[136]=Ba,dt[137]=sa,dt[138]=Ra,dt[139]=Fa,dt[140]=zs,dt[141]=Ml,dt[142]=va,dt[143]=dh,dt[144]=Ns,dt[145]=Za,dt[146]=wa,dt[147]=ln,dt[148]=qt,dt[149]=Ja,dt[150]=Wi,dt[151]=bh,dt[152]=m0,dt[153]=fm,dt[154]=kf,dt[155]=kf,dt[156]=_d,dt[157]=hm,dt[158]=Zo,dt[159]=ao;function Sp(){return sn.byteLength/65536|0}function gm(r){r=r|0;var s=Sp()|0,a=s+r|0;if(s<a&&a<65536){var y=new ArrayBuffer(re(a,65536)),S=new ri.Int8Array(y);S.set(m),m=S,m=new ri.Int8Array(y),Ri=new ri.Int16Array(y),h=new ri.Int32Array(y),F=new ri.Uint8Array(y),dn=new ri.Uint16Array(y),Zn=new ri.Uint32Array(y),new ri.Float32Array(y),xo=new ri.Float64Array(y),sn=y,Sn.buffer=y}return s}return{__wasm_call_ctors:Ap,WebpToSDL:Bc,memset:Qo,memcpy:Wr,malloc:Wa,free:Rr,__errno_location:pm,stackSave:Of,stackRestore:mm,stackAlloc:lm,dynCall_vii:gd,dynCall_vi:bp,dynCall_ii:yd,dynCall_iii:Lf,dynCall_iiii:md,dynCall_iiiiiii:Eu,dynCall_viiii:mp,dynCall_viii:gp,dynCall_viiiiii:Ef,dynCall_viiiii:ru,dynCall_viiiiiiiii:Hc,dynCall_jiiii:Cf,dynCall_jiji:Cf,__growWasmMemory:dm}}for(var Bt=new Uint8Array(ot.buffer),yi=new Uint8Array(123),pi=25;pi>=0;--pi)yi[48+pi]=52+pi,yi[65+pi]=pi,yi[97+pi]=26+pi;yi[43]=62,yi[47]=63;function mi(ri,qi,sn){for(var Sn,dt,m=0,Ri=qi,h=sn.length,F=qi+(h*3>>2)-(sn[h-2]=="=")-(sn[h-1]=="=");m<h;m+=4)Sn=yi[sn.charCodeAt(m+1)],dt=yi[sn.charCodeAt(m+2)],ri[Ri++]=yi[sn.charCodeAt(m)]<<2|Sn>>4,Ri<F&&(ri[Ri++]=Sn<<4|dt>>2),Ri<F&&(ri[Ri++]=dt<<6|yi[sn.charCodeAt(m+3)])}return mi(Bt,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),mi(Bt,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),mi(Bt,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),mi(Bt,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),mi(Bt,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),mi(Bt,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),mi(Bt,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),mi(Bt,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),mi(Bt,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),mi(Bt,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),mi(Bt,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),mi(Bt,9803,"DA=="),mi(Bt,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),mi(Bt,9861,"Dg=="),mi(Bt,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),mi(Bt,9919,"EA=="),mi(Bt,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),mi(Bt,9986,"EgAAABISEgAAAAAAAAk="),mi(Bt,10035,"Cw=="),mi(Bt,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),mi(Bt,10093,"DA=="),mi(Bt,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),mi(Bt,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),mi(Bt,10428,"8Cw="),mi(Bt,10488,"BQ=="),mi(Bt,10500,"nQ=="),mi(Bt,10524,"ngAAAJ8AAAAQLQ=="),mi(Bt,10548,"Ag=="),mi(Bt,10563,"//////8="),Nt({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},De,ot.buffer)}(xs,W,J)},instantiate:function(U,$){return{then:function(ye){var De=new V.Module(U);ye({instance:new V.Instance(De)})}}},RuntimeError:Error};O=[],typeof V!="object"&&Xt("no native wasm support detected");var W,J=new V.Table({initial:160,maximum:160,element:"anyfunc"}),Q=!1;function Z(U,$){U||Xt("Assertion failed: "+$)}function ie(U){var $=i["_"+U];return Z($,"Cannot call unknown function "+U+", make sure it is exported"),$}function Se(U,$,ye,De,ot){var It={string:function(sn){var Sn=0;if(sn!=null&&sn!==0){var dt=(sn.length<<2)+1;Sn=du(dt),pt(sn,Sn,dt)}return Sn},array:function(sn){var Sn=du(sn.length);return Pt(sn,Sn),Sn}};function Nt(sn){return $==="string"?me(sn):$==="boolean"?Boolean(sn):sn}var Bt=ie(U),yi=[],pi=0;if(De)for(var mi=0;mi<De.length;mi++){var ri=It[ye[mi]];ri?(pi===0&&(pi=fu()),yi[mi]=ri(De[mi])):yi[mi]=De[mi]}var qi=Bt.apply(null,yi);return qi=Nt(qi),pi!==0&&Cl(pi),qi}function xe(U,$,ye,De){ye=ye||[];var ot=ye.every(function(Nt){return Nt==="number"}),It=$!=="string";return It&&ot&&!De?ie(U):function(){return Se(U,$,ye,arguments)}}var le=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ee(U,$,ye){for(var De=$+ye,ot=$;U[ot]&&!(ot>=De);)++ot;if(ot-$>16&&U.subarray&&le)return le.decode(U.subarray($,ot));for(var It="";$<ot;){var Nt=U[$++];if(!(Nt&128)){It+=String.fromCharCode(Nt);continue}var Bt=U[$++]&63;if((Nt&224)==192){It+=String.fromCharCode((Nt&31)<<6|Bt);continue}var yi=U[$++]&63;if((Nt&240)==224?Nt=(Nt&15)<<12|Bt<<6|yi:Nt=(Nt&7)<<18|Bt<<12|yi<<6|U[$++]&63,Nt<65536)It+=String.fromCharCode(Nt);else{var pi=Nt-65536;It+=String.fromCharCode(55296|pi>>10,56320|pi&1023)}}return It}function me(U,$){return U?Ee(ce,U,$):""}function Ae(U,$,ye,De){if(!(De>0))return 0;for(var ot=ye,It=ye+De-1,Nt=0;Nt<U.length;++Nt){var Bt=U.charCodeAt(Nt);if(Bt>=55296&&Bt<=57343){var yi=U.charCodeAt(++Nt);Bt=65536+((Bt&1023)<<10)|yi&1023}if(Bt<=127){if(ye>=It)break;$[ye++]=Bt}else if(Bt<=2047){if(ye+1>=It)break;$[ye++]=192|Bt>>6,$[ye++]=128|Bt&63}else if(Bt<=65535){if(ye+2>=It)break;$[ye++]=224|Bt>>12,$[ye++]=128|Bt>>6&63,$[ye++]=128|Bt&63}else{if(ye+3>=It)break;$[ye++]=240|Bt>>18,$[ye++]=128|Bt>>12&63,$[ye++]=128|Bt>>6&63,$[ye++]=128|Bt&63}}return $[ye]=0,ye-ot}function pt(U,$,ye){return Ae(U,ce,$,ye)}function rt(U){for(var $=0,ye=0;ye<U.length;++ye){var De=U.charCodeAt(ye);De>=55296&&De<=57343&&(De=65536+((De&1023)<<10)|U.charCodeAt(++ye)&1023),De<=127?++$:De<=2047?$+=2:De<=65535?$+=3:$+=4}return $}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Pt(U,$){Ue.set(U,$)}var We=65536;function be(U,$){return U%$>0&&(U+=$-U%$),U}var Le,Ue,ce,Ie,de,ge,Re;function Ze(U){Le=U,i.HEAP8=Ue=new Int8Array(U),i.HEAP16=Ie=new Int16Array(U),i.HEAP32=de=new Int32Array(U),i.HEAPU8=ce=new Uint8Array(U),i.HEAPU16=new Uint16Array(U),i.HEAPU32=ge=new Uint32Array(U),i.HEAPF32=Re=new Float32Array(U),i.HEAPF64=new Float64Array(U)}var ut=5255072,Xe=12032,$e=i.INITIAL_MEMORY||67108864;i.wasmMemory?W=i.wasmMemory:W=new V.Memory({initial:$e/We,maximum:2147483648/We}),W&&(Le=W.buffer),$e=Le.byteLength,Ze(Le),de[Xe>>2]=ut;function Dt(U){for(;U.length>0;){var $=U.shift();if(typeof $=="function"){$(i);continue}var ye=$.func;typeof ye=="number"?$.arg===void 0?i.dynCall_v(ye):i.dynCall_vi(ye,$.arg):ye($.arg===void 0?null:$.arg)}}var ni=[],mt=[],At=[],xt=[];function Qe(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Ei(i.preRun.shift());Dt(ni)}function Yt(){!i.noFSInit&&!He.init.initialized&&He.init(),Dt(mt)}function si(){He.ignorePermissions=!1,Dt(At)}function Zt(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Qt(i.postRun.shift());Dt(xt)}function Ei(U){ni.unshift(U)}function Qt(U){xt.unshift(U)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function($,ye){var De=$>>>16,ot=$&65535,It=ye>>>16,Nt=ye&65535;return ot*Nt+(De*Nt+ot*It<<16)|0}),!Math.fround){var Ot=new Float32Array(1);Math.fround=function(U){return Ot[0]=U,Ot[0]}}Math.clz32||(Math.clz32=function(U){var $=32,ye=U>>16;return ye&&($-=16,U=ye),ye=U>>8,ye&&($-=8,U=ye),ye=U>>4,ye&&($-=4,U=ye),ye=U>>2,ye&&($-=2,U=ye),ye=U>>1,ye?$-2:$-U}),Math.trunc||(Math.trunc=function(U){return U<0?Math.ceil(U):Math.floor(U)});var ai=Math.abs,Ji=Math.ceil,Ii=Math.floor,$t=Math.min,Me=0,ee=null;function ae(U){return U}function et(U){Me++,i.monitorRunDependencies&&i.monitorRunDependencies(Me)}function bt(U){if(Me--,i.monitorRunDependencies&&i.monitorRunDependencies(Me),Me==0&&ee){var $=ee;ee=null,$()}}i.preloadedImages={},i.preloadedAudios={};function Xt(U){i.onAbort&&i.onAbort(U),U+="",v(U),Q=!0,U="abort("+U+"). Build with -s ASSERTIONS=1 for more info.";var $=new V.RuntimeError(U);throw $}function fi(U,$){return String.prototype.startsWith?U.startsWith($):U.indexOf($)===0}var xn="data:application/octet-stream;base64,";function qn(U){return fi(U,xn)}var bn="webp.wasm";qn(bn)||(bn=p(bn));function Gi(){try{if(O)return new Uint8Array(O);var U=qs(bn);if(U)return U;if(!g)throw"both async and sync fetching of the wasm failed"}catch($){Xt($)}}function an(){return!O&&l&&typeof fetch=="function"?fetch(bn,{credentials:"same-origin"}).then(function(U){if(!U.ok)throw"failed to load wasm binary file at '"+bn+"'";return U.arrayBuffer()}).catch(function(){return Gi()}):e.resolve().then(Gi)}function Kn(){var U={env:xs,wasi_snapshot_preview1:xs};function $(Nt,Bt){var yi=Nt.exports;i.asm=yi,bt()}et();function ye(Nt){$(Nt.instance)}function De(Nt){return an().then(function(Bt){return V.instantiate(Bt,U)}).then(Nt,function(Bt){v("failed to asynchronously prepare wasm: "+Bt),Xt(Bt)})}function ot(){if(!O&&typeof V.instantiateStreaming=="function"&&!qn(bn)&&typeof fetch=="function")fetch(bn,{credentials:"same-origin"}).then(function(Nt){var Bt=V.instantiateStreaming(Nt,U);return Bt.then(ye,function(yi){return v("wasm streaming compile failed: "+yi),v("falling back to ArrayBuffer instantiation"),De(ye)})});else return De(ye)}if(i.instantiateWasm)try{var It=i.instantiateWasm(U,$);return It}catch(Nt){return v("Module.instantiateWasm callback failed with error: "+Nt),!1}return ot(),{}}var mr,yo;mt.push({func:function(){Pa()}});function ar(U){return U}function Hr(U){var $=/\b_Z[\w\d_]+/g;return U.replace($,function(ye){var De=ye;return ye===De?ye:De+" ["+ye+"]"})}function Yn(){var U=new Error;if(!U.stack){try{throw new Error}catch($){U=$}if(!U.stack)return"(no stack trace available)"}return U.stack.toString()}function Ur(){var U=Yn();return i.extraStackTrace&&(U+=`
`+i.extraStackTrace()),Hr(U)}function co(U){return de[kl()>>2]=U,U}var Jn={splitPath:function(U){var $=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return $.exec(U).slice(1)},normalizeArray:function(U,$){for(var ye=0,De=U.length-1;De>=0;De--){var ot=U[De];ot==="."?U.splice(De,1):ot===".."?(U.splice(De,1),ye++):ye&&(U.splice(De,1),ye--)}if($)for(;ye;ye--)U.unshift("..");return U},normalize:function(U){var $=U.charAt(0)==="/",ye=U.substr(-1)==="/";return U=Jn.normalizeArray(U.split("/").filter(function(De){return!!De}),!$).join("/"),!U&&!$&&(U="."),U&&ye&&(U+="/"),($?"/":"")+U},dirname:function(U){var $=Jn.splitPath(U),ye=$[0],De=$[1];return!ye&&!De?".":(De&&(De=De.substr(0,De.length-1)),ye+De)},basename:function(U){if(U==="/")return"/";U=Jn.normalize(U),U=U.replace(/\/$/,"");var $=U.lastIndexOf("/");return $===-1?U:U.substr($+1)},extname:function(U){return Jn.splitPath(U)[3]},join:function(){var U=Array.prototype.slice.call(arguments,0);return Jn.normalize(U.join("/"))},join2:function(U,$){return Jn.normalize(U+"/"+$)}},br={resolve:function(){for(var U="",$=!1,ye=arguments.length-1;ye>=-1&&!$;ye--){var De=ye>=0?arguments[ye]:He.cwd();if(typeof De!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!De)return"";U=De+"/"+U,$=De.charAt(0)==="/"}return U=Jn.normalizeArray(U.split("/").filter(function(ot){return!!ot}),!$).join("/"),($?"/":"")+U||"."},relative:function(U,$){U=br.resolve(U).substr(1),$=br.resolve($).substr(1);function ye(pi){for(var mi=0;mi<pi.length&&pi[mi]==="";mi++);for(var ri=pi.length-1;ri>=0&&pi[ri]==="";ri--);return mi>ri?[]:pi.slice(mi,ri-mi+1)}for(var De=ye(U.split("/")),ot=ye($.split("/")),It=Math.min(De.length,ot.length),Nt=It,Bt=0;Bt<It;Bt++)if(De[Bt]!==ot[Bt]){Nt=Bt;break}for(var yi=[],Bt=Nt;Bt<De.length;Bt++)yi.push("..");return yi=yi.concat(ot.slice(Nt)),yi.join("/")}},Eo={ttys:[],init:function(){},shutdown:function(){},register:function(U,$){Eo.ttys[U]={input:[],output:[],ops:$},He.registerDevice(U,Eo.stream_ops)},stream_ops:{open:function(U){var $=Eo.ttys[U.node.rdev];if(!$)throw new He.ErrnoError(43);U.tty=$,U.seekable=!1},close:function(U){U.tty.ops.flush(U.tty)},flush:function(U){U.tty.ops.flush(U.tty)},read:function(U,$,ye,De,ot){if(!U.tty||!U.tty.ops.get_char)throw new He.ErrnoError(60);for(var It=0,Nt=0;Nt<De;Nt++){var Bt;try{Bt=U.tty.ops.get_char(U.tty)}catch{throw new He.ErrnoError(29)}if(Bt===void 0&&It===0)throw new He.ErrnoError(6);if(Bt==null)break;It++,$[ye+Nt]=Bt}return It&&(U.node.timestamp=Date.now()),It},write:function(U,$,ye,De,ot){if(!U.tty||!U.tty.ops.put_char)throw new He.ErrnoError(60);try{for(var It=0;It<De;It++)U.tty.ops.put_char(U.tty,$[ye+It])}catch{throw new He.ErrnoError(29)}return De&&(U.node.timestamp=Date.now()),It}},default_tty_ops:{get_char:function(U){if(!U.input.length){var $=null;if(typeof window<"u"&&typeof window.prompt=="function"?($=window.prompt("Input: "),$!==null&&($+=`
`)):typeof readline=="function"&&($=readline(),$!==null&&($+=`
`)),!$)return null;U.input=Ko($,!0)}return U.input.shift()},put_char:function(U,$){$===null||$===10?(_(Ee(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(_(Ee(U.output,0)),U.output=[])}},default_tty1_ops:{put_char:function(U,$){$===null||$===10?(v(Ee(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(v(Ee(U.output,0)),U.output=[])}}},un={ops_table:null,mount:function(U){return un.createNode(null,"/",16895,0)},createNode:function(U,$,ye,De){if(He.isBlkdev(ye)||He.isFIFO(ye))throw new He.ErrnoError(63);un.ops_table||(un.ops_table={dir:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr,lookup:un.node_ops.lookup,mknod:un.node_ops.mknod,rename:un.node_ops.rename,unlink:un.node_ops.unlink,rmdir:un.node_ops.rmdir,readdir:un.node_ops.readdir,symlink:un.node_ops.symlink},stream:{llseek:un.stream_ops.llseek}},file:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr},stream:{llseek:un.stream_ops.llseek,read:un.stream_ops.read,write:un.stream_ops.write,allocate:un.stream_ops.allocate,mmap:un.stream_ops.mmap,msync:un.stream_ops.msync}},link:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr,readlink:un.node_ops.readlink},stream:{}},chrdev:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr},stream:He.chrdev_stream_ops}});var ot=He.createNode(U,$,ye,De);return He.isDir(ot.mode)?(ot.node_ops=un.ops_table.dir.node,ot.stream_ops=un.ops_table.dir.stream,ot.contents={}):He.isFile(ot.mode)?(ot.node_ops=un.ops_table.file.node,ot.stream_ops=un.ops_table.file.stream,ot.usedBytes=0,ot.contents=null):He.isLink(ot.mode)?(ot.node_ops=un.ops_table.link.node,ot.stream_ops=un.ops_table.link.stream):He.isChrdev(ot.mode)&&(ot.node_ops=un.ops_table.chrdev.node,ot.stream_ops=un.ops_table.chrdev.stream),ot.timestamp=Date.now(),U&&(U.contents[$]=ot),ot},getFileDataAsRegularArray:function(U){if(U.contents&&U.contents.subarray){for(var $=[],ye=0;ye<U.usedBytes;++ye)$.push(U.contents[ye]);return $}return U.contents},getFileDataAsTypedArray:function(U){return U.contents?U.contents.subarray?U.contents.subarray(0,U.usedBytes):new Uint8Array(U.contents):new Uint8Array(0)},expandFileStorage:function(U,$){var ye=U.contents?U.contents.length:0;if(!(ye>=$)){var De=1024*1024;$=Math.max($,ye*(ye<De?2:1.125)>>>0),ye!=0&&($=Math.max($,256));var ot=U.contents;U.contents=new Uint8Array($),U.usedBytes>0&&U.contents.set(ot.subarray(0,U.usedBytes),0)}},resizeFileStorage:function(U,$){if(U.usedBytes!=$){if($==0){U.contents=null,U.usedBytes=0;return}if(!U.contents||U.contents.subarray){var ye=U.contents;U.contents=new Uint8Array($),ye&&U.contents.set(ye.subarray(0,Math.min($,U.usedBytes))),U.usedBytes=$;return}if(U.contents||(U.contents=[]),U.contents.length>$)U.contents.length=$;else for(;U.contents.length<$;)U.contents.push(0);U.usedBytes=$}},node_ops:{getattr:function(U){var $={};return $.dev=He.isChrdev(U.mode)?U.id:1,$.ino=U.id,$.mode=U.mode,$.nlink=1,$.uid=0,$.gid=0,$.rdev=U.rdev,He.isDir(U.mode)?$.size=4096:He.isFile(U.mode)?$.size=U.usedBytes:He.isLink(U.mode)?$.size=U.link.length:$.size=0,$.atime=new Date(U.timestamp),$.mtime=new Date(U.timestamp),$.ctime=new Date(U.timestamp),$.blksize=4096,$.blocks=Math.ceil($.size/$.blksize),$},setattr:function(U,$){$.mode!==void 0&&(U.mode=$.mode),$.timestamp!==void 0&&(U.timestamp=$.timestamp),$.size!==void 0&&un.resizeFileStorage(U,$.size)},lookup:function(U,$){throw He.genericErrors[44]},mknod:function(U,$,ye,De){return un.createNode(U,$,ye,De)},rename:function(U,$,ye){if(He.isDir(U.mode)){var De;try{De=He.lookupNode($,ye)}catch{}if(De)for(var ot in De.contents)throw new He.ErrnoError(55)}delete U.parent.contents[U.name],U.name=ye,$.contents[ye]=U,U.parent=$},unlink:function(U,$){delete U.contents[$]},rmdir:function(U,$){var ye=He.lookupNode(U,$);for(var De in ye.contents)throw new He.ErrnoError(55);delete U.contents[$]},readdir:function(U){var $=[".",".."];for(var ye in U.contents)!U.contents.hasOwnProperty(ye)||$.push(ye);return $},symlink:function(U,$,ye){var De=un.createNode(U,$,41471,0);return De.link=ye,De},readlink:function(U){if(!He.isLink(U.mode))throw new He.ErrnoError(28);return U.link}},stream_ops:{read:function(U,$,ye,De,ot){var It=U.node.contents;if(ot>=U.node.usedBytes)return 0;var Nt=Math.min(U.node.usedBytes-ot,De);if(Nt>8&&It.subarray)$.set(It.subarray(ot,ot+Nt),ye);else for(var Bt=0;Bt<Nt;Bt++)$[ye+Bt]=It[ot+Bt];return Nt},write:function(U,$,ye,De,ot,It){if($.buffer===Ue.buffer&&(It=!1),!De)return 0;var Nt=U.node;if(Nt.timestamp=Date.now(),$.subarray&&(!Nt.contents||Nt.contents.subarray)){if(It)return Nt.contents=$.subarray(ye,ye+De),Nt.usedBytes=De,De;if(Nt.usedBytes===0&&ot===0)return Nt.contents=$.slice(ye,ye+De),Nt.usedBytes=De,De;if(ot+De<=Nt.usedBytes)return Nt.contents.set($.subarray(ye,ye+De),ot),De}if(un.expandFileStorage(Nt,ot+De),Nt.contents.subarray&&$.subarray)Nt.contents.set($.subarray(ye,ye+De),ot);else for(var Bt=0;Bt<De;Bt++)Nt.contents[ot+Bt]=$[ye+Bt];return Nt.usedBytes=Math.max(Nt.usedBytes,ot+De),De},llseek:function(U,$,ye){var De=$;if(ye===1?De+=U.position:ye===2&&He.isFile(U.node.mode)&&(De+=U.node.usedBytes),De<0)throw new He.ErrnoError(28);return De},allocate:function(U,$,ye){un.expandFileStorage(U.node,$+ye),U.node.usedBytes=Math.max(U.node.usedBytes,$+ye)},mmap:function(U,$,ye,De,ot,It){if(Z($===0),!He.isFile(U.node.mode))throw new He.ErrnoError(43);var Nt,Bt,yi=U.node.contents;if(!(It&2)&&yi.buffer===Le)Bt=!1,Nt=yi.byteOffset;else{if((De>0||De+ye<yi.length)&&(yi.subarray?yi=yi.subarray(De,De+ye):yi=Array.prototype.slice.call(yi,De,De+ye)),Bt=!0,Nt=He.mmapAlloc(ye),!Nt)throw new He.ErrnoError(48);Ue.set(yi,Nt)}return{ptr:Nt,allocated:Bt}},msync:function(U,$,ye,De,ot){if(!He.isFile(U.node.mode))throw new He.ErrnoError(43);return ot&2||un.stream_ops.write(U,$,0,De,ye,!1),0}}},He={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(U){if(!(U instanceof He.ErrnoError))throw U+" : "+Ur();return co(U.errno)},lookupPath:function(U,$){if(U=br.resolve(He.cwd(),U),$=$||{},!U)return{path:"",node:null};var ye={follow_mount:!0,recurse_count:0};for(var De in ye)$[De]===void 0&&($[De]=ye[De]);if($.recurse_count>8)throw new He.ErrnoError(32);for(var ot=Jn.normalizeArray(U.split("/").filter(function(qi){return!!qi}),!1),It=He.root,Nt="/",Bt=0;Bt<ot.length;Bt++){var yi=Bt===ot.length-1;if(yi&&$.parent)break;if(It=He.lookupNode(It,ot[Bt]),Nt=Jn.join2(Nt,ot[Bt]),He.isMountpoint(It)&&(!yi||yi&&$.follow_mount)&&(It=It.mounted.root),!yi||$.follow)for(var pi=0;He.isLink(It.mode);){var mi=He.readlink(Nt);Nt=br.resolve(Jn.dirname(Nt),mi);var ri=He.lookupPath(Nt,{recurse_count:$.recurse_count});if(It=ri.node,pi++>40)throw new He.ErrnoError(32)}}return{path:Nt,node:It}},getPath:function(U){for(var $;;){if(He.isRoot(U)){var ye=U.mount.mountpoint;return $?ye[ye.length-1]!=="/"?ye+"/"+$:ye+$:ye}$=$?U.name+"/"+$:U.name,U=U.parent}},hashName:function(U,$){for(var ye=0,De=0;De<$.length;De++)ye=(ye<<5)-ye+$.charCodeAt(De)|0;return(U+ye>>>0)%He.nameTable.length},hashAddNode:function(U){var $=He.hashName(U.parent.id,U.name);U.name_next=He.nameTable[$],He.nameTable[$]=U},hashRemoveNode:function(U){var $=He.hashName(U.parent.id,U.name);if(He.nameTable[$]===U)He.nameTable[$]=U.name_next;else for(var ye=He.nameTable[$];ye;){if(ye.name_next===U){ye.name_next=U.name_next;break}ye=ye.name_next}},lookupNode:function(U,$){var ye=He.mayLookup(U);if(ye)throw new He.ErrnoError(ye,U);for(var De=He.hashName(U.id,$),ot=He.nameTable[De];ot;ot=ot.name_next){var It=ot.name;if(ot.parent.id===U.id&&It===$)return ot}return He.lookup(U,$)},createNode:function(U,$,ye,De){var ot=new He.FSNode(U,$,ye,De);return He.hashAddNode(ot),ot},destroyNode:function(U){He.hashRemoveNode(U)},isRoot:function(U){return U===U.parent},isMountpoint:function(U){return!!U.mounted},isFile:function(U){return(U&61440)===32768},isDir:function(U){return(U&61440)===16384},isLink:function(U){return(U&61440)===40960},isChrdev:function(U){return(U&61440)===8192},isBlkdev:function(U){return(U&61440)===24576},isFIFO:function(U){return(U&61440)===4096},isSocket:function(U){return(U&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(U){var $=He.flagModes[U];if(typeof $>"u")throw new Error("Unknown file open mode: "+U);return $},flagsToPermissionString:function(U){var $=["r","w","rw"][U&3];return U&512&&($+="w"),$},nodePermissions:function(U,$){return He.ignorePermissions?0:$.indexOf("r")!==-1&&!(U.mode&292)||$.indexOf("w")!==-1&&!(U.mode&146)||$.indexOf("x")!==-1&&!(U.mode&73)?2:0},mayLookup:function(U){var $=He.nodePermissions(U,"x");return $||(U.node_ops.lookup?0:2)},mayCreate:function(U,$){try{var ye=He.lookupNode(U,$);return 20}catch{}return He.nodePermissions(U,"wx")},mayDelete:function(U,$,ye){var De;try{De=He.lookupNode(U,$)}catch(It){return It.errno}var ot=He.nodePermissions(U,"wx");if(ot)return ot;if(ye){if(!He.isDir(De.mode))return 54;if(He.isRoot(De)||He.getPath(De)===He.cwd())return 10}else if(He.isDir(De.mode))return 31;return 0},mayOpen:function(U,$){return U?He.isLink(U.mode)?32:He.isDir(U.mode)&&(He.flagsToPermissionString($)!=="r"||$&512)?31:He.nodePermissions(U,He.flagsToPermissionString($)):44},MAX_OPEN_FDS:4096,nextfd:function(U,$){U=U||0,$=$||He.MAX_OPEN_FDS;for(var ye=U;ye<=$;ye++)if(!He.streams[ye])return ye;throw new He.ErrnoError(33)},getStream:function(U){return He.streams[U]},createStream:function(U,$,ye){He.FSStream||(He.FSStream=function(){},He.FSStream.prototype={object:{get:function(){return this.node},set:function(Nt){this.node=Nt}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var De=new He.FSStream;for(var ot in U)De[ot]=U[ot];U=De;var It=He.nextfd($,ye);return U.fd=It,He.streams[It]=U,U},closeStream:function(U){He.streams[U]=null},chrdev_stream_ops:{open:function(U){var $=He.getDevice(U.node.rdev);U.stream_ops=$.stream_ops,U.stream_ops.open&&U.stream_ops.open(U)},llseek:function(){throw new He.ErrnoError(70)}},major:function(U){return U>>8},minor:function(U){return U&255},makedev:function(U,$){return U<<8|$},registerDevice:function(U,$){He.devices[U]={stream_ops:$}},getDevice:function(U){return He.devices[U]},getMounts:function(U){for(var $=[],ye=[U];ye.length;){var De=ye.pop();$.push(De),ye.push.apply(ye,De.mounts)}return $},syncfs:function(U,$){typeof U=="function"&&($=U,U=!1),He.syncFSRequests++,He.syncFSRequests>1&&v("warning: "+He.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ye=He.getMounts(He.root.mount),De=0;function ot(Nt){return He.syncFSRequests--,$(Nt)}function It(Nt){if(Nt)return It.errored?void 0:(It.errored=!0,ot(Nt));++De>=ye.length&&ot(null)}ye.forEach(function(Nt){if(!Nt.type.syncfs)return It(null);Nt.type.syncfs(Nt,U,It)})},mount:function(U,$,ye){var De=ye==="/",ot=!ye,It;if(De&&He.root)throw new He.ErrnoError(10);if(!De&&!ot){var Nt=He.lookupPath(ye,{follow_mount:!1});if(ye=Nt.path,It=Nt.node,He.isMountpoint(It))throw new He.ErrnoError(10);if(!He.isDir(It.mode))throw new He.ErrnoError(54)}var Bt={type:U,opts:$,mountpoint:ye,mounts:[]},yi=U.mount(Bt);return yi.mount=Bt,Bt.root=yi,De?He.root=yi:It&&(It.mounted=Bt,It.mount&&It.mount.mounts.push(Bt)),yi},unmount:function(U){var $=He.lookupPath(U,{follow_mount:!1});if(!He.isMountpoint($.node))throw new He.ErrnoError(28);var ye=$.node,De=ye.mounted,ot=He.getMounts(De);Object.keys(He.nameTable).forEach(function(Nt){for(var Bt=He.nameTable[Nt];Bt;){var yi=Bt.name_next;ot.indexOf(Bt.mount)!==-1&&He.destroyNode(Bt),Bt=yi}}),ye.mounted=null;var It=ye.mount.mounts.indexOf(De);ye.mount.mounts.splice(It,1)},lookup:function(U,$){return U.node_ops.lookup(U,$)},mknod:function(U,$,ye){var De=He.lookupPath(U,{parent:!0}),ot=De.node,It=Jn.basename(U);if(!It||It==="."||It==="..")throw new He.ErrnoError(28);var Nt=He.mayCreate(ot,It);if(Nt)throw new He.ErrnoError(Nt);if(!ot.node_ops.mknod)throw new He.ErrnoError(63);return ot.node_ops.mknod(ot,It,$,ye)},create:function(U,$){return $=$!==void 0?$:438,$&=4095,$|=32768,He.mknod(U,$,0)},mkdir:function(U,$){return $=$!==void 0?$:511,$&=1023,$|=16384,He.mknod(U,$,0)},mkdirTree:function(U,$){for(var ye=U.split("/"),De="",ot=0;ot<ye.length;++ot)if(!!ye[ot]){De+="/"+ye[ot];try{He.mkdir(De,$)}catch(It){if(It.errno!=20)throw It}}},mkdev:function(U,$,ye){return typeof ye>"u"&&(ye=$,$=438),$|=8192,He.mknod(U,$,ye)},symlink:function(U,$){if(!br.resolve(U))throw new He.ErrnoError(44);var ye=He.lookupPath($,{parent:!0}),De=ye.node;if(!De)throw new He.ErrnoError(44);var ot=Jn.basename($),It=He.mayCreate(De,ot);if(It)throw new He.ErrnoError(It);if(!De.node_ops.symlink)throw new He.ErrnoError(63);return De.node_ops.symlink(De,ot,U)},rename:function(U,$){var ye=Jn.dirname(U),De=Jn.dirname($),ot=Jn.basename(U),It=Jn.basename($),Nt,Bt,yi;if(Nt=He.lookupPath(U,{parent:!0}),Bt=Nt.node,Nt=He.lookupPath($,{parent:!0}),yi=Nt.node,!Bt||!yi)throw new He.ErrnoError(44);if(Bt.mount!==yi.mount)throw new He.ErrnoError(75);var pi=He.lookupNode(Bt,ot),mi=br.relative(U,De);if(mi.charAt(0)!==".")throw new He.ErrnoError(28);if(mi=br.relative($,ye),mi.charAt(0)!==".")throw new He.ErrnoError(55);var ri;try{ri=He.lookupNode(yi,It)}catch{}if(pi!==ri){var qi=He.isDir(pi.mode),sn=He.mayDelete(Bt,ot,qi);if(sn)throw new He.ErrnoError(sn);if(sn=ri?He.mayDelete(yi,It,qi):He.mayCreate(yi,It),sn)throw new He.ErrnoError(sn);if(!Bt.node_ops.rename)throw new He.ErrnoError(63);if(He.isMountpoint(pi)||ri&&He.isMountpoint(ri))throw new He.ErrnoError(10);if(yi!==Bt&&(sn=He.nodePermissions(Bt,"w"),sn))throw new He.ErrnoError(sn);try{He.trackingDelegate.willMovePath&&He.trackingDelegate.willMovePath(U,$)}catch(Sn){v("FS.trackingDelegate['willMovePath']('"+U+"', '"+$+"') threw an exception: "+Sn.message)}He.hashRemoveNode(pi);try{Bt.node_ops.rename(pi,yi,It)}catch(Sn){throw Sn}finally{He.hashAddNode(pi)}try{He.trackingDelegate.onMovePath&&He.trackingDelegate.onMovePath(U,$)}catch(Sn){v("FS.trackingDelegate['onMovePath']('"+U+"', '"+$+"') threw an exception: "+Sn.message)}}},rmdir:function(U){var $=He.lookupPath(U,{parent:!0}),ye=$.node,De=Jn.basename(U),ot=He.lookupNode(ye,De),It=He.mayDelete(ye,De,!0);if(It)throw new He.ErrnoError(It);if(!ye.node_ops.rmdir)throw new He.ErrnoError(63);if(He.isMountpoint(ot))throw new He.ErrnoError(10);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(U)}catch(Nt){v("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+Nt.message)}ye.node_ops.rmdir(ye,De),He.destroyNode(ot);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(U)}catch(Nt){v("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+Nt.message)}},readdir:function(U){var $=He.lookupPath(U,{follow:!0}),ye=$.node;if(!ye.node_ops.readdir)throw new He.ErrnoError(54);return ye.node_ops.readdir(ye)},unlink:function(U){var $=He.lookupPath(U,{parent:!0}),ye=$.node,De=Jn.basename(U),ot=He.lookupNode(ye,De),It=He.mayDelete(ye,De,!1);if(It)throw new He.ErrnoError(It);if(!ye.node_ops.unlink)throw new He.ErrnoError(63);if(He.isMountpoint(ot))throw new He.ErrnoError(10);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(U)}catch(Nt){v("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+Nt.message)}ye.node_ops.unlink(ye,De),He.destroyNode(ot);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(U)}catch(Nt){v("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+Nt.message)}},readlink:function(U){var $=He.lookupPath(U),ye=$.node;if(!ye)throw new He.ErrnoError(44);if(!ye.node_ops.readlink)throw new He.ErrnoError(28);return br.resolve(He.getPath(ye.parent),ye.node_ops.readlink(ye))},stat:function(U,$){var ye=He.lookupPath(U,{follow:!$}),De=ye.node;if(!De)throw new He.ErrnoError(44);if(!De.node_ops.getattr)throw new He.ErrnoError(63);return De.node_ops.getattr(De)},lstat:function(U){return He.stat(U,!0)},chmod:function(U,$,ye){var De;if(typeof U=="string"){var ot=He.lookupPath(U,{follow:!ye});De=ot.node}else De=U;if(!De.node_ops.setattr)throw new He.ErrnoError(63);De.node_ops.setattr(De,{mode:$&4095|De.mode&-4096,timestamp:Date.now()})},lchmod:function(U,$){He.chmod(U,$,!0)},fchmod:function(U,$){var ye=He.getStream(U);if(!ye)throw new He.ErrnoError(8);He.chmod(ye.node,$)},chown:function(U,$,ye,De){var ot;if(typeof U=="string"){var It=He.lookupPath(U,{follow:!De});ot=It.node}else ot=U;if(!ot.node_ops.setattr)throw new He.ErrnoError(63);ot.node_ops.setattr(ot,{timestamp:Date.now()})},lchown:function(U,$,ye){He.chown(U,$,ye,!0)},fchown:function(U,$,ye){var De=He.getStream(U);if(!De)throw new He.ErrnoError(8);He.chown(De.node,$,ye)},truncate:function(U,$){if($<0)throw new He.ErrnoError(28);var ye;if(typeof U=="string"){var De=He.lookupPath(U,{follow:!0});ye=De.node}else ye=U;if(!ye.node_ops.setattr)throw new He.ErrnoError(63);if(He.isDir(ye.mode))throw new He.ErrnoError(31);if(!He.isFile(ye.mode))throw new He.ErrnoError(28);var ot=He.nodePermissions(ye,"w");if(ot)throw new He.ErrnoError(ot);ye.node_ops.setattr(ye,{size:$,timestamp:Date.now()})},ftruncate:function(U,$){var ye=He.getStream(U);if(!ye)throw new He.ErrnoError(8);if((ye.flags&2097155)===0)throw new He.ErrnoError(28);He.truncate(ye.node,$)},utime:function(U,$,ye){var De=He.lookupPath(U,{follow:!0}),ot=De.node;ot.node_ops.setattr(ot,{timestamp:Math.max($,ye)})},open:function(U,$,ye,De,ot){if(U==="")throw new He.ErrnoError(44);$=typeof $=="string"?He.modeStringToFlags($):$,ye=typeof ye>"u"?438:ye,$&64?ye=ye&4095|32768:ye=0;var It;if(typeof U=="object")It=U;else{U=Jn.normalize(U);try{var Nt=He.lookupPath(U,{follow:!($&131072)});It=Nt.node}catch{}}var Bt=!1;if($&64)if(It){if($&128)throw new He.ErrnoError(20)}else It=He.mknod(U,ye,0),Bt=!0;if(!It)throw new He.ErrnoError(44);if(He.isChrdev(It.mode)&&($&=-513),$&65536&&!He.isDir(It.mode))throw new He.ErrnoError(54);if(!Bt){var yi=He.mayOpen(It,$);if(yi)throw new He.ErrnoError(yi)}$&512&&He.truncate(It,0),$&=-131713;var pi=He.createStream({node:It,path:He.getPath(It),flags:$,seekable:!0,position:0,stream_ops:It.stream_ops,ungotten:[],error:!1},De,ot);pi.stream_ops.open&&pi.stream_ops.open(pi),i.logReadFiles&&!($&1)&&(He.readFiles||(He.readFiles={}),U in He.readFiles||(He.readFiles[U]=1,v("FS.trackingDelegate error on read file: "+U)));try{if(He.trackingDelegate.onOpenFile){var mi=0;($&2097155)!==1&&(mi|=He.tracking.openFlags.READ),($&2097155)!==0&&(mi|=He.tracking.openFlags.WRITE),He.trackingDelegate.onOpenFile(U,mi)}}catch(ri){v("FS.trackingDelegate['onOpenFile']('"+U+"', flags) threw an exception: "+ri.message)}return pi},close:function(U){if(He.isClosed(U))throw new He.ErrnoError(8);U.getdents&&(U.getdents=null);try{U.stream_ops.close&&U.stream_ops.close(U)}catch($){throw $}finally{He.closeStream(U.fd)}U.fd=null},isClosed:function(U){return U.fd===null},llseek:function(U,$,ye){if(He.isClosed(U))throw new He.ErrnoError(8);if(!U.seekable||!U.stream_ops.llseek)throw new He.ErrnoError(70);if(ye!=0&&ye!=1&&ye!=2)throw new He.ErrnoError(28);return U.position=U.stream_ops.llseek(U,$,ye),U.ungotten=[],U.position},read:function(U,$,ye,De,ot){if(De<0||ot<0)throw new He.ErrnoError(28);if(He.isClosed(U))throw new He.ErrnoError(8);if((U.flags&2097155)===1)throw new He.ErrnoError(8);if(He.isDir(U.node.mode))throw new He.ErrnoError(31);if(!U.stream_ops.read)throw new He.ErrnoError(28);var It=typeof ot<"u";if(!It)ot=U.position;else if(!U.seekable)throw new He.ErrnoError(70);var Nt=U.stream_ops.read(U,$,ye,De,ot);return It||(U.position+=Nt),Nt},write:function(U,$,ye,De,ot,It){if(De<0||ot<0)throw new He.ErrnoError(28);if(He.isClosed(U))throw new He.ErrnoError(8);if((U.flags&2097155)===0)throw new He.ErrnoError(8);if(He.isDir(U.node.mode))throw new He.ErrnoError(31);if(!U.stream_ops.write)throw new He.ErrnoError(28);U.seekable&&U.flags&1024&&He.llseek(U,0,2);var Nt=typeof ot<"u";if(!Nt)ot=U.position;else if(!U.seekable)throw new He.ErrnoError(70);var Bt=U.stream_ops.write(U,$,ye,De,ot,It);Nt||(U.position+=Bt);try{U.path&&He.trackingDelegate.onWriteToFile&&He.trackingDelegate.onWriteToFile(U.path)}catch(yi){v("FS.trackingDelegate['onWriteToFile']('"+U.path+"') threw an exception: "+yi.message)}return Bt},allocate:function(U,$,ye){if(He.isClosed(U))throw new He.ErrnoError(8);if($<0||ye<=0)throw new He.ErrnoError(28);if((U.flags&2097155)===0)throw new He.ErrnoError(8);if(!He.isFile(U.node.mode)&&!He.isDir(U.node.mode))throw new He.ErrnoError(43);if(!U.stream_ops.allocate)throw new He.ErrnoError(138);U.stream_ops.allocate(U,$,ye)},mmap:function(U,$,ye,De,ot,It){if((ot&2)!==0&&(It&2)===0&&(U.flags&2097155)!==2)throw new He.ErrnoError(2);if((U.flags&2097155)===1)throw new He.ErrnoError(2);if(!U.stream_ops.mmap)throw new He.ErrnoError(43);return U.stream_ops.mmap(U,$,ye,De,ot,It)},msync:function(U,$,ye,De,ot){return!U||!U.stream_ops.msync?0:U.stream_ops.msync(U,$,ye,De,ot)},munmap:function(U){return 0},ioctl:function(U,$,ye){if(!U.stream_ops.ioctl)throw new He.ErrnoError(59);return U.stream_ops.ioctl(U,$,ye)},readFile:function(U,$){if($=$||{},$.flags=$.flags||"r",$.encoding=$.encoding||"binary",$.encoding!=="utf8"&&$.encoding!=="binary")throw new Error('Invalid encoding type "'+$.encoding+'"');var ye,De=He.open(U,$.flags),ot=He.stat(U),It=ot.size,Nt=new Uint8Array(It);return He.read(De,Nt,0,It,0),$.encoding==="utf8"?ye=Ee(Nt,0):$.encoding==="binary"&&(ye=Nt),He.close(De),ye},writeFile:function(U,$,ye){ye=ye||{},ye.flags=ye.flags||"w";var De=He.open(U,ye.flags,ye.mode);if(typeof $=="string"){var ot=new Uint8Array(rt($)+1),It=Ae($,ot,0,ot.length);He.write(De,ot,0,It,void 0,ye.canOwn)}else if(ArrayBuffer.isView($))He.write(De,$,0,$.byteLength,void 0,ye.canOwn);else throw new Error("Unsupported data type");He.close(De)},cwd:function(){return He.currentPath},chdir:function(U){var $=He.lookupPath(U,{follow:!0});if($.node===null)throw new He.ErrnoError(44);if(!He.isDir($.node.mode))throw new He.ErrnoError(54);var ye=He.nodePermissions($.node,"x");if(ye)throw new He.ErrnoError(ye);He.currentPath=$.path},createDefaultDirectories:function(){He.mkdir("/tmp"),He.mkdir("/home"),He.mkdir("/home/web_user")},createDefaultDevices:function(){He.mkdir("/dev"),He.registerDevice(He.makedev(1,3),{read:function(){return 0},write:function(ye,De,ot,It,Nt){return It}}),He.mkdev("/dev/null",He.makedev(1,3)),Eo.register(He.makedev(5,0),Eo.default_tty_ops),Eo.register(He.makedev(6,0),Eo.default_tty1_ops),He.mkdev("/dev/tty",He.makedev(5,0)),He.mkdev("/dev/tty1",He.makedev(6,0));var U;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var $=new Uint8Array(1);U=function(){return crypto.getRandomValues($),$[0]}}U||(U=function(){Xt("random_device")}),He.createDevice("/dev","random",U),He.createDevice("/dev","urandom",U),He.mkdir("/dev/shm"),He.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){He.mkdir("/proc"),He.mkdir("/proc/self"),He.mkdir("/proc/self/fd"),He.mount({mount:function(){var U=He.createNode("/proc/self","fd",16895,73);return U.node_ops={lookup:function($,ye){var De=+ye,ot=He.getStream(De);if(!ot)throw new He.ErrnoError(8);var It={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return ot.path}}};return It.parent=It,It}},U}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?He.createDevice("/dev","stdin",i.stdin):He.symlink("/dev/tty","/dev/stdin"),i.stdout?He.createDevice("/dev","stdout",null,i.stdout):He.symlink("/dev/tty","/dev/stdout"),i.stderr?He.createDevice("/dev","stderr",null,i.stderr):He.symlink("/dev/tty1","/dev/stderr"),He.open("/dev/stdin","r"),He.open("/dev/stdout","w"),He.open("/dev/stderr","w")},ensureErrnoError:function(){He.ErrnoError||(He.ErrnoError=function($,ye){this.node=ye,this.setErrno=function(De){this.errno=De},this.setErrno($),this.message="FS error"},He.ErrnoError.prototype=new Error,He.ErrnoError.prototype.constructor=He.ErrnoError,[44].forEach(function(U){He.genericErrors[U]=new He.ErrnoError(U),He.genericErrors[U].stack="<generic error, no stack>"}))},staticInit:function(){He.ensureErrnoError(),He.nameTable=new Array(4096),He.mount(un,{},"/"),He.createDefaultDirectories(),He.createDefaultDevices(),He.createSpecialDirectories(),He.filesystems={MEMFS:un}},init:function(U,$,ye){He.init.initialized=!0,He.ensureErrnoError(),i.stdin=U||i.stdin,i.stdout=$||i.stdout,i.stderr=ye||i.stderr,He.createStandardStreams()},quit:function(){He.init.initialized=!1;var U=i._fflush;U&&U(0);for(var $=0;$<He.streams.length;$++){var ye=He.streams[$];!ye||He.close(ye)}},getMode:function(U,$){var ye=0;return U&&(ye|=365),$&&(ye|=146),ye},joinPath:function(U,$){var ye=Jn.join.apply(null,U);return $&&ye[0]=="/"&&(ye=ye.substr(1)),ye},absolutePath:function(U,$){return br.resolve($,U)},standardizePath:function(U){return Jn.normalize(U)},findObject:function(U,$){var ye=He.analyzePath(U,$);return ye.exists?ye.object:(co(ye.error),null)},analyzePath:function(U,$){try{var ye=He.lookupPath(U,{follow:!$});U=ye.path}catch{}var De={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ye=He.lookupPath(U,{parent:!0});De.parentExists=!0,De.parentPath=ye.path,De.parentObject=ye.node,De.name=Jn.basename(U),ye=He.lookupPath(U,{follow:!$}),De.exists=!0,De.path=ye.path,De.object=ye.node,De.name=ye.node.name,De.isRoot=ye.path==="/"}catch(ot){De.error=ot.errno}return De},createFolder:function(U,$,ye,De){var ot=Jn.join2(typeof U=="string"?U:He.getPath(U),$),It=He.getMode(ye,De);return He.mkdir(ot,It)},createPath:function(U,$,ye,De){U=typeof U=="string"?U:He.getPath(U);for(var ot=$.split("/").reverse();ot.length;){var It=ot.pop();if(!!It){var Nt=Jn.join2(U,It);try{He.mkdir(Nt)}catch{}U=Nt}}return Nt},createFile:function(U,$,ye,De,ot){var It=Jn.join2(typeof U=="string"?U:He.getPath(U),$),Nt=He.getMode(De,ot);return He.create(It,Nt)},createDataFile:function(U,$,ye,De,ot,It){var Nt=$?Jn.join2(typeof U=="string"?U:He.getPath(U),$):U,Bt=He.getMode(De,ot),yi=He.create(Nt,Bt);if(ye){if(typeof ye=="string"){for(var pi=new Array(ye.length),mi=0,ri=ye.length;mi<ri;++mi)pi[mi]=ye.charCodeAt(mi);ye=pi}He.chmod(yi,Bt|146);var qi=He.open(yi,"w");He.write(qi,ye,0,ye.length,0,It),He.close(qi),He.chmod(yi,Bt)}return yi},createDevice:function(U,$,ye,De){var ot=Jn.join2(typeof U=="string"?U:He.getPath(U),$),It=He.getMode(!!ye,!!De);He.createDevice.major||(He.createDevice.major=64);var Nt=He.makedev(He.createDevice.major++,0);return He.registerDevice(Nt,{open:function(Bt){Bt.seekable=!1},close:function(Bt){De&&De.buffer&&De.buffer.length&&De(10)},read:function(Bt,yi,pi,mi,ri){for(var qi=0,sn=0;sn<mi;sn++){var Sn;try{Sn=ye()}catch{throw new He.ErrnoError(29)}if(Sn===void 0&&qi===0)throw new He.ErrnoError(6);if(Sn==null)break;qi++,yi[pi+sn]=Sn}return qi&&(Bt.node.timestamp=Date.now()),qi},write:function(Bt,yi,pi,mi,ri){for(var qi=0;qi<mi;qi++)try{De(yi[pi+qi])}catch{throw new He.ErrnoError(29)}return mi&&(Bt.node.timestamp=Date.now()),qi}}),He.mkdev(ot,It,Nt)},createLink:function(U,$,ye,De,ot){var It=Jn.join2(typeof U=="string"?U:He.getPath(U),$);return He.symlink(ye,It)},forceLoadFile:function(U){if(U.isDevice||U.isFolder||U.link||U.contents)return!0;var $=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(o)try{U.contents=Ko(o(U.url),!0),U.usedBytes=U.contents.length}catch{$=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return $||co(29),$},createLazyFile:function(U,$,ye,De,ot){function It(){this.lengthKnown=!1,this.chunks=[]}if(It.prototype.get=function(qi){if(!(qi>this.length-1||qi<0)){var sn=qi%this.chunkSize,Sn=qi/this.chunkSize|0;return this.getter(Sn)[sn]}},It.prototype.setDataGetter=function(qi){this.getter=qi},It.prototype.cacheLength=function(){var qi=new XMLHttpRequest;if(qi.open("HEAD",ye,!1),qi.send(null),!(qi.status>=200&&qi.status<300||qi.status===304))throw new Error("Couldn't load "+ye+". Status: "+qi.status);var sn=Number(qi.getResponseHeader("Content-length")),Sn,dt=(Sn=qi.getResponseHeader("Accept-Ranges"))&&Sn==="bytes",m=(Sn=qi.getResponseHeader("Content-Encoding"))&&Sn==="gzip",Ri=1024*1024;dt||(Ri=sn);var h=function(dn,Zn){if(dn>Zn)throw new Error("invalid range ("+dn+", "+Zn+") or no bytes requested!");if(Zn>sn-1)throw new Error("only "+sn+" bytes available! programmer error!");var xo=new XMLHttpRequest;if(xo.open("GET",ye,!1),sn!==Ri&&xo.setRequestHeader("Range","bytes="+dn+"-"+Zn),typeof Uint8Array<"u"&&(xo.responseType="arraybuffer"),xo.overrideMimeType&&xo.overrideMimeType("text/plain; charset=x-user-defined"),xo.send(null),!(xo.status>=200&&xo.status<300||xo.status===304))throw new Error("Couldn't load "+ye+". Status: "+xo.status);return xo.response!==void 0?new Uint8Array(xo.response||[]):Ko(xo.responseText||"",!0)},F=this;F.setDataGetter(function(dn){var Zn=dn*Ri,xo=(dn+1)*Ri-1;if(xo=Math.min(xo,sn-1),typeof F.chunks[dn]>"u"&&(F.chunks[dn]=h(Zn,xo)),typeof F.chunks[dn]>"u")throw new Error("doXHR failed!");return F.chunks[dn]}),(m||!sn)&&(Ri=sn=1,sn=this.getter(0).length,Ri=sn,_("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=sn,this._chunkSize=Ri,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Nt,Bt}else var Bt={isDevice:!1,url:ye};var yi=He.createFile(U,$,Bt,De,ot);Bt.contents?yi.contents=Bt.contents:Bt.url&&(yi.contents=null,yi.url=Bt.url),Object.defineProperties(yi,{usedBytes:{get:function(){return this.contents.length}}});var pi={},mi=Object.keys(yi.stream_ops);return mi.forEach(function(ri){var qi=yi.stream_ops[ri];pi[ri]=function(){if(!He.forceLoadFile(yi))throw new He.ErrnoError(29);return qi.apply(null,arguments)}}),pi.read=function(qi,sn,Sn,dt,m){if(!He.forceLoadFile(yi))throw new He.ErrnoError(29);var Ri=qi.node.contents;if(m>=Ri.length)return 0;var h=Math.min(Ri.length-m,dt);if(Ri.slice)for(var F=0;F<h;F++)sn[Sn+F]=Ri[m+F];else for(var F=0;F<h;F++)sn[Sn+F]=Ri.get(m+F);return h},yi.stream_ops=pi,yi},createPreloadedFile:function(U,$,ye,De,ot,It,Nt,Bt,yi,pi){Pe.init();var mi=$?br.resolve(Jn.join2(U,$)):U;function ri(qi){function sn(dt){pi&&pi(),Bt||He.createDataFile(U,$,dt,De,ot,yi),It&&It(),bt()}var Sn=!1;i.preloadPlugins.forEach(function(dt){Sn||dt.canHandle(mi)&&(dt.handle(qi,mi,sn,function(){Nt&&Nt(),bt()}),Sn=!0)}),Sn||sn(qi)}et(),typeof ye=="string"?Pe.asyncLoad(ye,function(qi){ri(qi)},Nt):ri(ye)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(U,$,ye){$=$||function(){},ye=ye||function(){};var De=He.indexedDB();try{var ot=De.open(He.DB_NAME(),He.DB_VERSION)}catch(It){return ye(It)}ot.onupgradeneeded=function(){_("creating db");var Nt=ot.result;Nt.createObjectStore(He.DB_STORE_NAME)},ot.onsuccess=function(){var Nt=ot.result,Bt=Nt.transaction([He.DB_STORE_NAME],"readwrite"),yi=Bt.objectStore(He.DB_STORE_NAME),pi=0,mi=0,ri=U.length;function qi(){mi==0?$():ye()}U.forEach(function(sn){var Sn=yi.put(He.analyzePath(sn).object.contents,sn);Sn.onsuccess=function(){pi++,pi+mi==ri&&qi()},Sn.onerror=function(){mi++,pi+mi==ri&&qi()}}),Bt.onerror=ye},ot.onerror=ye},loadFilesFromDB:function(U,$,ye){$=$||function(){},ye=ye||function(){};var De=He.indexedDB();try{var ot=De.open(He.DB_NAME(),He.DB_VERSION)}catch(It){return ye(It)}ot.onupgradeneeded=ye,ot.onsuccess=function(){var Nt=ot.result;try{var Bt=Nt.transaction([He.DB_STORE_NAME],"readonly")}catch(sn){ye(sn);return}var yi=Bt.objectStore(He.DB_STORE_NAME),pi=0,mi=0,ri=U.length;function qi(){mi==0?$():ye()}U.forEach(function(sn){var Sn=yi.get(sn);Sn.onsuccess=function(){He.analyzePath(sn).exists&&He.unlink(sn),He.createDataFile(Jn.dirname(sn),Jn.basename(sn),Sn.result,!0,!0,!0),pi++,pi+mi==ri&&qi()},Sn.onerror=function(){mi++,pi+mi==ri&&qi()}}),Bt.onerror=ye},ot.onerror=ye},mmapAlloc:function(U){for(var $=x(U,16384),ye=Hs($);U<$;)Ue[ye+U++]=0;return ye}};function Ho(U,$){if(Pe.mainLoop.timingMode=U,Pe.mainLoop.timingValue=$,!Pe.mainLoop.func)return 1;if(U==0)Pe.mainLoop.scheduler=function(){var Nt=Math.max(0,Pe.mainLoop.tickStartTime+$-Do())|0;setTimeout(Pe.mainLoop.runner,Nt)},Pe.mainLoop.method="timeout";else if(U==1)Pe.mainLoop.scheduler=function(){Pe.requestAnimationFrame(Pe.mainLoop.runner)},Pe.mainLoop.method="rAF";else if(U==2){if(typeof setImmediate>"u"){var ye=[],De="setimmediate",ot=function(It){(It.data===De||It.data.target===De)&&(It.stopPropagation(),ye.shift()())};addEventListener("message",ot,!0),setImmediate=function(Nt){ye.push(Nt),postMessage(De,"*")}}Pe.mainLoop.scheduler=function(){setImmediate(Pe.mainLoop.runner)},Pe.mainLoop.method="immediate"}return 0}var Do;typeof performance<"u"&&performance.now?Do=function(){return performance.now()}:Do=Date.now;function wo(U,$,ye,De,ot){Z(!Pe.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Pe.mainLoop.func=U,Pe.mainLoop.arg=De;var It;typeof De<"u"?It=function(){i.dynCall_vi(U,De)}:It=function(){i.dynCall_v(U)};var Nt=Pe.mainLoop.currentlyRunningMainloop;if(Pe.mainLoop.runner=function(){if(!Q){if(Pe.mainLoop.queue.length>0){var yi=Date.now(),pi=Pe.mainLoop.queue.shift();if(pi.func(pi.arg),Pe.mainLoop.remainingBlockers){var mi=Pe.mainLoop.remainingBlockers,ri=mi%1==0?mi-1:Math.floor(mi);pi.counted?Pe.mainLoop.remainingBlockers=ri:(ri=ri+.5,Pe.mainLoop.remainingBlockers=(8*mi+ri)/9)}if(console.log('main loop blocker "'+pi.name+'" took '+(Date.now()-yi)+" ms"),Pe.mainLoop.updateStatus(),Nt<Pe.mainLoop.currentlyRunningMainloop)return;setTimeout(Pe.mainLoop.runner,0);return}if(!(Nt<Pe.mainLoop.currentlyRunningMainloop)){if(Pe.mainLoop.currentFrameNumber=Pe.mainLoop.currentFrameNumber+1|0,Pe.mainLoop.timingMode==1&&Pe.mainLoop.timingValue>1&&Pe.mainLoop.currentFrameNumber%Pe.mainLoop.timingValue!=0){Pe.mainLoop.scheduler();return}else Pe.mainLoop.timingMode==0&&(Pe.mainLoop.tickStartTime=Do());Pe.mainLoop.runIter(It),!(Nt<Pe.mainLoop.currentlyRunningMainloop)&&(typeof Ge=="object"&&Ge.audio&&Ge.audio.queueNewAudioData&&Ge.audio.queueNewAudioData(),Pe.mainLoop.scheduler())}}},ot||($&&$>0?Ho(0,1e3/$):Ho(1,1),Pe.mainLoop.scheduler()),ye)throw"unwind"}var Pe={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Pe.mainLoop.scheduler=null,Pe.mainLoop.currentlyRunningMainloop++},resume:function(){Pe.mainLoop.currentlyRunningMainloop++;var U=Pe.mainLoop.timingMode,$=Pe.mainLoop.timingValue,ye=Pe.mainLoop.func;Pe.mainLoop.func=null,wo(ye,0,!1,Pe.mainLoop.arg,!0),Ho(U,$),Pe.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var U=i.statusMessage||"Please wait...",$=Pe.mainLoop.remainingBlockers,ye=Pe.mainLoop.expectedBlockers;$?$<ye?i.setStatus(U+" ("+(ye-$)+"/"+ye+")"):i.setStatus(U):i.setStatus("")}},runIter:function(U){if(!Q){if(i.preMainLoop){var $=i.preMainLoop();if($===!1)return}try{U()}catch(ye){if(ye instanceof Io)return;if(ye=="unwind")return;throw ye&&typeof ye=="object"&&ye.stack&&v("exception thrown: "+[ye,ye.stack]),ye}i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),Pe.initted)return;Pe.initted=!0;try{new Blob,Pe.hasBlobConstructor=!0}catch{Pe.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Pe.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:Pe.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Pe.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&typeof Pe.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var U={};U.canHandle=function(It){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(It)},U.handle=function(It,Nt,Bt,yi){var pi=null;if(Pe.hasBlobConstructor)try{pi=new Blob([It],{type:Pe.getMimetype(Nt)}),pi.size!==It.length&&(pi=new Blob([new Uint8Array(It).buffer],{type:Pe.getMimetype(Nt)}))}catch(sn){C("Blob constructor present but fails: "+sn+"; falling back to blob builder")}if(!pi){var mi=new Pe.BlobBuilder;mi.append(new Uint8Array(It).buffer),pi=mi.getBlob()}var ri=Pe.URLObject.createObjectURL(pi),qi=new Image;qi.onload=function(){Z(qi.complete,"Image "+Nt+" could not be decoded");var Sn=document.createElement("canvas");Sn.width=qi.width,Sn.height=qi.height;var dt=Sn.getContext("2d");dt.drawImage(qi,0,0),i.preloadedImages[Nt]=Sn,Pe.URLObject.revokeObjectURL(ri),Bt&&Bt(It)},qi.onerror=function(Sn){console.log("Image "+ri+" could not be decoded"),yi&&yi()},qi.src=ri},i.preloadPlugins.push(U);var $={};$.canHandle=function(It){return!i.noAudioDecoding&&It.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},$.handle=function(It,Nt,Bt,yi){var pi=!1;function mi(dt){pi||(pi=!0,i.preloadedAudios[Nt]=dt,Bt&&Bt(It))}function ri(){pi||(pi=!0,i.preloadedAudios[Nt]=new Audio,yi&&yi())}if(Pe.hasBlobConstructor){try{var qi=new Blob([It],{type:Pe.getMimetype(Nt)})}catch{return ri()}var sn=Pe.URLObject.createObjectURL(qi),Sn=new Audio;Sn.addEventListener("canplaythrough",function(){mi(Sn)},!1),Sn.onerror=function(m){if(pi)return;console.log("warning: browser could not fully decode audio "+Nt+", trying slower base64 approach");function Ri(h){for(var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dn="=",Zn="",xo=0,re=0,Mr=0;Mr<h.length;Mr++)for(xo=xo<<8|h[Mr],re+=8;re>=6;){var ga=xo>>re-6&63;re-=6,Zn+=F[ga]}return re==2?(Zn+=F[(xo&3)<<4],Zn+=dn+dn):re==4&&(Zn+=F[(xo&15)<<2],Zn+=dn),Zn}Sn.src="data:audio/x-"+Nt.substr(-3)+";base64,"+Ri(It),mi(Sn)},Sn.src=sn,Pe.safeSetTimeout(function(){mi(Sn)},1e4)}else return ri()},i.preloadPlugins.push($);function ye(){Pe.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var De=i.canvas;De&&(De.requestPointerLock=De.requestPointerLock||De.mozRequestPointerLock||De.webkitRequestPointerLock||De.msRequestPointerLock||function(){},De.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},De.exitPointerLock=De.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ye,!1),document.addEventListener("mozpointerlockchange",ye,!1),document.addEventListener("webkitpointerlockchange",ye,!1),document.addEventListener("mspointerlockchange",ye,!1),i.elementPointerLock&&De.addEventListener("click",function(ot){!Pe.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),ot.preventDefault())},!1))},createContext:function(U,$,ye,De){if($&&i.ctx&&U==i.canvas)return i.ctx;var ot,It;if($){var Nt={antialias:!1,alpha:!1,majorVersion:1};if(De)for(var Bt in De)Nt[Bt]=De[Bt];typeof St<"u"&&(It=St.createContext(U,Nt),It&&(ot=St.getContext(It).GLctx))}else ot=U.getContext("2d");return ot?(ye&&($||Z(typeof Or>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=ot,$&&St.makeContextCurrent(It),i.useWebGL=$,Pe.moduleContextCreatedCallbacks.forEach(function(yi){yi()}),Pe.init()),ot):null},destroyContext:function(U,$,ye){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(U,$){Pe.lockPointer=U,Pe.resizeCanvas=$,typeof Pe.lockPointer>"u"&&(Pe.lockPointer=!0),typeof Pe.resizeCanvas>"u"&&(Pe.resizeCanvas=!1);var ye=i.canvas;function De(){Pe.isFullscreen=!1;var It=ye.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===It?(ye.exitFullscreen=Pe.exitFullscreen,Pe.lockPointer&&ye.requestPointerLock(),Pe.isFullscreen=!0,Pe.resizeCanvas?Pe.setFullscreenCanvasSize():Pe.updateCanvasDimensions(ye)):(It.parentNode.insertBefore(ye,It),It.parentNode.removeChild(It),Pe.resizeCanvas?Pe.setWindowedCanvasSize():Pe.updateCanvasDimensions(ye)),i.onFullScreen&&i.onFullScreen(Pe.isFullscreen),i.onFullscreen&&i.onFullscreen(Pe.isFullscreen)}Pe.fullscreenHandlersInstalled||(Pe.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",De,!1),document.addEventListener("mozfullscreenchange",De,!1),document.addEventListener("webkitfullscreenchange",De,!1),document.addEventListener("MSFullscreenChange",De,!1));var ot=document.createElement("div");ye.parentNode.insertBefore(ot,ye),ot.appendChild(ye),ot.requestFullscreen=ot.requestFullscreen||ot.mozRequestFullScreen||ot.msRequestFullscreen||(ot.webkitRequestFullscreen?function(){ot.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(ot.webkitRequestFullScreen?function(){ot.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),ot.requestFullscreen()},exitFullscreen:function(){if(!Pe.isFullscreen)return!1;var U=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return U.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(U){var $=Date.now();if(Pe.nextRAF===0)Pe.nextRAF=$+1e3/60;else for(;$+2>=Pe.nextRAF;)Pe.nextRAF+=1e3/60;var ye=Math.max(Pe.nextRAF-$,0);setTimeout(U,ye)},requestAnimationFrame:function(U){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(U);return}var $=Pe.fakeRequestAnimationFrame;typeof window<"u"&&($=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||$),$(U)},safeCallback:function(U){return function(){if(!Q)return U.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Pe.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Pe.allowAsyncCallbacks=!0,Pe.queuedAsyncCallbacks.length>0){var U=Pe.queuedAsyncCallbacks;Pe.queuedAsyncCallbacks=[],U.forEach(function($){$()})}},safeRequestAnimationFrame:function(U){return Pe.requestAnimationFrame(function(){Q||(Pe.allowAsyncCallbacks?U():Pe.queuedAsyncCallbacks.push(U))})},safeSetTimeout:function(U,$){return setTimeout(function(){Q||(Pe.allowAsyncCallbacks?U():Pe.queuedAsyncCallbacks.push(U))},$)},safeSetInterval:function(U,$){return setInterval(function(){Q||Pe.allowAsyncCallbacks&&U()},$)},getMimetype:function(U){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[U.substr(U.lastIndexOf(".")+1)]},getUserMedia:function(U){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(U)},getMovementX:function(U){return U.movementX||U.mozMovementX||U.webkitMovementX||0},getMovementY:function(U){return U.movementY||U.mozMovementY||U.webkitMovementY||0},getMouseWheelDelta:function(U){var $=0;switch(U.type){case"DOMMouseScroll":$=U.detail/3;break;case"mousewheel":$=U.wheelDelta/120;break;case"wheel":switch($=U.deltaY,U.deltaMode){case 0:$/=100;break;case 1:$/=3;break;case 2:$*=80;break;default:throw"unrecognized mouse wheel delta mode: "+U.deltaMode}break;default:throw"unrecognized mouse wheel event: "+U.type}return $},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(U){if(Pe.pointerLock)U.type!="mousemove"&&"mozMovementX"in U?Pe.mouseMovementX=Pe.mouseMovementY=0:(Pe.mouseMovementX=Pe.getMovementX(U),Pe.mouseMovementY=Pe.getMovementY(U)),typeof Ge<"u"?(Pe.mouseX=Ge.mouseX+Pe.mouseMovementX,Pe.mouseY=Ge.mouseY+Pe.mouseMovementY):(Pe.mouseX+=Pe.mouseMovementX,Pe.mouseY+=Pe.mouseMovementY);else{var $=i.canvas.getBoundingClientRect(),ye=i.canvas.width,De=i.canvas.height,ot=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,It=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(U.type==="touchstart"||U.type==="touchend"||U.type==="touchmove"){var Nt=U.touch;if(Nt===void 0)return;var Bt=Nt.pageX-(ot+$.left),yi=Nt.pageY-(It+$.top);Bt=Bt*(ye/$.width),yi=yi*(De/$.height);var pi={x:Bt,y:yi};if(U.type==="touchstart")Pe.lastTouches[Nt.identifier]=pi,Pe.touches[Nt.identifier]=pi;else if(U.type==="touchend"||U.type==="touchmove"){var mi=Pe.touches[Nt.identifier];mi||(mi=pi),Pe.lastTouches[Nt.identifier]=mi,Pe.touches[Nt.identifier]=pi}return}var ri=U.pageX-(ot+$.left),qi=U.pageY-(It+$.top);ri=ri*(ye/$.width),qi=qi*(De/$.height),Pe.mouseMovementX=ri-Pe.mouseX,Pe.mouseMovementY=qi-Pe.mouseY,Pe.mouseX=ri,Pe.mouseY=qi}},asyncLoad:function(U,$,ye,De){var ot=De?"":"al "+U;c(U,function(It){Z(It,'Loading data file "'+U+'" failed (no arrayBuffer).'),$(new Uint8Array(It)),ot&&bt()},function(It){if(ye)ye();else throw'Loading data file "'+U+'" failed.'}),ot&&et()},resizeListeners:[],updateResizeListeners:function(){var U=i.canvas;Pe.resizeListeners.forEach(function($){$(U.width,U.height)})},setCanvasSize:function(U,$,ye){var De=i.canvas;Pe.updateCanvasDimensions(De,U,$),ye||Pe.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Ge<"u"){var U=ge[Ge.screen>>2];U=U|8388608,de[Ge.screen>>2]=U}Pe.updateCanvasDimensions(i.canvas),Pe.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Ge<"u"){var U=ge[Ge.screen>>2];U=U&-8388609,de[Ge.screen>>2]=U}Pe.updateCanvasDimensions(i.canvas),Pe.updateResizeListeners()},updateCanvasDimensions:function(U,$,ye){$&&ye?(U.widthNative=$,U.heightNative=ye):($=U.widthNative,ye=U.heightNative);var De=$,ot=ye;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(De/ot<i.forcedAspectRatio?De=Math.round(ot*i.forcedAspectRatio):ot=Math.round(De/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===U.parentNode&&typeof screen<"u"){var It=Math.min(screen.width/De,screen.height/ot);De=Math.round(De*It),ot=Math.round(ot*It)}Pe.resizeCanvas?(U.width!=De&&(U.width=De),U.height!=ot&&(U.height=ot),typeof U.style<"u"&&(U.style.removeProperty("width"),U.style.removeProperty("height"))):(U.width!=$&&(U.width=$),U.height!=ye&&(U.height=ye),typeof U.style<"u"&&(De!=$||ot!=ye?(U.style.setProperty("width",De+"px","important"),U.style.setProperty("height",ot+"px","important")):(U.style.removeProperty("width"),U.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var U=Pe.nextWgetRequestHandle;return Pe.nextWgetRequestHandle++,U}};function Te(){return Date.now()-Ge.startTime|0}function qe(U){var $=Ge.surfaces[U];if($.locked++,$.locked>1||($.buffer||($.buffer=Hs($.width*$.height*4),de[U+20>>2]=$.buffer),de[U+20>>2]=$.buffer,U==Ge.screen&&i.screenIsReadOnly&&$.image))return 0;if($.image=$.ctx.getImageData(0,0,$.width,$.height),U==Ge.screen&&Ge.defaults.opaqueFrontBuffer)for(var ye=$.image.data,De=ye.length,ot=0;ot<De/4;ot++)ye[ot*4+3]=255;{if($.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;ce.set($.image.data,$.buffer)}return 0}function ft(){return Ge.unicode}function _t(){return Ge.ttfContext}function Ut(){return Ge.audio}var Ge={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(U){return{x:de[U+0>>2],y:de[U+4>>2],w:de[U+8>>2],h:de[U+12>>2]}},updateRect:function(U,$){de[U>>2]=$.x,de[U+4>>2]=$.y,de[U+8>>2]=$.w,de[U+12>>2]=$.h},intersectionOfRects:function(U,$){var ye=Math.max(U.x,$.x),De=Math.max(U.y,$.y),ot=Math.min(U.x+U.w,$.x+$.w),It=Math.min(U.y+U.h,$.y+$.h);return{x:ye,y:De,w:Math.max(ye,ot)-ye,h:Math.max(De,It)-De}},checkPixelFormat:function(U){},loadColorToCSSRGB:function(U){var $=de[U>>2];return"rgb("+($&255)+","+($>>8&255)+","+($>>16&255)+")"},loadColorToCSSRGBA:function(U){var $=de[U>>2];return"rgba("+($&255)+","+($>>8&255)+","+($>>16&255)+","+($>>24&255)/255+")"},translateColorToCSSRGBA:function(U){return"rgba("+(U&255)+","+(U>>8&255)+","+(U>>16&255)+","+(U>>>24)/255+")"},translateRGBAToCSSRGBA:function(U,$,ye,De){return"rgba("+(U&255)+","+($&255)+","+(ye&255)+","+(De&255)/255+")"},translateRGBAToColor:function(U,$,ye,De){return U|$<<8|ye<<16|De<<24},makeSurface:function(U,$,ye,De,ot,It,Nt,Bt,yi){ye=ye||0;var pi=ye&1,mi=ye&2097152,ri=ye&67108864,qi=Hs(60),sn=Hs(44),Sn=mi?1:4,dt=0;!pi&&!ri&&(dt=Hs(U*$*4)),de[qi>>2]=ye,de[qi+4>>2]=sn,de[qi+8>>2]=U,de[qi+12>>2]=$,de[qi+16>>2]=U*Sn,de[qi+20>>2]=dt,de[qi+36>>2]=0,de[qi+40>>2]=0,de[qi+44>>2]=i.canvas.width,de[qi+48>>2]=i.canvas.height,de[qi+56>>2]=1,de[sn>>2]=-2042224636,de[sn+4>>2]=0,Ue[sn+8>>0]=Sn*8,Ue[sn+9>>0]=Sn,de[sn+12>>2]=It||255,de[sn+16>>2]=Nt||65280,de[sn+20>>2]=Bt||16711680,de[sn+24>>2]=yi||4278190080,Ge.GL=Ge.GL||ri;var m;De?m=i.canvas:(Ge.canvasPool.length>0?m=Ge.canvasPool.pop():m=document.createElement("canvas"),m.width=U,m.height=$);var Ri={antialias:Ge.glAttributes[13]!=0,depth:Ge.glAttributes[6]>0,stencil:Ge.glAttributes[7]>0,alpha:Ge.glAttributes[3]>0},h=Pe.createContext(m,ri,De,Ri);return Ge.surfaces[qi]={width:U,height:$,canvas:m,ctx:h,surf:qi,buffer:dt,pixelFormat:sn,alpha:255,flags:ye,locked:0,usePageCanvas:De,source:ot,isFlagSet:function(F){return ye&F}},qi},copyIndexedColorData:function(U,$,ye,De,ot){if(!!U.colors){var It=i.canvas.width,Nt=i.canvas.height,Bt=$||0,yi=ye||0,pi=(De||It-Bt)+Bt,mi=(ot||Nt-yi)+yi,ri=U.buffer;U.image.data32||(U.image.data32=new Uint32Array(U.image.data.buffer));for(var qi=U.image.data32,sn=U.colors32,Sn=yi;Sn<mi;++Sn)for(var dt=Sn*It,m=Bt;m<pi;++m)qi[dt+m]=sn[ce[ri+dt+m>>0]]}},freeSurface:function(U){var $=U+56,ye=de[$>>2];if(ye>1){de[$>>2]=ye-1;return}var De=Ge.surfaces[U];!De.usePageCanvas&&De.canvas&&Ge.canvasPool.push(De.canvas),De.buffer&&Ma(De.buffer),Ma(De.pixelFormat),Ma(U),Ge.surfaces[U]=null,U===Ge.screen&&(Ge.screen=null)},blitSurface:function(U,$,ye,De,ot){var It=Ge.surfaces[U],Nt=Ge.surfaces[ye],Bt,yi;if($?Bt=Ge.loadRect($):Bt={x:0,y:0,w:It.width,h:It.height},De?yi=Ge.loadRect(De):yi={x:0,y:0,w:It.width,h:It.height},Nt.clipRect){var pi=!ot||Bt.w===0?1:Bt.w/yi.w,mi=!ot||Bt.h===0?1:Bt.h/yi.h;yi=Ge.intersectionOfRects(Nt.clipRect,yi),Bt.w=yi.w*pi,Bt.h=yi.h*mi,De&&Ge.updateRect(De,yi)}var ri,qi;if(ot?(ri=yi.w,qi=yi.h):(ri=Bt.w,qi=Bt.h),Bt.w===0||Bt.h===0||ri===0||qi===0)return 0;var sn=Nt.ctx.globalAlpha;return Nt.ctx.globalAlpha=It.alpha/255,Nt.ctx.drawImage(It.canvas,Bt.x,Bt.y,Bt.w,Bt.h,yi.x,yi.y,ri,qi),Nt.ctx.globalAlpha=sn,ye!=Ge.screen&&(C("WARNING: copying canvas data to memory for compatibility"),qe(ye),Nt.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(U){function $(){for(var mi in Ge.keyboardMap)Ge.events.push({type:"keyup",keyCode:Ge.keyboardMap[mi]})}switch(U.type){case"touchstart":case"touchmove":{U.preventDefault();var ye=[];if(U.type==="touchstart")for(var De=0;De<U.touches.length;De++){var ot=U.touches[De];Ge.downFingers[ot.identifier]!=!0&&(Ge.downFingers[ot.identifier]=!0,ye.push(ot))}else ye=U.touches;var It=ye[0];if(It){U.type=="touchstart"&&(Ge.DOMButtons[0]=1);var Nt;switch(U.type){case"touchstart":Nt="mousedown";break;case"touchmove":Nt="mousemove";break}var Bt={type:Nt,button:0,pageX:It.clientX,pageY:It.clientY};Ge.events.push(Bt)}for(var De=0;De<ye.length;De++){var ot=ye[De];Ge.events.push({type:U.type,touch:ot})}break}case"touchend":{U.preventDefault();for(var De=0;De<U.changedTouches.length;De++){var ot=U.changedTouches[De];Ge.downFingers[ot.identifier]===!0&&delete Ge.downFingers[ot.identifier]}var Bt={type:"mouseup",button:0,pageX:U.changedTouches[0].clientX,pageY:U.changedTouches[0].clientY};Ge.DOMButtons[0]=0,Ge.events.push(Bt);for(var De=0;De<U.changedTouches.length;De++){var ot=U.changedTouches[De];Ge.events.push({type:"touchend",touch:ot})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var yi=-Pe.getMouseWheelDelta(U);yi=yi==0?0:yi>0?Math.max(yi,1):Math.min(yi,-1);var pi=yi>0?3:4;Ge.events.push({type:"mousedown",button:pi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"mouseup",button:pi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"wheel",deltaX:0,deltaY:yi}),U.preventDefault();break;case"mousemove":if(Ge.DOMButtons[0]===1&&Ge.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Pe.pointerLock&&("mozMovementX"in U&&(U.movementX=U.mozMovementX,U.movementY=U.mozMovementY),U.movementX==0&&U.movementY==0)){U.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((U.type!=="keydown"||!ft()&&!Ge.textInput||U.keyCode===8||U.keyCode===9)&&U.preventDefault(),U.type=="mousedown")Ge.DOMButtons[U.button]=1,Ge.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}});else if(U.type=="mouseup"){if(!Ge.DOMButtons[U.button])return;Ge.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Ge.DOMButtons[U.button]=0}U.type==="keydown"||U.type==="mousedown"?Ge.canRequestFullscreen=!0:(U.type==="keyup"||U.type==="mouseup")&&(Ge.canRequestFullscreen=!1),U.type==="keypress"&&Ge.savedKeydown?(Ge.savedKeydown.keypressCharCode=U.charCode,Ge.savedKeydown=null):U.type==="keydown"&&(Ge.savedKeydown=U),(U.type!=="keypress"||Ge.textInput)&&Ge.events.push(U);break;case"mouseout":for(var De=0;De<3;De++)Ge.DOMButtons[De]&&(Ge.events.push({type:"mouseup",button:De,pageX:U.pageX,pageY:U.pageY}),Ge.DOMButtons[De]=0);U.preventDefault();break;case"focus":Ge.events.push(U),U.preventDefault();break;case"blur":Ge.events.push(U),$(),U.preventDefault();break;case"visibilitychange":Ge.events.push({type:"visibilitychange",visible:!document.hidden}),$(),U.preventDefault();break;case"unload":Pe.mainLoop.runner&&(Ge.events.push(U),Pe.mainLoop.runner());return;case"resize":Ge.events.push(U),U.preventDefault&&U.preventDefault();break}Ge.events.length>=1e4&&(v("SDL event queue full, dropping events"),Ge.events=Ge.events.slice(0,1e4))},lookupKeyCodeForEvent:function(U){var $=U.keyCode;return $>=65&&$<=90?$+=32:($=Ge.keyCodes[U.keyCode]||U.keyCode,U.location===2&&$>=(224|1<<10)&&$<=(227|1<<10)&&($+=4)),$},handleEvent:function(U){if(!U.handled)switch(U.handled=!0,U.type){case"touchstart":case"touchend":case"touchmove":{Pe.calculateMouseEvent(U);break}case"keydown":case"keyup":{var $=U.type==="keydown",ye=Ge.lookupKeyCodeForEvent(U);Ue[Ge.keyboardState+ye>>0]=$,Ge.modState=(Ue[Ge.keyboardState+1248>>0]?64:0)|(Ue[Ge.keyboardState+1249>>0]?1:0)|(Ue[Ge.keyboardState+1250>>0]?256:0)|(Ue[Ge.keyboardState+1252>>0]?128:0)|(Ue[Ge.keyboardState+1253>>0]?2:0)|(Ue[Ge.keyboardState+1254>>0]?512:0),$?Ge.keyboardMap[ye]=U.keyCode:delete Ge.keyboardMap[ye];break}case"mousedown":case"mouseup":U.type=="mousedown"?Ge.buttonState|=1<<U.button:U.type=="mouseup"&&(Ge.buttonState&=~(1<<U.button));case"mousemove":{Pe.calculateMouseEvent(U);break}}},flushEventsToHandler:function(){},pollEvent:function(U){if(Ge.initFlags&512&&Ge.joystickEventState&&Ge.queryJoysticks(),U){for(;Ge.events.length>0;)if(Ge.makeCEvent(Ge.events.shift(),U)!==!1)return 1;return 0}else return Ge.events.length>0},makeCEvent:function(U,$){if(typeof U=="number"){Ks($,U,28),Ma(U);return}switch(Ge.handleEvent(U),U.type){case"keydown":case"keyup":{var ye=U.type==="keydown",De=Ge.lookupKeyCodeForEvent(U),ot;De>=1024?ot=De-1024:ot=Ge.scanCodes[De]||De,de[$>>2]=Ge.DOMEventToSDLEvent[U.type],Ue[$+8>>0]=ye?1:0,Ue[$+9>>0]=0,de[$+12>>2]=ot,de[$+16>>2]=De,Ie[$+20>>1]=Ge.modState,de[$+24>>2]=U.keypressCharCode||De;break}case"keypress":{de[$>>2]=Ge.DOMEventToSDLEvent[U.type];for(var It=Ko(String.fromCharCode(U.charCode)),Nt=0;Nt<It.length;++Nt)Ue[$+(8+Nt)>>0]=It[Nt];break}case"mousedown":case"mouseup":case"mousemove":{if(U.type!="mousemove"){var ye=U.type==="mousedown";de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=0,de[$+8>>2]=0,de[$+12>>2]=0,Ue[$+16>>0]=U.button+1,Ue[$+17>>0]=ye?1:0,de[$+20>>2]=Pe.mouseX,de[$+24>>2]=Pe.mouseY}else de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=0,de[$+8>>2]=0,de[$+12>>2]=0,de[$+16>>2]=Ge.buttonState,de[$+20>>2]=Pe.mouseX,de[$+24>>2]=Pe.mouseY,de[$+28>>2]=Pe.mouseMovementX,de[$+32>>2]=Pe.mouseMovementY;break}case"wheel":{de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+16>>2]=U.deltaX,de[$+20>>2]=U.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Bt=U.touch;if(!Pe.touches[Bt.identifier])break;var yi=i.canvas.width,pi=i.canvas.height,mi=Pe.touches[Bt.identifier].x/yi,ri=Pe.touches[Bt.identifier].y/pi,qi=Pe.lastTouches[Bt.identifier].x/yi,sn=Pe.lastTouches[Bt.identifier].y/pi,Sn=mi-qi,dt=ri-sn;if(Bt.deviceID===void 0&&(Bt.deviceID=Ge.TOUCH_DEFAULT_ID),Sn===0&&dt===0&&U.type==="touchmove")return!1;de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=Te(),yo=[Bt.deviceID>>>0,(mr=Bt.deviceID,+ai(mr)>=1?mr>0?($t(+Ii(mr/4294967296),4294967295)|0)>>>0:~~+Ji((mr-+(~~mr>>>0))/4294967296)>>>0:0)],de[$+8>>2]=yo[0],de[$+12>>2]=yo[1],yo=[Bt.identifier>>>0,(mr=Bt.identifier,+ai(mr)>=1?mr>0?($t(+Ii(mr/4294967296),4294967295)|0)>>>0:~~+Ji((mr-+(~~mr>>>0))/4294967296)>>>0:0)],de[$+16>>2]=yo[0],de[$+20>>2]=yo[1],Re[$+24>>2]=mi,Re[$+28>>2]=ri,Re[$+32>>2]=Sn,Re[$+36>>2]=dt,Bt.force!==void 0?Re[$+40>>2]=Bt.force:Re[$+40>>2]=U.type=="touchend"?0:1;break}case"unload":{de[$>>2]=Ge.DOMEventToSDLEvent[U.type];break}case"resize":{de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=U.w,de[$+8>>2]=U.h;break}case"joystick_button_up":case"joystick_button_down":{var m=U.type==="joystick_button_up"?0:1;de[$>>2]=Ge.DOMEventToSDLEvent[U.type],Ue[$+4>>0]=U.index,Ue[$+5>>0]=U.button,Ue[$+6>>0]=m;break}case"joystick_axis_motion":{de[$>>2]=Ge.DOMEventToSDLEvent[U.type],Ue[$+4>>0]=U.index,Ue[$+5>>0]=U.axis,de[$+8>>2]=Ge.joystickAxisValueConversion(U.value);break}case"focus":{var Ri=12;de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=0,Ue[$+8>>0]=Ri;break}case"blur":{var h=13;de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=0,Ue[$+8>>0]=h;break}case"visibilitychange":{var F=1,dn=2,Zn=U.visible?F:dn;de[$>>2]=Ge.DOMEventToSDLEvent[U.type],de[$+4>>2]=0,Ue[$+8>>0]=Zn;break}default:throw"Unhandled SDL event: "+U.type}},makeFontString:function(U,$){return $.charAt(0)!="'"&&$.charAt(0)!='"'&&($='"'+$+'"'),U+"px "+$+", serif"},estimateTextWidth:function(U,$){var ye=U.size,De=Ge.makeFontString(ye,U.name),ot=_t();ot.font=De;var It=ot.measureText($).width|0;return It},allocateChannels:function(U){if(!(Ge.numChannels&&Ge.numChannels>=U&&U!=0)){Ge.numChannels=U,Ge.channels=[];for(var $=0;$<U;$++)Ge.channels[$]={audio:null,volume:1}}},setGetVolume:function(U,$){if(!U)return 0;var ye=U.volume*128;if($!=-1&&(U.volume=Math.min(Math.max($,0),128)/128,U.audio))try{U.audio.volume=U.volume,U.audio.webAudioGainNode&&(U.audio.webAudioGainNode.gain.value=U.volume)}catch(De){v("setGetVolume failed to set audio volume: "+De)}return ye},setPannerPosition:function(U,$,ye,De){!U||U.audio&&U.audio.webAudioPannerNode&&U.audio.webAudioPannerNode.setPosition($,ye,De)},playWebAudio:function(U){if(!!U&&!U.webAudioNode&&!!Ge.webAudioAvailable())try{var $=U.resource.webAudio;if(U.paused=!1,!$.decodedBuffer){$.onDecodeComplete===void 0&&Xt("Cannot play back audio object that was not loaded"),$.onDecodeComplete.push(function(){U.paused||Ge.playWebAudio(U)});return}U.webAudioNode=Ge.audioContext.createBufferSource(),U.webAudioNode.buffer=$.decodedBuffer,U.webAudioNode.loop=U.loop,U.webAudioNode.onended=function(){U.onended()},U.webAudioPannerNode=Ge.audioContext.createPanner(),U.webAudioPannerNode.setPosition(0,0,-.5),U.webAudioPannerNode.panningModel="equalpower",U.webAudioGainNode=Ge.audioContext.createGain(),U.webAudioGainNode.gain.value=U.volume,U.webAudioNode.connect(U.webAudioPannerNode),U.webAudioPannerNode.connect(U.webAudioGainNode),U.webAudioGainNode.connect(Ge.audioContext.destination),U.webAudioNode.start(0,U.currentPosition),U.startTime=Ge.audioContext.currentTime-U.currentPosition}catch(ye){v("playWebAudio failed: "+ye)}},pauseWebAudio:function(U){if(!!U){if(U.webAudioNode)try{U.currentPosition=(Ge.audioContext.currentTime-U.startTime)%U.resource.webAudio.decodedBuffer.duration,U.webAudioNode.onended=void 0,U.webAudioNode.stop(0),U.webAudioNode=void 0}catch($){v("pauseWebAudio failed: "+$)}U.paused=!0}},openAudioContext:function(){Ge.audioContext||(typeof AudioContext<"u"?Ge.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Ge.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Ge.audioContext},fillWebAudioBufferFromHeap:function(U,$,ye){for(var De=Ut(),ot=De.channels,It=0;It<ot;++It){var Nt=ye.getChannelData(It);if(Nt.length!=$)throw"Web Audio output buffer length mismatch! Destination size: "+Nt.length+" samples vs expected "+$+" samples!";if(De.format==32784)for(var Bt=0;Bt<$;++Bt)Nt[Bt]=Ie[U+(Bt*ot+It)*2>>1]/32768;else if(De.format==8)for(var Bt=0;Bt<$;++Bt){var yi=Ue[U+(Bt*ot+It)>>0];Nt[Bt]=(yi>=0?yi-128:yi+128)/128}else if(De.format==33056)for(var Bt=0;Bt<$;++Bt)Nt[Bt]=Re[U+(Bt*ot+It)*4>>2];else throw"Invalid SDL audio format "+De.format+"!"}},debugSurface:function(U){console.log("dumping surface "+[U.surf,U.source,U.width,U.height]);for(var $=U.ctx.getImageData(0,0,U.width,U.height),ye=$.data,De=Math.min(U.width,U.height),ot=0;ot<De;ot++)console.log("   diagonal "+ot+":"+[ye[ot*U.width*4+ot*4+0],ye[ot*U.width*4+ot*4+1],ye[ot*U.width*4+ot*4+2],ye[ot*U.width*4+ot*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(U,$){for(var ye=new Array($.buttons.length),De=0;De<$.buttons.length;De++)ye[De]=Ge.getJoystickButtonState($.buttons[De]);Ge.lastJoystickState[U]={buttons:ye,axes:$.axes.slice(0),timestamp:$.timestamp,index:$.index,id:$.id}},getJoystickButtonState:function(U){return typeof U=="object"?U.pressed:U>0},queryJoysticks:function(){for(var U in Ge.lastJoystickState){var $=Ge.getGamepad(U-1),ye=Ge.lastJoystickState[U];if(typeof $>"u"||$===null)return;if(typeof $.timestamp!="number"||$.timestamp!==ye.timestamp||!$.timestamp){var De;for(De=0;De<$.buttons.length;De++){var ot=Ge.getJoystickButtonState($.buttons[De]);ot!==ye.buttons[De]&&Ge.events.push({type:ot?"joystick_button_down":"joystick_button_up",joystick:U,index:U-1,button:De})}for(De=0;De<$.axes.length;De++)$.axes[De]!==ye.axes[De]&&Ge.events.push({type:"joystick_axis_motion",joystick:U,index:U-1,axis:De,value:$.axes[De]});Ge.recordJoystickState(U,$)}}},joystickAxisValueConversion:function(U){return U=Math.min(1,Math.max(U,-1)),Math.ceil((U+1)*32767.5-32768)},getGamepads:function(){var U=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return U!==void 0?U.apply(navigator):[]},getGamepad:function(U){var $=Ge.getGamepads();return $.length>U&&U>=0?$[U]:null}};function Ht(U,$,ye,De,ot,It,Nt,Bt){return Ge.makeSurface($,ye,U,!1,"CreateRGBSurface",ot,It,Nt,Bt)}function zt(U){}function ti(U){U&&Ge.freeSurface(U)}function vt(U){if(Ge.startTime=Date.now(),Ge.initFlags=U,!i.doNotCaptureKeyboard){var $=i.keyboardListeningElement||document;$.addEventListener("keydown",Ge.receiveEvent),$.addEventListener("keyup",Ge.receiveEvent),$.addEventListener("keypress",Ge.receiveEvent),window.addEventListener("focus",Ge.receiveEvent),window.addEventListener("blur",Ge.receiveEvent),document.addEventListener("visibilitychange",Ge.receiveEvent)}return window.addEventListener("unload",Ge.receiveEvent),Ge.keyboardState=Hs(65536),Es(Ge.keyboardState,0,65536),Ge.DOMEventToSDLEvent.keydown=768,Ge.DOMEventToSDLEvent.keyup=769,Ge.DOMEventToSDLEvent.keypress=771,Ge.DOMEventToSDLEvent.mousedown=1025,Ge.DOMEventToSDLEvent.mouseup=1026,Ge.DOMEventToSDLEvent.mousemove=1024,Ge.DOMEventToSDLEvent.wheel=1027,Ge.DOMEventToSDLEvent.touchstart=1792,Ge.DOMEventToSDLEvent.touchend=1793,Ge.DOMEventToSDLEvent.touchmove=1794,Ge.DOMEventToSDLEvent.unload=256,Ge.DOMEventToSDLEvent.resize=28673,Ge.DOMEventToSDLEvent.visibilitychange=512,Ge.DOMEventToSDLEvent.focus=512,Ge.DOMEventToSDLEvent.blur=512,Ge.DOMEventToSDLEvent.joystick_axis_motion=1536,Ge.DOMEventToSDLEvent.joystick_button_down=1539,Ge.DOMEventToSDLEvent.joystick_button_up=1540,0}function ji(U){var $=U.getExtension("ANGLE_instanced_arrays");if($)return U.vertexAttribDivisor=function(ye,De){$.vertexAttribDivisorANGLE(ye,De)},U.drawArraysInstanced=function(ye,De,ot,It){$.drawArraysInstancedANGLE(ye,De,ot,It)},U.drawElementsInstanced=function(ye,De,ot,It,Nt){$.drawElementsInstancedANGLE(ye,De,ot,It,Nt)},1}function Di(U){var $=U.getExtension("OES_vertex_array_object");if($)return U.createVertexArray=function(){return $.createVertexArrayOES()},U.deleteVertexArray=function(ye){$.deleteVertexArrayOES(ye)},U.bindVertexArray=function(ye){$.bindVertexArrayOES(ye)},U.isVertexArray=function(ye){return $.isVertexArrayOES(ye)},1}function In(U){var $=U.getExtension("WEBGL_draw_buffers");if($)return U.drawBuffers=function(ye,De){$.drawBuffersWEBGL(ye,De)},1}function kn(U){return!!(U.multiDrawWebgl=U.getExtension("WEBGL_multi_draw"))}var St={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function($){St.lastError||(St.lastError=$)},getNewId:function(U){for(var $=St.counter++,ye=U.length;ye<$;ye++)U[ye]=null;return $},getSource:function(U,$,ye,De){for(var ot="",It=0;It<$;++It){var Nt=De?de[De+It*4>>2]:-1;ot+=me(de[ye+It*4>>2],Nt<0?void 0:Nt)}return ot},createContext:function(U,$){var ye=U.getContext("webgl",$)||U.getContext("experimental-webgl",$);if(!ye)return 0;var De=St.registerContext(ye,$);return De},registerContext:function(U,$){var ye=St.getNewId(St.contexts),De={handle:ye,attributes:$,version:$.majorVersion,GLctx:U};return De.cannotHandleOffsetsInUniformArrayViews=function(ot){function It(pi,mi){var ri=ot.createShader(mi);return ot.shaderSource(ri,pi),ot.compileShader(ri),ri}try{var Nt=ot.createProgram();ot.attachShader(Nt,It("attribute vec4 p;void main(){gl_Position=p;}",35633)),ot.attachShader(Nt,It("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),ot.linkProgram(Nt);var Bt=new Float32Array(8);Bt[4]=1,ot.useProgram(Nt);var yi=ot.getUniformLocation(Nt,"u");return ot.uniform4fv(yi,Bt.subarray(4,8)),!ot.getUniform(Nt,yi)[0]}catch{return!1}}(),U.canvas&&(U.canvas.GLctxObject=De),St.contexts[ye]=De,(typeof $.enableExtensionsByDefault>"u"||$.enableExtensionsByDefault)&&St.initExtensions(De),ye},makeContextCurrent:function(U){return St.currentContext=St.contexts[U],i.ctx=Or=St.currentContext&&St.currentContext.GLctx,!(U&&!Or)},getContext:function(U){return St.contexts[U]},deleteContext:function(U){St.currentContext===St.contexts[U]&&(St.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(St.contexts[U].GLctx.canvas),St.contexts[U]&&St.contexts[U].GLctx.canvas&&(St.contexts[U].GLctx.canvas.GLctxObject=void 0),St.contexts[U]=null},initExtensions:function(U){if(U||(U=St.currentContext),!U.initExtensionsDone){U.initExtensionsDone=!0;var $=U.GLctx;ji($),Di($),In($),$.disjointTimerQueryExt=$.getExtension("EXT_disjoint_timer_query"),kn($);var ye=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],De=$.getSupportedExtensions()||[];De.forEach(function(ot){ye.indexOf(ot)!=-1&&$.getExtension(ot)})}},populateUniformTable:function(U){for(var $=St.programs[U],ye=St.programInfos[U]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},De=ye.uniforms,ot=Or.getProgramParameter($,35718),It=0;It<ot;++It){var Nt=Or.getActiveUniform($,It),Bt=Nt.name;ye.maxUniformLength=Math.max(ye.maxUniformLength,Bt.length+1),Bt.slice(-1)=="]"&&(Bt=Bt.slice(0,Bt.lastIndexOf("[")));var yi=Or.getUniformLocation($,Bt);if(yi){var pi=St.getNewId(St.uniforms);De[Bt]=[Nt.size,pi],St.uniforms[pi]=yi;for(var mi=1;mi<Nt.size;++mi){var ri=Bt+"["+mi+"]";yi=Or.getUniformLocation($,ri),pi=St.getNewId(St.uniforms),St.uniforms[pi]=yi}}}}};function Bn(U,$,ye,De){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(It){i.canvas.addEventListener(It,Ge.receiveEvent,!0)});var ot=i.canvas;return U==0&&$==0&&(U=ot.width,$=ot.height),Ge.addedResizeListener||(Ge.addedResizeListener=!0,Pe.resizeListeners.push(function(It,Nt){Ge.settingVideoMode||Ge.receiveEvent({type:"resize",w:It,h:Nt})})),Ge.settingVideoMode=!0,Pe.setCanvasSize(U,$),Ge.settingVideoMode=!1,Ge.screen&&(Ge.freeSurface(Ge.screen),Z(!Ge.screen)),Ge.GL&&(De=De|67108864),Ge.screen=Ge.makeSurface(U,$,De,!0,"screen"),Ge.screen}function er(U){Z(!Ge.GL);var $=Ge.surfaces[U];if(!(!$.locked||--$.locked>0)){if($.isFlagSet(2097152))Ge.copyIndexedColorData($);else if($.colors)for(var sn=i.canvas.width,Sn=i.canvas.height,dt=$.buffer,ye=$.image.data,m=$.colors,Ri=0;Ri<Sn;Ri++){for(var h=Ri*sn*4,F=0;F<sn;F++){var yi=ce[dt++>>0]*4,dn=h+F*4;ye[dn]=m[yi],ye[dn+1]=m[yi+1],ye[dn+2]=m[yi+2]}dt+=sn*3}else{var ye=$.image.data,De=$.buffer;Z(De%4==0,"Invalid buffer offset: "+De);var ot=De>>2,It=0,Nt=U==Ge.screen,Bt;if(typeof CanvasPixelArray<"u"&&ye instanceof CanvasPixelArray)for(Bt=ye.length;It<Bt;){var yi=de[ot];ye[It]=yi&255,ye[It+1]=yi>>8&255,ye[It+2]=yi>>16&255,ye[It+3]=Nt?255:yi>>24&255,ot++,It+=4}else{var pi=new Uint32Array(ye.buffer);if(Nt&&Ge.defaults.opaqueFrontBuffer){Bt=pi.length,pi.set(de.subarray(ot,ot+Bt));var mi=new Uint8Array(ye.buffer),ri=3,qi=ri+4*Bt;if(Bt%8==0)for(;ri<qi;)mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0,mi[ri]=255,ri=ri+4|0;else for(;ri<qi;)mi[ri]=255,ri=ri+4|0}else pi.set(de.subarray(ot,ot+pi.length))}}$.ctx.putImageData($.image,0,0)}}function Dr(U,$,ye,De){return Ge.blitSurface(U,$,ye,De,!1)}function vr(){return 12032}var Tr=Uint8Array.prototype.copyWithin?function(U,$,ye){ce.copyWithin(U,$,$+ye)}:function(U,$,ye){ce.set(ce.subarray($,$+ye),U)};function zr(){return ce.length}function po(U){try{return W.grow(U-Le.byteLength+65535>>>16),Ze(W.buffer),1}catch{}}function ts(U){U=U>>>0;var $=zr(),ye=65536,De=2147483648;if(U>De)return!1;for(var ot=16777216,It=1;It<=4;It*=2){var Nt=$*(1+.2/It);Nt=Math.min(Nt,U+100663296);var Bt=Math.min(De,be(Math.max(ot,U,Nt),ye)),yi=po(Bt);if(yi)return!0}return!1}var _o={mappings:{},buffers:[null,[],[]],printChar:function(U,$){var ye=_o.buffers[U];$===0||$===10?((U===1?_:v)(Ee(ye,0)),ye.length=0):ye.push($)},varargs:void 0,get:function(){_o.varargs+=4;var U=de[_o.varargs-4>>2];return U},getStr:function(U){var $=me(U);return $},get64:function(U,$){return U}};function is(U){return 0}function al(U,$,ye,De,ot){}function Ro(U,$,ye,De){for(var ot=0,It=0;It<ye;It++){for(var Nt=de[$+It*8>>2],Bt=de[$+(It*8+4)>>2],yi=0;yi<Bt;yi++)_o.printChar(U,ce[Nt+yi]);ot+=Bt}return de[De>>2]=ot,0}var Ft=function(U,$,ye,De){U||(U=this),this.parent=U,this.mount=U.mount,this.mounted=null,this.id=He.nextInode++,this.name=$,this.mode=ye,this.node_ops={},this.stream_ops={},this.rdev=De},tr=365,ur=146;Object.defineProperties(Ft.prototype,{read:{get:function(){return(this.mode&tr)===tr},set:function(U){U?this.mode|=tr:this.mode&=~tr}},write:{get:function(){return(this.mode&ur)===ur},set:function(U){U?this.mode|=ur:this.mode&=~ur}},isFolder:{get:function(){return He.isDir(this.mode)}},isDevice:{get:function(){return He.isChrdev(this.mode)}}}),He.FSNode=Ft,He.staticInit(),i.requestFullscreen=function($,ye){Pe.requestFullscreen($,ye)},i.requestAnimationFrame=function($){Pe.requestAnimationFrame($)},i.setCanvasSize=function($,ye,De){Pe.setCanvasSize($,ye,De)},i.pauseMainLoop=function(){Pe.mainLoop.pause()},i.resumeMainLoop=function(){Pe.mainLoop.resume()},i.getUserMedia=function(){Pe.getUserMedia()},i.createContext=function($,ye,De,ot){return Pe.createContext($,ye,De,ot)};var Or;function Ko(U,$,ye){var De=ye>0?ye:rt(U)+1,ot=new Array(De),It=Ae(U,ot,0,ot.length);return $&&(ot.length=It),ot}function Bo(U){for(var $=[],ye=0;ye<U.length;ye++){var De=U[ye];De>255&&(De&=255),$.push(String.fromCharCode(De))}return $.join("")}var La=typeof atob=="function"?atob:function(U){var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ye="",De,ot,It,Nt,Bt,yi,pi,mi=0;U=U.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Nt=$.indexOf(U.charAt(mi++)),Bt=$.indexOf(U.charAt(mi++)),yi=$.indexOf(U.charAt(mi++)),pi=$.indexOf(U.charAt(mi++)),De=Nt<<2|Bt>>4,ot=(Bt&15)<<4|yi>>2,It=(yi&3)<<6|pi,ye=ye+String.fromCharCode(De),yi!==64&&(ye=ye+String.fromCharCode(ot)),pi!==64&&(ye=ye+String.fromCharCode(It));while(mi<U.length);return ye};function rs(U){try{for(var $=La(U),ye=new Uint8Array($.length),De=0;De<$.length;++De)ye[De]=$.charCodeAt(De);return ye}catch{throw new Error("Converting base64 string to bytes failed.")}}function qs(U){if(!!qn(U))return rs(U.slice(xn.length))}var xs={SDL_CreateRGBSurface:Ht,SDL_Flip:zt,SDL_FreeSurface:ti,SDL_Init:vt,SDL_LockSurface:qe,SDL_SetVideoMode:Bn,SDL_UnlockSurface:er,SDL_UpperBlit:Dr,emscripten_get_sbrk_ptr:vr,emscripten_memcpy_big:Tr,emscripten_resize_heap:ts,fd_close:is,fd_seek:al,fd_write:Ro,getTempRet0:M,memory:W,setTempRet0:k,table:J};Kn();var Pa=i.___wasm_call_ctors=function(){return(Pa=i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};i._WebpToSDL=function(){return(i._WebpToSDL=i.asm.WebpToSDL).apply(null,arguments)};var Es=i._memset=function(){return(Es=i._memset=i.asm.memset).apply(null,arguments)},Ks=i._memcpy=function(){return(Ks=i._memcpy=i.asm.memcpy).apply(null,arguments)},Hs=i._malloc=function(){return(Hs=i._malloc=i.asm.malloc).apply(null,arguments)},Ma=i._free=function(){return(Ma=i._free=i.asm.free).apply(null,arguments)},kl=i.___errno_location=function(){return(kl=i.___errno_location=i.asm.__errno_location).apply(null,arguments)},fu=i.stackSave=function(){return(fu=i.stackSave=i.asm.stackSave).apply(null,arguments)},Cl=i.stackRestore=function(){return(Cl=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},du=i.stackAlloc=function(){return(du=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_vii=function(){return(i.dynCall_vii=i.asm.dynCall_vii).apply(null,arguments)},i.dynCall_vi=function(){return(i.dynCall_vi=i.asm.dynCall_vi).apply(null,arguments)},i.dynCall_ii=function(){return(i.dynCall_ii=i.asm.dynCall_ii).apply(null,arguments)},i.dynCall_iii=function(){return(i.dynCall_iii=i.asm.dynCall_iii).apply(null,arguments)},i.dynCall_iiii=function(){return(i.dynCall_iiii=i.asm.dynCall_iiii).apply(null,arguments)},i.dynCall_iiiiiii=function(){return(i.dynCall_iiiiiii=i.asm.dynCall_iiiiiii).apply(null,arguments)},i.dynCall_viiii=function(){return(i.dynCall_viiii=i.asm.dynCall_viiii).apply(null,arguments)},i.dynCall_viii=function(){return(i.dynCall_viii=i.asm.dynCall_viii).apply(null,arguments)},i.dynCall_viiiiii=function(){return(i.dynCall_viiiiii=i.asm.dynCall_viiiiii).apply(null,arguments)},i.dynCall_viiiii=function(){return(i.dynCall_viiiii=i.asm.dynCall_viiiii).apply(null,arguments)},i.dynCall_viiiiiiiii=function(){return(i.dynCall_viiiiiiiii=i.asm.dynCall_viiiiiiiii).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};var pa=i.__growWasmMemory=function(){return(pa=i.__growWasmMemory=i.asm.__growWasmMemory).apply(null,arguments)};i.cwrap=xe;var ma;function Io(U){this.name="ExitStatus",this.message="Program terminated with exit("+U+")",this.status=U}ee=function U(){ma||ll(),ma||(ee=U)};function ll(U){if(Me>0||(Qe(),Me>0))return;function $(){ma||(ma=!0,i.calledRun=!0,!Q&&(Yt(),si(),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Zt()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),$()},1)):$()}if(i.run=ll,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();ll(),this.Module=i,this.webpToSdl=i.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(U){i.canvas=U},this.Module.doNotCaptureKeyboard=!0}const gP=()=>new Promise(i=>requestAnimationFrame(i));class e1 extends Error{}const yP=i=>/\.webp.*$/i.test(i.src);class _P{constructor({webp:e=new mP,webpSupport:t=dP(),detectWebpImage:n=yP}={}){this.busy=!1,this.cache={},this.webp=e,this.webpSupport=t,this.detectWebpImage=n}async decode(e){if(this.busy)throw new e1("cannot decode when already busy");this.busy=!0;try{await gP();const t=document.createElement("canvas");return this.webp.setCanvas(t),this.webp.webpToSdl(e,e.length),this.busy=!1,t.toDataURL()}catch(t){throw this.busy=!1,t.name=e1.name,t.message=`failed to decode webp image: ${t.message}`,t}}async polyfillImage(e){if(await this.webpSupport)return;const{src:t}=e;if(this.detectWebpImage(e)){if(this.cache[t]){e.src=this.cache[t];return}try{const n=hP(t)?fP(t):await G3(t),l=await this.decode(n);e.src=this.cache[t]=l}catch(n){throw n.name=e1.name,n.message=`failed to polyfill image "${t}": ${n.message}`,n}}}async polyfillDocument({document:e=window.document}={}){if(await this.webpSupport)return null;for(const t of Array.from(e.querySelectorAll("img")))try{await this.polyfillImage(t)}catch(n){throw n.name=e1.name,n.message=`webp image polyfill failed for url "${t.src}": ${n}`,n}}clearCache(){this.cache={}}}var W3={},rm={};rm.byteLength=wP;rm.toByteArray=AP;rm.fromByteArray=CP;var th=[],ec=[],vP=typeof Uint8Array<"u"?Uint8Array:Array,D2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var L0=0,bP=D2.length;L0<bP;++L0)th[L0]=D2[L0],ec[D2.charCodeAt(L0)]=L0;ec["-".charCodeAt(0)]=62;ec["_".charCodeAt(0)]=63;function X3(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function wP(i){var e=X3(i),t=e[0],n=e[1];return(t+n)*3/4-n}function xP(i,e,t){return(e+t)*3/4-t}function AP(i){var e,t=X3(i),n=t[0],l=t[1],u=new vP(xP(i,n,l)),p=0,o=l>0?n-4:n,c;for(c=0;c<o;c+=4)e=ec[i.charCodeAt(c)]<<18|ec[i.charCodeAt(c+1)]<<12|ec[i.charCodeAt(c+2)]<<6|ec[i.charCodeAt(c+3)],u[p++]=e>>16&255,u[p++]=e>>8&255,u[p++]=e&255;return l===2&&(e=ec[i.charCodeAt(c)]<<2|ec[i.charCodeAt(c+1)]>>4,u[p++]=e&255),l===1&&(e=ec[i.charCodeAt(c)]<<10|ec[i.charCodeAt(c+1)]<<4|ec[i.charCodeAt(c+2)]>>2,u[p++]=e>>8&255,u[p++]=e&255),u}function SP(i){return th[i>>18&63]+th[i>>12&63]+th[i>>6&63]+th[i&63]}function kP(i,e,t){for(var n,l=[],u=e;u<t;u+=3)n=(i[u]<<16&16711680)+(i[u+1]<<8&65280)+(i[u+2]&255),l.push(SP(n));return l.join("")}function CP(i){for(var e,t=i.length,n=t%3,l=[],u=16383,p=0,o=t-n;p<o;p+=u)l.push(kP(i,p,p+u>o?o:p+u));return n===1?(e=i[t-1],l.push(th[e>>2]+th[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],l.push(th[e>>10]+th[e>>4&63]+th[e<<2&63]+"=")),l.join("")}var yy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */yy.read=function(i,e,t,n,l){var u,p,o=l*8-n-1,c=(1<<o)-1,g=c>>1,_=-7,v=t?l-1:0,w=t?-1:1,x=i[e+v];for(v+=w,u=x&(1<<-_)-1,x>>=-_,_+=o;_>0;u=u*256+i[e+v],v+=w,_-=8);for(p=u&(1<<-_)-1,u>>=-_,_+=n;_>0;p=p*256+i[e+v],v+=w,_-=8);if(u===0)u=1-g;else{if(u===c)return p?NaN:(x?-1:1)*(1/0);p=p+Math.pow(2,n),u=u-g}return(x?-1:1)*p*Math.pow(2,u-n)};yy.write=function(i,e,t,n,l,u){var p,o,c,g=u*8-l-1,_=(1<<g)-1,v=_>>1,w=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:u-1,C=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,p=_):(p=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-p))<1&&(p--,c*=2),p+v>=1?e+=w/c:e+=w*Math.pow(2,1-v),e*c>=2&&(p++,c/=2),p+v>=_?(o=0,p=_):p+v>=1?(o=(e*c-1)*Math.pow(2,l),p=p+v):(o=e*Math.pow(2,v-1)*Math.pow(2,l),p=0));l>=8;i[t+x]=o&255,x+=C,o/=256,l-=8);for(p=p<<l|o,g+=l;g>0;i[t+x]=p&255,x+=C,p/=256,g-=8);i[t+x-C]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=rm,t=yy,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=o,i.SlowBuffer=O,i.INSPECT_MAX_BYTES=50;const l=2147483647;i.kMaxLength=l,o.TYPED_ARRAY_SUPPORT=u(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const Me=new Uint8Array(1),ee={foo:function(){return 42}};return Object.setPrototypeOf(ee,Uint8Array.prototype),Object.setPrototypeOf(Me,ee),Me.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function p(Me){if(Me>l)throw new RangeError('The value "'+Me+'" is invalid for option "size"');const ee=new Uint8Array(Me);return Object.setPrototypeOf(ee,o.prototype),ee}function o(Me,ee,ae){if(typeof Me=="number"){if(typeof ee=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(Me)}return c(Me,ee,ae)}o.poolSize=8192;function c(Me,ee,ae){if(typeof Me=="string")return w(Me,ee);if(ArrayBuffer.isView(Me))return C(Me);if(Me==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me);if(Ot(Me,ArrayBuffer)||Me&&Ot(Me.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ot(Me,SharedArrayBuffer)||Me&&Ot(Me.buffer,SharedArrayBuffer)))return T(Me,ee,ae);if(typeof Me=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const et=Me.valueOf&&Me.valueOf();if(et!=null&&et!==Me)return o.from(et,ee,ae);const bt=k(Me);if(bt)return bt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Me[Symbol.toPrimitive]=="function")return o.from(Me[Symbol.toPrimitive]("string"),ee,ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me)}o.from=function(Me,ee,ae){return c(Me,ee,ae)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(Me){if(typeof Me!="number")throw new TypeError('"size" argument must be of type number');if(Me<0)throw new RangeError('The value "'+Me+'" is invalid for option "size"')}function _(Me,ee,ae){return g(Me),Me<=0?p(Me):ee!==void 0?typeof ae=="string"?p(Me).fill(ee,ae):p(Me).fill(ee):p(Me)}o.alloc=function(Me,ee,ae){return _(Me,ee,ae)};function v(Me){return g(Me),p(Me<0?0:M(Me)|0)}o.allocUnsafe=function(Me){return v(Me)},o.allocUnsafeSlow=function(Me){return v(Me)};function w(Me,ee){if((typeof ee!="string"||ee==="")&&(ee="utf8"),!o.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);const ae=V(Me,ee)|0;let et=p(ae);const bt=et.write(Me,ee);return bt!==ae&&(et=et.slice(0,bt)),et}function x(Me){const ee=Me.length<0?0:M(Me.length)|0,ae=p(ee);for(let et=0;et<ee;et+=1)ae[et]=Me[et]&255;return ae}function C(Me){if(Ot(Me,Uint8Array)){const ee=new Uint8Array(Me);return T(ee.buffer,ee.byteOffset,ee.byteLength)}return x(Me)}function T(Me,ee,ae){if(ee<0||Me.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(Me.byteLength<ee+(ae||0))throw new RangeError('"length" is outside of buffer bounds');let et;return ee===void 0&&ae===void 0?et=new Uint8Array(Me):ae===void 0?et=new Uint8Array(Me,ee):et=new Uint8Array(Me,ee,ae),Object.setPrototypeOf(et,o.prototype),et}function k(Me){if(o.isBuffer(Me)){const ee=M(Me.length)|0,ae=p(ee);return ae.length===0||Me.copy(ae,0,0,ee),ae}if(Me.length!==void 0)return typeof Me.length!="number"||ai(Me.length)?p(0):x(Me);if(Me.type==="Buffer"&&Array.isArray(Me.data))return x(Me.data)}function M(Me){if(Me>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return Me|0}function O(Me){return+Me!=Me&&(Me=0),o.alloc(+Me)}o.isBuffer=function(ee){return ee!=null&&ee._isBuffer===!0&&ee!==o.prototype},o.compare=function(ee,ae){if(Ot(ee,Uint8Array)&&(ee=o.from(ee,ee.offset,ee.byteLength)),Ot(ae,Uint8Array)&&(ae=o.from(ae,ae.offset,ae.byteLength)),!o.isBuffer(ee)||!o.isBuffer(ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ee===ae)return 0;let et=ee.length,bt=ae.length;for(let Xt=0,fi=Math.min(et,bt);Xt<fi;++Xt)if(ee[Xt]!==ae[Xt]){et=ee[Xt],bt=ae[Xt];break}return et<bt?-1:bt<et?1:0},o.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ee,ae){if(!Array.isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(ee.length===0)return o.alloc(0);let et;if(ae===void 0)for(ae=0,et=0;et<ee.length;++et)ae+=ee[et].length;const bt=o.allocUnsafe(ae);let Xt=0;for(et=0;et<ee.length;++et){let fi=ee[et];if(Ot(fi,Uint8Array))Xt+fi.length>bt.length?(o.isBuffer(fi)||(fi=o.from(fi)),fi.copy(bt,Xt)):Uint8Array.prototype.set.call(bt,fi,Xt);else if(o.isBuffer(fi))fi.copy(bt,Xt);else throw new TypeError('"list" argument must be an Array of Buffers');Xt+=fi.length}return bt};function V(Me,ee){if(o.isBuffer(Me))return Me.length;if(ArrayBuffer.isView(Me)||Ot(Me,ArrayBuffer))return Me.byteLength;if(typeof Me!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Me);const ae=Me.length,et=arguments.length>2&&arguments[2]===!0;if(!et&&ae===0)return 0;let bt=!1;for(;;)switch(ee){case"ascii":case"latin1":case"binary":return ae;case"utf8":case"utf-8":return Yt(Me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae*2;case"hex":return ae>>>1;case"base64":return Ei(Me).length;default:if(bt)return et?-1:Yt(Me).length;ee=(""+ee).toLowerCase(),bt=!0}}o.byteLength=V;function W(Me,ee,ae){let et=!1;if((ee===void 0||ee<0)&&(ee=0),ee>this.length||((ae===void 0||ae>this.length)&&(ae=this.length),ae<=0)||(ae>>>=0,ee>>>=0,ae<=ee))return"";for(Me||(Me="utf8");;)switch(Me){case"hex":return be(this,ee,ae);case"utf8":case"utf-8":return Ae(this,ee,ae);case"ascii":return Pt(this,ee,ae);case"latin1":case"binary":return We(this,ee,ae);case"base64":return me(this,ee,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,ee,ae);default:if(et)throw new TypeError("Unknown encoding: "+Me);Me=(Me+"").toLowerCase(),et=!0}}o.prototype._isBuffer=!0;function J(Me,ee,ae){const et=Me[ee];Me[ee]=Me[ae],Me[ae]=et}o.prototype.swap16=function(){const ee=this.length;if(ee%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ae=0;ae<ee;ae+=2)J(this,ae,ae+1);return this},o.prototype.swap32=function(){const ee=this.length;if(ee%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ae=0;ae<ee;ae+=4)J(this,ae,ae+3),J(this,ae+1,ae+2);return this},o.prototype.swap64=function(){const ee=this.length;if(ee%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ae=0;ae<ee;ae+=8)J(this,ae,ae+7),J(this,ae+1,ae+6),J(this,ae+2,ae+5),J(this,ae+3,ae+4);return this},o.prototype.toString=function(){const ee=this.length;return ee===0?"":arguments.length===0?Ae(this,0,ee):W.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ee){if(!o.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee?!0:o.compare(this,ee)===0},o.prototype.inspect=function(){let ee="";const ae=i.INSPECT_MAX_BYTES;return ee=this.toString("hex",0,ae).replace(/(.{2})/g,"$1 ").trim(),this.length>ae&&(ee+=" ... "),"<Buffer "+ee+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(ee,ae,et,bt,Xt){if(Ot(ee,Uint8Array)&&(ee=o.from(ee,ee.offset,ee.byteLength)),!o.isBuffer(ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ee);if(ae===void 0&&(ae=0),et===void 0&&(et=ee?ee.length:0),bt===void 0&&(bt=0),Xt===void 0&&(Xt=this.length),ae<0||et>ee.length||bt<0||Xt>this.length)throw new RangeError("out of range index");if(bt>=Xt&&ae>=et)return 0;if(bt>=Xt)return-1;if(ae>=et)return 1;if(ae>>>=0,et>>>=0,bt>>>=0,Xt>>>=0,this===ee)return 0;let fi=Xt-bt,xn=et-ae;const qn=Math.min(fi,xn),bn=this.slice(bt,Xt),Gi=ee.slice(ae,et);for(let an=0;an<qn;++an)if(bn[an]!==Gi[an]){fi=bn[an],xn=Gi[an];break}return fi<xn?-1:xn<fi?1:0};function Q(Me,ee,ae,et,bt){if(Me.length===0)return-1;if(typeof ae=="string"?(et=ae,ae=0):ae>2147483647?ae=2147483647:ae<-2147483648&&(ae=-2147483648),ae=+ae,ai(ae)&&(ae=bt?0:Me.length-1),ae<0&&(ae=Me.length+ae),ae>=Me.length){if(bt)return-1;ae=Me.length-1}else if(ae<0)if(bt)ae=0;else return-1;if(typeof ee=="string"&&(ee=o.from(ee,et)),o.isBuffer(ee))return ee.length===0?-1:Z(Me,ee,ae,et,bt);if(typeof ee=="number")return ee=ee&255,typeof Uint8Array.prototype.indexOf=="function"?bt?Uint8Array.prototype.indexOf.call(Me,ee,ae):Uint8Array.prototype.lastIndexOf.call(Me,ee,ae):Z(Me,[ee],ae,et,bt);throw new TypeError("val must be string, number or Buffer")}function Z(Me,ee,ae,et,bt){let Xt=1,fi=Me.length,xn=ee.length;if(et!==void 0&&(et=String(et).toLowerCase(),et==="ucs2"||et==="ucs-2"||et==="utf16le"||et==="utf-16le")){if(Me.length<2||ee.length<2)return-1;Xt=2,fi/=2,xn/=2,ae/=2}function qn(Gi,an){return Xt===1?Gi[an]:Gi.readUInt16BE(an*Xt)}let bn;if(bt){let Gi=-1;for(bn=ae;bn<fi;bn++)if(qn(Me,bn)===qn(ee,Gi===-1?0:bn-Gi)){if(Gi===-1&&(Gi=bn),bn-Gi+1===xn)return Gi*Xt}else Gi!==-1&&(bn-=bn-Gi),Gi=-1}else for(ae+xn>fi&&(ae=fi-xn),bn=ae;bn>=0;bn--){let Gi=!0;for(let an=0;an<xn;an++)if(qn(Me,bn+an)!==qn(ee,an)){Gi=!1;break}if(Gi)return bn}return-1}o.prototype.includes=function(ee,ae,et){return this.indexOf(ee,ae,et)!==-1},o.prototype.indexOf=function(ee,ae,et){return Q(this,ee,ae,et,!0)},o.prototype.lastIndexOf=function(ee,ae,et){return Q(this,ee,ae,et,!1)};function ie(Me,ee,ae,et){ae=Number(ae)||0;const bt=Me.length-ae;et?(et=Number(et),et>bt&&(et=bt)):et=bt;const Xt=ee.length;et>Xt/2&&(et=Xt/2);let fi;for(fi=0;fi<et;++fi){const xn=parseInt(ee.substr(fi*2,2),16);if(ai(xn))return fi;Me[ae+fi]=xn}return fi}function Se(Me,ee,ae,et){return Qt(Yt(ee,Me.length-ae),Me,ae,et)}function xe(Me,ee,ae,et){return Qt(si(ee),Me,ae,et)}function le(Me,ee,ae,et){return Qt(Ei(ee),Me,ae,et)}function Ee(Me,ee,ae,et){return Qt(Zt(ee,Me.length-ae),Me,ae,et)}o.prototype.write=function(ee,ae,et,bt){if(ae===void 0)bt="utf8",et=this.length,ae=0;else if(et===void 0&&typeof ae=="string")bt=ae,et=this.length,ae=0;else if(isFinite(ae))ae=ae>>>0,isFinite(et)?(et=et>>>0,bt===void 0&&(bt="utf8")):(bt=et,et=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xt=this.length-ae;if((et===void 0||et>Xt)&&(et=Xt),ee.length>0&&(et<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");bt||(bt="utf8");let fi=!1;for(;;)switch(bt){case"hex":return ie(this,ee,ae,et);case"utf8":case"utf-8":return Se(this,ee,ae,et);case"ascii":case"latin1":case"binary":return xe(this,ee,ae,et);case"base64":return le(this,ee,ae,et);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,ee,ae,et);default:if(fi)throw new TypeError("Unknown encoding: "+bt);bt=(""+bt).toLowerCase(),fi=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(Me,ee,ae){return ee===0&&ae===Me.length?e.fromByteArray(Me):e.fromByteArray(Me.slice(ee,ae))}function Ae(Me,ee,ae){ae=Math.min(Me.length,ae);const et=[];let bt=ee;for(;bt<ae;){const Xt=Me[bt];let fi=null,xn=Xt>239?4:Xt>223?3:Xt>191?2:1;if(bt+xn<=ae){let qn,bn,Gi,an;switch(xn){case 1:Xt<128&&(fi=Xt);break;case 2:qn=Me[bt+1],(qn&192)===128&&(an=(Xt&31)<<6|qn&63,an>127&&(fi=an));break;case 3:qn=Me[bt+1],bn=Me[bt+2],(qn&192)===128&&(bn&192)===128&&(an=(Xt&15)<<12|(qn&63)<<6|bn&63,an>2047&&(an<55296||an>57343)&&(fi=an));break;case 4:qn=Me[bt+1],bn=Me[bt+2],Gi=Me[bt+3],(qn&192)===128&&(bn&192)===128&&(Gi&192)===128&&(an=(Xt&15)<<18|(qn&63)<<12|(bn&63)<<6|Gi&63,an>65535&&an<1114112&&(fi=an))}}fi===null?(fi=65533,xn=1):fi>65535&&(fi-=65536,et.push(fi>>>10&1023|55296),fi=56320|fi&1023),et.push(fi),bt+=xn}return rt(et)}const pt=4096;function rt(Me){const ee=Me.length;if(ee<=pt)return String.fromCharCode.apply(String,Me);let ae="",et=0;for(;et<ee;)ae+=String.fromCharCode.apply(String,Me.slice(et,et+=pt));return ae}function Pt(Me,ee,ae){let et="";ae=Math.min(Me.length,ae);for(let bt=ee;bt<ae;++bt)et+=String.fromCharCode(Me[bt]&127);return et}function We(Me,ee,ae){let et="";ae=Math.min(Me.length,ae);for(let bt=ee;bt<ae;++bt)et+=String.fromCharCode(Me[bt]);return et}function be(Me,ee,ae){const et=Me.length;(!ee||ee<0)&&(ee=0),(!ae||ae<0||ae>et)&&(ae=et);let bt="";for(let Xt=ee;Xt<ae;++Xt)bt+=Ji[Me[Xt]];return bt}function Le(Me,ee,ae){const et=Me.slice(ee,ae);let bt="";for(let Xt=0;Xt<et.length-1;Xt+=2)bt+=String.fromCharCode(et[Xt]+et[Xt+1]*256);return bt}o.prototype.slice=function(ee,ae){const et=this.length;ee=~~ee,ae=ae===void 0?et:~~ae,ee<0?(ee+=et,ee<0&&(ee=0)):ee>et&&(ee=et),ae<0?(ae+=et,ae<0&&(ae=0)):ae>et&&(ae=et),ae<ee&&(ae=ee);const bt=this.subarray(ee,ae);return Object.setPrototypeOf(bt,o.prototype),bt};function Ue(Me,ee,ae){if(Me%1!==0||Me<0)throw new RangeError("offset is not uint");if(Me+ee>ae)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ee,ae,et){ee=ee>>>0,ae=ae>>>0,et||Ue(ee,ae,this.length);let bt=this[ee],Xt=1,fi=0;for(;++fi<ae&&(Xt*=256);)bt+=this[ee+fi]*Xt;return bt},o.prototype.readUintBE=o.prototype.readUIntBE=function(ee,ae,et){ee=ee>>>0,ae=ae>>>0,et||Ue(ee,ae,this.length);let bt=this[ee+--ae],Xt=1;for(;ae>0&&(Xt*=256);)bt+=this[ee+--ae]*Xt;return bt},o.prototype.readUint8=o.prototype.readUInt8=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,1,this.length),this[ee]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,2,this.length),this[ee]|this[ee+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,2,this.length),this[ee]<<8|this[ee+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+this[ee+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,4,this.length),this[ee]*16777216+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},o.prototype.readBigUInt64LE=Ii(function(ee){ee=ee>>>0,mt(ee,"offset");const ae=this[ee],et=this[ee+7];(ae===void 0||et===void 0)&&At(ee,this.length-8);const bt=ae+this[++ee]*2**8+this[++ee]*2**16+this[++ee]*2**24,Xt=this[++ee]+this[++ee]*2**8+this[++ee]*2**16+et*2**24;return BigInt(bt)+(BigInt(Xt)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ii(function(ee){ee=ee>>>0,mt(ee,"offset");const ae=this[ee],et=this[ee+7];(ae===void 0||et===void 0)&&At(ee,this.length-8);const bt=ae*2**24+this[++ee]*2**16+this[++ee]*2**8+this[++ee],Xt=this[++ee]*2**24+this[++ee]*2**16+this[++ee]*2**8+et;return(BigInt(bt)<<BigInt(32))+BigInt(Xt)}),o.prototype.readIntLE=function(ee,ae,et){ee=ee>>>0,ae=ae>>>0,et||Ue(ee,ae,this.length);let bt=this[ee],Xt=1,fi=0;for(;++fi<ae&&(Xt*=256);)bt+=this[ee+fi]*Xt;return Xt*=128,bt>=Xt&&(bt-=Math.pow(2,8*ae)),bt},o.prototype.readIntBE=function(ee,ae,et){ee=ee>>>0,ae=ae>>>0,et||Ue(ee,ae,this.length);let bt=ae,Xt=1,fi=this[ee+--bt];for(;bt>0&&(Xt*=256);)fi+=this[ee+--bt]*Xt;return Xt*=128,fi>=Xt&&(fi-=Math.pow(2,8*ae)),fi},o.prototype.readInt8=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,1,this.length),this[ee]&128?(255-this[ee]+1)*-1:this[ee]},o.prototype.readInt16LE=function(ee,ae){ee=ee>>>0,ae||Ue(ee,2,this.length);const et=this[ee]|this[ee+1]<<8;return et&32768?et|4294901760:et},o.prototype.readInt16BE=function(ee,ae){ee=ee>>>0,ae||Ue(ee,2,this.length);const et=this[ee+1]|this[ee]<<8;return et&32768?et|4294901760:et},o.prototype.readInt32LE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},o.prototype.readInt32BE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},o.prototype.readBigInt64LE=Ii(function(ee){ee=ee>>>0,mt(ee,"offset");const ae=this[ee],et=this[ee+7];(ae===void 0||et===void 0)&&At(ee,this.length-8);const bt=this[ee+4]+this[ee+5]*2**8+this[ee+6]*2**16+(et<<24);return(BigInt(bt)<<BigInt(32))+BigInt(ae+this[++ee]*2**8+this[++ee]*2**16+this[++ee]*2**24)}),o.prototype.readBigInt64BE=Ii(function(ee){ee=ee>>>0,mt(ee,"offset");const ae=this[ee],et=this[ee+7];(ae===void 0||et===void 0)&&At(ee,this.length-8);const bt=(ae<<24)+this[++ee]*2**16+this[++ee]*2**8+this[++ee];return(BigInt(bt)<<BigInt(32))+BigInt(this[++ee]*2**24+this[++ee]*2**16+this[++ee]*2**8+et)}),o.prototype.readFloatLE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,4,this.length),t.read(this,ee,!0,23,4)},o.prototype.readFloatBE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,4,this.length),t.read(this,ee,!1,23,4)},o.prototype.readDoubleLE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,8,this.length),t.read(this,ee,!0,52,8)},o.prototype.readDoubleBE=function(ee,ae){return ee=ee>>>0,ae||Ue(ee,8,this.length),t.read(this,ee,!1,52,8)};function ce(Me,ee,ae,et,bt,Xt){if(!o.isBuffer(Me))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>bt||ee<Xt)throw new RangeError('"value" argument is out of bounds');if(ae+et>Me.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ee,ae,et,bt){if(ee=+ee,ae=ae>>>0,et=et>>>0,!bt){const xn=Math.pow(2,8*et)-1;ce(this,ee,ae,et,xn,0)}let Xt=1,fi=0;for(this[ae]=ee&255;++fi<et&&(Xt*=256);)this[ae+fi]=ee/Xt&255;return ae+et},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ee,ae,et,bt){if(ee=+ee,ae=ae>>>0,et=et>>>0,!bt){const xn=Math.pow(2,8*et)-1;ce(this,ee,ae,et,xn,0)}let Xt=et-1,fi=1;for(this[ae+Xt]=ee&255;--Xt>=0&&(fi*=256);)this[ae+Xt]=ee/fi&255;return ae+et},o.prototype.writeUint8=o.prototype.writeUInt8=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,1,255,0),this[ae]=ee&255,ae+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,2,65535,0),this[ae]=ee&255,this[ae+1]=ee>>>8,ae+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,2,65535,0),this[ae]=ee>>>8,this[ae+1]=ee&255,ae+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,4,4294967295,0),this[ae+3]=ee>>>24,this[ae+2]=ee>>>16,this[ae+1]=ee>>>8,this[ae]=ee&255,ae+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,4,4294967295,0),this[ae]=ee>>>24,this[ae+1]=ee>>>16,this[ae+2]=ee>>>8,this[ae+3]=ee&255,ae+4};function Ie(Me,ee,ae,et,bt){ni(ee,et,bt,Me,ae,7);let Xt=Number(ee&BigInt(4294967295));Me[ae++]=Xt,Xt=Xt>>8,Me[ae++]=Xt,Xt=Xt>>8,Me[ae++]=Xt,Xt=Xt>>8,Me[ae++]=Xt;let fi=Number(ee>>BigInt(32)&BigInt(4294967295));return Me[ae++]=fi,fi=fi>>8,Me[ae++]=fi,fi=fi>>8,Me[ae++]=fi,fi=fi>>8,Me[ae++]=fi,ae}function de(Me,ee,ae,et,bt){ni(ee,et,bt,Me,ae,7);let Xt=Number(ee&BigInt(4294967295));Me[ae+7]=Xt,Xt=Xt>>8,Me[ae+6]=Xt,Xt=Xt>>8,Me[ae+5]=Xt,Xt=Xt>>8,Me[ae+4]=Xt;let fi=Number(ee>>BigInt(32)&BigInt(4294967295));return Me[ae+3]=fi,fi=fi>>8,Me[ae+2]=fi,fi=fi>>8,Me[ae+1]=fi,fi=fi>>8,Me[ae]=fi,ae+8}o.prototype.writeBigUInt64LE=Ii(function(ee,ae=0){return Ie(this,ee,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ii(function(ee,ae=0){return de(this,ee,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ee,ae,et,bt){if(ee=+ee,ae=ae>>>0,!bt){const qn=Math.pow(2,8*et-1);ce(this,ee,ae,et,qn-1,-qn)}let Xt=0,fi=1,xn=0;for(this[ae]=ee&255;++Xt<et&&(fi*=256);)ee<0&&xn===0&&this[ae+Xt-1]!==0&&(xn=1),this[ae+Xt]=(ee/fi>>0)-xn&255;return ae+et},o.prototype.writeIntBE=function(ee,ae,et,bt){if(ee=+ee,ae=ae>>>0,!bt){const qn=Math.pow(2,8*et-1);ce(this,ee,ae,et,qn-1,-qn)}let Xt=et-1,fi=1,xn=0;for(this[ae+Xt]=ee&255;--Xt>=0&&(fi*=256);)ee<0&&xn===0&&this[ae+Xt+1]!==0&&(xn=1),this[ae+Xt]=(ee/fi>>0)-xn&255;return ae+et},o.prototype.writeInt8=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,1,127,-128),ee<0&&(ee=255+ee+1),this[ae]=ee&255,ae+1},o.prototype.writeInt16LE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,2,32767,-32768),this[ae]=ee&255,this[ae+1]=ee>>>8,ae+2},o.prototype.writeInt16BE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,2,32767,-32768),this[ae]=ee>>>8,this[ae+1]=ee&255,ae+2},o.prototype.writeInt32LE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,4,2147483647,-2147483648),this[ae]=ee&255,this[ae+1]=ee>>>8,this[ae+2]=ee>>>16,this[ae+3]=ee>>>24,ae+4},o.prototype.writeInt32BE=function(ee,ae,et){return ee=+ee,ae=ae>>>0,et||ce(this,ee,ae,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),this[ae]=ee>>>24,this[ae+1]=ee>>>16,this[ae+2]=ee>>>8,this[ae+3]=ee&255,ae+4},o.prototype.writeBigInt64LE=Ii(function(ee,ae=0){return Ie(this,ee,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ii(function(ee,ae=0){return de(this,ee,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(Me,ee,ae,et,bt,Xt){if(ae+et>Me.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("Index out of range")}function Re(Me,ee,ae,et,bt){return ee=+ee,ae=ae>>>0,bt||ge(Me,ee,ae,4),t.write(Me,ee,ae,et,23,4),ae+4}o.prototype.writeFloatLE=function(ee,ae,et){return Re(this,ee,ae,!0,et)},o.prototype.writeFloatBE=function(ee,ae,et){return Re(this,ee,ae,!1,et)};function Ze(Me,ee,ae,et,bt){return ee=+ee,ae=ae>>>0,bt||ge(Me,ee,ae,8),t.write(Me,ee,ae,et,52,8),ae+8}o.prototype.writeDoubleLE=function(ee,ae,et){return Ze(this,ee,ae,!0,et)},o.prototype.writeDoubleBE=function(ee,ae,et){return Ze(this,ee,ae,!1,et)},o.prototype.copy=function(ee,ae,et,bt){if(!o.isBuffer(ee))throw new TypeError("argument should be a Buffer");if(et||(et=0),!bt&&bt!==0&&(bt=this.length),ae>=ee.length&&(ae=ee.length),ae||(ae=0),bt>0&&bt<et&&(bt=et),bt===et||ee.length===0||this.length===0)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if(et<0||et>=this.length)throw new RangeError("Index out of range");if(bt<0)throw new RangeError("sourceEnd out of bounds");bt>this.length&&(bt=this.length),ee.length-ae<bt-et&&(bt=ee.length-ae+et);const Xt=bt-et;return this===ee&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ae,et,bt):Uint8Array.prototype.set.call(ee,this.subarray(et,bt),ae),Xt},o.prototype.fill=function(ee,ae,et,bt){if(typeof ee=="string"){if(typeof ae=="string"?(bt=ae,ae=0,et=this.length):typeof et=="string"&&(bt=et,et=this.length),bt!==void 0&&typeof bt!="string")throw new TypeError("encoding must be a string");if(typeof bt=="string"&&!o.isEncoding(bt))throw new TypeError("Unknown encoding: "+bt);if(ee.length===1){const fi=ee.charCodeAt(0);(bt==="utf8"&&fi<128||bt==="latin1")&&(ee=fi)}}else typeof ee=="number"?ee=ee&255:typeof ee=="boolean"&&(ee=Number(ee));if(ae<0||this.length<ae||this.length<et)throw new RangeError("Out of range index");if(et<=ae)return this;ae=ae>>>0,et=et===void 0?this.length:et>>>0,ee||(ee=0);let Xt;if(typeof ee=="number")for(Xt=ae;Xt<et;++Xt)this[Xt]=ee;else{const fi=o.isBuffer(ee)?ee:o.from(ee,bt),xn=fi.length;if(xn===0)throw new TypeError('The value "'+ee+'" is invalid for argument "value"');for(Xt=0;Xt<et-ae;++Xt)this[Xt+ae]=fi[Xt%xn]}return this};const ut={};function Xe(Me,ee,ae){ut[Me]=class extends ae{constructor(){super(),Object.defineProperty(this,"message",{value:ee.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Me}]`,this.stack,delete this.name}get code(){return Me}set code(bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:bt,writable:!0})}toString(){return`${this.name} [${Me}]: ${this.message}`}}}Xe("ERR_BUFFER_OUT_OF_BOUNDS",function(Me){return Me?`${Me} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Xe("ERR_INVALID_ARG_TYPE",function(Me,ee){return`The "${Me}" argument must be of type number. Received type ${typeof ee}`},TypeError),Xe("ERR_OUT_OF_RANGE",function(Me,ee,ae){let et=`The value of "${Me}" is out of range.`,bt=ae;return Number.isInteger(ae)&&Math.abs(ae)>2**32?bt=$e(String(ae)):typeof ae=="bigint"&&(bt=String(ae),(ae>BigInt(2)**BigInt(32)||ae<-(BigInt(2)**BigInt(32)))&&(bt=$e(bt)),bt+="n"),et+=` It must be ${ee}. Received ${bt}`,et},RangeError);function $e(Me){let ee="",ae=Me.length;const et=Me[0]==="-"?1:0;for(;ae>=et+4;ae-=3)ee=`_${Me.slice(ae-3,ae)}${ee}`;return`${Me.slice(0,ae)}${ee}`}function Dt(Me,ee,ae){mt(ee,"offset"),(Me[ee]===void 0||Me[ee+ae]===void 0)&&At(ee,Me.length-(ae+1))}function ni(Me,ee,ae,et,bt,Xt){if(Me>ae||Me<ee){const fi=typeof ee=="bigint"?"n":"";let xn;throw Xt>3?ee===0||ee===BigInt(0)?xn=`>= 0${fi} and < 2${fi} ** ${(Xt+1)*8}${fi}`:xn=`>= -(2${fi} ** ${(Xt+1)*8-1}${fi}) and < 2 ** ${(Xt+1)*8-1}${fi}`:xn=`>= ${ee}${fi} and <= ${ae}${fi}`,new ut.ERR_OUT_OF_RANGE("value",xn,Me)}Dt(et,bt,Xt)}function mt(Me,ee){if(typeof Me!="number")throw new ut.ERR_INVALID_ARG_TYPE(ee,"number",Me)}function At(Me,ee,ae){throw Math.floor(Me)!==Me?(mt(Me,ae),new ut.ERR_OUT_OF_RANGE(ae||"offset","an integer",Me)):ee<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE(ae||"offset",`>= ${ae?1:0} and <= ${ee}`,Me)}const xt=/[^+/0-9A-Za-z-_]/g;function Qe(Me){if(Me=Me.split("=")[0],Me=Me.trim().replace(xt,""),Me.length<2)return"";for(;Me.length%4!==0;)Me=Me+"=";return Me}function Yt(Me,ee){ee=ee||1/0;let ae;const et=Me.length;let bt=null;const Xt=[];for(let fi=0;fi<et;++fi){if(ae=Me.charCodeAt(fi),ae>55295&&ae<57344){if(!bt){if(ae>56319){(ee-=3)>-1&&Xt.push(239,191,189);continue}else if(fi+1===et){(ee-=3)>-1&&Xt.push(239,191,189);continue}bt=ae;continue}if(ae<56320){(ee-=3)>-1&&Xt.push(239,191,189),bt=ae;continue}ae=(bt-55296<<10|ae-56320)+65536}else bt&&(ee-=3)>-1&&Xt.push(239,191,189);if(bt=null,ae<128){if((ee-=1)<0)break;Xt.push(ae)}else if(ae<2048){if((ee-=2)<0)break;Xt.push(ae>>6|192,ae&63|128)}else if(ae<65536){if((ee-=3)<0)break;Xt.push(ae>>12|224,ae>>6&63|128,ae&63|128)}else if(ae<1114112){if((ee-=4)<0)break;Xt.push(ae>>18|240,ae>>12&63|128,ae>>6&63|128,ae&63|128)}else throw new Error("Invalid code point")}return Xt}function si(Me){const ee=[];for(let ae=0;ae<Me.length;++ae)ee.push(Me.charCodeAt(ae)&255);return ee}function Zt(Me,ee){let ae,et,bt;const Xt=[];for(let fi=0;fi<Me.length&&!((ee-=2)<0);++fi)ae=Me.charCodeAt(fi),et=ae>>8,bt=ae%256,Xt.push(bt),Xt.push(et);return Xt}function Ei(Me){return e.toByteArray(Qe(Me))}function Qt(Me,ee,ae,et){let bt;for(bt=0;bt<et&&!(bt+ae>=ee.length||bt>=Me.length);++bt)ee[bt+ae]=Me[bt];return bt}function Ot(Me,ee){return Me instanceof ee||Me!=null&&Me.constructor!=null&&Me.constructor.name!=null&&Me.constructor.name===ee.name}function ai(Me){return Me!==Me}const Ji=function(){const Me="0123456789abcdef",ee=new Array(256);for(let ae=0;ae<16;++ae){const et=ae*16;for(let bt=0;bt<16;++bt)ee[et+bt]=Me[ae]+Me[bt]}return ee}();function Ii(Me){return typeof BigInt>"u"?$t:Me}function $t(){throw new Error("BigInt not supported")}})(W3);const EP=Math.PI/180,IP=180/Math.PI,TP=i=>{const e=o5(i[0]+1,i[2]),t=o5(i[0],i[2]),n=s5(i[1]+1,i[2]),l=s5(i[1],i[2]);return[t,n,e,l]},o5=(i,e)=>i/Math.pow(2,e)*360-180,s5=(i,e)=>{const t=Math.PI-2*Math.PI*i/Math.pow(2,e);return IP*Math.atan(.5*(Math.exp(t)-Math.exp(-t)))},LP=(i,e,t)=>{const n=PP(i,e,t);return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n},PP=(i,e,t)=>{const n=Math.sin(e*EP),l=Math.pow(2,t);let u=l*(i/360+.5);const p=l*(.5-.25*Math.log((1+n)/(1-n))/Math.PI);return u=u%l,u<0&&(u=u+l),[u,p,t]};class MP{constructor(e,t,n,l){this.url=e,this.tileSize=t,this.minzoom=n,this.maxzoom=l}getValue(e,t){return new Promise((n,l)=>{const u=e[0],p=e[1];let o=t;t>this.maxzoom?o=this.maxzoom:t<this.minzoom&&(o=this.minzoom);const c=LP(u,p,o),g=this.url.replace(/{x}/g,c[0].toString()).replace(/{y}/g,c[1].toString()).replace(/{z}/g,c[2].toString());let _=this.getUrlExtension(g);switch(_||(_="png"),_){case"png":yL.get(g,{responseType:"arraybuffer"}).then(v=>{const w=W3.Buffer.from(v.data,"binary"),x=this.getValueFromPNG(w,c,u,p);n(x)}).catch(v=>l(v));break;case"webp":G3(g).then(v=>{this.getValueFromWEBP(v,c,u,p).then(w=>{n(w)}).catch(w=>l(w))}).catch(v=>l(v));break;default:l(new Error(`Invalid file extension: ${_}`));break}})}getValueFromPNG(e,t,n,l){const p=cP.load(e).decodePixels(),o=this.pixels2rgba(p,t,n,l);return this.calc(o[0],o[1],o[2],o[3])}getValueFromWEBP(e,t,n,l){return new Promise((u,p)=>{new _P().decode(e).then(c=>{const g=this.dataURIConverter(c),_=this.getValueFromPNG(g,t,n,l);u(_)}).catch(c=>p(c))})}pixels2rgba(e,t,n,l){const u=[];for(let _=0;_<e.length;_+=4){const v=e[_],w=e[_+1],x=e[_+2],C=e[_+3],T=[v,w,x,C];u.push(T)}const p=TP(t),o=this.getPixelPosition(n,l,p),c=o[0]+o[1]*this.tileSize;return u[c]}getPixelPosition(e,t,n){const l=this.tileSize,u=this.tileSize,p=n[2]-n[0],o=n[3]-n[1],c=(e-n[0])/p,g=(t-n[1])/o,_=Math.floor(l*c),v=Math.floor(u*(1-g));return[_,v]}getUrlExtension(e){let t=e.split(/[#?]/)[0].split(".").pop();return t&&(t=t.trim()),t}dataURIConverter(e){const t=atob(e.split(",")[1]),n=new Uint8Array(t.length);for(let l=0;l<t.length;l+=1)n[l]=t.charCodeAt(l);return n}}var DP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function l(u){return u instanceof t?u:new t(function(p){p(u)})}return new(t||(t=Promise))(function(u,p){function o(_){try{g(n.next(_))}catch(v){p(v)}}function c(_){try{g(n.throw(_))}catch(v){p(v)}}function g(_){_.done?u(_.value):l(_.value).then(o,c)}g((n=n.apply(i,e||[])).next())})};class OP extends MP{constructor(e,t,n=5,l=15){super(e,t,n,l)}getElevation(e,t){return DP(this,void 0,void 0,function*(){return yield this.getValue(e,t)})}calc(e,t,n){return-1e4+(e*256*256+t*256+n)*.1}}var su=63710088e-1,FP={centimeters:su*100,centimetres:su*100,degrees:su/111325,feet:su*3.28084,inches:su*39.37,kilometers:su/1e3,kilometres:su/1e3,meters:su,metres:su,miles:su/1609.344,millimeters:su*1e3,millimetres:su*1e3,nauticalmiles:su/1852,radians:1,yards:su*1.0936};function RP(i,e){e===void 0&&(e="kilometers");var t=FP[e];if(!t)throw new Error(e+" units is invalid");return i*t}function t1(i){var e=i%360;return e*Math.PI/180}function a5(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function BP(i,e,t){t===void 0&&(t={});var n=a5(i),l=a5(e),u=t1(l[1]-n[1]),p=t1(l[0]-n[0]),o=t1(n[1]),c=t1(l[1]),g=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(p/2),2)*Math.cos(o)*Math.cos(c);return RP(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),t.units)}function zP(i){let e,t,n,l,u;t=new Ru({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[GP]},$$scope:{ctx:i}}}),t.$on("click",i[5]);let p=i[1]&&l5(i);return{c(){e=Li("div"),xi(t.$$.fragment),n=$i(),p&&p.c(),l=hn(),this.h()},l(o){e=Pi(o,"DIV",{class:!0});var c=Ti(e);Ci(t.$$.fragment,c),c.forEach(Oe),n=en(o),p&&p.l(o),l=hn(),this.h()},h(){hi(e,"class","tool-button svelte-7hbpus")},m(o,c){wt(o,e,c),Ai(t,e,null),wt(o,n,c),p&&p.m(o,c),wt(o,l,c),u=!0},p(o,c){const g={};c&524289&&(g.$$scope={dirty:c,ctx:o}),t.$set(g),o[1]?p?(p.p(o,c),c&2&&tt(p,1)):(p=l5(o),p.c(),tt(p,1),p.m(l.parentNode,l)):p&&(Sr(),ct(p,1,1,()=>{p=null}),Ar())},i(o){u||(tt(t.$$.fragment,o),tt(p),u=!0)},o(o){ct(t.$$.fragment,o),ct(p),u=!1},d(o){o&&Oe(e),Si(t),o&&Oe(n),p&&p.d(o),o&&Oe(l)}}}function NP(i){let e;return{c(){e=gn("straighten")},l(t){e=yn(t,"straighten")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function jP(i){let e;return{c(){e=gn("stop_circle")},l(t){e=yn(t,"stop_circle")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function UP(i){let e;function t(u,p){return u[0]?jP:NP}let n=t(i),l=n(i);return{c(){l.c(),e=hn()},l(u){l.l(u),e=hn()},m(u,p){l.m(u,p),wt(u,e,p)},p(u,p){n!==(n=t(u))&&(l.d(1),l=n(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function VP(i){let e;return{c(){e=gn("Start measure")},l(t){e=yn(t,"Start measure")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function qP(i){let e;return{c(){e=gn("Stop measure")},l(t){e=yn(t,"Stop measure")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function HP(i){let e;function t(u,p){return u[0]?qP:VP}let n=t(i),l=n(i);return{c(){l.c(),e=hn()},l(u){l.l(u),e=hn()},m(u,p){l.m(u,p),wt(u,e,p)},p(u,p){n!==(n=t(u))&&(l.d(1),l=n(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function GP(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[UP]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[HP]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&524289&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&524289&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function l5(i){let e,t,n,l,u,p,o;return n=new Ru({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[YP]},$$scope:{ctx:i}}}),n.$on("click",i[6]),p=new Ru({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[JP]},$$scope:{ctx:i}}}),p.$on("click",i[7]),{c(){e=Li("div"),t=Li("div"),xi(n.$$.fragment),l=$i(),u=Li("div"),xi(p.$$.fragment),this.h()},l(c){e=Pi(c,"DIV",{style:!0});var g=Ti(e);t=Pi(g,"DIV",{class:!0});var _=Ti(t);Ci(n.$$.fragment,_),_.forEach(Oe),l=en(g),u=Pi(g,"DIV",{class:!0});var v=Ti(u);Ci(p.$$.fragment,v),v.forEach(Oe),g.forEach(Oe),this.h()},h(){hi(t,"class","sub-button svelte-7hbpus"),hi(u,"class","sub-button svelte-7hbpus"),Ia(e,"display","inline-flex"),Ia(e,"width","100%")},m(c,g){wt(c,e,g),Xi(e,t),Ai(n,t,null),Xi(e,l),Xi(e,u),Ai(p,u,null),o=!0},p(c,g){const _={};g&524288&&(_.$$scope={dirty:g,ctx:c}),n.$set(_);const v={};g&524288&&(v.$$scope={dirty:g,ctx:c}),p.$set(v)},i(c){o||(tt(n.$$.fragment,c),tt(p.$$.fragment,c),o=!0)},o(c){ct(n.$$.fragment,c),ct(p.$$.fragment,c),o=!1},d(c){c&&Oe(e),Si(n),Si(p)}}}function WP(i){let e;return{c(){e=gn("delete")},l(t){e=yn(t,"delete")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function XP(i){let e;return{c(){e=gn("Clear")},l(t){e=yn(t,"Clear")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function YP(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[WP]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[XP]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&524288&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&524288&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function ZP(i){let e;return{c(){e=gn("file_download")},l(t){e=yn(t,"file_download")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function KP(i){let e;return{c(){e=gn("GeoJSON")},l(t){e=yn(t,"GeoJSON")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function JP(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[ZP]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[KP]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&524288&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&524288&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function QP(i){let e,t,n=kr.elevation&&zP(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,[u]){kr.elevation&&n.p(l,u)},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}const P0="elev-controls-source-line",O2="elev-controls-layer-line",F2="elev-controls-layer-symbol",M0="elev-controls-source-symbol";function $P(i,e,t){let n,l;Vo(i,Td,Q=>t(8,n=Q)),Vo(i,Fu,Q=>t(9,l=Q));let u,p=kr.elevation.options.units||"kilometers",o=!1;ws(()=>{if(n)n.coordinates.length>0&&t(1,o=!0);else{const Q={markers:[],coordinates:[],elevations:[]};Td.update(()=>Q)}}),sc(()=>{u===!0&&_()});const c=()=>{u?_():g()},g=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(0,u=!0),l.on("click",w),l.fire("elevation.on"))},_=()=>{t(0,u=!1),l&&(l.getCanvas().style.cursor="",l.off("click",w),l.fire("elevation.off"))},v=()=>{l&&(l.getLayer(O2)&&l.removeLayer(O2),l.getLayer(F2)&&l.removeLayer(F2),l.getSource(P0)&&l.removeSource(P0),l.getSource(M0)&&l.removeSource(M0)),n.markers.forEach(Q=>Q.remove()),t(1,o=!1)},w=Q=>{(!(l!=null&&l.getSource(P0))||!(l!=null&&l.getSource(M0)))&&(v(),x());let Z=l==null?void 0:l.getZoom();Z||(Z=15),Z=Math.round(Z);const ie=[Q.lngLat.lng,Q.lngLat.lat];new OP(kr.elevation.url,kr.elevation.options.tileSize).getElevation(ie,Z).then(xe=>{if(xe||(xe=-1),l){const le=new tc.exports.Marker({draggable:!0}).setLngLat(Q.lngLat).addTo(l);n.markers.push(le),n.coordinates.push([ie[0],ie[1],xe]),n.elevations.push(xe),l.getSource(P0).setData(T(n.coordinates)),l.getSource(M0).setData(k(n.coordinates)),t(1,o=!0)}})},x=()=>{Ea(Td,n.markers=[],n),Ea(Td,n.coordinates=[],n),Ea(Td,n.elevations=[],n),l&&(l.addSource(P0,{type:"geojson",data:T(n.coordinates)}),l.addSource(M0,{type:"geojson",data:k(n.coordinates)}),l.addLayer({id:O2,type:"line",source:P0,paint:{"line-color":kr.elevation.options.mainColor,"line-width":2}}),l.addLayer({id:F2,type:"symbol",source:M0,layout:{"text-field":"{text}","text-font":kr.elevation.options.font,"text-size":kr.elevation.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":kr.elevation.options.mainColor,"text-halo-color":kr.elevation.options.haloColor,"text-halo-width":kr.elevation.options.fontHalo}}))},C=(Q,Z)=>{let ie=`${Q.toFixed(2)} km`;Q<1&&(ie=`${(Q*1e3).toFixed()} m`);let Se="";return Z>0&&(Se=`
alt.${Z}m`),`${ie}${Se}`},T=(Q=[])=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:Q}}),k=(Q=[])=>{let Z=0;return{type:"FeatureCollection",features:Q.map((ie,Se)=>(Se>0&&(Z+=BP(Q[Se-1],Q[Se],{units:p})),{type:"Feature",properties:{id:Se+1,text:C(Z,ie[2]),elevation:ie[2],length:(Z*1e3).toFixed()},geometry:{type:"Point",coordinates:ie}}))}},M=()=>{if(n.coordinates.length===0)return;const Q=k(n.coordinates);if(Q.features.forEach(Se=>{delete Se.properties.text}),n.coordinates.length>1){const Se=T(n.coordinates);Q.features.push(Se)}const Z="measure_result.geojson",ie=JSON.stringify(Q);O(Z,ie)},O=(Q,Z)=>{const ie=new Blob([Z],{type:"text/plain"}),Se=document.createElement("a");Se.href=URL.createObjectURL(ie),Se.setAttribute("download",Q),Se.dispatchEvent(new MouseEvent("click"))};return[u,o,c,v,M,()=>c(),()=>v(),()=>M()]}class eM extends fr{constructor(e){super(),dr(this,e,$P,QP,hr,{})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var R2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},tM={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},u5={LABEL_SCALE:.75},iM=["pattern","min","max","required","step","minlength","maxlength"],nM=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var c5=["mousedown","touchstart"],h5=["click","keydown"],rM=function(i){Ha(e,i);function e(t,n){n===void 0&&(n={});var l=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return l.isFocused=!1,l.receivedUserInput=!1,l.valid=!0,l.useNativeValidation=!0,l.validateOnValueChange=!0,l.helperText=n.helperText,l.characterCounter=n.characterCounter,l.leadingIcon=n.leadingIcon,l.trailingIcon=n.trailingIcon,l.inputFocusHandler=function(){l.activateFocus()},l.inputBlurHandler=function(){l.deactivateFocus()},l.inputInputHandler=function(){l.handleInput()},l.setPointerXOffset=function(u){l.setTransformOrigin(u)},l.textFieldInteractionHandler=function(){l.handleTextFieldInteraction()},l.validationAttributeChangeHandler=function(u){l.handleValidationAttributeChange(u)},l}return Object.defineProperty(e,"cssClasses",{get:function(){return tM},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return R2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return u5},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat",{get:function(){var t=this.getNativeInput().type;return nM.indexOf(t)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t,n,l,u;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var p=Ec(c5),o=p.next();!o.done;o=p.next()){var c=o.value;this.adapter.registerInputInteractionHandler(c,this.setPointerXOffset)}}catch(v){t={error:v}}finally{try{o&&!o.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}try{for(var g=Ec(h5),_=g.next();!_.done;_=g.next()){var c=_.value;this.adapter.registerTextFieldInteractionHandler(c,this.textFieldInteractionHandler)}}catch(v){l={error:v}}finally{try{_&&!_.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},e.prototype.destroy=function(){var t,n,l,u;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var p=Ec(c5),o=p.next();!o.done;o=p.next()){var c=o.value;this.adapter.deregisterInputInteractionHandler(c,this.setPointerXOffset)}}catch(v){t={error:v}}finally{try{o&&!o.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}try{for(var g=Ec(h5),_=g.next();!_.done;_=g.next()){var c=_.value;this.adapter.deregisterTextFieldInteractionHandler(c,this.textFieldInteractionHandler)}}catch(v){l={error:v}}finally{try{_&&!_.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},e.prototype.handleTextFieldInteraction=function(){var t=this.adapter.getNativeInput();t&&t.disabled||(this.receivedUserInput=!0)},e.prototype.handleValidationAttributeChange=function(t){var n=this;t.some(function(l){return iM.indexOf(l)>-1?(n.styleValidity(!0),n.adapter.setLabelRequired(n.getNativeInput().required),!0):!1}),t.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},e.prototype.notchOutline=function(t){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(t){var n=this.adapter.getLabelWidth()*u5.LABEL_SCALE;this.adapter.notchOutline(n)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},e.prototype.setTransformOrigin=function(t){if(!(this.isDisabled()||this.adapter.hasOutline())){var n=t.touches,l=n?n[0]:t,u=l.target.getBoundingClientRect(),p=l.clientX-u.left;this.adapter.setLineRippleTransformOrigin(p)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var t=this.isValid();this.styleValidity(t),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},e.prototype.getValue=function(){return this.getNativeInput().value},e.prototype.setValue=function(t){if(this.getValue()!==t&&(this.getNativeInput().value=t),this.setcharacterCounter(t.length),this.validateOnValueChange){var n=this.isValid();this.styleValidity(n)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},e.prototype.setValid=function(t){this.valid=t,this.styleValidity(t);var n=!t&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(n)},e.prototype.setValidateOnValueChange=function(t){this.validateOnValueChange=t},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},e.prototype.setUseNativeValidation=function(t){this.useNativeValidation=t},e.prototype.isDisabled=function(){return this.getNativeInput().disabled},e.prototype.setDisabled=function(t){this.getNativeInput().disabled=t,this.styleDisabled(t)},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.setTrailingIconAriaLabel=function(t){this.trailingIcon&&this.trailingIcon.setAriaLabel(t)},e.prototype.setTrailingIconContent=function(t){this.trailingIcon&&this.trailingIcon.setContent(t)},e.prototype.setcharacterCounter=function(t){if(!!this.characterCounter){var n=this.getNativeInput().maxLength;if(n===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(t,n)}},e.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},e.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},e.prototype.styleValidity=function(t){var n=e.cssClasses.INVALID;if(t?this.adapter.removeClass(n):this.adapter.addClass(n),this.helperText){this.helperText.setValidity(t);var l=this.helperText.isValidation();if(!l)return;var u=this.helperText.isVisible(),p=this.helperText.getId();u&&p?this.adapter.setInputAttr(R2.ARIA_DESCRIBEDBY,p):this.adapter.removeInputAttr(R2.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused=function(t){var n=e.cssClasses.FOCUSED;t?this.adapter.addClass(n):this.adapter.removeClass(n)},e.prototype.styleDisabled=function(t){var n=e.cssClasses,l=n.DISABLED,u=n.INVALID;t?(this.adapter.addClass(l),this.adapter.removeClass(u)):this.adapter.removeClass(l),this.leadingIcon&&this.leadingIcon.setDisabled(t),this.trailingIcon&&this.trailingIcon.setDisabled(t)},e.prototype.styleFloating=function(t){var n=e.cssClasses.LABEL_FLOATING;t?this.adapter.addClass(n):this.adapter.removeClass(n)},e.prototype.getNativeInput=function(){var t=this.adapter?this.adapter.getNativeInput():null;return t||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(ql);const oM=da({class:"mdc-text-field-helper-line",component:vf}),sM=da({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:bf}),aM=da({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:bf});function lM(i){let e,t,n,l,u,p=[{class:t=Hn({[i[1]]:!0,"mdc-text-field__input":!0})},{type:i[2]},{placeholder:i[3]},i[4],i[6],i[10]],o={};for(let c=0;c<p.length;c+=1)o=Ni(o,p[c]);return{c(){e=Li("input"),this.h()},l(c){e=Pi(c,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){Un(e,o)},m(c,g){wt(c,e,g),e.autofocus&&e.focus(),i[26](e),l||(u=[Gn(n=go.call(null,e,i[0])),Gn(i[7].call(null,e)),Vn(e,"input",i[27]),Vn(e,"change",i[9]),Vn(e,"blur",i[24]),Vn(e,"focus",i[25])],l=!0)},p(c,[g]){Un(e,o=cr(p,[g&2&&t!==(t=Hn({[c[1]]:!0,"mdc-text-field__input":!0}))&&{class:t},g&4&&{type:c[2]},g&8&&{placeholder:c[3]},g&16&&c[4],g&64&&c[6],g&1024&&c[10]])),n&&Zr(n.update)&&g&1&&n.update.call(null,c[0])},i:Co,o:Co,d(c){c&&Oe(e),i[26](null),l=!1,bo(u)}}}function uM(i){if(i===""){const e=new Number(Number.NaN);return e.length=0,e}return+i}function cM(i,e,t){const n=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=On(e,n);const u=io(to());let p=()=>{};function o(be){return be===p}let{use:c=[]}=e,{class:g=""}=e,{type:_="text"}=e,{placeholder:v=" "}=e,{value:w=p}=e;const x=o(w);x&&(w="");let{files:C=null}=e,{dirty:T=!1}=e,{invalid:k=!1}=e,{updateInvalid:M=!0}=e,{emptyValueNull:O=w===null}=e;x&&O&&(w=null);let{emptyValueUndefined:V=w===void 0}=e;x&&V&&(w=void 0);let W,J={},Q={};ws(()=>{M&&t(14,k=W.matches(":invalid"))});function Z(be){if(_==="file"){t(12,C=be.currentTarget.files);return}if(be.currentTarget.value===""&&O){t(11,w=null);return}if(be.currentTarget.value===""&&V){t(11,w=void 0);return}switch(_){case"number":case"range":t(11,w=uM(be.currentTarget.value));break;default:t(11,w=be.currentTarget.value);break}}function ie(be){(_==="file"||_==="range")&&Z(be),t(13,T=!0),M&&t(14,k=W.matches(":invalid"))}function Se(be){var Le;return be in J?(Le=J[be])!==null&&Le!==void 0?Le:null:Ae().getAttribute(be)}function xe(be,Le){J[be]!==Le&&t(6,J[be]=Le,J)}function le(be){(!(be in J)||J[be]!=null)&&t(6,J[be]=void 0,J)}function Ee(){Ae().focus()}function me(){Ae().blur()}function Ae(){return W}function pt(be){Jf.call(this,i,be)}function rt(be){Jf.call(this,i,be)}function Pt(be){pn[be?"unshift":"push"](()=>{W=be,t(5,W)})}const We=be=>_!=="file"&&Z(be);return i.$$set=be=>{e=Ni(Ni({},e),$r(be)),t(10,l=On(e,n)),"use"in be&&t(0,c=be.use),"class"in be&&t(1,g=be.class),"type"in be&&t(2,_=be.type),"placeholder"in be&&t(3,v=be.placeholder),"value"in be&&t(11,w=be.value),"files"in be&&t(12,C=be.files),"dirty"in be&&t(13,T=be.dirty),"invalid"in be&&t(14,k=be.invalid),"updateInvalid"in be&&t(15,M=be.updateInvalid),"emptyValueNull"in be&&t(16,O=be.emptyValueNull),"emptyValueUndefined"in be&&t(17,V=be.emptyValueUndefined)},i.$$.update=()=>{i.$$.dirty&2068&&(_==="file"?(delete Q.value,t(4,Q),t(2,_),t(11,w)):t(4,Q.value=w==null?"":w,Q))},[c,g,_,v,Q,W,J,u,Z,ie,l,w,C,T,k,M,O,V,Se,xe,le,Ee,me,Ae,pt,rt,Pt,We]}class hM extends fr{constructor(e){super(),dr(this,e,cM,lM,hr,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function fM(i){let e,t,n,l,u,p,o=[{class:t=Hn({[i[2]]:!0,"mdc-text-field__input":!0})},{style:n=`${i[4]?"":"resize: none; "}${i[3]}`},i[6],i[9]],c={};for(let g=0;g<o.length;g+=1)c=Ni(c,o[g]);return{c(){e=Li("textarea"),this.h()},l(g){e=Pi(g,"TEXTAREA",{class:!0,style:!0}),Ti(e).forEach(Oe),this.h()},h(){Un(e,c)},m(g,_){wt(g,e,_),e.autofocus&&e.focus(),i[21](e),td(e,i[0]),u||(p=[Gn(l=go.call(null,e,i[1])),Gn(i[7].call(null,e)),Vn(e,"change",i[8]),Vn(e,"blur",i[19]),Vn(e,"focus",i[20]),Vn(e,"input",i[22])],u=!0)},p(g,[_]){Un(e,c=cr(o,[_&4&&t!==(t=Hn({[g[2]]:!0,"mdc-text-field__input":!0}))&&{class:t},_&24&&n!==(n=`${g[4]?"":"resize: none; "}${g[3]}`)&&{style:n},_&64&&g[6],_&512&&g[9]])),l&&Zr(l.update)&&_&2&&l.update.call(null,g[1]),_&1&&td(e,g[0])},i:Co,o:Co,d(g){g&&Oe(e),i[21](null),u=!1,bo(p)}}}function dM(i,e,t){const n=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=On(e,n);const u=io(to());let{use:p=[]}=e,{class:o=""}=e,{style:c=""}=e,{value:g=""}=e,{dirty:_=!1}=e,{invalid:v=!1}=e,{updateInvalid:w=!0}=e,{resizable:x=!0}=e,C,T={};ws(()=>{w&&t(11,v=C.matches(":invalid"))});function k(){t(10,_=!0),w&&t(11,v=C.matches(":invalid"))}function M(le){var Ee;return le in T?(Ee=T[le])!==null&&Ee!==void 0?Ee:null:Q().getAttribute(le)}function O(le,Ee){T[le]!==Ee&&t(6,T[le]=Ee,T)}function V(le){(!(le in T)||T[le]!=null)&&t(6,T[le]=void 0,T)}function W(){Q().focus()}function J(){Q().blur()}function Q(){return C}function Z(le){Jf.call(this,i,le)}function ie(le){Jf.call(this,i,le)}function Se(le){pn[le?"unshift":"push"](()=>{C=le,t(5,C)})}function xe(){g=this.value,t(0,g)}return i.$$set=le=>{e=Ni(Ni({},e),$r(le)),t(9,l=On(e,n)),"use"in le&&t(1,p=le.use),"class"in le&&t(2,o=le.class),"style"in le&&t(3,c=le.style),"value"in le&&t(0,g=le.value),"dirty"in le&&t(10,_=le.dirty),"invalid"in le&&t(11,v=le.invalid),"updateInvalid"in le&&t(12,w=le.updateInvalid),"resizable"in le&&t(4,x=le.resizable)},[g,p,o,c,x,C,T,u,k,l,_,v,w,M,O,V,W,J,Q,Z,ie,Se,xe]}class pM extends fr{constructor(e){super(),dr(this,e,dM,fM,hr,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const mM=i=>({}),f5=i=>({}),gM=i=>({}),d5=i=>({}),yM=i=>({}),p5=i=>({}),_M=i=>({}),m5=i=>({}),vM=i=>({}),g5=i=>({}),bM=i=>({}),y5=i=>({}),wM=i=>({}),_5=i=>({}),xM=i=>({}),v5=i=>({}),AM=i=>({}),b5=i=>({}),SM=i=>({}),w5=i=>({}),kM=i=>({}),x5=i=>({}),CM=i=>({}),A5=i=>({});function EM(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C;const T=i[51].label,k=nr(T,i,i[90],g5);n=new b1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[TM]},$$scope:{ctx:i}}});const M=i[51].default,O=nr(M,i,i[90],null);p=new b1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[LM]},$$scope:{ctx:i}}});const V=i[51].ripple,W=nr(V,i,i[90],d5);let J=[{class:c=Hn({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||!i[42].label,"mdc-text-field--with-leading-icon":i[42].leadingIcon,"mdc-text-field--with-trailing-icon":i[42].trailingIcon,"mdc-text-field--invalid":i[1],...i[25]})},{style:g=Object.entries(i[26]).map(O5).concat([i[10]]).join(" ")},ah(i[41],["input$","label$","ripple$","outline$","helperLine$"])],Q={};for(let Z=0;Z<J.length;Z+=1)Q=Ni(Q,J[Z]);return{c(){e=Li("div"),k&&k.c(),t=$i(),xi(n.$$.fragment),l=$i(),O&&O.c(),u=$i(),xi(p.$$.fragment),o=$i(),W&&W.c(),this.h()},l(Z){e=Pi(Z,"DIV",{class:!0,style:!0});var ie=Ti(e);k&&k.l(ie),t=en(ie),Ci(n.$$.fragment,ie),l=en(ie),O&&O.l(ie),u=en(ie),Ci(p.$$.fragment,ie),o=en(ie),W&&W.l(ie),ie.forEach(Oe),this.h()},h(){Un(e,Q)},m(Z,ie){wt(Z,e,ie),k&&k.m(e,null),Xi(e,t),Ai(n,e,null),Xi(e,l),O&&O.m(e,null),Xi(e,u),Ai(p,e,null),Xi(e,o),W&&W.m(e,null),i[80](e),w=!0,x||(C=[Gn(_=lh.call(null,e,{ripple:i[11],unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40]})),Gn(v=go.call(null,e,i[8])),Gn(i[34].call(null,e)),Vn(e,"SMUITextfieldLeadingIcon:mount",i[81]),Vn(e,"SMUITextfieldLeadingIcon:unmount",i[82]),Vn(e,"SMUITextfieldTrailingIcon:mount",i[83]),Vn(e,"SMUITextfieldTrailingIcon:unmount",i[84])],x=!0)},p(Z,ie){k&&k.p&&(!w||ie[2]&268435456)&&rr(k,T,Z,Z[90],w?sr(T,Z[90],ie,vM):or(Z[90]),g5);const Se={};ie[2]&268435456&&(Se.$$scope={dirty:ie,ctx:Z}),n.$set(Se),O&&O.p&&(!w||ie[2]&268435456)&&rr(O,M,Z,Z[90],w?sr(M,Z[90],ie,null):or(Z[90]),null);const xe={};ie[2]&268435456&&(xe.$$scope={dirty:ie,ctx:Z}),p.$set(xe),W&&W.p&&(!w||ie[2]&268435456)&&rr(W,V,Z,Z[90],w?sr(V,Z[90],ie,gM):or(Z[90]),d5),Un(e,Q=cr(J,[(!w||ie[0]&33673730|ie[1]&2048&&c!==(c=Hn({[Z[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":Z[12],"mdc-text-field--textarea":Z[14],"mdc-text-field--filled":Z[15]==="filled","mdc-text-field--outlined":Z[15]==="outlined","smui-text-field--standard":Z[15]==="standard"&&!Z[14],"mdc-text-field--no-label":Z[16]||!Z[42].label,"mdc-text-field--with-leading-icon":Z[42].leadingIcon,"mdc-text-field--with-trailing-icon":Z[42].trailingIcon,"mdc-text-field--invalid":Z[1],...Z[25]})))&&{class:c},(!w||ie[0]&67109888&&g!==(g=Object.entries(Z[26]).map(O5).concat([Z[10]]).join(" ")))&&{style:g},ie[1]&1024&&ah(Z[41],["input$","label$","ripple$","outline$","helperLine$"])])),_&&Zr(_.update)&&ie[0]&2048&&_.update.call(null,{ripple:Z[11],unbounded:!1,addClass:Z[38],removeClass:Z[39],addStyle:Z[40]}),v&&Zr(v.update)&&ie[0]&256&&v.update.call(null,Z[8])},i(Z){w||(tt(k,Z),tt(n.$$.fragment,Z),tt(O,Z),tt(p.$$.fragment,Z),tt(W,Z),w=!0)},o(Z){ct(k,Z),ct(n.$$.fragment,Z),ct(O,Z),ct(p.$$.fragment,Z),ct(W,Z),w=!1},d(Z){Z&&Oe(e),k&&k.d(Z),Si(n),O&&O.d(Z),Si(p),W&&W.d(Z),i[80](null),x=!1,bo(C)}}}function IM(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C,T,k,M,O,V=!i[14]&&i[15]!=="outlined"&&S5(i),W=(i[14]||i[15]==="outlined")&&E5(i);l=new b1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[OM]},$$scope:{ctx:i}}});const J=i[51].default,Q=nr(J,i,i[90],null),Z=[RM,FM],ie=[];function Se(me,Ae){return me[14]&&typeof me[0]=="string"?0:1}o=Se(i),c=ie[o]=Z[o](i),_=new b1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[NM]},$$scope:{ctx:i}}});let xe=!i[14]&&i[15]!=="outlined"&&i[11]&&P5(i),le=[{class:w=Hn({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||i[17]==null&&!i[42].label,"mdc-text-field--label-floating":i[28]||i[0]!=null&&i[0]!=="","mdc-text-field--with-leading-icon":i[35](i[22])?i[42].leadingIcon:i[22],"mdc-text-field--with-trailing-icon":i[35](i[23])?i[42].trailingIcon:i[23],"mdc-text-field--with-internal-counter":i[14]&&i[42].internalCounter,"mdc-text-field--invalid":i[1],...i[25]})},{style:x=Object.entries(i[26]).map(D5).concat([i[10]]).join(" ")},{for:void 0},ah(i[41],["input$","label$","ripple$","outline$","helperLine$"])],Ee={};for(let me=0;me<le.length;me+=1)Ee=Ni(Ee,le[me]);return{c(){e=Li("label"),V&&V.c(),t=$i(),W&&W.c(),n=$i(),xi(l.$$.fragment),u=$i(),Q&&Q.c(),p=$i(),c.c(),g=$i(),xi(_.$$.fragment),v=$i(),xe&&xe.c(),this.h()},l(me){e=Pi(me,"LABEL",{class:!0,style:!0,for:!0});var Ae=Ti(e);V&&V.l(Ae),t=en(Ae),W&&W.l(Ae),n=en(Ae),Ci(l.$$.fragment,Ae),u=en(Ae),Q&&Q.l(Ae),p=en(Ae),c.l(Ae),g=en(Ae),Ci(_.$$.fragment,Ae),v=en(Ae),xe&&xe.l(Ae),Ae.forEach(Oe),this.h()},h(){Un(e,Ee)},m(me,Ae){wt(me,e,Ae),V&&V.m(e,null),Xi(e,t),W&&W.m(e,null),Xi(e,n),Ai(l,e,null),Xi(e,u),Q&&Q.m(e,null),Xi(e,p),ie[o].m(e,null),Xi(e,g),Ai(_,e,null),Xi(e,v),xe&&xe.m(e,null),i[73](e),k=!0,M||(O=[Gn(C=lh.call(null,e,{ripple:!i[14]&&i[15]==="filled",unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40],eventTarget:i[33],activeTarget:i[33],initPromise:i[37]})),Gn(T=go.call(null,e,i[8])),Gn(i[34].call(null,e)),Vn(e,"SMUITextfieldLeadingIcon:mount",i[74]),Vn(e,"SMUITextfieldLeadingIcon:unmount",i[75]),Vn(e,"SMUITextfieldTrailingIcon:mount",i[76]),Vn(e,"SMUITextfieldTrailingIcon:unmount",i[77]),Vn(e,"SMUITextfieldCharacterCounter:mount",i[78]),Vn(e,"SMUITextfieldCharacterCounter:unmount",i[79])],M=!0)},p(me,Ae){!me[14]&&me[15]!=="outlined"?V?(V.p(me,Ae),Ae[0]&49152&&tt(V,1)):(V=S5(me),V.c(),tt(V,1),V.m(e,t)):V&&(Sr(),ct(V,1,1,()=>{V=null}),Ar()),me[14]||me[15]==="outlined"?W?(W.p(me,Ae),Ae[0]&49152&&tt(W,1)):(W=E5(me),W.c(),tt(W,1),W.m(e,n)):W&&(Sr(),ct(W,1,1,()=>{W=null}),Ar());const pt={};Ae[2]&268435456&&(pt.$$scope={dirty:Ae,ctx:me}),l.$set(pt),Q&&Q.p&&(!k||Ae[2]&268435456)&&rr(Q,J,me,me[90],k?sr(J,me[90],Ae,null):or(me[90]),null);let rt=o;o=Se(me),o===rt?ie[o].p(me,Ae):(Sr(),ct(ie[rt],1,1,()=>{ie[rt]=null}),Ar(),c=ie[o],c?c.p(me,Ae):(c=ie[o]=Z[o](me),c.c()),tt(c,1),c.m(e,g));const Pt={};Ae[2]&268435456&&(Pt.$$scope={dirty:Ae,ctx:me}),_.$set(Pt),!me[14]&&me[15]!=="outlined"&&me[11]?xe?(xe.p(me,Ae),Ae[0]&51200&&tt(xe,1)):(xe=P5(me),xe.c(),tt(xe,1),xe.m(e,null)):xe&&(Sr(),ct(xe,1,1,()=>{xe=null}),Ar()),Un(e,Ee=cr(le,[(!k||Ae[0]&314823171|Ae[1]&2048&&w!==(w=Hn({[me[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":me[12],"mdc-text-field--textarea":me[14],"mdc-text-field--filled":me[15]==="filled","mdc-text-field--outlined":me[15]==="outlined","smui-text-field--standard":me[15]==="standard"&&!me[14],"mdc-text-field--no-label":me[16]||me[17]==null&&!me[42].label,"mdc-text-field--label-floating":me[28]||me[0]!=null&&me[0]!=="","mdc-text-field--with-leading-icon":me[35](me[22])?me[42].leadingIcon:me[22],"mdc-text-field--with-trailing-icon":me[35](me[23])?me[42].trailingIcon:me[23],"mdc-text-field--with-internal-counter":me[14]&&me[42].internalCounter,"mdc-text-field--invalid":me[1],...me[25]})))&&{class:w},(!k||Ae[0]&67109888&&x!==(x=Object.entries(me[26]).map(D5).concat([me[10]]).join(" ")))&&{style:x},{for:void 0},Ae[1]&1024&&ah(me[41],["input$","label$","ripple$","outline$","helperLine$"])])),C&&Zr(C.update)&&Ae[0]&49152|Ae[1]&4&&C.update.call(null,{ripple:!me[14]&&me[15]==="filled",unbounded:!1,addClass:me[38],removeClass:me[39],addStyle:me[40],eventTarget:me[33],activeTarget:me[33],initPromise:me[37]}),T&&Zr(T.update)&&Ae[0]&256&&T.update.call(null,me[8])},i(me){k||(tt(V),tt(W),tt(l.$$.fragment,me),tt(Q,me),tt(c),tt(_.$$.fragment,me),tt(xe),k=!0)},o(me){ct(V),ct(W),ct(l.$$.fragment,me),ct(Q,me),ct(c),ct(_.$$.fragment,me),ct(xe),k=!1},d(me){me&&Oe(e),V&&V.d(),W&&W.d(),Si(l),Q&&Q.d(me),ie[o].d(),Si(_),xe&&xe.d(),i[73](null),M=!1,bo(O)}}}function TM(i){let e;const t=i[51].leadingIcon,n=nr(t,i,i[90],m5);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&268435456)&&rr(n,t,l,l[90],e?sr(t,l[90],u,_M):or(l[90]),m5)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function LM(i){let e;const t=i[51].trailingIcon,n=nr(t,i,i[90],p5);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&268435456)&&rr(n,t,l,l[90],e?sr(t,l[90],u,yM):or(l[90]),p5)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function S5(i){let e,t,n,l=i[15]==="filled"&&k5(),u=!i[16]&&(i[17]!=null||i[42].label)&&C5(i);return{c(){l&&l.c(),e=$i(),u&&u.c(),t=hn()},l(p){l&&l.l(p),e=en(p),u&&u.l(p),t=hn()},m(p,o){l&&l.m(p,o),wt(p,e,o),u&&u.m(p,o),wt(p,t,o),n=!0},p(p,o){p[15]==="filled"?l||(l=k5(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),!p[16]&&(p[17]!=null||p[42].label)?u?(u.p(p,o),o[0]&196608|o[1]&2048&&tt(u,1)):(u=C5(p),u.c(),tt(u,1),u.m(t.parentNode,t)):u&&(Sr(),ct(u,1,1,()=>{u=null}),Ar())},i(p){n||(tt(u),n=!0)},o(p){ct(u),n=!1},d(p){l&&l.d(p),p&&Oe(e),u&&u.d(p),p&&Oe(t)}}}function k5(i){let e;return{c(){e=Li("span"),this.h()},l(t){e=Pi(t,"SPAN",{class:!0}),Ti(e).forEach(Oe),this.h()},h(){hi(e,"class","mdc-text-field__ripple")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function C5(i){let e,t;const n=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},Jr(i[41],"label$")];let l={$$slots:{default:[PM]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new F1({props:l}),i[52](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[0]&268443649|p[1]&1024?cr(n,[p[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},p[0]&8192&&{required:u[13]},n[2],p[1]&1024&&fo(Jr(u[41],"label$"))]):{};p[0]&131072|p[2]&268435456&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[52](null),Si(e,u)}}}function PM(i){let e=(i[17]==null?"":i[17])+"",t,n;const l=i[51].label,u=nr(l,i,i[90],A5);return{c(){t=gn(e),u&&u.c()},l(p){t=yn(p,e),u&&u.l(p)},m(p,o){wt(p,t,o),u&&u.m(p,o),n=!0},p(p,o){(!n||o[0]&131072)&&e!==(e=(p[17]==null?"":p[17])+"")&&bs(t,e),u&&u.p&&(!n||o[2]&268435456)&&rr(u,l,p,p[90],n?sr(l,p[90],o,CM):or(p[90]),A5)},i(p){n||(tt(u,p),n=!0)},o(p){ct(u,p),n=!1},d(p){p&&Oe(t),u&&u.d(p)}}}function E5(i){let e,t;const n=[{noLabel:i[16]||i[17]==null&&!i[42].label},Jr(i[41],"outline$")];let l={$$slots:{default:[DM]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new N4({props:l}),i[54](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[0]&196608|p[1]&3072?cr(n,[p[0]&196608|p[1]&2048&&{noLabel:u[16]||u[17]==null&&!u[42].label},p[1]&1024&&fo(Jr(u[41],"outline$"))]):{};p[0]&268640289|p[1]&3072|p[2]&268435456&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[54](null),Si(e,u)}}}function I5(i){let e,t;const n=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},Jr(i[41],"label$")];let l={$$slots:{default:[MM]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new F1({props:l}),i[53](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[0]&268443649|p[1]&1024?cr(n,[p[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},p[0]&8192&&{required:u[13]},n[2],p[1]&1024&&fo(Jr(u[41],"label$"))]):{};p[0]&131072|p[2]&268435456&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[53](null),Si(e,u)}}}function MM(i){let e=(i[17]==null?"":i[17])+"",t,n;const l=i[51].label,u=nr(l,i,i[90],x5);return{c(){t=gn(e),u&&u.c()},l(p){t=yn(p,e),u&&u.l(p)},m(p,o){wt(p,t,o),u&&u.m(p,o),n=!0},p(p,o){(!n||o[0]&131072)&&e!==(e=(p[17]==null?"":p[17])+"")&&bs(t,e),u&&u.p&&(!n||o[2]&268435456)&&rr(u,l,p,p[90],n?sr(l,p[90],o,kM):or(p[90]),x5)},i(p){n||(tt(u,p),n=!0)},o(p){ct(u,p),n=!1},d(p){p&&Oe(t),u&&u.d(p)}}}function DM(i){let e,t,n=!i[16]&&(i[17]!=null||i[42].label)&&I5(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,u){!l[16]&&(l[17]!=null||l[42].label)?n?(n.p(l,u),u[0]&196608|u[1]&2048&&tt(n,1)):(n=I5(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function OM(i){let e;const t=i[51].leadingIcon,n=nr(t,i,i[90],w5);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&268435456)&&rr(n,t,l,l[90],e?sr(t,l[90],u,SM):or(l[90]),w5)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function FM(i){let e,t,n,l,u,p,o,c,g,_;const v=i[51].prefix,w=nr(v,i,i[90],v5);let x=i[20]!=null&&T5(i);const C=[{type:i[18]},{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},i[16]&&i[17]!=null?{placeholder:i[17]}:{},Jr(i[41],"input$")];function T(Z){i[64](Z)}function k(Z){i[65](Z)}function M(Z){i[66](Z)}function O(Z){i[67](Z)}let V={};for(let Z=0;Z<C.length;Z+=1)V=Ni(V,C[Z]);i[0]!==void 0&&(V.value=i[0]),i[3]!==void 0&&(V.files=i[3]),i[4]!==void 0&&(V.dirty=i[4]),i[1]!==void 0&&(V.invalid=i[1]),n=new hM({props:V}),i[63](n),pn.push(()=>To(n,"value",T)),pn.push(()=>To(n,"files",k)),pn.push(()=>To(n,"dirty",M)),pn.push(()=>To(n,"invalid",O)),n.$on("blur",i[68]),n.$on("focus",i[69]),n.$on("blur",i[70]),n.$on("focus",i[71]);let W=i[21]!=null&&L5(i);const J=i[51].suffix,Q=nr(J,i,i[90],_5);return{c(){w&&w.c(),e=$i(),x&&x.c(),t=$i(),xi(n.$$.fragment),c=$i(),W&&W.c(),g=$i(),Q&&Q.c()},l(Z){w&&w.l(Z),e=en(Z),x&&x.l(Z),t=en(Z),Ci(n.$$.fragment,Z),c=en(Z),W&&W.l(Z),g=en(Z),Q&&Q.l(Z)},m(Z,ie){w&&w.m(Z,ie),wt(Z,e,ie),x&&x.m(Z,ie),wt(Z,t,ie),Ai(n,Z,ie),wt(Z,c,ie),W&&W.m(Z,ie),wt(Z,g,ie),Q&&Q.m(Z,ie),_=!0},p(Z,ie){w&&w.p&&(!_||ie[2]&268435456)&&rr(w,v,Z,Z[90],_?sr(v,Z[90],ie,xM):or(Z[90]),v5),Z[20]!=null?x?(x.p(Z,ie),ie[0]&1048576&&tt(x,1)):(x=T5(Z),x.c(),tt(x,1),x.m(t.parentNode,t)):x&&(Sr(),ct(x,1,1,()=>{x=null}),Ar());const Se=ie[0]&135213056|ie[1]&1024?cr(C,[ie[0]&262144&&{type:Z[18]},ie[0]&4096&&{disabled:Z[12]},ie[0]&8192&&{required:Z[13]},ie[0]&524288&&{updateInvalid:Z[19]},ie[0]&134217728&&{"aria-controls":Z[27]},ie[0]&134217728&&{"aria-describedby":Z[27]},ie[0]&196608&&fo(Z[16]&&Z[17]!=null?{placeholder:Z[17]}:{}),ie[1]&1024&&fo(Jr(Z[41],"input$"))]):{};!l&&ie[0]&1&&(l=!0,Se.value=Z[0],Lo(()=>l=!1)),!u&&ie[0]&8&&(u=!0,Se.files=Z[3],Lo(()=>u=!1)),!p&&ie[0]&16&&(p=!0,Se.dirty=Z[4],Lo(()=>p=!1)),!o&&ie[0]&2&&(o=!0,Se.invalid=Z[1],Lo(()=>o=!1)),n.$set(Se),Z[21]!=null?W?(W.p(Z,ie),ie[0]&2097152&&tt(W,1)):(W=L5(Z),W.c(),tt(W,1),W.m(g.parentNode,g)):W&&(Sr(),ct(W,1,1,()=>{W=null}),Ar()),Q&&Q.p&&(!_||ie[2]&268435456)&&rr(Q,J,Z,Z[90],_?sr(J,Z[90],ie,wM):or(Z[90]),_5)},i(Z){_||(tt(w,Z),tt(x),tt(n.$$.fragment,Z),tt(W),tt(Q,Z),_=!0)},o(Z){ct(w,Z),ct(x),ct(n.$$.fragment,Z),ct(W),ct(Q,Z),_=!1},d(Z){w&&w.d(Z),Z&&Oe(e),x&&x.d(Z),Z&&Oe(t),i[63](null),Si(n,Z),Z&&Oe(c),W&&W.d(Z),Z&&Oe(g),Q&&Q.d(Z)}}}function RM(i){let e,t,n,l,u,p,o,c;const g=[{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},Jr(i[41],"input$")];function _(k){i[56](k)}function v(k){i[57](k)}function w(k){i[58](k)}let x={};for(let k=0;k<g.length;k+=1)x=Ni(x,g[k]);i[0]!==void 0&&(x.value=i[0]),i[4]!==void 0&&(x.dirty=i[4]),i[1]!==void 0&&(x.invalid=i[1]),t=new pM({props:x}),i[55](t),pn.push(()=>To(t,"value",_)),pn.push(()=>To(t,"dirty",v)),pn.push(()=>To(t,"invalid",w)),t.$on("blur",i[59]),t.$on("focus",i[60]),t.$on("blur",i[61]),t.$on("focus",i[62]);const C=i[51].internalCounter,T=nr(C,i,i[90],b5);return{c(){e=Li("span"),xi(t.$$.fragment),p=$i(),T&&T.c(),this.h()},l(k){e=Pi(k,"SPAN",{class:!0});var M=Ti(e);Ci(t.$$.fragment,M),p=en(M),T&&T.l(M),M.forEach(Oe),this.h()},h(){hi(e,"class",o=Hn({"mdc-text-field__resizer":!("input$resizable"in i[41])||i[41].input$resizable}))},m(k,M){wt(k,e,M),Ai(t,e,null),Xi(e,p),T&&T.m(e,null),c=!0},p(k,M){const O=M[0]&134754304|M[1]&1024?cr(g,[M[0]&4096&&{disabled:k[12]},M[0]&8192&&{required:k[13]},M[0]&524288&&{updateInvalid:k[19]},M[0]&134217728&&{"aria-controls":k[27]},M[0]&134217728&&{"aria-describedby":k[27]},M[1]&1024&&fo(Jr(k[41],"input$"))]):{};!n&&M[0]&1&&(n=!0,O.value=k[0],Lo(()=>n=!1)),!l&&M[0]&16&&(l=!0,O.dirty=k[4],Lo(()=>l=!1)),!u&&M[0]&2&&(u=!0,O.invalid=k[1],Lo(()=>u=!1)),t.$set(O),T&&T.p&&(!c||M[2]&268435456)&&rr(T,C,k,k[90],c?sr(C,k[90],M,AM):or(k[90]),b5),(!c||M[1]&1024&&o!==(o=Hn({"mdc-text-field__resizer":!("input$resizable"in k[41])||k[41].input$resizable})))&&hi(e,"class",o)},i(k){c||(tt(t.$$.fragment,k),tt(T,k),c=!0)},o(k){ct(t.$$.fragment,k),ct(T,k),c=!1},d(k){k&&Oe(e),i[55](null),Si(t),T&&T.d(k)}}}function T5(i){let e,t;return e=new sM({props:{$$slots:{default:[BM]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l[0]&1048576|l[2]&268435456&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function BM(i){let e;return{c(){e=gn(i[20])},l(t){e=yn(t,i[20])},m(t,n){wt(t,e,n)},p(t,n){n[0]&1048576&&bs(e,t[20])},d(t){t&&Oe(e)}}}function L5(i){let e,t;return e=new aM({props:{$$slots:{default:[zM]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l[0]&2097152|l[2]&268435456&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function zM(i){let e;return{c(){e=gn(i[21])},l(t){e=yn(t,i[21])},m(t,n){wt(t,e,n)},p(t,n){n[0]&2097152&&bs(e,t[21])},d(t){t&&Oe(e)}}}function NM(i){let e;const t=i[51].trailingIcon,n=nr(t,i,i[90],y5);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&268435456)&&rr(n,t,l,l[90],e?sr(t,l[90],u,bM):or(l[90]),y5)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function P5(i){let e,t;const n=[Jr(i[41],"ripple$")];let l={};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new z4({props:l}),i[72](e),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[1]&1024?cr(n,[fo(Jr(u[41],"ripple$"))]):{};e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){i[72](null),Si(e,u)}}}function M5(i){let e,t;const n=[Jr(i[41],"helperLine$")];let l={$$slots:{default:[jM]},$$scope:{ctx:i}};for(let u=0;u<n.length;u+=1)l=Ni(l,n[u]);return e=new oM({props:l}),e.$on("SMUITextfieldHelperText:id",i[85]),e.$on("SMUITextfieldHelperText:mount",i[86]),e.$on("SMUITextfieldHelperText:unmount",i[87]),e.$on("SMUITextfieldCharacterCounter:mount",i[88]),e.$on("SMUITextfieldCharacterCounter:unmount",i[89]),{c(){xi(e.$$.fragment)},l(u){Ci(e.$$.fragment,u)},m(u,p){Ai(e,u,p),t=!0},p(u,p){const o=p[1]&1024?cr(n,[fo(Jr(u[41],"helperLine$"))]):{};p[2]&268435456&&(o.$$scope={dirty:p,ctx:u}),e.$set(o)},i(u){t||(tt(e.$$.fragment,u),t=!0)},o(u){ct(e.$$.fragment,u),t=!1},d(u){Si(e,u)}}}function jM(i){let e;const t=i[51].helper,n=nr(t,i,i[90],f5);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[2]&268435456)&&rr(n,t,l,l[90],e?sr(t,l[90],u,mM):or(l[90]),f5)},i(l){e||(tt(n,l),e=!0)},o(l){ct(n,l),e=!1},d(l){n&&n.d(l)}}}function UM(i){let e,t,n,l,u;const p=[IM,EM],o=[];function c(_,v){return _[36]?0:1}e=c(i),t=o[e]=p[e](i);let g=i[42].helper&&M5(i);return{c(){t.c(),n=$i(),g&&g.c(),l=hn()},l(_){t.l(_),n=en(_),g&&g.l(_),l=hn()},m(_,v){o[e].m(_,v),wt(_,n,v),g&&g.m(_,v),wt(_,l,v),u=!0},p(_,v){t.p(_,v),_[42].helper?g?(g.p(_,v),v[1]&2048&&tt(g,1)):(g=M5(_),g.c(),tt(g,1),g.m(l.parentNode,l)):g&&(Sr(),ct(g,1,1,()=>{g=null}),Ar())},i(_){u||(tt(t),tt(g),u=!0)},o(_){ct(t),ct(g),u=!1},d(_){o[e].d(_),_&&Oe(n),g&&g.d(_),_&&Oe(l)}}}const D5=([i,e])=>`${i}: ${e};`,O5=([i,e])=>`${i}: ${e};`;function VM(i,e,t){let n;const l=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let u=On(e,l),{$$slots:p={},$$scope:o}=e;const c=Sg(p),{applyPassive:g}=T4,_=io(to());let v=()=>{};function w(vt){return vt===v}let{use:x=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:k=!0}=e,{disabled:M=!1}=e,{required:O=!1}=e,{textarea:V=!1}=e,{variant:W=V?"outlined":"standard"}=e,{noLabel:J=!1}=e,{label:Q=void 0}=e,{type:Z="text"}=e,{value:ie=u.input$emptyValueUndefined?void 0:v}=e,{files:Se=v}=e;const xe=!w(ie)||!w(Se);w(ie)&&(ie=void 0),w(Se)&&(Se=null);let{invalid:le=v}=e,{updateInvalid:Ee=w(le)}=e;w(le)&&(le=!1);let{dirty:me=!1}=e,{prefix:Ae=void 0}=e,{suffix:pt=void 0}=e,{validateOnValueChange:rt=Ee}=e,{useNativeValidation:Pt=Ee}=e,{withLeadingIcon:We=v}=e,{withTrailingIcon:be=v}=e,{input:Le=void 0}=e,{floatingLabel:Ue=void 0}=e,{lineRipple:ce=void 0}=e,{notchedOutline:Ie=void 0}=e,de,ge,Re={},Ze={},ut,Xe=!1,$e=es("SMUI:addLayoutListener"),Dt,ni,mt=new Promise(vt=>ni=vt),At,xt,Qe,Yt,si=ie;$e&&(Dt=$e(Ii)),ws(()=>{if(t(49,ge=new rM({addClass:Ei,removeClass:Qt,hasClass:Zt,registerTextFieldInteractionHandler:(vt,ji)=>$t().addEventListener(vt,ji),deregisterTextFieldInteractionHandler:(vt,ji)=>$t().removeEventListener(vt,ji),registerValidationAttributeChangeHandler:vt=>{const ji=kn=>kn.map(St=>St.attributeName).filter(St=>St),Di=new MutationObserver(kn=>{Pt&&vt(ji(kn))}),In={attributes:!0};return Le&&Di.observe(Le.getElement(),In),Di},deregisterValidationAttributeChangeHandler:vt=>{vt.disconnect()},getNativeInput:()=>{var vt;return(vt=Le==null?void 0:Le.getElement())!==null&&vt!==void 0?vt:null},setInputAttr:(vt,ji)=>{Le==null||Le.addAttr(vt,ji)},removeInputAttr:vt=>{Le==null||Le.removeAttr(vt)},isFocused:()=>document.activeElement===(Le==null?void 0:Le.getElement()),registerInputInteractionHandler:(vt,ji)=>{Le==null||Le.getElement().addEventListener(vt,ji,g())},deregisterInputInteractionHandler:(vt,ji)=>{Le==null||Le.getElement().removeEventListener(vt,ji,g())},floatLabel:vt=>Ue&&Ue.float(vt),getLabelWidth:()=>Ue?Ue.getWidth():0,hasLabel:()=>!!Ue,shakeLabel:vt=>Ue&&Ue.shake(vt),setLabelRequired:vt=>Ue&&Ue.setRequired(vt),activateLineRipple:()=>ce&&ce.activate(),deactivateLineRipple:()=>ce&&ce.deactivate(),setLineRippleTransformOrigin:vt=>ce&&ce.setRippleCenter(vt),closeOutline:()=>Ie&&Ie.closeNotch(),hasOutline:()=>!!Ie,notchOutline:vt=>Ie&&Ie.notch(vt)},{get helperText(){return Qe},get characterCounter(){return Yt},get leadingIcon(){return At},get trailingIcon(){return xt}})),xe){if(Le==null)throw new Error("SMUI Textfield initialized without Input component.");ge.init()}else qx().then(()=>{if(Le==null)throw new Error("SMUI Textfield initialized without Input component.");ge.init()});return ni(),()=>{ge.destroy()}}),sc(()=>{Dt&&Dt()});function Zt(vt){var ji;return vt in Re?(ji=Re[vt])!==null&&ji!==void 0?ji:null:$t().classList.contains(vt)}function Ei(vt){Re[vt]||t(25,Re[vt]=!0,Re)}function Qt(vt){(!(vt in Re)||Re[vt])&&t(25,Re[vt]=!1,Re)}function Ot(vt,ji){Ze[vt]!=ji&&(ji===""||ji==null?(delete Ze[vt],t(26,Ze)):t(26,Ze[vt]=ji,Ze))}function ai(){Le==null||Le.focus()}function Ji(){Le==null||Le.blur()}function Ii(){if(ge){const vt=ge.shouldFloat;ge.notchOutline(vt)}}function $t(){return de}function Me(vt){pn[vt?"unshift":"push"](()=>{Ue=vt,t(5,Ue)})}function ee(vt){pn[vt?"unshift":"push"](()=>{Ue=vt,t(5,Ue)})}function ae(vt){pn[vt?"unshift":"push"](()=>{Ie=vt,t(7,Ie)})}function et(vt){pn[vt?"unshift":"push"](()=>{Le=vt,t(2,Le)})}function bt(vt){ie=vt,t(0,ie)}function Xt(vt){me=vt,t(4,me)}function fi(vt){le=vt,t(1,le),t(49,ge),t(19,Ee)}const xn=()=>t(28,Xe=!1),qn=()=>t(28,Xe=!0),bn=vt=>Qr(de,"blur",vt),Gi=vt=>Qr(de,"focus",vt);function an(vt){pn[vt?"unshift":"push"](()=>{Le=vt,t(2,Le)})}function Kn(vt){ie=vt,t(0,ie)}function mr(vt){Se=vt,t(3,Se)}function yo(vt){me=vt,t(4,me)}function ar(vt){le=vt,t(1,le),t(49,ge),t(19,Ee)}const Hr=()=>t(28,Xe=!1),Yn=()=>t(28,Xe=!0),Ur=vt=>Qr(de,"blur",vt),co=vt=>Qr(de,"focus",vt);function Jn(vt){pn[vt?"unshift":"push"](()=>{ce=vt,t(6,ce)})}function br(vt){pn[vt?"unshift":"push"](()=>{de=vt,t(24,de)})}const Eo=vt=>t(29,At=vt.detail),un=()=>t(29,At=void 0),He=vt=>t(30,xt=vt.detail),Ho=()=>t(30,xt=void 0),Do=vt=>t(32,Yt=vt.detail),wo=()=>t(32,Yt=void 0);function Pe(vt){pn[vt?"unshift":"push"](()=>{de=vt,t(24,de)})}const Te=vt=>t(29,At=vt.detail),qe=()=>t(29,At=void 0),ft=vt=>t(30,xt=vt.detail),_t=()=>t(30,xt=void 0),Ut=vt=>t(27,ut=vt.detail),Ge=vt=>t(31,Qe=vt.detail),Ht=()=>{t(27,ut=void 0),t(31,Qe=void 0)},zt=vt=>t(32,Yt=vt.detail),ti=()=>t(32,Yt=void 0);return i.$$set=vt=>{e=Ni(Ni({},e),$r(vt)),t(41,u=On(e,l)),"use"in vt&&t(8,x=vt.use),"class"in vt&&t(9,C=vt.class),"style"in vt&&t(10,T=vt.style),"ripple"in vt&&t(11,k=vt.ripple),"disabled"in vt&&t(12,M=vt.disabled),"required"in vt&&t(13,O=vt.required),"textarea"in vt&&t(14,V=vt.textarea),"variant"in vt&&t(15,W=vt.variant),"noLabel"in vt&&t(16,J=vt.noLabel),"label"in vt&&t(17,Q=vt.label),"type"in vt&&t(18,Z=vt.type),"value"in vt&&t(0,ie=vt.value),"files"in vt&&t(3,Se=vt.files),"invalid"in vt&&t(1,le=vt.invalid),"updateInvalid"in vt&&t(19,Ee=vt.updateInvalid),"dirty"in vt&&t(4,me=vt.dirty),"prefix"in vt&&t(20,Ae=vt.prefix),"suffix"in vt&&t(21,pt=vt.suffix),"validateOnValueChange"in vt&&t(43,rt=vt.validateOnValueChange),"useNativeValidation"in vt&&t(44,Pt=vt.useNativeValidation),"withLeadingIcon"in vt&&t(22,We=vt.withLeadingIcon),"withTrailingIcon"in vt&&t(23,be=vt.withTrailingIcon),"input"in vt&&t(2,Le=vt.input),"floatingLabel"in vt&&t(5,Ue=vt.floatingLabel),"lineRipple"in vt&&t(6,ce=vt.lineRipple),"notchedOutline"in vt&&t(7,Ie=vt.notchedOutline),"$$scope"in vt&&t(90,o=vt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&t(33,n=Le&&Le.getElement()),i.$$.dirty[0]&524290|i.$$.dirty[1]&262144&&ge&&ge.isValid()!==!le&&(Ee?t(1,le=!ge.isValid()):ge.setValid(!le)),i.$$.dirty[1]&266240&&ge&&ge.getValidateOnValueChange()!==rt&&ge.setValidateOnValueChange(w(rt)?!1:rt),i.$$.dirty[1]&270336&&ge&&ge.setUseNativeValidation(w(Pt)?!0:Pt),i.$$.dirty[0]&4096|i.$$.dirty[1]&262144&&ge&&ge.setDisabled(M),i.$$.dirty[0]&1|i.$$.dirty[1]&786432&&ge&&xe&&si!==ie){t(50,si=ie);const vt=`${ie}`;ge.getValue()!==vt&&ge.setValue(vt)}},[ie,le,Le,Se,me,Ue,ce,Ie,x,C,T,k,M,O,V,W,J,Q,Z,Ee,Ae,pt,We,be,de,Re,Ze,ut,Xe,At,xt,Qe,Yt,n,_,w,xe,mt,Ei,Qt,Ot,u,c,rt,Pt,ai,Ji,Ii,$t,ge,si,p,Me,ee,ae,et,bt,Xt,fi,xn,qn,bn,Gi,an,Kn,mr,yo,ar,Hr,Yn,Ur,co,Jn,br,Eo,un,He,Ho,Do,wo,Pe,Te,qe,ft,_t,Ut,Ge,Ht,zt,ti,o]}class _f extends fr{constructor(e){super(),dr(this,e,VM,UM,hr,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}function F5(i,e,t){const n=i.slice();return n[19]=e[t],n[22]=e,n[23]=t,n}function R5(i,e,t){const n=i.slice();return n[19]=e[t],n[20]=e,n[21]=t,n}function B5(i,e,t){const n=i.slice();return n[24]=e[t],n}function qM(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C,T,k;function M(xe){i[10](xe)}let O={label:"Means of Transport",style:"width:100%",$$slots:{default:[GM]},$$scope:{ctx:i}};i[4]!==void 0&&(O.value=i[4]),n=new z0({props:O}),pn.push(()=>To(n,"value",M));function V(xe){i[11](xe)}let W={label:"Longitude",readonly:!0};i[1]!==void 0&&(W.value=i[1]),o=new _f({props:W}),pn.push(()=>To(o,"value",V));function J(xe){i[12](xe)}let Q={label:"Latitude",readonly:!0};i[2]!==void 0&&(Q.value=i[2]),_=new _f({props:Q}),pn.push(()=>To(_,"value",J));const Z=[XM,WM],ie=[];function Se(xe,le){return xe[0]===Mu.Time?0:xe[0]===Mu.Distance?1:-1}return~(x=Se(i))&&(C=ie[x]=Z[x](i)),{c(){e=Li("div"),t=Li("div"),xi(n.$$.fragment),u=$i(),p=Li("div"),xi(o.$$.fragment),g=$i(),xi(_.$$.fragment),w=$i(),C&&C.c(),T=hn(),this.h()},l(xe){e=Pi(xe,"DIV",{class:!0});var le=Ti(e);t=Pi(le,"DIV",{});var Ee=Ti(t);Ci(n.$$.fragment,Ee),Ee.forEach(Oe),u=en(le),p=Pi(le,"DIV",{style:!0});var me=Ti(p);Ci(o.$$.fragment,me),g=en(me),Ci(_.$$.fragment,me),me.forEach(Oe),le.forEach(Oe),w=en(xe),C&&C.l(xe),T=hn(),this.h()},h(){Ia(p,"display","inline-flex"),hi(e,"class","transport-select svelte-1dgq3qf")},m(xe,le){wt(xe,e,le),Xi(e,t),Ai(n,t,null),Xi(e,u),Xi(e,p),Ai(o,p,null),Xi(p,g),Ai(_,p,null),wt(xe,w,le),~x&&ie[x].m(xe,le),wt(xe,T,le),k=!0},p(xe,le){const Ee={};le&134217728&&(Ee.$$scope={dirty:le,ctx:xe}),!l&&le&16&&(l=!0,Ee.value=xe[4],Lo(()=>l=!1)),n.$set(Ee);const me={};!c&&le&2&&(c=!0,me.value=xe[1],Lo(()=>c=!1)),o.$set(me);const Ae={};!v&&le&4&&(v=!0,Ae.value=xe[2],Lo(()=>v=!1)),_.$set(Ae);let pt=x;x=Se(xe),x===pt?~x&&ie[x].p(xe,le):(C&&(Sr(),ct(ie[pt],1,1,()=>{ie[pt]=null}),Ar()),~x?(C=ie[x],C?C.p(xe,le):(C=ie[x]=Z[x](xe),C.c()),tt(C,1),C.m(T.parentNode,T)):C=null)},i(xe){k||(tt(n.$$.fragment,xe),tt(o.$$.fragment,xe),tt(_.$$.fragment,xe),tt(C),k=!0)},o(xe){ct(n.$$.fragment,xe),ct(o.$$.fragment,xe),ct(_.$$.fragment,xe),ct(C),k=!1},d(xe){xe&&Oe(e),Si(n),Si(o),Si(_),xe&&Oe(w),~x&&ie[x].d(xe),xe&&Oe(T)}}}function HM(i){let e=i[24].label+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function z5(i){let e,t;return e=new sd({props:{value:i[24].value,$$slots:{default:[HM]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&134217728&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function GM(i){let e,t,n=i[5],l=[];for(let p=0;p<n.length;p+=1)l[p]=z5(B5(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&32){n=p[5];let c;for(c=0;c<n.length;c+=1){const g=B5(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=z5(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function WM(i){let e,t,n,l,u,p,o,c,g,_,v,w=i[3],x=[];for(let T=0;T<w.length;T+=1)x[T]=N5(F5(i,w,T));const C=T=>ct(x[T],1,1,()=>{x[T]=null});return o=new Ru({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[KM]},$$scope:{ctx:i}}}),o.$on("click",i[17]),_=new Ru({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[$M]},$$scope:{ctx:i}}}),_.$on("click",i[18]),{c(){e=Li("p"),t=gn("Distance Isochrone"),n=$i(),l=Li("div");for(let T=0;T<x.length;T+=1)x[T].c();u=$i(),p=Li("div"),xi(o.$$.fragment),c=$i(),g=Li("div"),xi(_.$$.fragment),this.h()},l(T){e=Pi(T,"P",{});var k=Ti(e);t=yn(k,"Distance Isochrone"),k.forEach(Oe),n=en(T),l=Pi(T,"DIV",{style:!0});var M=Ti(l);for(let W=0;W<x.length;W+=1)x[W].l(M);M.forEach(Oe),u=en(T),p=Pi(T,"DIV",{class:!0});var O=Ti(p);Ci(o.$$.fragment,O),O.forEach(Oe),c=en(T),g=Pi(T,"DIV",{class:!0});var V=Ti(g);Ci(_.$$.fragment,V),V.forEach(Oe),this.h()},h(){Ia(l,"display","inline-flex"),hi(p,"class","tool-button svelte-1dgq3qf"),hi(g,"class","tool-button svelte-1dgq3qf")},m(T,k){wt(T,e,k),Xi(e,t),wt(T,n,k),wt(T,l,k);for(let M=0;M<x.length;M+=1)x[M].m(l,null);wt(T,u,k),wt(T,p,k),Ai(o,p,null),wt(T,c,k),wt(T,g,k),Ai(_,g,null),v=!0},p(T,k){if(k&8){w=T[3];let V;for(V=0;V<w.length;V+=1){const W=F5(T,w,V);x[V]?(x[V].p(W,k),tt(x[V],1)):(x[V]=N5(W),x[V].c(),tt(x[V],1),x[V].m(l,null))}for(Sr(),V=w.length;V<x.length;V+=1)C(V);Ar()}const M={};k&134217728&&(M.$$scope={dirty:k,ctx:T}),o.$set(M);const O={};k&134217728&&(O.$$scope={dirty:k,ctx:T}),_.$set(O)},i(T){if(!v){for(let k=0;k<w.length;k+=1)tt(x[k]);tt(o.$$.fragment,T),tt(_.$$.fragment,T),v=!0}},o(T){x=x.filter(Boolean);for(let k=0;k<x.length;k+=1)ct(x[k]);ct(o.$$.fragment,T),ct(_.$$.fragment,T),v=!1},d(T){T&&Oe(e),T&&Oe(n),T&&Oe(l),sl(x,T),T&&Oe(u),T&&Oe(p),Si(o),T&&Oe(c),T&&Oe(g),Si(_)}}}function XM(i){let e,t,n,l,u,p,o,c,g=i[3],_=[];for(let w=0;w<g.length;w+=1)_[w]=j5(R5(i,g,w));const v=w=>ct(_[w],1,1,()=>{_[w]=null});return l=new Ru({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[iD]},$$scope:{ctx:i}}}),l.$on("click",i[14]),o=new Ru({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[oD]},$$scope:{ctx:i}}}),o.$on("click",i[15]),{c(){e=Li("div");for(let w=0;w<_.length;w+=1)_[w].c();t=$i(),n=Li("div"),xi(l.$$.fragment),u=$i(),p=Li("div"),xi(o.$$.fragment),this.h()},l(w){e=Pi(w,"DIV",{style:!0});var x=Ti(e);for(let k=0;k<_.length;k+=1)_[k].l(x);x.forEach(Oe),t=en(w),n=Pi(w,"DIV",{class:!0});var C=Ti(n);Ci(l.$$.fragment,C),C.forEach(Oe),u=en(w),p=Pi(w,"DIV",{class:!0});var T=Ti(p);Ci(o.$$.fragment,T),T.forEach(Oe),this.h()},h(){Ia(e,"display","inline-flex"),hi(n,"class","tool-button svelte-1dgq3qf"),hi(p,"class","tool-button svelte-1dgq3qf")},m(w,x){wt(w,e,x);for(let C=0;C<_.length;C+=1)_[C].m(e,null);wt(w,t,x),wt(w,n,x),Ai(l,n,null),wt(w,u,x),wt(w,p,x),Ai(o,p,null),c=!0},p(w,x){if(x&8){g=w[3];let k;for(k=0;k<g.length;k+=1){const M=R5(w,g,k);_[k]?(_[k].p(M,x),tt(_[k],1)):(_[k]=j5(M),_[k].c(),tt(_[k],1),_[k].m(e,null))}for(Sr(),k=g.length;k<_.length;k+=1)v(k);Ar()}const C={};x&134217728&&(C.$$scope={dirty:x,ctx:w}),l.$set(C);const T={};x&134217728&&(T.$$scope={dirty:x,ctx:w}),o.$set(T)},i(w){if(!c){for(let x=0;x<g.length;x+=1)tt(_[x]);tt(l.$$.fragment,w),tt(o.$$.fragment,w),c=!0}},o(w){_=_.filter(Boolean);for(let x=0;x<_.length;x+=1)ct(_[x]);ct(l.$$.fragment,w),ct(o.$$.fragment,w),c=!1},d(w){w&&Oe(e),sl(_,w),w&&Oe(t),w&&Oe(n),Si(l),w&&Oe(u),w&&Oe(p),Si(o)}}}function N5(i){let e,t,n;function l(p){i[16](p,i[19])}let u={label:i[19].distance+" km",type:"number"};return i[19].distance!==void 0&&(u.value=i[19].distance),e=new _f({props:u}),pn.push(()=>To(e,"value",l)),{c(){xi(e.$$.fragment)},l(p){Ci(e.$$.fragment,p)},m(p,o){Ai(e,p,o),n=!0},p(p,o){i=p;const c={};o&8&&(c.label=i[19].distance+" km"),!t&&o&8&&(t=!0,c.value=i[19].distance,Lo(()=>t=!1)),e.$set(c)},i(p){n||(tt(e.$$.fragment,p),n=!0)},o(p){ct(e.$$.fragment,p),n=!1},d(p){Si(e,p)}}}function YM(i){let e;return{c(){e=gn("delete")},l(t){e=yn(t,"delete")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function ZM(i){let e;return{c(){e=gn("Clear")},l(t){e=yn(t,"Clear")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function KM(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[YM]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[ZM]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&134217728&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function JM(i){let e;return{c(){e=gn("straighten")},l(t){e=yn(t,"straighten")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function QM(i){let e;return{c(){e=gn("Calculate")},l(t){e=yn(t,"Calculate")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function $M(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[JM]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[QM]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&134217728&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function j5(i){let e,t,n;function l(p){i[13](p,i[19])}let u={label:i[19].time+" min",type:"number"};return i[19].time!==void 0&&(u.value=i[19].time),e=new _f({props:u}),pn.push(()=>To(e,"value",l)),{c(){xi(e.$$.fragment)},l(p){Ci(e.$$.fragment,p)},m(p,o){Ai(e,p,o),n=!0},p(p,o){i=p;const c={};o&8&&(c.label=i[19].time+" min"),!t&&o&8&&(t=!0,c.value=i[19].time,Lo(()=>t=!1)),e.$set(c)},i(p){n||(tt(e.$$.fragment,p),n=!0)},o(p){ct(e.$$.fragment,p),n=!1},d(p){Si(e,p)}}}function eD(i){let e;return{c(){e=gn("delete")},l(t){e=yn(t,"delete")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function tD(i){let e;return{c(){e=gn("Clear")},l(t){e=yn(t,"Clear")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function iD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[eD]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[tD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&134217728&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function nD(i){let e;return{c(){e=gn("access_time")},l(t){e=yn(t,"access_time")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function rD(i){let e;return{c(){e=gn("Calculate")},l(t){e=yn(t,"Calculate")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function oD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[nD]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[rD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&134217728&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&134217728&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function sD(i){let e,t,n=kr.valhalla&&qM(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,[u]){kr.valhalla&&n.p(l,u)},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function aD(i,e,t){var Q;let n,l;Vo(i,Zm,Z=>t(8,n=Z)),Vo(i,Fu,Z=>t(9,l=Z));let{contourType:u}=e,p,o,c=(Q=kr.valhalla)==null?void 0:Q.options.Contours;c||(c=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);let g=[{value:J0.Walking,label:"Walking"},{value:J0.Bicycle,label:"Bicycle"},{value:J0.Car,label:"Car"}],_=g[0].value;const v=Z=>{n[Z].getIsochrone(Number(p),Number(o),Z,_,JSON.parse(JSON.stringify(c)))},w=()=>{n[u].clearFeatures()};function x(Z){_=Z,t(4,_)}function C(Z){p=Z,t(1,p),t(9,l),t(8,n),t(0,u)}function T(Z){o=Z,t(2,o),t(9,l),t(8,n),t(0,u)}function k(Z,ie){i.$$.not_equal(ie.time,Z)&&(ie.time=Z,t(3,c))}const M=()=>w(),O=()=>v(Mu.Time);function V(Z,ie){i.$$.not_equal(ie.distance,Z)&&(ie.distance=Z,t(3,c))}const W=()=>w(),J=()=>v(Mu.Distance);return i.$$set=Z=>{"contourType"in Z&&t(0,u=Z.contourType)},i.$$.update=()=>{if(i.$$.dirty&769&&l){if(!n){const Z={};Zm.update(()=>Z)}n[u]||Ea(Zm,n[u]=new VT(l,kr.valhalla.url),n),t(1,p=l.getCenter().lng),t(2,o=l.getCenter().lat),l.on("moveend",()=>{t(1,p=l.getCenter().lng),t(2,o=l.getCenter().lat)})}},[u,p,o,c,_,g,v,w,n,l,x,C,T,k,M,O,V,W,J]}class Y3 extends fr{constructor(e){super(),dr(this,e,aD,sD,hr,{contourType:0})}}function U5(i,e,t){const n=i.slice();return n[19]=e[t],n}function lD(i){let e,t,n,l,u,p,o,c,g;function _(x){i[7](x)}let v={label:"Means of Transport",style:"width:100%",$$slots:{default:[cD]},$$scope:{ctx:i}};i[0]!==void 0&&(v.value=i[0]),t=new z0({props:v}),pn.push(()=>To(t,"value",_)),p=new Ru({props:{color:"primary",variant:"raised",style:"width:100%",$$slots:{default:[yD]},$$scope:{ctx:i}}}),p.$on("click",i[5]);let w=i[1]&&i[1].length>0&&q5(i);return{c(){e=Li("div"),xi(t.$$.fragment),l=$i(),u=Li("div"),xi(p.$$.fragment),o=$i(),w&&w.c(),c=hn(),this.h()},l(x){e=Pi(x,"DIV",{});var C=Ti(e);Ci(t.$$.fragment,C),C.forEach(Oe),l=en(x),u=Pi(x,"DIV",{class:!0,style:!0});var T=Ti(u);Ci(p.$$.fragment,T),T.forEach(Oe),o=en(x),w&&w.l(x),c=hn(),this.h()},h(){hi(u,"class","tool-button svelte-1ul6seo"),Ia(u,"display","flex"),Ia(u,"align-items","center")},m(x,C){wt(x,e,C),Ai(t,e,null),wt(x,l,C),wt(x,u,C),Ai(p,u,null),wt(x,o,C),w&&w.m(x,C),wt(x,c,C),g=!0},p(x,C){const T={};C&4194304&&(T.$$scope={dirty:C,ctx:x}),!n&&C&1&&(n=!0,T.value=x[0],Lo(()=>n=!1)),t.$set(T);const k={};C&4194308&&(k.$$scope={dirty:C,ctx:x}),p.$set(k),x[1]&&x[1].length>0?w?(w.p(x,C),C&2&&tt(w,1)):(w=q5(x),w.c(),tt(w,1),w.m(c.parentNode,c)):w&&(Sr(),ct(w,1,1,()=>{w=null}),Ar())},i(x){g||(tt(t.$$.fragment,x),tt(p.$$.fragment,x),tt(w),g=!0)},o(x){ct(t.$$.fragment,x),ct(p.$$.fragment,x),ct(w),g=!1},d(x){x&&Oe(e),Si(t),x&&Oe(l),x&&Oe(u),Si(p),x&&Oe(o),w&&w.d(x),x&&Oe(c)}}}function uD(i){let e=i[19].label+"",t;return{c(){t=gn(e)},l(n){t=yn(n,e)},m(n,l){wt(n,t,l)},p:Co,d(n){n&&Oe(t)}}}function V5(i){let e,t;return e=new sd({props:{value:i[19].value,$$slots:{default:[uD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&4194304&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function cD(i){let e,t,n=i[4],l=[];for(let p=0;p<n.length;p+=1)l[p]=V5(U5(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o&16){n=p[4];let c;for(c=0;c<n.length;c+=1){const g=U5(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=V5(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function hD(i){let e;return{c(){e=gn("route")},l(t){e=yn(t,"route")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function fD(i){let e;return{c(){e=gn("close")},l(t){e=yn(t,"close")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function dD(i){let e;function t(u,p){return u[2]?fD:hD}let n=t(i),l=n(i);return{c(){l.c(),e=hn()},l(u){l.l(u),e=hn()},m(u,p){l.m(u,p),wt(u,e,p)},p(u,p){n!==(n=t(u))&&(l.d(1),l=n(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function pD(i){let e;return{c(){e=gn("Start routing")},l(t){e=yn(t,"Start routing")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function mD(i){let e;return{c(){e=gn("Stop routing")},l(t){e=yn(t,"Stop routing")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function gD(i){let e;function t(u,p){return u[2]?mD:pD}let n=t(i),l=n(i);return{c(){l.c(),e=hn()},l(u){l.l(u),e=hn()},m(u,p){l.m(u,p),wt(u,e,p)},p(u,p){n!==(n=t(u))&&(l.d(1),l=n(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function yD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[dD]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[gD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&4194308&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&4194308&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function q5(i){let e,t,n,l,u,p,o,c,g;t=new Ru({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[bD]},$$scope:{ctx:i}}}),t.$on("click",i[8]),u=new _f({props:{value:`${i[1][0].lng.toFixed(6)}, ${i[1][0].lat.toFixed(6)}`,label:"From",readonly:!0,style:"width: 50%"}});let _=i[1].length>1&&H5(i),v=i[3]&&G5(i);return{c(){e=Li("div"),xi(t.$$.fragment),n=$i(),l=Li("div"),xi(u.$$.fragment),p=$i(),_&&_.c(),o=$i(),v&&v.c(),c=hn(),this.h()},l(w){e=Pi(w,"DIV",{class:!0});var x=Ti(e);Ci(t.$$.fragment,x),x.forEach(Oe),n=en(w),l=Pi(w,"DIV",{style:!0});var C=Ti(l);Ci(u.$$.fragment,C),p=en(C),_&&_.l(C),C.forEach(Oe),o=en(w),v&&v.l(w),c=hn(),this.h()},h(){hi(e,"class","sub-button tool-button svelte-1ul6seo"),Ia(l,"display","inline-flex"),Ia(l,"width","100%")},m(w,x){wt(w,e,x),Ai(t,e,null),wt(w,n,x),wt(w,l,x),Ai(u,l,null),Xi(l,p),_&&_.m(l,null),wt(w,o,x),v&&v.m(w,x),wt(w,c,x),g=!0},p(w,x){const C={};x&4194304&&(C.$$scope={dirty:x,ctx:w}),t.$set(C);const T={};x&2&&(T.value=`${w[1][0].lng.toFixed(6)}, ${w[1][0].lat.toFixed(6)}`),u.$set(T),w[1].length>1?_?(_.p(w,x),x&2&&tt(_,1)):(_=H5(w),_.c(),tt(_,1),_.m(l,null)):_&&(Sr(),ct(_,1,1,()=>{_=null}),Ar()),w[3]?v?(v.p(w,x),x&8&&tt(v,1)):(v=G5(w),v.c(),tt(v,1),v.m(c.parentNode,c)):v&&(Sr(),ct(v,1,1,()=>{v=null}),Ar())},i(w){g||(tt(t.$$.fragment,w),tt(u.$$.fragment,w),tt(_),tt(v),g=!0)},o(w){ct(t.$$.fragment,w),ct(u.$$.fragment,w),ct(_),ct(v),g=!1},d(w){w&&Oe(e),Si(t),w&&Oe(n),w&&Oe(l),Si(u),_&&_.d(),w&&Oe(o),v&&v.d(w),w&&Oe(c)}}}function _D(i){let e;return{c(){e=gn("delete")},l(t){e=yn(t,"delete")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function vD(i){let e;return{c(){e=gn("Clear")},l(t){e=yn(t,"Clear")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function bD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",$$slots:{default:[_D]},$$scope:{ctx:i}}}),n=new cu({props:{$$slots:{default:[vD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&4194304&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&4194304&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function H5(i){let e,t;return e=new _f({props:{value:`${i[1][i[1].length-1].lng.toFixed(6)}, ${i[1][i[1].length-1].lat.toFixed(6)}`,label:"To",readonly:!0,style:"width: 50%"}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&2&&(u.value=`${n[1][n[1].length-1].lng.toFixed(6)}, ${n[1][n[1].length-1].lat.toFixed(6)}`),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function G5(i){let e,t,n,l,u;return t=new _f({props:{value:`${i[3].length} km`,label:"Length",readonly:!0,style:"width: 50%"}}),l=new _f({props:{value:`${i[3].time} min`,label:"Time",readonly:!0,style:"width: 50%"}}),{c(){e=Li("div"),xi(t.$$.fragment),n=$i(),xi(l.$$.fragment),this.h()},l(p){e=Pi(p,"DIV",{style:!0});var o=Ti(e);Ci(t.$$.fragment,o),n=en(o),Ci(l.$$.fragment,o),o.forEach(Oe),this.h()},h(){Ia(e,"display","inline-flex"),Ia(e,"width","100%")},m(p,o){wt(p,e,o),Ai(t,e,null),Xi(e,n),Ai(l,e,null),u=!0},p(p,o){const c={};o&8&&(c.value=`${p[3].length} km`),t.$set(c);const g={};o&8&&(g.value=`${p[3].time} min`),l.$set(g)},i(p){u||(tt(t.$$.fragment,p),tt(l.$$.fragment,p),u=!0)},o(p){ct(t.$$.fragment,p),ct(l.$$.fragment,p),u=!1},d(p){p&&Oe(e),Si(t),Si(l)}}}function wD(i){let e,t,n=kr.valhalla&&lD(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,[u]){kr.valhalla&&n.p(l,u)},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}const Vf="routing-controls-source-line",B2="routing-controls-layer-line",z2="routing-controls-layer-line-label",N2="routing-controls-layer-symbol",Od="routing-controls-source-symbol";function xD(i,e,t){let n,l,u;Vo(i,ng,Q=>t(9,n=Q)),Vo(i,Fu,Q=>t(10,l=Q)),Vo(i,Ld,Q=>t(1,u=Q));const p=kr.valhalla.options.routing;let o=!1,c=[{value:J0.Walking,label:"Walking"},{value:J0.Bicycle,label:"Bicycle"},{value:J0.Car,label:"Car"}],g=c[0].value,_;ws(()=>{u||Ld.update(()=>[])}),sc(()=>{o===!0&&x()});const v=()=>{o?x():w()},w=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(2,o=!0),l.on("click",C),l.fire("routing.on"))},x=()=>{t(2,o=!1),l&&(l.getCanvas().style.cursor="",l.off("click",C),l.fire("routing.off"))},C=Q=>{const Z=Q.lngLat;u||Ld.update(()=>[]),Ld.update(()=>[...u,Z])},T=()=>{l&&(l.getLayer(B2)&&l.removeLayer(B2),l.getLayer(z2)&&l.removeLayer(z2),l.getLayer(N2)&&l.removeLayer(N2),l.getSource(Vf)&&l.removeSource(Vf),l.getSource(Od)&&l.removeSource(Od)),Ld.update(()=>[])},k=()=>{if(!u||u&&u.length<2){t(3,_=void 0);return}const Q=`${kr.valhalla.url}/route`,Z={locations:u.map(Se=>({lon:Se.lng,lat:Se.lat})),costing:g,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},ie=`${Q}?json=${JSON.stringify(Z)}`;fetch(ie).then(Se=>Se.json()).then(Se=>{if("error"in Se)throw u.pop(),new Error(`${Se.status} (${Se.status_code}): ${Se.error} (${Se.error_code})`);let xe=Se.trip.legs.map(Ae=>V(Ae.shape)),le=[];xe.forEach(Ae=>{le=[...le,...Ae]}),t(3,_=Se.trip.summary),t(3,_.length=Number(_.length.toFixed(2)),_),t(3,_.time=Number((_.time/60).toFixed()),_);const Ee={type:"FeatureCollection",features:Se.trip.legs.map(Ae=>{const pt=V(Ae.shape),rt={length:Number(Ae.summary.length.toFixed(2)),time:Number((Ae.summary.time/60).toFixed())};return M(pt,rt)})},me=O(u.map(Ae=>[Ae.lng,Ae.lat]));l&&(l.getSource(Vf)?(l.getSource(Vf).setData(Ee),l.getSource(Od).setData(me)):(l.addSource(Vf,{type:"geojson",data:Ee}),l.addSource(Od,{type:"geojson",data:me}),l.addLayer({id:B2,type:"line",source:Vf,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),l.addLayer({id:z2,type:"symbol",source:Vf,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":p.font,"text-size":p.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":p.fontColor,"text-halo-color":p.fontHaloColor,"text-halo-width":p.fontHalo}}),l.addLayer({id:N2,type:"symbol",source:Od,layout:{"icon-image":p.iconImage,"icon-size":p.iconSize,"text-field":["get","text"],"text-font":p.font,"text-size":p.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":p.fontColor,"text-halo-color":p.fontHaloColor,"text-halo-width":p.fontHalo}})))}).catch(Se=>{ng.update(()=>[...n,Se.message])})},M=(Q=[],Z={})=>({type:"Feature",properties:Z,geometry:{type:"LineString",coordinates:Q}}),O=(Q=[])=>({type:"FeatureCollection",features:Q.map((Z,ie)=>{let Se=(ie+1).toString();return ie===0?Se="From":ie===Q.length-1&&(Se="To"),{type:"Feature",properties:{text:Se},geometry:{type:"Point",coordinates:Z}}})}),V=(Q,Z=6)=>{let ie=0,Se=0,xe=0,le=[],Ee=0,me=0,Ae=null,pt,rt,Pt=Math.pow(10,Z||6);for(;ie<Q.length;){Ae=null,Ee=0,me=0;do Ae=Q.charCodeAt(ie++)-63,me|=(Ae&31)<<Ee,Ee+=5;while(Ae>=32);pt=me&1?~(me>>1):me>>1,Ee=me=0;do Ae=Q.charCodeAt(ie++)-63,me|=(Ae&31)<<Ee,Ee+=5;while(Ae>=32);rt=me&1?~(me>>1):me>>1,Se+=pt,xe+=rt,le.push([xe/Pt,Se/Pt])}return le};function W(Q){g=Q,t(0,g)}const J=()=>T();return i.$$.update=()=>{i.$$.dirty&2&&k(),i.$$.dirty&1&&k()},[g,u,o,_,c,v,T,W,J]}class AD extends fr{constructor(e){super(),dr(this,e,xD,wD,hr,{})}}function W5(i){let e,t,n;return t=new GT({props:{$$slots:{default:[QD]},$$scope:{ctx:i}}}),{c(){e=Li("div"),xi(t.$$.fragment),this.h()},l(l){e=Pi(l,"DIV",{class:!0});var u=Ti(e);Ci(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){hi(e,"class","accordion-container")},m(l,u){wt(l,e,u),Ai(t,e,null),n=!0},p(l,u){const p={};u&8254&&(p.$$scope={dirty:u,ctx:l}),t.$set(p)},i(l){n||(tt(t.$$.fragment,l),n=!0)},o(l){ct(t.$$.fragment,l),n=!1},d(l){l&&Oe(e),Si(t)}}}function SD(i){let e;return{c(){e=gn("Measuring tool")},l(t){e=yn(t,"Measuring tool")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function kD(i){let e;return{c(){e=gn("expand_less")},l(t){e=yn(t,"expand_less")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function CD(i){let e;return{c(){e=gn("expand_more")},l(t){e=yn(t,"expand_more")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function ED(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",on:!0,$$slots:{default:[kD]},$$scope:{ctx:i}}}),n=new oa({props:{class:"material-icons",$$slots:{default:[CD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8192&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8192&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function ID(i){let e,t;return e=new Rh({props:{slot:"icon",toggle:!0,pressed:i[1],$$slots:{default:[ED]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&2&&(u.pressed=n[1]),l&8192&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function TD(i){let e,t;return e=new eM({}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function LD(i){let e,t,n,l;return e=new J1({props:{$$slots:{icon:[ID],default:[SD]},$$scope:{ctx:i}}}),n=new K1({props:{$$slots:{default:[TD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8194&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8192&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function PD(i){let e;return{c(){e=gn("Routing tool")},l(t){e=yn(t,"Routing tool")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function MD(i){let e;return{c(){e=gn("expand_less")},l(t){e=yn(t,"expand_less")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function DD(i){let e;return{c(){e=gn("expand_more")},l(t){e=yn(t,"expand_more")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function OD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",on:!0,$$slots:{default:[MD]},$$scope:{ctx:i}}}),n=new oa({props:{class:"material-icons",$$slots:{default:[DD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8192&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8192&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function FD(i){let e,t;return e=new Rh({props:{slot:"icon",toggle:!0,pressed:i[2],$$slots:{default:[OD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&4&&(u.pressed=n[2]),l&8192&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function RD(i){let e,t;return e=new AD({}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function BD(i){let e,t,n,l;return e=new J1({props:{$$slots:{icon:[FD],default:[PD]},$$scope:{ctx:i}}}),n=new K1({props:{$$slots:{default:[RD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8196&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8192&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function zD(i){let e;return{c(){e=gn("Time Isochrone")},l(t){e=yn(t,"Time Isochrone")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function ND(i){let e;return{c(){e=gn("expand_less")},l(t){e=yn(t,"expand_less")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function jD(i){let e;return{c(){e=gn("expand_more")},l(t){e=yn(t,"expand_more")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function UD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",on:!0,$$slots:{default:[ND]},$$scope:{ctx:i}}}),n=new oa({props:{class:"material-icons",$$slots:{default:[jD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8192&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8192&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function VD(i){let e,t;return e=new Rh({props:{slot:"icon",toggle:!0,pressed:i[3],$$slots:{default:[UD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&8&&(u.pressed=n[3]),l&8192&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function qD(i){let e,t,n;function l(p){i[8](p)}let u={};return i[5].Time!==void 0&&(u.contourType=i[5].Time),e=new Y3({props:u}),pn.push(()=>To(e,"contourType",l)),{c(){xi(e.$$.fragment)},l(p){Ci(e.$$.fragment,p)},m(p,o){Ai(e,p,o),n=!0},p(p,o){const c={};!t&&o&32&&(t=!0,c.contourType=p[5].Time,Lo(()=>t=!1)),e.$set(c)},i(p){n||(tt(e.$$.fragment,p),n=!0)},o(p){ct(e.$$.fragment,p),n=!1},d(p){Si(e,p)}}}function HD(i){let e,t,n,l;return e=new J1({props:{$$slots:{icon:[VD],default:[zD]},$$scope:{ctx:i}}}),n=new K1({props:{$$slots:{default:[qD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8200&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8224&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function GD(i){let e;return{c(){e=gn("Distance Isochrone")},l(t){e=yn(t,"Distance Isochrone")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function WD(i){let e;return{c(){e=gn("expand_less")},l(t){e=yn(t,"expand_less")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function XD(i){let e;return{c(){e=gn("expand_more")},l(t){e=yn(t,"expand_more")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function YD(i){let e,t,n,l;return e=new oa({props:{class:"material-icons",on:!0,$$slots:{default:[WD]},$$scope:{ctx:i}}}),n=new oa({props:{class:"material-icons",$$slots:{default:[XD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8192&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8192&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function ZD(i){let e,t;return e=new Rh({props:{slot:"icon",toggle:!0,pressed:i[4],$$slots:{default:[YD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&16&&(u.pressed=n[4]),l&8192&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function KD(i){let e,t,n;function l(p){i[10](p)}let u={};return i[5].Distance!==void 0&&(u.contourType=i[5].Distance),e=new Y3({props:u}),pn.push(()=>To(e,"contourType",l)),{c(){xi(e.$$.fragment)},l(p){Ci(e.$$.fragment,p)},m(p,o){Ai(e,p,o),n=!0},p(p,o){const c={};!t&&o&32&&(t=!0,c.contourType=p[5].Distance,Lo(()=>t=!1)),e.$set(c)},i(p){n||(tt(e.$$.fragment,p),n=!0)},o(p){ct(e.$$.fragment,p),n=!1},d(p){Si(e,p)}}}function JD(i){let e,t,n,l;return e=new J1({props:{$$slots:{icon:[ZD],default:[GD]},$$scope:{ctx:i}}}),n=new K1({props:{$$slots:{default:[KD]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&8208&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&8224&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function QD(i){let e,t,n,l,u,p,o,c,g,_,v,w;function x(J){i[6](J)}let C={$$slots:{default:[LD]},$$scope:{ctx:i}};i[1]!==void 0&&(C.open=i[1]),e=new Yp({props:C}),pn.push(()=>To(e,"open",x));function T(J){i[7](J)}let k={$$slots:{default:[BD]},$$scope:{ctx:i}};i[2]!==void 0&&(k.open=i[2]),l=new Yp({props:k}),pn.push(()=>To(l,"open",T));function M(J){i[9](J)}let O={$$slots:{default:[HD]},$$scope:{ctx:i}};i[3]!==void 0&&(O.open=i[3]),o=new Yp({props:O}),pn.push(()=>To(o,"open",M));function V(J){i[11](J)}let W={$$slots:{default:[JD]},$$scope:{ctx:i}};return i[4]!==void 0&&(W.open=i[4]),_=new Yp({props:W}),pn.push(()=>To(_,"open",V)),{c(){xi(e.$$.fragment),n=$i(),xi(l.$$.fragment),p=$i(),xi(o.$$.fragment),g=$i(),xi(_.$$.fragment)},l(J){Ci(e.$$.fragment,J),n=en(J),Ci(l.$$.fragment,J),p=en(J),Ci(o.$$.fragment,J),g=en(J),Ci(_.$$.fragment,J)},m(J,Q){Ai(e,J,Q),wt(J,n,Q),Ai(l,J,Q),wt(J,p,Q),Ai(o,J,Q),wt(J,g,Q),Ai(_,J,Q),w=!0},p(J,Q){const Z={};Q&8194&&(Z.$$scope={dirty:Q,ctx:J}),!t&&Q&2&&(t=!0,Z.open=J[1],Lo(()=>t=!1)),e.$set(Z);const ie={};Q&8196&&(ie.$$scope={dirty:Q,ctx:J}),!u&&Q&4&&(u=!0,ie.open=J[2],Lo(()=>u=!1)),l.$set(ie);const Se={};Q&8232&&(Se.$$scope={dirty:Q,ctx:J}),!c&&Q&8&&(c=!0,Se.open=J[3],Lo(()=>c=!1)),o.$set(Se);const xe={};Q&8240&&(xe.$$scope={dirty:Q,ctx:J}),!v&&Q&16&&(v=!0,xe.open=J[4],Lo(()=>v=!1)),_.$set(xe)},i(J){w||(tt(e.$$.fragment,J),tt(l.$$.fragment,J),tt(o.$$.fragment,J),tt(_.$$.fragment,J),w=!0)},o(J){ct(e.$$.fragment,J),ct(l.$$.fragment,J),ct(o.$$.fragment,J),ct(_.$$.fragment,J),w=!1},d(J){Si(e,J),J&&Oe(n),Si(l,J),J&&Oe(p),Si(o,J),J&&Oe(g),Si(_,J)}}}function $D(i){let e,t,n=i[0]&&W5(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,[u]){l[0]?n?(n.p(l,u),u&1&&tt(n,1)):(n=W5(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function eO(i,e,t){let n;Vo(i,Pd,T=>t(12,n=T));let{isAdvancedTabVisible:l=!1}=e,u=!0,p=!1,o=!1,c=!1;ws(()=>{switch(n){case"Measure":t(1,u=!0);break;case"Routing":t(2,p=!0);break;case"TimeIsochrone":t(3,o=!0);break;case"DistanceIsochrone":t(4,c=!0);break}});function g(T){u=T,t(1,u)}function _(T){p=T,t(2,p)}function v(T){i.$$.not_equal(Mu.Time,T)&&(Mu.Time=T,t(5,Mu))}function w(T){o=T,t(3,o)}function x(T){i.$$.not_equal(Mu.Distance,T)&&(Mu.Distance=T,t(5,Mu))}function C(T){c=T,t(4,c)}return i.$$set=T=>{"isAdvancedTabVisible"in T&&t(0,l=T.isAdvancedTabVisible)},i.$$.update=()=>{i.$$.dirty&30&&(u===!0?Ea(Pd,n="Measure",n):p===!0?Ea(Pd,n="Routing",n):o===!0?Ea(Pd,n="TimeIsochrone",n):c===!0&&Ea(Pd,n="DistanceIsochrone",n))},[l,u,p,o,c,Mu,g,_,v,w,x,C]}class tO extends fr{constructor(e){super(),dr(this,e,eO,$D,hr,{isAdvancedTabVisible:0})}}var Nd=(i=>(i.LAYERS="Layers",i.ADVANCED="Advanced",i))(Nd||{}),Z3={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e="fas",t="layer-group",n=576,l=512,u=[],p="f5fd",o="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z";i.definition={prefix:e,iconName:t,icon:[n,l,u,p,o]},i.faLayerGroup=i.definition,i.prefix=e,i.iconName=t,i.width=n,i.height=l,i.ligatures=u,i.unicode=p,i.svgPathData=o,i.aliases=u})(Z3);var K3={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e="fas",t="chart-simple",n=448,l=512,u=[],p="e473",o="M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z";i.definition={prefix:e,iconName:t,icon:[n,l,u,p,o]},i.faChartSimple=i.definition,i.prefix=e,i.iconName=t,i.width=n,i.height=l,i.ligatures=u,i.unicode=p,i.svgPathData=o,i.aliases=u})(K3);const{window:xg}=D1;function X5(i,e,t){const n=i.slice();return n[23]=e[t],n}function Y5(i){let e,t,n,l,u,p,o=i[23].label+"",c,g,_,v,w,x,C;l=new ry({props:{icon:i[23].icon,scale:1}});function T(){return i[13](i[23])}return{c(){e=Li("li"),t=Li("a"),n=Li("span"),xi(l.$$.fragment),u=$i(),p=Li("span"),c=gn(o),_=$i(),v=Li("li"),this.h()},l(k){e=Pi(k,"LI",{class:!0});var M=Ti(e);t=Pi(M,"A",{});var O=Ti(t);n=Pi(O,"SPAN",{class:!0});var V=Ti(n);Ci(l.$$.fragment,V),V.forEach(Oe),u=en(O),p=Pi(O,"SPAN",{});var W=Ti(p);c=yn(W,o),W.forEach(Oe),O.forEach(Oe),M.forEach(Oe),_=en(k),v=Pi(k,"LI",{}),Ti(v).forEach(Oe),this.h()},h(){hi(n,"class","icon ml-2"),hi(e,"class",g=i[3].label===i[23].label?"is-active":"")},m(k,M){wt(k,e,M),Xi(e,t),Xi(t,n),Ai(l,n,null),Xi(t,u),Xi(t,p),Xi(p,c),wt(k,_,M),wt(k,v,M),w=!0,x||(C=Vn(e,"click",T),x=!0)},p(k,M){i=k,(!w||M&8&&g!==(g=i[3].label===i[23].label?"is-active":""))&&hi(e,"class",g)},i(k){w||(tt(l.$$.fragment,k),w=!0)},o(k){ct(l.$$.fragment,k),w=!1},d(k){k&&Oe(e),Si(l),k&&Oe(_),k&&Oe(v),x=!1,C()}}}function iO(i){let e,t,n,l,u,p,o,c,g=i[9],_=[];for(let w=0;w<g.length;w+=1)_[w]=Y5(X5(i,g,w));const v=w=>ct(_[w],1,1,()=>{_[w]=null});return u=new jT({props:{isLayersTabVisible:i[5]}}),o=new tO({props:{isAdvancedTabVisible:i[6]}}),{c(){e=Li("div"),t=Li("div"),n=Li("ul");for(let w=0;w<_.length;w+=1)_[w].c();l=$i(),xi(u.$$.fragment),p=$i(),xi(o.$$.fragment),this.h()},l(w){e=Pi(w,"DIV",{slot:!0,class:!0});var x=Ti(e);t=Pi(x,"DIV",{class:!0});var C=Ti(t);n=Pi(C,"UL",{});var T=Ti(n);for(let k=0;k<_.length;k+=1)_[k].l(T);T.forEach(Oe),C.forEach(Oe),l=en(x),Ci(u.$$.fragment,x),p=en(x),Ci(o.$$.fragment,x),x.forEach(Oe),this.h()},h(){hi(t,"class","tabs is-centered is-small mb-0"),hi(e,"slot","primary"),hi(e,"class","drawer-content svelte-1cz9ygz")},m(w,x){wt(w,e,x),Xi(e,t),Xi(t,n);for(let C=0;C<_.length;C+=1)_[C].m(n,null);Xi(e,l),Ai(u,e,null),Xi(e,p),Ai(o,e,null),c=!0},p(w,x){if(x&520){g=w[9];let k;for(k=0;k<g.length;k+=1){const M=X5(w,g,k);_[k]?(_[k].p(M,x),tt(_[k],1)):(_[k]=Y5(M),_[k].c(),tt(_[k],1),_[k].m(n,null))}for(Sr(),k=g.length;k<_.length;k+=1)v(k);Ar()}const C={};x&32&&(C.isLayersTabVisible=w[5]),u.$set(C);const T={};x&64&&(T.isAdvancedTabVisible=w[6]),o.$set(T)},i(w){if(!c){for(let x=0;x<g.length;x+=1)tt(_[x]);tt(u.$$.fragment,w),tt(o.$$.fragment,w),c=!0}},o(w){_=_.filter(Boolean);for(let x=0;x<_.length;x+=1)ct(_[x]);ct(u.$$.fragment,w),ct(o.$$.fragment,w),c=!1},d(w){w&&Oe(e),sl(_,w),Si(u),Si(o)}}}function nO(i){let e,t,n,l;const u=i[11].default,p=nr(u,i,i[15],null);return{c(){e=Li("div"),p&&p.c(),t=$i(),n=Li("div"),this.h()},l(o){e=Pi(o,"DIV",{slot:!0,class:!0});var c=Ti(e);p&&p.l(c),t=en(c),n=Pi(c,"DIV",{}),Ti(n).forEach(Oe),c.forEach(Oe),this.h()},h(){hi(e,"slot","secondary"),hi(e,"class","main-content svelte-1cz9ygz")},m(o,c){wt(o,e,c),p&&p.m(e,null),Xi(e,t),Xi(e,n),l=!0},p(o,c){p&&p.p&&(!l||c&32768)&&rr(p,u,o,o[15],l?sr(u,o[15],c,null):or(o[15]),null)},i(o){l||(tt(p,o),l=!0)},o(o){ct(p,o),l=!1},d(o){o&&Oe(e),p&&p.d(o)}}}function rO(i){let e,t,n,l;Dh(i[12]);let u={initialPrimarySize:"0%",minPrimarySize:i[0]?"300px":"0px",minSecondarySize:i[4]?"0px":"50%",splitterSize:i[8],$$slots:{secondary:[nO],primary:[iO]},$$scope:{ctx:i}};return e=new zC({props:u}),i[14](e),e.$on("changed",i[10]),{c(){xi(e.$$.fragment)},l(p){Ci(e.$$.fragment,p)},m(p,o){Ai(e,p,o),t=!0,n||(l=Vn(xg,"resize",i[12]),n=!0)},p(p,[o]){const c={};o&1&&(c.minPrimarySize=p[0]?"300px":"0px"),o&16&&(c.minSecondarySize=p[4]?"0px":"50%"),o&256&&(c.splitterSize=p[8]),o&32872&&(c.$$scope={dirty:o,ctx:p}),e.$set(c)},i(p){t||(tt(e.$$.fragment,p),t=!0)},o(p){ct(e.$$.fragment,p),t=!1},d(p){i[14](null),Si(e,p),n=!1,l()}}}function oO(i,e,t){let n;Vo(i,Fu,Se=>t(16,n=Se));let{$$slots:l={},$$scope:u}=e,p=0,o=0,c=p<760;const g=()=>{t(4,c=p<768)};ws(()=>{t(4,c=window.matchMedia("only screen and (max-width: 768px)").matches)});let{open:_=!1}=e,v=[{icon:Z3.faLayerGroup,label:Nd.LAYERS},{icon:K3.faChartSimple,label:Nd.ADVANCED}],w=v[0],x=!1,C=!1,T,k="0px";const M=()=>{switch(t(5,x=!1),t(6,C=!1),w.label){case Nd.LAYERS:t(5,x=!0);break;case Nd.ADVANCED:t(6,C=!0);break}},O=()=>{V()},V=()=>{if(!!T){if(_===!0)if(c)T.setPercent(100),t(8,k="0px");else{const Se=380/p*100;T.setPercent(Se),t(8,k="10px")}else T.setPercent(0),t(8,k="0px");W()}},W=()=>{n||(n.triggerRepaint(),n.resize())},J=()=>{W(),T.getPercent()===0?t(0,_=!1):t(0,_=!0)};V();function Q(){t(1,p=xg.innerWidth),t(2,o=xg.innerHeight)}const Z=Se=>t(3,w=Se);function ie(Se){pn[Se?"unshift":"push"](()=>{T=Se,t(7,T)})}return i.$$set=Se=>{"open"in Se&&t(0,_=Se.open),"$$scope"in Se&&t(15,u=Se.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&g(),i.$$.dirty&4&&g(),i.$$.dirty&8&&M(),i.$$.dirty&1&&O()},[_,p,o,w,c,x,C,T,k,v,J,l,Q,Z,ie,u]}class sO extends fr{constructor(e){super(),dr(this,e,oO,rO,hr,{open:0})}}const aO=i=>({noResultsText:i[0]&2048}),Z5=i=>({noResultsText:i[11]}),lO=i=>({createText:i[0]&16384}),K5=i=>({createText:i[14]}),uO=i=>({loadingText:i[0]&4096}),J5=i=>({loadingText:i[12]});function Q5(i,e,t){const n=i.slice();return n[116]=e[t],n[118]=t,n}const cO=i=>({item:i[1]&1,label:i[1]&1}),$5=i=>({item:i[116].item,label:i[116].highlighted?i[116].highlighted:i[116].label});function e4(i,e,t){const n=i.slice();return n[119]=e[t],n}const hO=i=>({label:i[0]&2,item:i[0]&2}),t4=i=>({label:i[38](i[119]),item:i[119],unselectItem:i[45]});function i4(i,e,t){const n=i.slice();return n[118]=e[t],n}function fO(i){let e,t=i[1],n=[];for(let l=0;l<t.length;l+=1)n[l]=n4(i4(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=hn()},l(l){for(let u=0;u<n.length;u+=1)n[u].l(l);e=hn()},m(l,u){for(let p=0;p<n.length;p+=1)n[p].m(l,u);wt(l,e,u)},p(l,u){if(u[0]&18|u[1]&128){t=l[1];let p;for(p=0;p<t.length;p+=1){const o=i4(l,t,p);n[p]?n[p].p(o,u):(n[p]=n4(o),n[p].c(),n[p].m(e.parentNode,e))}for(;p<n.length;p+=1)n[p].d(1);n.length=t.length}},d(l){sl(n,l),l&&Oe(e)}}}function dO(i){let e,t;return{c(){e=Li("option"),t=gn(i[3]),this.h()},l(n){e=Pi(n,"OPTION",{class:!0});var l=Ti(e);t=yn(l,i[3]),l.forEach(Oe),this.h()},h(){e.__value=i[2],e.value=e.__value,e.selected=!0,hi(e,"class","svelte-1nqq7zl")},m(n,l){wt(n,e,l),Xi(e,t)},p(n,l){l[0]&8&&bs(t,n[3]),l[0]&4&&(e.__value=n[2],e.value=e.__value)},d(n){n&&Oe(e)}}}function n4(i){let e,t=i[38](i[118])+"",n,l,u;return{c(){e=Li("option"),n=gn(t),l=$i(),this.h()},l(p){e=Pi(p,"OPTION",{class:!0});var o=Ti(e);n=yn(o,t),l=en(o),o.forEach(Oe),this.h()},h(){e.__value=u=i[4](i[118],!0),e.value=e.__value,e.selected=!0,hi(e,"class","svelte-1nqq7zl")},m(p,o){wt(p,e,o),Xi(e,n),Xi(e,l)},p(p,o){o[0]&2&&t!==(t=p[38](p[118])+"")&&bs(n,t),o[0]&18&&u!==(u=p[4](p[118],!0))&&(e.__value=u,e.value=e.__value)},d(p){p&&Oe(e)}}}function r4(i){let e,t,n=i[1],l=[];for(let p=0;p<n.length;p+=1)l[p]=o4(e4(i,n,p));const u=p=>ct(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=hn()},l(p){for(let o=0;o<l.length;o+=1)l[o].l(p);e=hn()},m(p,o){for(let c=0;c<l.length;c+=1)l[c].m(p,o);wt(p,e,o),t=!0},p(p,o){if(o[0]&2|o[1]&16512|o[2]&1048576){n=p[1];let c;for(c=0;c<n.length;c+=1){const g=e4(p,n,c);l[c]?(l[c].p(g,o),tt(l[c],1)):(l[c]=o4(g),l[c].c(),tt(l[c],1),l[c].m(e.parentNode,e))}for(Sr(),c=n.length;c<l.length;c+=1)u(c);Ar()}},i(p){if(!t){for(let o=0;o<n.length;o+=1)tt(l[o]);t=!0}},o(p){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ct(l[o]);t=!1},d(p){sl(l,p),p&&Oe(e)}}}function pO(i){let e,t,n=i[38](i[119])+"",l,u,p,o,c,g;return{c(){e=Li("div"),t=Li("span"),l=gn(n),u=$i(),p=Li("span"),o=$i(),this.h()},l(_){e=Pi(_,"DIV",{class:!0});var v=Ti(e);t=Pi(v,"SPAN",{class:!0});var w=Ti(t);l=yn(w,n),w.forEach(Oe),u=en(v),p=Pi(v,"SPAN",{class:!0}),Ti(p).forEach(Oe),v.forEach(Oe),o=en(_),this.h()},h(){hi(t,"class","tag svelte-1nqq7zl"),hi(p,"class","tag is-delete svelte-1nqq7zl"),hi(e,"class","tags has-addons svelte-1nqq7zl")},m(_,v){wt(_,e,v),Xi(e,t),Xi(t,l),Xi(e,u),Xi(e,p),wt(_,o,v),c||(g=Vn(p,"click",k4(function(){Zr(i[45](i[119]))&&i[45](i[119]).apply(this,arguments)})),c=!0)},p(_,v){i=_,v[0]&2&&n!==(n=i[38](i[119])+"")&&bs(l,n)},d(_){_&&Oe(e),_&&Oe(o),c=!1,g()}}}function o4(i){let e;const t=i[83].tag,n=nr(t,i,i[82],t4),l=n||pO(i);return{c(){l&&l.c()},l(u){l&&l.l(u)},m(u,p){l&&l.m(u,p),e=!0},p(u,p){n?n.p&&(!e||p[0]&2|p[2]&1048576)&&rr(n,t,u,u[82],e?sr(t,u[82],p,hO):or(u[82]),t4):l&&l.p&&(!e||p[0]&2)&&l.p(u,e?p:[-1,-1,-1,-1])},i(u){e||(tt(l,u),e=!0)},o(u){ct(l,u),e=!1},d(u){l&&l.d(u)}}}function s4(i){let e,t,n,l;return{c(){e=Li("span"),t=gn("\u2716"),this.h()},l(u){e=Pi(u,"SPAN",{class:!0});var p=Ti(e);t=yn(p,"\u2716"),p.forEach(Oe),this.h()},h(){hi(e,"class","autocomplete-clear-button svelte-1nqq7zl")},m(u,p){wt(u,e,p),Xi(e,t),n||(l=Vn(e,"click",i[49]),n=!0)},p:Co,d(u){u&&Oe(e),n=!1,l()}}}function mO(i){let e,t;const n=i[83]["no-results"],l=nr(n,i,i[82],Z5),u=l||vO(i);return{c(){e=Li("div"),u&&u.c(),this.h()},l(p){e=Pi(p,"DIV",{class:!0});var o=Ti(e);u&&u.l(o),o.forEach(Oe),this.h()},h(){hi(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(p,o){wt(p,e,o),u&&u.m(e,null),t=!0},p(p,o){l?l.p&&(!t||o[0]&2048|o[2]&1048576)&&rr(l,n,p,p[82],t?sr(n,p[82],o,aO):or(p[82]),Z5):u&&u.p&&(!t||o[0]&2048)&&u.p(p,t?o:[-1,-1,-1,-1])},i(p){t||(tt(u,p),t=!0)},o(p){ct(u,p),t=!1},d(p){p&&Oe(e),u&&u.d(p)}}}function gO(i){let e,t,n,l;const u=i[83].create,p=nr(u,i,i[82],K5),o=p||bO(i);return{c(){e=Li("div"),o&&o.c(),this.h()},l(c){e=Pi(c,"DIV",{class:!0});var g=Ti(e);o&&o.l(g),g.forEach(Oe),this.h()},h(){hi(e,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(c,g){wt(c,e,g),o&&o.m(e,null),t=!0,n||(l=Vn(e,"click",i[39]),n=!0)},p(c,g){p?p.p&&(!t||g[0]&16384|g[2]&1048576)&&rr(p,u,c,c[82],t?sr(u,c[82],g,lO):or(c[82]),K5):o&&o.p&&(!t||g[0]&16384)&&o.p(c,t?g:[-1,-1,-1,-1])},i(c){t||(tt(o,c),t=!0)},o(c){ct(o,c),t=!1},d(c){c&&Oe(e),o&&o.d(c),n=!1,l()}}}function yO(i){let e,t;const n=i[83].loading,l=nr(n,i,i[82],J5),u=l||wO(i);return{c(){e=Li("div"),u&&u.c(),this.h()},l(p){e=Pi(p,"DIV",{class:!0});var o=Ti(e);u&&u.l(o),o.forEach(Oe),this.h()},h(){hi(e,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(p,o){wt(p,e,o),u&&u.m(e,null),t=!0},p(p,o){l?l.p&&(!t||o[0]&4096|o[2]&1048576)&&rr(l,n,p,p[82],t?sr(n,p[82],o,uO):or(p[82]),J5):u&&u.p&&(!t||o[0]&4096)&&u.p(p,t?o:[-1,-1,-1,-1])},i(p){t||(tt(u,p),t=!0)},o(p){ct(u,p),t=!1},d(p){p&&Oe(e),u&&u.d(p)}}}function _O(i){let e,t,n,l=i[31],u=[];for(let c=0;c<l.length;c+=1)u[c]=l4(Q5(i,l,c));const p=c=>ct(u[c],1,1,()=>{u[c]=null});let o=i[5]>0&&i[31].length>i[5]&&u4(i);return{c(){for(let c=0;c<u.length;c+=1)u[c].c();e=$i(),o&&o.c(),t=hn()},l(c){for(let g=0;g<u.length;g+=1)u[g].l(c);e=en(c),o&&o.l(c),t=hn()},m(c,g){for(let _=0;_<u.length;_+=1)u[_].m(c,g);wt(c,e,g),o&&o.m(c,g),wt(c,t,g),n=!0},p(c,g){if(g[0]&1073741856|g[1]&524801|g[2]&1048576){l=c[31];let _;for(_=0;_<l.length;_+=1){const v=Q5(c,l,_);u[_]?(u[_].p(v,g),tt(u[_],1)):(u[_]=l4(v),u[_].c(),tt(u[_],1),u[_].m(e.parentNode,e))}for(Sr(),_=l.length;_<u.length;_+=1)p(_);Ar()}c[5]>0&&c[31].length>c[5]?o?o.p(c,g):(o=u4(c),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i(c){if(!n){for(let g=0;g<l.length;g+=1)tt(u[g]);n=!0}},o(c){u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)ct(u[g]);n=!1},d(c){sl(u,c),c&&Oe(e),o&&o.d(c),c&&Oe(t)}}}function vO(i){let e;return{c(){e=gn(i[11])},l(t){e=yn(t,i[11])},m(t,n){wt(t,e,n)},p(t,n){n[0]&2048&&bs(e,t[11])},d(t){t&&Oe(e)}}}function bO(i){let e;return{c(){e=gn(i[14])},l(t){e=yn(t,i[14])},m(t,n){wt(t,e,n)},p(t,n){n[0]&16384&&bs(e,t[14])},d(t){t&&Oe(e)}}}function wO(i){let e;return{c(){e=gn(i[12])},l(t){e=yn(t,i[12])},m(t,n){wt(t,e,n)},p(t,n){n[0]&4096&&bs(e,t[12])},d(t){t&&Oe(e)}}}function a4(i){let e,t,n,l,u;const p=i[83].item,o=nr(p,i,i[82],$5),c=o||SO(i);function g(){return i[86](i[116])}function _(){return i[87](i[118])}return{c(){e=Li("div"),c&&c.c(),this.h()},l(v){e=Pi(v,"DIV",{class:!0});var w=Ti(e);c&&c.l(w),w.forEach(Oe),this.h()},h(){hi(e,"class",t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"),ih(e,"confirmed",i[50](i[116].item))},m(v,w){wt(v,e,w),c&&c.m(e,null),n=!0,l||(u=[Vn(e,"click",g),Vn(e,"pointerenter",_)],l=!0)},p(v,w){i=v,o?o.p&&(!n||w[1]&1|w[2]&1048576)&&rr(o,p,i,i[82],n?sr(p,i[82],w,cO):or(i[82]),$5):c&&c.p&&(!n||w[1]&1)&&c.p(i,n?w:[-1,-1,-1,-1]),(!n||w[0]&1073741824&&t!==(t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"))&&hi(e,"class",t),(!n||w[0]&1073741824|w[1]&524289)&&ih(e,"confirmed",i[50](i[116].item))},i(v){n||(tt(c,v),n=!0)},o(v){ct(c,v),n=!1},d(v){v&&Oe(e),c&&c.d(v),l=!1,bo(u)}}}function xO(i){let e,t=i[116].label+"",n;return{c(){e=new E4(!1),n=hn(),this.h()},l(l){e=I4(l,!1),n=hn(),this.h()},h(){e.a=n},m(l,u){e.m(t,l,u),wt(l,n,u)},p(l,u){u[1]&1&&t!==(t=l[116].label+"")&&e.p(t)},d(l){l&&Oe(n),l&&e.d()}}}function AO(i){let e,t=i[116].highlighted+"",n;return{c(){e=new E4(!1),n=hn(),this.h()},l(l){e=I4(l,!1),n=hn(),this.h()},h(){e.a=n},m(l,u){e.m(t,l,u),wt(l,n,u)},p(l,u){u[1]&1&&t!==(t=l[116].highlighted+"")&&e.p(t)},d(l){l&&Oe(n),l&&e.d()}}}function SO(i){let e;function t(u,p){return u[116].highlighted?AO:xO}let n=t(i),l=n(i);return{c(){l.c(),e=hn()},l(u){l.l(u),e=hn()},m(u,p){l.m(u,p),wt(u,e,p)},p(u,p){n===(n=t(u))&&l?l.p(u,p):(l.d(1),l=n(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function l4(i){let e,t,n=i[116]&&(i[5]<=0||i[118]<i[5])&&a4(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,u){l[116]&&(l[5]<=0||l[118]<l[5])?n?(n.p(l,u),u[0]&32|u[1]&1&&tt(n,1)):(n=a4(l),n.c(),tt(n,1),n.m(e.parentNode,e)):n&&(Sr(),ct(n,1,1,()=>{n=null}),Ar())},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function u4(i){let e,t=i[13]&&c4(i);return{c(){t&&t.c(),e=hn()},l(n){t&&t.l(n),e=hn()},m(n,l){t&&t.m(n,l),wt(n,e,l)},p(n,l){n[13]?t?t.p(n,l):(t=c4(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&Oe(e)}}}function c4(i){let e,t,n=i[31].length-i[5]+"",l,u,p;return{c(){e=Li("div"),t=gn("..."),l=gn(n),u=$i(),p=gn(i[13]),this.h()},l(o){e=Pi(o,"DIV",{class:!0});var c=Ti(e);t=yn(c,"..."),l=yn(c,n),u=en(c),p=yn(c,i[13]),c.forEach(Oe),this.h()},h(){hi(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(o,c){wt(o,e,c),Xi(e,t),Xi(e,l),Xi(e,u),Xi(e,p)},p(o,c){c[0]&32|c[1]&1&&n!==(n=o[31].length-o[5]+"")&&bs(l,n),c[0]&8192&&bs(p,o[13])},d(o){o&&Oe(e)}}}function kO(i){let e,t,n,l,u,p,o,c,g,_,v,w,x,C,T,k,M,O,V,W;function J(me,Ae){if(!me[6]&&me[2])return dO;if(me[6]&&me[1])return fO}let Q=J(i),Z=Q&&Q(i),ie=i[6]&&i[1]&&r4(i),Se=i[35]&&s4(i);const xe=[_O,yO,gO,mO],le=[];function Ee(me,Ae){return me[31]&&me[31].length>0?0:me[34]&&me[12]?1:me[7]?2:me[11]?3:-1}return~(C=Ee(i))&&(T=le[C]=xe[C](i)),{c(){e=Li("div"),t=Li("select"),Z&&Z.c(),n=$i(),l=Li("div"),ie&&ie.c(),u=$i(),p=Li("input"),v=$i(),Se&&Se.c(),w=$i(),x=Li("div"),T&&T.c(),this.h()},l(me){e=Pi(me,"DIV",{class:!0});var Ae=Ti(e);t=Pi(Ae,"SELECT",{name:!0,id:!0,class:!0});var pt=Ti(t);Z&&Z.l(pt),pt.forEach(Oe),n=en(Ae),l=Pi(Ae,"DIV",{class:!0});var rt=Ti(l);ie&&ie.l(rt),u=en(rt),p=Pi(rt,"INPUT",{type:!0,class:!0,id:!0,autocomplete:!0,placeholder:!0,name:!0,title:!0,tabindex:!0}),v=en(rt),Se&&Se.l(rt),rt.forEach(Oe),w=en(Ae),x=Pi(Ae,"DIV",{class:!0});var Pt=Ti(x);T&&T.l(Pt),Pt.forEach(Oe),Ae.forEach(Oe),this.h()},h(){hi(t,"name",i[20]),hi(t,"id",i[21]),t.multiple=i[6],hi(t,"class","svelte-1nqq7zl"),hi(p,"type","text"),hi(p,"class",o=(i[17]?i[17]:"")+" "+(i[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),hi(p,"id",c=i[18]?i[18]:""),hi(p,"autocomplete",g=i[23]?"on":"off"),hi(p,"placeholder",i[15]),hi(p,"name",i[19]),p.disabled=i[26],p.required=i[28],hi(p,"title",i[22]),p.readOnly=_=i[24]||i[8]&&i[1],hi(p,"tabindex",i[29]),hi(l,"class","input-container svelte-1nqq7zl"),hi(x,"class",k=(i[25]?i[25]:"")+" autocomplete-list "+(i[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),hi(e,"class",M=(i[16]?i[16]:"")+" "+(i[9]||!i[0].length?"hide-arrow":"")+" "+(i[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+i[37]+" svelte-1nqq7zl"),ih(e,"show-clear",i[35]),ih(e,"is-loading",i[10]&&i[34])},m(me,Ae){wt(me,e,Ae),Xi(e,t),Z&&Z.m(t,null),Xi(e,n),Xi(e,l),ie&&ie.m(l,null),Xi(l,u),Xi(l,p),i[84](p),td(p,i[3]),Xi(l,v),Se&&Se.m(l,null),Xi(e,w),Xi(e,x),~C&&le[C].m(x,null),i[88](x),O=!0,V||(W=[Vn(window,"click",i[41]),Vn(p,"input",i[85]),Vn(p,"input",i[44]),Vn(p,"focus",i[47]),Vn(p,"blur",i[48]),Vn(p,"keydown",i[42]),Vn(p,"click",i[46]),Vn(p,"keypress",i[43])],V=!0)},p(me,Ae){Q===(Q=J(me))&&Z?Z.p(me,Ae):(Z&&Z.d(1),Z=Q&&Q(me),Z&&(Z.c(),Z.m(t,null))),(!O||Ae[0]&1048576)&&hi(t,"name",me[20]),(!O||Ae[0]&2097152)&&hi(t,"id",me[21]),(!O||Ae[0]&64)&&(t.multiple=me[6]),me[6]&&me[1]?ie?(ie.p(me,Ae),Ae[0]&66&&tt(ie,1)):(ie=r4(me),ie.c(),tt(ie,1),ie.m(l,u)):ie&&(Sr(),ct(ie,1,1,()=>{ie=null}),Ar()),(!O||Ae[0]&134348800&&o!==(o=(me[17]?me[17]:"")+" "+(me[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&hi(p,"class",o),(!O||Ae[0]&262144&&c!==(c=me[18]?me[18]:""))&&hi(p,"id",c),(!O||Ae[0]&8388608&&g!==(g=me[23]?"on":"off"))&&hi(p,"autocomplete",g),(!O||Ae[0]&32768)&&hi(p,"placeholder",me[15]),(!O||Ae[0]&524288)&&hi(p,"name",me[19]),(!O||Ae[0]&67108864)&&(p.disabled=me[26]),(!O||Ae[0]&268435456)&&(p.required=me[28]),(!O||Ae[0]&4194304)&&hi(p,"title",me[22]),(!O||Ae[0]&16777474&&_!==(_=me[24]||me[8]&&me[1]))&&(p.readOnly=_),(!O||Ae[0]&536870912)&&hi(p,"tabindex",me[29]),Ae[0]&8&&p.value!==me[3]&&td(p,me[3]),me[35]?Se?Se.p(me,Ae):(Se=s4(me),Se.c(),Se.m(l,null)):Se&&(Se.d(1),Se=null);let pt=C;C=Ee(me),C===pt?~C&&le[C].p(me,Ae):(T&&(Sr(),ct(le[pt],1,1,()=>{le[pt]=null}),Ar()),~C?(T=le[C],T?T.p(me,Ae):(T=le[C]=xe[C](me),T.c()),tt(T,1),T.m(x,null)):T=null),(!O||Ae[0]&33554432|Ae[1]&32&&k!==(k=(me[25]?me[25]:"")+" autocomplete-list "+(me[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&hi(x,"class",k),(!O||Ae[0]&66113&&M!==(M=(me[16]?me[16]:"")+" "+(me[9]||!me[0].length?"hide-arrow":"")+" "+(me[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+me[37]+" svelte-1nqq7zl"))&&hi(e,"class",M),(!O||Ae[0]&66113|Ae[1]&16)&&ih(e,"show-clear",me[35]),(!O||Ae[0]&67137|Ae[1]&8)&&ih(e,"is-loading",me[10]&&me[34])},i(me){O||(tt(ie),tt(T),O=!0)},o(me){ct(ie),ct(T),O=!1},d(me){me&&Oe(e),Z&&Z.d(),ie&&ie.d(),i[84](null),Se&&Se.d(),~C&&le[C].d(),i[88](null),V=!1,bo(W)}}}function CO(i,e){if(typeof i!="function"){console.error("Not a function: "+i+", argument: "+e);return}let t;try{t=i(e)}catch{console.warn("Error executing Autocomplete function on value: "+e+" function: "+i)}return t}function i1(i,e){let t=CO(i,e);return t==null&&(t=""),typeof t!="string"&&(t=t.toString()),t}function Ag(i,e){if(!i)return 0;const t=i.keywords;let n=0;return e.forEach(l=>{t.includes(l)&&n++}),n}function EO(i,e,t){return Ag(e,t)-Ag(i,t)}function n1(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function IO(i,e,t){let n,l,{$$slots:u={},$$scope:p}=e,{items:o=[]}=e,{searchFunction:c=!1}=e,{labelFieldName:g=void 0}=e,{keywordsFieldName:_=g}=e,{valueFieldName:v=void 0}=e,{labelFunction:w=function(Ft){return Ft==null?"":g?Ft[g]:Ft}}=e,{keywordsFunction:x=function(Ft){return Ft==null?"":_?Ft[_]:w(Ft)}}=e,{valueFunction:C=function(Ft,tr=!1){return Ft==null?Ft:!Se||tr?v?Ft[v]:Ft:Ft.map(ur=>v?ur[v]:ur)}}=e,{keywordsCleanFunction:T=function(Ft){return Ft}}=e,{textCleanFunction:k=function(Ft){return Ft}}=e,{beforeChange:M=function(Ft,tr){return!0}}=e,{onChange:O=function(Ft){}}=e,{onFocus:V=function(){}}=e,{onBlur:W=function(){}}=e,{onCreate:J=function(Ft){ai&&console.log("onCreate: "+Ft)}}=e,{selectFirstIfEmpty:Q=!1}=e,{minCharactersToSearch:Z=1}=e,{maxItemsToShowInList:ie=0}=e,{multiple:Se=!1}=e,{create:xe=!1}=e,{ignoreAccents:le=!0}=e,{matchAllKeywords:Ee=!0}=e,{sortByMatchedKeywords:me=!1}=e,{itemFilterFunction:Ae=void 0}=e,{itemSortFunction:pt=void 0}=e,{lock:rt=!1}=e,{delay:Pt=0}=e,{localFiltering:We=!0}=e,{localSorting:be=!0}=e,{cleanUserText:Le=!0}=e,{closeOnBlur:Ue=!1}=e,{hideArrow:ce=!1}=e,{showClear:Ie=!1}=e,{showLoadingIndicator:de=!1}=e,{noResultsText:ge="No results found"}=e,{loadingText:Re="Loading results..."}=e,{moreItemsText:Ze="items not shown"}=e,{createText:ut="Not found, add anyway?"}=e,{placeholder:Xe=void 0}=e,{className:$e=void 0}=e,{inputClassName:Dt=void 0}=e,{inputId:ni=void 0}=e,{name:mt=void 0}=e,{selectName:At=void 0}=e,{selectId:xt=void 0}=e,{title:Qe=void 0}=e,{html5autocomplete:Yt=void 0}=e,{readonly:si=void 0}=e,{dropdownClassName:Zt=void 0}=e,{disabled:Ei=!1}=e,{noInputStyles:Qt=!1}=e,{required:Ot=null}=e,{debug:ai=!1}=e,{tabindex:Ji=0}=e,{selectedItem:Ii=Se?[]:void 0}=e,{value:$t=void 0}=e,{highlightedItem:Me=void 0}=e;const ee="sautocomplete-"+Math.floor(Math.random()*1e3);let ae,et,bt=!1,Xt=!1,fi=-1,{text:xn}=e,qn=0,bn,Gi=[],an=0,Kn=0,mr;function yo(Ft){return i1(w,Ft)}function ar(Ft){const tr=i1(x,Ft);let ur=i1(T,tr);return ur=ur.toLowerCase().trim(),le&&(ur=n1(ur)),ai&&console.log("Extracted keywords: '"+ur+"' from item: "+JSON.stringify(Ft)),ur}function Hr(){let Ft;ai&&(Ft=`Autocomplete prepare list ${ni?`(id: ${ni})`:""}`,console.time(Ft),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(o))),Array.isArray(o)||(console.warn("Autocomplete items / search function did not return array but",o),t(0,o=[]));const tr=o?o.length:0;Gi=new Array(tr),tr>0&&o.forEach((ur,Or)=>{const Ko=Yn(ur);Ko===void 0&&console.log("Undefined item for: ",ur),Gi[Or]=Ko}),t(31,bn=Gi),ai&&(console.log(Gi.length+" items to search"),console.timeEnd(Ft))}function Yn(Ft){return{keywords:We?ar(Ft):[],label:yo(Ft),item:Ft}}function Ur(){t(2,$t=C(Ii)),t(3,xn=Se?"":yo(Ii)),t(31,bn=Gi),O(Ii)}function co(Ft){if(Ft==null)return"";if(!Le)return Ft;const tr=Ft.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return i1(k,tr).toLowerCase().trim()}async function Jn(){let Ft;ai&&(Ft=`Autocomplete search ${ni?`(id: ${ni})`:""}`,console.time(Ft),console.log("Searching user entered text: '"+xn+"'"));let tr=co(xn);if(Z>1&&tr.length<Z&&(tr=""),t(81,qn=tr.length),ai&&console.log("Changed user entered text '"+xn+"' into '"+tr+"'"),tr===""){c?(t(0,o=[]),ai&&console.log("User entered text is empty clear list of items")):(t(31,bn=Gi),ai&&console.log("User entered text is empty set the list of items to all items")),vr(),ai&&console.timeEnd(Ft);return}if(!c)Eo(tr);else{an=an+1;const ur=an;if(t(34,Xt=!0),c.constructor.name==="AsyncGeneratorFunction"){for await(const Or of c(tr,ie)){if(ur<Kn)return!1;ur>Kn&&t(0,o=[]),Kn=ur,t(0,o=[...o,...Or]),Eo(tr)}Kn<ur&&(Kn=ur,t(0,o=[]),Eo(tr))}else{let Or=await c(tr,ie);if(ur<Kn)return!1;Kn=ur,t(0,o=Or),Eo(tr)}t(34,Xt=!1)}ai&&(console.timeEnd(Ft),console.log("Search found "+bn.length+" items"))}function br(Ft,tr){const ur=Ag(Ft,tr);return Ee?ur>=tr.length:ur>0}function Eo(Ft){Hr();const ur=(le?n1(Ft):Ft).split(/\s+/g).filter(Bo=>Bo!=="");let Or;We?(Ae?Or=Gi.filter(Bo=>Ae(Bo.item,ur)):Or=Gi.filter(Bo=>br(Bo,ur)),be&&(pt?Or=Or.sort((Bo,La)=>pt(Bo.item,La.item,ur)):me&&(Or=Or.sort((Bo,La)=>EO(Bo,La,ur))))):Or=Gi;const Ko=zr(ur,"label");return t(31,bn=Or.map(Ko)),vr(),!0}function un(Ft){let tr;if(ai&&console.log("createdItem",Ft),typeof Ft<"u"){Hr(),t(31,bn=Gi);let ur=St(Ft,bn);ur<=0&&(t(0,o=[Ft]),Hr(),t(31,bn=Gi),ur=0),ur>=0&&(t(30,fi=ur),tr=bn[fi])}return tr}function He(Ft){if(ai&&console.log("selectListItem",Ft),typeof Ft>"u"&&xe){const ur=J(xn);if(typeof ur<"u"){if(typeof ur.then=="function")return ur.then(Or=>{if(typeof Or<"u"){const Ko=un(Or);typeof Ko<"u"&&He(Ko)}}),!0;Ft=un(ur)}}if(typeof Ft>"u")return ai&&console.log("listItem is undefined. Can not select."),!1;if(rt&&Ii)return!0;const tr=Ft.item;return M(Ii,tr)&&(Se?Ii?Ii.includes(tr)?t(1,Ii=Ii.filter(ur=>ur!==tr)):t(1,Ii=[...Ii,tr]):t(1,Ii=[tr]):(t(1,Ii=void 0),t(1,Ii=tr))),!0}function Ho(){ai&&console.log("selectItem",fi);const Ft=bn[fi];He(Ft)?(ai&&console.log("selectListItem true, closing"),er(),Se&&ae.focus()):ai&&console.log("selectListItem false, not closing")}function Do(){ai&&console.log("up"),Bn(),fi>0&&t(30,fi--,fi),Pe()}function wo(){ai&&console.log("down"),Bn(),fi<bn.length-1&&t(30,fi++,fi),Pe()}function Pe(){ai&&console.log("highlight");const Ft=".selected";ai&&console.log("Seaching DOM element: "+Ft+" in "+et);const tr=et&&et.querySelector(Ft);tr?typeof tr.scrollIntoViewIfNeeded=="function"?(ai&&console.log("Scrolling selected item into view"),tr.scrollIntoViewIfNeeded()):tr.scrollIntoView==="function"?(ai&&console.log("Scrolling selected item into view"),tr.scrollIntoView()):ai&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):ai&&console.warn("Selected item not found to scroll into view")}function Te(Ft){ai&&console.log("onListItemClick"),He(Ft)&&(er(),Se&&ae.focus())}function qe(Ft){ai&&console.log("onDocumentClick"),Ft.composedPath().some(tr=>tr.classList&&tr.classList.contains(ee))?(ai&&console.log("onDocumentClick inside"),Pe()):(ai&&console.log("onDocumentClick outside"),er())}function ft(Ft){ai&&console.log("onKeyDown");let tr=Ft.key;tr==="Tab"&&Ft.shiftKey&&(tr="ShiftTab");const Or={Tab:bt?er():null,ShiftTab:bt?er():null,ArrowDown:wo.bind(this),ArrowUp:Do.bind(this),Escape:vt.bind(this),Backspace:Se&&Ii&&Ii.length&&!xn?ji.bind(this):null}[tr];typeof Or=="function"&&Or(Ft)}function _t(Ft){ai&&console.log("onKeyPress"),Ft.key==="Enter"&&(Ft.preventDefault(),Ut())}function Ut(){Ho()}function Ge(Ft){ai&&console.log("onInput"),t(3,xn=Ft.target.value),mr&&clearTimeout(mr),Pt?mr=setTimeout(zt,Pt):zt()}function Ht(Ft){ai&&console.log("unselectItem",Ft),t(1,Ii=Ii.filter(tr=>tr!==Ft)),ae.focus()}function zt(){Jn()&&(t(30,fi=0),Bn())}function ti(){ai&&console.log("onInputClick"),kn()}function vt(Ft){ai&&console.log("onEsc"),Ft.stopPropagation(),bt&&(ae.focus(),er())}function ji(Ft){ai&&console.log("onBackspace"),Ht(Ii[Ii.length-1])}function Di(){ai&&console.log("onFocus"),V(),kn()}function In(){ai&&console.log("onBlur"),Ue&&er(),W()}function kn(){if(ai&&console.log("resetListToAllItemsAndOpen"),xn?!Gi.length&&Ii&&c&&Jn():t(31,bn=Gi),Bn(),Ii){ai&&console.log("Searching currently selected item: "+JSON.stringify(Ii));const Ft=St(Ii,bn);Ft>=0&&(t(30,fi=Ft),Pe())}}function St(Ft,tr){ai&&console.log("Finding index for item",Ft);let ur=-1;for(let Or=0;Or<tr.length;Or++){const Ko=tr[Or];if(typeof Ko>"u"){ai&&console.log(`listItem ${Or} is undefined. Skipping.`);continue}if(ai&&console.log("Item "+Or+": "+JSON.stringify(Ko)),Ft===Ko.item){ur=Or;break}}return ai&&(ur>=0?console.log("Found index for item: "+ur):console.warn("Not found index for item: "+Ft)),ur}function Bn(){ai&&console.log("open"),!Dr()&&t(80,bt=!0)}function er(){ai&&console.log("close"),t(80,bt=!1),t(34,Xt=!1),!xn&&Q&&(t(30,fi=0),Ho())}function Dr(){return Z>1&&qn<Z}function vr(){Dr()&&er()}function Tr(){ai&&console.log("clear"),t(3,xn=""),t(1,Ii=Se?[]:void 0),setTimeout(()=>{ae.focus(),er()})}function zr(Ft,tr){return ur=>{let Or=ur[tr];const Ko=Object.assign({highlighted:void 0},ur);Ko.highlighted=Or;const Bo=Or.toLowerCase(),La=le?n1(Bo):Bo;if(Ft&&Ft.length){const rs=[];for(let qs=0;qs<Ft.length;qs++){let xs=Ft[qs];le&&(xs=n1(xs));const Pa=xs.length;let Es=0;do if(Es=La.indexOf(xs,Es),Es>=0){let Ks=Es+Pa;rs.push([Es,Ks]),Es=Ks}while(Es!==-1)}if(rs.length>0){const qs=new Set;for(let xs=0;xs<rs.length;xs++){const Pa=rs[xs],Es=Pa[0],Ks=Pa[1],Hs=Bo.substring(Es,Ks);qs.add(Hs)}for(let xs of qs){if(xs==="b")continue;const Pa=new RegExp("("+xs+")","ig"),Es=Ko.highlighted.replace(Pa,"<b>$1</b>");Ko.highlighted=Es}}}return Ko}}function po(Ft){return Ii?Se?Ii.includes(Ft):Ft===Ii:!1}function ts(Ft){pn[Ft?"unshift":"push"](()=>{ae=Ft,t(32,ae)})}function _o(){xn=this.value,t(3,xn)}const is=Ft=>Te(Ft),al=Ft=>{t(30,fi=Ft)};function Ro(Ft){pn[Ft?"unshift":"push"](()=>{et=Ft,t(33,et)})}return i.$$set=Ft=>{"items"in Ft&&t(0,o=Ft.items),"searchFunction"in Ft&&t(52,c=Ft.searchFunction),"labelFieldName"in Ft&&t(53,g=Ft.labelFieldName),"keywordsFieldName"in Ft&&t(54,_=Ft.keywordsFieldName),"valueFieldName"in Ft&&t(55,v=Ft.valueFieldName),"labelFunction"in Ft&&t(56,w=Ft.labelFunction),"keywordsFunction"in Ft&&t(57,x=Ft.keywordsFunction),"valueFunction"in Ft&&t(4,C=Ft.valueFunction),"keywordsCleanFunction"in Ft&&t(58,T=Ft.keywordsCleanFunction),"textCleanFunction"in Ft&&t(59,k=Ft.textCleanFunction),"beforeChange"in Ft&&t(60,M=Ft.beforeChange),"onChange"in Ft&&t(61,O=Ft.onChange),"onFocus"in Ft&&t(62,V=Ft.onFocus),"onBlur"in Ft&&t(63,W=Ft.onBlur),"onCreate"in Ft&&t(64,J=Ft.onCreate),"selectFirstIfEmpty"in Ft&&t(65,Q=Ft.selectFirstIfEmpty),"minCharactersToSearch"in Ft&&t(66,Z=Ft.minCharactersToSearch),"maxItemsToShowInList"in Ft&&t(5,ie=Ft.maxItemsToShowInList),"multiple"in Ft&&t(6,Se=Ft.multiple),"create"in Ft&&t(7,xe=Ft.create),"ignoreAccents"in Ft&&t(67,le=Ft.ignoreAccents),"matchAllKeywords"in Ft&&t(68,Ee=Ft.matchAllKeywords),"sortByMatchedKeywords"in Ft&&t(69,me=Ft.sortByMatchedKeywords),"itemFilterFunction"in Ft&&t(70,Ae=Ft.itemFilterFunction),"itemSortFunction"in Ft&&t(71,pt=Ft.itemSortFunction),"lock"in Ft&&t(8,rt=Ft.lock),"delay"in Ft&&t(72,Pt=Ft.delay),"localFiltering"in Ft&&t(73,We=Ft.localFiltering),"localSorting"in Ft&&t(74,be=Ft.localSorting),"cleanUserText"in Ft&&t(75,Le=Ft.cleanUserText),"closeOnBlur"in Ft&&t(76,Ue=Ft.closeOnBlur),"hideArrow"in Ft&&t(9,ce=Ft.hideArrow),"showClear"in Ft&&t(77,Ie=Ft.showClear),"showLoadingIndicator"in Ft&&t(10,de=Ft.showLoadingIndicator),"noResultsText"in Ft&&t(11,ge=Ft.noResultsText),"loadingText"in Ft&&t(12,Re=Ft.loadingText),"moreItemsText"in Ft&&t(13,Ze=Ft.moreItemsText),"createText"in Ft&&t(14,ut=Ft.createText),"placeholder"in Ft&&t(15,Xe=Ft.placeholder),"className"in Ft&&t(16,$e=Ft.className),"inputClassName"in Ft&&t(17,Dt=Ft.inputClassName),"inputId"in Ft&&t(18,ni=Ft.inputId),"name"in Ft&&t(19,mt=Ft.name),"selectName"in Ft&&t(20,At=Ft.selectName),"selectId"in Ft&&t(21,xt=Ft.selectId),"title"in Ft&&t(22,Qe=Ft.title),"html5autocomplete"in Ft&&t(23,Yt=Ft.html5autocomplete),"readonly"in Ft&&t(24,si=Ft.readonly),"dropdownClassName"in Ft&&t(25,Zt=Ft.dropdownClassName),"disabled"in Ft&&t(26,Ei=Ft.disabled),"noInputStyles"in Ft&&t(27,Qt=Ft.noInputStyles),"required"in Ft&&t(28,Ot=Ft.required),"debug"in Ft&&t(78,ai=Ft.debug),"tabindex"in Ft&&t(29,Ji=Ft.tabindex),"selectedItem"in Ft&&t(1,Ii=Ft.selectedItem),"value"in Ft&&t(2,$t=Ft.value),"highlightedItem"in Ft&&t(51,Me=Ft.highlightedItem),"text"in Ft&&t(3,xn=Ft.text),"$$scope"in Ft&&t(82,p=Ft.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&1|i.$$.dirty[1]&2097152&&(c||Hr()),i.$$.dirty[0]&2&&Ur(),i.$$.dirty[0]&1073741824|i.$$.dirty[1]&1&&t(51,Me=bn&&fi&&fi>=0&&fi<bn.length?bn[fi].item:null),i.$$.dirty[0]&1|i.$$.dirty[2]&786432&&t(36,n=bt&&(o&&o.length>0||qn>0)),i.$$.dirty[0]&322|i.$$.dirty[2]&32768&&t(35,l=Ie||(rt||Se)&&Ii)},[o,Ii,$t,xn,C,ie,Se,xe,rt,ce,de,ge,Re,Ze,ut,Xe,$e,Dt,ni,mt,At,xt,Qe,Yt,si,Zt,Ei,Qt,Ot,Ji,fi,bn,ae,et,Xt,l,n,ee,yo,Ho,Te,qe,ft,_t,Ge,Ht,ti,Di,In,Tr,po,Me,c,g,_,v,w,x,T,k,M,O,V,W,J,Q,Z,le,Ee,me,Ae,pt,Pt,We,be,Le,Ue,Ie,ai,zr,bt,qn,p,u,ts,_o,is,al,Ro]}class TO extends fr{constructor(e){super(),dr(this,e,IO,kO,hr,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function LO(i){let e,t,n,l,u;function p(g){i[4](g)}function o(g){i[5](g)}let c={items:i[2],placeholder:kr.search.placeholder,showClear:!0,showLoadingIndicator:!0,labelFunction:i[3],maxItemsToShowInList:"10"};return i[0]!==void 0&&(c.selectedItem=i[0]),i[1]!==void 0&&(c.onChange=i[1]),t=new TO({props:c}),pn.push(()=>To(t,"selectedItem",p)),pn.push(()=>To(t,"onChange",o)),{c(){e=Li("div"),xi(t.$$.fragment),this.h()},l(g){e=Pi(g,"DIV",{id:!0,class:!0});var _=Ti(e);Ci(t.$$.fragment,_),_.forEach(Oe),this.h()},h(){hi(e,"id","data-container"),hi(e,"class","data-container target svelte-1mdzt0a")},m(g,_){wt(g,e,_),Ai(t,e,null),u=!0},p(g,_){const v={};!n&&_&1&&(n=!0,v.selectedItem=g[0],Lo(()=>n=!1)),!l&&_&2&&(l=!0,v.onChange=g[1],Lo(()=>l=!1)),t.$set(v)},i(g){u||(tt(t.$$.fragment,g),u=!0)},o(g){ct(t.$$.fragment,g),u=!1},d(g){g&&Oe(e),Si(t)}}}function PO(i){let e,t,n=kr.search&&LO(i);return{c(){n&&n.c(),e=hn()},l(l){n&&n.l(l),e=hn()},m(l,u){n&&n.m(l,u),wt(l,e,u),t=!0},p(l,[u]){kr.search&&n.p(l,u)},i(l){t||(tt(n),t=!0)},o(l){ct(n),t=!1},d(l){n&&n.d(l),l&&Oe(e)}}}function MO(i,e,t){let n;Vo(i,Fu,T=>t(8,n=T));const{Marker:l}=lw,u=O1();let p=[],o={},c={},g;const _=()=>{if(!(o&&Object.keys(o).length>0)||!(c&&Object.keys(c).length>0&&c.key))return;const T=o[c.key];if(!T)return;const k=T.geometry.coordinates;n.flyTo({center:k,zoom:kr.search.zoom,curve:1}),g&&(g.remove(),g=null),g=new l({draggable:!0}).setLngLat(k).addTo(n),u("zoomed")};let v=()=>{c||g&&(g.remove(),g=null)};kr.search&&fetch(kr.search.url).then(T=>T.json()).then(T=>{T.features.forEach(k=>{const M=k.geometry.coordinates.join(","),O=JSON.parse(JSON.stringify(k));O.properties={},kr.search.target.forEach(V=>{k.properties[V]&&(O.properties[V]=k.properties[V])}),Object.keys(O.properties).length!==0&&(O.properties.key=M,p.push(O.properties),o[M]=JSON.parse(JSON.stringify(k)))})});const w=T=>T?kr.search.format(T):"";function x(T){c=T,t(0,c)}function C(T){v=T,t(1,v)}return i.$$.update=()=>{i.$$.dirty&1&&_()},[c,v,p,w,x,C]}class DO extends fr{constructor(e){super(),dr(this,e,MO,PO,hr,{})}}var J3={};Object.defineProperty(J3,"__esModule",{value:!0});class mf{constructor(e,t){this.areas=e||mf.DEFAULT_AREAS,this.limit_no_areas=t||mf.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){this.map=e;const t=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const n of this.areas){const l=document.createElement("button");l.innerText=n.title,l.classList.add(n.title.replace(/[^a-z0-9-]/gi,"_")),l.value=JSON.stringify({center:n.latlng,zoom:n.zoom}),l.addEventListener("click",u=>{const p=u.srcElement;this.map.jumpTo(JSON.parse(p.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const o=this.mapAreaContainer.getElementsByClassName("active");for(;o[0];)o[0].classList.remove("active");p.classList.add("active")}),n.title===mf.DEFAULT_AREA&&l.classList.add("active"),this.mapAreaContainer.appendChild(l)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(n){!n.target||t.map.flyTo(JSON.parse(n.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(n){var l=document.createElement("option");l.setAttribute("type","option"),l.text=n.title,l.value=JSON.stringify({center:n.latlng,zoom:n.zoom}),t.select.appendChild(l)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var OO=J3.default=mf;mf.DEFAULT_AREA="Narok";mf.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];mf.DEFAULT_NO_AREAS=5;function h4(i,e,t){const n=i.slice();return n[12]=e[t],n}function f4(i,e,t){const n=i.slice();return n[15]=e[t],n}function d4(i,e,t){const n=i.slice();return n[15]=e[t],n}function p4(i){let e;function t(u,p){return u[3]?RO:FO}let n=t(i),l=n(i);return{c(){e=Li("div"),l.c(),this.h()},l(u){e=Pi(u,"DIV",{class:!0});var p=Ti(e);l.l(p),p.forEach(Oe),this.h()},h(){hi(e,"class","select is-fullwidth mb-2 is-primary")},m(u,p){wt(u,e,p),l.m(e,null)},p(u,p){n===(n=t(u))&&l?l.p(u,p):(l.d(1),l=n(u),l&&(l.c(),l.m(e,null)))},d(u){u&&Oe(e),l.d()}}}function FO(i){let e,t,n,l=i[0],u=[];for(let p=0;p<l.length;p+=1)u[p]=m4(f4(i,l,p));return{c(){e=Li("select");for(let p=0;p<u.length;p+=1)u[p].c();this.h()},l(p){e=Pi(p,"SELECT",{class:!0});var o=Ti(e);for(let c=0;c<u.length;c+=1)u[c].l(o);o.forEach(Oe),this.h()},h(){hi(e,"class","is-focused"),i[2]===void 0&&Dh(()=>i[8].call(e))},m(p,o){wt(p,e,o);for(let c=0;c<u.length;c+=1)u[c].m(e,null);id(e,i[2]),t||(n=Vn(e,"change",i[8]),t=!0)},p(p,o){if(o&1){l=p[0];let c;for(c=0;c<l.length;c+=1){const g=f4(p,l,c);u[c]?u[c].p(g,o):(u[c]=m4(g),u[c].c(),u[c].m(e,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=l.length}o&5&&id(e,p[2])},d(p){p&&Oe(e),sl(u,p),t=!1,n()}}}function RO(i){let e,t,n,l=i[0],u=[];for(let p=0;p<l.length;p+=1)u[p]=g4(d4(i,l,p));return{c(){e=Li("select");for(let p=0;p<u.length;p+=1)u[p].c();this.h()},l(p){e=Pi(p,"SELECT",{class:!0});var o=Ti(e);for(let c=0;c<u.length;c+=1)u[c].l(o);o.forEach(Oe),this.h()},h(){hi(e,"class","is-focused"),e.disabled=!0,i[2]===void 0&&Dh(()=>i[7].call(e))},m(p,o){wt(p,e,o);for(let c=0;c<u.length;c+=1)u[c].m(e,null);id(e,i[2]),t||(n=Vn(e,"change",i[7]),t=!0)},p(p,o){if(o&1){l=p[0];let c;for(c=0;c<l.length;c+=1){const g=d4(p,l,c);u[c]?u[c].p(g,o):(u[c]=g4(g),u[c].c(),u[c].m(e,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=l.length}o&5&&id(e,p[2])},d(p){p&&Oe(e),sl(u,p),t=!1,n()}}}function m4(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,n,l;return{c(){e=Li("option"),n=gn(t),this.h()},l(u){e=Pi(u,"OPTION",{});var p=Ti(e);n=yn(p,t),p.forEach(Oe),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,p){wt(u,e,p),Xi(e,n)},p(u,p){p&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&bs(n,t),p&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&Oe(e)}}}function g4(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,n,l;return{c(){e=Li("option"),n=gn(t),this.h()},l(u){e=Pi(u,"OPTION",{});var p=Ti(e);n=yn(p,t),p.forEach(Oe),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,p){wt(u,e,p),Xi(e,n)},p(u,p){p&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&bs(n,t),p&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&Oe(e)}}}function y4(i){let e,t;function n(p,o){return o&4&&(t=null),t==null&&(t=Object.keys(p[2].properties).length>0),t?zO:BO}let l=n(i,-1),u=l(i);return{c(){e=Li("div"),u.c(),this.h()},l(p){e=Pi(p,"DIV",{class:!0});var o=Ti(e);u.l(o),o.forEach(Oe),this.h()},h(){hi(e,"class","popup-table svelte-9sbo4r")},m(p,o){wt(p,e,o),u.m(e,null)},p(p,o){l===(l=n(p,o))&&u?u.p(p,o):(u.d(1),u=l(p),u&&(u.c(),u.m(e,null)))},d(p){p&&Oe(e),u.d()}}}function BO(i){let e,t,n=i[2].sourceLayer+"",l,u;return{c(){e=Li("div"),t=gn("No attributes in the selected layer '"),l=gn(n),u=gn("'"),this.h()},l(p){e=Pi(p,"DIV",{class:!0});var o=Ti(e);t=yn(o,"No attributes in the selected layer '"),l=yn(o,n),u=yn(o,"'"),o.forEach(Oe),this.h()},h(){hi(e,"class","notification is-info is-light")},m(p,o){wt(p,e,o),Xi(e,t),Xi(e,l),Xi(e,u)},p(p,o){o&4&&n!==(n=p[2].sourceLayer+"")&&bs(l,n)},d(p){p&&Oe(e)}}}function zO(i){let e,t=Object.keys(i[2].properties),n=[];for(let l=0;l<t.length;l+=1)n[l]=_4(h4(i,t,l));return{c(){e=Li("table");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=Pi(l,"TABLE",{class:!0});var u=Ti(e);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(Oe),this.h()},h(){hi(e,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth")},m(l,u){wt(l,e,u);for(let p=0;p<n.length;p+=1)n[p].m(e,null)},p(l,u){if(u&4){t=Object.keys(l[2].properties);let p;for(p=0;p<t.length;p+=1){const o=h4(l,t,p);n[p]?n[p].p(o,u):(n[p]=_4(o),n[p].c(),n[p].m(e,null))}for(;p<n.length;p+=1)n[p].d(1);n.length=t.length}},d(l){l&&Oe(e),sl(n,l)}}}function _4(i){let e,t,n=i[12]+"",l,u,p=i[2].properties[i[12]]+"",o;return{c(){e=Li("tr"),t=Li("th"),l=gn(n),u=Li("td"),o=gn(p)},l(c){e=Pi(c,"TR",{});var g=Ti(e);t=Pi(g,"TH",{});var _=Ti(t);l=yn(_,n),_.forEach(Oe),u=Pi(g,"TD",{});var v=Ti(u);o=yn(v,p),v.forEach(Oe),g.forEach(Oe)},m(c,g){wt(c,e,g),Xi(e,t),Xi(t,l),Xi(e,u),Xi(u,o)},p(c,g){g&4&&n!==(n=c[12]+"")&&bs(l,n),g&4&&p!==(p=c[2].properties[c[12]]+"")&&bs(o,p)},d(c){c&&Oe(e)}}}function NO(i){let e,t,n=i[0]&&i[0].length>0&&p4(i),l=i[2]&&y4(i);return{c(){e=Li("div"),n&&n.c(),t=$i(),l&&l.c()},l(u){e=Pi(u,"DIV",{});var p=Ti(e);n&&n.l(p),t=en(p),l&&l.l(p),p.forEach(Oe)},m(u,p){wt(u,e,p),n&&n.m(e,null),Xi(e,t),l&&l.m(e,null),i[9](e)},p(u,[p]){u[0]&&u[0].length>0?n?n.p(u,p):(n=p4(u),n.c(),n.m(e,t)):n&&(n.d(1),n=null),u[2]?l?l.p(u,p):(l=y4(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Co,o:Co,d(u){u&&Oe(e),n&&n.d(),l&&l.d(),i[9](null)}}}function jO(i,e,t){let n,{map:l}=e,{targetLayers:u=[]}=e,p,o,c=[],g;function _(){}_.prototype.onAdd=function(T){return this.map=T,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},_.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),t(0,c=[]),t(2,g=void 0),p&&(p.remove(),p=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},_.prototype.onClick=function(T){if(!this.isActive){t(0,c=[]),t(2,g=void 0);return}let k=[];u.length>0?u.forEach(O=>{this.map.getLayer(O)&&k.push(O)}):k=l.getStyle().layers.map(O=>O.id);const M=this.map.queryRenderedFeatures(T.point,{layers:k});t(0,c=M),t(2,g=c[0]),c.length>0?p=new tc.exports.Popup().setLngLat(T.lngLat).setDOMContent(o).setMaxWidth("300px").addTo(l):p&&(p.remove(),p=void 0)},_.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let v=null;ws(async()=>{t(6,v=new _)});function w(){g=U2(this),t(2,g),t(0,c)}function x(){g=U2(this),t(2,g),t(0,c)}function C(T){pn[T?"unshift":"push"](()=>{o=T,t(1,o)})}return i.$$set=T=>{"map"in T&&t(4,l=T.map),"targetLayers"in T&&t(5,u=T.targetLayers)},i.$$.update=()=>{i.$$.dirty&1&&t(3,n=c.length===1),i.$$.dirty&80&&l&&v!==null&&l.hasControl(v)===!1&&l.addControl(v,"top-right")},[c,o,g,n,l,u,v,w,x,C]}class UO extends fr{constructor(e){super(),dr(this,e,jO,NO,hr,{map:4,targetLayers:5})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ph={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},om={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Kc={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var VO=Kc.ARIA_LIVE_DELAY_MS,v4=om.ARIA_LIVE_LABEL_TEXT_ATTR;function qO(i,e){e===void 0&&(e=i);var t=i.getAttribute("aria-live"),n=e.textContent.trim();!n||!t||(i.setAttribute("aria-live","off"),e.textContent="",e.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',e.setAttribute(v4,n),setTimeout(function(){i.setAttribute("aria-live",t),e.removeAttribute(v4),e.textContent=n},VO))}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var b4=Ph.OPENING,w4=Ph.OPEN,x4=Ph.CLOSING,HO=om.REASON_ACTION,j2=om.REASON_DISMISS,GO=function(i){Ha(e,i);function e(t){var n=i.call(this,qo(qo({},e.defaultAdapter),t))||this;return n.opened=!1,n.animationFrame=0,n.animationTimer=0,n.autoDismissTimer=0,n.autoDismissTimeoutMs=Kc.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape=!0,n}return Object.defineProperty(e,"cssClasses",{get:function(){return Ph},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return om},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Kc},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(b4),this.adapter.removeClass(w4),this.adapter.removeClass(x4)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(x4),this.adapter.addClass(b4),this.adapter.announce(),this.runNextAnimationFrame(function(){t.adapter.addClass(w4),t.animationTimer=setTimeout(function(){var n=t.getTimeoutMs();t.handleAnimationTimerEnd(),t.adapter.notifyOpened(),n!==Kc.INDETERMINATE&&(t.autoDismissTimer=setTimeout(function(){t.close(j2)},n))},Kc.SNACKBAR_ANIMATION_OPEN_TIME_MS)})},e.prototype.close=function(t){var n=this;t===void 0&&(t=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(t),this.adapter.addClass(Ph.CLOSING),this.adapter.removeClass(Ph.OPEN),this.adapter.removeClass(Ph.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){n.handleAnimationTimerEnd(),n.adapter.notifyClosed(t)},Kc.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.opened},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},e.prototype.setTimeoutMs=function(t){var n=Kc.MIN_AUTO_DISMISS_TIMEOUT_MS,l=Kc.MAX_AUTO_DISMISS_TIMEOUT_MS,u=Kc.INDETERMINATE;if(t===Kc.INDETERMINATE||t<=l&&t>=n)this.autoDismissTimeoutMs=t;else throw new Error(`
        timeoutMs must be an integer in the range `+n+"\u2013"+l+`
        (or `+u+" to disable), but got '"+t+"'")},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape=t},e.prototype.handleKeyDown=function(t){var n=t.key==="Escape"||t.keyCode===27;n&&this.getCloseOnEscape()&&this.close(j2)},e.prototype.handleActionButtonClick=function(t){this.close(HO)},e.prototype.handleActionIconClick=function(t){this.close(j2)},e.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},e.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Ph.OPENING),this.adapter.removeClass(Ph.CLOSING)},e.prototype.runNextAnimationFrame=function(t){var n=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){n.animationFrame=0,clearTimeout(n.animationTimer),n.animationTimer=setTimeout(t,0)})},e}(ql);function WO(i){let e,t,n,l,u,p,o,c,g;const _=i[25].default,v=nr(_,i,i[24],null);let w=[{class:n=Hn({[i[4]]:!0,"mdc-snackbar__surface":!0})},{role:"status"},{"aria-relevant":"additions"},Jr(i[12],"surface$")],x={};for(let k=0;k<w.length;k+=1)x=Ni(x,w[k]);let C=[{class:u=Hn({[i[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":i[2]==="stacked","mdc-snackbar--leading":i[3],...i[8]})},ah(i[12],["surface$"])],T={};for(let k=0;k<C.length;k+=1)T=Ni(T,C[k]);return{c(){e=Li("aside"),t=Li("div"),v&&v.c(),this.h()},l(k){e=Pi(k,"ASIDE",{class:!0});var M=Ti(e);t=Pi(M,"DIV",{class:!0,role:!0,"aria-relevant":!0});var O=Ti(t);v&&v.l(O),O.forEach(Oe),M.forEach(Oe),this.h()},h(){Un(t,x),Un(e,T)},m(k,M){wt(k,e,M),Xi(e,t),v&&v.m(t,null),i[26](e),o=!0,c||(g=[Gn(l=go.call(null,t,i[5])),Vn(t,"click",i[10]),Gn(p=go.call(null,e,i[0])),Gn(i[9].call(null,e)),Vn(e,"SMUISnackbar:closed",i[11]),Vn(e,"keydown",i[27])],c=!0)},p(k,M){v&&v.p&&(!o||M[0]&16777216)&&rr(v,_,k,k[24],o?sr(_,k[24],M,null):or(k[24]),null),Un(t,x=cr(w,[(!o||M[0]&16&&n!==(n=Hn({[k[4]]:!0,"mdc-snackbar__surface":!0})))&&{class:n},{role:"status"},{"aria-relevant":"additions"},M[0]&4096&&Jr(k[12],"surface$")])),l&&Zr(l.update)&&M[0]&32&&l.update.call(null,k[5]),Un(e,T=cr(C,[(!o||M[0]&270&&u!==(u=Hn({[k[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":k[2]==="stacked","mdc-snackbar--leading":k[3],...k[8]})))&&{class:u},M[0]&4096&&ah(k[12],["surface$"])])),p&&Zr(p.update)&&M[0]&1&&p.update.call(null,k[0])},i(k){o||(tt(v,k),o=!0)},o(k){ct(v,k),o=!1},d(k){k&&Oe(e),v&&v.d(k),i[26](null),c=!1,bo(g)}}}let A4=Promise.resolve();function XO(i,e,t){const n=["use","class","variant","leading","timeoutMs","closeOnEscape","labelText","actionButtonText","surface$class","surface$use","open","forceOpen","close","isOpen","getLabelElement","getActionButtonElement","getElement"];let l=On(e,n),{$$slots:u={},$$scope:p}=e;const{closest:o}=sp,c=io(to());let g=()=>{};function _(Ie){return Ie===g}let{use:v=[]}=e,{class:w=""}=e,{variant:x=""}=e,{leading:C=!1}=e,{timeoutMs:T=5e3}=e,{closeOnEscape:k=!0}=e,{labelText:M=g}=e,{actionButtonText:O=g}=e,{surface$class:V=""}=e,{surface$use:W=[]}=e,J,Q,Z={},ie,Se=new Promise(Ie=>ie=Ie);Fo("SMUI:label:context","snackbar"),ws(()=>(t(6,Q=new GO({addClass:xe,announce:()=>qO(We()),notifyClosed:Ie=>Qr(Le(),"SMUISnackbar:closed",Ie?{reason:Ie}:{},void 0,!0),notifyClosing:Ie=>Qr(Le(),"SMUISnackbar:closing",Ie?{reason:Ie}:{},void 0,!0),notifyOpened:()=>Qr(Le(),"SMUISnackbar:opened",void 0,void 0,!0),notifyOpening:()=>Qr(Le(),"SMUISnackbar:opening",void 0,void 0,!0),removeClass:le})),Q.init(),()=>{Q.destroy()}));function xe(Ie){Z[Ie]||t(8,Z[Ie]=!0,Z)}function le(Ie){(!(Ie in Z)||Z[Ie])&&t(8,Z[Ie]=!1,Z)}function Ee(Ie){const de=Ie.target;Q&&(o(de,".mdc-snackbar__action")?Q.handleActionButtonClick(Ie):o(de,".mdc-snackbar__dismiss")&&Q.handleActionIconClick(Ie))}function me(){ie(),Se=new Promise(Ie=>ie=Ie)}function Ae(){A4=A4.then(()=>(Q.open(),Se))}function pt(){return Q.open()}function rt(Ie){return Q.close(Ie)}function Pt(){return Q.isOpen()}function We(){var Ie;return(Ie=Le().querySelector(".mdc-snackbar__label"))!==null&&Ie!==void 0?Ie:document.createElement("div")}function be(){var Ie;return(Ie=Le().querySelector(".mdc-snackbar__action"))!==null&&Ie!==void 0?Ie:document.createElement("button")}function Le(){return J}function Ue(Ie){pn[Ie?"unshift":"push"](()=>{J=Ie,t(7,J)})}const ce=Ie=>Q&&Q.handleKeyDown(Ie);return i.$$set=Ie=>{e=Ni(Ni({},e),$r(Ie)),t(12,l=On(e,n)),"use"in Ie&&t(0,v=Ie.use),"class"in Ie&&t(1,w=Ie.class),"variant"in Ie&&t(2,x=Ie.variant),"leading"in Ie&&t(3,C=Ie.leading),"timeoutMs"in Ie&&t(13,T=Ie.timeoutMs),"closeOnEscape"in Ie&&t(14,k=Ie.closeOnEscape),"labelText"in Ie&&t(15,M=Ie.labelText),"actionButtonText"in Ie&&t(16,O=Ie.actionButtonText),"surface$class"in Ie&&t(4,V=Ie.surface$class),"surface$use"in Ie&&t(5,W=Ie.surface$use),"$$scope"in Ie&&t(24,p=Ie.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8256&&Q&&Q.getTimeoutMs()!==T&&Q.setTimeoutMs(T),i.$$.dirty[0]&16448&&Q&&Q.getCloseOnEscape()!==k&&Q.setCloseOnEscape(k),i.$$.dirty[0]&32832&&Q&&!_(M)&&We().textContent!==M&&(We().textContent=M),i.$$.dirty[0]&65600&&Q&&!_(O)&&be().textContent!==O&&(be().textContent=O)},[v,w,x,C,V,W,Q,J,Z,c,Ee,me,l,T,k,M,O,Ae,pt,rt,Pt,We,be,Le,p,u,Ue,ce]}class YO extends fr{constructor(e){super(),dr(this,e,XO,WO,hr,{use:0,class:1,variant:2,leading:3,timeoutMs:13,closeOnEscape:14,labelText:15,actionButtonText:16,surface$class:4,surface$use:5,open:17,forceOpen:18,close:19,isOpen:20,getLabelElement:21,getActionButtonElement:22,getElement:23},null,[-1,-1])}get open(){return this.$$.ctx[17]}get forceOpen(){return this.$$.ctx[18]}get close(){return this.$$.ctx[19]}get isOpen(){return this.$$.ctx[20]}get getLabelElement(){return this.$$.ctx[21]}get getActionButtonElement(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}const ZO=da({class:"mdc-snackbar__actions",props:{"aria-atomic":"true"},contexts:{"SMUI:button:context":"snackbar:actions","SMUI:icon-button:context":"snackbar:actions","SMUI:label:context":void 0},component:vf});function KO(i){let e;return{c(){e=gn(i[1])},l(t){e=yn(t,i[1])},m(t,n){wt(t,e,n)},p(t,n){n&2&&bs(e,t[1])},d(t){t&&Oe(e)}}}function JO(i){let e;return{c(){e=gn("close")},l(t){e=yn(t,"close")},m(t,n){wt(t,e,n)},d(t){t&&Oe(e)}}}function QO(i){let e,t;return e=new Rh({props:{class:"material-icons",title:"Dismiss",$$slots:{default:[JO]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},p(n,l){const u={};l&16&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function $O(i){let e,t,n,l;return e=new cu({props:{$$slots:{default:[KO]},$$scope:{ctx:i}}}),n=new ZO({props:{$$slots:{default:[QO]},$$scope:{ctx:i}}}),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(u){Ci(e.$$.fragment,u),t=en(u),Ci(n.$$.fragment,u)},m(u,p){Ai(e,u,p),wt(u,t,p),Ai(n,u,p),l=!0},p(u,p){const o={};p&18&&(o.$$scope={dirty:p,ctx:u}),e.$set(o);const c={};p&16&&(c.$$scope={dirty:p,ctx:u}),n.$set(c)},i(u){l||(tt(e.$$.fragment,u),tt(n.$$.fragment,u),l=!0)},o(u){ct(e.$$.fragment,u),ct(n.$$.fragment,u),l=!1},d(u){Si(e,u),u&&Oe(t),Si(n,u)}}}function eF(i){let e,t,n={$$slots:{default:[$O]},$$scope:{ctx:i}};return e=new YO({props:n}),i[3](e),{c(){xi(e.$$.fragment)},l(l){Ci(e.$$.fragment,l)},m(l,u){Ai(e,l,u),t=!0},p(l,[u]){const p={};u&18&&(p.$$scope={dirty:u,ctx:l}),e.$set(p)},i(l){t||(tt(e.$$.fragment,l),t=!0)},o(l){ct(e.$$.fragment,l),t=!1},d(l){i[3](null),Si(e,l)}}}function tF(i,e,t){let n;Vo(i,ng,o=>t(2,n=o));let l,u;function p(o){pn[o?"unshift":"push"](()=>{l=o,t(0,l)})}return i.$$.update=()=>{i.$$.dirty&5&&n&&n.length>0&&l&&(t(1,u=n.shift()),l.open())},[l,u,n,p]}class iF extends fr{constructor(e){super(),dr(this,e,tF,eF,hr,{})}}function S4(i){let e,t,n,l,u,p;e=new DO({});function o(_){i[5](_)}function c(_){i[6](_)}let g={};return i[3]!==void 0&&(g.map=i[3]),i[0].popup.target!==void 0&&(g.targetLayers=i[0].popup.target),n=new UO({props:g}),pn.push(()=>To(n,"map",o)),pn.push(()=>To(n,"targetLayers",c)),{c(){xi(e.$$.fragment),t=$i(),xi(n.$$.fragment)},l(_){Ci(e.$$.fragment,_),t=en(_),Ci(n.$$.fragment,_)},m(_,v){Ai(e,_,v),wt(_,t,v),Ai(n,_,v),p=!0},p(_,v){const w={};!l&&v&8&&(l=!0,w.map=_[3],Lo(()=>l=!1)),!u&&v&1&&(u=!0,w.targetLayers=_[0].popup.target,Lo(()=>u=!1)),n.$set(w)},i(_){p||(tt(e.$$.fragment,_),tt(n.$$.fragment,_),p=!0)},o(_){ct(e.$$.fragment,_),ct(n.$$.fragment,_),p=!1},d(_){Si(e,_),_&&Oe(t),Si(n,_)}}}function nF(i){let e,t,n,l,u,p,o=i[2]&&S4(i);return u=new iF({}),{c(){e=Li("div"),t=Li("div"),n=$i(),o&&o.c(),l=$i(),xi(u.$$.fragment),this.h()},l(c){e=Pi(c,"DIV",{class:!0});var g=Ti(e);t=Pi(g,"DIV",{class:!0,id:!0}),Ti(t).forEach(Oe),n=en(g),o&&o.l(g),g.forEach(Oe),l=en(c),Ci(u.$$.fragment,c),this.h()},h(){hi(t,"class","map svelte-1bahl15"),hi(t,"id","map"),hi(e,"class","map-wrap svelte-1bahl15")},m(c,g){wt(c,e,g),Xi(e,t),i[4](t),Xi(e,n),o&&o.m(e,null),wt(c,l,g),Ai(u,c,g),p=!0},p(c,[g]){c[2]?o?(o.p(c,g),g&4&&tt(o,1)):(o=S4(c),o.c(),tt(o,1),o.m(e,null)):o&&(Sr(),ct(o,1,1,()=>{o=null}),Ar())},i(c){p||(tt(o),tt(u.$$.fragment,c),p=!0)},o(c){ct(o),ct(u.$$.fragment,c),p=!1},d(c){c&&Oe(e),i[4](null),o&&o.d(),c&&Oe(l),Si(u,c)}}}function rF(i,e,t){let n;Vo(i,Fu,_=>t(3,n=_));let l,u,p=!1;ws(async()=>{const _=new cw,v=kr.styles[0],w=_.get();let x=v;if(w){const k=_.getMatchedStyleByTitle(kr.styles,w);k&&(x=k)}Jd.update(()=>x);const C=new tc.exports.Map({container:l,style:x.uri,center:kr.center,zoom:kr.zoom,hash:!0,attributionControl:!1});C.addControl(new tc.exports.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"top-right"),C.addControl(new tc.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),C.addControl(new tc.exports.FullscreenControl({container:document.querySelector("body")})),C.addControl(new tc.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),C.addControl(new tc.exports.AttributionControl({compact:!0}),"bottom-right"),kr.terrain&&(C.setMaxPitch(85),C.addControl(new tc.exports.TerrainControl(kr.terrain))),kr.areaSwitcher&&C.addControl(new OO(kr.areaSwitcher.areas),"top-right");const T=()=>{C.loadImage(`${kr.basePath}/map-center.png`,(k,M)=>{if(k)throw k;C.hasImage("map-center")||C.addImage("map-center",M),C.getSource("center")||(u={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[C.getCenter().lng,C.getCenter().lat]}}]}},C.addSource("center",u)),C.getLayer("points")||C.addLayer({id:"points",type:"symbol",source:"center",layout:{"icon-image":"map-center","icon-size":.3}})})};C.on("load",()=>{t(2,p=!0),T(),C.on("moveend",()=>{C.getSource("center")?(u.data.features[0].geometry.coordinates=[C.getCenter().lng,C.getCenter().lat],C.getSource("center").setData(u.data)):T()})}),Fu.update(()=>C)});function o(_){pn[_?"unshift":"push"](()=>{l=_,t(1,l)})}function c(_){n=_,Fu.set(n)}function g(_){i.$$.not_equal(kr.popup.target,_)&&(kr.popup.target=_,t(0,kr))}return[kr,l,p,n,o,c,g]}class oF extends fr{constructor(e){super(),dr(this,e,rF,nF,hr,{})}}function sF(i){let e,t;return e=new oF({}),{c(){xi(e.$$.fragment)},l(n){Ci(e.$$.fragment,n)},m(n,l){Ai(e,n,l),t=!0},i(n){t||(tt(e.$$.fragment,n),t=!0)},o(n){ct(e.$$.fragment,n),t=!1},d(n){Si(e,n)}}}function aF(i){let e,t,n=kr.title+"",l,u,p,o,c,g,_,v,w,x,C,T,k,M;function O(Q){i[1](Q)}let V={};i[0]!==void 0&&(V.drawerOpen=i[0]),w=new IC({props:V}),pn.push(()=>To(w,"drawerOpen",O));function W(Q){i[2](Q)}let J={$$slots:{default:[sF]},$$scope:{ctx:i}};return i[0]!==void 0&&(J.open=i[0]),T=new sO({props:J}),pn.push(()=>To(T,"open",W)),{c(){e=Li("sveltekit:head"),t=Li("title"),l=gn(n),u=$i(),p=Li("script"),c=$i(),g=Li("script"),_=gn(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-1');`),v=$i(),xi(w.$$.fragment),C=$i(),xi(T.$$.fragment),this.h()},l(Q){e=Pi(Q,"SVELTEKIT:HEAD",{});var Z=Ti(e);t=Pi(Z,"TITLE",{});var ie=Ti(t);l=yn(ie,n),ie.forEach(Oe),u=en(Z),p=Pi(Z,"SCRIPT",{src:!0});var Se=Ti(p);Se.forEach(Oe),c=en(Z),g=Pi(Z,"SCRIPT",{});var xe=Ti(g);_=yn(xe,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-1');`),xe.forEach(Oe),Z.forEach(Oe),v=en(Q),Ci(w.$$.fragment,Q),C=en(Q),Ci(T.$$.fragment,Q),this.h()},h(){p.async=!0,C4(p.src,o="https://www.googletagmanager.com/gtag/js?id=UA-170080825-1")||hi(p,"src",o)},m(Q,Z){wt(Q,e,Z),Xi(e,t),Xi(t,l),Xi(e,u),Xi(e,p),Xi(e,c),Xi(e,g),Xi(g,_),wt(Q,v,Z),Ai(w,Q,Z),wt(Q,C,Z),Ai(T,Q,Z),M=!0},p(Q,[Z]){const ie={};!x&&Z&1&&(x=!0,ie.drawerOpen=Q[0],Lo(()=>x=!1)),w.$set(ie);const Se={};Z&16&&(Se.$$scope={dirty:Z,ctx:Q}),!k&&Z&1&&(k=!0,Se.open=Q[0],Lo(()=>k=!1)),T.$set(Se)},i(Q){M||(tt(w.$$.fragment,Q),tt(T.$$.fragment,Q),M=!0)},o(Q){ct(w.$$.fragment,Q),ct(T.$$.fragment,Q),M=!1},d(Q){Q&&Oe(e),Q&&Oe(v),Si(w,Q),Q&&Oe(C),Si(T,Q)}}}function lF(i,e,t){let n=!1;const l=kr.styles[0];Jd.update(()=>l);function u(o){n=o,t(0,n)}function p(o){n=o,t(0,n)}return[n,u,p]}class mF extends fr{constructor(e){super(),dr(this,e,lF,aF,hr,{})}}export{mF as P,F0 as c};
